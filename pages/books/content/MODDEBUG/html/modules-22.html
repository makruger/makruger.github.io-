<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Generic Kernel Debugging Support (genunix) - Solaris Modular Debugger Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-10-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Modular Debugger Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="modules-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter1-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">1.&nbsp;&nbsp;Modular Debugger Overview</a></p>
<p class="toc level1 tocsp"><a href="concepts-1.html">2.&nbsp;&nbsp;Debugger Concepts</a></p>
<p class="toc level1 tocsp"><a href="syntax-7.html">3.&nbsp;&nbsp;MDB Language Syntax</a></p>
<p class="toc level1 tocsp"><a href="interaction-3.html">4.&nbsp;&nbsp;Using MDB Commands Interactively</a></p>
<p class="toc level1 tocsp"><a href="commands-1.html">5.&nbsp;&nbsp;Built-In Commands</a></p>
<p class="toc level1 tocsp"><a href="chp-exec.html">6.&nbsp;&nbsp;Execution Control</a></p>
<p class="toc level1 tocsp"><a href="chp-kmdb.html">7.&nbsp;&nbsp;Kernel Execution Control</a></p>
<p class="toc level1 tocsp"><a href="modules-1.html">8.&nbsp;&nbsp;Kernel Debugging Modules</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Generic Kernel Debugging Support (<tt>genunix</tt>)</a></p>
</div>
<p class="toc level2"><a href="chapter1-2.html">Interprocess Communication Debugging Support (<tt>ipc</tt>)</a></p>
<p class="toc level2"><a href="modules-5.html">Loopback File System Debugging Support (<tt>lofs</tt>)</a></p>
<p class="toc level2"><a href="modules-23.html">Internet Protocol Module Debugging Support (<tt>ip</tt>)</a></p>
<p class="toc level2"><a href="modules-4.html">Kernel Runtime Link Editor Debugging Support (<tt>krtld</tt>)</a></p>
<p class="toc level2"><a href="modules-65.html">USB Framework Debugging Support (<tt>uhci</tt>)</a></p>
<p class="toc level2"><a href="modules-68.html">USB Framework Debugging Support (<tt>usba</tt>)</a></p>
<p class="toc level2"><a href="modules-10.html">x86: x86 Platform Debugging Support (<tt>unix</tt>)</a></p>
<p class="toc level2"><a href="modules-19.html">SPARC: sun4u Platform Debugging Support (<tt>unix</tt>)</a></p>
<p class="toc level1 tocsp"><a href="kmem-1.html">9.&nbsp;&nbsp;Debugging With the Kernel Memory Allocator</a></p>
<p class="toc level1 tocsp"><a href="api-5.html">10.&nbsp;&nbsp;Module Programming API</a></p>
<p class="toc level1 tocsp"><a href="options-1.html">A.&nbsp;&nbsp;Options</a></p>
<p class="toc level1 tocsp"><a href="notes-1.html">B.&nbsp;&nbsp;Notes</a></p>
<p class="toc level1 tocsp"><a href="adb-trans-1.html">C.&nbsp;&nbsp;Transition From <tt>adb</tt> and <tt>kadb</tt></a></p>
<p class="toc level1 tocsp"><a href="crash-4.html">D.&nbsp;&nbsp;Transition From <tt>crash</tt></a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="modules-22"></a><h3>Generic Kernel Debugging Support (<tt>genunix</tt>)</h3>


<a name="modules-24"></a><h4>Kernel Memory Allocator</h4>
<p>This section discusses the dcmds and walkers used to debug problems identified by
the Solaris kernel memory allocator and to examine memory and memory usage. The
dcmds and walkers described here are discussed in more detail in <a href="kmem-1.html">Chapter&nbsp;9, Debugging With the Kernel Memory Allocator</a>.</p>

<a name="modules-25"></a><h5>dcmds</h5>
<dl><a name="indexterm-121"></a><a name="indexterm-122"></a><dt><i>thread</i> <tt>::allocdby</tt></dt>
<dd><p>Given the address of a kernel thread, print a list of memory allocations it has performed in reverse chronological order. </p></dd>
<dt><i>bufctl</i> <tt>::bufctl</tt> [<tt>-a</tt> <i>address</i>] [<tt>-c</tt> <i>caller</i>] [<tt>-e</tt> <i>earliest</i>] [<tt>-l</tt> <i>latest</i>] [<tt>-t</tt> <i>thread</i>]</dt>
<dd><p><a name="indexterm-123"></a><a name="indexterm-124"></a>Print a summary of the <i>bufctl</i> information for the specified bufctl <i>address</i>.  If one or more options are present, the bufctl information is printed only if it matches the criteria defined by the option arguments; in this way, the dcmd can be used as a filter for input from a pipeline. The <tt>-a</tt> option indicates that the bufctl's corresponding buffer address must equal the specified address. The <tt>-c</tt> option indicates that a program counter value from the specified caller must be present in the bufctl's saved stack trace. The <tt>-e</tt> option indicates that the bufctl's timestamp must be greater than or equal to the specified earliest timestamp. The <tt>-l</tt> option indicates that the bufctl's timestamp must be less than or equal to the specified latest timestamp. The <tt>-t</tt> option indicates that the bufctl's thread pointer must be equal to the specified thread address.</p></dd>
<a name="indexterm-125"></a><a name="indexterm-126"></a><dt>[ <i>address</i> ] <tt>::findleaks</tt> [<tt>-v</tt>]</dt>
<dd><p>The <tt>::findleaks</tt> dcmd provides powerful and efficient detection of memory leaks in kernel crash dumps where the full set of kmem debug features has been enabled. The first execution of <tt>::findleaks</tt> processes the dump for memory leaks (this can take a few minutes), then coalesces the leaks by the allocation stack trace. The findleaks report shows a bufctl address and the topmost stack frame for each memory leak that was identified. </p><p>If the <tt>-v</tt> option is specified, the dcmd prints more verbose messages as it executes. If an explicit address is specified prior to the dcmd, the report is filtered and only leaks whose allocation stack traces contain the specified function address are displayed.</p></dd>
<a name="indexterm-127"></a><a name="indexterm-128"></a><dt><i>thread</i> <tt>::freedby</tt></dt>
<dd><p>Given the address of a kernel thread, print a list of memory frees it has performed, in reverse chronological order.</p></dd>
<a name="indexterm-129"></a><a name="indexterm-130"></a><dt><i>value</i> <tt>::kgrep</tt></dt>
<dd><p>Search the kernel address space for pointer-aligned addresses that contain the specified pointer-sized value. The list of addresses that contain matching values is then printed. Unlike MDB's built-in search operators, <tt>::kgrep</tt> searches every segment of the kernel's address space and searches across discontiguous segment boundaries. On large kernels, <tt>::kgrep</tt> can take a considerable amount of time to execute.</p></dd>
<dt><tt>::kmalog</tt> [ <tt>slab</tt> | <tt>fail</tt> ]</dt>
<dd><p><a name="indexterm-131"></a><a name="indexterm-132"></a>Display events in a kernel memory allocator transaction log. Events are displayed in time-reverse order, with the most recent event displayed first. For each event, <tt>::kmalog</tt> displays the time relative to the most recent event in T-minus notation (for example, T-0.000151879), the bufctl, the buffer address, the kmem cache name, and the stack trace at the time of the event. Without arguments, <tt>::kmalog</tt> displays the kmem transaction log, which is present only if <tt>KMF_AUDIT</tt> is set in <tt>kmem_flags</tt>. <tt>::kmalog</tt> <tt>fail</tt> displays the allocation failure log, which is always present; this can be useful in debugging drivers that don't cope with allocation failure correctly. <tt>::kmalog</tt> <tt>slab</tt> displays the slab create log, which is always present. <tt>::kmalog</tt> <tt>slab</tt> can be useful when searching for memory leaks. </p></dd>
<a name="indexterm-133"></a><a name="indexterm-134"></a><dt><tt>::kmastat</tt></dt>
<dd><p>Display the list of kernel memory allocator caches and virtual memory arenas, along with corresponding statistics. </p></dd>
<a name="indexterm-135"></a><a name="indexterm-136"></a><dt><tt>::kmausers</tt> [<tt>-ef</tt>] [<i>cache</i> ...]</dt>
<dd><p>Print information about the medium and large users of the kernel memory allocator that have current memory allocations. The output consists of one entry for each unique stack trace specifying the total amount of memory and number of allocations that was made with that stack trace. This dcmd requires that the <tt>KMF_AUDIT</tt> flag is set in <tt>kmem_flags</tt>. </p><p>If one or more cache names (for example, <tt>kmem_alloc_256</tt>) are specified, the scan of memory usage is restricted to those caches. By default all caches are included. If the <tt>-e</tt> option is used, the small users of the allocator are included. The small users are allocations that total less than 1024 bytes of memory or for which there are less than 10 allocations with the same stack trace. If the <tt>-f</tt> option is used, the stack traces are printed for each individual allocation.</p></dd>
<a name="indexterm-137"></a><a name="indexterm-138"></a><dt>[ <i>address</i> ] <tt>::kmem_cache</tt></dt>
<dd><p>Format and display the <tt>kmem_cache</tt> structure stored at the specified address, or the complete set of active <tt>kmem_cache</tt> structures.</p></dd>
<a name="indexterm-139"></a><a name="indexterm-140"></a><dt><tt>::kmem_log</tt></dt>
<dd><p>Display the complete set of kmem transaction logs, sorted in reverse chronological order. This dcmd uses a more concise tabular output  format than <tt>::kmalog</tt>.</p></dd>
<a name="indexterm-141"></a><a name="indexterm-142"></a><dt>[ <i>address</i> ] <tt>::kmem_verify</tt></dt>
<dd><p>Verify the integrity of the <tt>kmem_cache</tt> structure stored at the specified address, or the complete set of active <tt>kmem_cache</tt> structures. If an explicit cache address is specified, the dcmd displays more verbose information regarding errors; otherwise, a summary report is displayed. The <tt>::kmem_verify</tt> dcmd is discussed in more detail in <a href="casestudy-27.html">Kernel Memory Caches</a>.</p></dd>
<a name="indexterm-143"></a><a name="indexterm-144"></a><dt>[ <i>address</i>] <tt>::vmem</tt></dt>
<dd><p>Format and display the <tt>vmem</tt> structure stored at the specified address, or the complete set of active<tt>vmem</tt> structures.  This structure is defined in <tt>&lt;sys/vmem_impl.h&gt;</tt>.</p></dd>
<a name="indexterm-145"></a><a name="indexterm-146"></a><dt><i>address</i> <tt>::vmem_seg</tt></dt>
<dd><p>Format and display the <tt>vmem_seg</tt> structure stored at the specified address. This structure is defined in <tt>&lt;sys/vmem_impl.h&gt;</tt>.</p></dd>
<dt><i>address</i> <tt>::whatis</tt> [<tt>-abv</tt>]</dt>
<dd><p><a name="indexterm-147"></a><a name="indexterm-148"></a>Report information about the specified address. In particular, <tt>::whatis</tt> will attempt to determine if the address is a pointer to a kmem-managed buffer or another type of special memory region, such as a thread stack, and report its findings. If the <tt>-a</tt> option is present, the dcmd reports all matches instead of just the first match to its queries. If the <tt>-b</tt> option is present, the dcmd also attempts to determine if the address is referred to by a known kmem <tt>bufctl</tt>. If the <tt>-v</tt> option is present, the dcmd reports its progress as it searches various kernel data structures.</p></dd>
</dl>


<a name="modules-26"></a><h5>Walkers</h5>
<dl><a name="indexterm-149"></a><a name="indexterm-150"></a><dt>allocdby</dt>
<dd><p>Given the address of a <tt>kthread_t</tt> structure as a starting point, iterate over the set of <tt>bufctl</tt> structures corresponding to memory allocations performed by this kernel thread.</p></dd>
<a name="indexterm-151"></a><a name="indexterm-152"></a><dt>bufctl</dt>
<dd><p>Given the address of a <tt>kmem_cache_t</tt> structure as a starting point, iterate over the set of allocated <tt>bufctl</tt>s associated with this cache.</p></dd>
<a name="indexterm-153"></a><a name="indexterm-154"></a><dt>freectl</dt>
<dd><p>Given the address of a <tt>kmem_cache_t</tt> structure as a starting point, iterate over the set of free <tt>bufctl</tt>s associated with this cache.</p></dd>
<a name="indexterm-155"></a><a name="indexterm-156"></a><dt>freedby</dt>
<dd><p>Given the address of a <tt>kthread_t</tt> structure as a starting point, iterate over the set of <tt>bufctl</tt> structures corresponding to memory deallocations performed by this kernel thread.</p></dd>
<a name="indexterm-157"></a><a name="indexterm-158"></a><dt>freemem</dt>
<dd><p>Given the address of a <tt>kmem_cache_t</tt> structure as a starting point, iterate over the set of free buffers associated with this cache.</p></dd>
<a name="indexterm-159"></a><a name="indexterm-160"></a><dt>kmem</dt>
<dd><p>Given the address of a <tt>kmem_cache_t</tt> structure as a starting point, iterate over the set of allocated buffers associated with this cache.</p></dd>
<a name="indexterm-161"></a><a name="indexterm-162"></a><dt>kmem_cache</dt>
<dd><p>Iterate over the active set of <tt>kmem_cache_t</tt> structures.  This structure is defined in <tt>&lt;sys/kmem_impl.h&gt;</tt>.</p></dd>
<a name="indexterm-163"></a><a name="indexterm-164"></a><dt>kmem_cpu_cache</dt>
<dd><p>Given the address of a <tt>kmem_cache_t</tt> structure as a starting point, iterate over the per-CPU <tt>kmem_cpu_cache_t</tt> structures associated with this cache. This structure is defined in <tt>&lt;sys/kmem_impl.h&gt;</tt>.</p></dd>
<a name="indexterm-165"></a><a name="indexterm-166"></a><dt>kmem_slab</dt>
<dd><p>Given the address of a <tt>kmem_cache_t</tt> structure as a starting point, iterate over the set of associated <tt>kmem_slab_t</tt> structures.  This structure is defined in <tt>&lt;sys/kmem_impl.h&gt;</tt>.</p></dd>
<a name="indexterm-167"></a><a name="indexterm-168"></a><dt>kmem_log</dt>
<dd><p>Iterate over the set of <tt>bufctl</tt>s stored in the kmem allocator transaction log.</p></dd>
<dt>leak</dt>
<dd><p>Given the address of a <tt>bufctl</tt> structure, iterate over the set of <tt>bufctl</tt> structures corresponding to leaked memory buffers with similar allocation stack traces. The <tt>::findleaks</tt> dcmd must be applied to locate memory leaks before the leak walker can be used</p></dd>
<dt>leakbuf</dt>
<dd><p>Given the address of a <tt>bufctl</tt> structure, iterate over the set of buffer addresses corresponding to leaked memory buffers with similar allocation stack traces. The <tt>::findleaks</tt> dcmd must be applied to locate memory leaks before the leakbuf walker can be used. </p></dd>
</dl>


<a name="modules-27"></a><h4>File Systems</h4>
<p><a name="indexterm-169"></a>The MDB file systems debugging support includes a built-in facility to convert vnode
pointers to the corresponding file system path name.  This conversion is performed
using the Directory Name Lookup Cache (DNLC); because the cache does not hold
all active vnodes, some vnodes might not be able to be converted to
path names and &ldquo;<tt>??</tt>&rdquo; is displayed instead of a name.</p>

<a name="modules-51"></a><h5>dcmds</h5>
<dl><a name="indexterm-170"></a><a name="indexterm-171"></a><dt><tt>::fsinfo</tt></dt>
<dd><p>Display a table of mounted file systems, including the <tt>vfs_t</tt> address, <tt>ops</tt> vector, and mount point of each file system.</p></dd>
<a name="indexterm-172"></a><a name="indexterm-173"></a><dt><tt>::lminfo</tt></dt>
<dd><p>Display a table of vnodes with active network locks registered with the lock manager. The pathname corresponding to each vnode is shown.</p></dd>
<a name="indexterm-174"></a><a name="indexterm-175"></a><dt><i>address</i> <tt>::vnode2path</tt> [<tt>-v</tt>]</dt>
<dd><p>Display the pathname corresponding to the given vnode address.  If the <tt>-v</tt> option is specified, the dcmd prints a more verbose display, including the vnode pointer of each intermediate path component.</p></dd>
</dl>


<a name="modules-30"></a><h5>Walkers</h5>
<dl><a name="indexterm-176"></a><a name="indexterm-177"></a><dt>buf</dt>
<dd><p>Iterate over the set of active block I/O transfer structures (<tt>buf_t</tt> structures). The <tt>buf</tt> structure is defined in <tt>&lt;sys/buf.h&gt;</tt> and is described in more detail in <a href="http://docs.sun.com/doc/819-2257/buf-9s?a=view"><tt>buf</tt>(9S)</a>.</p></dd>
</dl>


<a name="modules-28"></a><h4>Virtual Memory</h4>
<p>This section describes the debugging support for the kernel virtual memory subsystem.</p>

<a name="modules-31"></a><h5>dcmds</h5>
<dl><a name="indexterm-178"></a><a name="indexterm-179"></a><dt><i>address</i> <tt>::addr2smap</tt> [<i>offset</i>]</dt>
<dd><p>Print the <tt>smap</tt> structure address that corresponds to the given address in the kernel's segmap address space segment.</p></dd>
<a name="indexterm-180"></a><a name="indexterm-181"></a><dt><i>as</i> <tt>::as2proc</tt></dt>
<dd><p>Display the <tt>proc_t</tt> address for the process corresponding to the <tt>as_t</tt> address <i>as</i>. </p></dd>
<a name="indexterm-182"></a><a name="indexterm-183"></a><dt>[ <i>address</i> ] <tt>::memlist</tt> [<tt>-aiv</tt>]</dt>
<dd><p>Display the specified <tt>memlist</tt> structure or one of the well-known <tt>memlist</tt> structures. If no <tt>memlist</tt> address and options are present or if the <tt>-i</tt> option is present, the <tt>memlist</tt> representing physically installed memory is displayed. If the <tt>-a</tt> option is present, the <tt>memlist</tt> representing available physical memory is displayed. If the <tt>-v</tt> option is present, the memlist representing available virtual memory is displayed.</p></dd>
<a name="indexterm-184"></a><a name="indexterm-185"></a><dt><tt>::memstat</tt></dt>
<dd><p>Display a system-wide memory usage summary. The amount and percentage of system memory consumed by different classes of pages (kernel, anonymous memory, executables and libraries, page cache, and free lists) are displayed, along with the total amount of system memory.</p></dd>
<a name="indexterm-186"></a><a name="indexterm-187"></a><dt>[ <i>address</i> ] <tt>::page</tt></dt>
<dd><p>Display the properties of the specified <tt>page_t</tt>.  If no <tt>page_t</tt> address is specified, the dcmd displays the properties of all system pages.</p></dd>
<a name="indexterm-188"></a><a name="indexterm-189"></a><dt><i>seg</i> <tt>::seg</tt></dt>
<dd><p>Format and display the specified address space segment (<tt>seg_t</tt> address).</p></dd>
<a name="indexterm-190"></a><a name="indexterm-191"></a><dt>[ <i>address</i> ] <tt>::swapinfo</tt></dt>
<dd><p>Display information on all active <tt>swapinfo</tt> structures or about the specified struct <tt>swapinfo</tt>. The vnode, filename, and statistics for each structure are displayed.</p></dd>
<a name="indexterm-192"></a><a name="indexterm-193"></a><dt><i>vnode</i> <tt>::vnode2smap</tt>[<i>offset</i>]</dt>
<dd><p>Print the <tt>smap</tt> structure address that corresponds to the given <tt>vnode_t</tt> address and offset.</p></dd>
</dl>


<a name="modules-32"></a><h5>Walkers</h5>
<dl><a name="indexterm-194"></a><a name="indexterm-195"></a><dt>anon</dt>
<dd><p>Given the address of an <tt>anon_map</tt> structure as a starting point, iterate over the set of related anon structures. The anon map implementation is defined in <tt>&lt;vm/anon.h&gt;</tt>.</p></dd>
<a name="indexterm-196"></a><a name="indexterm-197"></a><dt>memlist</dt>
<dd><p>Iterate over the spans of the specified <tt>memlist</tt> structure.  This walker can be used in conjunction with the <tt>::memlist</tt> dcmd to display each span.</p></dd>
<a name="indexterm-198"></a><a name="indexterm-199"></a><dt>page</dt>
<dd><p>Iterate over all system <tt>page</tt> structures.  If an explicit address is specified for the walk, this is taken to be the address of a vnode and the walker iterates over only those pages associated with the vnode.</p></dd>
<a name="indexterm-200"></a><a name="indexterm-201"></a><dt>seg</dt>
<dd><p>Given the address of an <tt>as_t</tt> structure as a starting point, iterate over the set of address space segments (<tt>seg</tt> structures) associated with the specified address space.  The <tt>seg</tt> structure is defined in <tt>&lt;vm/seg.h&gt;</tt>.</p></dd>
<a name="indexterm-202"></a><a name="indexterm-203"></a><dt>swapinfo</dt>
<dd><p>Iterate over the list of active <tt>swapinfo</tt> structures.  This walker may be used in conjunction with the <tt>::swapinfo</tt> dcmd.</p></dd>
</dl>


<a name="modules-33"></a><h4>CPUs and the Dispatcher</h4>
<p>This section describes the facilities for examining the state of the cpu structures
and the kernel dispatcher.</p>

<a name="modules-34"></a><h5>dcmds</h5>
<dl><a name="indexterm-204"></a><a name="indexterm-205"></a><dt><tt>::callout</tt></dt>
<dd><p>Display the callout table. The function, argument, and expiration time for each callout is displayed.</p></dd>
<a name="indexterm-206"></a><a name="indexterm-207"></a><dt><tt>::class</tt></dt>
<dd><p>Display the scheduling class table.</p></dd>
<a name="indexterm-208"></a><a name="indexterm-209"></a><dt>[ <i>cpuid</i> ] <tt>::cpuinfo</tt> [<tt>-v</tt>]</dt>
<dd><p>Display a table of the threads currently executing on each CPU. If an optional CPU ID number or CPU structure address is specified prior to the dcmd name, only the information for the specified CPU is displayed.  If the <tt>-v</tt> option is present, <tt>::cpuinfo</tt> also displays the runnable threads waiting to execute on each CPU as well as the active interrupt threads. </p></dd>
</dl>


<a name="modules-35"></a><h5>Walkers</h5>
<dl><a name="indexterm-210"></a><a name="indexterm-211"></a><dt>cpu</dt>
<dd><p>Iterate over the set of kernel CPU structures. The <tt>cpu_t</tt> structure is defined in <tt>&lt;sys/cpuvar.h&gt;</tt>.</p></dd>
</dl>


<a name="modules-36"></a><h4>Device Drivers and DDI Framework</h4>
<p>This section describes dcmds and walkers that are useful for kernel developers as
well as third-party device driver developers.</p>

<a name="modules-37"></a><h5>dcmds</h5>
<dl><a name="indexterm-212"></a><a name="indexterm-213"></a><dt><i>address</i> <tt>::binding_hash_entry</tt></dt>
<dd><p>Given the address of a kernel name-to-major number binding hash table entry (struct <tt>bind</tt>), display the node binding name, major number, and pointer to the next element.</p></dd>
<a name="indexterm-214"></a><a name="indexterm-215"></a><dt><tt>::devbindings</tt> <i>device-name</i></dt>
<dd><p>Display the list of all instances of the named driver. The output consists of an entry for each instance, beginning with the pointer to the struct <tt>dev_info</tt> (viewable with <tt>$&lt;devinfo</tt> or <tt>::devinfo</tt>), the driver name, the instance number, and the driver and system properties associated with that instance.</p></dd>
<a name="indexterm-216"></a><a name="indexterm-217"></a><dt><i>address</i> <tt>::devinfo</tt> [ <tt>-q</tt> ]</dt>
<dd><p>Print the system and driver properties associated with a devinfo node. If the <tt>-q</tt> option is specified, only a quick summary of the device node is shown. </p></dd>
<a name="indexterm-218"></a><a name="indexterm-219"></a><dt><i>address</i> <tt>::devinfo2driver</tt></dt>
<dd><p>Print the name of the driver (if any) associated with the <tt>devinfo</tt> node.</p></dd>
<a name="indexterm-220"></a><a name="indexterm-221"></a><dt>[ <i>address</i> ] <tt>::devnames</tt> [ <tt>-v</tt> ]</dt>
<dd><p>Display the kernel's <tt>devnames</tt> table along with the <tt>dn_head</tt> pointer, which points at the driver instance list. If the <tt>-v</tt> flag is specified, additional information stored at each entry in the <tt>devnames</tt> table is displayed.</p></dd>
<a name="indexterm-222"></a><a name="indexterm-223"></a><dt>[ <i>devinfo</i> ] <tt>::prtconf</tt> [ <tt>-cpv</tt> ]</dt>
<dd><p>Display the kernel device tree starting at the device node specified by <i>devinfo</i>. If <i>devinfo</i> is not provided, the root of the device tree is assumed by default. If the <tt>-c</tt> option is specified, only children of the given device node are displayed. If the <tt>-p</tt> option is specified, only ancestors of the given device node are displayed. If <tt>-v</tt> is specified, the properties associated with each node are displayed. </p></dd>
<a name="indexterm-224"></a><a name="indexterm-225"></a><dt>[ <i>major-num</i> ] <tt>::major2name</tt> [ <i>major-num</i> ]</dt>
<dd><p>Display the driver name corresponding to the specified major number. The major number can be specified as an expression preceding the dcmd or as a command-line argument.</p></dd>
<a name="indexterm-226"></a><a name="indexterm-227"></a><dt>[ <i>address</i> ] <tt>::modctl2devinfo</tt></dt>
<dd><p>Print all of the device nodes that correspond to the specified <tt>modctl</tt> address.</p></dd>
<a name="indexterm-228"></a><a name="indexterm-229"></a><dt><tt>::name2major</tt> <i>driver-name</i></dt>
<dd><p>Given a device driver name, display its major number.</p></dd>
<a name="indexterm-230"></a><a name="indexterm-231"></a><dt>[ <i>address</i> ] <tt>::softstate</tt> [ <i>instance-number</i> ]</dt>
<dd><p>Given a softstate state pointer (see <a href="http://docs.sun.com/doc/819-2256/ddi-soft-state-init-9f?a=view"><tt>ddi_soft_state_init</tt>(9F)</a>) and a device instance number, display the soft state for that instance.</p></dd>
</dl>


<a name="modules-38"></a><h5>Walkers</h5>
<dl><a name="indexterm-232"></a><a name="indexterm-233"></a><dt>binding_hash</dt>
<dd><p>Given the address of an array of kernel binding hash table entries (struct <tt>bind</tt> **), walk all entries in the hash table and return the address of each struct <tt>bind</tt>.</p></dd>
<a name="indexterm-234"></a><a name="indexterm-235"></a><dt>devinfo</dt>
<dd><p>First, iterate over the parents of the given devinfo and return them in order of seniority from most to least senior. Second, return the given devinfo itself. Third, iterate over the children of the given devinfo in order of seniority from most to least senior. The <tt>dev_info</tt> struct is defined in <tt>&lt;sys/ddi_impldefs.h&gt;</tt>.</p></dd>
<a name="indexterm-236"></a><a name="indexterm-237"></a><dt>devinfo_children</dt>
<dd><p>First, return the given devinfo, then iterate over the children of the given devinfo in order of seniority from most to least senior. The <tt>dev_info</tt> struct is defined in <tt>&lt;sys/ddi_impldefs.h&gt;</tt>.</p></dd>
<a name="indexterm-238"></a><a name="indexterm-239"></a><dt>devinfo_parents</dt>
<dd><p>Iterate over the parents of the given devinfo in order of seniority from most to least senior, and then return the given devinfo. The <tt>dev_info</tt> struct is defined in <tt>&lt;sys/ddi_impldefs.h&gt;</tt>.</p></dd>
<a name="indexterm-240"></a><a name="indexterm-241"></a><dt>devi_next</dt>
<dd><p>Iterate over the siblings of the given devinfo. The <tt>dev_info</tt> struct is defined in <tt>&lt;sys/ddi_impldefs.h&gt;</tt>.</p></dd>
<a name="indexterm-242"></a><a name="indexterm-243"></a><dt>devnames</dt>
<dd><p>Iterate over the entries in the devnames array. This structure is defined in <tt>&lt;sys/autoconf.h&gt;</tt>.</p></dd>
<a name="indexterm-244"></a><a name="indexterm-245"></a><dt>softstate</dt>
<dd><p>Given a softstate pointer (see <tt>ddi_soft_state_init</tt>(9F)) display all non-NULL pointers to driver state structures.</p></dd>
<a name="indexterm-246"></a><a name="indexterm-247"></a><dt>softstate_all</dt>
<dd><p>Given a softstate pointer (see <tt>ddi_soft_state_init</tt>(9F)) display all pointers to driver state structures. Note that the pointers for unused instances will be NULL.</p></dd>
</dl>


<a name="modules-39"></a><h4>STREAMS</h4>
<p>This section describes dcmds and walkers that are useful for kernel developers as
well as developers of third-party STREAMS modules and drivers.</p>

<a name="modules-40"></a><h5>dcmds</h5>
<dl><dt><i>address</i> <tt>::mblk2dblk</tt></dt>
<dd><p>Given the address of an <tt>mblk_t</tt>, print the address of the corresponding <tt>dblk_t</tt>.</p></dd>
<dt>[<i>address</i>] <tt>::mblk_verify</tt></dt>
<dd><p>Verify the integrity of one or more message blocks. If an explicit message block address is specified, the integrity of this message block is checked. If no address is specified, the integrity of all active message blocks are checked. This dcmd produces output for any invalid message block state that is detected. </p></dd>
<a name="indexterm-248"></a><a name="indexterm-249"></a><dt><i>address</i> <tt>::queue</tt> [<tt>-v</tt>] [<tt>-f</tt> <i>flag</i>] [<tt>-F</tt> <i>flag</i>] [<tt>-s</tt> <i>syncq</i>]</dt>
<dd><p>Filter and display the specified <tt>queue_t</tt> data structure. With no options, various properties of the <tt>queue_t</tt> are shown. If the <tt>-v</tt> option is present, the queue flags are decoded in greater detail. If the <tt>-f</tt>, <tt>-F</tt>, or <tt>-m</tt> options are present, the queue is displayed only if it matches the criteria defined by the arguments to these options; in this way, the dcmd can be used as a filter for input from a pipeline. The <tt>-f</tt> option indicates that the specified flag (one of the Q flag names from <tt>&lt;sys/stream.h&gt;</tt>) must be present in the queue flags. The <tt>-F</tt> option indicates that the specified flag must be absent from the queue flags. The <tt>-m</tt> option indicates that the module name associated with the queue must match the specified modname. The <tt>-s</tt> option indicates that the <tt>syncq_t</tt> associated with the queue must match the specified <tt>syncq_t</tt> address. </p></dd>
<a name="indexterm-250"></a><a name="indexterm-251"></a><dt><i>address</i> <tt>::q2syncq</tt></dt>
<dd><p>Given the address of a <tt>queue_t</tt>, print the address of the corresponding <tt>syncq_t</tt> data structure.</p></dd>
<a name="indexterm-252"></a><a name="indexterm-253"></a><dt><i>address</i> <tt>::q2otherq</tt></dt>
<dd><p>Given the address of a <tt>queue_t</tt>, print the address of the peer read or write queue structure.</p></dd>
<a name="indexterm-254"></a><a name="indexterm-255"></a><dt><i>address</i> <tt>::q2rdq</tt></dt>
<dd><p>Given the address of a <tt>queue_t</tt>, print the address of the corresponding read queue.</p></dd>
<a name="indexterm-256"></a><a name="indexterm-257"></a><dt><i>address</i> <tt>::q2wrq</tt></dt>
<dd><p>Given the address of a <tt>queue_t</tt>, print the address of the corresponding write queue.</p></dd>
<a name="indexterm-258"></a><a name="indexterm-259"></a><dt>[ <i>address</i> ] <tt>::stream</tt></dt>
<dd><p>Display a visual picture of a kernel STREAM data structure, given the address of the <tt>stdata_t</tt> structure representing the STREAM head. The read and write queue pointers, byte count, and flags for each module are shown, and in some cases additional information for the specific queue is shown in the margin.</p></dd>
<dt><i>address</i> <tt>::syncq</tt> [<tt>-v</tt>] [<tt>-f</tt> <i>flag</i>] [<tt>-F</tt> <i>flag</i>] [<tt>-t</tt> <i>type</i>] [<tt>-T</tt> <i>type</i>]</dt>
<dd><p><a name="indexterm-260"></a><a name="indexterm-261"></a>Filter and display the specified <tt>syncq_t</tt> data structure. With no options, various properties of the <tt>syncq_t</tt> are shown. If the <tt>-v</tt> option is present, the syncq flags are decoded in greater detail. If the <tt>-f</tt>, <tt>-F</tt>, <tt>-t</tt>, or <tt>-T</tt> options are present, the syncq is displayed only if it matches the criteria defined by the arguments to these options; in this way, the dcmd can be used as a filter for input from a pipeline. The <tt>-f</tt> option indicates that the specified flag (one of the <tt>SQ_</tt> flag names from <tt>&lt;sys/strsubr.h&gt;</tt>) must be present in the syncq flags. The <tt>-F</tt> option indicates that the specified flag must be absent from the syncq flags. The <tt>-t</tt> option indicates that the specified type (one of the <tt>SQ_CI</tt> or <tt>SQ_CO</tt> type names from <tt>&lt;sys/strsubr.h&gt;</tt>) must be present in the syncq type bits. The <tt>-T</tt> option indicates that the specified type must be absent from the syncq type bits.</p></dd>
<a name="indexterm-262"></a><a name="indexterm-263"></a><dt><i>address</i> <tt>::syncq2q</tt></dt>
<dd><p>Given the address of a <tt>syncq_t</tt>, print the address of the corresponding <tt>queue_t</tt> data structure.</p></dd>
</dl>


<a name="modules-41"></a><h5>Walkers</h5>
<dl><dt>b_cont</dt>
<dd><p>Given the address of an <tt>mblk_t</tt>, iterate over the set of associated message structures by following the <tt>b_cont</tt> pointer. The <tt>b_cont</tt> pointer is used to link a given message block to the next associated message block that is the continuation of the same message. The message block is described in more detail in <tt>msgb</tt>(9S)</p></dd>
<dt>b_next</dt>
<dd><p>Given the address of an <tt>mblk_t</tt>, iterate over the set of associated message structures by following the <tt>b_next</tt> pointer. The <tt>b_next</tt> pointer is used to link a given message block to the next associated message block on a given queue. The message block is described in more detail in <tt>msgb</tt>(9S).</p></dd>
<a name="indexterm-264"></a><a name="indexterm-265"></a><dt>qlink</dt>
<dd><p>Given the address of a <tt>queue_t</tt> structure, walk the list of related queues using the <tt>q_link</tt> pointer.  This structure is defined in <tt>&lt;sys/stream.h&gt;</tt>.</p></dd>
<a name="indexterm-266"></a><a name="indexterm-267"></a><dt>qnext</dt>
<dd><p>Given the address of a <tt>queue_t</tt> structure, walk the list of related queues using the <tt>q_next</tt> pointer.  This structure is defined in <tt>&lt;sys/stream.h&gt;</tt>.</p></dd>
<a name="indexterm-268"></a><a name="indexterm-269"></a><dt>readq</dt>
<dd><p>Given the address of an <tt>stdata_t</tt> structure, walk the list of read-side queue structures.</p></dd>
<a name="indexterm-270"></a><a name="indexterm-271"></a><dt>writeq</dt>
<dd><p>Given the address of an <tt>stdata_t</tt> structure, walk the list of write-side queue structures. </p></dd>
</dl>


<a name="modules-77"></a><h4>Networking</h4>
<p>The following dcmds and walkers are provided to help debug the core kernel
networking stack protocols.</p>

<a name="modules-78"></a><h5>dcmds</h5>
<dl><a name="indexterm-272"></a><a name="indexterm-273"></a><dt><i>address</i> <tt>::mi</tt> [<tt>-p</tt>] [<tt>-d</tt> | <tt>-m</tt>]</dt>
<dd><p>Given the address of a kernel MI_O, filter and display the MI_O or its payload. If the <tt>-p</tt> option is specified, then the address of the corresponding payload of the MI_O is displayed, otherwise the MI_O itself is displayed. Specifying filter <tt>-d</tt> or <tt>-m</tt> enables the dcmd to filter device or module MI_O objects respectively.</p></dd>
<a name="indexterm-274"></a><a name="indexterm-275"></a><dt><tt>::netstat</tt> [<tt>-av</tt>] [<tt>-f</tt> <tt>inet</tt> | <tt>inet6</tt> | <tt>unix</tt>] [<tt>-P</tt> <tt>tcp</tt> | <tt>udp</tt>]</dt>
<dd><p>Show network statistics and active connections. If the <tt>-a</tt> option is present, the state of all sockets is displayed. If the <tt>-v</tt> option is present, more verbose output is displayed. If the <tt>-f</tt> option is present, only connections associated with the specified address family are displayed. If the <tt>-P</tt> option is present, only connections associated with the specified protocols are displayed.</p></dd>
<a name="indexterm-276"></a><a name="indexterm-277"></a><dt>[ <i>address</i> ] <tt>::sonode</tt> [<tt>-f</tt> <tt>inet</tt> | <tt>inet6</tt> | <tt>unix</tt> | <i>id</i>] [<tt>-t</tt> <tt>stream</tt> | <tt>dgram</tt> | <tt>raw</tt> | <i>id</i>] [<tt>-p</tt> <i>id</i>]</dt>
<dd><p>Filters and displays sonode objects. If no address is given, then the list of AF_UNIX sockets is displayed, otherwise only the specified sonode is displayed. If the <tt>-f</tt> option is present, then only sockets of the given family will be output. If the <tt>-t</tt> option is present, then only sonodes of the given type will be output. If the <tt>-p</tt> option is present, then only sockets of the given protocol will be displayed.</p></dd>
<a name="indexterm-278"></a><a name="indexterm-279"></a><dt>[ <i>address</i> ] <tt>::tcpb</tt> [<tt>-av</tt>] [<tt>-P</tt> <tt>v4</tt> | <tt>v6</tt>]</dt>
<dd><p>Filters and displays tcpb objects. If no address is specified, all connections are walked, otherwise only the specified tcpb is filtered/displayed. Specifying <tt>-a</tt> filters for only active connections and <tt>-P</tt> can be used to filter for TCP IPv4 or IPv6 connections. The <tt>tcpb</tt> dcmd is intelligent about filtering TCP connections, and if a IPv6 TCP connection is in a state that would still facilitate a IPv4 connection, the <tt>-P</tt> filter considers the connection as both IPv4 and IPv6 in much the same way that <tt>::netstat</tt> does. If the dcmd is not being used as a filter and the <tt>-v</tt> option is specified, then the output of the dcmd will be verbose.</p></dd>
</dl>


<a name="modules-79"></a><h5>Walkers</h5>
<dl><a name="indexterm-280"></a><a name="indexterm-281"></a><dt>ar</dt>
<dd><p>Given the address of an ar, this walker walks all ar objects from the given ar to the final ar. If no address is specified, all ar objects are walked.</p></dd>
<a name="indexterm-282"></a><a name="indexterm-283"></a><dt>icmp</dt>
<dd><p>Given the address of an icmp, this walker walks all icmp objects from the given icmp to the final icmp. If no address is specified, all icmp objects are walked.</p></dd>
<a name="indexterm-284"></a><a name="indexterm-285"></a><dt>ill</dt>
<dd><p>Given the address of an interface link layer structure (ill), this walker walks all ill objects from the given ill to the final. If no address is specified, all ill objects are walked.</p></dd>
<a name="indexterm-286"></a><a name="indexterm-287"></a><dt>ipc</dt>
<dd><p>Given the address of an ipc, this walker walks all ipc objects from the given ipc to the final ipc. If no address is specified, all ipc objects are walked.</p></dd>
<a name="indexterm-288"></a><a name="indexterm-289"></a><dt>mi</dt>
<dd><p>Given the address of a MI_O, walk all the MI_O's in this MI.</p></dd>
<a name="indexterm-290"></a><a name="indexterm-291"></a><dt>sonode</dt>
<dd><p>Given the address of a AF_UNIX sonode, walk the associated list of AF_UNIX sonodes beginning with the given sonode. If no address is specified, this walker walks the list of all AF_UNIX sockets.</p></dd>
<a name="indexterm-292"></a><a name="indexterm-293"></a><dt>tcpb</dt>
<dd><p>Given the address of a tcpb, this walker walks all TCP connections from the given tcpb to the final TCP connection. If no address is specified, all tcpb objects are walked.</p></dd>
<a name="indexterm-294"></a><a name="indexterm-295"></a><dt>udp</dt>
<dd><p>Given the address of a udp, this walker walks all udp objects from the given udp to the final udp. If no address is specified, all udp objects are walked.</p></dd>
</dl>


<a name="modules-42"></a><h4>Files, Processes, and Threads</h4>
<p>This section describes dcmds and walkers used to format and examine various fundamental
file, process, and thread structures in the Solaris kernel. </p>

<a name="modules-43"></a><h5>dcmds</h5>
<dl><a name="indexterm-296"></a><a name="indexterm-297"></a><dt><i>process</i> <tt>::fd</tt> <i>fd-num</i></dt>
<dd><p>Print the <tt>file_t</tt> address corresponding to the file descriptor <i>fd-num</i> associated with the specified process. The process is specified using the virtual address of its <tt>proc_t</tt> structure.</p></dd>
<a name="indexterm-298"></a><a name="indexterm-299"></a><dt><i>thread</i> <tt>::findstack</tt> [ <i>command</i> ]</dt>
<dd><p>Print the stack trace associated with the given kernel thread, identified by the virtual address of its <tt>kthread_t</tt> structure.  The dcmd employs several different algorithms to locate the appropriate stack backtrace. If an optional command string is specified, the dot variable is reset to the frame pointer address of the topmost stack frame, and the specified command is evaluated as if it had been typed at the command line. The default command string is &ldquo;<tt>&lt;.$C0</tt>&rdquo;; that is, print a stack trace including frame pointers but no arguments.</p></dd>
<a name="indexterm-300"></a><a name="indexterm-301"></a><dt><tt>::pgrep</tt> [<tt>-x</tt>] [<tt>-n</tt>|<tt>-o</tt>] <i>regexp</i></dt>
<dd><p>Display process information for processes whose name matches the <i>regexp</i> regular expression pattern. The <tt>::pgrep</tt> dcmd is similar to the <a href="http://docs.sun.com/doc/819-2239/pgrep-1?a=view"><tt>pgrep</tt>(1)</a> command. The <tt>::pgrep</tt> dcmd is used to pattern match against all processes. When the <tt>-n</tt> option is used, display only the newest process that matches the pattern. When the <tt>-o</tt> option is used, display only the oldest process that matches the pattern. When the <tt>-x</tt> option is used, display only those processes whose names are exactly the same as the search pattern.</p><p>In <a href="http://docs.sun.com/doc/819-2239/kmdb-1?a=view"><tt>kmdb</tt>(1)</a>, the <i>regexp</i> used with <tt>::pgrep</tt> must be a plain alpha-numeric text string.</p></dd>
<a name="indexterm-302"></a><a name="indexterm-303"></a><dt><i>pid</i> <tt>::pid2proc</tt></dt>
<dd><p>Print the <tt>proc_t</tt> address corresponding to the specified PID. Recall that MDB's default base is hexadecimal, so decimal PIDs obtained using <a href="http://docs.sun.com/doc/819-2239/pgrep-1?a=view"><tt>pgrep</tt>(1)</a> or <a href="http://docs.sun.com/doc/819-2239/ps-1?a=view"><tt>ps</tt>(1)</a> should be prefixed with <tt>0t</tt>. </p></dd>
<a name="indexterm-304"></a><a name="indexterm-305"></a><dt><i>process</i> <tt>::pmap</tt> [<tt>-q</tt>]</dt>
<dd><p>Print the memory map of the process indicated by the given process address. The dcmd displays output using a format similar to <a href="http://docs.sun.com/doc/819-2239/pmap-1?a=view"><tt>pmap</tt>(1)</a>. If the <tt>-q</tt> option is present, the dcmd displays an abbreviated form of its output that requires less processing time.</p></dd>
<dt>[ <i>address</i> ] <tt>::ps</tt> [<tt>-fltTP</tt>]</dt>
<dd><p><a name="indexterm-306"></a><a name="indexterm-307"></a>Print a summary of the information related to the specified process, or all active system processes, similar to <a href="http://docs.sun.com/doc/819-2239/ps-1?a=view"><tt>ps</tt>(1)</a>. If the <tt>-f</tt> option is specified, the full command name and initial arguments are printed. If the <tt>-l</tt> option is specified, the LWPs associated with each process are printed. If the <tt>-t</tt> option is specified, the kernel threads associated with each process LWP are printed. If the <tt>-T</tt> option is specified, the task ID associated with each process is displayed. If the <tt>-P</tt> option is specified, the project ID associated with each process is displayed. </p></dd>
<a name="indexterm-308"></a><a name="indexterm-309"></a><dt><tt>::ptree</tt></dt>
<dd><p>Print a process tree, with child processes indented from their respective parent processes. The dcmd displays output using a format similar to <a href="http://docs.sun.com/doc/819-2239/ptree-1?a=view"><tt>ptree</tt>(1)</a>.</p></dd>
<a name="indexterm-310"></a><a name="indexterm-311"></a><dt><tt><i>address</i> ::task</tt></dt>
<dd><p>Print a list of the active kernel task structures and their associated ID numbers and attributes. The process task ID is described in more detail in <tt>settaskid</tt>(2). </p></dd>
<a name="indexterm-312"></a><a name="indexterm-313"></a><dt>[ <i>address</i> ] <tt>::thread</tt> [<tt>-bdfimps</tt>]</dt>
<dd><p>Display properties of the specified kernel <tt>kthread_t</tt> structure.  If no <tt>kthread_t</tt> address is specified, the properties of all kernel threads are displayed. The dcmd options are used to control which output columns are shown. If no options are present, the <tt>-i</tt> option is enabled by default. If the <tt>-b</tt> option is present, information relating to the thread's turnstile and blocking synchronization object is shown. If the <tt>-d</tt> option is present, the thread's dispatcher priority, binding, and last dispatch time is shown. If the <tt>-f</tt> option is present, threads whose state is TS_FREE are elided from the output. If the <tt>-i</tt> option is present (the default), thread state, flags, priority, and interrupt information is shown. If the <tt>-m</tt> option is present, all of the other output options are merged together on to a single output line. If the <tt>-p</tt> option is present, the thread's process, LWP, and credential pointers are displayed. If the <tt>-s</tt> option is present, the thread's signal queue and masks of pending and held signals are shown.</p></dd>
<a name="indexterm-314"></a><a name="indexterm-315"></a><dt><i>vnode</i> <tt>::whereopen</tt></dt>
<dd><p>Given a <tt>vnode_t</tt> address, print the <tt>proc_t</tt> addresses of all processes that have this vnode currently open in their file table. </p></dd>
</dl>


<a name="modules-44"></a><h5>Walkers</h5>
<dl><a name="indexterm-316"></a><a name="indexterm-317"></a><dt>file</dt>
<dd><p>Given the address of a <tt>proc_t</tt> structure as a starting point, iterate over the set of open files (<tt>file_t</tt> structures) associated with the specified process. The <tt>file_t</tt> structure is defined in <tt>&lt;sys/file.h&gt;</tt>.</p></dd>
<a name="indexterm-318"></a><a name="indexterm-319"></a><dt>proc</dt>
<dd><p>Iterate over the active process (<tt>proc_t</tt>) structures. This structure is defined in <tt>&lt;sys/proc.h&gt;</tt>.</p></dd>
<dt>task</dt>
<dd><p>Given a task pointer, iterate over the list of <tt>proc_t</tt> structures for processes that are members of the given task.</p></dd>
<a name="indexterm-320"></a><a name="indexterm-321"></a><dt>thread</dt>
<dd><p>Iterate over a set of kernel thread (<tt>kthread_t</tt>) structures. If the global walk is invoked, all kernel threads are returned by the walker. If a local walk is invoked using a <tt>proc_t</tt> address as the starting point, the set of threads associated with the specified process is returned. The <tt>kthread_t</tt> structure is defined in <tt>&lt;sys/thread.h&gt;</tt>.</p></dd>
</dl>


<a name="modules-45"></a><h4>Synchronization Primitives</h4>
<p>This section describes dcmds and walkers used to examine particular kernel synchronization primitives.
 The semantics of each primitive are discussed in the corresponding (9f) section
of the manual pages. </p>

<a name="modules-46"></a><h5>dcmds</h5>
<dl><a name="indexterm-322"></a><a name="indexterm-323"></a><dt><i>rwlock</i> <tt>::rwlock</tt></dt>
<dd><p>Given the address of a readers-writers lock (see <a href="http://docs.sun.com/doc/819-2256/rwlock-9f?a=view"><tt>rwlock</tt>(9F)</a>), display the current state of the lock and the list of waiting threads.</p></dd>
<a name="indexterm-324"></a><a name="indexterm-325"></a><dt><i>address</i> <tt>::sobj2ts</tt></dt>
<dd><p>Convert the address of a synchronization object to the address of the corresponding turnstile and print the turnstile address.</p></dd>
<a name="indexterm-326"></a><a name="indexterm-327"></a><dt>[ <i>address</i> ] <tt>::turnstile</tt></dt>
<dd><p>Display the properties of the specified <tt>turnstile_t</tt>.  If no <tt>turnstile_t</tt> address is specified, the dcmd displays the properties of all turnstiles.</p></dd>
<a name="indexterm-328"></a><a name="indexterm-329"></a><dt>[ <i>address</i> ] <tt>::wchaninfo</tt> [<tt>-v</tt>]</dt>
<dd><p>Given the address of a condition variable (see <a href="http://docs.sun.com/doc/819-2256/condvar-9f?a=view"><tt>condvar</tt>(9F)</a>) or semaphore (see <a href="http://docs.sun.com/doc/819-2256/semaphore-9f?a=view"><tt>semaphore</tt>(9F)</a>), display the current number of waiters on this object. If no explicit address is specified, display all such objects that have waiting threads. If the <tt>-v</tt> option is specified, display the list of threads that are blocked on each object.</p></dd>
</dl>


<a name="modules-47"></a><h5>Walkers</h5>
<dl><a name="indexterm-330"></a><a name="indexterm-331"></a><dt>blocked</dt>
<dd><p>Given the address of a synchronization object (such as a <a href="http://docs.sun.com/doc/819-2256/mutex-9f?a=view"><tt>mutex</tt>(9F)</a> or <a href="http://docs.sun.com/doc/819-2256/rwlock-9f?a=view"><tt>rwlock</tt>(9F)</a>), iterate over the list of blocked kernel threads.</p></dd>
<a name="indexterm-332"></a><a name="indexterm-333"></a><dt>wchan</dt>
<dd><p>Given the address of a condition variable (see <a href="http://docs.sun.com/doc/819-2256/condvar-9f?a=view"><tt>condvar</tt>(9F)</a>) or semaphore (see <a href="http://docs.sun.com/doc/819-2256/semaphore-9f?a=view"><tt>semaphore</tt>(9F)</a>), iterate over the list of blocked kernel threads.</p></dd>
</dl>


<a name="modules-48"></a><h4>Cyclics</h4>
<p>The cyclic subsystem is a low-level kernel subsystem that provides high resolution, per-CPU
interval timer facilities to other kernel services and programming interfaces.</p>

<a name="modules-49"></a><h5>dcmds</h5>
<dl><a name="indexterm-334"></a><a name="indexterm-335"></a><dt><tt>::cycinfo</tt> [<tt>-vV</tt>]</dt>
<dd><p>Display the cyclic subsystem per-CPU state for each CPU. If the <tt>-v</tt> option is present, a more verbose display is shown. If the <tt>-V</tt> option is present, an even more verbose display than <tt>-v</tt> is shown.</p></dd>
<a name="indexterm-336"></a><a name="indexterm-337"></a><dt><i>address</i> <tt>::cyclic</tt></dt>
<dd><p>Format and display the <tt>cyclic_t</tt> at the specified address.</p></dd>
<a name="indexterm-338"></a><a name="indexterm-339"></a><dt><tt>::cyccover</tt></dt>
<dd><p>Display cyclic subsystem code coverage information. This information is available only in a DEBUG kernel.</p></dd>
<a name="indexterm-340"></a><a name="indexterm-341"></a><dt><tt>::cyctrace</tt></dt>
<dd><p>Display cyclic subsystem trace information. This information is available only in a DEBUG kernel.</p></dd>
</dl>


<a name="modules-50"></a><h5>Walkers</h5>
<dl><a name="indexterm-342"></a><a name="indexterm-343"></a><dt>cyccpu</dt>
<dd><p>Iterate over the per-CPU <tt>cyc_cpu_t</tt> structures.  This structure is defined in <tt>&lt;sys/cyclic_impl.h&gt;</tt>.</p></dd>
<a name="indexterm-344"></a><a name="indexterm-345"></a><dt>cyctrace</dt>
<dd><p>Iterate over the cyclic trace buffer structures. This information is only available in a DEBUG kernel.</p></dd>
</dl>


<a name="modules-71"></a><h4>Task Queues</h4>
<p>The task queue subsystem provides general-purpose asynchronous task scheduling for a variety of
clients in the kernel.</p>

<a name="modules-72"></a><h5>dcmds</h5>
<dl><a name="indexterm-346"></a><a name="indexterm-347"></a><dt><i>address</i> <tt>::taskq_entry</tt></dt>
<dd><p>Print the contents of the specified struct <tt>taskq_entry</tt>.</p></dd>
</dl>


<a name="modules-73"></a><h5>Walkers</h5>
<dl><a name="indexterm-348"></a><a name="indexterm-349"></a><dt>taskq_entry</dt>
<dd><p>Given the addresss of a <tt>taskq</tt> structure, iterate over the list of <tt>taskq_entry</tt> structures.</p></dd>
</dl>


<a name="modules-74"></a><h4>Error Queues</h4>
<p>The error queue subsystem provides general-purpose asynchronous error event processing for platform-specific error
handling code.</p>

<a name="modules-75"></a><h5>dcmds</h5>
<dl><a name="indexterm-350"></a><a name="indexterm-351"></a><dt>[ <i>address</i> ] <tt>::errorq</tt></dt>
<dd><p>Display a summary of information relating to the specified error queue. If no address is given, display information relating to all system error queues. The address, name, queue length, and data element size for each queue are displayed, along with various queue statistics.</p></dd>
</dl>


<a name="modules-76"></a><h5>Walkers</h5>
<dl><a name="indexterm-352"></a><a name="indexterm-353"></a><dt>errorq</dt>
<dd><p>Walk the list of system error queues and return the address of each individual error queue.</p></dd>
<a name="indexterm-354"></a><a name="indexterm-355"></a><dt>errorq_data</dt>
<dd><p>Given the address of an error queue, return the address of each pending error event data buffer.</p></dd>
</dl>


<a name="modules-63"></a><h4>Configuration</h4>
<p>This section describes dcmds that can be used to examine system configuration data.</p>

<a name="modules-64"></a><h5>dcmds</h5>
<dl><a name="indexterm-356"></a><a name="indexterm-357"></a><dt><tt>::system</tt></dt>
<dd><p>Display the contents of the <tt>system</tt>(4) configuration file at the time the kernel parsed the file during system initialization.</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="modules-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter1-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

