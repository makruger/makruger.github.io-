<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Built-In dcmds - Solaris Modular Debugger Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-10-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Modular Debugger Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="commands-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-exec.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">1.&nbsp;&nbsp;Modular Debugger Overview</a></p>
<p class="toc level1 tocsp"><a href="concepts-1.html">2.&nbsp;&nbsp;Debugger Concepts</a></p>
<p class="toc level1 tocsp"><a href="syntax-7.html">3.&nbsp;&nbsp;MDB Language Syntax</a></p>
<p class="toc level1 tocsp"><a href="interaction-3.html">4.&nbsp;&nbsp;Using MDB Commands Interactively</a></p>
<p class="toc level1 tocsp"><a href="commands-1.html">5.&nbsp;&nbsp;Built-In Commands</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Built-In dcmds</a></p>
</div>
<p class="toc level1 tocsp"><a href="chp-exec.html">6.&nbsp;&nbsp;Execution Control</a></p>
<p class="toc level1 tocsp"><a href="chp-kmdb.html">7.&nbsp;&nbsp;Kernel Execution Control</a></p>
<p class="toc level1 tocsp"><a href="modules-1.html">8.&nbsp;&nbsp;Kernel Debugging Modules</a></p>
<p class="toc level1 tocsp"><a href="kmem-1.html">9.&nbsp;&nbsp;Debugging With the Kernel Memory Allocator</a></p>
<p class="toc level1 tocsp"><a href="api-5.html">10.&nbsp;&nbsp;Module Programming API</a></p>
<p class="toc level1 tocsp"><a href="options-1.html">A.&nbsp;&nbsp;Options</a></p>
<p class="toc level1 tocsp"><a href="notes-1.html">B.&nbsp;&nbsp;Notes</a></p>
<p class="toc level1 tocsp"><a href="adb-trans-1.html">C.&nbsp;&nbsp;Transition From <tt>adb</tt> and <tt>kadb</tt></a></p>
<p class="toc level1 tocsp"><a href="crash-4.html">D.&nbsp;&nbsp;Transition From <tt>crash</tt></a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="commands-2"></a><h3>Built-In dcmds</h3>
<dl><dt>&gt; <i>variable-name</i></dt>
<dt>&gt; /<i>modifier</i>/ <i>variable-name</i></dt>
<dd><p>Assign the value of dot to the specified named variable. Some variables are read-only and cannot be modified. If the <tt>&gt;</tt> is followed by a modifier character surrounded by <tt>//</tt>, then the value is modified as part of the assignment. The modifier characters are:</p><dl><dt><tt>c</tt></dt>
<dd><p>Unsigned char quantity (1-byte)</p></dd>
<dt><tt>s</tt></dt>
<dd><p>Unsigned short quantity (2-byte)</p></dd>
<dt><tt>i</tt></dt>
<dd><p>Unsigned int quantity (4-byte)</p></dd>
<dt><tt>l</tt></dt>
<dd><p>Unsigned long quantity (4-byte in 32-bit, 8-byte in 64-bit)</p></dd>
</dl>
<p>Notice that these operators do not perform a cast; they instead fetch the specified number of low-order bytes (on little-endian architectures) or high-order bytes (big-endian architectures). These modifiers are provided for backward compatibility; the MDB */<i>modifier</i>/ and %/<i>modifier</i>/ syntax should be used instead.</p></dd>
<dt><tt>$&lt;</tt> <i>macro-name</i></dt>
<dd><p><a name="indexterm-52"></a>Read and execute commands from the specified macro file. The file name can be given as an absolute or relative path. If the file name is a simple name (that is, if it does not contain a '<tt>/</tt>'), MDB searches for it in the macro file include path. If another macro file is currently being processed, this file is closed and replaced with the new file.</p></dd>
<dt><tt>$&lt;&lt;</tt> <i>macro-name</i></dt>
<dd><p><a name="indexterm-53"></a>Read and execute commands from the specified macro file (as with <tt>$&lt;</tt>), but do not close the current open macro file.</p></dd>
<dt><tt>$?</tt></dt>
<dd><p><a name="indexterm-54"></a>Print the process-ID and current signal of the target if it is a user process or core file, and then print the general register set of the representative thread.</p></dd>
<dt>[ <i>address</i> ] <tt>$C</tt> [ <i>count</i> ]</dt>
<dd><p><a name="indexterm-55"></a>Print a C stack backtrace, including stack frame pointer information. If the dcmd is preceded by an explicit <i>address</i>, a backtrace beginning at this virtual memory address is displayed. Otherwise, the stack of the representative thread is displayed. If an optional count value is given as an argument, no more than <i>count</i> arguments are displayed for each stack frame in the output.</p>
<hr><p><b>64-bit SPARC only - </b>The biased frame pointer value (that is, the virtual address minus <tt>0x7ff</tt>) should be used as the address when requesting a stack trace.</p>
<hr>
</dd>
<dt>[ <i>base</i> ] <tt>$d</tt></dt>
<dd><p><a name="indexterm-56"></a>Get or set the default output radix. If the dcmd is preceded by an explicit expression, the default output radix is set to the given <i>base</i>; otherwise, the current radix is printed in base 10 (decimal). The default radix is base 16 (hexadecimal).</p></dd>
<dt><tt>$e</tt></dt>
<dd><p><a name="indexterm-57"></a>Print a list of all known external (global) symbols of type object or function, the value of the symbol, and the first 4 (32-bit <tt>mdb</tt>) or 8 (64-bit <tt>mdb</tt>) bytes stored at this location in the target's virtual address space. The <tt>::nm</tt> dcmd provides more flexible options for displaying symbol tables.</p></dd>
<dt><tt>$P</tt> <i>prompt-string</i></dt>
<dd><p><a name="indexterm-58"></a>Set the prompt to the specified <i>prompt-string</i>. The default prompt is ' <tt>&gt;</tt> '. The prompt can also be set using <tt>::set</tt> <tt>-P</tt> or the <tt>-P</tt> command-line option.</p></dd>
<dt><tt>$M</tt></dt>
<dd><p>In <tt>kmdb</tt> only, list the macro files that are cached by <tt>kmdb</tt> for use with the <tt>$&lt;</tt> dcmd.</p></dd>
<dt><i>distance</i> <tt>$s</tt></dt>
<dd><p><a name="indexterm-59"></a>Get or set the symbol matching <i>distance</i> for address-to-symbol-name conversions. The symbol matching distance modes are discussed along with the <tt>-s</tt> command-line option in <a href="options-1.html">Appendix&nbsp;A, Options</a>. The symbol matching distance can also be modified using the <tt>::set</tt> <tt>-s</tt> option. If no distance is specified, the current setting is displayed.</p></dd>
<dt><tt>$v</tt></dt>
<dd><p><a name="indexterm-60"></a>Print a list of the named variables that have non-zero values. The <tt>::vars</tt> dcmd provides other options for listing variables.</p></dd>
<dt><i>width</i> <tt>$w</tt></dt>
<dd><p><a name="indexterm-61"></a>Set the output page <i>width</i> to the specified value. Typically, this command is not necessary, as MDB queries the terminal for its width and handles resize events.</p></dd>
<dt><tt>$W</tt></dt>
<dd><p><a name="indexterm-62"></a>Reopen the target for writing, as if MDB had been executed with the <tt>-w</tt> option on the command line. Write mode can also be enabled with the <tt>::set</tt> <tt>-w</tt> option.</p></dd>
<dt><tt>::array</tt> <i>type</i> <i>count</i></dt>
<dd><p>Print the address of each element of an array. The type of the array elements should be specified as the first argument, <i>type</i>, and the number of elements to be computed should be specified as the second argument, <i>count</i>. The output of <tt>::array</tt> can be pipelined to the <tt>::print</tt> dcmd to print the elements of an array data structure.</p>
<hr><p><b>Note - </b>This dcmd may only be used with objects that contain compressed symbolic debugging information designed for use with <tt>mdb</tt>. This information is currently only available for certain Solaris kernel modules. The SUNWzlib decompression software must be installed in order to process the symbolic debugging information. </p>
<hr>
</dd>
<a name="indexterm-63"></a><a name="indexterm-64"></a><dt>[ <i>pid</i> ] <tt>::attach</tt> [ <i>core</i> | <i>pid</i> ]</dt>
<dt>[ <i>pid</i> ] <tt>:A</tt> [ <i>core</i> | <i>pid</i> ]</dt>
<dd><p>If the user process target is active, attach to and debug the specified process-ID or <i>core</i> file. The core file path name should be specified as a string argument. The process-ID can be specified as the string argument, or as the value of the expression preceding the dcmd. Recall that the default base is hexadecimal, so decimal PIDs obtained using <a href="http://docs.sun.com/doc/819-2239/pgrep-1?a=view"><tt>pgrep</tt>(1)</a> or <a href="http://docs.sun.com/doc/819-2239/ps-1?a=view"><tt>ps</tt>(1)</a> should be preceded with &ldquo;<tt>0t</tt>&rdquo; when specified as expressions.</p></dd>
<dt><tt>::branches</tt> [ <tt>-v</tt> ]</dt>
<dd><p>Display the most recent branches taken by the current CPU. This dcmd is currently only available when using <tt>kmdb</tt> on x86 systems where the appropriate processor-specific feature is enabled. The number and type of branches that can be displayed is determined by the processor architecture. If the <tt>-v</tt> option is present, the instructions prior to each branch are displayed.</p></dd>
<dt><tt>::cat</tt> <i>filename</i> ...</dt>
<dd><p><a name="indexterm-65"></a>Concatenate and display files. Each file name can be specified as a relative or absolute path name. The file contents will print to standard output, but will not pass through the output pager. This dcmd is intended to be used with the <tt>|</tt> operator; the programmer can initiate a pipeline using a list of addresses stored in an external file.</p></dd>
<a name="indexterm-66"></a><a name="indexterm-67"></a><dt><i>address</i> <tt>::context</tt></dt>
<dt><i>address</i> <tt>$p</tt></dt>
<dd><p>Context switch to the specified process. A context switch operation is valid only when using the kernel target. The process context is specified using the <i>address</i> of its <tt>proc</tt> structure in the kernel's virtual address space. The special context address <tt>0</tt> is used to denote the context of the kernel itself. MDB can only perform a context switch when examining a crash dump if the dump contains the physical memory pages of the specified user process (as opposed to just kernel pages). The kernel crash dump facility can be configured to dump all pages or the pages of the current user process using <a href="http://docs.sun.com/doc/819-2240/dumpadm-1m?a=view"><tt>dumpadm</tt>(1M)</a>. The <tt>::status</tt> dcmd can be used to display the contents of the current crash dump.</p><p>When the user requests a context switch from the kernel target, MDB constructs a new target representing the specified user process. After the switch occurs, the new target interposes its dcmds at the global level: thus the <tt>/</tt> dcmd can now format and display data from the virtual address space of the user process, the <tt>::mappings</tt> dcmd can display the mappings in the address space of the user process, and so on. The kernel target can be restored by executing <tt>0::context</tt>.</p></dd>
<dt><tt>::cpuregs</tt> [ <tt>-c</tt> <i>cpuid</i> ]</dt>
<dd><p>Display the current general-purpose register set for the current CPU or the specified <i>cpuid</i>. This command is only available when using <tt>kmdb</tt>.</p></dd>
<dt><tt>::cpustack</tt> [ <tt>-c</tt> <i>cpuid</i> ]</dt>
<dd><p>Display a C stack backtrace for the thread executing on the current CPU or the specified <i>cpuid</i>. This command is only available when using <tt>kmdb</tt>.</p></dd>
<a name="indexterm-68"></a><dt><tt>::dcmds</tt></dt>
<dd><p>List the available dcmds and print a brief description for each one.</p></dd>
<a name="indexterm-69"></a><dt>[ <i>address</i> ] <tt>::dis</tt> [ <tt>-abfw</tt> ] [ <tt>-n</tt> <i>count</i> ] [ <i>address</i> ]</dt>
<dd><p>Disassemble starting at or around the <i>address</i> specified by the final argument, or the current value of dot. If the address matches the start of a known function, the entire function is disassembled. Otherwise, a &ldquo;window&rdquo; of instructions before and after the specified address is printed in order to provide context. By default, instructions are read from the target's virtual address space; if the <tt>-f</tt> option is present, instructions are read from the target's object file instead. The <tt>-f</tt> option is enabled by default if the debugger is not currently attached to a live process, core file, or crash dump. The <tt>-w</tt> option can be used to force window-mode, even if the address is the start of a known function. The size of the window defaults to ten instructions. The number of instructions can be specified explicitly using the <tt>-n</tt> option. If the <tt>-a</tt> option is present, addresses are printed as numeric values rather than symbolically. The <tt>-b</tt> option displays both address and symbol names of the disassembled code. (The <tt>-b</tt> option is available starting with SXCE build 88.)</p></dd>
<a name="indexterm-70"></a><dt><tt>::disasms</tt></dt>
<dd><p>List the available disassembler modes. When a target is initialized, MDB attempts to select the appropriate disassembler mode. The user can change the mode to any of the modes listed using the <tt>::dismode</tt> dcmd.</p></dd>
<a name="indexterm-71"></a><a name="indexterm-72"></a><dt><tt>::dismode</tt> [ <i>mode</i> ]</dt>
<dt><tt>$V</tt> [ <i>mode</i> ]</dt>
<dd><p>Get or set the disassembler mode. If no argument is specified, print the current disassembler mode. If a <i>mode</i> argument is specified, switch the disassembler to the specified mode. The list of available disassemblers can be displayed using the <tt>::disasms</tt> dcmd.</p></dd>
<a name="indexterm-73"></a><dt><tt>::dmods</tt> [ <tt>-l</tt> ] [ <i>module-name</i> ]</dt>
<dd><p>List the loaded debugger modules. If the <tt>-l</tt> option is specified, the list of the dcmds and walkers associated with each dmod is printed below its name. The output can be restricted to a particular dmod by specifying its name as an additional argument.</p></dd>
<a name="indexterm-74"></a><dt><tt>[<i>address</i>] ::dump [<tt>-eqrstu</tt>] [<tt>-f</tt>|<tt>-p</tt>] [<tt>-g</tt> <i>bytes</i>] [<tt>-w</tt> <i>paragraphs</i>]</tt></dt>
<dd><p>Print a hexadecimal and ASCII memory dump of the 16-byte aligned region of virtual memory containing the address specified by dot. If a repeat count is specified for <tt>::dump</tt>, this is interpreted as a number of bytes to dump rather than a number of iterations. The <tt>::dump</tt> dcmd also recognizes the following options:</p><dl><dt><tt>-e</tt></dt>
<dd><p>Adjust for endianness. The <tt>-e</tt> option assumes 4-byte words; the <tt>-g</tt> option can be used to change the default word size.</p></dd>
<dt><tt>-f</tt></dt>
<dd><p>Read data from the object file location corresponding to the given virtual address instead of from the target's virtual address space. The <tt>-f</tt> option is enabled by default if the debugger is not currently attached to a live process, core file, or crash dump.</p></dd>
<dt><tt>-g</tt> <i>group</i></dt>
<dd><p>Display bytes in groups of bytes. The default <i>group</i> size is 4 bytes. The <i>group</i> size must be a power of two that divides the line width</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Interpret <i>address</i> as a physical address location in the target's address space instead of a virtual address.</p></dd>
<dt><tt>-q</tt></dt>
<dd><p>Do not print an ASCII decoding of the data.</p></dd>
<dt><tt>-r</tt></dt>
<dd><p>Number lines relative to the start address instead of with the explicit address of each line. This option implies the <tt>-u</tt> option.</p></dd>
<dt><tt>-s</tt></dt>
<dd><p>Elide repeated lines.</p></dd>
<dt><tt>-t</tt></dt>
<dd><p>Only read from and display the contents of the specified addresses, instead of reading and printing entire lines.</p></dd>
<dt><tt>-u</tt></dt>
<dd><p>Unalign output instead of aligning the output at a paragraph boundary. </p></dd>
<dt><tt>-w</tt> <i>paragraphs</i></dt>
<dd><p>Display paragraphs 16-byte paragraphs per line. The default number of paragraphs is one. The maximum value accepted for <tt>-w</tt> is 16.</p></dd>
</dl>
</dd>
<a name="indexterm-75"></a><dt><tt>::echo</tt> [ <i>string</i> | <i>value</i> ... ]</dt>
<dd><p>Print the arguments separated by blanks and terminated by a <tt>NEWLINE</tt> to standard output. Expressions enclosed in <tt>$[ ]</tt> will be evaluated to a value and printed in the default base.</p></dd>
<a name="indexterm-76"></a><dt><tt>::eval</tt> <i>command</i></dt>
<dd><p>Evaluate and execute the specified string as a command. If the command contains metacharacters or white space, it should be enclosed in double or single quotes.</p></dd>
<a name="indexterm-77"></a><a name="indexterm-78"></a><dt><tt>::files</tt> [<i>object</i>]<tt>$f</tt></dt>
<dd><p>Print a list of the known source files (symbols of type <tt>STT_FILE</tt> present in the various target symbol tables). If an <i>object</i> name is specified, the output is restricted to file symbols present in the corresponding object file.</p></dd>
<dt><tt>[<i>address</i>] ::findsym [<tt>-g</tt>] [ <i>address</i> | <i>symbol</i> ...]</tt></dt>
<dd><p>Search instruction text for instructions that refer to the specified symbols or addresses. The search list should consist of one or more addresses or symbol names specified as an address preceding the dcmd or one or more symbol names or expressions following the dcmd. If the <tt>-g</tt> option is specified, the search is restricted to instruction text that is part of a globally visible function in the target's symbol table.</p>
<hr><p><b>Note - </b><b>SPARC only</b>. The <tt>::findsym</tt> dcmd is only available when debugging a target that uses the SPARC instruction set architecture.</p>
<hr>
</dd>
<a name="indexterm-79"></a><dt><tt>::formats</tt></dt>
<dd><p>List the available output format characters for use with the <tt>/</tt>, <tt>\</tt>, <tt>?</tt>, and <tt>=</tt> formatting dcmds. The formats and their use is described in <a href="syntax-15.html">Formatting Dcmds</a>.</p></dd>
<a name="indexterm-80"></a><a name="indexterm-81"></a><a name="indexterm-82"></a><a name="indexterm-83"></a><a name="indexterm-84"></a><dt><tt>[ thread ] ::fpregs [<tt>-dqs</tt>]</tt></dt>
<dt><tt>[ thread ] $x, $X, $y, $Y</tt></dt>
<dd><p>Print the floating-point register set of the representative thread. If a thread is specified, the floating point registers of that thread are displayed. The thread expression should be one of the thread identifiers described under <a href="exec-ctrl-11.html">Thread Support</a>.</p>
<hr><p><b>Note - </b>SPARC only. The <tt>-d</tt>, <tt>-q</tt>, and <tt>-s</tt> options can be used to display the floating point registers as a collection of double-precision (<tt>-d</tt>), quad-precision (<tt>-q</tt>), or single-precision (<tt>-s</tt>) floating point values.</p>
<hr>
</dd>
<a name="indexterm-85"></a><dt><tt>::grep</tt> <i>command</i></dt>
<dd><p>Evaluate the specified command string, then print the old value of dot if the new value of dot is non-zero. If the <i>command</i> contains white space or metacharacters, it must be quoted. The <tt>::grep</tt> dcmd can be used in pipelines to filter a list of addresses.</p></dd>
<a name="indexterm-86"></a><dt><tt>::help</tt> [ <i>dcmd-name</i> ]</dt>
<dd><p>With no arguments, the <tt>::help</tt> dcmd prints a brief overview of the help facilities available in MDB. If a <i>dcmd-name</i> is specified, MDB prints a usage summary for that dcmd.</p></dd>
<dt>[ <i>address</i> [ , <i>len</i> ]] <tt>::in</tt> [ <tt>-L</tt> <i>len</i> ]</dt>
<dd><p>Read and display <i>len</i> bytes from the I/O port specified by <i>address</i>. The value of the <tt>-L</tt> option, if present, takes precedence over the repeat count specified on the left-hand side. The <i>len</i> must be 1, 2, or 4 bytes and the port address must be aligned according to the length. This command is only available when using <tt>kmdb</tt> on x86 systems.</p></dd>
<dt>[ <i>address</i> ] <tt>::list</tt> <i>type member</i> [ <i>variable-name</i> ]</dt>
<dd><p>Walk through the elements of a linked list data structure and print the address of each element in the list. The address of the first element in the list can be specified using an optional <i>address</i>; otherwise the list is assumed to start at the current value of dot. The <i>type</i> parameter must name a C struct or union type and is used to describe the type of the list elements so that MDB can read in objects of the appropriate size. The <i>member</i> parameter is used to name the member of <i>type</i> that contains a pointer to the next list element. The <tt>::list</tt> dcmd will continue iterating until a NULL pointer is encountered, the first element is reached again (a circular list), or an error occurs while reading an element. If the optional <i>variable-name</i> is specified, the specified variable will be assigned the value returned at each step of the walk when MDB invokes the next stage of a pipeline.</p>
<hr><p><b>Note - </b>This dcmd may only be used with objects that contain compressed symbolic debugging information designed for use with <tt>mdb</tt>. This information is currently only available for certain Solaris kernel modules. The SUNWzlib decompression software must be installed in order to process the symbolic debugging information. </p>
<hr>
</dd>
<a name="indexterm-87"></a><dt><tt>::load</tt> [ <tt>-s</tt>] <i>module-name</i></dt>
<dd><p>Load the specified dmod. The module name can be given as an absolute or relative path. If <i>module-name</i> is a simple name (that is, does not contain a '<tt>/</tt>'), MDB searches for it in the module library path. Modules with conflicting names cannot be loaded; the existing module must be unloaded first. If the <tt>-s</tt> option is present, MDB will remain silent and not issue any error messages if the module is not found or could not be loaded.</p></dd>
<a name="indexterm-88"></a><a name="indexterm-89"></a><dt><tt>::log</tt> [ <tt>-d</tt> | [ <tt>-e</tt> ] <i>filename</i> ]</dt>
<dt><tt>$&gt;</tt> [ <i>filename</i> ]</dt>
<dd><p>Enable or disable the output log. MDB provides an interactive logging facility where both the input commands and standard output can be logged to a file while still interacting with the user. The <tt>-e</tt> option enables logging to the specified file, or re-enables logging to the previous log file if no file name is given. The <tt>-d</tt> option disables logging. If the <tt>$&gt;</tt> dcmd is used, logging is enabled if a file name argument is specified; otherwise, logging is disabled. If the specified log file already exists, MDB appends any new log output to the file.</p></dd>
<a name="indexterm-90"></a><dt><tt>::map</tt> <i>command</i></dt>
<dd><p>Map the value of dot to a corresponding value using the <i>command</i> specified as a string argument, then print the new value of dot. If the command contains white space or metacharacters, it must be quoted. The <tt>::map</tt> dcmd can be used in pipelines to transform the list of addresses into a new list of addresses.</p></dd>
<a name="indexterm-91"></a><a name="indexterm-92"></a><dt>[ <i>address</i> ] <tt>::mappings</tt> [ <i>name</i> ]</dt>
<dt>[ <i>address</i> ] <tt>$m</tt> [ <i>name</i> ]</dt>
<dd><p>Print a list of each mapping in the target's virtual address space, including the address, size, and description of each mapping. If the dcmd is preceded by an <i>address</i>, MDB shows only the mapping that contains the given address. If a string <i>name</i> argument is given, MDB shows only the mapping that matched the description.</p></dd>
<a name="indexterm-93"></a><dt><tt>[<i>address</i>] ::nm</tt> [ <tt>-DPdghnopuvx</tt> ] [ <tt>-t</tt> <i>types</i> ] [ <tt>-f</tt> <i>format</i> ] [ <i>object</i>]</dt>
<dd><p>Print the symbol tables associated with the current target. If an optional <i>address</i> preceding the dcmd is specified, only the symbol table entry for the symbol corresponding to address is displayed. If an <i>object</i> name is specified, only the symbol table for this load object is displayed. The <tt>::nm</tt> dcmd also recognizes the following options:</p><dl><dt><tt>-D</tt></dt>
<dd><p>Prints <tt>.dynsym</tt> (dynamic symbol table) instead of <tt>.symtab</tt>.</p></dd>
<dt><tt>-P</tt></dt>
<dd><p>Prints the private symbol table instead of <tt>.symtab</tt>.</p></dd>
<dt><tt>-d</tt></dt>
<dd><p>Prints value and size fields in decimal.</p></dd>
<dt><tt>-f</tt> format [,format...]</dt>
<dd><p>Print only the specified symbol information. The valid format argument strings are:</p><dl><dt>ndx</dt>
<dd><p>symbol table index</p></dd>
<dt>val</dt>
<dd><p>symbol table</p></dd>
<dt>size</dt>
<dd><p>size in bytes</p></dd>
<dt>type</dt>
<dd><p>symbol type</p></dd>
<dt>bind</dt>
<dd><p>binding</p></dd>
<dt>oth</dt>
<dd><p>other</p></dd>
<dt>shndx</dt>
<dd><p>section index</p></dd>
<dt>name</dt>
<dd><p>symbol name</p></dd>
<dt>ctype</dt>
<dd><p>C type for symbol (if known)</p></dd>
<dt>obj</dt>
<dd><p>object which defines symbol</p></dd>
</dl>
</dd>
<dt><tt>-g</tt></dt>
<dd><p>Prints only global symbols.</p></dd>
<dt><tt>-h</tt></dt>
<dd><p>Suppresses the header line.</p></dd>
<dt><tt>-n</tt></dt>
<dd><p>Sorts symbols by name.</p></dd>
<dt><tt>-o</tt></dt>
<dd><p>Prints value and size fields in octal.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Prints symbols as a series of <tt>::nmadd</tt> commands. This option can be used with <tt>-P</tt> to produce a macro file that can be subsequently read into the debugger with <tt>$&lt;</tt>.</p></dd>
<dt><tt>-t</tt> type [,type...]</dt>
<dd><p>Prints only symbols of the specified types. The valid type argument strings are:</p><dl><dt>noty</dt>
<dd><p>STT_NOTYPE</p></dd>
<dt>objt</dt>
<dd><p>STT_OBJECT</p></dd>
<dt>func</dt>
<dd><p>STT_FUNC</p></dd>
<dt>sect</dt>
<dd><p>STT_SECTION</p></dd>
<dt>file</dt>
<dd><p>STT_FILE</p></dd>
<dt>comm</dt>
<dd><p>STT_COMMON</p></dd>
<dt>tls</dt>
<dd><p>STT_TLS</p></dd>
<dt>regi</dt>
<dd><p>STT_SPARC_REGISTER</p></dd>
</dl>
</dd>
<dt><tt>-u</tt></dt>
<dd><p>Prints only undefined symbols.</p></dd>
<dt><tt>-v</tt></dt>
<dd><p>Sorts symbols by value.</p></dd>
<dt><tt>-x</tt></dt>
<dd><p>Prints value and size fields in hexadecimal.</p></dd>
</dl>
</dd>
<a name="indexterm-94"></a><dt><i>value</i> <tt>::nmadd</tt> [ <tt>-fo</tt> ] [ <tt>-e</tt> <i>end</i> ] [ <tt>-s</tt> <i>size</i> ] <i>name</i></dt>
<dd><p>Add the specified symbol <i>name</i> to the private symbol table. MDB provides a private, configurable symbol table that can be used to interpose on the target's symbol table, as described in <a href="syntax-16.html">Symbol Name Resolution</a>. The <tt>::nmadd</tt> dcmd also recognizes the following options:</p><dl><dt><tt>-e</tt></dt>
<dd><p>Set the size of the symbol to <i>end</i> - <i>value</i>.</p></dd>
<dt><tt>-f</tt></dt>
<dd><p>Set the type of the symbol to <tt>STT_FUNC</tt>.</p></dd>
<dt><tt>-o</tt></dt>
<dd><p>Set the type of the symbol to <tt>STT_OBJECT</tt>.</p></dd>
<dt><tt>-s</tt></dt>
<dd><p>Set the size of the symbol to <i>size</i>.</p></dd>
</dl>
</dd>
<a name="indexterm-95"></a><dt><tt>::nmdel</tt> <i>name</i></dt>
<dd><p>Delete the specified symbol <i>name</i> from the private symbol table.</p></dd>
<a name="indexterm-96"></a><dt><tt>::objects</tt> [ <tt>-v</tt> ]</dt>
<dd><p>Print a map of the target's virtual address space, showing only those mappings that correspond to the primary mapping (usually the text section) of each of the known load objects. If the <tt>-v</tt> option is present, the command displays the version of each object if version information is know. If no version information is known, a version of <tt>Unknown</tt> will be displayed in the output.</p></dd>
<dt><tt>::offsetof</tt> <i>type member</i></dt>
<dd><p>Print the offset of the specified member of the specified type. The type should be the name of a C structure. The offset is printed in bytes, unless the member is a bit-field in which case the offset may be printed in bits. The output is always suffixed with the appropriate units for clarity. The type name may use the backquote (<tt>`</tt>) scoping operator described in <a href="syntax-16.html">Symbol Name Resolution</a>.</p>
<hr><p><b>Note - </b>This dcmd may only be used with objects that contain compressed symbolic debugging information designed for use with <tt>mdb</tt>. This information is currently only available for certain Solaris kernel modules. The SUNWzlib decompression software must be installed in order to process the symbolic debugging information. </p>
<hr>
</dd>
<dt>[ <i>address</i> [ , <i>len</i> ]] <tt>::out</tt> [ <tt>-L</tt> <i>len</i> ]</dt>
<dd><p>Write the specified <i>value</i> to the I/O port specified by <i>address</i>. The value of the <tt>-L</tt> option, if present, takes precedence over the repeat count specified on the left-hand side. The <i>len</i> must be 1, 2, or 4 bytes and the port address must be aligned according to the length. This command is only available when using <tt>kmdb</tt> on x86 systems.</p></dd>
<dt><tt>[<i>address</i>] ::print [<tt>-aCdiLptx</tt>] [<tt>-c</tt> <i>lim</i>] [<tt>-l</tt> <i>lim</i>] [<i>type</i> [<i>member</i>|<i>offset</i> ... ]]</tt></dt>
<dd><p>Print the data structure at the specified virtual <i>address</i> using the given <i>type</i> information. The <i>type</i> parameter may name a C struct, union, enum, fundamental integer type, or a pointer to any of these types. If the type name contains whitespace (for example, <tt>struct foo</tt>), it must be enclosed in single quotation marks or double quotation marks. The type name may use the backquote (`) scoping operator described under <a href="syntax-16.html">Symbol Name Resolution</a>. If the type is a structured type, the <tt>::print</tt> dcmd will recursively print each member of the struct or union. If the <i>type</i> argument is not present and a static or global STT_OBJECT symbol matches the address, <tt>::print</tt> will infer the appropriate type automatically.</p><p>The type argument can be followed by an optional list of <i>member</i> or <i>offset</i> expressions, in which case only those members and submembers of the specified <i>type</i> are displayed. Members can be specified using C syntax that includes the array index operator (<tt>[]</tt>), the structure member operator (<tt>-&gt;</tt>), and the structure pointer operator (<tt>.</tt>). Offsets can be specified using the MDB arithmetic expansion syntax (<tt>$[]</tt>).After displaying the data structure, <tt>::print</tt> increments dot by the size of <i>type</i> in bytes.</p>
<hr><p><b>Note - </b>The <tt>::print</tt> dcmd may only be used with objects that contain compressed symbolic debugging information designed for use with MDB. This information is only available at present in certain Solaris kernel modules and user libraries. The <tt>SUNWzlib</tt> decompression software must be installed in order to process the symbolic debugging information.</p>
<hr>
<p>If the <tt>-a</tt> option is present, the address of each member is displayed. If the <tt>-i</tt> option is present, the expression on the left-hand side is interpreted as an immediate value to be displayed using the specified type. If the <tt>-p</tt> option is present, <tt>::print</tt> interprets address as a physical memory address instead of a virtual memory address. If the <tt>-t</tt> option is present, the type of each member is displayed. If the <tt>-d</tt> or <tt>-x</tt> options are present, all integers are displayed in decimal (<tt>-d</tt>) or hexadecimal (<tt>-x</tt>); by default a heuristic is used to determine if the value should be displayed in decimal or hexadecimal. The number of characters in a character array that will be read and displayed as a string can be limited with the <tt>-c</tt> option. If the <tt>-C</tt> option is present, no limit is enforced. The number of elements in a standard array that will be read and displayed can be limited with the <tt>-l</tt> option. If the <tt>-L</tt> option is present, no limit is enforced and all array elements are shown. The default values for <tt>-c</tt> and <tt>-l</tt> can be modified using <tt>::set</tt> or the <tt>-o</tt> command-line option as described in <a href="options-1.html">Appendix&nbsp;A, Options</a>. </p></dd>
<a name="indexterm-97"></a><a name="indexterm-98"></a><dt><tt>::quit</tt> [ <tt>-u</tt> ]</dt>
<dt><tt>$q</tt> [ <tt>-u</tt> ]</dt>
<dd><p>Quit the debugger. When using <tt>kmdb</tt> only, the <tt>-u</tt> option causes the debugger to resume execution of the operating system and unload the debugger. The <tt>-u</tt> option cannot be used if <tt>kmdb</tt> was loaded at boot. If the <tt>-u</tt> option is not present, <tt>::quit</tt> causes <tt>kmdb</tt> to exit to the firmware (on SPARC systems) or causes the system to reboot (on x86 systems).</p></dd>
<a name="indexterm-99"></a><a name="indexterm-100"></a><dt>[ <i>thread</i> ] <tt>::regs</tt></dt>
<dt>[ <i>thread</i> ] <tt>$r</tt></dt>
<dd><p>Print the general-purpose register set of the representative thread. If a thread is specified, the general purpose register set of that thread is displayed. The thread expression should be one of the thread identifiers described under <a href="exec-ctrl-11.html">Thread Support</a>.</p></dd>
<a name="indexterm-101"></a><a name="indexterm-102"></a><dt><tt>::release</tt> [ <tt>-a</tt> ]</dt>
<dt><tt>:R</tt> [ <tt>-a</tt> ]</dt>
<dd><p>Release the previously attached process or core file. If the <tt>-a</tt> option is present, the process is released and left stopped and abandoned. It can subsequently be continued by <tt>prun(1)</tt> or it can be resumed by applying MDB or another debugger. By default, a released process is forcibly terminated if it was created by MDB using <tt>::run</tt>, or it is released and set running if it was attached to by MDB using the <tt>-p</tt> option or using the <tt>::attach</tt> or <tt>:A dcmds</tt>.</p></dd>
<a name="indexterm-103"></a><dt><tt>::set</tt> [ <tt>-wF</tt> ] [ +/-<tt>o</tt> <i>option</i> ] [ <tt>-s</tt> <i>distance</i> ] [ <tt>-I</tt> <i>path</i> ] [ <tt>-L</tt> <i>path</i> ] [ <tt>-P</tt> <i>prompt</i> ]</dt>
<dd><p>Get or set miscellaneous debugger properties. If no options are specified, the current set of debugger properties is displayed. The <tt>::set</tt> dcmd recognizes the following options:</p><dl><dt><tt>-F</tt></dt>
<dd><p>Forcibly take over the next user process that <tt>::attach</tt> is applied to, as if <tt>mdb</tt> had been executed with the <tt>-F</tt> option on the command line.</p></dd>
<dt><tt>-I</tt></dt>
<dd><p>Set the default path for locating macro files. The path argument can contain any of the special tokens described for the <tt>-I</tt> command-line option in <a href="options-1.html">Appendix&nbsp;A, Options</a>.</p></dd>
<dt><tt>-L</tt></dt>
<dd><p>Set the default path for locating debugger modules. The path argument can contain any of the special tokens described for the <tt>-I</tt> command-line option in <a href="options-1.html">Appendix&nbsp;A, Options</a>.</p></dd>
<dt><tt>-o</tt></dt>
<dd><p>Enable the specified debugger option. If the <tt>+o</tt> form is used, the option is disabled. The option strings are described along with the <tt>-o</tt> command-line option in <a href="options-1.html">Appendix&nbsp;A, Options</a>.</p></dd>
<dt><tt>-P</tt></dt>
<dd><p>Set the command prompt to the specified prompt string.</p></dd>
<dt><tt>-s</tt></dt>
<dd><p>Set the symbol matching distance to the specified distance. Refer to the description of the <tt>-s</tt> command-line option in <a href="options-1.html">Appendix&nbsp;A, Options</a> for more information.</p></dd>
<dt><tt>-w</tt></dt>
<dd><p>Re-open the target for writing, as if <tt>mdb</tt> had been executed with the <tt>-w</tt> option on the command line.</p></dd>
</dl>
</dd>
<dt><tt>::showrev</tt> [ <tt>-pv</tt> ]</dt>
<dd><p>Display revision information for the hardware and software corresponding the current target. If no options are specified, general system information is displayed. If the <tt>-p</tt> option is present, information for each load object that is part of a patch is displayed. If the <tt>-v</tt> option is present, information for each load object is displayed. Load objects without version information will be omitted from the output for the <tt>-p</tt> option. Load objects without version information will report <tt>Unknown</tt> in the output of the <tt>-v</tt> option.</p></dd>
<dt><tt>::sizeof <i>type</i></tt></dt>
<dd><p>Print the size of the specified type in bytes. The <i>type</i> parameter may name a C struct, union, enum, fundamental integer type, or a pointer to any of these types. The type name may use the backquote (<tt>`</tt>) scoping operator described in <a href="syntax-16.html">Symbol Name Resolution</a>. </p>
<hr><p><b>Note - </b>This dcmd may only be used with objects that contain compressed symbolic debugging information designed for use with <tt>mdb</tt>. This information is currently only available for certain Solaris kernel modules. The SUNWzlib decompression software must be installed in order to process the symbolic debugging information. </p>
<hr>
</dd>
<a name="indexterm-104"></a><a name="indexterm-105"></a><dt>[<i>address</i>] <tt>::stack</tt> [<i>count</i>]</dt>
<dt>[<i>address</i>] <tt>$c</tt> [<i>count</i>]</dt>
<dd><p>Print a C stack back trace. If the dcmd is preceded by an explicit <i>address</i>, a back trace beginning at this virtual memory address is displayed. Otherwise, the stack of the representative thread is displayed. If an optional count value is given as an argument, no more than <i>count</i> arguments are displayed for each stack frame in the output.</p>
<hr><p><b>64-bit SPARC only - </b><a name="indexterm-106"></a>The biased frame pointer value (that is, the virtual address minus <tt>0x7ff</tt>) should be used as the address when requesting a stack trace.</p>
<hr>
</dd>
<a name="indexterm-107"></a><dt>[<i>address</i>] <tt>::stackinfo</tt> [<tt>-h</tt>|<tt>-a</tt>]</dt>
<dd><p>Display <tt>kthread_t</tt> stack usage. (The <tt>::stackinfo</tt> dcmd is available starting with SXCE build 102.)</p><p>Shows the real utilization of the kernel stack if the <tt>/etc/system</tt> <tt>kmem_stackinfo</tt> tunable (an unsigned integer) is nonzero at kthread creation time. For example:</p><pre>          THREAD            STACK   SIZE  CUR  MAX CMD/LWPID
ffffff014f5f2c20 ffffff0004153000   4f00   4%  43% init/1</pre><p>The current stack size utilization for this kthread is 4% of its maximum size. The stack size utilization for this kthread has been up to 43% of its maximum size. Stack size is 4f00 bytes.</p><p>The MAX value can be shown as n/a (not available) in the following cases:</p>
<ul><li><p>For the very first kthread (sched/1)</p></li>
<li><p>If <tt>kmem_stackinfo</tt> was zero at kthread creation time</p></li>
<li><p>If the kthread has not yet run</p></li></ul>
<p>The <tt>-a</tt> option shows TS_FREE kthreads (interrupt kthreads). The <tt>-h</tt> option shows history (dead kthreads that used their kernel stack the most).</p><p>If the <tt>/etc/system</tt> <tt>kmem_stackinfo</tt> tunable is nonzero, then the DTrace probe <tt>sdt:genunix:stkinfo_end:stack-usage</tt> is activated for dead kthreads as follows:</p><table><col width="9%"><col width="19%"><col width="71%"><tr><td align="left" valign="top" scope="row"><p>arg0</p></td>
<td align="left" valign="top" scope="row"><p><tt>kthread_t *</tt></p></td>
<td align="left" valign="top" scope="row"><p>A dead kthread</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>arg1</p></td>
<td align="left" valign="top" scope="row"><p><tt>size_t</tt></p></td>
<td align="left" valign="top" scope="row"><p>The kernel stack size of the dead kthread</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>arg2</p></td>
<td align="left" valign="top" scope="row"><p><tt>size_t</tt></p></td>
<td align="left" valign="top" scope="row"><p>A percentage that is the maximum use of the kernel stack for this dead kthread</p></td>
</tr>
</table><p>If the <tt>/etc/system</tt> <tt>kmem_stackinfo</tt> tunable is nonzero, then the performance of creating and deleting kthreads is decreased.</p></dd>
<a name="indexterm-108"></a><dt><tt>::status</tt></dt>
<dd><p>Print a summary of information related to the current target.</p></dd>
<dt><i>cpuid</i> <tt>::switch</tt></dt>
<dt><i>cpuid</i> <tt>:x</tt></dt>
<dd><p>When using <tt>kmdb</tt> only, switch to the CPU indicated by the specified <i>cpuid</i> and use this CPU's current register state as the representative for debugging.</p></dd>
<dt><tt>::term</tt></dt>
<dd><p>Print the name of the terminal type that MDB is using to perform any terminal-dependent input and output operations, such as command-line editing.</p></dd>
<dt><i>thread</i> <tt>::tls</tt> <i>symbol</i></dt>
<dd><p>Print the address of the storage for the specified thread-local storage (TLS) symbol in the context of the specified thread. The thread expression should be one of the thread identifiers described under <a href="exec-ctrl-11.html">Thread Support</a>. The symbol name may use any of the scoping operators described under <a href="syntax-16.html">Symbol Name Resolution</a>. </p></dd>
<a name="indexterm-109"></a><dt><tt>::typeset</tt> [+/-<tt>t</tt>] <i>variable-name</i> ...</dt>
<dd><p>Set attributes for named variables. If one or more variable names are specified, they are defined and set to the value of dot. If the <tt>-t</tt> option is present, the user-defined tag associated with each variable is set. If the <tt>+t</tt> option is present, the tag is cleared. If no variable names are specified, the list of variables and their values is printed.</p></dd>
<a name="indexterm-110"></a><dt><tt>::unload</tt> <i>module-name</i></dt>
<dd><p>Unload the specified dmod. The list of active dmods can be printed using the <tt>::dmods</tt> dcmd. Built-in modules cannot be unloaded. Modules that are busy (that is, provide dcmds that are currently executing) cannot be unloaded.</p></dd>
<a name="indexterm-111"></a><dt><tt>::unset</tt> <i>variable-name</i> ...</dt>
<dd><p>Unset (remove) the specified variables from the list of defined variables. Some variables are exported by MDB are marked as persistent, and cannot be unset by the user.</p></dd>
<a name="indexterm-112"></a><dt><tt>::vars</tt> [<tt>-npt</tt>]</dt>
<dd><p>Print a listing of named variables. If the <tt>-n</tt> option is present, the output is restricted to variables that currently have non-zero values. If the <tt>-p</tt> option is present, the variables are printed in a form suitable for re-processing by the debugger using the <tt>$&lt;</tt> dcmd. This option can be used to record the variables to a macro file, then restore these values later. If the <tt>-t</tt> option is present, only the tagged variables are printed. Variables can be tagged using the <tt>-t</tt> option of the <tt>::typeset</tt> dcmd.</p></dd>
<dt><tt>::version</tt></dt>
<dd><p><a name="indexterm-113"></a>Print the debugger version number.</p></dd>
<a name="indexterm-114"></a><dt><i>address</i> <tt>::vtop [<tt>-a</tt> <i>as</i>]</tt></dt>
<dd><p>Print the physical address mapping for the specified virtual address, if possible. The <tt>::vtop</tt> dcmd is only available when examining a kernel target, or when examining a user process inside a kernel crash dump (after a <tt>::context</tt> dcmd has been issued).</p><p>When examining a kernel target from the kernel context, the <tt>-a</tt> option can be used to specify the address (<i>as</i>) of an alternate address space structure that should be used for the virtual to physical translation. By default, the kernel's address space is used for translation. This option is available for active address spaces even when the dump content only contains kernel pages. </p></dd>
<a name="indexterm-115"></a><dt>[ <i>address</i> ] <tt>::walk</tt> <i>walker-name</i> [ <i>variable-name</i> ]</dt>
<dd><p>Walk through the elements of a data structure using the specified walker. The available walkers can be listed using the <tt>::walkers</tt> dcmd. Some walkers operate on a global data structure and do not require a starting address. For example, walk the list of <tt>proc</tt> structures in the kernel. Other walkers operate on a specific data structure whose address must be specified explicitly. For example, given a pointer to an address space, walk the list of segments. </p><p>When used interactively, the <tt>::walk</tt> dcmd will print the address of each element of the data structure in the default base. The dcmd can also be used to provide a list of addresses for a pipeline. The walker name can use the backquote &ldquo; <tt>`</tt> &ldquo; scoping operator described in <a href="syntax-13.html">Dcmd and Walker Name Resolution</a>. If the optional <i>variable-name</i> is specified, the specified variable will be assigned the value returned at each step of the walk when MDB invokes the next stage of the pipeline.</p></dd>
<a name="indexterm-116"></a><dt><tt>::walkers</tt></dt>
<dd><p>List the available walkers and print a brief description for each one.</p></dd>
<a name="indexterm-117"></a><a name="indexterm-118"></a><dt><tt>::whence</tt> [<tt>-v</tt>] <i>name</i> ...</dt>
<dt><tt>::which</tt> [<tt>-v</tt>] <i>name</i> ...</dt>
<dd><p>Print the dmod that exports the specified dcmds and walkers. These dcmds can be used to determine which dmod is currently providing the global definition of the given dcmd or walker. Refer to <a href="syntax-13.html">Dcmd and Walker Name Resolution</a> for more information on global name resolution. The <tt>-v</tt> option causes the dcmd to print the alternate definitions of each dcmd and walker in order of precedence.</p></dd>
<a name="indexterm-119"></a><dt><tt>::xdata</tt></dt>
<dd><p>List the external data buffers exported by the current target. External data buffers represent information associated with the target that cannot be accessed through standard target facilities (that is, an address space, symbol table, or register set). These buffers can be consumed by dcmds; for more information, refer to <a href="api-4.html#api-52"><tt>mdb_get_xdata()</tt></a>.</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="commands-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-exec.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

