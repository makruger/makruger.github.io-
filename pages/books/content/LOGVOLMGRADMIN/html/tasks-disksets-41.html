<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Expanding Disk Sets - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-disksets-32.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-disksets-45.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level2"><a href="tasks-disksets-66.html">Disk Sets (Task Map)</a></p>
<p class="toc level2"><a href="tasks-disksets-32.html">Creating Disk Sets</a></p>
<p class="toc level3"><a href="tasks-disksets-32.html#addtasks-10742">How to Create a Disk Set</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Expanding Disk Sets</a></p>
<p class="toc level3"><a href="#addtasks-42054">How to Add Disks to a Disk Set</a></p>
<p class="toc level3"><a href="#tasks-disksets-18">How to Add Another Host to a Disk Set</a></p>
<p class="toc level3"><a href="#tasks-disksets-24">How to Create Solaris Volume Manager Components in a Disk Set</a></p>
</div>
<p class="toc level2 tocsp"><a href="tasks-disksets-45.html">Maintaining Disk Sets</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#maintaintasksnew-23499">How to Check the Status of a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-67">How to Delete Disks From a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-3">How to Take a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-6">How to Release a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-71">How to Delete a Host or Disk Set</a></p>
<p class="toc level2 tocsp"><a href="efnri.html">Importing Disk Sets</a></p>
<p class="toc level3"><a href="efnri.html#eoqsa">How to Print a Report on Disk Sets Available for Import</a></p>
<p class="toc level3"><a href="efnri.html#eoqrs">How to Import a Disk Set From One System to Another System</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="tasks-disksets-41"></a><h3>Expanding Disk Sets</h3>


<a name="addtasks-42054"></a><h4>How to Add Disks to a Disk Set</h4>
<hr><p><b>Caution - </b><a name="addtasks-ix158"></a><a name="indexterm-166"></a><a name="indexterm-167"></a>Do not add disks larger than 1Tbyte to disk sets if you
expect to run the Solaris software with a 32&ndash;bit kernel or if you
expect to use a version of the Solaris OS prior to the Solaris
9 4/03 release. See <a href="large-volume-overview.html">Overview of Multi-Terabyte Support in Solaris Volume Manager</a> for more information about multi-terabyte volume support in
Solaris Volume Manager.</p>
<hr>
<p>Only disks that meet the following conditions can be added to a
disk set:</p>
<ul><li><p>The disk must not be in use in a volume or hot spare pool.</p></li>
<li><p>The disk must not contain a state database replica.</p></li>
<li><p>The disk must not be currently mounted, swapped on, or otherwise opened for use by an application.</p></li></ul>
<h6>Before You Begin</h6><p>Check <a href="egjyp.html">Guidelines for Working With Disk Sets</a>.</p><ol>
<li><a name="tasks-disksets-step-63"></a><b>To add disks to a disk set, use one of the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Disk Sets node. Select the disk set that you want to modify. Then click the right mouse button and choose Properties. Select the Disks tab. Click Add Disk. Then follow the instructions in the wizard. For more information, see the online help.</p></li>
<li><p>To add disks to a disk set from the command line, use the following form of the <tt>metaset</tt> command:</p><pre># <tt><b>metaset -s </tt><i>diskset-name</i><tt> -a </tt><i>disk-name</i><tt></b></tt></pre><dl><dt><tt>-s</tt> <i>diskset-name</i></dt>
<dd><p>Specifies the name of a disk set on which the <tt>metaset</tt> command will work.</p></dd>
<dt><tt>-a</tt></dt>
<dd><p>Adds disks to the named disk set.</p></dd>
<dt><i>disk-name</i></dt>
<dd><p>Specifies the disks to add to the disk set. disk names are in the form <tt>c</tt><i>x</i><tt>t</tt><i>x</i><tt>d</tt><i>x</i><tt></tt>. N The &ldquo;s<i>x</i>&rdquo; slice identifiers are not included when adding a disk to a disk set. </p></dd>
</dl>
<p>See the <a href="http://docs.sun.com/doc/819-2240/metaset-1m?a=view"><tt>metaset</tt>(1M)</a>man page for more information.</p></li></ul>
<p>The first host to add a disk to a disk set becomes
the owner of the disk set.</p>
<hr><p><b>Caution - </b>Do not add a disk with data to a disk set. The
process of adding a disk with data to a disk set might repartition
the disk, destroying the data.</p>
<hr>
</li>
<li><a name="addtasks-step-199"></a><b>Verify the status of the disk set and disks.</b><pre># <tt><b>metaset</b></tt></pre></li></ol><a name="egjwj"></a>Example&nbsp;19-3 Adding a Disk to a Disk Set<pre># <tt><b>metaset -s blue -a c1t6d0</b></tt>
# <tt><b>metaset</b></tt>
Set name = blue, Set number = 1

Host                Owner
  host1            Yes 

Drive               Dbase
  c1t6d0             Yes </pre><p>In this example, the host name is <tt>host1</tt>. The shared disk set is
<tt>blue</tt>. Only the disk, <tt>c1t6d0</tt>, has been added to the disk set <tt>blue</tt>.</p><p>Optionally, you could add multiple disks at once by listing each disk on
the command line. For example, you could use the following command to
add two disks to the disk set simultaneously:</p><pre># <tt><b>metaset -s blue -a c1t6d0 c2t6d0</b></tt></pre>

<a name="tasks-disksets-18"></a><h4>How to Add Another Host to a Disk Set</h4><a name="indexterm-168"></a><a name="indexterm-169"></a><a name="indexterm-170"></a><p>This procedure explains how to add another host to an existing disk set
that only has one host. Solaris Volume Manager supports up to four
hosts per disk set.</p><h6>Before You Begin</h6><p>Check <a href="egjyp.html">Guidelines for Working With Disk Sets</a>.</p><ol>
<li><a name="tasks-disksets-step-65"></a><b>To add a host to a disk set, use one of the following
methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Disk Sets node and choose the disk set you want to modify. Select the disk set you want to modify. Then click the right mouse button , and choose Properties. Select the Hosts tab. Click Add Host. Then follow the instructions in the wizard. For more information, see the online help.</p></li>
<li><p>To add hosts to a disk set from the command line, use the following form of the <tt>metaset</tt> command:</p><pre># <tt><b>metaset -s </tt><i>diskset-name</i><tt> -a -h </tt><i>hostname</i><tt></b></tt></pre><dl><dt><tt>-s</tt> <i>diskset-name</i></dt>
<dd><p>Specifies the name of a disk set on which to add the host.</p></dd>
<dt><tt>-a</tt></dt>
<dd><p>Adds the host to the named disk set.</p></dd>
<dt><tt>-h</tt> <i>hostname</i></dt>
<dd><p>Specifies one or more host names to be added to the disk set. Adding the first host creates the disk set. The host name is the same name found in the <tt>/etc/nodename</tt> file.</p></dd>
</dl>
<p>See the <a href="http://docs.sun.com/doc/819-2240/metaset-1m?a=view"><tt>metaset</tt>(1M)</a> man page for more information.</p></li></ul>
</li>
<li><a name="tasks-disksets-step-22"></a><b>Verify that the host has been added to the disk set.</b><pre># <tt><b>metaset</b></tt></pre></li></ol><a name="egjvy"></a>Example&nbsp;19-4 Adding Another Host to a Disk Set<pre># <tt><b>metaset -s blue -a -h host2</b></tt>
# <tt><b>metaset</b></tt>
Set name = blue, Set number = 1
 
Host                Owner
  host1                Yes
  host2
 
Drive               Dbase
  c1t6d0             Yes 
  c2t6d0             Yes </pre><p>This example shows the addition of the host, <tt>host2</tt>, to the disk set,
<tt>blue</tt>.</p>

<a name="tasks-disksets-24"></a><h4>How to Create Solaris Volume Manager Components in a Disk Set</h4><a name="indexterm-171"></a><a name="indexterm-172"></a><p>After you create a disk set, you can create volumes and hot
spare pools using the disks you added to the disk set. You can
use either the Enhanced Storage tool within the Solaris Management Console or the
command-line utilities.</p><ul>
<li><a name="tasks-disksets-step-58"></a><b>To create volumes or other Solaris Volume Manager components within a disk set,
use one of the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Volumes, State Database Replicas, or Hot Spare Pools node. Choose Action&rArr;Create. Then follow the instructions in the wizard. For more information, see the online help.</p></li>
<li><p>Use the same command line utilities with the same basic syntax to create volumes, state database replicas, or hot spare pools. However, add <tt>-s</tt> <i>disk-set</i> immediately after the command for every command. </p><pre># <tt><b></tt><i>command</i><tt> -s </tt><i>disk-set</i><tt></b></tt></pre></li></ul>
</li></ul><a name="egjwe"></a>Example&nbsp;19-5 Creating Solaris Volume Manager Volumes in a Disk Set<p>The following example shows the creation of a mirror, <tt>d10</tt>, in the disk
set, <tt>blue</tt>. The mirror consists of submirrors (RAID-0 volumes), <tt>d11</tt> and <tt>d12</tt>.</p><pre># <tt><b>metainit -s blue d11 1 1 c1t6d0s0</b></tt>
blue/d11: Concat/Stripe is setup
# <tt><b>metainit -s blue d12 1 1 c2t6d0s0</b></tt>
blue/d12: Concat/Stripe is setup
# <tt><b>metainit -s blue d10 -m d11</b></tt>           
blue/d10: Mirror is setup
# <tt><b>metattach -s blue d10 d12</b></tt>
blue/d10: submirror blue/d12 is attached

# <tt><b>metastat -s blue</b></tt>
blue/d10: Mirror
    Submirror 0: blue/d11
      State: Okay         
    Submirror 1: blue/d12
      State: Resyncing    
    Resync in progress: 0 % done
    Pass: 1
    Read option: roundrobin (default)
    Write option: parallel (default)
    Size: 17674902 blocks

blue/d11: Submirror of blue/d10
    State: Okay         
    Size: 17674902 blocks
    Stripe 0:
        Device              Start Block  Dbase State        Reloc  Hot Spare
        c1t6d0s0                   0     No    Okay                


blue/d12: Submirror of blue/d10
    State: Resyncing    
    Size: 17674902 blocks
    Stripe 0:
        Device              Start Block  Dbase State        Reloc  Hot Spare
        c2t6d0s0                   0     No    Okay                </pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-disksets-32.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-disksets-45.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

