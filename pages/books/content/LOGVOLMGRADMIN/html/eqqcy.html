<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>RAID&ndash;1 (Mirror) Volumes in Multi-Owner Disk Sets - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eoqsi.html">Previous</a>
             </td>
             <td align="right">
                 <a href="svm-scenario-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level2"><a href="eoqrd.html">Introduction to Solaris Volume Manager for Sun Cluster</a></p>
<p class="toc level2"><a href="eqqcx.html">Multi-Owner Disk Set Concepts</a></p>
<p class="toc level2"><a href="eoqsi.html">Solaris Volume Manager for Sun Cluster Configuration</a></p>
<div class="onpage">
<p class="toc level2"><a href="">RAID-1 (Mirror) Volumes in Multi-Owner Disk Sets</a></p>
</div>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="eqqcy"></a><h3>RAID&ndash;1 (Mirror) Volumes in Multi-Owner Disk Sets</h3>
<a name="indexterm-32"></a><a name="indexterm-33"></a><a name="indexterm-34"></a><a name="indexterm-35"></a><a name="indexterm-36"></a><a name="indexterm-37"></a><a name="indexterm-38"></a><p>A RAID&ndash;1 volume, or mirror, created in a multi-owner disk set functions identically
to a RAID-1 volume in a Solaris Volume Manager shared disk set.
However, RAID-1 volumes in multi-owner disk sets have some additional features.</p>

<a name="eqqcm"></a><h4>Mirror Ownership With Multi-Owner Disk Sets</h4>
<p>The concept of mirror ownership is unique to multi-owner disk sets. Unlike a
RAID-1 volume in a Solaris Volume Manager shared disk set, a RAID-1
volume in a multi-owner disk set usually has an owner associated with it.
The ownership of the mirror volume is chosen by the volume manager. The
owner of the volume is one of the nodes designated in the node
list for the disk set. Only the owner of the RAID-1 volume
can write to the volume. If a non-owner node wants to write to
the volume, the ownership switches to the node doing the write operation. The
following output from the <tt>metastat</tt> <tt>-s</tt> <i>diskset-name</i> command shows <tt>nodeone</tt> as the owner of
the RAID-1 volume, <tt>d24</tt>.</p><pre># <tt><b>metastat -s red</b></tt>
red/d24: Mirror
    Submirror 0: red/d20
      State: Okay
    Submirror 1: red/d21
      State: Okay
    Pass: 1
    Read option: roundrobin (default)
    Write option: parallel (default)
    Resync option: optimizedresync
    Owner: nodeone
    Size: 825930 blocks (403 MB)</pre>

<a name="eqqct"></a><h4>Data Management and Recovery Processes</h4>
<p>As with RAID-1 volumes in Solaris Volume Manager, RAID-1 volumes in Solaris
Volume Manager for Sun Cluster perform operations to ensure consistent data. Solaris Volume
Manager for Sun Cluster provides RAID-1 volumes with two options for data management
and recovery.</p>

<a name="eqqcu"></a><h5>Optimized Resynchronization for Solaris Volume Manager for Sun Cluster</h5>
<p>Optimized resynchronization in Solaris Volume Manager for Sun Cluster functions identically to
optimized resynchronization in Solaris Volume Manager. However, in a multi-owner disk set, a
RAID-1 volume with the resynchronization option set to optimized resynchronization always has a mirror
owner. The following output from the <tt>metastat</tt> <tt>-s</tt> <i>diskset-name</i> command shows the
resynchronization option set to <tt>optimizedresync</tt> (for optimized resynchronization).</p><pre># <tt><b>metastat -s red</b></tt>
red/d24: Mirror
    Submirror 0: red/d20
      State: Okay
    Submirror 1: red/d21
      State: Okay
    Pass: 1
    Read option: roundrobin (default)
    Write option: parallel (default)
    Resync option: optimizedresync
    Owner: nodeone
    Size: 825930 blocks (403 MB)</pre><p>For more information on optimized resynchronization, see <a href="about-metadevices-25868.html#about-metadevices-15">Optimized Resynchronization</a>.</p>

<a name="eqqcv"></a><h5>Application-Based Recovery and Directed Mirror Reads</h5>
<p>To optimize data recovery in Solaris Volume Manager for Sun Cluster, applications
such as Oracle Real Application Clusters require the ability to manage and control
the recovery of data. Enabling an application to control the recovery improves the
performance of the recovery. The ioctls <tt>DKIOGETVOLCAP</tt>, <tt>DKIOSETVOLCAP</tt>, and <tt>DKIODMR</tt> provide support for
an application's data management recovery in a cluster environment. These ioctls provide an application
with the following capabilities:</p>
<ul><li><p>Application Based Recovery (ABR)&mdash;Allows the application to control the recovery of data on mirrored volumes</p></li>
<li><p>Directed Mirror Reads&mdash;Allows the application to direct reads to specific submirrors and to determine the state of the data</p></li></ul>
<p>For more information on the ioctls used with application-based data management recovery, see
the <a href="http://docs.sun.com/doc/819-2254/dkio-7i?a=view"><tt>dkio</tt>(7I)</a> man page.</p><p>A RAID-1 volume with the resynchronization option set to application-based recovery only has
a mirror owner during the application-based recovery process. The following output from the
<tt>metastat</tt> <tt>-s</tt> <i>diskset-name</i> command shows a RAID-1 volume in a normal state. The
resynchronization option is set to application-based recovery. There is no mirror owner.</p><pre># <tt><b>metastat -s red</b></tt>
red/d24: Mirror
    Submirror 0: red/d20
      State: Okay
    Submirror 1: red/d21
      State: Okay
    Pass: 1
    Read option: roundrobin (default)
    Write option: parallel (default)
    Resync option: application based
    Owner: None
    Size: 825930 blocks (403 MB)</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eoqsi.html">Previous</a>
             </td>
             <td align="right">
                 <a href="svm-scenario-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

