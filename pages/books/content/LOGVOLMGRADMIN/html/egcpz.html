<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Recovering From Disk Set Problems - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="troubleshoottasks-84.html">Previous</a>
             </td>
             <td align="right">
                 <a href="exlvv.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level2"><a href="troubleshoottasks-83.html">Troubleshooting Solaris Volume Manager (Task Map)</a></p>
<p class="toc level2"><a href="troubleshoottasks-1.html">Overview of Troubleshooting the System</a></p>
<p class="toc level2"><a href="troubleshoottasks-95.html">Replacing Disks</a></p>
<p class="toc level3"><a href="troubleshoottasks-95.html#troubleshoottasks-96">How to Replace a Failed Disk</a></p>
<p class="toc level2 tocsp"><a href="tasks-basics-7.html">Recovering From Disk Movement Problems</a></p>
<p class="toc level2"><a href="extkh.html">Device ID Discrepancies After Upgrading to the Solaris 10 Release</a></p>
<p class="toc level2"><a href="troubleshoottasks-29.html">Recovering From Boot Problems</a></p>
<p class="toc level3"><a href="troubleshoottasks-29.html#troubleshoottasks-82">Recovering the root (<tt>/</tt>) RAID-1 (Mirror) Volume</a></p>
<p class="toc level3"><a href="troubleshoottasks-29.html#troubleshoottasks-21051">How to Recover From a Boot Device Failure</a></p>
<p class="toc level2 tocsp"><a href="tasks-state-db-replicas-11.html">Recovering From State Database Replica Failures</a></p>
<p class="toc level3"><a href="tasks-state-db-replicas-11.html#troubleshoottasks-31036">How to Recover From Insufficient State Database Replicas</a></p>
<p class="toc level2 tocsp"><a href="tasks-softpart-26.html">Recovering From Soft Partition Problems</a></p>
<p class="toc level3"><a href="tasks-softpart-26.html#tasks-softpart-27">How to Recover Configuration Data for a Soft Partition</a></p>
<p class="toc level2 tocsp"><a href="troubleshoottasks-84.html">Recovering Storage From a Different System</a></p>
<p class="toc level3"><a href="troubleshoottasks-84.html#eqqcz">How to Recover Storage From a Local Disk Set</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Recovering From Disk Set Problems</a></p>
</div>
<p class="toc level2"><a href="exlvv.html">Performing Mounted Filesystem Backups Using the <tt>ufsdump</tt> Command</a></p>
<p class="toc level3"><a href="exlvv.html#exlvw">How to Perform a Backup of a Mounted Filesystem Located on a RAID-1 Volume</a></p>
<p class="toc level2 tocsp"><a href="fsujr.html">Performing System Recovery</a></p>
<p class="toc level3"><a href="fsujr.html#fsujq">How to Recover a System Using a Solaris Volume Manager Configuration</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="egcpz"></a><h3>Recovering From Disk Set Problems</h3>
<p>The following sections detail how to recover from specific disk set related problems.
</p>

<a name="egcqb"></a><h4>What to Do When You Cannot Take Ownership of A Disk Set</h4>
<p>In cases in which you cannot take ownership of a disk set
from any node (perhaps as a result of a system failure, disk failure,
or communication link failure), and therefore cannot delete the disk set record, it
is possible to purge the disk set from the Solaris Volume Manager state
database replica records on the current host. </p><p>Purging the disk set records does not affect the state database information contained
in the disk set, so the disk set could later be imported
(with the <tt>metaimport</tt> command, described at <a href="efnri.html">Importing Disk Sets</a>).</p><p>If you need to purge a disk set from a Sun Cluster
configuration, use the following procedure, but use the <tt>-C</tt> option instead of the <tt>-P</tt>
option you use when no Sun Cluster configuration is present.</p>

<a name="egjzf"></a><h5>How to Purge a Disk Set</h5>
<ol>
<li><b>Attempt to take the disk set with the <tt>metaset</tt> command.</b><pre># <tt><b>metaset -s </tt><i>setname</i><tt> -t -f</b></tt></pre><p>This command will attempt to take (<tt>-t</tt>) the disk set named <i>setname</i> forcibly
(<tt>-f</tt>). If the set can be taken, this command will succeed. If the
set is owned by another host when this command runs, the other host
will panic to avoid data corruption or loss. If this command succeeds, you
can delete the disk set cleanly, without the need to purge the set.
</p><p>If it is not possible to take the set, you may purge ownership
records.</p></li>
<li><b>Use the <tt>metaset</tt> command with the <tt>-P</tt> to purge the disk set from
the current host.</b><pre># <tt><b>metaset -s </tt><i>setname</i><tt> -P</b></tt></pre><p>This command will purge (<tt>-P</tt>) the disk set named <i>setname</i> from the
host on which the command is run. </p></li>
<li><b>Use the <tt>metaset</tt> command to verify that the set has been purged.</b><pre># <tt><b>metaset</b></tt></pre></li></ol><a name="egkdu"></a>Example&nbsp;25-5 Purging a Disk Set<pre>host1# metaset -s red -t -f
metaset: host1: setname "red": no such set</pre><pre>host2# metaset

Set name = red, Set number = 1

Host                Owner
  host2        

Drive    Dbase

c1t2d0   Yes  

c1t3d0   Yes  

c1t8d0   Yes  

host2# metaset -s red -P
host2# metaset</pre><h6>See Also</h6>
<ul><li><p><a href="about-disksets-31856.html">Chapter&nbsp;18, Disk Sets (Overview)</a>, for conceptual information about disk sets.</p></li>
<li><p><a href="tasks-disksets-1.html">Chapter&nbsp;19, Disk Sets (Tasks)</a>, for information about tasks associated with disk sets.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="troubleshoottasks-84.html">Previous</a>
             </td>
             <td align="right">
                 <a href="exlvv.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

