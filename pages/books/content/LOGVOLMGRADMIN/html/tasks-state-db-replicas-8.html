<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Maintaining State Database Replicas - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-state-db-replicas-9.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-metadevices-22802.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level2"><a href="tasks-state-db-replicas-15.html">State Database Replicas (Task Map)</a></p>
<p class="toc level2"><a href="tasks-state-db-replicas-9.html">Creating State Database Replicas</a></p>
<p class="toc level3"><a href="tasks-state-db-replicas-9.html#tasks-state-db-replicas-3">How to Create State Database Replicas</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Maintaining State Database Replicas</a></p>
<p class="toc level3"><a href="#maintaintasksnew-25437">How to Check the Status of State Database Replicas</a></p>
<p class="toc level3"><a href="#tasks-state-db-replicas-12">How to Delete State Database Replicas</a></p>
</div>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="tasks-state-db-replicas-8"></a><h3>Maintaining State Database Replicas</h3>


<a name="maintaintasksnew-25437"></a><h4>How to Check the Status of State Database Replicas</h4><ol>
<li><b>Become superuser.</b></li>
<li><a name="tasks-state-db-replicas-step-17"></a><b>To check the status of state database replicas, use one of the following
methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the State Database Replicas node to view all existing state database replicas. For more information, see the online help.</p></li>
<li><p>Use the <tt>metadb</tt> command to view the status of state database replicas. Add the <tt>-i</tt> option to display an explanation of the status flags, as shown in the following example. See the <a href="http://docs.sun.com/doc/819-2240/metadb-1m?a=view"><tt>metadb</tt>(1M)</a>.</p></li></ul>
</li></ol><a name="egjvv"></a>Example&nbsp;7-4 Checking the Status of All State Database Replicas<pre># <tt><b>metadb -i</b></tt>
        flags           first blk       block count
     a m  p  luo        16              8192            /dev/dsk/c0t0d0s7
     a    p  luo        8208            8192            /dev/dsk/c0t0d0s7
     a    p  luo        16400           8192            /dev/dsk/c0t0d0s7
     a    p  luo        16              8192            /dev/dsk/c1t3d0s1
      W   p  l          16              8192            /dev/dsk/c2t3d0s1
     a    p  luo        16              8192            /dev/dsk/c1t1d0s3
     a    p  luo        8208            8192            /dev/dsk/c1t1d0s3
     a    p  luo        16400           8192            /dev/dsk/c1t1d0s3
 r - replica does not have device relocation information
 o - replica active prior to last mddb configuration change
 u - replica is up to date
 l - locator for this replica was read successfully
 c - replica's location was in /etc/lvm/mddb.cf
 p - replica's location was patched in kernel
 m - replica is master, this is replica selected as input
 W - replica has device write errors
 a - replica is active, commits are occurring to this replica
 M - replica had problem with master blocks
 D - replica had problem with data blocks
 F - replica had format problems
 S - replica is too small to hold current data base
 R - replica had device read errors</pre><p><a name="maintaintasksnew-ix180"></a>A legend of all the flags follows the status. The characters in front
of the device name represent the status. Uppercase letters indicate a problem status.
Lowercase letters indicate an &ldquo;Okay&rdquo; status. </p>

<a name="tasks-state-db-replicas-12"></a><h4>How to Delete State Database Replicas</h4><p>You might need to delete state database replicas to maintain your Solaris
Volume Manager configuration. For example, if you will be replacing disk drives, you
want to delete the state database replicas before you remove the drives. Otherwise
Solaris Volume Manager will report them as having errors.</p><ol>
<li><b>Become superuser.</b></li>
<li><a name="tasks-state-db-replicas-step-21"></a><b>To remove state database replicas, use one of the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the State Database Replicas node to view all existing state database replicas. Select replicas to delete, then choose Edit&rArr;Delete to remove them. For more information, see the online help.</p></li>
<li><p>Use the following form of the <tt>metadb</tt> command:</p><pre># <tt><b>metadb -d -f </tt><i>ctds-of-slice</i><tt></b></tt></pre><dl><dt><tt>-d</tt></dt>
<dd><p>Specifies to delete a state database replica.</p></dd>
<dt><tt>-f</tt></dt>
<dd><p>Specifies to force the operation, even if no replicas exist.</p></dd>
<dt><i>ctds-of-slice</i></dt>
<dd><p>Specifies the name of the component that contains the replica.</p></dd>
</dl>
<p><a name="indexterm-40"></a>Note that you need to specify each slice from which you want to remove the state database replica. See the <a href="http://docs.sun.com/doc/819-2240/metadb-1m?a=view"><tt>metadb</tt>(1M)</a> man page for more information. </p></li></ul>
</li></ol><a name="egjvx"></a>Example&nbsp;7-5 Deleting State Database Replicas<pre># <tt><b>metadb -d -f c0t0d0s7</b></tt></pre><p>This example shows the last replica being deleted from a slice. </p><p>You must add the <tt>-f</tt> option to force the deletion of the last
replica on the system.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-state-db-replicas-9.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-metadevices-22802.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

