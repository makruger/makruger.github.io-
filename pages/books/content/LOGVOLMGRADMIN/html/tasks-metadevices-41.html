<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Expanding a File System Using the <tt>growfs</tt> Command - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="troubleshoottasks-13.html">Previous</a>
             </td>
             <td align="right">
                 <a href="replace-enable-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level2"><a href="tasks-basics-33.html">Solaris Volume Manager Maintenance (Task Map)</a></p>
<p class="toc level2"><a href="tasks-basics-28.html">Viewing the Solaris Volume Manager Configuration</a></p>
<p class="toc level3"><a href="tasks-basics-28.html#tasks-basics-29">How to View the Solaris Volume Manager Volume Configuration</a></p>
<p class="toc level2 tocsp"><a href="tasks-basics-5.html">Renaming Volumes</a></p>
<p class="toc level3"><a href="tasks-basics-5.html#tasks-metadevices-9">How to Rename a Volume</a></p>
<p class="toc level2 tocsp"><a href="tasks-basics-6.html">Working With Configuration Files</a></p>
<p class="toc level3"><a href="tasks-basics-6.html#tasks-basics-1">How to Create Configuration Files</a></p>
<p class="toc level3"><a href="tasks-basics-6.html#troubleshoottasks-23827">How to Initialize Solaris Volume Manager From a Configuration File</a></p>
<p class="toc level2 tocsp"><a href="troubleshoottasks-13.html">Changing Solaris Volume Manager Default Values</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Expanding a File System Using the <tt>growfs</tt> Command</a></p>
<p class="toc level3"><a href="#tasks-metadevices-7">How to Expand a File System</a></p>
</div>
<p class="toc level2 tocsp"><a href="replace-enable-1.html">Overview of Replacing and Enabling Components in RAID-1 and RAID-5 Volumes</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="tasks-metadevices-41"></a><h3>Expanding a File System Using the <tt>growfs</tt> Command</h3>
<a name="indexterm-205"></a><a name="indexterm-206"></a><p>After a volume that contains a UFS file system is expanded (meaning that
more space is added), you also need to expand the file system
in order to recognize the added space. You must manually expand the file
system with the <tt>growfs</tt> command. The <tt>growfs</tt> command expands the file system, even while
the file system is mounted. However, write access to the file system is
not possible while the <tt>growfs</tt> command is running. </p><p>An application, such as a database, that uses the raw device must
have its own method to incorporate the added space. Solaris Volume Manager does
not provide this capability. </p><p>The <tt>growfs</tt> command &ldquo;write-locks&rdquo; a mounted file system as it expands the file
system. The length of time the file system is write-locked can be shortened
by expanding the file system in stages. For instance, to expand a 1-Gbyte
file system to 2 Gbytes, the file system can be grown in 16
Mbyte stages by using the <tt>-s</tt> option. This option specifies the total size
of the new file system at each stage. </p><p>During the expansion, the file system is not available for write access because
of the write-lock feature. Write accesses are transparently suspended and are restarted when
the <tt>growfs</tt> command unlocks the file system. Read accesses are not affected. However,
access times are not kept while the lock is in effect. </p>

<a name="basics-10"></a><h4>Background Information for Expanding Slices and Volumes</h4>

<hr><p><b>Note - </b>Solaris Volume Manager volumes can be expanded. However, volumes cannot be reduced in
size.</p>
<hr>

<ul><li><p>A volume can be expanded whether it is used for a file system, application, or database. You can expand RAID-0 (stripe and concatenation) volumes, RAID-1 (mirror) volumes, and RAID-5 volumes and soft partitions.</p></li>
<li><p>You can concatenate a volume that contains an existing file system while the file system is in use. As long as the file system is a UFS file system, the file system can be expanded (with the <tt>growfs</tt> command) to fill the larger space. You can expand the file system without interrupting read access to the data.</p></li>
<li><p>Once a file system is expanded, it cannot be reduced in size, due to constraints in the UFS file system.</p></li>
<li><p>Applications and databases that use the raw device must have their own method to expand the added space so that they can recognize it. Solaris Volume Manager does not provide this capability.</p></li>
<li><p>When a component is added to a RAID-5 volume, it becomes a concatenation to the volume. The new component does not contain parity information. However, data on the new component is protected by the overall parity calculation that takes place for the volume.</p></li>
<li><p>You can expand a log device by adding additional components. You do not need to run the <tt>growfs</tt> command, as Solaris Volume Manager automatically recognizes the additional space on reboot. </p></li>
<li><p>Soft partitions can be expanded by adding space from the underlying volume or slice. All other volumes can be expanded by adding slices.</p></li></ul>


<a name="tasks-metadevices-7"></a><h4>How to Expand a File System</h4><h6>Before You Begin</h6><p>Check <a href="addtasks-1.html#addtasks-20933">Prerequisites for Creating Solaris Volume Manager Components</a>.</p><ol>
<li><b>Review the disk space associated with a file system.</b><pre># <tt><b>df -hk</b></tt></pre><p>See the <a href="http://docs.sun.com/doc/819-2240/df-1m?a=view"><tt>df</tt>(1M)</a> man page for more information.</p></li>
<li><a name="tasks-metadevices-step-70"></a><b>Expand a UFS file system on a logical volume.</b><pre># <tt><b>growfs -M </tt><i>/mount-point</i><tt> /dev/md/rdsk/</tt><i>volume-name</i><tt></b></tt></pre><dl><dt><tt>-M</tt> <i>/mount-point</i></dt>
<dd><p>Specifies the mount point for the file system to be expanded.</p></dd>
<dt><tt>/dev/md/rdsk/</tt><i>volume-name</i><tt></tt></dt>
<dd><p>Specifies the name of the volume on which you want to expand.</p></dd>
</dl>
<p>See the following example and the <a href="http://docs.sun.com/doc/819-2240/growfs-1m?a=view"><tt>growfs</tt>(1M)</a> man page for more information.</p></li></ol><a name="egjvr"></a>Example&nbsp;20-4 Expanding a File System<p>In the following example, a new slice is added to a volume,
<tt>d10</tt>, which contains the mounted file system, <tt>/home2</tt>. The <tt>growfs</tt> command specifies the
mount point with the <tt>-M</tt> option to be <tt>/home2</tt>, which is expanded onto
the raw volume <tt>/dev/md/rdsk/d10</tt>. The file system will span the entire volume
when the <tt>growfs</tt> command is complete. You can use the <tt>df</tt> <tt>-hk</tt> command
before and after expanding the file system to verify the total disk capacity.</p><pre># <tt><b>df -hk</b></tt>
Filesystem            kbytes    used   avail capacity  Mounted on
...
/dev/md/dsk/d10        69047   65426       0   100%    /home2
...
# <tt><b>growfs -M /home2 /dev/md/rdsk/d10</b></tt>
/dev/md/rdsk/d10:       295200 sectors in 240 cylinders of 15 tracks, 82 sectors
        144.1MB in 15 cyl groups (16 c/g, 9.61MB/g, 4608 i/g)
super-block backups (for fsck -F ufs -o b=#) at:
 32, 19808, 39584, 59360, 79136, 98912, 118688, 138464, 158240, 178016, 197792,
 217568, 237344, 257120, 276896,
# <tt><b>df -hk</b></tt>
Filesystem            kbytes    used   avail capacity  Mounted on
...
/dev/md/dsk/d10       138703   65426   59407    53%    /home2
...</pre><p><a name="indexterm-207"></a>For mirror  volumes, always run the <tt>growfs</tt> command on the top-level volume.
Do not run the command on a submirror or master device, even though
space is added to the submirror or master device.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="troubleshoottasks-13.html">Previous</a>
             </td>
             <td align="right">
                 <a href="replace-enable-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

