<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Importing Disk Sets - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-disksets-45.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-basics-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level2"><a href="tasks-disksets-66.html">Disk Sets (Task Map)</a></p>
<p class="toc level2"><a href="tasks-disksets-32.html">Creating Disk Sets</a></p>
<p class="toc level3"><a href="tasks-disksets-32.html#addtasks-10742">How to Create a Disk Set</a></p>
<p class="toc level2 tocsp"><a href="tasks-disksets-41.html">Expanding Disk Sets</a></p>
<p class="toc level3"><a href="tasks-disksets-41.html#addtasks-42054">How to Add Disks to a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-41.html#tasks-disksets-18">How to Add Another Host to a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-41.html#tasks-disksets-24">How to Create Solaris Volume Manager Components in a Disk Set</a></p>
<p class="toc level2 tocsp"><a href="tasks-disksets-45.html">Maintaining Disk Sets</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#maintaintasksnew-23499">How to Check the Status of a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-67">How to Delete Disks From a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-3">How to Take a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-6">How to Release a Disk Set</a></p>
<p class="toc level3"><a href="tasks-disksets-45.html#tasks-disksets-71">How to Delete a Host or Disk Set</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Importing Disk Sets</a></p>
<p class="toc level3"><a href="#eoqsa">How to Print a Report on Disk Sets Available for Import</a></p>
<p class="toc level3"><a href="#eoqrs">How to Import a Disk Set From One System to Another System</a></p>
</div>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="efnri"></a><h3>Importing Disk Sets</h3>
<a name="indexterm-191"></a><a name="indexterm-192"></a><p>importing a disk set</p><p>The <tt>metaimport</tt> command allows you to import disk sets from one system to
another.</p>

<a name="eoqsa"></a><h4>How to Print a Report on Disk Sets Available for Import</h4><ol>
<li><b>Become superuser.</b></li>
<li><b>Obtain a report on disk sets available for import.</b><pre># <tt><b>metaimport -r -v</b></tt></pre><dl><dt><tt>-r</tt></dt>
<dd><p>Provides a report of the unconfigured disk sets available for import on the system.</p></dd>
<dt><tt>-v</tt></dt>
<dd><p>Provides detailed information about the state database (metadb) replica location and status on the disks of unconfigured disk sets available for import on the system.</p></dd>
</dl>
</li></ol><a name="eoqrq"></a>Example&nbsp;19-13 Reporting on Disk Sets Available for Import<p>The following examples show how to print a report on disk sets
available for import. The output from the <tt>metaimport</tt> command distinguishes between regular disk sets
and replicated disk sets.</p><pre># <tt><b>metaimport -r</b></tt>
Disksets eligible for import:

1)  Found replicated diskset containing disks :
  c1t2d0
  c1t3d0
    Creation time:      Tue May 3 14:27:29 2006
For more information about this set:
  metaimport -r -v c1t2d0
To import this set:
  metaimport -s &lt;newsetname> c1t2d0


2)  Found replicated diskset containing disks :
  c1t12d0
  c1t9d0
    Creation time:      Tue May 3 14:30:00 2006
For more information about this set:
  metaimport -r -v c1t12d0
To import this set:
  metaimport -s &lt;newsetname> c1t12d0

Number of disksets eligible for import: 2

# <tt><b>metaimport -r -v c1t2d0</b></tt>
Disksets eligible for import:

1)  Found regular diskset containing disks:
  c1t2d0
  c1t3d0
    Metadatabase information:
        flags           first blk       block count
         a        u     16              8192            /dev/dsk/c1t2d0s7
         a        u     16              8192            /dev/dsk/c1t3d0s7

    Metadevice information:

    Creation time:      Tue May 23 13:05:39 2006
    Last modified time: Tue May 23 13:05:39 2006
    To import this diskset:
      metaimport -s &lt;newsetname> c1t2d0</pre><p>The following output of <tt>metaimport</tt> <tt>-r</tt> reports the following conditions in the
system's disk set configuration.</p>
<ul><li><p>A partial disk set in which one or more disks are unavailable</p></li>
<li><p>Disk conflicts where the disk is detected in more than one disk set</p></li>
<li><p>A replicated disk set</p></li>
<li><p>The recommended disk set to import</p>
<hr><p><b>Note - </b>A disk can also be reported as unavailable and in conflict at the same time.</p>
<hr>
</li></ul>
<pre># <tt><b>metaimport -r</b></tt>

Disksets eligible for import:

1)  Found partial regular diskset containing disks:
  c1t2d0 (CONFLICT)
  c3t50020F230000FA57d0 (UNAVAIL)
  c3t50020F230000FA57d1 (UNAVAIL)
    (UNAVAIL) WARNING: This disk is unavailable on this system.
    Import may corrupt data in the diskset.

    (CONFLICT) WARNING: This disk has been reused 
in another diskset or system c onfiguration.
    Import may corrupt data in the diskset.

    Creation time:      Tue May 23 13:05:39 2006
    For more information about this diskset:
      metaimport -r -v c1t2d0
    To import this diskset:
      metaimport -f -s &lt;newsetname>  c1t2d0


2)  Found regular diskset containing disks:
  c1t2d0 (CONFLICT)
  c1t3d0
  c1t4d0
    (CONFLICT) WARNING: This disk has been reused 
in another diskset or system c onfiguration.
    Import may corrupt data in the diskset.


    Creation time:      Tue May 23 13:04:57 2006
    For more information about this diskset:
      metaimport -r -v c1t3d0
    To import this diskset:
      metaimport -f -s &lt;newsetname> c1t3d0


3)  Found replicated diskset containing disks:
  c3t50020F23000100F7d13
  c3t50020F23000100F7d15
  c3t50020F23000100F7d14
    Creation time:      Thu May 25 14:56:13 2006
    For more information about this diskset:
      metaimport -r -v c3t50020F23000100F7d13
    To import this diskset:
      metaimport -s &lt;newsetname> c3t50020F23000100F7d13


Number of disksets eligible for import: 3

Warning:  The following disks have been detected in more than one set.
Import recommendation based upon set creation time.
Proceed with the import with caution.
  c1t2d0  - must import with set created at : Tue May 23 13:05:39 2006
#</pre><p>Importing a disk set is blocked if the disk set has disk
conflicts. The preceding example recommends that <tt>c1t2d0</tt> be imported with the set created at
13:05:39 on Tuesday, May 23. If you import a different disk set instead,
the following message is displayed:</p><pre># <tt><b>metaimport -f -s &lt;setname> c1t3d0</b></tt>

  Importing regular diskset containing disks:
   c1t2d0 (CONFLICT)
   c1t3d0
   c1t4d0

     (CONFLICT) WARNING: This disk has been reused in another diskset 
or system configuration.
     Import may corrupt data in the diskset.

      Creation time:      Tue May 23 13:04:57 2006

   Warning:  The following disks have been detected in more than one set. 
Import recommendation based upon set creation time. 
Proceed with the import with caution.
   c1t2d0  - must import with set created at : Tue May 23 13:05:39 2006 
To import this set, c1t2d0 must be removed from the system 
#</pre>

<a name="eoqrs"></a><h4>How to Import a Disk Set From One System to Another System</h4><ol>
<li><b>Become superuser.</b></li>
<li><b>Verify that a disk set is available for import.</b><pre># <tt><b>metaimport -r -v</b></tt></pre></li>
<li><b>Import an available disk set.</b><pre># <tt><b>metaimport -s </tt><i>diskset-name</i><tt> </tt><i>disk-name</i><tt></b></tt></pre><dl><dt><tt>- s</tt> <i>diskset-name</i></dt>
<dd><p>Specifies the name of the disk set being created.</p></dd>
<dt><i>disk-name</i></dt>
<dd><p>Identifies a disk (<tt>c#t#d#</tt>) containing a state database replica from the disk set being imported.</p></dd>
</dl>
</li>
<li><b>Verify that the disk set has been imported.</b><pre># <tt><b>metaset -s </tt><i>diskset-name</i><tt></b></tt></pre></li></ol><a name="eoqrw"></a>Example&nbsp;19-14 Importing a Disk Set<p>The following example shows how to import a disk set.</p><pre># <tt><b>metaimport -s red c1t2d0</b></tt>
Drives in diskset including disk c1t2d0:
  c1t2d0
  c1t3d0
  c1t8d0
# <tt><b>metaset -s red</b></tt>


Set name = red, Set number = 1

Host                Owner
  host1            Yes

Drive    Dbase

c1t2d0   Yes  

c1t3d0   Yes  

c1t8d0   Yes  </pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-disksets-45.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-basics-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

