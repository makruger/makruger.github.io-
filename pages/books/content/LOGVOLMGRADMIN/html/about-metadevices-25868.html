<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>RAID-1 Volume (Mirror) Resynchronization - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="about-metadevices-24868.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eyaso.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level2"><a href="about-metadevices-24868.html">Overview of RAID-1 (Mirror) Volumes</a></p>
<div class="onpage">
<p class="toc level2"><a href="">RAID-1 Volume (Mirror) Resynchronization</a></p>
</div>
<p class="toc level2"><a href="eyaso.html">Creating and Maintaining RAID-1 Volumes</a></p>
<p class="toc level2"><a href="tipsandtricks-94.html">The Affect of Booting Into Single-User Mode on RAID-1 Volumes</a></p>
<p class="toc level2"><a href="about-mirrors-8.html">Scenario--RAID-1 Volumes (Mirrors)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="about-metadevices-25868"></a><h3>RAID-1 Volume (Mirror) Resynchronization</h3>
<p><a name="about-metadevices-ix122"></a>RAID-1 volume (mirror) resynchronization is the process of copying data from one submirror
to another submirror when one of the following occurs:</p>
<ul><li><p>Submirrors fail</p></li>
<li><p>The system crashes</p></li>
<li><p>A submirror has been taken offline and brought back online</p></li>
<li><p>A new submirror has been added</p></li></ul>
<p>While the resynchronization takes place, the mirror remains readable and writable by users.</p><p>A mirror resynchronization ensures proper mirror operation by maintaining all submirrors with identical
data, with the exception of writes in progress.</p>
<hr><p><b>Note - </b>A mirror resynchronization should not be bypassed. You do not need to manually
initiate a mirror resynchronization. This process occurs automatically.</p>
<hr>


<a name="about-metadevices-14"></a><h4>Full Resynchronization</h4>
<p><a name="about-metadevices-ix123"></a>When a new submirror is attached (added) to a mirror, all the
data from another submirror in the mirror is automatically written to the newly
attached submirror. Once the mirror resynchronization is done, the new submirror is readable.
A submirror remains attached to a mirror until it is detached.</p><p>If the system crashes while a resynchronization is in progress, the resynchronization is
restarted when the system finishes rebooting.</p>

<a name="about-metadevices-15"></a><h4>Optimized Resynchronization</h4>
<p><a name="about-metadevices-ix124"></a>During a reboot following a system failure, or when a submirror that
was offline is brought back online, Solaris Volume Manager performs an optimized mirror resynchronization. The
metadisk driver tracks submirror regions. This functionality enables the metadisk driver to know
which submirror regions might be out-of-sync after a failure. An optimized mirror resynchronization
is performed only on the out-of-sync regions. You can specify the order in
which mirrors are resynchronized during reboot. You can omit a mirror resynchronization by
setting submirror pass numbers to zero. For tasks associated with changing a pass
number, see <a href="tasks-mirrors-24.html#egjyr">Example&nbsp;11-15</a>.</p>
<hr><p><b>Caution - </b><a name="about-metadevices-ix125"></a>A pass number of zero should only be used on mirrors that
are mounted as read-only. </p>
<hr>


<a name="about-metadevices-16"></a><h4>Partial Resynchronization</h4>
<a name="about-metadevices-ix126"></a><p><a name="about-metadevices-ix127"></a>Following the replacement of a slice within a submirror, Solaris Volume Manager
performs a partial mirror resynchronization of data. Solaris Volume Manager copies the data from the remaining
good slices of another submirror to the replaced slice. </p>

<a name="fpkkb"></a><h4>Canceling and Resuming Resynchronization With the <tt>metasync</tt> Command</h4>
<p>The resynchronization process affects both the performance of a system, as well as
the user's ability to perform tasks. For example, resynchronizations impact the I/O performance
and the response time of a system. Additionally, during a resynchronization process, a
disk set cannot be released from a host. In another example, if
a volume is attached by mistake, the volume cannot be released until the
resynchronization has completed. Because of situations such as these, allowing a resynchronization process to
complete is not always advantageous.</p><p>The <tt>metasync <tt>-c</tt> <i>volume</i></tt> command cancels the resynchronization process on a given volume. The following
functionality is associated with canceling resynchronization processes:</p>
<ul><li><p>Canceled resynchronization processes are logged by using the syslog utility</p></li>
<li><p>After a reboot, any canceled resynchronization process is resumed from the point that it stopped</p></li>
<li><p>When a disk set is taken, any canceled resynchronization process within that disk set resumes automatically from the point of the cancellation</p></li></ul>
<p>A canceled resynchronization process can be resumed manually from the point that it
stopped by issuing the <tt>metasync <i>volume</i></tt> command.</p><p>For the tasks associated with canceling and resuming resynchroniztion processes using the <tt>metasync</tt>
command, see <a href="tasks-mirrors-24.html#fpklu">How to Cancel a Volume Resynchronization Process</a> and <a href="tasks-mirrors-24.html#fpkkx">How to Resume a Volume Resynchronization Process</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="about-metadevices-24868.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eyaso.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

