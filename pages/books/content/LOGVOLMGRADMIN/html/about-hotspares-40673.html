<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Overview of Hot Spares and Hot Spare Pools - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="about-hotspares-40444.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-hotspares-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Overview of Hot Spares and Hot Spare Pools</a></p>
</div>
<p class="toc level2"><a href="about-hotspares-9.html">Scenario--Hot Spares</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="about-hotspares-40673"></a><h3>Overview of Hot Spares and Hot Spare Pools</h3>
<a name="about-hotspares-ix163"></a><p>A hot spare pool is collection of slices (hot spares) that Solaris Volume Manager uses
to provide increased data availability for RAID-1 (mirror) and RAID-5 volumes. In a
slice failure occurs, in either a submirror or a RAID-5 volume, Solaris Volume
Manager automatically substitutes the hot spare for the failed slice. </p>
<hr><p><b>Note - </b>Hot spares do not apply to RAID-0 volumes or one-way mirrors. For automatic
substitution to work, redundant data must be available.</p>
<hr>
<p>A hot spare cannot be used to hold data or state database
replicas while it is idle. A hot spare must remain ready for immediate
use a slice failure occurs in the volume with which it is associated.
To use hot spares, you must invest in additional disks beyond those disks
that the system actually requires to function.</p><p>Solaris Volume Manager enables you to dynamically add, delete, replace, and enable hot
spares within hot spare pools. You can use either the Solaris Management
Console or the command-line utilities to administer hot spares and hot spare pools.
See <a href="tasks-hotspares-1.html">Chapter&nbsp;17, Hot Spare Pools (Tasks)</a> for details on these tasks.</p>

<a name="about-hotspares-14383"></a><h4>Hot Spares</h4>
<a name="about-hotspares-ix164"></a><p><a name="about-hotspares-ix165"></a>A hot spare is a slice (not a volume) that is functional and
available, but not in use. A hot spare is reserved, meaning that it
stands ready to substitute for a failed slice in a submirror or
RAID-5 volume. </p><p>Hot spares provide protection from hardware failure. Slices from RAID-1 and RAID-5 volumes
are automatically replaced by hot spares when they fail. The hot spares are
resynchronized available for use in the volume. The hot spare can be used
temporarily until the failed submirror or RAID-5 volume slice can either be fixed
or replaced.</p><p>You create hot spares within hot spare pools. Individual hot spares can be
included in one or more hot spare pools. For example, you might
have two submirrors and two hot spares. The hot spares can be arranged
as two hot spare pools, with each pool having the two hot spares
in a different order of preference. This strategy enables you to specify which
hot spare is used first. This strategy also improves availability by having more
hot spares available.</p><p>A submirror or RAID-5 volume can use only a hot spare whose
size is equal to or greater than the size of the failed slice
in the submirror or RAID-5 volume. If, for example, you have a submirror
made of 1-Gbyte drives, a hot spare for the submirror must be 1
Gbyte or greater.</p>

<a name="about-hotspares-18125"></a><h4>Hot Spare Pools</h4>
<a name="indexterm-117"></a><p>A hot spare pool is an ordered list (collection) of hot spares.
</p><p>You can place hot spares into one or more hot spare pools
to get the most flexibility and protection from the fewest slices. You could
put a single slice designated for use as a hot spare into multiple
hot spare pools, with each hot spare pool having different slices and characteristics.
Then, you could assign a hot spare pool to any number of submirror
volumes or RAID-5 volumes.</p>
<hr><p><b>Note - </b>You can assign a single hot spare pool to multiple submirrors or RAID-5
volumes. However, a submirror or a RAID-5 volume can be associated with only
one hot spare pool.</p>
<hr>


<a name="about-hotspares-8"></a><h4>How Hot Spares Work</h4>
<p><a name="about-hotspares-ix166"></a>When I/O errors occur, Solaris Volume Manager searches the hot spare pool for
a hot spare based on the order in which hot spares were added
to the hot spare pool. Solaris Volume Manager checks the hot spare pool
for the first available hot spare whose size is equal to or greater
than the size of the slice that is being replaced. The first
hot spare found by Solaris Volume Manager that is large enough is used
as a replacement. Solaris Volume Manager changes the hot spare's status to &ldquo;In-Use&rdquo;
and automatically resynchronizes the data if necessary. The order of hot spares in
the hot spare pool is not changed when a replacement occurs.</p><p>In the case of a mirror, the hot spare is resynchronized with
data from a functional submirror. In the case of a RAID-5 volume, the
hot spare is resynchronized with the other slices in the volume. If a
slice of adequate size is not found in the list of hot spares,
the submirror or RAID-5 volume that failed goes into a failed state and
the hot spares remain unused. In the case of the submirror, the submirror
no longer replicates the data completely. In the case of the RAID-5 volume,
data redundancy is no longer available. </p>
<hr><p><b>Tip - </b>When you add hot spares to a hot spare pool, add them
from smallest to largest in size. This strategy avoids potentially wasting &ldquo;large&rdquo; hot spares
as replacements for small slices.</p>
<hr>
<p>When a slice experiences an I/O error, the failed slice is placed
in the &ldquo;Broken&rdquo; state. To fix this condition, first repair or replace the failed
slice. Then, bring the slice back to the &ldquo;Available&rdquo; state by using the
Enhanced Storage tool within the Solaris Management Console. Or, use the <tt>metahs <tt>-e</tt></tt>
command. </p><p>A submirror or RAID-5 volume is uses a hot spare in place
of a failed slice until that failed slice is enabled or replaced. The
hot spare is then marked &ldquo;Available&rdquo; in the hot spare pool. This hot
spare is again ready for use.</p>

<a name="egjyg"></a><h4>Hot Spare Pool States</h4>
<a name="indexterm-118"></a><p>The following table explains hot spare pool states and possible actions to take.</p><a name="maintaintasksnew-13042"></a><h6>Table&nbsp;16-1 Hot Spare Pool States (Command Line)</h6><table><col width="72*"><col width="180*"><col width="144*"><tr><th align="left" valign="top" scope="column"><p>State</p></th>
<th align="left" valign="top" scope="column"><p>Meaning</p></th>
<th align="left" valign="top" scope="column"><p>Action</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Available</p></td>
<td align="left" valign="top" scope="row"><p>The
hot spares in the hot spare pool are running and ready to
accept data. The hot spares are not currently being written to or read
from.</p></td>
<td align="left" valign="top" scope="row"><p>None.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>In-Use</p></td>
<td align="left" valign="top" scope="row"><p>This hot spare pool includes hot spares that are being used to
replace failed slices in a redundant volume. </p></td>
<td align="left" valign="top" scope="row"><p>Diagnose how the hot spares are
being used. Then, repair the slice in the volume for which the hot
spare is being used.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Broken</p></td>
<td align="left" valign="top" scope="row"><p>A problem exists with a hot spare or hot
spare pool. However, there is no immediate danger of losing data. This status
is also displayed if all the hot spares are in use.</p></td>
<td align="left" valign="top" scope="row"><p>Diagnose how the
hot spares are being used or why they are broken. You can add
more hot spares to the hot spare pool, if desired.</p></td>
</tr>
</table>

<a name="about-hotspares-2"></a><h4>Example&mdash;Hot Spare Pool</h4>
<p><a name="about-hotspares-ix174"></a><a href="#about-hotspares-fig-3">Figure&nbsp;16-1</a> illustrates a hot spare pool that is associated with submirrors <tt>d11</tt> and
<tt>d12</tt> in mirror <tt>d1</tt>. If a slice in either submirror were to
fail, a hot spare would automatically be substituted for the failed slice. The
hot spare pool itself is associated with each submirror volume, not the mirror.
The hot spare pool could also be associated with other submirrors or RAID-5
volumes, if desired.</p><a name="about-hotspares-fig-3"></a><h6>Figure&nbsp;16-1 Hot Spare Pool Example</h6><img src="figures/ch3_hotspares.fig134.gif" alt="Diagram shows how hot spares can replace components of a submirror after a component failure. "></img>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="about-hotspares-40444.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-hotspares-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

