<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Overview of RAID-1 (Mirror) Volumes - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="about-mirrors-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-metadevices-25868.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Overview of RAID-1 (Mirror) Volumes</a></p>
</div>
<p class="toc level2"><a href="about-metadevices-25868.html">RAID-1 Volume (Mirror) Resynchronization</a></p>
<p class="toc level2"><a href="eyaso.html">Creating and Maintaining RAID-1 Volumes</a></p>
<p class="toc level2"><a href="tipsandtricks-94.html">The Affect of Booting Into Single-User Mode on RAID-1 Volumes</a></p>
<p class="toc level2"><a href="about-mirrors-8.html">Scenario--RAID-1 Volumes (Mirrors)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="about-metadevices-24868"></a><h3>Overview of RAID-1 (Mirror) Volumes</h3>
<a name="about-metadevices-ix107"></a><a name="indexterm-56"></a><a name="indexterm-57"></a><a name="indexterm-58"></a><a name="indexterm-59"></a><p>A RAID-1 volume, or mirror, is a volume that maintains identical copies of
the data in RAID-0 (stripe or concatenation) volumes. The RAID-0 volumes that are
mirrored are called submirrors. Mirroring requires an investment in disks. You need at
least twice as much disk space as the amount of data you have
to mirror. Because Solaris Volume Manager must write to all submirrors, mirroring can
also increase the amount of time it takes for write requests to
be written to disk.</p><p>After you configure a mirror, the mirror can be used just like
a physical slice. </p><p>You can mirror any file system, including existing file systems. These file systems
root (<tt>/</tt>), <tt>swap</tt>, and <tt>/usr</tt>. You can also use a mirror for
any application, such as a database. </p>
<hr><p><b>Tip - </b>Use Solaris Volume Manager's hot spare feature with mirrors to keep data
safe and available. For information on hot spares, see <a href="about-hotspares-40444.html">Chapter&nbsp;16, Hot Spare Pools (Overview)</a> and <a href="tasks-hotspares-1.html">Chapter&nbsp;17, Hot Spare Pools (Tasks)</a>.</p>
<hr>


<a name="about-metadevices-9"></a><h4>Overview of Submirrors</h4>
<a name="indexterm-60"></a><a name="about-metadevices-ix111"></a><p>A mirror is composed of one or more RAID-0 volumes (stripes or
concatenations) called submirrors. </p><p>A mirror can consist of up to four submirrors. However, two-way mirrors
usually provide sufficient data redundancy for most applications and are less expensive in terms
of disk drive costs. A third submirror enables you to make online
backups without losing data redundancy while one submirror is offline for the backup.</p><p><a name="about-metadevices-ix114"></a>If you take a submirror &ldquo;offline,&rdquo; the mirror stops reading and writing to
the submirror. At this point, you could access the submirror itself, for example,
to perform a backup. However, the submirror is in a read-only state. While
a submirror is offline, Solaris Volume Manager keeps track of all writes
to the mirror. When the submirror is brought back online, only the portions
of the mirror that were written while the submirror was offline (the resynchronization regions)
are resynchronized. Submirrors can also be taken offline to troubleshoot or repair physical
devices that have errors. </p><p>Submirrors can be attached or be detached from a mirror at any
time, though at least one submirror must remain attached at all times.</p><p><a name="about-metadevices-ix116"></a><a name="about-metadevices-ix117"></a>Normally, you create a mirror with only a single submirror. Then, you attach
a second submirror after you create the mirror.  </p>

<a name="about-metadevices-11"></a><h4>Scenario&mdash;RAID-1 (Mirror) Volume</h4>
<a name="about-metadevices-ix120"></a><p><a href="#about-metadevices-fig-12">Figure&nbsp;10-1</a> illustrates a mirror, <tt>d20</tt>. The mirror is made of two volumes (submirrors)
<tt>d21</tt> and <tt>d22</tt>.</p><p>Solaris Volume Manager makes duplicate copies of the data on multiple physical
disks, and presents one virtual disk to the application, <tt>d20</tt> in the example. All
disk writes are duplicated. Disk reads come from one of the underlying submirrors.
The total capacity of mirror <tt>d20</tt> is the size of the smallest of
the submirrors (if they are not of equal size).</p><a name="about-metadevices-fig-12"></a><h6>Figure&nbsp;10-1 RAID-1 (Mirror) Example</h6><img src="figures/ch2_metadevices.fig77.gif" alt="Diagram shows how two RAID-0 volumes are used together as a RAID-1 (mirror) volume to provide redundant storage. "></img>

<a name="about-mirrors-7"></a><h4>Providing RAID-1+0 and RAID-0+1</h4>
<a name="indexterm-61"></a><a name="indexterm-62"></a><a name="indexterm-63"></a><a name="indexterm-64"></a><p>Solaris Volume Manager supports both RAID-1+0 and RAID-0+1 redundancy. RAID-1+0 redundancy constitutes a
configuration of mirrors that are then striped. RAID-0+1 redundancy constitutes a configuration of
stripes that are then mirrored. The Solaris Volume Manager interface makes it appear
that all RAID-1 devices are strictly RAID-0+1. However, Solaris Volume Manager recognizes the
underlying components and mirrors each individually, when possible.</p>
<hr><p><b>Note - </b>Solaris Volume Manager cannot always provide RAID-1+0 functionality. However, where both submirrors are
identical to each other and are composed of disk slices (and not soft
partitions), RAID-1+0 is possible. </p>
<hr>
<p>Consider a RAID-0+1 implementation with a two-way mirror that consists of three striped
slices. Without Solaris Volume Manager, a single slice failure could fail one
side of the mirror. Assuming that no hot spares are in use, a
second slice failure would fail the mirror. Using Solaris Volume Manager, up to
three slices could potentially fail without failing the mirror. The mirror does not
fail because each of the three striped slices are individually mirrored to their
counterparts on the other half of the mirror. </p><p> <a href="#about-metadevices-fig-21">Figure&nbsp;10-2</a> illustrates how a RAID-1 volume can experience the loss of a
slice, yet the RAID-1+0 implementation prevents data loss.</p><a name="about-metadevices-fig-21"></a><h6>Figure&nbsp;10-2 RAID-1+0 Example</h6><img src="figures/ch2_metadevices.fig83.gif" alt="Diagram shows how three of six total slices in a RAID-1 volume can potentially fail without data loss because of the RAID-1+0 implementation."></img><p>The RAID-1 volume consists of two submirrors. Each of the submirrors consist of
three identical physical disks that have the same interlace value. A failure
of three disks, A, B, and F, is tolerated. The entire logical block
range of the mirror is still contained on at least one good disk.
All of the volume's data is available.</p><p>However, if disks A and D fail, a portion of the mirror's
data is no longer available on any disk. Access to these logical blocks
fail. However, access to portions of the mirror where data is available still
succeed. Under this situation, the mirror acts like a single disk that has
developed bad blocks. The damaged portions are unavailable, but the remaining portions are
available.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="about-mirrors-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-metadevices-25868.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

