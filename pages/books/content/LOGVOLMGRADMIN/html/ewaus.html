<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Creating Volumes Automatically - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-topdown-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-topdown-16.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level2"><a href="tasks-topdown-13.html">Top-Down Volume Creation (Task Map)</a></p>
<p class="toc level2"><a href="tasks-topdown-15.html">Prerequisites for Top-Down Volume Creation</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Creating Volumes Automatically</a></p>
<p class="toc level3"><a href="#exlvu">How to Create RAID-1 (mirror) Volumes Using the <tt>metassist</tt> Command</a></p>
</div>
<p class="toc level2 tocsp"><a href="tasks-topdown-16.html">Working With File-Based Data Using the <tt>metassist</tt> Command</a></p>
<p class="toc level3"><a href="tasks-topdown-16.html#ewavh">How to Create a Command File (Shell Script) Using the <tt>metassist</tt> Command</a></p>
<p class="toc level3"><a href="tasks-topdown-16.html#ewavd">How to Create a Volume Configuration File Using the <tt>metassist</tt> Command</a></p>
<p class="toc level2 tocsp"><a href="tasks-topdown-12.html">Changing the Default Behavior of the <tt>metassist</tt> Command</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ewaus"></a><h3>Creating Volumes Automatically</h3>
<p>The <tt>metassist</tt> command enables you to create Solaris Volume Manager volumes, as well
as sets of volumes, based on quality-of-service criteria. The <tt>metassist</tt> command creates
volumes for you with one command, rather than the series of commands that
Solaris Volume Manager traditionally requires to create volumes.</p><p>You can use the <tt>metassist</tt> command to create RAID-1 (mirror) volumes directly. Thus,
you do not have to first create the submirrors (concatenations or stripes) that
are used as components of the RAID-1 (mirror) volume.</p>

<a name="ewaut"></a><h4>Analyzing Volume Creation by Specifying Output Verbosity</h4>
<p>When you run the <tt>metassist</tt> command, you can specify the level of verbose
output. More verbose output can help diagnose problems, such as determining why disks
were or were not selected for use in a volume, or to determine
why a specific attempted command failed. Less verbose output can reduce the amount
of extraneous information that you must review. </p><p>When you specify output verbosity, you can learn what the <tt>metassist</tt> command
does and how it makes its decisions. This information is useful for troubleshooting
some of the following:</p>
<ul><li><p>Why a volume was created in a certain way</p></li>
<li><p>Why a volume was not created</p></li>
<li><p>What volumes the <tt>metassist</tt> command would create, without actually creating the volumes</p></li></ul>


<a name="exlvu"></a><h4>How to Create RAID-1 (mirror) Volumes Using the <tt>metassist</tt> Command</h4><a name="indexterm-218"></a><h6>Before You Begin</h6><p>Check <a href="tasks-topdown-15.html">Prerequisites for Top-Down Volume Creation</a>.</p><ol>
<li><b>Identify the available storage on which to create the volume.</b><p>If you do not explicitly specify storage, Solaris Volume Manager identifies unused storage
on the system and uses it, as appropriate. If you choose to
specify storage, either broadly (for example, all storage on controller 1) or specifically (for
example, use <tt>c1t4d2</tt>, but do not use <tt>c1t4d1</tt>), Solaris Volume Manager uses the
storage you specify.</p></li>
<li><b>Use the <tt>metassist</tt> command and the appropriate options for your task.</b>
<ul><li><p>To create volumes from the command line, use the following form of the <tt>metassist</tt> command.</p><pre># <tt><b>metassist create -s </tt><i>diskset-name</i><tt> -f -r </tt><i>redundancy</i><tt> -a </tt><i>device1, device2...</i><tt> -S </tt><i>size</i><tt> -v </tt><i>verbosity</i><tt></b></tt></pre><dl><dt><tt>create</tt></dt>
<dd><p>Is the subcommand used to create volumes.</p></dd>
<dt><tt>-s</tt> <i>diskset-name</i></dt>
<dd><p>Specifies the name of the disk set to use for the volume.</p></dd>
<dt><tt>-f</tt></dt>
<dd><p>Specifies that the volume be associated with a hot spare.</p></dd>
<dt><tt>-r</tt> <i>redundancy</i></dt>
<dd><p>Specifies the level of redundancy (number of data copies) to create.</p></dd>
<dt><tt>-a</tt> <i>device1, device2...</i></dt>
<dd><p>Specifies the devices that are available for creating the volume.</p></dd>
<dt><tt>-S</tt> <i>size</i></dt>
<dd><p>Specifies the size of the volume to create in <tt>KB</tt>, <tt>MB</tt>, <tt>GB</tt>, or <tt>TB</tt>, for kilobytes, megabytes, gigabytes, and terabytes, respectively.</p></dd>
<dt><tt>-v</tt> <i>verbosity</i></dt>
<dd><p>Specifies how verbose the output should be. Allowable values range from <tt>0</tt> (nearly silent output) to <tt>2</tt> (significant output). The default level is <tt>1</tt> (moderate output).</p></dd>
</dl>
</li>
<li><p>To create volumes using an input file to specify volume characteristics, use one of the following forms of the <tt>metassist</tt> command.</p><pre># <tt><b>metassist create [-v n] [-c] -F </tt><i>config_file</i><tt></b></tt>
# <tt><b>metassist create [-v n] [-c | -d] -F </tt><i>request_file</i><tt></b></tt></pre><dl><dt><tt>-c</tt></dt>
<dd><p>Specifies to output the command script that would implement the specified or generated volume configuration. The command script is not run, and processing stops at this stage.</p></dd>
<dt><tt>-d</tt></dt>
<dd><p>Specifies to output the volume configuration that satisfies the specified or generated volume request. No command script is generated or executed, and processing stops at this stage.</p></dd>
<dt><tt>-F</tt> <i>config_file | request_file</i></dt>
<dd><p>Specifies the volume request or volume configuration file to process. If <i>config_file</i> or <i>request_file</i> is specified as a dash (-), it is read from standard input. The <tt>-d</tt> option cannot be specified when input file is a volume configuration file.</p><p>A volume configuration file describes detailed configurations of the volumes to be created, while a volume request file provides characteristics for the volumes to be produced. For more information, see <a href="http://docs.sun.com/doc/819-2251/volume-config-4?a=view"><tt>volume-config</tt>(4)</a><a href="http://docs.sun.com/doc/819-2251/volume-config-4?a=view"><tt>volume-config</tt>(4)</a> and <a href="http://docs.sun.com/doc/819-2251/volume-request-4?a=view"><tt>volume-request</tt>(4)</a> man pages.</p></dd>
<dt><tt>-v</tt> <i>verbosity</i></dt>
<dd><p>Specifies how verbose the output should be. Allowable values range from <tt>0</tt> (nearly silent output) to <tt>2</tt> (significant output). The default level is <tt>1</tt> (moderate output).</p></dd>
</dl>
</li></ul>
<p>See the following examples and the <a href="http://docs.sun.com/doc/819-2240/metassist-1m?a=view"><tt>metassist</tt>(1M)</a> man page for more information.</p></li>
<li><b>Once you have created the volumes, view the new volumes.</b><pre># <tt><b>metastat -s </tt><i>diskset-name</i><tt></b></tt></pre></li></ol><a name="ewaur"></a>Example&nbsp;23-1 Creating a Two-Way Mirror Using the <tt>metassist</tt> Command<p>The following example shows how to create a two-way mirror, 10 Mbytes in
size. The <tt>metassist</tt> command identifies unused disks and creates the best mirror possible
using those disks. The <tt>-s myset</tt> argument specifies that the volumes will be created
in the <tt>myset</tt> disk set. The disk set is created, if necessary.</p><pre># <tt><b>metassist create -s myset -r 2 -S 10mb</b></tt></pre><a name="esxkz"></a>Example&nbsp;23-2 Creating a Two-Way Mirror and Hot Spare Using the <tt>metassist</tt> Command<a name="indexterm-219"></a><p>The following example shows how to use the <tt>metassist</tt> command to create a
two-way mirror, 10 Mbytes in size, with a hot spare to provide additional
fault tolerance. The <tt>-f</tt> option specifies the fault tolerance.</p><pre># <tt><b>metassist create -s myset -f -r 2 -S 10mb</b></tt>
 </pre><a name="eteru"></a>Example&nbsp;23-3 Creating a Stripe With a Specific Controller Using the <tt>metassist</tt> Command<a name="indexterm-220"></a><p>The following example shows how to use the <tt>metassist</tt> command to create a
stripe using disks available on controller 1. The <tt>-a</tt> option specifies the available
controller.</p><pre># <tt><b>metassist create -s myset -a c1 -S 10mb</b></tt></pre><a name="ewauq"></a>Example&nbsp;23-4 Specifying Output Verbosity From the <tt>metassist</tt> Command<a name="indexterm-221"></a><p>The following example shows how to use the <tt>metassist</tt> command to create a
two-way mirror, 10 Mbytes in size, with a hot spare to provide additional
fault tolerance. The <tt>-f</tt> option specifies fault tolerance. The final argument (<tt>-v 2</tt>) specifies
a verbosity level of two, which is the maximum level and will provide
the most information possible about how the <tt>metassist</tt> command worked. </p><pre># <tt><b>metassist create -s myset -f -r 2 -S 10mb -v 2</b></tt>
Scanning system physical device configuration...

  These HBA/Controllers are known:.
    c0                        /pci@1f,0/pci@1,1/ide@3
    c1                        /pci@1f,0/pci@1/pci@2/SUNW,isptwo@4

  These disks are known:

    c0t0d0                    id1,dad@AST34342A=____________VGD97101
    c1t1d0                    id1,sd@SSEAGATE_ST39204LCSUN9.0G3BV0L88P000021097XNL
    c1t2d0                    id1,sd@SSEAGATE_ST39102LCSUN9.0GLJW22867000019171JDF
    c1t3d0                    id1,sd@SSEAGATE_ST39204LCSUN9.0G3BV0L7RV00007108TG0H
    c1t4d0                    id1,sd@SSEAGATE_ST39204LCSUN9.0G3BV0LDFR000021087R1T
    c1t5d0                    id1,sd@SSEAGATE_ST39204LCSUN9.0G3BV0L0M200002109812L
    c1t6d0                    id1,sd@SSEAGATE_ST39204LCSUN9.0G3BV0L8K8000021087R0Z
.
.
.
(output truncated)</pre><p>The following example shows how to use the <tt>metassist</tt> command to create a
two-way mirror, 10 Mbytes in size, with a hot spare to provide additional
fault tolerance. The <tt>-f</tt> option specifies fault tolerance. The final argument (<tt>-v 0</tt>) specifies
a verbosity level of zero, which is the minimum level and will provide
nearly silent output when the command runs. </p><pre># <tt><b>metassist create -s myset -f -r 2 -S 10mb -v 0</b></tt>
myset/hsp000: Hotspare pool is setup
myset/hsp000: Hotspare is added
myset/d2: Concat/Stripe is setup
myset/d1: Concat/Stripe is setup
myset/d0: Mirror is setup
myset/d0: submirror myset/d1 is attached</pre><a name="ftytz"></a>Example&nbsp;23-5 Creating a Volume Using an Input File<p>The following example shows how to use the <tt>metassist</tt> command to create a
volume using an input file. </p><pre># <tt><b>metassist create -F request.xml</b></tt></pre><p>For more information on using input files with the <tt>metassist</tt> command, see <a href="tasks-topdown-16.html">Working With File-Based Data Using the <tt>metassist</tt> Command</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-topdown-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-topdown-16.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

