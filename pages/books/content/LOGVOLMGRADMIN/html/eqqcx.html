<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Multi-Owner Disk Set Concepts - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eoqrd.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eoqsi.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level2"><a href="eoqrd.html">Introduction to Solaris Volume Manager for Sun Cluster</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Multi-Owner Disk Set Concepts</a></p>
</div>
<p class="toc level2"><a href="eoqsi.html">Solaris Volume Manager for Sun Cluster Configuration</a></p>
<p class="toc level2"><a href="eqqcy.html">RAID-1 (Mirror) Volumes in Multi-Owner Disk Sets</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="eqqcx"></a><h3>Multi-Owner Disk Set Concepts</h3>
<a name="indexterm-27"></a><a name="indexterm-28"></a><p>The storage managed by Solaris Volume Manager for Sun Cluster is grouped
into multi-owner disk sets. Multi-owner disk sets allow multiple nodes to share ownership
of a disk set and to simultaneously write to the shared disks. An
instance of an application such as Oracle Real Application Clusters runs on each
node in the cluster, so multi-owner disk sets provide scalability. Since each instance
of the application directly accesses the shared storage, multi-owner disk sets also enhance
the performance of the application.</p>
<hr><p><b>Note - </b>Multi-owner disk set functionality is enabled only in a Sun Cluster environment. Nodes
are the physical machines that are part of a Sun Cluster system.</p>
<hr>
<p>Each multi-owner disk set is associated with a list of nodes. These
nodes share ownership of the disk set. The following <tt>metaset</tt> <tt>-s</tt> <i>disk-set</i> command
shows the output for a multi-owner disk set.</p><pre># <tt><b>metaset -s blue</b></tt>

Multi-owner Set name = blue, Set number = 1, Master = nodeone

Host                Owner          Member
  nodeone           multi-owner   Yes 
  nodetwo           multi-owner   Yes 

Drive    Dbase

d9       Yes  

d13      Yes  </pre><p>This output shows <tt>nodeone</tt> and<tt> nodetwo</tt> in the list of nodes that share
ownership of the disk set. Additionally, <tt>nodeone</tt> is designated as the master node.</p><p>Each multi-owner disk set has a master node. After a disk set
is created, the node that adds the first disk to the disk set
becomes the master node of the disk set. The master node creates, deletes,
and updates the state database replicas in the disk set.</p>
<hr><p><b>Note - </b>For more information on state database replicas, see <a href="about-state-db-replicas-1.html">Chapter&nbsp;6, State Database (Overview)</a>.</p>
<hr>
<p>Solaris Volume Manager for Sun Cluster can support disk sets with different,
yet overlapping, node lists. Because each disk set has a master node, multiple
masters can exist simultaneously on the same cluster.</p><p>The following output from the <tt>metaset</tt> command shows that <tt>nodeone</tt> becomes the master
node when the first disk is added to the disk set.</p><pre>nodeone# <tt><b>metaset -s red</b></tt>
Multi-owner Set name = red, Set number = 1, Master = 

Host                Owner          Member
  nodeone                           Yes 
  nodetwo                           Yes 
nodeone# <tt><b>metaset -s red -a /dev/did/dsk/d9</b></tt>
nodeone# <tt><b>metaset -s red</b></tt>

Multi-owner Set name = red, Set number = 1, Master = nodeone 

Host                Owner          Member
  nodeone           multi-owner     Yes 
  nodetwo           multi-owner     Yes 

Drive     Dbase

d9        Yes  </pre><p>Solaris Volume Manager for Sun Cluster can support disk sets with different,
yet overlapping, node lists. Because each disk set has a master node, multiple
masters can exist simultaneously on the same cluster.</p>

<a name="exlvt"></a><h4>Tasks Associated With Multi-Owner Disk Sets</h4>
<a name="indexterm-29"></a>
<hr><p><b>Caution - </b>Before configuring multi-owner disk sets, you must have the following software installed, in
addition to the Solaris OS:</p>
<ul><li><p>Sun Cluster initial cluster framework</p></li>
<li><p>Sun Cluster Support for Oracle Real Application Clusters software</p></li>
<li><p>Oracle Real Application Clusters software</p></li></ul>
<p>For information on setting up Sun Cluster and Oracle Real Application Clusters software,
see <a href="http://docs.sun.com/doc/819-2970"><i>Sun Cluster Software Installation Guide for Solaris OS</i></a> and <a href="http://docs.sun.com/doc/819-2981"><i>Sun Cluster Data Service for Oracle Real Application Clusters Guide for Solaris OS</i></a>.</p>
<hr>
<p>Solaris Volume Manager for Sun Cluster generally uses the same set of
Solaris Volume Manager commands to perform tasks associated with disk sets. Some command
options unique to multi-owner disk sets have been added to the <tt>metaset</tt> command.
For example, the task to create a multi-owner disk set requires the <tt>-M</tt>
to the <tt>metaset</tt> command. The following output shows you how to create
a multi-owner disk set using the <tt>metaset</tt> <tt>-s</tt> <i>diskset-name</i> <tt>-a</tt> <tt>-M</tt> <tt>-h</tt> <i>hostname</i>
command.</p><pre># <tt><b>metaset -s red -a -M -h nodeone</b></tt>
# <tt><b>metaset</b></tt>
Multi-owner Set name = red, Set number = 1, Master = 

Host                Owner          Member
  nodeone                          Yes </pre><p>In addition, some of the <tt>metaset</tt> command options, such as the commands to
take and release disk sets, are not used with multi-owner disk sets. For
more information, see the <a href="http://docs.sun.com/doc/819-2240/metaset-1m?a=view"><tt>metaset</tt>(1M)</a> man page.</p><p>Another example of how tasks differ in a Sun Cluster environment occurs when
working with disks. Sun Cluster assigns each disk a unique device ID (DID)
number. Rather than using the c<i>n</i>t<i>n</i>d<i>n</i> format to identify a disk, use
the Sun Cluster DID path name, <tt>/dev/did/dsk/d</tt><i>N</i><tt></tt>. The variable <i>N</i> is the
device number assigned by Sun Cluster.</p><p>The following output shows you how to add a disk to a
multi-owner disk set using the <tt>metaset</tt> <tt>-s</tt> <i>diskset-name</i> <tt>-a</tt> <i>disk-name</i> command and the Sun
Cluster DID path name to identify the disk.</p><pre>nodeone# <tt><b>metaset -s red</b></tt>
Multi-owner Set name = red
Multi-owner Set name = red, Set number = 1, Master = 

Host                Owner          Member
  nodeone                           Yes 
  nodetwo                           Yes 
nodeone# <tt><b>metaset -s red -a /dev/did/dsk/d13</b></tt>
nodeone# <tt><b>metaset -s red</b></tt>
Multi-owner Set name = red, Set number = 1, Master = nodeone

Host                Owner          Member
  nodeone            multi-owner   Yes

Drive Dbase

d13   Yes</pre><p>For information on creating multi-owner disk sets for the Oracle Real Application Clusters,
see <a href="http://docs.sun.com/doc/819-2981/opsrac-installation-29?a=view">Creating a Multi-Owner Disk Set in Solaris Volume Manager for Sun Cluster for the Oracle Real Application Clusters Database in <i>Sun Cluster Data Service for Oracle Real Application Clusters Guide for Solaris OS</i></a>.</p><p>For tasks that are associated with disk sets, see <a href="tasks-disksets-1.html">Chapter&nbsp;19, Disk Sets (Tasks)</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eoqrd.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eoqsi.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

