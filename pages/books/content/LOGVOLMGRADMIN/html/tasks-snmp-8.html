<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring the Solaris Volume Manager SNMP Agents - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-snmp-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-snmp-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level2"><a href="tscrashdumps-26694.html">Solaris Volume Manager Monitoring and Reporting (Task Map)</a></p>
<p class="toc level2"><a href="tasks-snmp-10.html">Configuring the <tt>mdmonitord</tt> Command for Periodic Error Checking</a></p>
<p class="toc level3"><a href="tasks-snmp-10.html#tasks-snmp-proc-11">How to Configure the <tt>mdmonitord</tt> Command for Periodic Error Checking</a></p>
<p class="toc level2 tocsp"><a href="tasks-snmp-7.html">Solaris Volume Manager SNMP Agents Overview</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Configuring the Solaris Volume Manager SNMP Agents</a></p>
<p class="toc level3"><a href="#tasks-snmp-proc-1">How to Configure the Solaris Volume Manager SNMP Agents</a></p>
</div>
<p class="toc level2 tocsp"><a href="tasks-snmp-9.html">Limitations of the Solaris Volume Manager SNMP Agent</a></p>
<p class="toc level2"><a href="tasks-basics-3.html">Monitoring Solaris Volume Manager With a <tt>cron</tt> Job</a></p>
<p class="toc level3"><a href="tasks-basics-3.html#tasks-basics-4">How to Automate Checking for Errors in Volumes</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="tasks-snmp-8"></a><h3>Configuring the Solaris Volume Manager SNMP Agents</h3>
<p>The Solaris Volume Manager SNMP agents is not enabled by default. Use
the following procedure to enable SNMP traps. </p><p>Whenever you upgrade your Solaris operating system, you will probably need to edit
the<tt>/etc/snmp/conf/enterprises.oid</tt> file and append the line in <a href="#tasks-snmp-step-5">Step&nbsp;6</a> again, then restart the Solaris Enterprise
Agents server.</p><p>After you have completed this procedure, your system will issue SNMP traps
to the host or hosts that you specified. You will need to use
an appropriate SNMP monitor, such as Solstice Enterprise Agents software, to view the
traps as they are issued. </p><p>Set the <tt>mdmonitord</tt> command to probe your system regularly to help ensure that
you receive traps if problems arise. See <a href="tasks-snmp-10.html">Configuring the <tt>mdmonitord</tt> Command for Periodic Error Checking</a>. Also, refer to <a href="tasks-basics-3.html">Monitoring Solaris Volume Manager With a <tt>cron</tt> Job</a> for
additional error-checking options.</p>

<a name="tasks-snmp-proc-1"></a><h4>How to Configure the Solaris Volume Manager SNMP Agents</h4><ol>
<li><a name="tasks-snmp-step-15"></a><b>Become superuser.</b></li>
<li><a name="tasks-snmp-step-2"></a><b>Move the <tt>/etc/snmp/conf/mdlogd.rsrc&ndash;</tt> configuration file to <tt>/etc/snmp/conf/mdlogd.rsrc</tt>.</b><pre># <tt><b>mv /etc/snmp/conf/mdlogd.rsrc- /etc/snmp/conf/mdlogd.rsrc</b></tt></pre></li>
<li><a name="tasks-snmp-step-16"></a><b>Edit the <tt>/etc/snmp/conf/mdlogd.acl</tt> file to specify which hosts should receive SNMP traps. 
Look in the file for the following:</b><pre>        trap = {
             {
                trap-community = SNMP-trap
                hosts = corsair
                {
                    enterprise = "Solaris Volume Manager"
                    trap-num = 1, 2, 3
                }</pre><p>Change the line that contains <tt>hosts = corsair</tt> to specify the host name that you
want to receive Solaris Volume Manager SNMP traps. For example, to send SNMP
traps to <tt>lexicon</tt>, you would change the line to <tt>hosts = lexicon</tt>. If you
want to include multiple hosts, provide a comma-delimited list of host names, as
in <tt>hosts = lexicon, idiom</tt>. </p></li>
<li><a name="tasks-snmp-step-3"></a><b>Also edit the <tt>/etc/snmp/conf/snmpdx.acl</tt> file to specify which hosts should receive the
SNMP traps.  </b><p>Find the block that begins with <tt>trap =</tt> and add the same list
of hosts that you added in the previous step.  This section might
be commented out with #'s. If so, you must remove the # at
the beginning of the required lines in this section. Additional lines in the
trap section are also commented out. However, you can leave those lines alone
or delete them for clarity. After uncommenting the required lines and updating the
hosts line, this section could look similar to the following:</p><pre>###################
# trap parameters #
###################

trap = {
  {
        trap-community = SNMP-trap
        hosts =lexicon
        {
          enterprise = "sun"
          trap-num = 0, 1, 2-5, 6-16
        }
#       {
#         enterprise = "3Com"
#         trap-num = 4
#       }
#       {
#         enterprise = "snmp"
#         trap-num = 0, 2, 5
#       }
#  }
#  {
#       trap-community = jerry-trap
#       hosts = jerry, nanak, hubble
#       {
#         enterprise = "sun"
#         trap-num = 1, 3
#       }
#       {
#         enterprise = "snmp"
#         trap-num = 1-3
#       }
  }
}</pre>
<hr><p><b>Note - </b>Make sure that you have the same number of opening and closing
brackets in the <tt>/etc/snmp/conf/snmpdx.acl</tt> file.</p>
<hr>
</li>
<li><a name="tasks-snmp-step-4"></a><b>Add a new Solaris Volume Manager section to the <tt>/etc/snmp/conf/snmpdx.acl</tt> file, inside
the section you that uncommented in the previous step. </b><pre>        trap-community = SNMP-trap
        hosts = lexicon
        {
          enterprise = "sun"
          trap-num = 0, 1, 2-5, 6-16
        }
       <tt><b> { enterprise = "Solaris Volume Manager" trap-num = 1, 2, 3 }</b></tt></pre><p>Note that the added four lines are placed immediately after the <tt>enterprise = &ldquo;sun&rdquo;</tt>
block.</p></li>
<li><a name="tasks-snmp-step-5"></a><b>Append the following line to the <tt>/etc/snmp/conf/enterprises.oid</tt> file:</b><pre>"Solaris Volume Manager"                           "1.3.6.1.4.1.42.104"</pre></li>
<li><a name="tasks-snmp-step-6"></a><b>Stop and restart the Solstice Enterprise Agents server.</b><pre># <tt><b>/etc/init.d/init.snmpdx stop</b></tt>
# <tt><b>/etc/init.d/init.snmpdx start</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-snmp-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="tasks-snmp-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

