<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Maintaining Hot Spare Pools - Solaris Volume Manager Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2006-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Volume Manager Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-hotspares-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-disksets-31856.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="roadmap-10.html">1.&nbsp;&nbsp;Getting Started With Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="storage-overview-1.html">2.&nbsp;&nbsp;Storage Management Concepts</a></p>
<p class="toc level1 tocsp"><a href="basics-23185.html">3.&nbsp;&nbsp;Solaris Volume Manager Overview</a></p>
<p class="toc level1 tocsp"><a href="eoqra.html">4.&nbsp;&nbsp;Solaris Volume Manager for Sun Cluster (Overview)</a></p>
<p class="toc level1 tocsp"><a href="svm-scenario-1.html">5.&nbsp;&nbsp;Configuring and Using Solaris Volume Manager (Scenario)</a></p>
<p class="toc level1 tocsp"><a href="about-state-db-replicas-1.html">6.&nbsp;&nbsp;State Database (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-state-db-replicas-1.html">7.&nbsp;&nbsp;State Database (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-metadevices-22802.html">8.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-metadevices-1.html">9.&nbsp;&nbsp;RAID-0 (Stripe and Concatenation) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-mirrors-2.html">10.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-mirrors-1.html">11.&nbsp;&nbsp;RAID-1 (Mirror) Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-softpart-1.html">12.&nbsp;&nbsp;Soft Partitions (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-softpart-1.html">13.&nbsp;&nbsp;Soft Partitions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-raid5-1.html">14.&nbsp;&nbsp;RAID-5 Volumes (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-raid5-1.html">15.&nbsp;&nbsp;RAID-5 Volumes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="about-hotspares-40444.html">16.&nbsp;&nbsp;Hot Spare Pools (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-hotspares-1.html">17.&nbsp;&nbsp;Hot Spare Pools (Tasks)</a></p>
<p class="toc level2"><a href="tasks-hotspares-10.html">Hot Spare Pools (Task Map)</a></p>
<p class="toc level2"><a href="tasks-hotspares-6.html">Creating a Hot Spare Pool</a></p>
<p class="toc level3"><a href="tasks-hotspares-6.html#addtasks-14933">How to Create a Hot Spare Pool</a></p>
<p class="toc level3"><a href="tasks-hotspares-6.html#addtasks-42201">How to Add Additional Slices to a Hot Spare Pool</a></p>
<p class="toc level2 tocsp"><a href="tasks-hotspares-7.html">Associating a Hot Spare Pool With Volumes</a></p>
<p class="toc level3"><a href="tasks-hotspares-7.html#addtasks-32105">How to Associate a Hot Spare Pool With a Volume</a></p>
<p class="toc level3"><a href="tasks-hotspares-7.html#addtasks-38399">How to Change the Associated Hot Spare Pool</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Maintaining Hot Spare Pools</a></p>
<p class="toc level3"><a href="#maintaintasksnew-26732">How to Check the Status of Hot Spares and Hot Spare Pools</a></p>
<p class="toc level3"><a href="#maintaintasksnew-10276">How to Replace a Hot Spare in a Hot Spare Pool</a></p>
<p class="toc level3"><a href="#maintaintasksnew-10276a">How to Delete a Hot Spare From a Hot Spare Pool</a></p>
<p class="toc level3"><a href="#maintaintasksnew-23845">How to Enable a Hot Spare</a></p>
</div>
<p class="toc level1 tocsp"><a href="about-disksets-31856.html">18.&nbsp;&nbsp;Disk Sets (Overview)</a></p>
<p class="toc level1 tocsp"><a href="tasks-disksets-1.html">19.&nbsp;&nbsp;Disk Sets (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-basics-2.html">20.&nbsp;&nbsp;Maintaining Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="best-practices-1.html">21.&nbsp;&nbsp;Best Practices for Solaris Volume Manager</a></p>
<p class="toc level1 tocsp"><a href="topdown-overview.html">22.&nbsp;&nbsp;Top-Down Volume Creation (Overview)</a></p>
<p class="toc level1 tocsp"><a href="topdown-tasks-chap.html">23.&nbsp;&nbsp;Top-Down Volume Creation (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tasks-snmp-1.html">24.&nbsp;&nbsp;Monitoring and Error Reporting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshoottasks-33506.html">25.&nbsp;&nbsp;Troubleshooting Solaris Volume Manager (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appendfiles-1.html">A.&nbsp;&nbsp;Important Solaris Volume Manager Files</a></p>
<p class="toc level1 tocsp"><a href="quick-reference-1.html">B.&nbsp;&nbsp;Solaris Volume Manager Quick Reference</a></p>
<p class="toc level1 tocsp"><a href="append-cim-wbem-1.html">C.&nbsp;&nbsp;Solaris Volume Manager CIM/WBEM API</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="tasks-hotspares-8"></a><h3>Maintaining Hot Spare Pools</h3>
<a name="indexterm-127"></a><a name="indexterm-128"></a><p>The following sections show how to perform maintenance tasks on hot spare pools.
</p>

<a name="maintaintasksnew-26732"></a><h4>How to Check the Status of Hot Spares and Hot Spare Pools</h4><ul>
<li><a name="tasks-hotspares-step-22"></a><b>To view the status of a hot spare pool and its hot spares,
use one of the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select a hot spare pool. Choose Action&rArr;Properties to view detailed status information. For more information, see the online help.</p></li>
<li><p>Run the following form of the <tt>metastat</tt> command:</p><pre># <tt><b>metastat </tt><i>hot-spare-pool-name</i><tt></b></tt></pre></li></ul>
</li></ul><a name="egjvz"></a>Example&nbsp;17-8 Viewing the Status of a Hot Spare Pool<p>The following example shows sample output from the <tt>metastat</tt> command on a
hot spare pool.</p><pre># <tt><b>metastat hsp001</b></tt>
hsp001: 1 hot spare
        c1t3d0s2                Available       16800 blocks</pre><p>The <tt>metahs</tt> command can also be used to check the status of a
hot spare pool. </p><p>For information on the hot spare pool states and the possible actions to
take, see <a href="about-hotspares-40673.html#egjyg">Hot Spare Pool States</a>.</p>

<a name="maintaintasksnew-10276"></a><h4>How to Replace a Hot Spare in a Hot Spare Pool</h4><a name="indexterm-129"></a><a name="indexterm-130"></a><ol>
<li><b>Become superuser.</b></li>
<li><a name="tasks-hotspares-step-27"></a><b>Verify whether the hot spare is currently being used by using one of
the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select a hot spare pool. Choose Action&rArr;Properties. Then choose the Hot Spares panel. Follow the onscreen instructions. For more information, see the online help.</p></li>
<li><p>Use the following form of the <tt>metastat</tt> command to view the status of the hot spare pool:</p><pre># <tt><b>metastat </tt><i>hot-spare-pool-name</i><tt></b></tt></pre><p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/metastat-1m?a=view"><tt>metastat</tt>(1M)</a> man page.</p></li></ul>
</li>
<li><a name="tasks-hotspares-step-28"></a><b>To replace the hot spare, use one of the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select a hot spare pool. Choose Action&rArr;Properties. Then choose the Hot Spares panel. Follow the onscreen instructions. For more information, see the online help.</p></li>
<li><p>Use the following form of the <tt>metahs</tt> command:</p><pre># <tt><b>metahs -r </tt><i>hot-spare-pool-name</i><tt> </tt><i>current-hot-spare</i><tt> </tt><i>replacement-hot-spare</i><tt></b></tt></pre><dl><dt><tt>-r</tt></dt>
<dd><p>Specifies to replace disks in the named hot spare pool.</p></dd>
<dt><i>hot-spare-pool-name</i></dt>
<dd><p>Specifies the name of the hot spare pool. You can also use the special keyword <tt>all</tt> to change all hot spare pool associations.</p></dd>
<dt><i>current-hot-spare</i></dt>
<dd><p>Specifies the name of the current hot spare that will be replaced.</p></dd>
<dt><i>replacement-hot-spare</i></dt>
<dd><p>Specifies the name of the slice that will replace the current hot spare in the named hot spare pool.</p></dd>
</dl>
<p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/metahs-1m?a=view"><tt>metahs</tt>(1M)</a> man page.</p></li></ul>
</li></ol><a name="egjwa"></a>Example&nbsp;17-9 Replacing a Hot Spare in One Hot Spare Pool<p>In the following example, the <tt>metastat</tt> command shows that the hot spare is
not in use. The <tt>metahs <tt>-r</tt></tt> command replaces the hot spare, <tt>/dev/dsk/c0t2d0s2</tt>, with the
hot spare, <tt>/dev/dsk/c3t1d0s2</tt>, in the hot spare pool, <tt>hsp003</tt>.</p><pre># <tt><b>metastat hsp003</b></tt>
hsp003: 1 hot spare
        c0t2d0s2                Broken       5600 blocks
# <tt><b>metahs -r hsp003 c0t2d0s2 c3t1d0s2</b></tt>
hsp003: Hotspare c0t2d0s2 is replaced with c3t1d0s2</pre><a name="egjwn"></a>Example&nbsp;17-10 Replacing a Hot Spare in All Associated Hot Spare Pools<p><a name="maintaintasksnew-ix253"></a>In the following example, the keyword <tt>all</tt> replaces the hot spare, <tt>/dev/dsk/c1t0d0s2</tt>, with
the hot spare, <tt>/dev/dsk/c3t1d0s2</tt>, in all its associated hot spare pools.</p><pre># <tt><b>metahs -r all c1t0d0s2 c3t1d0s2</b></tt>
hsp001: Hotspare c1t0d0s2 is replaced with c3t1d0s2
hsp002: Hotspare c1t0d0s2 is replaced with c3t1d0s2
hsp003: Hotspare c1t0d0s2 is replaced with c3t1d0s2</pre>

<a name="maintaintasksnew-10276a"></a><h4>How to Delete a Hot Spare From a Hot Spare Pool</h4><a name="indexterm-131"></a><a name="indexterm-132"></a><ol>
<li><b>Become superuser.</b></li>
<li><a name="tasks-hotspares-step-27a"></a><b>Verify whether the hot spare is currently being used by using one of
the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select a hot spare pool. Choose Action&rArr;Properties. Then choose the Hot Spares panel. Follow the onscreen instructions. For more information, see the online help.</p></li>
<li><p>Use the following form of the <tt>metastat</tt> command to view the status of the hot spare pool:</p><pre># <tt><b>metastat </tt><i>hot-spare-pool-name</i><tt></b></tt></pre><p>See the <a href="http://docs.sun.com/doc/819-2240/metastat-1m?a=view"><tt>metastat</tt>(1M)</a> man page.</p></li></ul>
</li>
<li><a name="tasks-hotspares-step-28a"></a><b>To delete the hot spare, use one of the following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select a hot spare pool. Choose Action&rArr;Properties. Then choose the Hot Spares panel. Follow the onscreen instructions. For more information, see the online help.</p></li>
<li><p>Use the following form of the <tt>metahs</tt> command:</p><pre># <tt><b>metahs -d </tt><i>hot-spare-pool-name</i><tt> </tt><i>current-hot-spare</i><tt></b></tt></pre><dl><dt><tt>-d</tt></dt>
<dd><p>Specifies to delete a hot spare from the named hot spare pool.</p></dd>
<dt><i>hot-spare-pool</i></dt>
<dd><p>Specifies the name of the hot spare pool. You can also use the special keyword <tt>all</tt> to delete the hot spare from all hot spare pools.</p></dd>
<dt><i>current-hot-spare</i></dt>
<dd><p>Specifies the name of the current hot spare that will be deleted.</p></dd>
</dl>
<p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/metahs-1m?a=view"><tt>metahs</tt>(1M)</a> man page.</p></li></ul>
</li></ol><a name="egjvw"></a>Example&nbsp;17-11 Deleting a Hot Spare from One Hot Spare Pool<p>In the following example, the <tt>metastat</tt> command shows that the hot spare is
not in use. The <tt>metahs <tt>-d</tt></tt> command deletes the hot spare, <tt>/dev/dsk/c0t2d0s2</tt>, in the
hot spare pool, <tt>hsp003</tt>.</p><pre># <tt><b>metastat hsp003</b></tt>
hsp003: 1 hot spare
        c0t2d0s2                Broken       5600 blocks
# <tt><b>metahs -d hsp003 c0t2d0s2</b></tt></pre>

<a name="maintaintasksnew-23845"></a><h4>How to Enable a Hot Spare</h4><a name="indexterm-133"></a><a name="indexterm-134"></a><ol>
<li><b>Become superuser.</b></li>
<li><a name="tasks-hotspares-step-31"></a><b>To return a hot spare to the &ldquo;available&rdquo; state, use one of the
following methods:</b>
<ul><li><p>From the Enhanced Storage tool within the Solaris Management Console, open the Hot Spare Pools node and select a hot spare pool. Choose Action&rArr;Properties. Then, choose the Hot Spares panel. Follow the onscreen instructions. For more information, see the online help.</p></li>
<li><p>Use the following form of the <tt>metahs</tt> command:</p><pre># <tt><b>metahs -e </tt><i>hot-spare-slice</i><tt></b></tt></pre><dl><dt><tt>-e</tt></dt>
<dd><p>Specifies to enable a hot spare.</p></dd>
<dt><i>hot-spare-slice</i></dt>
<dd><p>Specifies the name of the slice to enable.</p></dd>
</dl>
<p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/metahs-1m?a=view"><tt>metahs</tt>(1M)</a> man page. </p></li></ul>
</li></ol><a name="egjwy"></a>Example&nbsp;17-12 Enabling a Hot Spare<p>In the following example, the <tt>metahs</tt> command places the hot spare, <tt>/dev/dsk/c0t0d0s2</tt> in
the &ldquo;Available&rdquo; state after it has been repaired. It is unnecessary to specify
a hot spare pool.</p><pre># <tt><b>metahs -e c0t0d0s2</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tasks-hotspares-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="about-disksets-31856.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

