<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Booting a SPARC Based System - System Administration Guide: Basic Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-12-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Basic Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="hbsparcboot-69.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ggqhf.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="saroadmap-1.html">1.&nbsp;&nbsp;Solaris Management Tools (Road Map)</a></p>
<p class="toc level1 tocsp"><a href="smcover-1.html">2.&nbsp;&nbsp;Working With the Solaris Management Console (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ewpor.html">3.&nbsp;&nbsp;Working With the Sun Java Web Console (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="userconcept-97366.html">4.&nbsp;&nbsp;Managing User Accounts and Groups (Overview)</a></p>
<p class="toc level1 tocsp"><a href="usersetup-92366.html">5.&nbsp;&nbsp;Managing User Accounts and Groups (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="clientconcept-15236.html">6.&nbsp;&nbsp;Managing Client-Server Support (Overview)</a></p>
<p class="toc level1 tocsp"><a href="clientsetup-1.html">7.&nbsp;&nbsp;Managing Diskless Clients (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbintro-66644.html">8.&nbsp;&nbsp;Introduction to Shutting Down and Booting a System</a></p>
<p class="toc level1 tocsp"><a href="hboverview-25463.html">9.&nbsp;&nbsp;Shutting Down and Booting a System (Overview)</a></p>
<p class="toc level1 tocsp"><a href="hbsyshalt-84412.html">10.&nbsp;&nbsp;Shutting Down a System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="grubtasks-1.html">11.&nbsp;&nbsp;Modifying Solaris Boot Behavior (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbsparcboot-79782.html">12.&nbsp;&nbsp;Booting a Solaris System (Tasks)</a></p>
<p class="toc level2"><a href="hbsparcboot-69.html">Booting a SPARC Based System (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Booting a SPARC Based System</a></p>
</div>
<p class="toc level2"><a href="ggqhf.html">Booting From a ZFS Root File System on a SPARC Based System</a></p>
<p class="toc level2"><a href="ggqqq.html">Booting the Failsafe Archive on a SPARC Based System</a></p>
<p class="toc level2"><a href="hbsparcboot-60.html">Booting a SPARC Based System From the Network</a></p>
<p class="toc level2"><a href="hbx86boot-68676.html">Booting an x86 Based System by Using GRUB (Task Map)</a></p>
<p class="toc level2"><a href="ggqaa.html">Booting From a ZFS Root File System on an x86 Based System</a></p>
<p class="toc level2"><a href="ggqdn.html">Booting the Failsafe Archive on an x86 Based System</a></p>
<p class="toc level2"><a href="ghsut.html">Using Fast Reboot on the x86 Platform (Task Map)</a></p>
<p class="toc level2"><a href="fvzok.html">Booting an x86 Based System from the Network</a></p>
<p class="toc level1 tocsp"><a href="hbtsboot-1.html">13.&nbsp;&nbsp;Troubleshooting Booting a Solaris System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="archive-123.html">14.&nbsp;&nbsp;Managing the Solaris Boot Archives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbsysboot-76719.html">15.&nbsp;&nbsp;x86: GRUB Based Booting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="hbrunlevels-25516.html">16.&nbsp;&nbsp;Managing Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="faauf.html">17.&nbsp;&nbsp;Managing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgsconcepts-52619.html">18.&nbsp;&nbsp;Managing Software (Overview)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgsgui-1.html">19.&nbsp;&nbsp;Managing Software With Solaris System Administration Tools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgscli-1.html">20.&nbsp;&nbsp;Managing Software by Using Package Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpatchtasks-1.html">21.&nbsp;&nbsp;Managing Solaris Patches by Using the <tt>patchadd</tt> Command (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;SMF Services</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="hbsparcboot-9"></a><h3>Booting a SPARC Based System</h3>
<p>If a system is turned off, turning it on starts the multiuser
boot sequence. The following procedures show how to boot to different run levels
from the <tt>ok</tt> PROM prompt. These procedures assume that the system has
been cleanly shut down, unless stated otherwise.</p><p>Use the <tt>who -r</tt> command to verify that the system is brought to the
specified run level. For a description of run levels, see <a href="hbrunlevels-25516.html">Chapter&nbsp;16, Managing Services (Overview)</a>.</p>

<a name="hbsparcboot-36744"></a><h4>SPARC: How to Boot a System to Run Level 3 (Multiuser Level)</h4><p>Use this procedure to boot a system that is currently at run
level 0 to run level 3.</p><ol>
<li><a name="ggprd"></a><b><a name="ggpnd"></a>Boot the system to run level 3. </b><pre>ok <tt><b>boot</b></tt></pre><p>The automatic boot procedure displays a series of startup messages, and brings the
system to run level 3. For more information, see the <a href="http://docs.sun.com/doc/819-2240/boot-1m?a=view"><tt>boot</tt>(1M)</a> man
page.</p></li>
<li><a name="ggpqs"></a><b>Verify that the system has booted to run level 3.</b><p>The login prompt is displayed when the boot process has finished successfully.</p><pre><i>hostname</i> console login:</pre></li></ol><h6>Example&nbsp;12-1 SPARC: Booting a System to Run Level 3 (Multiuser Level)</h6><p>The following example displays the messages from booting a system to run level
3.</p><pre>ok <tt><b>boot</b></tt>
Resetting ...

Sun Ultra 2 UPA/SBus (2 X UltraSPARC-II 296MHz), No Keyboard
OpenBoot 3.25, 512 MB memory installed, Serial #10342381.
Ethernet address 8:0:20:<i>xx</i>:cf:ed, Host ID: 80<i>xx</i>cfed.


Rebooting with command: boot
Boot device: /sbus@1f,0/SUNW,fas@e,8800000/sd@a,0:a  File and args: kadb
Loading kmdb...
SunOS Release 5.10        64-bit
Copyright 1983-2007 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms
WARNING: consconfig: cannot find driver for screen device /SUNW,ffb@1e,0
Hostname: dancehallgirl
NIS domain name is boulder.Central.Sun.COM
/dev/rdsk/c0t10d0s7 is clean
Reading ZFS config: done.

dancehallgirl console login:</pre>

<a name="hbsparcboot-83723"></a><h4>SPARC: How to Boot a System to Run Level S (Single-User Level)</h4><p>Use this procedure to boot a system that is currently at run
level 0 to run level S.  This run level is used for
system maintenance tasks, such as backing up a file system.</p><ol>
<li><a name="ggppk"></a><b><a name="ggpog"></a><a name="ggpqt"></a>Boot the system to run level S.</b><pre>ok <tt><b>boot -s</b></tt></pre></li>
<li><a name="ggppr"></a><b>Type the superuser password when the following message is displayed:</b><pre>SINGLE USER MODE

Root password for system maintenance (control-d to bypass): <tt><b>xxxxxx</b></tt></pre></li>
<li><a name="ggppq"></a><b>Verify that the system is at run level S.</b><pre># <tt><b>who -r</b></tt></pre></li>
<li><b>Perform the maintenance task that required the run level change to S.</b></li>
<li><a name="ggpoo"></a><b>After you complete the system maintenance task, type Control-D to bring the system
to the multiuser state.</b></li></ol><h6>Example&nbsp;12-2 SPARC: Booting a System to Run Level S (Single-User Level)</h6><p>The following example displays the messages from booting a system to run level
S.</p><pre>ok <tt><b>boot -s</b></tt>
Resetting ...

Sun Ultra 2 UPA/SBus (2 X UltraSPARC-II 296MHz), No Keyboard
OpenBoot 3.25, 512 MB memory installed, Serial #10342381.
Ethernet address 8:0:20:<i>xx</i>:cf:ed, Host ID: 80<i>xx</i>cfed.

Rebooting with command: boot -s
Boot device: /sbus@1f,0/SUNW,fas@e,8800000/sd@a,0:a  File and args: -s
SunOS Release 5.11
Copyright 1983-2007 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms
WARNING: consconfig: cannot find driver for screen device /SUNW,ffb@1e,0

Root password for system maintenance (control-d to bypass):
svc.startd: Returning to milestone all.
NIS domain name is boulder.Central.Sun.COM
/dev/rdsk/c0t10d0s7 is clean
Reading ZFS config: done.
dancehallgirl console login:</pre>

<a name="hbsparcboot-66353"></a><h4>SPARC: How to Boot a System Interactively</h4><p>Use this boot option when you need to specify an alternate kernel
or <tt>/etc/system</tt> file.</p><h6>Before You Begin</h6><p>To specify an alternate <tt>/etc/system</tt> file when booting a SPARC based system interactively
by using the <tt>boot</tt> <tt>-a</tt> command, you must perform the following steps
before the system is booted.</p>
<ul><li><p>1. Make backup copies of the <tt>/etc/system</tt> and <tt>boot/solaris/filelist.ramdisk</tt> files.</p><pre># <tt><b>cp /etc/system /etc/system.bak</b></tt>
# cp <tt>/boot/solaris/filelist.ramdisk</tt> <tt>/boot/solaris/filelist.ramdisk.orig</tt></pre></li>
<li><p>2. Add the <tt>etc/system.bak</tt> file name to the <tt>/boot/solaris/filelist.ramdisk</tt> file</p><pre># <tt><b>echo "etc/system.bak" &gt;&gt; /boot/solaris/filelist.ramdisk</b></tt></pre></li>
<li><p>3. Update the boot archive.</p><pre># <tt><b>bootadm update-archive -v</b></tt></pre></li></ul>
<ol>
<li><a name="ggpms"></a><b><a name="ggpnc"></a>Boot the system interactively.</b><pre>ok <tt><b>boot -a</b></tt></pre></li>
<li><a name="ggprc"></a><b>Answer the following system prompts:</b><ol style="list-style-type: lower-alpha">
				 
<li><b>When prompted, enter the name of the kernel to use for booting.</b><p>Press enter to use the default kernel file name. Otherwise, provide the name
of an alternate kernel, press Enter.</p></li>
<li><b>When prompted, provide an alternate path for the <tt>modules</tt> directories.</b><p>Press enter to use the default module directories. Otherwise, provide the alternate paths
to module directories, press Enter.</p></li>
<li><b>When prompted, provide the name of an alternate system file.</b><p>Type <tt>/dev/null</tt> if your <tt>/etc/system</tt> file has been damaged. </p></li>
<li><b>When prompted, enter the <tt>root</tt> filesystem type.</b><p>Press enter to select UFS for local disk booting, which is the
default, or enter <tt>NFS</tt> for network booting.</p></li>
<li><b>When prompted, enter the physical name of <tt>root</tt> device. </b><p>Provide an alternate device name or press return to use the default.</p></li></ol></li>
<li><a name="ggpmz"></a><b>If you are not prompted to answer these questions, verify that you typed
the <tt>boot</tt> <tt>-a</tt> command correctly.</b></li></ol><h6>Example&nbsp;12-3 SPARC: Booting a System Interactively</h6><p>In this example, the default choices (shown in square brackets <tt>[]</tt>) are accepted.
For instructions and an example of booting an alternate file system by using
the <tt>boot</tt> <tt>-a</tt> command, see <a href="#hbsparcboot-66353">SPARC: How to Boot a System Interactively</a>.</p><pre>ok boot -a
Resetting ...

Sun Ultra 2 UPA/SBus (2 X UltraSPARC-II 296MHz), No Keyboard
OpenBoot 3.25, 512 MB memory installed, Serial #10342381.
Ethernet address 8:0:20:9d:cf:ed, Host ID: 809dcfed.



Rebooting with command: boot -a
Boot device: /sbus@1f,0/SUNW,fas@e,8800000/sd@a,0:a  File and args: -a

Boot device: /sbus@1f,0/SUNW,fas@e,8800000/sd@a,0:a  File and args: -a
Name of system file [/etc/system]:
SunOS Release 5.11 Version zwicky:nbsclean-build:12/04/2007 64-bit
Copyright 1983-2007 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
Retire store [/etc/devices/retire_store] (/dev/null to bypass):
root filesystem type [ufs]:
Enter physical name of root device
[/sbus@1f,0/SUNW,fas@e,8800000/sd@a,0:a]:
WARNING: consconfig: cannot find driver for screen device /SUNW,ffb@1e,0
Hostname: dancehallgirl
NIS domain name is boulder.Central.Sun.COM
/dev/rdsk/c0t10d0s7 is clean
Reading ZFS config: done.
dancehallgirl login:</pre>

<a name="ggmuk"></a><h4>SPARC: How to Boot a Solaris Kernel Other Than the Default Kernel</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b></li>
<li><b>Obtain a copy of an existing Solaris kernel and rename it.</b></li>
<li><b>Add the kernel that you copied and renamed in Step 2 to
the <tt>/etc/boot/solaris/filelist.ramdisk</tt> file.</b><pre># <tt><b>echo "kernel.</tt><i>name</i><tt>" &gt;&gt; /boot/solaris/filelist.ramdisk</b></tt></pre></li>
<li><b>Verify that the alternate kernel has been added the <tt>/etc/boot/solaris/filelist.ramdisk</tt> file.</b><pre># <tt><b>cat &gt; /etc/boot/solaris/filelist.ramdisk</b></tt></pre></li>
<li><b>Update the boot archive by using the <tt>bootadm</tt> command.</b><pre># <tt><b>bootadm update-archive</b></tt></pre></li>
<li><a name="ggmwe"></a><b>Change to run level 0.</b><pre># <tt><b>init 0</b></tt></pre><p>The <tt>ok</tt> PROM prompt is displayed.</p></li>
<li><b>Boot the alternate kernel.</b><pre>ok <tt><b>boot </tt><i>alternate-kernel</i><tt></b></tt></pre><p>For example:</p><pre>ok <tt><b>boot kernel.myname/sparcv9/unix</b></tt></pre><ul>
<li><b>To boot the alternate kernel by default, follow these steps:</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Set the boot-file parameter to the new kernel.</b><pre>ok <tt><b>setenv boot-file kernel.</tt><i>name</i><tt>/sparc9/unix</b></tt></pre></li>
<li><b>Verify that the boot-file property has been changed.</b><pre>ok <tt><b>printenv boot-file</b></tt></pre></li>
<li><b>Reboot the system.</b><pre>ok <tt><b>boot</b></tt></pre></li></ol></li></ul></li>
<li><b>After the system has booted, verify that the alternate kernel that was booted.</b><pre># <tt><b>prtconf -vp | grep whoami</b></tt></pre></li></ol><a name="ggnbz"></a><h6>Example&nbsp;12-4 Booting an Alternate Solaris Kernel by Changing the Default Boot File</h6><pre># <tt><b>cp -r /platform/sun4v/kernel /platform/sun4vu/kernel.caiobella</b></tt>
# <tt><b>echo "kernel.caiobela" &gt;&gt; /boot/solaris/filelist.ramdisk</b></tt>

# <tt><b>cat &gt; /etc/boot/solaris/filelist.ramdisk</b></tt>
/platform/sun4v/kernel.caiobella
^D (control D)

ok <tt><b>setenv boot-file kernel.caiobells/sparcv9/unix</b></tt>
ok <tt><b>printenv boot-file</b></tt>
boot-file = kernel.caiobella/sparcv9/unix

ok <tt><b>boot</b></tt>

SC Alert: Host System has Reset

SC Alert: Host system has shut down.


Sun Fire T200, No KeyboardCopyright 2006 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.25.0.build_01***PROTOTYPE BUILD***, 32760 MB memory available, Serial 
#69060038.
Ethernet address 0:<i>x</i>:4f:<i>x</i>:c5:c6, Host ID: 8<i>xx</i>c5c6.



Rebooting with command: boot
Boot device: /pci@7c0/pci@0/pci@1/pci@0,2/LSILogic,sas@2/disk@0,0:a  File and 
args: kernel.caiobella/sparcv9/unix
SunOS Release 5.10
Copyright 1983-2007 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
misc/forthdebug (176650 bytes) loaded
Hostname: seasonz
NIS domain name is lab.domain.sun.com
Reading ZFS config: done.

seasonz console login:
Password:
Last login: Mon Nov 12 18:02:00 on console
Sun Microsystems Inc.   SunOS 5.11
.
.
.
You have new mail.
#
#
# <tt><b>prtconf -vp | grep whoami</b></tt>
        whoami:  '/platform/sun4v/kernel.caiobella/sparcv9/unix'</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="hbsparcboot-69.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ggqhf.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

