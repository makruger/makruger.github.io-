<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>What's New in Shutting Down and Booting a System - System Administration Guide: Basic Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-12-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Basic Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="hbintro-66644.html">Previous</a>
             </td>
             <td align="right">
                 <a href="hbrunlevels-27.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="saroadmap-1.html">1.&nbsp;&nbsp;Solaris Management Tools (Road Map)</a></p>
<p class="toc level1 tocsp"><a href="smcover-1.html">2.&nbsp;&nbsp;Working With the Solaris Management Console (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ewpor.html">3.&nbsp;&nbsp;Working With the Sun Java Web Console (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="userconcept-97366.html">4.&nbsp;&nbsp;Managing User Accounts and Groups (Overview)</a></p>
<p class="toc level1 tocsp"><a href="usersetup-92366.html">5.&nbsp;&nbsp;Managing User Accounts and Groups (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="clientconcept-15236.html">6.&nbsp;&nbsp;Managing Client-Server Support (Overview)</a></p>
<p class="toc level1 tocsp"><a href="clientsetup-1.html">7.&nbsp;&nbsp;Managing Diskless Clients (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbintro-66644.html">8.&nbsp;&nbsp;Introduction to Shutting Down and Booting a System</a></p>
<div class="onpage">
<p class="toc level2"><a href="">What's New in Shutting Down and Booting a System</a></p>
</div>
<p class="toc level2"><a href="hbrunlevels-27.html">Where to Find Shut Down and Boot Tasks</a></p>
<p class="toc level2"><a href="hboverview-21323.html">Shut Down and Boot Terminology</a></p>
<p class="toc level2"><a href="hboverview-40266.html">Guidelines for Shutting Down a System</a></p>
<p class="toc level2"><a href="hboverview-19075.html">Guidelines for Booting a System</a></p>
<p class="toc level2"><a href="hboverview-70350.html">When to Shut Down a System</a></p>
<p class="toc level2"><a href="hboverview-24993.html">When to Boot a System</a></p>
<p class="toc level1 tocsp"><a href="hboverview-25463.html">9.&nbsp;&nbsp;Shutting Down and Booting a System (Overview)</a></p>
<p class="toc level1 tocsp"><a href="hbsyshalt-84412.html">10.&nbsp;&nbsp;Shutting Down a System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="grubtasks-1.html">11.&nbsp;&nbsp;Modifying Solaris Boot Behavior (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbsparcboot-79782.html">12.&nbsp;&nbsp;Booting a Solaris System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbtsboot-1.html">13.&nbsp;&nbsp;Troubleshooting Booting a Solaris System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="archive-123.html">14.&nbsp;&nbsp;Managing the Solaris Boot Archives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbsysboot-76719.html">15.&nbsp;&nbsp;x86: GRUB Based Booting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="hbrunlevels-25516.html">16.&nbsp;&nbsp;Managing Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="faauf.html">17.&nbsp;&nbsp;Managing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgsconcepts-52619.html">18.&nbsp;&nbsp;Managing Software (Overview)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgsgui-1.html">19.&nbsp;&nbsp;Managing Software With Solaris System Administration Tools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgscli-1.html">20.&nbsp;&nbsp;Managing Software by Using Package Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpatchtasks-1.html">21.&nbsp;&nbsp;Managing Solaris Patches by Using the <tt>patchadd</tt> Command (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;SMF Services</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="etmjx"></a><h3>What's New in Shutting Down and Booting a System</h3>
<p>This section describes new boot features in the Solaris release.</p>

<a name="ghzdv"></a><h4>x86: iSCSI Boot</h4>
<a name="indexterm-101"></a><a name="indexterm-102"></a><p><b>Solaris Express Community Edition, build 104:</b> The iSCSI Boot feature enables you to initialize an operating system over
the network from a remote location, such as a storage disk array. This
version of iSCSI Boot supports booting from x86 based systems. iSCSI Boot is
typically loaded onto an initiator or a diskless client, while the hard disk
resides on a SCSI target that is attached to the network. Because the
feature uses a standard Ethernet-based infrastructure, data, storage, and networking traffic can be consolidated
on a standard network.  More information about iSCSI Boot can be found
at <a href="http://wikis.sun.com/display/OpenSolarisInfo/iSCSI+Boot">http://wikis.sun.com/display/OpenSolarisInfo/iSCSI+Boot</a>.</p>

<a name="ghseq"></a><h4>Fast Reboot on the x86 Platform</h4>
<a name="indexterm-103"></a><p><b>Solaris Express Community Edition, build 100, and the OpenSolaris 2008.11 release:</b> The Fast Reboot feature enables you to reboot an x86 based system,
bypassing the firmware and boot loader processes.  Fast Reboot implements an in-kernel
boot loader that loads the kernel into memory and then switches to that
kernel, so that the reboot process occurs within seconds. This feature is implemented
on both 32-bit and 64-bit kernels.</p><p>For more information about this feature, see <a href="ghsbc.html">x86: Introducing Fast Reboot</a>.</p>

<a name="ggjfc"></a><h4>ZFS Boot Support</h4>
<p><b>Solaris Express Community Edition, builds 88 and 90:</b> This release includes  ZFS <sup>TM</sup> installation and boot support. Systems can now
be installed and booted from a ZFS root file system. This implementation applies
to both SPARC and x86 based systems. Booting, system operations, and installation procedures
have been modified to support this change.</p><p>For more information, see <a href="ggqhp.html">Booting From a ZFS Root File System</a>.</p>

<a name="ggvnn"></a><h4>x86: New <tt>findroot</tt> Command</h4>
<p><b>Solaris Express Community Edition, build 88:</b> All Solaris installation methods, including Solaris Live Upgrade, now use the <tt>findroot</tt>
command for specifying which disk slice on an x86 based system to boot.
This implementation supports booting systems with ZFS roots, as well as UFS roots.
Previously, the <tt>root</tt> command, <tt>root</tt> (<tt>hd0.0.a</tt>), was used to explicitly specify which disk
slice to boot. This information is located in the <tt>menu.lst</tt> file that is
used by GRUB.</p><p>The most common form of the GRUB <tt>menu.lst</tt> entry is now:</p><pre>findroot (rootfs0,0,a)
kernel$ /platform/i86pc/kernel/$ISADIR/unix -B $ZFS-BOOTFS
module$ /platform/i86pc/$ISADIR/boot_archive</pre><p>For more information, see <a href="getov.html#ggumt">x86: Implementation of the <tt>findroot</tt> Command</a>.</p>

<a name="ggqtf"></a><h4>Support for Specifying Platform by Using <tt>bootadm</tt> Command</h4>
<p><b>Solaris Express Community Edition, build 87:</b> A new <tt>-p</tt> option has been added to the <tt>bootadm</tt> command.</p><p>This option enables you to specify the platform or machine hardware class of
a client system in situations where the client platform differs from the server
platform, for example when administering diskless clients.</p>
<hr><p><b>Note - </b>The <tt>-p</tt> option must be used with the <tt>-R</tt> option.</p>
<hr>
<pre># <tt><b>bootadm -p </tt><i>platform</i><tt> -R [</tt><i>altroot</i><tt>]</b></tt></pre><p>The specified platform must be one of the following:</p>
<ul><li><p><tt>i86pc</tt></p></li>
<li><p><tt>sun4u</tt></p></li>
<li><p><tt>sun4v</tt></p></li></ul>
<p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/bootadm-1m?a=view"><tt>bootadm</tt>(1M)</a> man page.</p>

<a name="ggean"></a><h4>Solaris SPARC Bootstrap Process Redesigned</h4>
<p><b>Solaris Express Community Edition, build 80:</b> The Solaris SPARC bootstrap process has been redesigned to increase commonality with
the Solaris x86 boot architecture.</p><p>Other enhancements include an improved boot architecture that supports booting a system from
additional file system types, for example a ZFS file system or a single
miniroot for installation, as well as booting from DVD, NFS, or HTTP. These
enhancements increase flexibility and reduce maintenance requirements on SPARC based systems.</p><p>As part of this redesign, the Solaris boot archives and the <tt>bootadm</tt>
command, previously only available on the Solaris x86 based platform, are now an
integral part of the Solaris SPARC boot architecture.</p><p>The primary difference between the SPARC and x86 boot architectures is how the
boot device and file are selected at boot time. The SPARC based platform
continues to use the OpenBoot<sup>TM</sup> PROM (OBP) as the primary administrative interface, with
boot options selected by using OBP commands. On x86 based systems, these options
are selected through the BIOS and the GRand Unified Bootloader (GRUB) menu.</p>
<hr><p><b>Note - </b> Although the implementation of the Solaris SPARC boot  has changed, no
administrative procedures for booting a SPARC based system have been impacted. Boot tasks
that are performed by the system administrator remain the same as they were
prior to the boot architecture redesign.</p>
<hr>
<p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/boot-1m?a=view"><tt>boot</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2240/bootadm-1m?a=view"><tt>bootadm</tt>(1M)</a> man pages.</p><p>For more information in this document, see <a href="ggefi.html">Understanding the New Solaris SPARC Boot Architecture</a>.</p>

<a name="gfrft"></a><h4>x86: Support for Booting the Solaris OS as a Virtualized Control Domain</h4>
<p><b>Solaris Express Community Edition, build 75:</b> In this release, the GRUB boot loader is capable of booting a
Solaris release that runs with hypervisor technology. The hypervisor can securely execute multiple
virtual machines simultaneously, each running its own operating system, on a single physical
system. You can decide at boot time whether to run the Solaris OS
as a virtualized domain0, also called a dom0, or as a stand-alone operating
system.</p><p>You can run the Solaris OS as a virtualized dom0. Whether to
run the Solaris OS as a virtualized dom0 or as a stand-alone operating
system is a decision you can make at boot time. To run the
Solaris OS as a virtualized dom0, there must first be an entry in
the <tt>menu.lst</tt> file that specifies the hypervisor. The entry can be the default
boot entry, or it can be an option that you select manually at
boot time. Note that when you upgrade your system to a Solaris release
that includes this capability, the <tt>bootadm</tt> command automatically adds a menu entry for the
hypervisor to the <tt>menu.lst</tt> file.</p><p>The <tt>bootadm</tt> command installs a default boot entry in the <tt>menu.lst</tt> file that
is similar to the following:</p><pre>kernel$ /boot/$ISADIR/xen.gz
module$ /platform/i86xpv/kernel/$ISADIR/unix /platform/i86xpv/kernel/$ISADIR/unix -B $ZFS-BOOTFS 
module$ /platform/i86pc/$ISADIR/boot_archive</pre>
<hr><p><b>Note - </b>The format for entries that are used in the <tt>menu.lst</tt> file for booting
the Solaris OS as a control domain differs slightly from the format that
is used for other <tt>menu.lst</tt> entries. The <tt>kernel$</tt> line must identify the
hypervisor binary to use and includes any options that are accepted by the
hypervisor. The first <tt>module$</tt> line in the file identifies the Solaris kernel to
use, for example <tt>unix</tt>, and include any options the <tt>unix</tt> kernel accepts. Due
to an implementation detail that exists in this version of GRUB, the specified
<tt>unix</tt> kernel must be named twice on the first <tt>module$</tt> line. The second
<tt>module$</tt> line identifies the boot archive to use.</p>
<hr>
<p>For more information, see <a href="ghcsf.html#gftyx">Description of a <tt>menu.lst</tt> File That Supports Hypervisor Technology</a>.</p><p>For more information about administering Solaris systems that support the hypervisor, see <a href="http://www.opensolaris.org/os/community/xen/docs/">http://www.opensolaris.org/os/community/xen/docs/</a>
and <a href="http://docs.sun.com/doc/819-2450"><i>System Administration Guide: Virtualization Using the Solaris Operating System</i></a></p>

<a name="getrk"></a><h4>x86: GRUB Support for Directly Loading and Booting the <tt>unix</tt> Kernel</h4>
<a name="indexterm-104"></a><a name="indexterm-105"></a><a name="indexterm-106"></a><p><b>Solaris Express Community Edition, build 57:</b> This release includes changes to the GRUB based boot environment to enable
the boot loader to directly load and boot the <tt>unix</tt> kernel. </p>
<hr><p><b>Note - </b>The GRUB <tt>multiboot</tt> module is no longer used.</p>
<hr>
<p>This implementation integrates the previous multiboot functionality directly into the platform-specific <tt>unix</tt> kernel
module. These changes reduce the time, as well as memory requirements, that are
needed to boot the Solaris OS on x86 based systems.</p><p>Two new keywords, <tt>kernel$</tt> and <tt>module$</tt>, have been added to GRUB to assist
in creating <tt>menu.lst</tt> entries that work with either 32-bit or 64-bit systems. In
addition, the <tt>bootadm</tt> command that manages the <tt>menu.lst</tt> file has been modified to
create file entries for the platform-specific <tt>unix</tt> module that is loaded by GRUB.
During an upgrade, the <tt>bootadm</tt> command converts any existing multiboot <tt>menu.lst</tt> entries to
<tt>unix</tt> entries.</p><p>The <tt>kernel$</tt> and <tt>module$</tt> keywords are identical to the <tt>kernel</tt> and <tt>module</tt> commands that
are used in the GRUB multiboot implementation, with the addition of the
<tt>$ISADIR</tt> keyword. This keyword provides the capability to expand to amd64 on 64-bit
capable hardware. If the x86 based system is not 64-bit capable, the <tt>$ISADIR</tt>
keyword is a null value (<tt>""</tt>). In this case, the system boots the
32-bit kernel.</p>
<hr><p><b>Note - </b>These changes do not prevent you from booting a newer Solaris kernel with
an older implementation of GRUB. Nor do the changes prevent you from booting
an older Solaris kernel with a newer implementation of GRUB.</p>
<hr>
<p>For information about booting an x86 based system with GRUB, see <a href="fvbsc.html">x86: Administering the GRUB Bootloader</a>.</p>

<a name="gehpw"></a><h4>x86: Support for Using Power Button to Initiate System Shutdown</h4>
<p>Pressing and releasing the power button on x86 based systems initiates a clean
system shutdown and turns the system off. This functionality is equivalent to using
the <tt>init 5</tt> command to shut down a system.  On some x86 based
systems, the BIOS configuration might prevent the power button from initiating shutdown. To
enable use of the power button to perform a clean system shutdown, reconfigure
the BIOS.</p>
<hr><p><b>Note - </b>On certain x86 based systems that were manufactured before 1999 and are running
an older Solaris release, pressing the power button immediately turns off system power
without safely shutting down the system. This same behavior occurs when pressing the
power button on systems that are running with ACPI support that is disabled
through the use of <tt>acpi-user-options</tt>.</p><p>For more information about <tt>acpi-user-options</tt>, see the <a href="http://docs.sun.com/doc/819-2240/eeprom-1m?a=view"><tt>eeprom</tt>(1M)</a> man page.</p>
<hr>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="hbintro-66644.html">Previous</a>
             </td>
             <td align="right">
                 <a href="hbrunlevels-27.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

