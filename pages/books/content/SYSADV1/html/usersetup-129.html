<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Up User Accounts (Task Map) - System Administration Guide: Basic Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-12-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Basic Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="usersetup-92366.html">Previous</a>
             </td>
             <td align="right">
                 <a href="usersetup-128.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="saroadmap-1.html">1.&nbsp;&nbsp;Solaris Management Tools (Road Map)</a></p>
<p class="toc level1 tocsp"><a href="smcover-1.html">2.&nbsp;&nbsp;Working With the Solaris Management Console (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ewpor.html">3.&nbsp;&nbsp;Working With the Sun Java Web Console (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="userconcept-97366.html">4.&nbsp;&nbsp;Managing User Accounts and Groups (Overview)</a></p>
<p class="toc level1 tocsp"><a href="usersetup-92366.html">5.&nbsp;&nbsp;Managing User Accounts and Groups (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Setting Up User Accounts (Task Map)</a></p>
</div>
<p class="toc level2"><a href="usersetup-128.html">Maintaining User Accounts (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="clientconcept-15236.html">6.&nbsp;&nbsp;Managing Client-Server Support (Overview)</a></p>
<p class="toc level1 tocsp"><a href="clientsetup-1.html">7.&nbsp;&nbsp;Managing Diskless Clients (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbintro-66644.html">8.&nbsp;&nbsp;Introduction to Shutting Down and Booting a System</a></p>
<p class="toc level1 tocsp"><a href="hboverview-25463.html">9.&nbsp;&nbsp;Shutting Down and Booting a System (Overview)</a></p>
<p class="toc level1 tocsp"><a href="hbsyshalt-84412.html">10.&nbsp;&nbsp;Shutting Down a System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="grubtasks-1.html">11.&nbsp;&nbsp;Modifying Solaris Boot Behavior (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbsparcboot-79782.html">12.&nbsp;&nbsp;Booting a Solaris System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbtsboot-1.html">13.&nbsp;&nbsp;Troubleshooting Booting a Solaris System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="archive-123.html">14.&nbsp;&nbsp;Managing the Solaris Boot Archives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="hbsysboot-76719.html">15.&nbsp;&nbsp;x86: GRUB Based Booting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="hbrunlevels-25516.html">16.&nbsp;&nbsp;Managing Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="faauf.html">17.&nbsp;&nbsp;Managing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgsconcepts-52619.html">18.&nbsp;&nbsp;Managing Software (Overview)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgsgui-1.html">19.&nbsp;&nbsp;Managing Software With Solaris System Administration Tools (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpkgscli-1.html">20.&nbsp;&nbsp;Managing Software by Using Package Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="swmgrpatchtasks-1.html">21.&nbsp;&nbsp;Managing Solaris Patches by Using the <tt>patchadd</tt> Command (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;SMF Services</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="usersetup-129"></a><h3>Setting Up User Accounts (Task Map)</h3>
<table><col width="33%"><col width="33%"><col width="32%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Gather user
information.</p></td>
<td align="left" valign="top" scope="row"><p>Use a standard form to gather user information to help you keep
user information organized.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#usersetup-21417">Gathering User Information</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Customize user initialization files.</p></td>
<td align="left" valign="top" scope="row"><p>You can set up user initialization files (<tt>.cshrc</tt>,
<tt>.profile</tt>, <tt>.login</tt>), so that you can provide new users with consistent environments.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#usersetup-52714">How to Customize User Initialization Files</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a
group.</p></td>
<td align="left" valign="top" scope="row"><p>You can add a group with the following tools:</p><p>Solaris Management Console's Groups
tool</p><p>Solaris command-line interface tools</p></td>
<td align="left" valign="top" scope="row"><p><a href="#usersetup-30">How to Add a Group With the Solaris Management Console's Groups Tool</a></p><p><a href="#usersetup-32">Adding Groups and Users With Command-Line Tools</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a user.</p></td>
<td align="left" valign="top" scope="row"><p>You can add a user with the
following tools:</p><p>Solaris Management Console's Users tool</p><p>Solaris command-line interface tools</p></td>
<td align="left" valign="top" scope="row"><p><a href="#usersetup-21">How to Add a User With the Solaris Management Console's Users Tool</a></p><p><a href="#usersetup-32">Adding Groups and Users With Command-Line Tools</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Set up a user
template.</p></td>
<td align="left" valign="top" scope="row"><p>You can create a user template so that you don't have to
manually add all similar user properties.</p></td>
<td align="left" valign="top" scope="row"><p>See Solaris Management Console online help</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add rights or
a role to a user.</p></td>
<td align="left" valign="top" scope="row"><p>You can add rights or a role to
a user so that the user can perform a specific command or task.</p></td>
<td align="left" valign="top" scope="row"><p>See
Solaris Management Console online help</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Share the user's home directory.</p></td>
<td align="left" valign="top" scope="row"><p>You must share the
user's home directory so that the directory can be remotely mounted from the
user's system. </p></td>
<td align="left" valign="top" scope="row"><p><a href="#usersetup-15731">How to Share a User's Home Directory</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount the user's home directory.</p></td>
<td align="left" valign="top" scope="row"><p>You must mount the user's home
directory on the user's system.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#usersetup-57972">How to Mount a User's Home Directory</a></p></td>
</tr>
</table>

<a name="usersetup-21417"></a><h4>Gathering User Information</h4>
<p><a name="usersetup-ix713"></a>You can create a form such as the following to gather information about
users before adding their accounts. </p><table><col width="50%"><col width="50%"><tr><th align="left" valign="top" scope="column"><p>Item</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>User Name:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Role Name:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Profiles or Authorizations:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>UID:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Primary Group:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Secondary Groups:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Comment:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Default
Shell:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Password Status and Aging:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Home Directory Path Name:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mounting Method:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Permissions on Home Directory:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mail Server:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Department
Name:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Department Administrator:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Manager:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Employee Name:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Employee Title:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Employee Status:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Employee Number:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Start Date:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add to These Mail Aliases:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Desktop System
Name:</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
</table>

<a name="usersetup-52714"></a><h4>How to Customize User Initialization Files</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="usersetup-step-5"></a><b>Create a skeleton directory for each type of user.</b><pre># <tt><b>mkdir /</b></tt><i>shared-dir</i><tt><b>/skel/</b></tt><i>user-type</i></pre><dl><dt><i>shared-dir</i></dt>
<dd><p>The name of a directory that is available to other systems on the network. </p></dd>
<dt><i>user-type</i></dt>
<dd><p>The name of a directory to store initialization files for a type of user.</p></dd>
</dl>
</li>
<li><a name="usersetup-step-6"></a><b>Copy the default user initialization files into the directories that you created for
different types of users.   </b><pre># <tt><b>cp /etc/skel/local.cshrc /</b></tt><i>shared-dir</i><tt><b>/skel/</b></tt><i>user-type</i><tt><b>/.cshrc</b></tt>
# <tt><b>cp /etc/skel/local.login /</b></tt><i>shared-dir</i><tt><b>/skel/</b></tt><i>user-type</i><tt><b>/.login</b></tt>
# <tt><b>cp /etc/skel/local.profile /</b></tt><i>shared-dir</i><tt><b>/skel/</b></tt><i>user-type</i><tt><b>/.profile</b></tt></pre>
<hr><p><b>Note - </b>If the account has profiles assigned to it, then the user has to
launch a special version of the shell called a profile shell to
use commands (with any security attributes) that are assigned to the profile. There
are three <b>profile shells</b> corresponding to the types of shells: <tt>pfsh</tt> (Bourne shell), <tt>pfcsh</tt>
(C shell), and <tt>pfksh</tt> (Korn shell). For information about profile shells, see
<a href="http://docs.sun.com/doc/819-3321/rbac-1?a=view">Role-Based Access Control (Overview) in <i>System Administration Guide: Security Services</i></a>.</p>
<hr>
</li>
<li><a name="usersetup-step-7"></a><b>Edit the user initialization files for each user type and customize them based
on your site's needs.</b><p>For a detailed description on the ways to customize the user initialization files, see
<a href="userconcept-23295.html">Customizing a User's Work Environment</a>.</p></li>
<li><a name="usersetup-step-8"></a><b>Set the permissions for the user initialization files.</b><pre># <tt><b>chmod 744</b></tt> <tt><b>/</b></tt><i>shared-dir</i><tt><b>/skel/</b></tt><i>user-type</i><tt><b>/.*</b></tt></pre></li>
<li><a name="usersetup-step-2"></a><b>Verify that the permissions for the user initialization files are correct.</b><pre># <tt><b>ls -la</b></tt> <i>/shared-dir</i><tt><b>/skel/*</b></tt></pre></li></ol><h6>Example&nbsp;5-1 Customizing User Initialization Files</h6><p>The following example shows how to customize the C-shell user initialization file in
the <tt>/export/skel/enduser</tt> directory designated for a particular type of user. For an example
of a <tt>.cshrc</tt> file, see <a href="userconcept-23295.html#userconcept-25815">Example&nbsp;4-3</a>.</p><pre># <tt><b>mkdir /export/skel/enduser</b></tt>
# <tt><b>cp /etc/skel/local.cshrc /export/skel/enduser/.cshrc</b></tt>
 
(<i>Edit .cshrc file</i>)
# <tt><b>chmod 744 /export/skel/enduser/.*</b></tt></pre>

<a name="usersetup-30"></a><h4>How to Add a Group With the Solaris Management Console's Groups Tool</h4><p>You can add existing users to the group when you add the
group. Or, you can just add the group and then add the user
to the group when you add the user.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="usersetup-step-23"></a><b>Start the Solaris Management Console.</b><pre># <tt><b>/usr/sadm/bin/smc &amp;</b></tt></pre><p>For more information on starting the Solaris Management Console, see <a href="smcover-18.html#smcover-42573">How to Start the Console as Superuser or as a Role</a> or
<a href="smcover-21.html#smcover-23">How to Start the Solaris Management Console in a Name Service Environment</a>.</p></li>
<li><a name="usersetup-step-24"></a><b>Click the This Computer icon under the Management Tools icon in the Navigation
pane.</b><p>A list of categories is displayed.</p></li>
<li><a name="usersetup-step-25"></a><b>(Optional) Select the appropriate toolbox for your name service environment.</b></li>
<li><a name="usersetup-step-26"></a><b>Click the System Configuration icon.</b></li>
<li><a name="usersetup-step-27"></a><b>Click the User icon and provide the superuser password or the role password.</b></li>
<li><a name="usersetup-step-29"></a><b>Click the Groups icon. Select Add Group from the Action menu.</b><p>Use the Context help to add a group to the system.</p></li>
<li><a name="usersetup-step-36"></a><b>Identify the group name at the Group Name prompt under Group Identification.</b><p>For example, <tt>mechanoids</tt>.</p></li>
<li><a name="usersetup-step-37"></a><b>Identify the group number at the Group ID number prompt.</b><p>For example, GID 101.</p></li>
<li><a name="usersetup-step-38"></a><b>Click OK.</b></li></ol>

<a name="usersetup-21"></a><h4>How to Add a User With the Solaris Management Console's Users Tool</h4><p>Use the following procedure to add a user with the Solaris Management Console's
Users tool.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="usersetup-step-1"></a><b>Start the Solaris Management Console.</b><pre># <tt><b>/usr/sadm/bin/smc &amp;</b></tt></pre><p>For more information on starting the Solaris Management Console, see <a href="smcover-18.html#smcover-42573">How to Start the Console as Superuser or as a Role</a> or
<a href="smcover-21.html#smcover-23">How to Start the Solaris Management Console in a Name Service Environment</a>.</p></li>
<li><a name="usersetup-step-9"></a><b>Click the This Computer icon under the Management Tools icon in the Navigation
pane.</b><p>A list of categories is displayed.</p></li>
<li><a name="usersetup-step-10"></a><b>(Optional) Select the appropriate toolbox for your name service environment.</b></li>
<li><a name="usersetup-step-11"></a><b>Click the System Configuration icon.</b></li>
<li><a name="usersetup-step-12"></a><b>Click the User icon and provide the superuser password or the role password.</b></li>
<li><a name="usersetup-step-15"></a><b>Click the User Accounts icon.</b><p>Use the Context help to add a user to the system.</p></li>
<li><a name="usersetup-step-39"></a><b>Select Add User&rArr;With Wizard from the Action menu.</b><p>Click Next between the steps below.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>Identify the user name or login name at the User Name prompt.</b><p>For example, <tt>kryten</tt></p></li>
<li><a name="usersetup-step-40"></a><b>(Optional) Identify the user's full name at the Full Name prompt.</b><p>For example, <tt>kryten series 3000</tt>.</p></li>
<li><a name="usersetup-step-41"></a><b>(Optional) Provide a further description of this user at the Description prompt.</b></li>
<li><a name="usersetup-step-42"></a><b>Provide the user ID at the User ID Number prompt.</b><p>For example, <tt>1001</tt>.</p></li>
<li><a name="usersetup-step-43"></a><b>Select the User Must Use This Password At First Login option.</b><p>Provide a password for the user at the Password prompt and then confirm
the password at the Confirm Password prompt.</p></li>
<li><a name="usersetup-step-44"></a><b>Select the user's primary group.</b><p>For example, <tt>mechanoids</tt>.</p></li>
<li><a name="usersetup-step-45"></a><b>Create the user's home directory by accepting the defaults at the Server and
Path prompts.</b></li>
<li><a name="usersetup-step-46"></a><b>Specify the mail server.</b></li>
<li><a name="usersetup-step-47"></a><b>Review the information you provided and go back to correct the information, if
necessary. Otherwise, click Finish.</b></li></ol></li></ol>

<a name="usersetup-32"></a><h4>Adding Groups and Users With Command-Line Tools</h4>
<p>This section provides examples of adding users and groups with command-line tools.</p>

<a name="usersetup-33"></a><h5>Adding a Group and User With the <tt>groupadd</tt> and <tt>useradd</tt> Commands</h5>
<p>The following example shows how to use the <tt>groupadd</tt> and <tt>useradd</tt> commands
to add the group <tt>scutters</tt> and the user <tt>scutter1</tt> to files on the
local system. These commands cannot be used to manage users in a name
service environment.</p><pre># <tt><b>groupadd -g 102 scutters</b></tt>
# <tt><b>useradd -u 1003 -g 102 -d /export/home/scutter1 -s /bin/csh \ -c "Scutter 1" -m -k /etc/skel</b></tt> <tt><b>scutter1</b></tt>
64 blocks</pre><p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/groupadd-1m?a=view"><tt>groupadd</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2240/useradd-1m?a=view"><tt>useradd</tt>(1M)</a> man pages.</p>

<a name="usersetup-34"></a><h5>Adding a Group and User With the <tt>smgroup</tt> and <tt>smuser</tt> Commands</h5>
<p>The following example shows how to use the <tt>smgroup</tt> and <tt>smuser</tt> commands
to add the group <tt>gelfs</tt> and the user <tt>camille</tt> to the NIS domain
<tt>solar.com</tt> on the host <tt>starlite</tt>.</p><pre># <tt><b>/usr/sadm/bin/smgroup add -D nis:/starlitesolar.com -- -g 103 -n gelfs</b></tt>
# <tt><b>/usr/sadm/bin/smuser add -D nis:/starlite/solar.com -- -u 1004</b></tt> 
<tt><b>-n camille -c "Camille G." -d /export/home/camille -s /bin/csh -g gelfs</b></tt></pre><p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/smgroup-1m?a=view"><tt>smgroup</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2240/smuser-1m?a=view"><tt>smuser</tt>(1M)</a> man pages.</p>

<a name="userconcept-29"></a><h4>Setting Up Home Directories With the Solaris Management Console</h4>
<p>Keep the following in mind when using the Solaris Management Console tools to
manage user home directories:</p>
<ul><li><p>If you use the Users tool's Add User Wizard to add a user account and you specify the user's home directory as <tt>/export/home/</tt><i>username</i>, the home directory is automatically set up to automount. Also, the following entry is added to the <tt>passwd</tt> file.</p><pre>/home/<i>username</i></pre></li>
<li><p>There is only way you can use Users tool to set up a user account that does not automount the home directory. First, set up a user account template that disables this feature. Then, add users with this template. You cannot disable this feature with the Add User Wizard.</p></li>
<li><p>You can use the <tt>smuser add</tt> command with the <tt>-x autohome=N</tt> option to add a user without automounting the user's home directory. However, there is no option to the <tt>smuser delete</tt> command to remove the home directory after the user is added. You would have to remove the user and the user's home directory with the Users tool.</p></li></ul>


<a name="usersetup-15731"></a><h4>How to Share a User's Home Directory</h4><p>Use the following procedure to share a user's home directory.</p><ol>
<li><a name="usersetup-step-59"></a><b><a name="usersetup-ix762"></a><a name="usersetup-ix764"></a>Become superuser or assume an equivalent role on the system that contains the
home directory.</b></li>
<li><a name="usersetup-step-60"></a><b>Verify that the <tt>mountd</tt> daemon is running.</b><p>In this release, <tt>mountd</tt> is now started as part of the NFS server
service. To see if the <tt>mountd</tt> daemon is running, type the following command:</p><pre># <tt><b>svcs network/nfs/server</b></tt>
STATE          STIME    FMRI
online         Aug_26   svc:/network/nfs/server:default</pre></li>
<li><a name="usersetup-step-61"></a><b>If the <tt>mountd</tt> daemon is not running, start it.</b><pre># <tt><b>svcadm network/nfs/server</b></tt></pre></li>
<li><a name="usersetup-step-62"></a><b>List the file systems that are shared on the system.</b><pre># <tt><b>share</b></tt></pre></li>
<li><a name="usersetup-step-63"></a><b>Select one of the following based on whether the file system that contains
the user's home directory is already shared.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>If the user's home directory is already shared, go to the step 8.</b></li>
<li><a name="usersetup-step-14"></a><b>If the user's home directory is not shared, go to <a href="#usersetup-step-64">Step&nbsp;6</a>.</b></li></ol></li>
<li><a name="usersetup-step-64"></a><b><a name="usersetup-ix767"></a><a name="usersetup-ix768"></a>Edit the <tt>/etc/dfs/dfstab</tt> file and add the following line: </b><pre>share -F nfs <i>/file-system</i></pre><p><i>/file-system</i> is the file system that contains the user's home directory that you
need to share. By convention, the file system is <tt>/export/home</tt>. </p></li>
<li><a name="usersetup-step-65"></a><b>Share the file systems listed in the <tt>/etc/dfs/dfstab</tt> file.</b><pre># <tt><b>shareall -F nfs</b></tt></pre><p>This command executes all the <tt>share</tt> commands in the <tt>/etc/dfs/dfstab</tt> file so
that you do not have to wait to reboot the system.</p></li>
<li><a name="usersetup-step-66"></a><b>Verify that a user's home directory is shared.</b><pre># <tt><b>share</b></tt></pre></li></ol><h6>Example&nbsp;5-2 Sharing a User's Home Directory</h6><p>The following example shows how to share the <tt>/export/home</tt> directory.</p><pre># <tt><b>svcs network/nfs/server</b></tt>
# <tt><b>svcadm network/nfs/server</b></tt>
# <tt><b>share</b></tt>
# <tt><b>vi /etc/dfs/dfstab</b></tt>
 
(<i>The line</i> share -F nfs /export/home <i>is added.</i>)
# <tt><b>shareall -F nfs</b></tt>
# <tt><b>share</b></tt>
-               /usr/dist                ro   "" 
-               /export/home/<i>user-name</i>     rw   ""  </pre><h6>See Also</h6><p>If the user's home directory is not located on the user's system,
you have to mount the user's home directory from the system where it
is located. For detailed instructions, see <a href="#usersetup-57972">How to Mount a User's Home Directory</a>.    </p>

<a name="usersetup-57972"></a><h4>How to Mount a User's Home Directory</h4><p>For information on automounting a home directory, see <a href="http://docs.sun.com/doc/819-1634/rfsadmin-127?a=view">Task Overview for Autofs Administration in <i>System Administration Guide: Network Services</i></a>.</p><ol>
<li><a name="usersetup-step-69"></a><b>Make sure that the user's home directory is shared.</b><p><a name="usersetup-ix774"></a><a name="usersetup-ix775"></a>For more information, see <a href="#usersetup-15731">How to Share a User's Home Directory</a>.</p></li>
<li><a name="usersetup-step-70"></a><b>Log in as superuser on the user's system.</b></li>
<li><a name="usersetup-step-71"></a><b><a name="usersetup-ix777"></a>Edit the <tt>/etc/vfstab</tt> file and create an entry for the user's home directory.</b><pre><i>system-name</i>:/export/home/<i>user-name</i> - /export/home/<i>username</i> nfs - yes rw</pre><dl><dt><i>system-name</i></dt>
<dd><p>The name of the system where the home directory is located.</p></dd>
<dt><tt>/export/home/</tt><i>username</i></dt>
<dd><p>The name of the user's home directory that will be shared. By convention, <tt>/export/home/</tt><i>username</i> contains user home directories. However, you can use a different file system. </p></dd>
<dt><tt>-</tt></dt>
<dd><p>Required placeholders in the entry.</p></dd>
<dt><tt>/export/home/</tt><i>username</i></dt>
<dd><p>The name of the directory where the user's home directory will be mounted.</p></dd>
</dl>
<p>For more information about adding an entry to the <tt>/etc/vfstab</tt> file, see <a href="http://docs.sun.com/doc/819-2723/fsmount-5?a=view">Mounting File Systems in <i>System Administration Guide: Devices and File Systems</i></a>.</p></li>
<li><a name="usersetup-step-72"></a><b>Create the mount point for the user's home directory.</b><pre># <tt><b>mkdir -p /export/home/</b></tt><i>username</i></pre></li>
<li><a name="usersetup-step-73"></a><b>Mount the user's home directory.</b><pre># <tt><b>mountall</b></tt></pre><p>All entries in the current <tt>vfstab</tt> file (whose <tt>mount at boot</tt> fields are set
to <tt>yes</tt>) are mounted.</p></li>
<li><a name="usersetup-step-74"></a><b>Verify that the home directory is mounted.</b><pre># <tt><b>mount | grep</b></tt> <i>username</i></pre></li></ol><h6>Example&nbsp;5-3 Mounting a User's Home Directory</h6><p>The following example shows how to mount user <tt>ripley</tt>'s home directory.</p><pre># <tt><b>vi /etc/vfstab</b></tt>
 
(<i>The line</i> venus:/export/home/ripley - /export/home/ripley
nfs - yes rw <i>is added.</i>)
# <tt><b>mkdir -p /export/home/ripley</b></tt>
# <tt><b>mountall</b></tt>
# <tt><b>mount</b></tt>
/ on /dev/dsk/c0t0d0s0 read/write/setuid/intr/largefiles/xattr/onerror=panic/dev=...
/devices on /devices read/write/setuid/dev=46c0000 on Thu Jan  8 09:38:19 2004
/usr on /dev/dsk/c0t0d0s6 read/write/setuid/intr/largefiles/xattr/onerror=panic/dev=...
/proc on /proc read/write/setuid/dev=4700000 on Thu Jan  8 09:38:27 2004
/etc/mnttab on mnttab read/write/setuid/dev=47c0000 on Thu Jan  8 09:38:27 2004
/dev/fd on fd read/write/setuid/dev=4800000 on Thu Jan  8 09:38:30 2004
/var/run on swap read/write/setuid/xattr/dev=1 on Thu Jan  8 09:38:30 2004
/tmp on swap read/write/setuid/xattr/dev=2 on Thu Jan  8 09:38:30 2004
/export/home on /dev/dsk/c0t0d0s7 read/write/setuid/intr/largefiles/xattr/onerror=...
/export/home/ripley on venus:/export/home/ripley remote/read/write/setuid/xattr/dev=...</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="usersetup-92366.html">Previous</a>
             </td>
             <td align="right">
                 <a href="usersetup-128.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

