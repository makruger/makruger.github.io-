<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Preparing the Existing Network to Support IPv6 - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipv6-planning-5.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipv6-planning-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level3"><a href="ipv6-planning-2.html">IPv6 Planning (Task Maps)</a></p>
<p class="toc level3"><a href="ipv6-planning-5.html">IPv6 Network Topology Scenario</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Preparing the Existing Network to Support IPv6</a></p>
<p class="toc level4"><a href="#ipv6-planning-18">How to Prepare Network Services for IPv6 Support</a></p>
<p class="toc level4"><a href="#ipv6-planning-35">How to Prepare DNS for IPv6 Support</a></p>
</div>
<p class="toc level3 tocsp"><a href="ipv6-planning-9.html">Preparing an IPv6 Addressing Plan</a></p>
<p class="toc level2 tocsp"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipv6-planning-7"></a><h3>Preparing the Existing Network to Support IPv6</h3>

<hr><p><b>Note - </b>The Solaris dual protocol stack supports concurrent IPv4 and IPv6 operations. You can
successfully run IPv4&ndash;related operations during and after deployment of IPv6 on your network.<a name="indexterm-361"></a><a name="indexterm-362"></a><a name="indexterm-363"></a></p>
<hr>
<p>IPv6 introduces additional features to an existing network. Therefore, when you first deploy
IPv6, you must ensure that you do not disrupt any operations that are
working with IPv4. The subjects covered in this section describe how to introduce
IPv6 to an existing network in a step-by-step fashion.</p>

<a name="ipv6-planning-16"></a><h4>Preparing the Network Topology for IPv6 Support</h4>
<p>The first step in IPv6 deployment is to assess which existing entities on
your network can support IPv6.  In most cases, the network topology-wires, routers,
and hosts-can remain unchanged as you implement IPv6. However, you might have to
prepare existing hardware and applications for IPv6 before actually configuring IPv6 addresses on
network interfaces.</p><p>Verify which hardware on your network can be upgraded to IPv6. For
example, check the manufacturers' documentation for IPv6 readiness regarding the following classes of hardware:</p>
<ul><li><p>Routers</p></li>
<li><p>Firewalls</p></li>
<li><p>Servers</p></li>
<li><p>Switches</p></li></ul>

<hr><p><b>Note - </b>All procedures in the this Part assume that your equipment, particularly routers, can
be upgraded to IPv6.</p>
<hr>
<p>Some router models cannot be upgraded to IPv6. For more information and a
workaround, refer to <a href="ipv6-troubleshoot-2.html#ipv6-troubleshoot-3">IPv4 Router Cannot Be Upgraded to IPv6</a>.</p>

<a name="ipv6-planning-17"></a><h4>Preparing Network Services for IPv6 Support</h4>
<p>The following typical IPv4 network services in the current Solaris release are IPv6
ready:</p>
<ul><li><p><tt>sendmail</tt></p></li>
<li><p>NFS</p></li>
<li><p>HTTP (Apache 2.x or Orion)</p></li>
<li><p>DNS</p></li>
<li><p>LDAP</p></li></ul>
<p>The IMAP mail service is for IPv4 only.</p><p>Nodes that are configured for IPv6 can run IPv4 services. When you
turn on IPv6, not all services accept IPv6 connections. Services that have been ported
to IPv6 will accept a connection. Services that have not been ported to
IPv6 continue to work with the IPv4 half of the protocol stack.</p><p>Some issues can arise after you upgrade services to IPv6. For details, see
<a href="ipv6-troubleshoot-2.html#ipv6-troubleshoot-6">Problems After Upgrading Services to IPv6</a>.</p>

<a name="ipv6-planning-43"></a><h4>Preparing Servers for IPv6 Support</h4>
<a name="indexterm-364"></a><p>Because servers are considered IPv6 hosts, by default their IPv6 addresses are automatically
configured by the Neighbor Discovery protocol. However, many servers have multiple network interface
cards (NICs) that you might want to swap out for maintenance or replacement.
When you replace one NIC, Neighbor Discovery automatically generates a new interface ID
for that NIC. This behavior might not be acceptable for a particular server.</p><p>Therefore, consider manually configuring the interface ID portion of the IPv6 addresses for
each interface of the server. For instructions, refer to <a href="ipv6-config-tasks-6.html#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</a>. Later, when you
need to replace an existing NIC, the already configured IPv6 address is applied
to the replacement NIC.</p>

<a name="ipv6-planning-18"></a><h4>How to Prepare Network Services for IPv6 Support</h4><ol>
<li><b>Update the following network services to support IPv6:</b>
<ul><li><p>Mail servers</p></li>
<li><p>NIS servers</p></li>
<li><p>NFS</p>
<hr><p><b>Note - </b>LDAP supports IPv6 without requiring IPv6-specific configuration tasks.</p>
<hr>
</li></ul>
</li>
<li><b>Verify that your firewall hardware is IPv6 ready.</b><p>Refer to the appropriate firewall-related documentation for instructions.</p></li>
<li><b>Verify that other services on your network have been ported to IPv6.</b><p>For more information,  refer to marketing collateral and associated documentation for the
software.</p></li>
<li><a name="ipv6-planning-step-30"></a><b>If your site deploys the following services, make sure that you have taken
the appropriate measures for these services:</b>
<ul><li><p>Firewalls</p><p>Consider strengthening the policies that are in place for IPv4 to support IPv6. For more security considerations, see <a href="#ipv6-planning-41">Security Considerations for the IPv6 Implementation</a>.</p></li>
<li><p>Mail</p><p>In the MX records for DNS, consider adding the IPv6 address of your mail server.</p></li>
<li><p>DNS</p><p>For DNS-specific considerations, see <a href="#ipv6-planning-35">How to Prepare DNS for IPv6 Support</a>.</p></li>
<li><p>IPQoS</p><p><a name="indexterm-365"></a>Use the same Diffserv policies on a host that were used for IPv4. For more information, see <a href="ipqos-reference-2.html#ipqos-reference-3">Classifier Module</a>.</p></li></ul>
</li>
<li><b>Audit any network services that are offered by a node prior to converting
that node to IPv6.</b></li></ol>

<a name="ipv6-planning-35"></a><h4>How to Prepare DNS for IPv6 Support</h4><a name="indexterm-366"></a><a name="indexterm-367"></a><p>The current Solaris release supports DNS resolution on both the client side and
the server side. Do the following to prepare DNS services for IPv6.</p><p>For more information that is related to DNS support for IPv6, refer to
<a href="http://docs.sun.com/doc/819-3194"><i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>.</p><ol>
<li><b>Ensure that the DNS server that performs recursive name resolution is dual-stacked (IPv4
and IPv6) or for IPv4 only.</b></li>
<li><a name="ipv6-planning-step-37"></a><b>On the DNS server, populate the DNS database with relevant IPv6 database AAAA
records in the forward zone. </b>
<hr><p><b>Note - </b>Servers that run multiple critical services require special attention. Ensure that the network
is working properly. Also ensure that all critical services are ported to IPv6.
Then, add the server's IPv6 address to the DNS database.</p>
<hr>
</li>
<li><a name="ipv6-planning-step-39"></a><b>Add the associated PTR records for the AAAA records into the reverse zone.</b></li>
<li><a name="ipv6-planning-step-38"></a><b>Add either IPv4 only data, or both IPv6 and IPv4 data into the
NS record that describes zones.</b></li></ol>

<a name="ipv6-planning-31"></a><h4>Planning for Tunnels in the Network Topology</h4>
<a name="indexterm-368"></a><p>The IPv6 implementation supports a number of tunnel configurations to serve as transition
mechanisms as your network migrates to a mix of IPv4 and IPv6. Tunnels
enable isolated IPv6 networks to communicate. Because most of the Internet runs IPv4,
IPv6 packets from your site need to travel across the Internet through tunnels
to destination IPv6 networks.</p><p>Here are some major scenarios for using tunnels in the IPv6 network topology:</p>
<ul><li><p>The ISP from which you purchase IPv6 service allows you to create a tunnel from your site's boundary router to the ISP network. <a href="ipv6-planning-5.html#ipv6-planning-fig-33">Figure&nbsp;4-1</a> shows such a tunnel. In such a case, you would run a manual, IPv6 over IPv4 tunnel.</p></li>
<li><p>You manage a large, distributed network with IPv4 connectivity. To connect the distributed sites that use IPv6, you can run an automatic 6to4 tunnel from the edge router of each subnet.</p></li>
<li><p>Sometimes, a router in your infrastructure cannot be upgraded to IPv6. In this case, you can create a manual tunnel over the IPv4 router, with two IPv6 routers as endpoints. </p></li></ul>
<p>For procedures for configuring tunnels, refer to <a href="ipv6-config-tasks-17.html">Tasks for Configuring Tunnels for IPv6 Support (Task Map)</a>. For conceptual information regarding
tunnels, refer to <a href="ipv6-ref-47.html">IPv6 Tunnels</a>.</p>

<a name="ipv6-planning-41"></a><h4>Security Considerations for the IPv6 Implementation</h4>
<a name="indexterm-369"></a><a name="indexterm-370"></a><p>When you introduce IPv6 into an existing network, you must take care not
to compromise the security of the site. Be aware of the following
security issues as you phase in your IPv6 implementation:</p>
<ul><li><p>The same amount of filtering is required for both IPv6 packets and IPv4 packets.</p></li>
<li><p>IPv6 packets are often tunneled through a firewall. Therefore, you should implement either of the following scenarios:</p>
<ul><li><p>Have the firewall do content inspection inside the tunnel.</p></li>
<li><p>Put an IPv6 firewall with similar rules at the opposite tunnel endpoint.</p></li></ul>
</li>
<li><p>Some transition mechanisms exist that use IPv6 over UDP over IPv4 tunnels. These mechanisms might prove dangerous by short-circuiting the firewall.</p></li>
<li><p>IPv6 nodes are globally reachable from outside the enterprise network. If your security policy prohibits public access, you must establish stricter rules for the firewall. For example, consider configuring a stateful firewall.</p></li></ul>
<p>This book includes security features that can be used within an IPv6 implementation.</p>
<ul><li><p>The IP security architecture (IPsec) feature enables you to provide cryptographic protection for IPv6 packets. For more information, refer to <a href="ipsec-ov-1.html">Chapter&nbsp;19, IP Security Architecture (Overview)</a>.</p></li>
<li><p>The Internet Key Exchange (IKE) feature enables you to use public key authentication for IPv6 packets. For more information, refer to <a href="ike-1.html">Chapter&nbsp;22, Internet Key Exchange (Overview)</a>.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipv6-planning-5.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipv6-planning-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

