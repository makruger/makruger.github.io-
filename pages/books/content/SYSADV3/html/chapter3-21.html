<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring and Unconfiguring a DHCP Server Using DHCP Manager - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter3-20.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-config-13.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Configuring and Unconfiguring a DHCP Server Using DHCP Manager</a></p>
<p class="toc level4"><a href="#dhcp-config-96">How to Configure a DHCP Server (DHCP Manager)</a></p>
<p class="toc level4"><a href="#dhcp-config-97">How to Configure a BOOTP Relay Agent (DHCP Manager)</a></p>
<p class="toc level4"><a href="#dhcp-config-98">How to Unconfigure a DHCP Server or a BOOTP Relay Agent (DHCP Manager)</a></p>
</div>
<p class="toc level3 tocsp"><a href="dhcp-config-13.html">Configuring and Unconfiguring a DHCP Server Using <tt>dhcpconfig</tt> Commands</a></p>
<p class="toc level4"><a href="dhcp-config-13.html#dhcp-config-14">How to Configure a DHCP Server (<tt>dhcpconfig -D</tt>)</a></p>
<p class="toc level4"><a href="dhcp-config-13.html#dhcp-config-21">How to Configure a BOOTP Relay Agent (<tt>dhcpconfig -R</tt> )</a></p>
<p class="toc level4"><a href="dhcp-config-13.html#dhcp-config-34">How to Unconfigure a DHCP Server or a BOOTP Relay Agent (<tt>dhcpconfig -U</tt>)</a></p>
<p class="toc level2 tocsp"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter3-21"></a><h3>Configuring and Unconfiguring a DHCP Server Using DHCP Manager</h3>
<p>This section includes procedures to help you configure and unconfigure a DHCP server
with DHCP Manager. Note that you must be running an X Window
system such as CDE or GNOME to use DHCP Manager.</p><p>DHCP Manager can be run as superuser with the <tt>/usr/sadm/admin/bin/dhcpmgr</tt> command. See
<a href="dhcp-admin-1.html">About DHCP Manager</a> for general information about the utility. See <a href="dhcp-admin-32.html#dhcp-admin-109">How to Start and Stop the DHCP Service (DHCP Manager)</a> for more detailed information about
running DHCP Manager.</p><p>When you run DHCP Manager on a server that is not configured
for DHCP, the following screen is displayed. You can specify whether you want
to configure a DHCP server or a BOOTP relay agent.</p><a name="dhcp-config-fig-82"></a><h6>Figure&nbsp;14-1 Choose Server Configuration Dialog Box in DHCP Manager</h6><img src="figures/dhcp-config-choice.gif" alt="Dialog box shows options Configure as DHCP server and Configure as BOOTP relay. Shows OK, Cancel, and Help buttons." width="414" height="233"></img>

<a name="dhcp-config-65"></a><h4>Configuring DHCP Servers</h4>
<p><a name="indexterm-1392"></a><a name="indexterm-1393"></a>When you configure a DHCP server, DHCP Manager starts the DHCP Configuration Wizard,
which prompts you for information that is needed to configure the server. The
initial screen of the wizard is shown in the following figure.</p><a name="dhcp-config-fig-85"></a><h6>Figure&nbsp;14-2 DHCP Configuration Wizard's Initial Screen</h6><img src="figures/dhcp-config-wiz.gif" alt="Dialog box shows storage choices, back and forward arrows, and Cancel and Help buttons." width="624" height="435"></img><p>When you finish answering the wizard prompts, DHCP Manager creates the items that
are listed in the following table.</p><a name="dhcp-config-tbl-68"></a><h6>Table&nbsp;14-1 Items Created During DHCP Server Configuration</h6><table><col width="25.04*"><col width="33.12*"><col width="40.83*"><tr><th align="left" valign="top" scope="column"><p>Item</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Contents</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1394"></a>Service configuration file, <tt>/etc/inet/dhcpsvc.conf</tt></p></td>
<td align="left" valign="top" scope="row"><p>Records keywords and values
for server configuration options.</p></td>
<td align="left" valign="top" scope="row"><p>Data store type and location, and options that are
used with <tt>in.dhcpd</tt> to start the DHCP daemon when the system boots.
Do not edit this file manually. You must use <tt>dhcpmgr</tt> or <tt>dhcpconfig</tt> to
modify DHCP configuration information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1395"></a><tt>dhcptab</tt> table </p></td>
<td align="left" valign="top" scope="row"><p>DHCP Manager creates a <tt>dhcptab</tt> table if the
table does not already exist.</p></td>
<td align="left" valign="top" scope="row"><p>Macros and options with assigned values.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1396"></a>Locale macro (optional), which
is named <tt>Locale</tt></p></td>
<td align="left" valign="top" scope="row"><p>Contains the local time zone's offset in seconds from Universal
time (UTC).</p></td>
<td align="left" valign="top" scope="row"><p><tt>UTCoffst</tt> option with assigned number of seconds.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1397"></a>Server macro, which is named
to match the server's node name</p></td>
<td align="left" valign="top" scope="row"><p>Contains options whose values are determined by
input from the administrator who configured the DHCP server. Options apply to all
clients that use addresses owned by the server.</p></td>
<td align="left" valign="top" scope="row"><p>The <tt>Locale</tt> macro, plus the following
options: </p>
<ul><li><p><tt>Timeserv</tt>, set to point to the server's primary IP address.</p></li>
<li><p><tt>LeaseTim</tt>, set to the number of seconds for the leases.</p></li>
<li><p><tt>LeaseNeg</tt>, if you selected negotiable leases.</p></li>
<li><p><tt>DNSdmain</tt> and <tt>DNSserv</tt>, if DNS is configured.</p></li>
<li><p><tt>Hostname</tt>, which <b>must not</b> be assigned a value. The presence of this option indicates that the host name must be obtained from the name service.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1398"></a>Network address macro, whose name is the same as the network
address of client's network</p></td>
<td align="left" valign="top" scope="row"><p>Contains options whose values are determined by input from the
administrator who configured the DHCP server. Options apply to all clients that reside
on the network specified by the macro name.</p></td>
<td align="left" valign="top" scope="row"><p>The following options: </p>
<ul><li><p><tt>Subnet</tt>, set to the subnet mask for the local subnet</p></li>
<li><p><tt>Router</tt>, set to the IP address of a router, or <tt>RDiscvyF</tt>, to cause the client to use router discovery</p></li>
<li><p><tt>Broadcst</tt>, set to the broadcast IP address. This option is present only if the network is not a Point-to-Point network.</p></li>
<li><p><tt>MTU</tt></p><p>, for the maximum transmission unit</p></li>
<li><p><tt>NISdmain</tt> and <tt>NISservs</tt>, if NIS is configured</p></li>
<li><p><tt>NIS+dom</tt> and <tt>NIS+serv</tt>, if NIS+ is configured</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1399"></a>Network table for
the network</p></td>
<td align="left" valign="top" scope="row"><p>An empty table is created until you create IP addresses for
the network.</p></td>
<td align="left" valign="top" scope="row"><p>No content until you add IP addresses.</p></td>
</tr>
</table>

<a name="dhcp-config-96"></a><h4>How to Configure a DHCP Server (DHCP Manager)</h4><h6>Before You Begin</h6><p>Make sure that you have read <a href="chap2-26.html">Chapter&nbsp;13, Planning for DHCP Service (Tasks)</a> before you configure your DHCP
server. In particular, you should use the guidelines in <a href="chapter2-29.html">Making Decisions for Your DHCP Server Configuration (Task Map)</a> to help you
perform the following tasks:</p>
<ul><li><p>Select the system that you want to use as a DHCP server.</p></li>
<li><p>Make decisions about your data store, lease policy, and router information.</p></li></ul>
<ol>
<li><a name="chapter3-step-4"></a><b>Become superuser on the server system.</b></li>
<li><a name="dhcp-config-step-150"></a><b>Start DHCP Manager.</b><pre>#<tt><b>/usr/sadm/admin/bin/dhcpmgr &amp;</b></tt></pre></li>
<li><a name="chapter3-step-5"></a><b>Choose the option Configure as DHCP Server.</b><p>The DHCP Configuration Wizard starts, to help you configure your server.</p></li>
<li><a name="chapter3-step-6"></a><b>Select options, or type requested information, based on the decisions you made in
the planning phase.</b><p>If you have difficulty, click Help in the wizard window to open your
web browser and display help for the DHCP Configuration Wizard.</p></li>
<li><a name="chapter3-step-7"></a><b>Click Finish to complete the server configuration when you have finished specifying the
requested information.</b></li>
<li><a name="chapter3-step-8"></a><b>At the Start Address Wizard prompt, click Yes to configure IP addresses for
the server.</b><p>The Add Addresses to Network wizard enables you to specify which addresses to
place under the control of DHCP.</p></li>
<li><a name="chapter3-step-9"></a><b>Answer the prompts according to decisions you made in the planning phase.</b><p>See <a href="chapter2-30.html">Making Decisions for IP Address Management (Task Map)</a> for more information. If you have difficulty, click Help in the
wizard window to open your web browser and display help for the Add
Addresses to Network wizard.</p></li>
<li><a name="chapter3-step-10"></a><b>Review your selections, and then click Finish to add the IP addresses to
the network table.</b><p>The network table is updated with records for each address in the range
you specified.</p></li></ol><h6>See Also</h6><p>You can add more networks to the DHCP server with the Network
Wizard, as explained in <a href="dhcp-admin-15.html#dhcp-admin-17">Adding DHCP Networks</a>.</p>

<a name="dhcp-config-66"></a><h4>Configuring BOOTP Relay Agents</h4>
<p><a name="indexterm-1400"></a>When you configure a BOOTP relay agent, DHCP Manager takes the following actions:</p>
<ul><li><p>Prompts you for the IP address for one or more DHCP servers to which requests should be relayed</p></li>
<li><p>Stores settings needed for BOOTP relay service</p></li></ul>
<p>The following figure shows the screen displayed when you choose to configure a
BOOTP relay agent.</p><a name="dhcp-config-fig-84"></a><h6>Figure&nbsp;14-3 Configure BOOTP Relay Dialog Box in DHCP Manager</h6><img src="figures/dhcp-config-bootp.gif" alt="Dialog box shows input field labeled DHCP Servers, with an Add button. Shows an empty list, with up and down arrows and Delete button." width="356" height="361"></img>

<a name="dhcp-config-97"></a><h4>How to Configure a BOOTP Relay Agent (DHCP Manager)</h4><h6>Before You Begin</h6><p>Make sure that you have read <a href="chap2-26.html">Chapter&nbsp;13, Planning for DHCP Service (Tasks)</a> before you configure your BOOTP
relay agent. In particular, you should see <a href="chapter2-29.html#chapter2-38">Selecting a Host to Run the DHCP Service</a> for help in selecting the
system to use.</p><ol>
<li><a name="dhcp-config-step-23"></a><b>Become superuser on the server system.</b></li>
<li><a name="dhcp-config-step-70"></a><b>Start the DHCP Manager.</b><pre>#<tt><b>/usr/sadm/admin/bin/dhcpmgr &amp;</b></tt></pre><p><a name="indexterm-1401"></a>If the system has not been configured as a DHCP server or BOOTP
relay agent, the DHCP Configuration Wizard starts. If the system has already been
configured as a DHCP server, you must first unconfigure the server. See
<a href="#dhcp-config-11">Unconfiguring DHCP Servers and BOOTP Relay Agents</a>.</p></li>
<li><a name="dhcp-config-step-24"></a><b>Select Configure as BOOTP Relay.</b><p>The Configure BOOTP Relay dialog box opens.</p></li>
<li><a name="dhcp-config-step-8"></a><b>Type the IP address or host name of one or more DHCP servers,
and click Add.</b><p>The specified DHCP servers must be configured to handle BOOTP or DHCP requests
received by this BOOTP relay agent.</p></li>
<li><a name="dhcp-config-step-33"></a><b>Click OK to exit the dialog box.</b><p>Notice that DHCP Manager offers only the File menu to exit the
application and the Service menu to manage the server. The disabled menu options
are useful only on a DHCP server.</p></li></ol>

<a name="dhcp-config-11"></a><h4>Unconfiguring DHCP Servers and BOOTP Relay Agents</h4>
<p><a name="indexterm-1402"></a>When you unconfigure a DHCP server or a BOOTP relay agent, DHCP
Manager takes the following actions:</p>
<ul><li><p>Stops the DHCP daemon (<tt>in.dhpcd</tt>) process</p></li>
<li><p>Removes the <tt>/etc/inet/dhcpsvc.conf</tt> file, which records information about daemon startup and the data store location</p></li></ul>
<p>The following figure shows the screen that is displayed when you choose
to unconfigure a DHCP server.</p><a name="dhcp-config-fig-83"></a><h6>Figure&nbsp;14-4 Unconfigure Service Dialog Box in DHCP Manager</h6><img src="figures/dhcp-unconfig.gif" alt="Dialog box shows choices for removing DHCP data. Shows OK, Cancel, and Help buttons." width="414" height="283"></img>

<a name="dhcp-config-11-1115"></a><h4>DHCP Data on an Unconfigured Server</h4>
<p><a name="indexterm-1403"></a><a name="indexterm-1404"></a>When you unconfigure a DHCP server, you must decide what to do with
the <tt>dhcptab</tt> table and the DHCP network tables. If the data is
shared among servers, you should not remove the <tt>dhcptab</tt> and DHCP network tables.
If the tables are removed, DHCP would become unusable across your network. Data
can be shared through NIS+ or on exported local file systems. The file
<tt>/etc/inet/dhcpsvc.conf</tt> records the data store used and its location.</p><p>You can unconfigure a DHCP server but leave the data intact by
not selecting any of the options to remove data. If you unconfigure the
server and leave the data intact, you disable the DHCP server.</p><p>If you want another DHCP server to take ownership of the IP
addresses, you must move the DHCP data to the other DHCP server. You
must move the data before you unconfigure the current server. See <a href="dhcp-admin-mv1211.html">Moving Configuration Data Between DHCP Servers (Task Map)</a> for
more information.</p><p>If you are certain you want to remove the data, you can
select an option to remove the <tt>dhcptab</tt> and network tables. If you had
generated client names for the DHCP addresses, you can also elect to remove
those entries from the hosts table.  Client name entries can be removed
from DNS, <tt>/etc/inet/hosts</tt>, or NIS+.</p><p>Before you unconfigure a BOOTP relay agent, be sure that no clients
rely on this agent to forward requests to a DHCP server.</p>

<a name="dhcp-config-98"></a><h4>How to Unconfigure a DHCP Server or a BOOTP Relay Agent (DHCP Manager)</h4><a name="indexterm-1405"></a><ol>
<li><a name="dhcp-config-step-29"></a><b>Become superuser.</b></li>
<li><a name="dhcp-config-step-71"></a><b>Start DHCP Manager.</b><pre>#<tt><b>/usr/sadm/admin/bin/dhcpmgr &amp;</b></tt></pre></li>
<li><a name="dhcp-config-step-30"></a><b>From the Service menu, choose Unconfigure.</b><p>The Unconfigure Service dialog box is displayed. If the server is a
BOOTP relay agent, the dialog box enables you to confirm your intention to
unconfigure the relay agent. If the server is a DHCP server, you must
decide what to do with the DHCP data and make selections in the
dialog box. See <a href="#dhcp-config-fig-83">Figure&nbsp;14-4</a>.</p></li>
<li><a name="dhcp-config-step-10"></a>(Optional) <b>Select options to remove data.</b><p>If the server uses shared data through NIS+ or in files shared
through NFS, do not select any options to remove the data. If the
server does not use shared data, select one option or both options to
remove the data.</p><p>See <a href="#dhcp-config-11-1115">DHCP Data on an Unconfigured Server</a> for more information about removing data.</p></li>
<li><a name="dhcp-config-step-12"></a><b>Click OK to unconfigure the server.</b><p>The Unconfigure Service dialog box and DHCP Manager are closed.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter3-20.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-config-13.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

