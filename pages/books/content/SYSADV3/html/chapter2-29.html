<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Making Decisions for Your DHCP Server Configuration (Task Map) - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter2-4.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter2-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level3"><a href="chapter2-4.html">Preparing Your Network for the DHCP Service (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Making Decisions for Your DHCP Server Configuration (Task Map)</a></p>
</div>
<p class="toc level3"><a href="chapter2-30.html">Making Decisions for IP Address Management (Task Map)</a></p>
<p class="toc level3"><a href="dhcp-plan-1.html">Planning for Multiple DHCP Servers</a></p>
<p class="toc level3"><a href="dhcp-plan-2.html">Planning DHCP Configuration of Your Remote Networks</a></p>
<p class="toc level3"><a href="chapter2-34.html">Selecting the Tool for Configuring DHCP</a></p>
<p class="toc level2 tocsp"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter2-29"></a><h3>Making Decisions for Your DHCP Server Configuration (Task Map)</h3>
<p>This section discusses some of the decisions to make before you configure the
first DHCP server on your network. Use this task map to identify
the decisions that you must make.</p><a name="indexterm-1376"></a><table><col width="33*"><col width="33*"><col width="33*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Select a server for DHCP.</p></td>
<td align="left" valign="top" scope="row"><p>Determine if a
server meets the system requirements to run the DHCP service.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#chapter2-38">Selecting a Host to Run the DHCP Service</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Choose a data store.</p></td>
<td align="left" valign="top" scope="row"><p>Compare
the data store types to determine the best data store for your site.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#chapter2-39">Choosing the DHCP Data Store</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Set
a lease policy.</p></td>
<td align="left" valign="top" scope="row"><p>Learn about IP address leases to help you determine appropriate
lease policy for your site.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#chapter2-40">Setting a Lease Policy</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Select a router address or router discovery.</p></td>
<td align="left" valign="top" scope="row"><p>Determine whether DHCP
clients use router discovery or a specific router.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#chapter2-41">Determining Routers for DHCP Clients</a></p></td>
</tr>
</table>

<a name="chapter2-38"></a><h4>Selecting a Host to Run the DHCP Service</h4>
<p><a name="indexterm-1377"></a>With your network topology in mind, you can use the following system requirements
to select a host on which to set up a DHCP server.</p><p>The host must meet the following requirements:</p>
<ul><li><p>The host must run the Solaris 2.6 release or later. If you need to support a large number of clients, you must install the Solaris 8 7/01 release or a later version.</p></li>
<li><p>The host must be accessible to all the networks that have clients that plan to use DHCP, either directly on the network or through a BOOTP relay agent.</p></li>
<li><p>The host must be configured to use routing.</p></li>
<li><p>The host must have a correctly configured <tt>netmasks</tt> table that reflects your network topology.</p></li></ul>


<a name="chapter2-39"></a><h4>Choosing the DHCP Data Store</h4>
<p><a name="indexterm-1378"></a>You can choose to store the DHCP data in text files, binary
files, or the NIS+ directory service. The following table summarizes the features of each
type of data store, and indicates the environment in which to use each
data store type.</p><a name="dhcp-plan-tbl-1"></a><h6>Table&nbsp;13-3 Comparison of DHCP Data Stores</h6><table><col width="68.87*"><col width="63.64*"><col width="89.87*"><col width="68.41*"><col width="127.24*"><tr><th align="left" valign="top" scope="column"><p>Data Store Type</p></th>
<th align="left" valign="top" scope="column"><p>Performance</p></th>
<th align="left" valign="top" scope="column"><p>Maintenance</p></th>
<th align="left" valign="top" scope="column"><p>Sharing</p></th>
<th align="left" valign="top" scope="column"><p>Environment</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Binary files</p></td>
<td align="left" valign="top" scope="row"><p>High performance, high capacity</p></td>
<td align="left" valign="top" scope="row"><p>Low maintenance, no database
servers required. Contents must be viewed with DHCP Manager or <tt>dhtadm</tt> and <tt>pntadm</tt>. Regular
file backups suggested.</p></td>
<td align="left" valign="top" scope="row"><p>Data stores cannot be shared among DHCP servers.</p></td>
<td align="left" valign="top" scope="row"><p>Midsize to large
environments with many networks with thousands of clients per network. Useful for small
to medium ISPs.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>NIS+ </p></td>
<td align="left" valign="top" scope="row"><p>Moderate performance and capacity, dependent upon NIS+ service's performance and
capacity</p></td>
<td align="left" valign="top" scope="row"><p>DHCP server system must be configured as an NIS+ client. Requires NIS+ service
maintenance. Contents must be viewed with DHCP Manager or <tt>dhtadm</tt> and <tt>pntadm</tt>.
Regular backup with <tt>nisbackup</tt> is suggested.</p></td>
<td align="left" valign="top" scope="row"><p>DHCP data is distributed in NIS+, and multiple
servers can access the same containers.</p></td>
<td align="left" valign="top" scope="row"><p>Small to midsize environments with up to 5000
clients per network.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Text files</p></td>
<td align="left" valign="top" scope="row"><p>Moderate performance, low capacity</p></td>
<td align="left" valign="top" scope="row"><p>Low maintenance, no database servers required.
ASCII format is readable without DHCP Manager, <tt>dhtadm</tt>, or <tt>pntadm</tt>. Regular file backups suggested.</p></td>
<td align="left" valign="top" scope="row"><p>Data
store can be shared among DHCP servers if DHCP data is stored
on one file system that is exported through an NFS mount point.</p></td>
<td align="left" valign="top" scope="row"><p>Small environments
with less than 10,000 clients, with a few hundred to a thousand clients
per network.</p></td>
</tr>
</table><p>Traditional NIS is not offered as a data store option because NIS
does not support fast incremental updates. If your network uses NIS, you should use
text files or binary files for your data store.</p>

<a name="chapter2-40"></a><h4>Setting a Lease Policy</h4>
<p><a name="indexterm-1379"></a>A <b>lease</b> specifies the amount of time the DHCP server permits a DHCP
client to use a particular IP address. During the initial server configuration, you
must specify a site-wide lease policy. The <b>lease policy</b> indicates the lease time
and specifies whether clients can renew their leases. The server uses the information
that you supply to set option values in the default macros that the
server creates during configuration. You can set different lease policies for specific clients
or type of clients, by setting options in configuration macros you create.</p><p><a name="indexterm-1380"></a>The <b>lease time</b> is specified as a number of hours, days, or weeks for
which the lease is valid. When a client is assigned an IP address,
or renegotiates a lease on an IP address, the lease expiration date and
time is calculated. The number of hours in the lease time is
added to the timestamp on the client's DHCP acknowledgement. For example, suppose the timestamp
of the DHCP acknowledgment is September 16, 2005 9:15 A.M., and the lease
time is 24 hours. The lease expiration time in this example is September
17, 2005 9:15 A.M. The lease expiration time is stored in the client's
DHCP network record, viewable in DHCP Manager or with the <tt>pntadm</tt>utility.</p><p>The lease time value should be relatively small so that expired addresses are
reclaimed quickly. The lease time value also should be large enough to outlast
DHCP service disruptions. Clients should be able to function while the system that
runs the DHCP service is repaired. A general guideline is to specify a
time that is two times the predicted downtime of a system. For example,
if you need four hours to obtain and replace a defective part
and reboot the system, specify a lease time of eight hours.</p><p><a name="indexterm-1381"></a>The lease negotiation option determines whether a client can renegotiate its lease with
the server before the lease expires. If lease negotiation is allowed, the client
tracks the time that remains in its lease. When half of the lease
time has passed, the client requests the DHCP server to extend its lease
to the original lease time. You should disable lease negotiation in environments where
there are more systems than IP addresses. The time limit is then enforced
on the use of IP addresses. If there are enough IP addresses, you
should enable lease negotiation to avoid forcing clients to take down their network
interfaces when leases expire. If you make clients obtain new leases, the clients'
TCP connections such as NFS and telnet sessions might be interrupted. You can
enable lease negotiation for all clients during the server configuration. You can enable
lease negotiation for particular clients or particular types of clients through the use
of the <tt>LeaseNeg</tt> option in configuration macros.</p>
<hr><p><b>Note - </b>Systems that provide services on the network should retain their IP addresses. Such
systems should not be subject to short-term leases. You can use DHCP with
such systems if you assign reserved manual IP addresses to those systems, rather
than IP addresses with permanent leases. You can then detect when the system's
IP address is no longer in use.</p>
<hr>


<a name="chapter2-41"></a><h4>Determining Routers for DHCP Clients</h4>
<p><a name="indexterm-1382"></a>Host systems use routers for any network communication beyond their local network. The
hosts must know the IP addresses of these routers.</p><p>When you configure a DHCP server, you must provide DHCP clients with router
addresses in one of two ways. One way is to provide specific
IP addresses for routers. However, the preferred method is to specify that clients
should find routers with the router discovery protocol.</p><p>If clients on your network can perform router discovery, you should use the
router discovery protocol, even if there is only one router. Router discovery enables
a client to adapt easily to router changes in the network. For example,
suppose that a router fails and is replaced by a router with a
new address. Clients can discover the new address automatically without having to obtain
a new network configuration to get the new router address.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter2-4.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter2-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

