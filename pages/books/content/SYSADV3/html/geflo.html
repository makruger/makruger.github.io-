<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>About the Solaris DHCP Client - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyatl.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-config-67.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<div class="onpage">
<p class="toc level3"><a href="">About the Solaris DHCP Client</a></p>
</div>
<p class="toc level3"><a href="dhcp-config-67.html">Enabling and Disabling a Solaris DHCP Client</a></p>
<p class="toc level4"><a href="dhcp-config-67.html#dhcp-config-105">How to Enable the Solaris DHCP Client</a></p>
<p class="toc level4"><a href="dhcp-config-67.html#dhcp-config-104">How to Disable a Solaris DHCP Client</a></p>
<p class="toc level3 tocsp"><a href="dhcp-overview-33a.html">DHCP Client Administration</a></p>
<p class="toc level3"><a href="dhcp-overview-35a.html">DHCP Client Systems With Multiple Network Interfaces</a></p>
<p class="toc level3"><a href="eyhuv.html">DHCP Client Host Names</a></p>
<p class="toc level4"><a href="eyhuv.html#dhcp-admin-1058sm">How to Enable a Solaris Client to Request a Specific Host Name</a></p>
<p class="toc level3 tocsp"><a href="dhcp-overview-5.html">DHCP Client Systems and Name Services</a></p>
<p class="toc level3"><a href="extkj.html">DHCP Client Event Scripts</a></p>
<p class="toc level2 tocsp"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="geflo"></a><h3>About the Solaris DHCP Client</h3>
<p>The Solaris DHCP client is the <tt>dhcpagent</tt> daemon, which is part of the
Solaris Operating System (Solaris OS). When you install the Solaris OS, you are
prompted to use DHCP to configure network interfaces. If you specify Yes, the
DHCP client software is enabled on your system during Solaris installation. You do
not need to do anything else with the Solaris client to use DHCP.
The DHCP server's configuration determines what information is given to DHCP client systems
that use the DHCP service.</p><p>If a client system is already running the Solaris OS, but not
using DHCP, you can reconfigure the client system to use DHCP. You can
also reconfigure a DHCP client system so that it stops using DHCP and
uses static network information that you provide. See <a href="dhcp-config-67.html">Enabling and Disabling a Solaris DHCP Client</a> for more information.</p>

<a name="gefmi"></a><h4>Logical Interfaces</h4>
<p>In the DHCPv4 client, each logical interface is independent and is an administrative
unit.  In addition to the zeroth logical interface (which defaults to the
interface MAC address as an identifier), the user may configure specific logical interfaces
to run DHCP by specifying a CLIENT_ID in the dhcpagent configuration file. 
For example:</p><p><tt>hme0:1.CLIENT_ID=orangutan</tt></p>

<a name="dhcp-overview-31a"></a><h4>DHCP Client Startup</h4>
<p><a name="indexterm-1511"></a><a name="indexterm-1512"></a>The <tt>dhcpagent</tt> daemon obtains configuration information that is needed by other processes involved
in booting the system. For this reason, the system startup scripts start <tt>dhcpagent</tt>
early in the boot process and wait until the network configuration information from the
DHCP server arrives.</p><p><a name="indexterm-1513"></a>The presence of the file <tt>/etc/dhcp.</tt><i>interface</i><tt></tt> (for example, <tt>/etc/dhcp.ce0</tt> on a Sun Fire<sup>TM</sup> 880 system)
indicates to the startup scripts that DHCP is to be used on
the specified interface. Upon finding a <tt>dhcp.</tt><i>interface</i><tt></tt> file, the startup scripts start <tt>dhcpagent</tt>.</p><p>After startup, <tt>dhcpagent</tt> waits until it receives instructions to configure a network interface.
The startup scripts issue the <tt>ifconfig <i>interface</i> dhcp start</tt> command, which instructs <tt>dhcpagent</tt> to start DHCP
as described in <a href="dhcp-overview-3.html">How DHCP Works</a>. If commands are contained within the <tt>dhcp.</tt><i>interface</i><tt></tt> file, they are
appended to the <tt>dhcp start</tt> option of <tt>ifconfig</tt>. See the <a href="http://docs.sun.com/doc/819-2240/ifconfig-1m?a=view"><tt>ifconfig</tt>(1M)</a> man page for
more information about options used with the <tt>ifconfig <i>interface</i> dhcp</tt> command.</p>

<a name="dhcp-overview-32a"></a><h4>How the DHCP Client Manages Network Configuration Information</h4>
<p><a name="indexterm-1514"></a>After the information packet is obtained from a DHCP server, <tt>dhcpagent</tt> configures
the network interface and brings up the interface. The daemon controls the interface
for the duration of the lease time for the IP address, and maintains
the configuration data in an internal table. The system startup scripts use the
<tt>dhcpinfo</tt> command to extract configuration option values from the internal table. The values
are used to configure the system and enable it to communicate on the
network.</p><p>The <tt>dhcpagent</tt> daemon waits passively until a period of time elapses, usually half
the lease time. The daemon then requests an extension of the lease from
a DHCP server. If <tt>dhcpagent</tt> finds that the interface is down or that
the IP address has changed, the daemon does not control the interface until
instructed by the <tt>ifconfig</tt> command to do so. If <tt>dhcpagent</tt> finds that the
interface is up and the IP address hasn't changed, the daemon sends a
request to the server for a lease renewal. If the lease cannot be
renewed, <tt>dhcpagent</tt> takes down the interface at the end of the lease time.</p><p>Each time <tt>dhcpagent</tt> performs an action related to the lease, the daemon looks
for an executable file called <tt>/etc/dhcp/eventhook</tt>. If an executable file with this
name is found, <tt>dhcpagent</tt> invokes the executable. See <a href="extkj.html">DHCP Client Event Scripts</a> for more information about
using the event executable.</p>

<a name="dhcp-overview-34a"></a><h4>DHCP Client Shutdown</h4>
<p><a name="indexterm-1515"></a>When the DHCP client system shuts down normally, <tt>dhcpagent</tt> writes the current configuration
information to the file <tt>/etc/dhcp/</tt><i>interface</i><tt>.dhc</tt>. The lease is dropped rather than released, so
the DHCP server does not know that the IP address is not
in active use.</p><p>If the lease is still valid when the system reboots, <tt>dhcpagent</tt> sends an
abbreviated request to use the same IP address and network configuration information. If
the DHCP server permits this request, <tt>dhcpagent</tt> can use the information that it
wrote to disk when the system shut down. If the server does not
permit the client to use the information, <tt>dhcpagent</tt> initiates the DHCP protocol sequence
described in <a href="dhcp-overview-3.html">How DHCP Works</a>. As a result, the client obtains new network configuration information.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyatl.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-config-67.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

