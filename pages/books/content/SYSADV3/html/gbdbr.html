<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Modifying the <tt>/etc/default/mpathd</tt> IPMP Configuration File - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="deploynetmult-116.html">Previous</a>
             </td>
             <td align="right">
                 <a href="deploynetmult-47.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level3"><a href="deploynetmult-58.html">Configuring IPMP (Task Maps)</a></p>
<p class="toc level3"><a href="deploynetmult-57.html">Configuring IPMP Groups</a></p>
<p class="toc level3"><a href="enflg.html">Maintaining IPMP Groups</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-6">How to Display the IPMP Group Membership of an Interface</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-103">How to Add an Interface to an IPMP Group</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-7">How to Remove an Interface From an IPMP Group</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-8">How to Move an Interface From One IPMP Group to Another Group</a></p>
<p class="toc level3 tocsp"><a href="deploynetmult-92.html">Replacing a Failed Physical Interface on Systems That Support Dynamic Reconfiguration</a></p>
<p class="toc level4"><a href="deploynetmult-92.html#deploynetmult-93">How to Remove a Physical Interface That Has Failed (DR-Detach)</a></p>
<p class="toc level4"><a href="deploynetmult-92.html#deploynetmult-97">How to Replace a Physical Interface That Has Failed (DR-Attach)</a></p>
<p class="toc level3 tocsp"><a href="deploynetmult-116.html">Recovering a Physical Interface That Was Not Present at System Boot</a></p>
<p class="toc level4"><a href="deploynetmult-116.html#deploynetmult-107">How to Recover a Physical Interface That Was Not Present at System Boot</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Modifying the <tt>/etc/default/mpathd</tt> IPMP Configuration File</a></p>
<p class="toc level4"><a href="#gbdbf">How to Configure the <tt>/etc/default/mpathd</tt> File</a></p>
</div>
<p class="toc level3 tocsp"><a href="deploynetmult-47.html">Modifying IPMP Configurations</a></p>
<p class="toc level4"><a href="deploynetmult-47.html#deploynetmult-48">How to Configure the <tt>/etc/default/mpathd</tt> File</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gbdbr"></a><h3>Modifying the <tt>/etc/default/mpathd</tt> IPMP Configuration File</h3>
<a name="indexterm-2975"></a><a name="indexterm-2976"></a><p><a name="indexterm-2977"></a>Use the IPMP configuration file <tt>/etc/default/mpathd</tt> to configure the following system-wide parameters for
IPMP groups.</p>
<ul><li><p><tt>FAILURE_DETECTION_TIME</tt></p></li>
<li><p><tt>FAILBACK</tt></p></li>
<li><p><tt>TRACK_INTERFACES_ONLY_WITH_GROUPS</tt></p></li></ul>
<p>These parameters apply to all IPMP groups that are created on an
individual system.</p>

<a name="gbdbf"></a><h4>How to Configure the <tt>/etc/default/mpathd</tt> File</h4><ol>
<li><b>On the system with the IPMP group configuration, assume the Primary Administrator role
or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="deploynetmult-step-51"></a><b>Edit the <tt>/etc/default/mpathd</tt> file.</b></li>
<li><b>(Optional) Type the new value for the <i>FAILURE_DETECTION_TIME</i> parameter.</b><pre>FAILURE_DETECTION_TIME=<i>n</i></pre><p>where <i>n</i> is the amount of time in seconds for ICMP probes to
detect whether an interface failure has occurred. The default is 10 seconds.</p></li>
<li><b>(Optional) Type the new value for the <i>TRACK_INTERFACES_ONLY_WITH_GROUPS</i> parameter.</b><pre>TRACK_INTERFACES_ONLY_WITH_GROUPS=[yes | no]</pre>
<ul><li><p><i>yes</i>- The <i>yes</i> value is the default behavior of IPMP. This parameter causes IPMP to ignore network interfaces that are not configured into an IPMP group.</p></li>
<li><p><i>no</i> - The <i>no</i> value sets failure and repair detection for <b>all</b> network interfaces, regardless of whether they are configured into an IPMP group. However, when a failure or repair is detected on an interface that is not configured into an IPMP group, no failover or failback occurs. Therefore, the<i>no</i> value is only useful for reporting failures and does not directly improve network availability.</p></li></ul>
</li>
<li><b>(Optional) Type the new value for the <i>FAILBACK</i> parameter.</b><pre>FAILBACK=[yes | no]</pre>
<ul><li><p><i>yes</i>- The <i>yes</i> value is the default failback behavior of IPMP. When the repair of a failed interface is detected, network access fails back to the repaired interface, as described in <a href="emqqq.html">IPMP Failure Detection and Recovery Features</a>.</p></li>
<li><p><i>no</i> - The <i>no</i> indicates that data traffic does not move back to a repaired interface. When a failed interfaces is detected as repaired, the <i>INACTIVE</i> flag of <tt>ifconfig</tt> is set. This flag indicates that the interface is currently not to be used for data traffic. The interface can still be used for probe traffic.</p><p>For example, suppose an IPMP group consists of two interfaces, ce0 and ce1. Then assume that the value <i>FAILBACK=no</i> is set in the <tt>mpathd</tt> file. If ce0 fails, its traffic fails over to ce1, as is the expected behavior of IPMP. However, when IPMP detects that ce0 is repaired, traffic does not fail back from ce1, due to the <i>FAILBACK=no</i> parameter in the <tt>mpathd</tt> file. ce0 retains its <tt>INACTIVE</tt> status and is not used for traffic unless the ce1 interface fails. </p></li></ul>
</li>
<li><a name="gbdby"></a><b>Restart the <tt>in.mpathd</tt> daemon.</b><pre># <tt><b>pkill -HUP in.mpathd</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="deploynetmult-116.html">Previous</a>
             </td>
             <td align="right">
                 <a href="deploynetmult-47.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

