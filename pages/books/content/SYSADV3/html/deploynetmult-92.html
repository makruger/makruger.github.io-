<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Replacing a Failed Physical Interface on Systems That Support Dynamic Reconfiguration - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="enflg.html">Previous</a>
             </td>
             <td align="right">
                 <a href="deploynetmult-116.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level3"><a href="deploynetmult-58.html">Configuring IPMP (Task Maps)</a></p>
<p class="toc level3"><a href="deploynetmult-57.html">Configuring IPMP Groups</a></p>
<p class="toc level3"><a href="enflg.html">Maintaining IPMP Groups</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-6">How to Display the IPMP Group Membership of an Interface</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-103">How to Add an Interface to an IPMP Group</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-7">How to Remove an Interface From an IPMP Group</a></p>
<p class="toc level4"><a href="enflg.html#deploynetmult-8">How to Move an Interface From One IPMP Group to Another Group</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Replacing a Failed Physical Interface on Systems That Support Dynamic Reconfiguration</a></p>
<p class="toc level4"><a href="#deploynetmult-93">How to Remove a Physical Interface That Has Failed (DR-Detach)</a></p>
<p class="toc level4"><a href="#deploynetmult-97">How to Replace a Physical Interface That Has Failed (DR-Attach)</a></p>
</div>
<p class="toc level3 tocsp"><a href="deploynetmult-116.html">Recovering a Physical Interface That Was Not Present at System Boot</a></p>
<p class="toc level4"><a href="deploynetmult-116.html#deploynetmult-107">How to Recover a Physical Interface That Was Not Present at System Boot</a></p>
<p class="toc level3 tocsp"><a href="gbdbr.html">Modifying the <tt>/etc/default/mpathd</tt> IPMP Configuration File</a></p>
<p class="toc level4"><a href="gbdbr.html#gbdbf">How to Configure the <tt>/etc/default/mpathd</tt> File</a></p>
<p class="toc level3 tocsp"><a href="deploynetmult-47.html">Modifying IPMP Configurations</a></p>
<p class="toc level4"><a href="deploynetmult-47.html#deploynetmult-48">How to Configure the <tt>/etc/default/mpathd</tt> File</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="deploynetmult-92"></a><h3>Replacing a Failed Physical Interface on Systems That Support Dynamic Reconfiguration</h3>
<a name="indexterm-2969"></a><a name="indexterm-2970"></a><p>This section contains procedures that relate to administering systems that support dynamic reconfiguration
(DR).</p>
<hr><p><b>Note - </b>The tasks pertain only to IP layers that are configured by using the
<tt>ifconfig</tt> command. Layers before or after the IP layer, such as ATM or
other services, require specific manual steps if the layers are not automated. The
steps in the next procedures are used to unconfigure interfaces during predetachment and
configure interface after postattachment. </p>
<hr>


<a name="deploynetmult-93"></a><h4>How to Remove a Physical Interface That Has Failed (DR-Detach)</h4><a name="indexterm-2971"></a><p>This procedure shows how to remove a physical interface on a system that
supports DR. The procedure assumes that the following conditions already exist:</p>
<ul><li><p>Physical interfaces <tt>hme0</tt> and <tt>hme1</tt> are the example interfaces.</p></li>
<li><p>Both interfaces are in the same IPMP group. </p></li>
<li><p><tt>hme0</tt> has failed. </p></li>
<li><p>Logical interface <tt>hme0:1</tt> has the test address.</p></li>
<li><p>You are replacing the failed interface with the same physical interface name, for example, <tt>hme0</tt> with <tt>hme0</tt>.</p></li></ul>

<hr><p><b>Note - </b>You can skip Step 2 if the test address is plumbed by
using the <tt>/etc/hostname.hme0</tt> file.</p>
<hr>
<ol>
<li><b>On the system with the IPMP group configuration, assume the Primary Administrator role
or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="deploynetmult-step-95"></a><b>Display the test address configuration.</b><pre># <tt><b>ifconfig hme0:</b></tt>1

hme0:1:
flags=9040842&lt;BROADCAST,RUNNING,MULTICAST,DEPRECATED,IPv4,NOFAILOVER>
mtu 1500 index 3
inet 192.168.233.250 netmask ffffff00 broadcast 192.168.233.255</pre><p>You need this information to replumb the test address when replacing the physical
interface.</p></li>
<li><a name="deploynetmult-step-96"></a><b>Remove the physical interface.</b><p>Refer to the following sources for a complete description of how to remove
the physical interface:</p>
<ul><li><p><a href="http://docs.sun.com/doc/819-2240/cfgadm-1m?a=view"><tt>cfgadm</tt>(1M)</a> man page</p></li>
<li><p><i>Sun Enterprise 6x00, 5x00, 4x00, and 3x00 Systems Dynamic Reconfiguration User's Guide</i></p></li>
<li><p><i>Sun Enterprise 10000 DR Configuration Guide</i></p></li></ul>
</li></ol>

<a name="deploynetmult-97"></a><h4>How to Replace a Physical Interface That Has Failed (DR-Attach)</h4><a name="indexterm-2972"></a><p>This procedure shows how to replace a physical interface on a system that
supports DR. </p><ol>
<li><b>On the system with the IPMP group configuration, assume the Primary Administrator role
or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="deploynetmult-step-99"></a><b>Replace the physical interface.</b><p>Refer to the instructions in the following sources:</p>
<ul><li><p><a href="http://docs.sun.com/doc/819-2240/cfgadm-1m?a=view"><tt>cfgadm</tt>(1M)</a> man page</p></li>
<li><p><i>Sun Enterprise 6x00, 5x00, 4x00, and 3x00 Systems Dynamic Reconfiguration User's Guide</i></p></li>
<li><p><i>Sun Enterprise 10000 DR Configuration Guide</i>, or <i>Sun Fire 880 Dynamic Reconfiguration User's Guide</i> </p></li></ul>
</li>
<li><a name="deploynetmult-step-100"></a><b>Plumb and bring up the test address.</b><pre># <tt><b>ifconfig hme0</b></tt> <i>test-address-configuration</i></pre><p>Use the same test address configuration that was configured in the <tt>/etc/hostname.hme0</tt>
file. The test configuration is the same configuration that is displayed in Step
2 in the procedure <a href="#deploynetmult-93">How to Remove a Physical Interface That Has Failed (DR-Detach)</a>.</p><p>This configuration triggers the <tt>in.mpathd</tt> daemon to resume probing. As a result of
this probing, <tt>in.mpathd</tt> detects the repair. Consequently, <tt>in.mpathd</tt> causes the original IP address to
fail back from <tt>hme1</tt>.</p><p>See <a href="emqwq.html#emqvv">Test Addresses</a> for more details about test addresses.</p>
<hr><p><b>Note - </b>The failback of IP addresses during the recovery of a failed physical interface
takes up to three minutes. This time might vary, depending on network traffic.
The time also depends on the stability of the incoming interface to fail
back the failed-over interfaces by the <tt>in.mpathd</tt> daemon.</p>
<hr>
</li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="enflg.html">Previous</a>
             </td>
             <td align="right">
                 <a href="deploynetmult-116.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

