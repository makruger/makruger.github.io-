<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Introduction to IPsec - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipsec-ov-25.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipsec-ov-54.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level3"><a href="ipsec-ov-25.html">What's New in IPsec?</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Introduction to IPsec</a></p>
</div>
<p class="toc level3"><a href="ipsec-ov-54.html">IPsec Packet Flow</a></p>
<p class="toc level3"><a href="ipsec-ov-5.html">IPsec Security Associations</a></p>
<p class="toc level3"><a href="ipsec-ov-7.html">IPsec Protection Mechanisms</a></p>
<p class="toc level3"><a href="ipsec-ov-12.html">IPsec Protection Policies</a></p>
<p class="toc level3"><a href="ipsec-ov-13.html">Transport and Tunnel Modes in IPsec</a></p>
<p class="toc level3"><a href="ipsec-ov-15.html">Virtual Private Networks and IPsec</a></p>
<p class="toc level3"><a href="ipsec-ov-24.html">IPsec and NAT Traversal</a></p>
<p class="toc level3"><a href="ipsec-ov-22.html">IPsec and SCTP</a></p>
<p class="toc level3"><a href="ipsec-ov-18.html">IPsec and Solaris Zones</a></p>
<p class="toc level3"><a href="ipsec-ov-21.html">IPsec Utilities and Files</a></p>
<p class="toc level3"><a href="ipsec-ov-16.html">Changes to IPsec for the Solaris 10 Release</a></p>
<p class="toc level2 tocsp"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipsec-ov-2"></a><h3>Introduction to IPsec</h3>
<p><a name="indexterm-1599"></a><a name="indexterm-1600"></a><a name="indexterm-1601"></a><a name="indexterm-1602"></a><a name="indexterm-1603"></a><a name="indexterm-1604"></a><a name="indexterm-1605"></a><a name="indexterm-1606"></a><a name="indexterm-1607"></a><a name="indexterm-1608"></a><a name="indexterm-1609"></a><a name="indexterm-1610"></a><a name="indexterm-1611"></a>IPsec protects IP packets by authenticating the packets, by encrypting the packets, or
by doing both. IPsec is performed inside the IP module, well below the
application layer. Therefore, an Internet application can take advantage of IPsec while not
having to configure itself to use IPsec. When used properly, IPsec is an
effective tool in securing network traffic.</p><p><a name="indexterm-1612"></a>IPsec protection involves five main components:</p>
<ul><li><p><a name="indexterm-1613"></a><a name="indexterm-1614"></a><b>Security protocols &ndash;</b> The IP datagram protection mechanisms. The <a href="glossary-1.html#glossary-34">authentication header</a> (AH) signs IP packets and ensures integrity. The content of the datagram is not encrypted, but the receiver is assured that the packet contents have not been altered. The receiver is also assured that the packets were sent by the sender. The <a href="glossary-1.html#glossary-35">encapsulating security payload (ESP)</a> encrypts IP data, thus obscuring the content during packet transmission. ESP also can ensure data integrity through an authentication algorithm option.</p></li>
<li><p><a name="indexterm-1615"></a><b>Security associations database (SADB) &ndash;</b> The database that associates a security protocol with an IP destination address and an indexing number. The indexing number is called the <a href="glossary-1.html#glossary-94">security parameter index (SPI)</a>. These three elements (the security protocol, the destination address, and the SPI) uniquely identify a legitimate IPsec packet. The database ensures that a protected packet that arrives to the packet destination is recognized by the receiver. The receiver also uses information from the database to decrypt the communication, verify that the packets are unchanged, reassemble the packets, and deliver the packets to their ultimate destination.</p></li>
<li><p><b>Key management &ndash;</b> The generation and distribution of keys for the cryptographic algorithms and for the SPI.</p></li>
<li><p><a name="indexterm-1616"></a><b>Security mechanisms &ndash;</b> The authentication and encryption algorithms that protect the data in the IP datagrams.</p></li>
<li><p><a name="indexterm-1617"></a><a name="indexterm-1618"></a><a name="indexterm-1619"></a><b>Security policy database (SPD) &ndash;</b> The database that specifies the level of protection to apply to a packet. The SPD filters IP traffic to determine how the packets should be processed. A packet can be discarded. A packet can be passed in the clear. Or, a packet can be protected with IPsec. For outbound packets, the SPD and the SADB determine what level of protection to apply. For inbound packets, the SPD helps to determine if the level of protection on the packet is acceptable. If the packet is protected by IPsec, the SPD is consulted after the packet has been decrypted and has been verified.</p></li></ul>
<p>When you invoke IPsec, IPsec applies the security mechanisms to IP datagrams that
travel to the IP destination address. The receiver uses information in its SADB
to verify that the arriving packets are legitimate, and to decrypt them. Applications
can invoke IPsec to apply security mechanisms to IP datagrams on a per-socket
level as well.</p><p>Note that sockets behave differently from ports:</p>
<ul><li><p>Per-socket SAs override their corresponding port entry in the SPD.</p></li>
<li><p>Also, if a socket on a port is connected, and IPsec policy is later applied to that port, then traffic that uses that socket is not protected by IPsec.</p><p>Of course, a socket that is opened on a port <b>after</b> IPsec policy is applied to the port is protected by IPsec policy.</p></li></ul>


<a name="ipsec-ov-14"></a><h4>IPsec RFCs</h4>
<a name="indexterm-1620"></a><a name="indexterm-1621"></a><p><a name="indexterm-1622"></a>The Internet Engineering Task Force (IETF) has published a number of Requests for
Comment (RFCs) that describe the security architecture for the IP layer. All RFCs
are copyrighted by the Internet Society. For a link to the RFCs, see
<a href="http://ietf.org/">http://ietf.org/</a>. The following list of RFCs covers the more general IP security references:</p>
<ul><li><p>RFC 2411, &ldquo;IP Security Document Roadmap,&rdquo; November 1998</p></li>
<li><p>RFC 2401, &ldquo;Security Architecture for the Internet Protocol,&rdquo; November 1998</p></li>
<li><p>RFC 2402, &ldquo;IP Authentication Header,&rdquo; November 1998</p></li>
<li><p>RFC 2406, &ldquo;IP Encapsulating Security Payload (ESP),&rdquo; November 1998</p></li>
<li><p>RFC 2408, &ldquo;Internet Security Association and Key Management Protocol (ISAKMP),&rdquo; November 1998</p></li>
<li><p><a name="indexterm-1623"></a>RFC 2407, &ldquo;The Internet IP Security Domain of Interpretation for ISAKMP,&rdquo; November 1998</p></li>
<li><p>RFC 2409, &ldquo;The Internet Key Exchange (IKE),&rdquo; November 1998</p></li>
<li><p><a name="indexterm-1624"></a>RFC 3554, &ldquo;On the Use of Stream Control Transmission Protocol (SCTP) with IPsec,&rdquo; July 2003 [ not implemented in the Solaris 10 release ]</p></li></ul>


<a name="ipsec-ov-17"></a><h4>IPsec Terminology</h4>
<a name="indexterm-1625"></a><p>The IPsec RFCs define a number of terms that are useful to
recognize when implementing IPsec on your systems. The following table lists IPsec terms, provides
their commonly used acronyms, and defines each term. For a list of terminology
used in key negotiation, see <a href="ike-3.html#ike-tbl-2">Table&nbsp;22-1</a>.</p><a name="ipsec-ov-tbl-4"></a><h6>Table&nbsp;19-1 IPsec Terms, Acronyms, and Uses</h6><table><col width="20.20*"><col width="11.40*"><col width="67.40*"><tr><th align="left" valign="top" scope="column"><p>IPsec Term</p></th>
<th align="left" valign="top" scope="column"><p>Acronym</p></th>
<th align="left" valign="top" scope="column"><p>Definition</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Security association</p></td>
<td align="left" valign="top" scope="row"><p>SA</p></td>
<td align="left" valign="top" scope="row"><p>A unique connection between two
nodes on a network. The connection is defined by a triplet: a security
protocol, a security parameter index, and an IP destination. The IP destination can
be an IP address or a socket.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Security associations database</p></td>
<td align="left" valign="top" scope="row"><p>SADB</p></td>
<td align="left" valign="top" scope="row"><p>Database that contains all
active security associations.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Security parameter index</p></td>
<td align="left" valign="top" scope="row"><p>SPI</p></td>
<td align="left" valign="top" scope="row"><p>The indexing value for a security association. An
SPI is a 32-bit value that distinguishes among SAs that have the same
IP destination and security protocol.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1626"></a><a name="indexterm-1627"></a>Security policy database</p></td>
<td align="left" valign="top" scope="row"><p>SPD</p></td>
<td align="left" valign="top" scope="row"><p>Database that determines if outbound packets and
inbound packets have the specified level of protection.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Key exchange</p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>The process of generating keys
for asymmetric cryptographic algorithms. The two main methods are RSA protocols and the
Diffie-Hellman protocol.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Diffie-Hellman protocol</p></td>
<td align="left" valign="top" scope="row"><p>DH</p></td>
<td align="left" valign="top" scope="row"><p>A key exchange protocol that involves key generation and key
authentication. Often called <b>authenticated key exchange</b>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>RSA protocol</p></td>
<td align="left" valign="top" scope="row"><p>RSA</p></td>
<td align="left" valign="top" scope="row"><p>A key exchange protocol that involves key generation and
key distribution. The protocol is named for its three creators, Rivest, Shamir, and
Adleman.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Internet Security Association and Key Management Protocol</p></td>
<td align="left" valign="top" scope="row"><p>ISAKMP</p></td>
<td align="left" valign="top" scope="row"><p>The common framework for establishing the
format of SA attributes, and for negotiating, modifying, and deleting SAs. ISAKMP is
the IETF standard for handling IPsec SAs.</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipsec-ov-25.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipsec-ov-54.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

