<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>How Mobile IP Works - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mipoverview-29.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mipoverview-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level3"><a href="mipoverview-25.html">Introduction to Mobile IP</a></p>
<p class="toc level3"><a href="mipoverview-29.html">Mobile IP Functional Entities</a></p>
<div class="onpage">
<p class="toc level3"><a href="">How Mobile IP Works</a></p>
</div>
<p class="toc level3"><a href="mipoverview-5.html">Agent Discovery</a></p>
<p class="toc level3"><a href="mipoverview-30.html">Care-of Addresses</a></p>
<p class="toc level3"><a href="mipoverview-45.html">Mobile IP With Reverse Tunneling</a></p>
<p class="toc level3"><a href="mipoverview-12.html">Mobile IP Registration</a></p>
<p class="toc level3"><a href="mipoverview-18.html">Routing Datagrams to and From Mobile Nodes</a></p>
<p class="toc level3"><a href="mipoverview-23.html">Security Considerations for Mobile IP</a></p>
<p class="toc level2 tocsp"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="mipoverview-2"></a><h3>How Mobile IP Works</h3>
<a name="indexterm-2476"></a><p><a name="indexterm-2477"></a><a name="indexterm-2478"></a><a name="indexterm-2479"></a><a name="indexterm-2480"></a>Mobile IP enables routing of IP datagrams to mobile nodes. The home
address of the mobile node always identifies the mobile node regardless of where
the mobile node is attached. When away from home, a care-of address is
associated with the mobile node's home address. The care-of address provides information about
the current point of attachment of the mobile node. Mobile IP uses a
registration mechanism to register the care-of address with a home agent.</p><p><a name="indexterm-2481"></a><a name="indexterm-2482"></a><a name="indexterm-2483"></a>The home agent redirects datagrams from the home network to the care-of address.
The home agent constructs a new IP header that contains the care-of
address of the mobile node as the destination IP address. This new header
encapsulates the original IP datagram. Consequently, the home address of the mobile node
has no effect on the routing of the encapsulated datagram until the datagram
arrives at the care-of address. This type of encapsulation is called <b>tunneling</b>. After the
datagram arrives at the care-of address, the datagram is de-encapsulated. Then the datagram
is delivered to the mobile node.</p><p><a name="indexterm-2484"></a><a name="indexterm-2485"></a><a name="indexterm-2486"></a><a name="indexterm-2487"></a>The following figure shows a mobile node that resides on its home
network, Network A, before the mobile node moves to a foreign network, Network
B. Both networks support Mobile IP. The mobile node is always associated with
the home address of the mobile node, <tt>128.226.3.30</tt>.</p><a name="mipoverview-fig-27"></a><h6>Figure&nbsp;27-2 Mobile Node Residing on Home Network</h6><img src="figures/MNatHome.gif" alt="Illustrates a mobile node that resides on its home network and its connection to the home agent and the relationship to the foreign agent."></img><p>The following figure shows a mobile node that has moved to a
foreign network, Network B. Datagrams that are destined for the mobile node are
intercepted by the home agent on the home network, Network A. The datagrams
are encapsulated. Then, the datagrams are sent to the foreign agent on Network
B. The foreign agent strips off the outer header. Then the foreign agent
delivers the datagram to the mobile node that is located on Network B.</p><a name="mipoverview-fig-28"></a><h6>Figure&nbsp;27-3 Mobile Node Moving to a Foreign Network</h6><img src="figures/MNaway.gif" alt="Illustrates a mobile node that currently resides on a foreign network and its connection to the foreign agent and the relationship to the home agent."></img><p><a name="indexterm-2488"></a><a name="indexterm-2489"></a>The care-of address might belong to a foreign agent. The care-of address might
be acquired by the mobile node through the Dynamic Host Configuration Protocol (DHCP)
or the Point-to-Point Protocol (PPP). In the latter situation, a mobile node has
a colocated care-of address.</p><p><a name="indexterm-2490"></a><a name="indexterm-2491"></a><a name="indexterm-2492"></a><a name="indexterm-2493"></a><a name="indexterm-2494"></a>Mobility agents (home agents and foreign agents) advertise their presence by using <b>agent advertisement</b>
messages. Optionally, a mobile node can solicit an agent advertisement message. The mobile
node uses any mobility agent that is attached locally through an <b>agent solicitation</b> message. A
mobile node uses the agent advertisements to determine whether the mobile node
is on the home network or a foreign network.</p><p><a name="indexterm-2495"></a><a name="indexterm-2496"></a><a name="indexterm-2497"></a><a name="indexterm-2498"></a>The mobile node uses a special registration process to inform the home agent
about the current location of the mobile node. The mobile node is
always &ldquo;listening&rdquo; for mobility agents advertising their presence. The mobile node uses these
advertisements to help determine when the mobile node moves to another subnet. When
a mobile node determines that the mobile node has moved its  location,
the mobile node uses the new foreign agent to forward a registration message
to the home agent. The mobile node uses the same process when the
mobile node moves from one foreign network to another foreign network.</p><p><a name="indexterm-2499"></a><a name="indexterm-2500"></a>When the mobile node detects that it is located on the home
network, the mobile node does not use mobility services. When the mobile node
returns to the home network, the mobile node <b>deregisters</b> with the home agent.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mipoverview-29.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mipoverview-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

