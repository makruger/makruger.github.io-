<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Solaris DHCP Server - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="dhcp-overview-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-overview-36a.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level3"><a href="dhcp-overview-2.html">About the DHCP Protocol</a></p>
<p class="toc level3"><a href="dhcp-overview-12a.html">Advantages of Using Solaris DHCP</a></p>
<p class="toc level3"><a href="dhcp-overview-3.html">How DHCP Works</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Solaris DHCP Server</a></p>
</div>
<p class="toc level3"><a href="dhcp-overview-36a.html">Solaris DHCP Client</a></p>
<p class="toc level2 tocsp"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="dhcp-overview-14a"></a><h3>Solaris DHCP Server</h3>
<p><a name="indexterm-1341"></a>The Solaris DHCP server runs as a daemon in the Solaris Operating System
(Solaris OS) on a host system. The server has two basic functions:</p>
<ul><li><p><b>Managing IP addresses</b> &ndash; The DHCP server controls a range of IP addresses and allocates them to clients, either permanently or for a defined period of time. The server uses a lease mechanism to determine how long a client can use a nonpermanent address. When the address is no longer in use, it is returned to the pool and can be reassigned. The server maintains information about the binding of IP addresses to clients in its DHCP network tables, ensuring that no address is used by more than one client.</p></li>
<li><p><b>Providing network configuration for clients</b> &ndash; The server assigns an IP address and provides other information for network configuration, such as a host name, broadcast address, network subnet mask, default gateway, name service, and potentially much more information. The network configuration information is obtained from the server's <tt>dhcptab</tt> database.</p></li></ul>
<p>The Solaris DHCP server can also be configured to perform the following additional
functions:</p>
<ul><li><p><b>Responding to BOOTP client requests</b> &ndash; The server listens for broadcasts from BOOTP clients discovering a BOOTP server and provides them with an IP address and boot parameters. The information must have been configured statically by an administrator. The DHCP server can simultaneously perform as a BOOTP server and as a DHCP server.</p></li>
<li><p><b>Relaying requests</b> &ndash; The server relays BOOTP and DHCP requests to appropriate servers on other subnets. The server cannot provide DHCP or BOOTP service when configured as a BOOTP relay agent.</p></li>
<li><p><b>Providing network booting support for DHCP clients</b> &ndash; The server can provide DHCP clients with information needed to boot over the network: an IP address, boot parameters, and network configuration information. The server can also provide information that DHCP clients need to boot and install over a wide area network (WAN).</p></li>
<li><p><b>Updating DNS tables for clients that supply a host name</b> &ndash; For clients that provide a <tt>Hostname</tt> option and value in their requests for DHCP service, the server can attempt DNS updates on their behalf.</p></li></ul>


<a name="dhcp-overview-16a"></a><h4>DHCP Server Management</h4>
<p><a name="indexterm-1342"></a>As superuser, you can start, stop, and configure the DHCP server with DHCP
Manager or with command-line utilities described in <a href="#dhcp-overview-15">DHCP Command-Line Utilities</a>. Generally, the DHCP server is
configured to start automatically when the system boots, and to stop when the
system is shut down. You should not need to start and stop the
server manually under normal conditions.</p>

<a name="dhcp-overview-22a"></a><h4>DHCP Data Store</h4>
<p><a name="indexterm-1343"></a><a name="indexterm-1344"></a>All the data used by the Solaris DHCP server is maintained in a
data store. The data store might consist of plain text files, NIS+
tables, or binary-format files. While configuring the DHCP service, you choose the type of
data store to be used. The section <a href="chapter2-29.html#chapter2-39">Choosing the DHCP Data Store</a> describes the differences between
the types of data stores. You can convert a data store from one
format to another by using DHCP Manager or the <tt>dhcpconfig</tt> command.</p><p>You can also move data from one DHCP server's data store to
another server's data store. You can use export and import utilities that work
with the data stores, even if the servers are using different data store
formats. You can export and import the entire content of a data store,
or just some of the data within it, using DHCP Manager or the
<tt>dhcpconfig</tt> command.</p>
<hr><p><b>Note - </b>Any database or file format can be used for DHCP data storage if
you develop your own code module to provide an interface between Solaris DHCP
(server and management tools) and the database. .</p>
<hr>
<p>Within the Solaris DHCP data store are two types of tables. You
can view and manage the contents if these tables by using either DHCP
Manager or the command-line utilities. The data tables are as follows:</p>
<ul><li><p><tt>dhcptab</tt> <b>table</b> &ndash; Table of configuration information that can be passed to clients.</p></li>
<li><p><b>DHCP network tables</b> &ndash; Tables containing information about the DHCP and BOOTP clients that reside on the network specified in the table name. For example, the network <tt>192.168.32.0</tt> would have a table whose name includes <tt>192_168_32_0</tt>.</p></li></ul>


<a name="dhcp-overview-13"></a><h5>The <tt>dhcptab</tt> Table</h5>
<p><a name="indexterm-1345"></a>The <tt>dhcptab</tt> table contains all the information that clients can obtain from the
DHCP server. The DHCP server scans the <tt>dhcptab</tt> table each time it
starts. The file name of the <tt>dhcptab</tt> table varies according to the
data store used. For example, the <tt>dhcptab</tt> table created by the NIS+
data store <tt>SUNWnisplus</tt> is <tt>SUNWnisplus1_dhcptab</tt>.</p><p>The DHCP protocol defines a number of standard items of information that can
be passed to clients. These items are referred to as parameters, symbols, or
options. Options are defined in the DHCP protocol by numeric codes and text
labels, but without values. Some commonly used standard options are shown in the
following table.</p><a name="dhcp-overview-tbl-19"></a><h6>Table&nbsp;12-1 Sample DHCP Standard Options</h6><table><col width="26.26*"><col width="36.62*"><col width="87.13*"><tr><th align="left" valign="top" scope="column"><p>Code</p></th>
<th align="left" valign="top" scope="column"><p>Label</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1</p></td>
<td align="left" valign="top" scope="row"><p><tt>Subnet</tt></p></td>
<td align="left" valign="top" scope="row"><p>Subnet mask IP address</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>3</p></td>
<td align="left" valign="top" scope="row"><p><tt>Router</tt></p></td>
<td align="left" valign="top" scope="row"><p>IP address for the router</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>6</p></td>
<td align="left" valign="top" scope="row"><p><tt>DNSserv</tt></p></td>
<td align="left" valign="top" scope="row"><p>IP address for the
DNS server</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>12</p></td>
<td align="left" valign="top" scope="row"><p><tt>Hostname</tt></p></td>
<td align="left" valign="top" scope="row"><p>Text string for the client host name</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>15</p></td>
<td align="left" valign="top" scope="row"><p><tt>DNSdmain</tt></p></td>
<td align="left" valign="top" scope="row"><p>DNS domain name</p></td>
</tr>
</table><p>Some options are automatically assigned values when you provide information during server configuration.
You can also explicitly assign values to other options at a later time.
Options and their values are passed to the client to provide configuration information.
For example, the option/value pair, <tt>DNSdmain=Georgia.Peach.COM</tt>, sets the client's DNS domain name
to <tt>Georgia.Peach.COM</tt>.</p><p>Options can be grouped with other options in containers known as <b>macros</b>,
which makes it easier to pass information to a client. Some macros are
created automatically during server configuration and contain options that were assigned values during
configuration. Macros can also contain other macros.</p><p>The format of the <tt>dhcptab</tt> table is described in the <a href="http://docs.sun.com/doc/819-2251/dhcptab-4?a=view"><tt>dhcptab</tt>(4)</a> man page. In
DHCP Manager, all the information shown in the Options and Macros tabs comes
from the <tt>dhcptab</tt> table. See <a href="#dhcp-overview-19a">About DHCP Options</a> for more information about options. See <a href="#dhcp-overview-9">About DHCP Macros</a>
for more information about macros.</p><p>Note that the <tt>dhcptab</tt> table should not be edited manually. You should use
either the <tt>dhtadm</tt> command or DHCP Manager to create, delete, or modify options
and macros.</p>

<a name="dhcp-overview-14"></a><h5>DHCP Network Tables</h5>
<p><a name="indexterm-1346"></a>A DHCP network table maps client identifiers to IP addresses and the configuration
parameters associated with each address. The format of the network tables is described
in the <a href="http://docs.sun.com/doc/819-2251/dhcp-network-4?a=view"><tt>dhcp_network</tt>(4)</a> man page. In DHCP Manager, all the information shown in
the Addresses tab comes from the network tables.</p>

<a name="dhcp-overview-4"></a><h4>DHCP Manager</h4>
<p><a name="indexterm-1347"></a>DHCP Manager is a graphical user interface (GUI) tool you can use to
perform all management duties associated with the DHCP service. You can use it
to manage the server as well as the data the server uses.
You must be superuser when you run DHCP Manager.</p><p>You can use DHCP Manager with the server in the following ways:</p>
<ul><li><p>Configuring and unconfiguring the DHCP server</p></li>
<li><p>Starting, stopping, and restarting the DHCP server</p></li>
<li><p>Disabling and enabling DHCP service</p></li>
<li><p>Customizing DHCP server settings</p></li></ul>
<p>DHCP Manager enables you to manage the IP addresses, network configuration macros, and
network configuration options in the following ways:</p>
<ul><li><p>Adding and deleting networks under DHCP management</p></li>
<li><p>Viewing, adding, modifying, deleting, and releasing IP addresses under DHCP management</p></li>
<li><p>Viewing, adding, modifying, and deleting network configuration macros</p></li>
<li><p>Viewing, adding, modifying, and deleting nonstandard network configuration options</p></li></ul>
<p>DHCP Manager allows you to manage the DHCP data stores in the
following ways:</p>
<ul><li><p>Convert data to a new data store format</p></li>
<li><p>Move DHCP data from one DHCP server to another by exporting it from the first server and importing it on the second server</p></li></ul>
<p>DHCP Manager includes extensive online help for procedures you can perform with the
tool. For more information, see <a href="dhcp-admin-1.html">About DHCP Manager</a>.</p>

<a name="dhcp-overview-15"></a><h4>DHCP Command-Line Utilities</h4>
<p><a name="indexterm-1348"></a>All DHCP management functions can be performed by using command-line utilities. You can
run the utilities if you are logged in as superuser or as a
user assigned to the DHCP Management profile. See <a href="dhcp-admin-rbac1211.html">Setting Up User Access to DHCP Commands</a>.</p><p>The following table lists the utilities and describes the purpose of each utility.</p><a name="dhcp-overview-tbl-27"></a><h6>Table&nbsp;12-2 DHCP Command-Line Utilities</h6><table><col width="168.73*"><col width="342.20*"><col width="223.94*"><tr><th align="left" valign="top" scope="column"><p>Command</p></th>
<th align="left" valign="top" scope="column"><p>Description
and Purpose</p></th>
<th align="left" valign="top" scope="column"><p>Man Page Links</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>in.dhcpd</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-1349"></a>The DHCP service daemon. Command-line arguments enable you to set
several runtime options.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/in.dhcpd-1m?a=view"><tt>in.dhcpd</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>dhcpconfig</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-1350"></a>Used to configure and unconfigure a DHCP server. This utility enables
you to perform many of the functions of DHCP Manager from the
command line. This utility is primarily intended for use in scripts for sites
that want to automate some configuration functions. <tt>dhcpconfig</tt> collects information from the server system's
network topology files to create useful information for the initial configuration.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/dhcpconfig-1m?a=view"><tt>dhcpconfig</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>dhtadm</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-1351"></a>Used to add,
delete, and modify configuration options and macros for DHCP clients. This utility lets
you edit the <tt>dhcptab</tt> table indirectly, which ensures the correct format of the
<tt>dhcptab</tt> table. You should not directly edit the <tt>dhcptab</tt> table.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/dhtadm-1m?a=view"><tt>dhtadm</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pntadm</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-1352"></a>Used to manage the
DHCP network tables. You can use this utility to perform the following tasks:</p>
<ul><li><p>Add and remove IP addresses and networks under DHCP management.</p></li>
<li><p>Modify the network configuration for specified IP addresses.</p></li>
<li><p>Display information about IP addresses and networks under DHCP management.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/pntadm-1m?a=view"><tt>pntadm</tt>(1M)</a></p></td>
</tr>
</table>

<a name="dhcp-overview-6"></a><h4>Role-Based Access Control for DHCP Commands</h4>
<a name="indexterm-1353"></a><p>Security for the <tt>dhcpconfig</tt>, <tt>dhtadm</tt>, and <tt>pntadm</tt> commands is determined by role-based access control
(RBAC) settings. By default, the commands can be run only by superuser. If
you want to use the commands under another user name, you must
assign the user name to the DHCP Management profile as described in <a href="dhcp-admin-rbac1211.html">Setting Up User Access to DHCP Commands</a>.</p>

<a name="dhcp-overview-7"></a><h4>DHCP Server Configuration</h4>
<p><a name="indexterm-1354"></a>You configure the Solaris DHCP server the first time you run DHCP Manager
on the system where you want to run the DHCP server.</p><p>DHCP Manager server configuration dialog boxes prompt you for essential information needed to
enable and run the DHCP server on one network. Some default values are
obtained from existing system files. If you have not configured the system for
the network, there are no default values. DHCP Manager prompts for the following
information:</p>
<ul><li><p>Role of the server, either as the DHCP server or as the BOOTP relay agent</p></li>
<li><p>Data store type (files, binary files, NIS+, or something specific to your site)</p></li>
<li><p>Data store configuration parameters for the data store type you selected</p></li>
<li><p>Name service to use to update host records, if any (<tt>/etc/hosts</tt>, NIS+, or DNS)</p></li>
<li><p>Length of lease time and whether clients should be able to renew leases</p></li>
<li><p>DNS domain name and IP addresses of DNS servers</p></li>
<li><p>Network address and subnet mask for the first network you want to configure for DHCP service</p></li>
<li><p>Network type, either local area network (LAN) or point-to-point network</p></li>
<li><p>Router discovery or the IP address of a particular router</p></li>
<li><p>NIS domain name and IP address of NIS servers</p></li>
<li><p>NIS+ domain name and IP address of NIS+ servers</p></li></ul>
<p>You can also configure the DHCP server using the <tt>dhcpconfig</tt> command. This utility
automatically gathers information from existing system files to provide a useful initial configuration.
Therefore, you must ensure that the files are correct before running <tt>dhcpconfig</tt>. See
the <a href="http://docs.sun.com/doc/819-2240/dhcpconfig-1m?a=view"><tt>dhcpconfig</tt>(1M)</a> man page for information about the files that <tt>dhcpconfig</tt> uses to obtain
information.</p>

<a name="dhcp-overview-8"></a><h4>IP Address Allocation</h4>
<p><a name="indexterm-1355"></a>The Solaris DHCP server supports the following types of IP address allocation:</p>
<ul><li><p><b>Manual allocation</b> &ndash; The server provides a specific IP address that you choose for a specific DHCP client. The address cannot be reclaimed or assigned to another client.</p></li>
<li><p><b>Automatic, or permanent, allocation</b> &ndash; The server provides an IP address that has no expiration time, making it permanently associated with the client until you change the assignment or the client releases the address.</p></li>
<li><p><b>Dynamic allocation</b> &ndash; The server provides an IP address to a requesting client, with a lease for a specific period of time. When the lease expires, the address is taken back by the server and can be assigned to another client. The period of time is determined by the lease time configured for the server.</p></li></ul>


<a name="dhcp-overview-18a"></a><h4>Network Configuration Information</h4>
<p><a name="indexterm-1356"></a>You determine what information to provide to DHCP clients. When you configure the
DHCP server, you provide essential information about the network. Later, you can add
more information that you want to provide to clients.</p><p>The DHCP server stores network configuration information in the <tt>dhcptab</tt> table, in
the form of option/value pairs and macros. Options are keywords for network data
that you want to supply to clients. Values are assigned to options and
passed to clients in DHCP messages. For example, the NIS server address is
passed by way of an option called <tt>NISservs</tt>. The <tt>NISservs</tt> option has a
value that is equal to a list of IP addresses, which is assigned
by the DHCP server. Macros provide a convenient way to group together any
number of options that you want to supply to clients. You can use
DHCP Manager to create macros to group options and to assign values to
the options. If you prefer a command-line tool, you can use <tt>dhtadm</tt>, the
DHCP configuration table management utility, to work with options and macros.</p>

<a name="dhcp-overview-19a"></a><h4>About DHCP Options</h4>
<p><a name="indexterm-1357"></a>In Solaris DHCP, an <b>option</b> is a piece of network information to be
passed to a client. The DHCP literature also refers to options as <b>symbols</b>
or <b>tags</b>. An option is defined by a numeric code and a text
label. An option receives a value when it is used in the DHCP
service.</p><p>The DHCP protocol defines a large number of standard options for commonly specified
network data: <tt>Subnet</tt>, <tt>Router</tt>, <tt>Broadcst</tt>, <tt>NIS+dom</tt>, <tt>Hostname</tt>, and <tt>LeaseTim</tt> are a few examples.
A complete list of standard options is shown in the <a href="http://docs.sun.com/doc/819-2251/dhcp-inittab-4?a=view"><tt>dhcp_inittab</tt>(4)</a> man page.
You cannot modify the standard option keywords in any way. However, you can
assign values to the options that are relevant to your network when you
include the options in macros.</p><p>You can create new options for data that is not represented by
the standard options. Options you create must be classified in one of three
categories:</p>
<ul><li><p><b>Extended</b> &ndash; Reserved for options that have become standard DHCP options but are not yet included in the DHCP server implementation. You might use an extended option if you know of a standard option that you want to use, but you do not want to upgrade your DHCP server.</p></li>
<li><p><b>Site</b> &ndash; Reserved for options that are unique to your site. You create these options.</p></li>
<li><p><b>Vendor</b> &ndash; Reserved for options that should apply only to clients of a particular class, such as a hardware or vendor platform. The Solaris DHCP implementation includes a number of vendor options for Solaris clients. For example, the option <tt>SrootIP4</tt> is used to specify the IP address of a server that a client that boots from the network should use for its root (/) file system.</p></li></ul>
<p><a href="dhcp-admin-9.html">Chapter&nbsp;15, Administering DHCP (Tasks)</a> includes procedures for creating, modifying, and deleting DHCP options.</p>

<a name="dhcp-overview-9"></a><h4>About DHCP Macros</h4>
<p><a name="indexterm-1358"></a><a name="indexterm-1359"></a>In the Solaris DHCP service, a <b>macro</b> is a collection of network configuration
options and the values that you assign to them. Macros are created to
group options together to be passed to specific clients or types of clients.
For example, a macro intended for all clients of a particular subnet might
contain option/value pairs for subnet mask, router IP address, broadcast address, NIS+ domain,
and lease time.</p>

<a name="dhcp-overview-16"></a><h5>Macro Processing by the DHCP Server</h5>
<p><a name="indexterm-1360"></a>When the DHCP server processes a macro, it places the network options and
values defined in the macro in a DHCP message to a client.
The server processes some macros automatically for clients of a particular type.</p><p><a name="indexterm-1361"></a>For the server to process a macro automatically, the name of the macro
must comply with one of the categories shown in the following table.</p><a name="dhcp-overview-tbl-17"></a><h6>Table&nbsp;12-3 DHCP Macro Categories for Automatic Processing</h6><table><col width="27.52*"><col width="72.48*"><tr><th align="left" valign="top" scope="column"><p>Macro
Category</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Client class</p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-1362"></a>The macro name matches a class of client, indicated by the
client machine type, operating system, or both. For example, if a server has
a macro named <tt>SUNW.Sun-Blade-100</tt>, any client whose hardware implementation is <tt>SUNW,Sun-Blade-100</tt> automatically receives the
values in the <tt>SUNW.Sun-Blade-100</tt> macro.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Network address</p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-1363"></a>The macro name matches a DHCP-managed network IP
address. For example, if a server has a macro named <tt>10.53.224.0</tt>, any client connected
to the <tt>10.53.224.0</tt> network automatically receives the values in the <tt>10.53.224.0</tt> macro.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Client ID</p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-1364"></a><a name="indexterm-1365"></a>The
macro name matches some unique identifier for the client, usually derived from an
Ethernet or MAC address. For example, if a server has a macro named
<tt>08002011DF32</tt>, the client with the client ID <tt>08002011DF32</tt> (derived from the Ethernet address
<tt>8:0:20:11:DF:32</tt>) automatically receives the values in the macro named <tt>08002011DF32</tt>.</p></td>
</tr>
</table><p>A macro with a name that does not use one of the
categories listed in <a href="#dhcp-overview-tbl-17">Table&nbsp;12-3</a> can be processed only if one of the following
is true: </p>
<ul><li><p>The macro is mapped to an IP address.</p></li>
<li><p>The macro is included in another macro that is processed automatically.</p></li>
<li><p>The macro is included in another macro that is mapped to an IP address.</p></li></ul>

<hr><p><b>Note - </b>When you configure a server, a macro that is named to match
the server's name is created by default. This server macro is <b>not</b> processed automatically
for any client because it is not named with one of the
name types that cause automatic processing. When you later create IP addresses on the
server, the IP addresses are mapped to use the server macro by
default.</p>
<hr>


<a name="dhcp-overview-10"></a><h5>Order of Macro Processing</h5>
<p><a name="indexterm-1366"></a>When a DHCP client requests DHCP services, the DHCP server determines which macros
match the client. The server processes the macros, using the macro categories to
determine the order of processing. The most general category is processed first, and
the most specific category is processed last. The macros are processed in the
following order:</p>
<ol><li><p>Client class macros &ndash; The most general category</p></li>
<li><p>Network address macros &ndash; More specific than Client class</p></li>
<li><p>Macros mapped to IP addresses &ndash; More specific than Network address</p></li>
<li><p>Client ID macros &ndash; The most specific category, pertaining to one client</p></li></ol>
<p>A macro that is included in another macro is processed as part
of the container macro.</p><p>If the same option is included in more than one macro, the
value for that option in the macro with the most specific category is
used because it is processed last. For example, if a Network address macro
contains the lease time option with a value of 24 hours, and a
Client ID macro contains the lease time option with a value of 8
hours, the client receives a lease time of 8 hours.</p>

<a name="eyatk"></a><h5>Size Limit for DHCP Macros</h5>
<a name="indexterm-1367"></a><p>The sum total of the values assigned to all the options in
a macro must not exceed 255 bytes, including the option codes and length
information. This limit is dictated by the DHCP protocol.</p><p>The macros that are most likely to be impacted by this limit
are macros that are used to pass paths to files on Solaris installation
servers. Generally, you should pass the minimum amount of vendor information needed. You
should use short path names in options that require path names. If you
create symbolic links to long paths, you can pass the shorter link names.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="dhcp-overview-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-overview-36a.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

