<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>ipsecinit.conf</tt> File - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipsecref-22.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipsecref-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level3"><a href="ipsecref-22.html"><tt>ipsecconf</tt> Command</a></p>
<div class="onpage">
<p class="toc level3"><a href=""><tt>ipsecinit.conf</tt> File</a></p>
</div>
<p class="toc level3"><a href="ipsecref-17.html"><tt>ipsecalgs</tt> Command</a></p>
<p class="toc level3"><a href="ipsecref-24.html">Security Associations Database for IPsec</a></p>
<p class="toc level3"><a href="ipsecref-25.html">Utilities for Key Generation in IPsec</a></p>
<p class="toc level3"><a href="ipsecref-26.html"><tt>snoop</tt> Command and IPsec</a></p>
<p class="toc level2 tocsp"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipsecref-23"></a><h3><tt>ipsecinit.conf</tt> File</h3>
<a name="indexterm-1903"></a><a name="indexterm-1904"></a><a name="indexterm-1905"></a><a name="indexterm-1906"></a><a name="indexterm-1907"></a><a name="indexterm-1908"></a><a name="indexterm-1909"></a><a name="indexterm-1910"></a><p>To invoke IPsec security policies when you start the Solaris Operating System, you
create a configuration file to initialize IPsec with your specific IPsec policy entries.
You should name the file <tt>/etc/inet/ipsecinit.conf</tt>. See the <a href="http://docs.sun.com/doc/819-2240/ipsecconf-1m?a=view"><tt>ipsecconf</tt>(1M)</a> man page for details about
policy entries and their format. After policies are configured, you can use the
<tt>ipsecconf</tt> command to view or modify the existing configuration.</p>

<a name="ipsecref-44"></a><h4>Sample <tt>ipsecinit.conf</tt> File</h4>
<p><a name="indexterm-1911"></a>The Solaris software includes a sample IPsec policy file, <tt>ipsecinit.sample</tt>. You can
use the file as a template to create your own <tt>ipsecinit.conf</tt> file.
The <tt>ipsecinit.sample</tt> file contains the following examples:</p><pre>#
# For example,
#
#     {rport 23} ipsec {encr_algs des encr_auth_algs md5}
#
# will protect the telnet traffic originating from the host with ESP using
# DES and MD5. Also:
#
#     {raddr 10.5.5.0/24} ipsec {auth_algs any}
#
# will protect traffic to or from the 10.5.5.0 subnet with AH 
# using any available algorithm.
#
#
# To do basic filtering, a drop rule may be used. For example:
#
#    {lport 23 dir both} drop {}
# will disallow any remote system from telnetting in.
#
# If you are using IPv6, it may be useful to bypass neighbor discovery
# to allow in.iked to work properly with on-link neighbors. To do that,
# add the following lines:
#
#        {ulp ipv6-icmp type 133-137 dir both } pass { }
#
# This will allow neighbor discovery to work normally.</pre>

<a name="ipsecref-42"></a><h4>Security Considerations for <tt>ipsecinit.conf</tt> and <tt>ipsecconf</tt></h4>
<a name="indexterm-1912"></a><a name="indexterm-1913"></a><a name="indexterm-1914"></a><a name="indexterm-1915"></a><a name="indexterm-1916"></a><p>Use extreme caution if transmitting a copy of the <tt>ipsecinit.conf</tt> file over a
network. An adversary can read a network-mounted file as the file is being
read. If, for example, the <tt>/etc/inet/ipsecinit.conf</tt> file is accessed or is copied from
an NFS-mounted file system, an adversary can change the policy that is contained
in the file.</p><p>Ensure that you set up IPsec policies before starting any communications, because existing
connections might be affected by the addition of new policy entries. Similarly, do
not change policies in the middle of a communication.</p><p><a name="indexterm-1917"></a><a name="indexterm-1918"></a>Specifically, IPsec policy cannot be changed for SCTP, TCP, or UDP sockets on
which a <tt>connect()</tt> or <tt>accept()</tt> function call has been issued. A socket whose
policy cannot be changed is called a <b>latched socket</b>. New policy entries do
not protect sockets that are already latched. For more information, see the <a href="http://docs.sun.com/doc/819-2244/connect-3socket?a=view"><tt>connect</tt>(3SOCKET)</a>
and <a href="http://docs.sun.com/doc/819-2244/accept-3socket?a=view"><tt>accept</tt>(3SOCKET)</a> man pages.</p><p>Protect your naming system. If the following two conditions are met, then your
host names are no longer trustworthy:</p>
<ul><li><p>Your source address is a host that can be looked up over the network.</p></li>
<li><p>Your naming system is compromised.</p></li></ul>
<p>Security weaknesses often arise from the misapplication of tools, not from the actual
tools. You should be cautious when using the <tt>ipsecconf</tt> command. Use a console
or other hard-connected TTY for the safest mode of operation.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipsecref-22.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipsecref-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

