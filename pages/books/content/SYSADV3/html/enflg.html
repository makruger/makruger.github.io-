<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Maintaining IPMP Groups - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="deploynetmult-57.html">Previous</a>
             </td>
             <td align="right">
                 <a href="deploynetmult-92.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level3"><a href="deploynetmult-58.html">Configuring IPMP (Task Maps)</a></p>
<p class="toc level3"><a href="deploynetmult-57.html">Configuring IPMP Groups</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Maintaining IPMP Groups</a></p>
<p class="toc level4"><a href="#deploynetmult-6">How to Display the IPMP Group Membership of an Interface</a></p>
<p class="toc level4"><a href="#deploynetmult-103">How to Add an Interface to an IPMP Group</a></p>
<p class="toc level4"><a href="#deploynetmult-7">How to Remove an Interface From an IPMP Group</a></p>
<p class="toc level4"><a href="#deploynetmult-8">How to Move an Interface From One IPMP Group to Another Group</a></p>
</div>
<p class="toc level3 tocsp"><a href="deploynetmult-92.html">Replacing a Failed Physical Interface on Systems That Support Dynamic Reconfiguration</a></p>
<p class="toc level4"><a href="deploynetmult-92.html#deploynetmult-93">How to Remove a Physical Interface That Has Failed (DR-Detach)</a></p>
<p class="toc level4"><a href="deploynetmult-92.html#deploynetmult-97">How to Replace a Physical Interface That Has Failed (DR-Attach)</a></p>
<p class="toc level3 tocsp"><a href="deploynetmult-116.html">Recovering a Physical Interface That Was Not Present at System Boot</a></p>
<p class="toc level4"><a href="deploynetmult-116.html#deploynetmult-107">How to Recover a Physical Interface That Was Not Present at System Boot</a></p>
<p class="toc level3 tocsp"><a href="gbdbr.html">Modifying the <tt>/etc/default/mpathd</tt> IPMP Configuration File</a></p>
<p class="toc level4"><a href="gbdbr.html#gbdbf">How to Configure the <tt>/etc/default/mpathd</tt> File</a></p>
<p class="toc level3 tocsp"><a href="deploynetmult-47.html">Modifying IPMP Configurations</a></p>
<p class="toc level4"><a href="deploynetmult-47.html#deploynetmult-48">How to Configure the <tt>/etc/default/mpathd</tt> File</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="enflg"></a><h3>Maintaining IPMP Groups</h3>
<a name="indexterm-2961"></a><p>This section contains tasks for maintaining existing IPMP groups and the interfaces that
compose those groups. The tasks presume that you have already configured an IPMP
group, as explained in <a href="deploynetmult-57.html">Configuring IPMP Groups</a>.</p>

<a name="deploynetmult-6"></a><h4>How to Display the IPMP Group Membership of an Interface</h4><a name="indexterm-2962"></a><ol>
<li><a name="enfpj"></a><b>On the system with the IPMP group configuration, become superuser or assume an
equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="deploynetmult-step-20"></a><b><a name="indexterm-2963"></a>Display information about the interface, including the group to which the interface belongs.</b><pre># <tt><b>ifconfig</b></tt> <i>interface</i></pre></li>
<li><b>If applicable, display IPv6 information for the interface.</b><pre># <tt><b>ifconfig</b></tt> <i>interface</i> <tt><b>inet6</b></tt></pre></li></ol><a name="eojcd"></a>Example&nbsp;31-5 Displaying Physical Interface Groups<p>To display the group name for <tt>hme0</tt>, you would type the following:</p><pre># <tt><b>ifconfig hme0</b></tt>
    hme0: flags=9000843&lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 
      index 2 inet 192.168.85.19 netmask ffffff00 broadcast 192.168.85.255
      groupname testgroup1</pre><p>To display the group name for only the IPv6 information, you would
type the following:</p><pre># <tt><b>ifconfig hme0 inet6</b></tt>
    hme0: flags=a000841&lt;UP,RUNNING,MULTICAST,IPv6> mtu 1500 index 2
            inet6 fe80::a00:20ff:feb9:19fa/10 
            groupname testgroup1</pre>

<a name="deploynetmult-103"></a><h4>How to Add an Interface to an IPMP Group</h4><a name="indexterm-2964"></a><ol>
<li><b>On the system with the IPMP group configuration, assume the Primary Administrator role
or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="deploynetmult-step-106"></a><b>Add the interface to the IPMP group.</b><pre># ifconfig <i>interface</i> group <i>group-name</i></pre><p>The interface specified in <i>interface</i> becomes a member of IPMP group <i>group-name</i>.</p></li></ol><a name="esqao"></a>Example&nbsp;31-6 Adding an Interface to an IPMP Group<p>To add <tt>hme0</tt> to the IPMP group <tt>testgroup2</tt>, you would type the following
command:</p><pre># <tt><b>ifconfig hme0 group testgroup2</b></tt>
  hme0: flags=9000843&lt;UP ,BROADCAST,RUNNING,MULTICAST,IPv4,NOFAILOVER> mtu 1500 index 2
  inet 192.168.85.19 netmask ff000000 broadcast 10.255.255.255
  groupname testgroup2
  ether 8:0:20:c1:8b:c3 </pre>

<a name="deploynetmult-7"></a><h4>How to Remove an Interface From an IPMP Group</h4><a name="indexterm-2965"></a><p>When you execute the <tt>ifconfig</tt> command's <tt>group</tt> parameter with a null string, the
interface is removed from its current IPMP group. Be careful when removing interfaces
from a group. If some other interface in the IPMP group has failed,
a failover could have happened earlier. For example, if <tt>hme0</tt> failed previously, all
addresses are failed over to <tt>hme1</tt>, if <tt>hme1</tt> is part of the same group.
The removal of <tt>hme1</tt> from the group causes the <tt>in.mpathd</tt> daemon to
return all the failover addresses to some other interface in the group. If
no other interfaces are functioning in the group, failover might not restore all
the network accesses.</p><p>Similarly, when an interface in a group needs to be unplumbed, you
should first remove the interface from the group. Then, ensure that the interface has
all the original IP addresses configured. The <tt>in.mpathd</tt> daemon tries to restore the
original configuration of an interface that is removed from the group. You need
to ensure that the configuration is restored before unplumbing the interface. Refer to
<a href="emqqq.html#eoqse">What Happens During Interface Failover</a> to see how interfaces look before and after a failover.</p><ol>
<li><b>On the system with the IPMP group configuration, assume the Primary Administrator role
or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="deploynetmult-step-23"></a><b>Remove the interface from the IPMP group.</b><pre># ifconfig <i>interface</i> group ""</pre><p>The quotation marks indicate a null string.</p></li></ol><a name="eojcj"></a>Example&nbsp;31-7 Removing an Interface From a Group<p>To remove <tt>hme0</tt> from the IPMP group <tt>test</tt>, you would type the following
command:</p><pre># <tt><b>ifconfig hme0 group ""</b></tt>
    # <tt><b>ifconfig hme0</b></tt>
    hme0: flags=9000843&lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500
    index 2 inet 192.168.85.19 netmask ffffff00 broadcast 192.168.85.255
    # ifconfig hme0 inet6
    hme0: flags=a000841&lt;UP,RUNNING,MULTICAST,IPv6> mtu 1500 index 2
    inet6 fe80::a00:20ff:feb9:19fa/10 </pre>

<a name="deploynetmult-8"></a><h4>How to Move an Interface From One IPMP Group to Another Group</h4><a name="indexterm-2966"></a><p>You can place an interface in a new IPMP group when the
interface belongs to an existing IPMP group.  You do not need to
remove the interface from the current IPMP group. When you place the interface
in a new group, the interface is automatically removed from any existing IPMP
group. </p><ol>
<li><b>On the system with the IPMP group configuration, assume the Primary Administrator role
or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="deploynetmult-step-26"></a><b>Move the interface to a new IPMP group.</b><pre># ifconfig <i>interface</i> group <i>group-name</i></pre><p>Placing the interface in a new group automatically removes the interface  from
any existing group.</p></li></ol><a name="esqak"></a>Example&nbsp;31-8 Moving an Interface to a Different IPMP Group<p><a name="indexterm-2967"></a><a name="indexterm-2968"></a>To change the IPMP group of interface <tt>hme0</tt>, you would type the following:
</p><pre># <tt><b>ifconfig hme0 group cs-link</b></tt></pre><p>This command removes the <tt>hme0</tt> interface from IPMP group <tt>test</tt> and then puts
the interface in the group <tt>cs-link</tt>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="deploynetmult-57.html">Previous</a>
             </td>
             <td align="right">
                 <a href="deploynetmult-92.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

