<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Modifying an IPv6 Interface Configuration for Hosts and Servers - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipv6-config-tasks-5.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipv6-config-tasks-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level3"><a href="ipv6-config-tasks-64.html">Configuring an IPv6 Interface</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-64.html#ipv6-config-tasks-119">How to Enable an IPv6 Interface for the Current Session</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-64.html#ipv6-config-tasks-28">How to Enable Persistent IPv6 Interfaces</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-64.html#gbuzm">How to Turn Off IPv6 Address Autoconfiguration</a></p>
<p class="toc level3 tocsp"><a href="ipv6-config-tasks-5.html">Configuring an IPv6 Router</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-5.html#ipv6-config-tasks-21">How to Configure an IPv6-Enabled Router</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Modifying an IPv6 Interface Configuration for Hosts and Servers</a></p>
</div>
<p class="toc level3"><a href="ipv6-config-tasks-17.html">Tasks for Configuring Tunnels for IPv6 Support (Task Map)</a></p>
<p class="toc level3"><a href="ipv6-config-tasks-16.html">Configuring Tunnels for IPv6 Support</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-16.html#ipv6-config-tasks-20">How to Manually Configure IPv6 Over IPv4 Tunnels</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-16.html#ipv6-config-tasks-37">How to Manually Configure IPv6 Over IPv6 Tunnels</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-16.html#ipv6-config-tasks-40">How to Configure IPv4 Over IPv6 Tunnels</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-16.html#ipv6-config-tasks-24">How to Configure a 6to4 Tunnel</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-16.html#ipv6-config-tasks-48">How to Configure a 6to4 Tunnel to a 6to4 Relay Router</a></p>
<p class="toc level3 tocsp"><a href="ipv6-config-tasks-10.html">Configuring Name Service Support for IPv6</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-10.html#ipv6-config-tasks-11">How to Add IPv6 Addresses to DNS</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-10.html#ipv6-config-tasks-116">How to Display IPv6 Name Service Information</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-10.html#ipv6-admintasks-34">How to Verify That DNS IPv6 PTR Records Are Updated Correctly</a></p>
<p class="toc level4"><a href="ipv6-config-tasks-10.html#ipv6-admintasks-37">How to Display IPv6 Information Through NIS</a></p>
<p class="toc level2 tocsp"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipv6-config-tasks-6"></a><h3>Modifying an IPv6 Interface Configuration for Hosts and Servers</h3>
<a name="indexterm-740"></a><a name="indexterm-741"></a><p>This section explains how to modify the configuration of IPv6-enabled interfaces on nodes
that are hosts or servers. In most instances, you should use address autoconfiguration
for IPv6-enabled interfaces, as explained in <a href="chapter1-42.html#chapter1-49">Stateless Autoconfiguration Overview</a>. However, you can modify the IPv6
address of an interface, if necessary, as explained in the tasks of this
section. </p>

<a name="gbuzn"></a><h4>Modifying an IPv6 Interface Configuration (Task Map)</h4>
<table><col width="33*"><col width="33*"><col width="33*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Turn off IPv6 address autoconfiguration.</p></td>
<td align="left" valign="top" scope="row"><p>Use this task if you need
to manually configure the interface ID portion of the IPv6 address.</p></td>
<td align="left" valign="top" scope="row"><p><a href="ipv6-config-tasks-64.html#gbuzm">How to Turn Off IPv6 Address Autoconfiguration</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create a temporary
address for a host.</p></td>
<td align="left" valign="top" scope="row"><p>Hide a host's interface ID by configuring a randomly
created temporary address that is used as the lower 64 bits of the
address.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#ipv6-config-tasks-106">How to Configure a Temporary Address</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Configure a token for the interface ID of a system.</p></td>
<td align="left" valign="top" scope="row"><p>Create a 64-bit
token to be used as the interface ID in an IPv6 address.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</a></p></td>
</tr>
</table>

<a name="ipv6-config-tasks-102"></a><h4>Using Temporary Addresses for an Interface</h4>
<a name="indexterm-742"></a><a name="indexterm-743"></a><a name="indexterm-744"></a><a name="indexterm-745"></a><a name="indexterm-746"></a><a name="indexterm-747"></a><p>An IPv6 <b>temporary address</b> includes a randomly generated 64-bit number as the interface ID,
instead of an interface's MAC address. You can use temporary addresses for any
interfaces on an IPv6 node that you want to keep anonymous. For example,
you might want to use temporary addresses for the interfaces of a host
that needs to access public web servers. Temporary addresses implement IPv6 privacy enhancements.
These enhancements are described in RFC 3041, available at <a href="http://www.ietf.org/rfc/rfc3041.txt?number=3041">&ldquo;Privacy Extensions for Stateless Address Autoconfiguration in IPv6&rdquo;</a>.</p><p>You enable a temporary address in the <tt>/etc/inet/ndpd.conf</tt> file for one or more
interfaces, if needed. However, unlike standard, autoconfigured IPv6 addresses, a temporary address consists
of the 64-bit subnet prefix and a randomly generated 64-bit number. This random
number becomes the interface ID segment of the IPv6 address. A link-local address
is not generated with the temporary address as the interface ID.</p><p>Be aware that temporary addresses have a default <b>preferred lifetime</b> of one day.
When you enable temporary address generation, you may also configure the following variables
in the <tt>/etc/inet/ndpd.conf</tt> file:</p><dl><dt><b>valid lifetime</b> TmpValidLifetime</dt>
<dd><p>Time span in which the temporary address exists, after which the address is deleted from the host.</p></dd>
<dt><b>preferred lifetime</b> TmpPreferredLifetime</dt>
<dd><p>Elapsed time before the temporary address is deprecated. This time span should be shorter than the valid lifetime.</p></dd>
<dt><b>address regeneration</b></dt>
<dd><p>Duration of time before the expiration of the preferred lifetime, during which the host should generate a new temporary address.</p></dd>
</dl>
<p>You express the duration of time for temporary addresses as follows:</p><dl><dt><i>n</i></dt>
<dd><p><i>n</i> number of seconds, which is the default</p></dd>
<dt><i>n</i> <tt>h</tt></dt>
<dd><p><i>n</i> number of hours (<tt>h</tt>)</p></dd>
<dt><i>n</i> <tt>d</tt></dt>
<dd><p><i>n</i> number of days (<tt>d</tt>)</p></dd>
</dl>


<a name="ipv6-config-tasks-106"></a><h5>How to Configure a Temporary Address</h5>
<a name="indexterm-748"></a><ol>
<li><b>Log in to the IPv6 host as Primary Administrator or as superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="ipv6-config-tasks-step-104"></a><b>If necessary, enable IPv6 on the host's interfaces</b><p>Refer to <a href="ipv6-config-tasks-64.html#ipv6-config-tasks-119">How to Enable an IPv6 Interface for the Current Session</a>.</p></li>
<li><a name="ipv6-config-tasks-step-105"></a><b>Edit the <tt>/etc/inet/ndpd.conf</tt> file to turn on temporary address generation.</b>
<ul><li><p><a name="indexterm-749"></a><a name="indexterm-750"></a>To configure temporary addresses on all interfaces of a host, add the following line to <tt>/etc/inet/ndpd.conf</tt>:</p><pre><tt><b>ifdefault TmpAddrsEnabled true</b></tt></pre></li>
<li><p>To configure a temporary address for a specific interface, add the following line to <tt>/etc/inet/ndpd.conf</tt>:</p><pre><tt><b>if</b></tt> <i>interface</i> <tt><b>TmpAddrsEnabled true</b></tt> </pre></li></ul>
</li>
<li><a name="ipv6-config-tasks-step-107"></a><b>(Optional) Specify the valid lifetime for the temporary address. </b><pre><tt><b>ifdefault TmpValidLifetime</b></tt> <i>duration</i></pre><p>This syntax specifies the valid lifetime for all interfaces on a host. The
value for <i>duration</i> should be in seconds, hours, or days. The default valid
lifetime is 7 days. You can also use <tt>TmpValidLifetime</tt> with the <tt>if</tt>
<i>interface</i> keywords to specify the valid lifetime for a temporary address of a
particular interface.</p></li>
<li><a name="ipv6-config-tasks-step-108"></a><b>(Optional) Specify a preferred lifetime for the temporary address, after which the address
is deprecated.</b><pre><tt><b>if</b></tt> <i>interface</i> <tt><b>TmpPreferredLifetime</b></tt> <i>duration</i></pre><p>This syntax specifies the preferred lifetime for the temporary address of a particular
interface. The default preferred lifetime is one day. You can also use <tt>TmpPreferredLifetime</tt>
with the <tt>ifdefault</tt> keyword to specify the preferred lifetime for the temporary addresses
on all interfaces of a host.</p>
<hr><p><b>Note - </b>Default address selection gives a lower priority to IPv6 addresses that have been
deprecated. If an IPv6 temporary address is deprecated, default address selection chooses a
nondeprecated address as the source address of a packet. A nondeprecated address could
be the automatically generated IPv6 address, or possibly, the interface's IPv4 address. For
more information about default address selection, see <a href="ipv6-admintasks-43.html">Administering Default Address Selection</a>.</p>
<hr>
</li>
<li><a name="ipv6-config-tasks-step-109"></a><b>(Optional) Specify the lead time in advance of address deprecation, during which the
host should generate a new temporary address.</b><pre><tt><b>ifdefault TmpRegenAdvance</b></tt> <b>duration</b></pre><p>This syntax specifies the lead time in advance of address deprecation for the
temporary addresses of all interfaces on a host. The default is 5 seconds.</p></li>
<li><a name="ipv6-config-tasks-step-110"></a><b>Change the configuration of the <tt>in.ndpd</tt> daemon.</b><pre># <tt><b>pkill -HUP in.ndpd</b></tt>
# <tt><b>/usr/lib/inet/in.ndpd</b></tt></pre></li>
<li><a name="ipv6-config-tasks-step-123"></a><b>Verify that temporary addresses have been created by running the <tt>ifconfig</tt> <tt>-a6</tt> command, as
shown in <a href="#ekqwi">Example&nbsp;7-5</a>.</b><p>The output from <tt>ifconfig</tt> should have the word <tt>TEMPORARY</tt> in the same line as
the interface definition.</p></li></ol><a name="ipv6-config-tasks-113"></a>Example&nbsp;7-4 Temporary Address Variables in the <tt>/etc/inet/ndpd.conf</tt> File<p>The following example shows a segment of an <tt>/etc/inet/ndpd.conf</tt> file with temporary addresses
enabled for the primary network interface.</p><pre>ifdefault TmpAddrsEnabled true

ifdefault TmpValidLifetime 14d

ifdefault TmpPreferredLifetime 7d

ifdefault TmpRegenAdvance 6s</pre><a name="ekqwi"></a>Example&nbsp;7-5 <tt>ifconfig</tt><tt>-a6</tt> Command Output with Temporary Addresses Enabled<p>This example shows the output of the <tt>ifconfig</tt> command after temporary addresses are
created.</p><pre># <tt><b>ifconfig -a6</b></tt>
lo0: flags=2000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv6> mtu 8252 index 1 
     inet6 ::1/128
hme0: flags=2000841 &lt;UP,RUNNING,MULTICAST,IPv6> mtu 1500 index 2 
     ether 8:0:20:b9:4c:54
     inet6 fe80::a00:20ff:feb9:4c54/10
hme0:1: flags=2080841 &lt;UP,RUNNING,MULTICAST,ADDRCONF,IPv6> mtu 1500 index 2 
     inet6 2001:db8:3c4d:15:a00:20ff:feb9:4c54/64
hme0:2: flags=802080841&lt;UP,RUNNING,MULTICAST,ADDRCONF,IPv6,TEMPORARY> mtu 1500 index 2 
      inet6 2001:db8:3c4d:15:7c37:e7d1:fc9c:d2cb/64</pre><p>Note that the line following interface <tt>hme0:2</tt> includes the word <tt>TEMPORARY</tt>. This designation
indicates that the address <tt>2001:db8:3c4d:15:7c37:e7d1:fc9c:d2cb/64</tt> has a temporary interface ID.</p><h6>See Also</h6>
<ul><li><p>To set up name service support for IPv6 addresses, see <a href="ipv6-config-tasks-10.html">Configuring Name Service Support for IPv6</a>.</p></li>
<li><p>To configure IPv6 addresses for a server, see <a href="#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</a>.</p></li>
<li><p>To monitor activities on IPv6 nodes, see <a href="ipv6-admintasks-1.html">Chapter&nbsp;8, Administering a TCP/IP Network (Tasks)</a>.</p></li></ul>


<a name="gbvsf"></a><h4>Configuring an IPv6 Token</h4>
<p>The 64-bit interface ID of an IPv6 address is also referred to
as a <b>token</b>, as introduced in <a href="ipv6-overview-10.html">IPv6 Addressing Overview</a>. During address autoconfiguration, the token
is associated with the interface's MAC address. In most cases, nonrouting nodes, that is
IPv6 hosts and servers, should use their autoconfigured tokens.</p><p>However, using autoconfigured tokens can be a problem for servers whose interfaces are
routinely swapped as part of system maintenance. When the interface card is changed,
the MAC address is also changed. Servers that depend on having stable IP
addresses can experience problems as a result. Various parts of the network infrastructure,
such as DNS or NIS, might have stored specific IPv6 addresses for the
interfaces of the server.</p><p>To avoid address change problems, you can manually configure a token to be
used as the interface ID in an IPv6 address. To create the
token, you specify a hexadecimal number of 64 bits or less to occupy
the interface ID portion of the IPv6 address. During subsequent address autoconfiguration, Neighbor Discovery
does not create an interface ID that is based on the interface's MAC
address. Instead, the manually created token becomes the interface ID. This token remains
assigned to the interface, even when a card is replaced.</p>
<hr><p><b>Note - </b>The difference between user-specified tokens and temporary addresses is that temporary addresses are
randomly generated, rather than explicitly created by a user.</p>
<hr>


<a name="ipv6-config-tasks-70"></a><h5>How to Configure a User-Specified IPv6 Token</h5>
<a name="indexterm-751"></a><p>The next instructions are particularly useful for servers whose interfaces are routinely replaced.
They also are valid for configuring user-specified tokens on any IPv6 node.</p><ol>
<li><b>Assume the Primary Administrator role or become superuser on the node.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="ipv6-config-tasks-step-74"></a><b>Verify that the interface you want to configure with a token is plumbed.</b><p>An interface must be plumbed before you can configure a token for its
IPv6 address.</p><pre># <tt><b>ifconfig</b></tt> <tt>-a6</tt></pre><pre>qfe0: flags=2000841 &lt;UP,RUNNING,MULTICAST,IPv6> mtu 1500 index 2
        ether 0:3:ba:13:14:e1 
        inet6 fe80::203:baff:fe13:14e1/10</pre><p>This output shows that the network interface <tt>qfe0</tt> is plumbed and has the
link-local address <tt>fe80::203:baff:fe13:14e1/10</tt>. This address was automatically configured during installation. </p></li>
<li><b>Create one or more 64-bit hexadecimal numbers to be used as tokens for
the node's interfaces. For examples of tokens, refer to <a href="ipv6-overview-10.html#ipv6-overview-15">Link-Local Unicast Address</a>.</b></li>
<li><a name="ipv6-config-tasks-step-78"></a><b>Configure each interface with a token.</b><p>Use the following form of the <tt>ifconfig</tt> command for each interface to have
a user-specified interface ID (token):</p><pre>ifconfig <i>interface</i> inet6  token <i>address/64</i></pre><p>For example, you would use the following command to configure interface <tt>qfe0</tt>
with a token:</p><pre># <tt><b>ifconfig qfe0 inet6 token ::1a:2b:3c:4d/64 </b></tt></pre><p>Repeat this step for every interface that will have a user-specified token.</p></li>
<li><a name="ipv6-config-tasks-step-73"></a><b>(Optional) Make the new IPv6 address persist across reboots.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Edit or create an <tt>/etc/hostname6.</tt><i>interface</i> file for each interface you configured with
a token.</b></li>
<li><b>Add the following text at the bottom of each <tt>/etc/hostname.6</tt><i>interface</i> file:</b><pre><tt><b>token ::</b></tt><i>token-name</i>/64</pre><p>For example, you might add the following text to the bottom of
an<tt>/etc/hostname6.</tt><i>interface</i> file:</p><pre>token ::1a:2b:3c:4d/64</pre></li></ol><p>After the system reboots, the token that you configured in an <tt>/etc/hostname6.</tt><i>interface</i>
file is applied to the interface's IPv6 address. This IPv6 address remains persistent
across subsequent reboots.</p></li>
<li><a name="ipv6-config-tasks-step-76"></a><b>Update the IPv6 daemon with your changes.</b><pre># <tt><b>pkill -HUP -in.ndpd</b></tt></pre></li></ol><a name="gbvqu"></a>Example&nbsp;7-6 Configuring a User-Specified Token on an IPv6 Interface<p>In the following example, the interface <tt>bge0:1</tt> has an autoconfigured IPv6 address. The
subnet prefix <tt>2001:db8:3c4d:152:/64</tt> is advertised by a router on the node's local link.
The interface ID <tt>2c0:9fff:fe56:8255</tt> is generated from <tt>bge0:1</tt>'s MAC address.</p><pre># <tt><b>ifconfig -a6</b></tt>
lo0: flags=2002000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv6,VIRTUAL> mtu 8252 index 1
        inet6 ::1/128
bge0: flags=2100801 &lt;UP,MULTICAST,IPv6> mtu 1500 index 5
        inet6 fe80::2c0:9fff:fe56:8255/10
        ether 0:c0:9f:56:82:55
bge0:1: flags=2180801 &lt;UP, MULTICAST,ADDRCONF,IPv6>mtu 1500 index 5
        inet6 2001:db8:3c4d:152:c0:9fff:fe56:8255/64
# <tt><b>ifconfig bge0 inet6 token ::1a:2b:3c:4d/64</b></tt>
# <tt><b>vi /etc/hostname6.bge0</b></tt>
token ::1a:2b:3c:4d/64
# <tt><b>pkill -HUP -in.ndpd</b></tt>
# <tt><b>ifconfig -a6</b></tt>
lo0: flags=2002000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv6,VIRTUAL> mtu 8252 index 1
        inet6 ::1/128
bge0: flags=2100801 &lt;UP,MULTICAST,IPv6> mtu 1500 index 5
        inet6 fe80::2c0:9fff:fe56:8255/10
        ether 0:c0:9f:56:82:55
bge0:1: flags=2180801 &lt;UP, MULTICAST,ADDRCONF,IPv6>mtu 1500 index 5
        inet6 2001:db8:3c4d:152:1a:2b:3c:4d/64</pre><p>After the token is configured, the global address on the second status line
of <tt>bge0:1</tt> now has <tt>1a:2b:3c:4d</tt>configured for its interface ID.</p><h6>See Also</h6>
<ul><li><p>To update the name services with the IPv6 addresses of the server, see <a href="ipv6-config-tasks-10.html">Configuring Name Service Support for IPv6</a>.</p></li>
<li><p>To monitor server performance, see <a href="ipv6-admintasks-1.html">Chapter&nbsp;8, Administering a TCP/IP Network (Tasks)</a>.</p></li></ul>


<a name="ipv6-config-tasks-53"></a><h4>Administering IPv6-Enabled Interfaces on Servers</h4>
<a name="indexterm-752"></a><a name="indexterm-753"></a><p><a name="indexterm-754"></a><a name="indexterm-755"></a>When you plan for IPv6 on a server, you must make a
few decisions as you enable IPv6 on the server's interfaces. Your decisions affect
the strategy to use for configuring the interface IDs, also known as <b>tokens</b>, of
an interface's IPv6 address.</p>

<a name="gbwsg"></a><h5>How to Enable IPv6 on a Server's Interfaces</h5>
<h6>Before You Begin</h6><p>The next procedure assumes the following:</p>
<ul><li><p>Solaris 10 OS is already installed on the server.</p></li>
<li><p>You enabled IPv6 on the server's interfaces either during Solaris OS installation or later, using the procedures in <a href="ipv6-config-tasks-64.html">Configuring an IPv6 Interface</a>.</p></li></ul>
<p>If applicable, upgrade the application software to support IPv6. Note that many applications
that run on the IPv4 protocol stack also successfully run on IPv6. For
more information, refer to <a href="ipv6-planning-7.html#ipv6-planning-18">How to Prepare Network Services for IPv6 Support</a>.</p><ol>
<li><b>On the server, assume the Primary Administrator role or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Ensure that an IPv6 subnet prefix is configured on a router on the
same link as the server. </b><p>For more information, refer to <a href="ipv6-config-tasks-5.html">Configuring an IPv6 Router</a>.</p></li>
<li><b>Use the appropriate strategy for the interface ID for the server's IPv6-enabled interfaces.</b><p>By default, IPv6 address autoconfiguration uses the MAC address of an interface when
creating the interface ID portion of the IPv6 address. If the IPv6 address
of the interface is well known, swapping one interface for another interface can
cause problems. The MAC address of the new interface will be different. During
address autoconfiguration, a new interface ID is generated.</p>
<ul><li><p>For an IPv6-enabled interface that you do not plan to replace, use the autoconfigured IPv6 address, as introduced in <a href="chapter1-42.html">IPv6 Address Autoconfiguration</a>.</p></li>
<li><p>For IPv6-enabled interfaces that must appear anonymous outside the local network, consider using a randomly generated token for the interface ID. For instructions and an example, refer to <a href="#ipv6-config-tasks-106">How to Configure a Temporary Address</a>. </p></li>
<li><p>For IPv6-enabled interfaces that you plan to swap on a regular basis, create tokens for the interface IDs. For instructions and an example, refer to <a href="#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</a>.</p></li></ul>
</li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipv6-config-tasks-5.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipv6-config-tasks-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

