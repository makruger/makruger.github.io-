<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring Systems on the Local Network  - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipconfig-4.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gcvjj.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level3"><a href="gcwwj.html">What's New in This Chapter</a></p>
<p class="toc level3"><a href="ipconfig-2a.html">Before You Configure an IPv4 Network (Task Map)</a></p>
<p class="toc level3"><a href="ipconfig-3.html">Determining Host Configuration Modes</a></p>
<p class="toc level3"><a href="ipconfig-2.html">Adding a Subnet to a Network (Task Map)</a></p>
<p class="toc level3"><a href="ipconfig-4.html">Network Configuration Task Map</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Configuring Systems on the Local Network </a></p>
<p class="toc level4"><a href="#ipconfig-64">How to Configure a Host for Local Files Mode</a></p>
<p class="toc level4"><a href="#ipconfig-79">How to Set Up a Network Configuration Server</a></p>
<p class="toc level4"><a href="#ipconfig-90">How to Configure Hosts for Network Client Mode</a></p>
<p class="toc level4"><a href="#gbwxb">How to Change the IPv4 Address and Other Network Configuration Parameters</a></p>
</div>
<p class="toc level3 tocsp"><a href="gcvjj.html">Packet Forwarding and Routing on IPv4 Networks</a></p>
<p class="toc level3"><a href="ipconfig-111.html">Monitoring and Modifying Transport Layer Services</a></p>
<p class="toc level4"><a href="ipconfig-111.html#ipconfig-6">How to Log the IP Addresses of All Incoming TCP Connections</a></p>
<p class="toc level4"><a href="ipconfig-111.html#ermig">How to Add Services That Use the SCTP Protocol</a></p>
<p class="toc level4"><a href="ipconfig-111.html#ipconfig-86">How to Use TCP Wrappers to Control Access to TCP Services</a></p>
<p class="toc level2 tocsp"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipconfig-63"></a><h3>Configuring Systems on the Local Network </h3>
<p>Network software installation occurs along with the installation of the operating system software.
At that time, certain IP configuration parameters must be stored in appropriate files
so that they can be read at boot time. </p><p>The network configuration process involves creating or editing the network configuration files. How
configuration information is made available to a system's kernel is conditional. The availability
depends on whether these files are stored locally (local files mode) or acquired
from the network configuration server (network client mode).</p><p><a name="indexterm-453"></a><a name="indexterm-454"></a>The parameters that are supplied during network configuration follow: </p>
<ul><li><p>The IP address of each network interface on every system.</p></li>
<li><p>The host names of each system on the network. You can type the host name in a local file or a name service database.</p></li>
<li><p>The NIS, LDAP, or DNS domain name in which the system resides, if applicable.</p></li>
<li><p><a name="indexterm-455"></a>The default router addresses. You supply this information if you have a simple network topology with only one router attached to each network. You also supply this information if your routers do not run routing protocols such as the Router Discovery Server Protocol (RDISC) or the Router Information Protocol (RIP). For more information on default routers, refer to <a href="gcvjj.html">Packet Forwarding and Routing on IPv4 Networks</a> See <a href="gcvjj.html#gcxiw">Table&nbsp;5-1</a> for a list of routing protocols supported in the Solaris OS.</p></li>
<li><p>Subnet mask (required only for networks with subnets).</p></li></ul>
<p>If the Solaris installation program detects more one interface on the system, you
can optionally configure the additional interfaces during installation. For complete instructions, see <a href="http://docs.sun.com/doc/819-2393"><i>Solaris Express Installation Guide: Basic Installations</i></a>.</p><p>This chapter contains information on creating and editing local configuration files. See <a href="http://docs.sun.com/doc/819-3194"><i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>
for information on working with name service databases.</p>

<a name="ipconfig-64"></a><h4>How to Configure a Host for Local Files Mode</h4><p>Use this procedure for configuring TCP/IP on a host that runs in
local files mode. </p><ol>
<li><a name="ipconfig-step-66a"></a><b>Assume the Primary Administrator role, or become superuser </b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Change to the <tt>/etc</tt> directory.</b></li>
<li><a name="ipconfig-step-67"></a><b>Verify that the correct host name is set in the <tt>/etc/nodename</tt> file.</b><p>When you specify the host name of a system during Solaris installation, that
host name is entered into the <tt>/etc/nodename</tt> file. Make sure that the node name
entry is the correct host name for the system.</p></li>
<li><a name="ipconfig-step-68a"></a><b><a name="indexterm-456"></a>Verify that an <tt>/etc/hostname</tt>.<i>interface</i> file exists for each network interface on the
system.</b><p>For file syntax and basic information about the <tt>/etc/hostname</tt>.<i>interface</i> file, refer to
<a href="fpcwh.html">Basics for Administering Physical Interfaces</a>.</p><p>The Solaris installation program requires you to configure at least one interface during
installation. The first interface that you configure automatically becomes the <b>primary network interface</b>. The installation
program creates an <tt>/etc/hostname.</tt><i>interface</i> file for the primary network interface and any other
interfaces that you optionally configure at installation time. </p><p>If you configured additional interfaces during installation, verify that each interface has a
corresponding <tt>/etc/hostname.</tt><i>interface</i> file. You do not need to configure more than one
interface during Solaris installation. However, if you later want to add more interfaces to
the system, you must manually configure them.</p><p>For steps for manually configuring interfaces, refer to  <a href="fpcso.html#fpdcn">How to Configure a Physical Interface After System Installation</a>, for releases starting
with Solaris 10 1/06.</p></li>
<li><a name="ipconfig-step-70"></a><b><a name="indexterm-457"></a><a name="indexterm-458"></a>Verify that the entries in the <tt>/etc/inet/hosts</tt> file are current.</b><p>The Solaris installation program creates entries for the primary network interface, loopback address,
and, if applicable, any additional interfaces that were configured during installation.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>Make sure that the existing entries in <tt>/etc/inet/hosts</tt> are current.</b></li>
<li><a name="ipconfig-step-71"></a><b>(Optional) Add the IP addresses and corresponding names for any network interfaces that
were added to the local host after installation.</b></li>
<li><a name="ipconfig-step-72"></a><b>(Optional) Add the IP address or addresses of the file server, if the
<tt>/usr</tt> file system is NFS mounted.</b></li></ol></li>
<li><a name="ipconfig-step-73"></a><b><a name="indexterm-459"></a><a name="indexterm-460"></a><a name="indexterm-461"></a>Type the host's fully qualified domain name in the <tt>/etc/defaultdomain</tt> file. </b><p>For example, suppose host <tt>tenere</tt> was part of the domain <tt>deserts.worldwide.com</tt>. Therefore, you would
type <tt>deserts.worldwide.com</tt> in <tt>/etc/defaultdomain</tt>. See <a href="ipconfig-12.html#ipconfig-16"><tt>/etc/defaultdomain</tt> File</a> for more information.</p></li>
<li><a name="ipconfig-step-74"></a><b><a name="indexterm-462"></a><a name="indexterm-463"></a><a name="indexterm-464"></a>Type the router's name in the <tt>/etc/defaultrouter</tt> file. </b><p>See <a href="ipconfig-12.html#ipconfig-17"><tt>/etc/defaultrouter</tt> File</a> for information about this file.</p></li>
<li><a name="ipconfig-step-75"></a><b>Type the name of the default router and its IP addresses in the
<tt>/etc/inet/hosts</tt> file. </b><p>Additional routing options are available, as discussed in <a href="#ipconfig-90">How to Configure Hosts for Network Client Mode</a>. You can apply these
options to a local files mode configuration.</p></li>
<li><a name="ipconfig-step-76"></a><b><a name="indexterm-465"></a><a name="indexterm-466"></a>Add the network mask for your network, if applicable:</b>
<ul><li><p>If the host gets its IP address from a DHCP server, you do not have to specify the network mask.</p></li>
<li><p>If you have set up a NIS server on the same network as this client, you can add <tt>netmask</tt> information into the appropriate database on the server. </p></li>
<li><p>For all other conditions, do the following:</p></li></ul>
<ol style="list-style-type: lower-alpha">
				 
<li><b>Type the network number and the netmask in the <tt>/etc/inet/netmasks</tt> file.</b><p>Use the following format:</p><pre>network-number netmask</pre><p>For example, for the Class C network number <tt>192.168.83</tt>, you would type:</p><pre><tt><b>192.168.83.0 255.255.255.0</b></tt></pre><p>For CIDR addresses, convert the network prefix into the equivalent dotted decimal representation.
Network prefixes and their dotted decimal equivalents can be found in <a href="ipplan-5.html#extkp">Table&nbsp;2-3</a>. For
example, use the following to express the CIDR network prefix <tt>192.168.3.0/22</tt>.</p><pre>192.168.3.0 255.255.252.0</pre></li>
<li><b>Change the lookup order for netmasks in <tt>/etc/nsswitch.conf</tt>, so that local files are
searched first:</b><pre>netmasks:   files nis</pre></li></ol></li>
<li><a name="ipconfig-step-77"></a><b><a name="indexterm-467"></a><a name="indexterm-468"></a><a name="indexterm-469"></a><a name="indexterm-470"></a><a name="indexterm-471"></a>Reboot the system. </b></li></ol>

<a name="ipconfig-79"></a><h4>How to Set Up a Network Configuration Server</h4><p>Information for setting up installation servers and boot servers is found in <a href="http://docs.sun.com/doc/819-2393"><i>Solaris Express Installation Guide: Basic Installations</i></a>.<a name="indexterm-472"></a><a name="indexterm-473"></a><a name="indexterm-474"></a><a name="indexterm-475"></a><a name="indexterm-476"></a><a name="indexterm-477"></a><a name="indexterm-478"></a><a name="indexterm-479"></a></p><ol>
<li><b>Assume the Primary Administrator role, or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Change to the root (<tt>/</tt>) directory of the prospective network configuration server.</b></li>
<li><a name="ipconfig-step-82"></a><b><a name="indexterm-480"></a><a name="indexterm-481"></a>Turn on the <tt>in.tftpd</tt> daemon by creating the directory <tt>/tftpboot</tt>: </b><pre># <tt><b>mkdir /tftpboot</b></tt></pre><p>This command configures the system as a TFTP, bootparams, and RARP server.</p></li>
<li><a name="ipconfig-step-83"></a><b>Create a symbolic link to the directory.</b><pre># <tt><b>ln -s /tftpboot/. /tftpboot/tftpboot</b></tt></pre></li>
<li><a name="ipconfig-step-84"></a><b>Enable the <tt>tftp</tt> line in the <tt>/etc/inetd.conf</tt> file. </b><p>Check that  the entry reads as follows:</p><pre>tftp dgram udp6 wait root /usr/sbin/in.tftpd in.tftpd -s /tftpboot</pre><p>This line prevents <tt>in.tftpd</tt> from retrieving any file other than the files that
are located in <tt>/tftpboot</tt>.</p></li>
<li><a name="ipconfig-step-85"></a><b>Edit the <tt>hosts</tt> database.</b><p>Add the host names and IP addresses for every client on the
network.</p></li>
<li><a name="ipconfig-step-86"></a><b>Edit the <tt>ethers</tt> database.</b><p>Create entries for every host on the network that runs in network
client mode.</p></li>
<li><a name="ipconfig-step-87"></a><b>Edit the <tt>bootparams</tt> database.</b><p>See <a href="ipconfig-42.html#ipconfig-51"><tt>bootparams</tt> Database</a>. Use the wildcard entry or create an entry for every host
that runs in network client mode.</p></li>
<li><b>Convert the <tt>/etc/inetd.conf</tt> entry into a Service Management Facility (SMF) service  manifest,
and enable the resulting service:<a name="indexterm-482"></a></b><pre># <tt><b>/usr/sbin/inetconv</b></tt></pre></li>
<li><b>Verify that <tt>in.tftpd</tt> is working correctly.</b><pre># <tt><b>svcs network/tftp/udp6</b></tt></pre><p>You should receive output resembling the following:</p><pre>STATE          STIME    FMRI
online         18:22:21 svc:/network/tftp/udp6:default</pre></li></ol><h6><h6>More Information</h6>Administering the <tt>in.tftpd</tt>Daemon<p><a name="indexterm-483"></a>The <tt>in.tftpd</tt> daemon is managed by the Service Management Facility.  Administrative actions
on <tt>in.tftpd</tt>, such as enabling, disabling, or restarting, can be performed using  the
<tt>svcadm</tt> command. Responsibility for initiating and restarting  this service is delegated to
<tt>inetd</tt>. Use the <tt>inetadm</tt> command to make configuration changes and to view configuration
 information for <tt>in.tftpd</tt>.  You can query the service's status 
by using the <tt>svcs</tt> command. For an overview of the Service Management
Facility, refer to <a href="http://docs.sun.com/doc/819-2379/hbrunlevels-25516?a=view">Chapter 14, Managing Services (Overview), in <i>System Administration Guide: Basic Administration</i></a>.</p></h6>

<a name="ipconfig-89"></a><h4>Configuring Network Clients</h4>
<p><a name="indexterm-484"></a><a name="indexterm-485"></a><a name="indexterm-486"></a>Network clients receive their configuration information from network configuration servers. Therefore, before you
configure a host as a network client you must ensure that at least
one network configuration server is set up for the network. </p>

<a name="ipconfig-90"></a><h4>How to Configure Hosts for Network Client Mode</h4><p>Do the following procedure on each host to be configured in network client
mode. </p><ol>
<li><b>Assume the Primary Administrator role, or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="ipconfig-step-93"></a><b><a name="indexterm-487"></a><a name="indexterm-488"></a><a name="indexterm-489"></a><a name="indexterm-490"></a><a name="indexterm-491"></a><a name="indexterm-492"></a>Search the <tt>/etc</tt> directory for the <tt>nodename</tt> file. </b><p>If such a file exists, delete it.</p><p>Eliminating <tt>/etc/nodename</tt> causes the system to use the <tt>hostconfig</tt> program to obtain the
host name, domain name, and router addresses from the network configuration server. See
<a href="">Configuring Systems on the Local Network </a>.</p></li>
<li><a name="ipconfig-step-94"></a><b><a name="indexterm-493"></a>Create the <tt>/etc/hostname.</tt><i>interface</i> file, if it does not exist. </b><p>Ensure that the file is empty. An empty <tt>/etc/hostname.</tt><i>interface</i> file causes the system
to acquire the IPv4 address from the network configuration server. </p></li>
<li><a name="ipconfig-step-95"></a><b><a name="indexterm-494"></a><a name="indexterm-495"></a><a name="indexterm-496"></a>Ensure that the <tt>/etc/inet/hosts</tt> file contains only the <tt>localhost</tt> name and IP address
of the loopback network interface. </b><pre># <tt><b>cat /etc/inet/hosts</b></tt>
# Internet host table
#
127.0.0.1       localhost</pre><p>The IPv4 loopback interface has the IP address <tt>127.0.0.1</tt>.<a name="indexterm-497"></a></p><p>For more information, see <a href="ipconfig-12.html#ipconfig-22">Loopback Address</a>. The file should not contain the IP
address and host name for the local host (primary network interface). </p></li>
<li><a name="ipconfig-step-96"></a><b><a name="indexterm-498"></a><a name="indexterm-499"></a><a name="indexterm-500"></a>Check for the existence of an <tt>/etc/defaultdomain</tt> file.</b><p>If such a file exists, delete it.</p><p><a name="indexterm-501"></a>The <tt>hostconfig</tt> program automatically sets the domain name. To override the domain name
that is set by <tt>hostconfig</tt>, type the substitute domain name in the <tt>/etc/defaultdomain</tt>
file. </p></li>
<li><a name="ipconfig-step-97"></a><b><a name="indexterm-502"></a><a name="indexterm-503"></a><a name="indexterm-504"></a><a name="indexterm-505"></a><a name="indexterm-506"></a><a name="indexterm-507"></a><a name="indexterm-508"></a>Ensure that the search paths in the client's <tt>/etc/nsswitch.conf</tt> file reflect the
name service requirements for your network. </b></li></ol>

<a name="gbwxb"></a><h4>How to Change the IPv4 Address and Other Network Configuration Parameters</h4><p>This procedure explains how to modify the IPv4 address, host name, and other
network parameters on a previously installed system. Use the procedure for modifying the
IP address of a server or networked standalone system. The procedure does not
apply to network clients or appliances. The steps create a configuration that persists
across reboots. </p>
<hr><p><b>Note - </b>The instructions apply specifically to changing the IPv4 address of the primary network
interface. To add another interface to the system, refer to <a href="fpcso.html#fpdcn">How to Configure a Physical Interface After System Installation</a>.</p>
<hr>
<p>In almost all cases, the following steps use traditional IPv4 dotted decimal notation
to specify the IPv4 address and subnet mask. Alternatively, you can use CIDR
notation to specify the IPv4 address in all the applicable files in this
procedure. For an introduction to CIDR notation, see <a href="ipplan-4.html#eyhxz">IPv4 Addresses in CIDR Format</a>. </p><ol>
<li><b>Assume the Primary Administrator role, or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>If the system's host name must change, modify the host name entry in
the <tt>/etc/nodename</tt> file.</b></li>
<li><b>Modify the IP address and, if applicable, the host name in the
<tt>/etc/inet/hosts</tt> file or equivalent <tt>hosts</tt> database.</b></li>
<li><b>Modify the IP address in the <tt>/etc/hostname.</tt><i>interface</i> file for the primary network
interface.</b><p>You can use any of the following as the entry for the primary
network interface in the <tt>/etc/hostname</tt><i>interface</i> file:</p>
<ul><li><p>IPv4 address, expressed in traditional dotted decimal format</p><p>Use the following syntax:</p><pre><i>IPv4 address</i>
(Optional) <i>subnet mask</i></pre><p>Here is an example:</p><pre># <tt><b>vi hostname.eri0</b></tt>
10.0.2.5
netmask + 255.0.0.0</pre><p>The netmask entry is optional. If you do not specify it, the default netmask is assumed.</p></li>
<li><p>IPv4 address, expressed in CIDR notation, if appropriate for your network configuration.</p><pre><i>IPv4 address/network prefix</i></pre><p>Here is an example:</p><pre># <tt><b>vi hostname.eri0</b></tt>
10.0.2.5/8</pre><p>The CIDR prefix designates the appropriate netmask for the IPv4 address. For example, the /8 above indicates the netmask 255.0.0.0.</p></li>
<li><p>Host name.</p><p>To use the system's host name in the <tt>/etc/hostname.</tt><i>interface</i> file, be sure that the host name and associated IPv4 address are also in the <tt>hosts</tt> database.</p></li></ul>
</li>
<li><b>If the subnet mask has changed, modify the subnet entries in the following
files:</b>
<ul><li><p><tt>/etc/netmasks</tt></p></li>
<li><p>(Optional) <tt>/etc/hostname.</tt><i>interface</i></p></li></ul>
</li>
<li><b>If the subnet address has changed, change the IP address of the default
router in <tt>/etc/defaultrouter</tt> to that of the new subnet's default router.</b></li>
<li><b>Reboot the system.</b><pre># <tt><b>reboot -- -r</b></tt></pre></li></ol><a name="gbyga"></a>Example&nbsp;5-1 Modifying the IPv4 Address and Other Network Parameters to Persist Across Reboots<p>This example shows how to change the following network parameters of a system
that is moved to another subnet:</p>
<ul><li><p>IP address for the primary network interface <tt>eri0</tt> changes from <tt>10.0.0.14</tt> to <tt>192.168.55.14</tt>.</p></li>
<li><p>Host name changes from <tt>myhost</tt> to <tt>mynewhostname</tt>.</p></li>
<li><p>Netmask changes from <tt>255.0.0.0</tt> to <tt>255.255.255.0</tt>.</p></li>
<li><p>Default router address changes to <tt>192.168.55.200</tt>.</p></li></ul>
<p>Check the system's current status:</p><pre># <tt><b>hostname</b></tt>
myhost
<tt><b># ifconfig -a</b></tt>
lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
eri0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 10.0.0.14 netmask ff000000 broadcast 10.255.255.255
        ether 8:0:20:c1:8b:c3 </pre><p>Next, change the system's host name and the IP address of <tt>eri0</tt>
in the appropriate files:</p><pre># <tt><b>vi /etc/nodename mynewhostname</b></tt>
# <tt><b>vi /etc/inet/hosts # # Internet host table # 127.0.0.1 localhost 192.168.55.14 mynewhostname loghost</b></tt>
# <tt><b>vi /etc/hostname.eri0 192.168.55.14 netmask + 255.255.255.0</b></tt></pre><p>Finally, change the netmask and the IP address of the default router.</p><pre># <tt><b>vi /etc/netmasks</b></tt>.
.
.
<tt><b>192.168.55.0 255.255.255.0</b></tt>
# <tt><b>vi /etc/defaultrouter</b></tt>
<tt><b>192.168.55.200 #moved system to 192.168.55 net</b></tt>
#</pre><p>After making these changes, reboot the system.</p><pre># <tt><b>reboot -- -r</b></tt></pre><p>Verify that the configuration you just set is maintained after the reboot:</p><pre># <tt><b>hostname</b></tt>
mynewhostname
# <tt><b>ifconfig -a</b></tt>

lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
eri0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 192.168.55.14 netmask ffffff00 broadcast 10.255.255.255
        ether 8:0:20:c1:8b:c3 </pre><a name="gbyge"></a>Example&nbsp;5-2 Changing the IP Address and Host Name For the Current Session<p>This example shows how to change a host's name, IP address of
the primary network interface, and subnet mask for the current session only. If
you reboot, the system reverts to its previous IP address and subnet mask.
The IP address for the primary network interface <tt>eri0</tt> changes from <tt>10.0.0.14</tt> to
<tt>192.168.34.100</tt>.</p><pre><tt><b># ifconfig -a</b></tt>lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
eri0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 10.0.0.14 netmask ff000000 broadcast 10.255.255.255
        ether 8:0:20:c1:8b:c3 
# <tt><b>ifconfig eri0 192.168.34.100 netmask 255.255.255.0 broadcast + up</b></tt>
# <tt><b>vi /etc/nodename</b></tt>
mynewhostname

# <tt><b>ifconfig -a</b></tt>
lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
eri0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 192.168.34.100 netmask ffffff00 broadcast 10.255.255.255
        ether 8:0:20:c1:8b:c3 
<tt><b># hostname</b></tt>
mynewhostname</pre><a name="gcans"></a>Example&nbsp;5-3 Changing the IPv4 Address for the Current Session, Using CIDR Notation<p>This example shows how to change a host name and IP address
for the current session only, using CIDR notation. If you reboot, the system
reverts to its previous IP address and subnet mask. The IP address for
the primary network interface, <tt>eri0</tt>, changes from <tt>10.0.0.14</tt> to <tt>192.168.6.25/27</tt>.</p><pre><tt><b># ifconfig -a</b></tt>
lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
eri0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 10.0.0.14 netmask ff000000 broadcast 10.255.255.255
        ether 8:0:20:c1:8b:c3 
# <tt><b>ifconfig eri0 192.168.6.25/27 broadcast + up</b></tt>
# <tt><b>vi /etc/nodename</b></tt>
mynewhostname
# <tt><b>ifconfig -a</b></tt>
lo0: flags=1000849 &lt;UP,LOOPBACK,RUNNING,MULTICAST,IPv4> mtu 8232 index 1
        inet 127.0.0.1 netmask ff000000 
eri0: flags=1000843 &lt;UP,BROADCAST,RUNNING,MULTICAST,IPv4> mtu 1500 index 2
        inet 192.168.06.25 netmask ffffffe0 broadcast 10.255.255.255
        ether 8:0:20:c1:8b:c3 
<tt><b># hostname</b></tt>
mynewhostname</pre><p>When you use CIDR notation for the IPv4 address, you do not
have to specify the netmask. <tt>ifconfig</tt> uses the network prefix designation to determine the
netmask. For example, for the <tt>192.168.6.0/27</tt> network,  <tt>ifconfig</tt> sets the netmask <tt>ffffffe0</tt>. If
you had used the more common <tt>/24</tt> prefix designation, the resulting netmask is
<tt>ffffff00</tt>. Using the <tt>/24</tt> prefix designation is the equivalent of specifying the netmask
<tt>255.255.255.0</tt> to <tt>ifconfig</tt> when configuring a new IP address.</p><h6>See Also</h6><p>To change the IP address of an interface other than the primary
network interface, refer to <a href="http://docs.sun.com/doc/819-2379"><i>System Administration Guide: Basic Administration</i></a> and <a href="fpcso.html#fpdcn">How to Configure a Physical Interface After System Installation</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipconfig-4.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gcvjj.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

