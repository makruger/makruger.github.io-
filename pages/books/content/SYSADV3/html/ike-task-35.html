<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring IKE to Find Attached Hardware - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ike-task-17.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ike-task-19.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level3"><a href="ike-task-7.html">Configuring IKE (Task Map)</a></p>
<p class="toc level3"><a href="ike-task-13.html">Configuring IKE With Preshared Keys (Task Map)</a></p>
<p class="toc level3"><a href="ike-task-15.html">Configuring IKE With Preshared Keys</a></p>
<p class="toc level4"><a href="ike-task-15.html#ike-task-24">How to Configure IKE With Preshared Keys</a></p>
<p class="toc level4"><a href="ike-task-15.html#ike-task-10">How to Refresh IKE Preshared Keys</a></p>
<p class="toc level4"><a href="ike-task-15.html#ike-task-18">How to Add an IKE Preshared Key for a New Policy Entry in <tt>ipsecinit.conf</tt></a></p>
<p class="toc level4"><a href="ike-task-15.html#ike-task-44">How to Verify That IKE Preshared Keys Are Identical</a></p>
<p class="toc level3 tocsp"><a href="ike-task-12.html">Configuring IKE With Public Key Certificates (Task Map)</a></p>
<p class="toc level3"><a href="ike-task-25.html">Configuring IKE With Public Key Certificates</a></p>
<p class="toc level4"><a href="ike-task-25.html#ike-task-42">How to Configure IKE With Self-Signed Public Key Certificates</a></p>
<p class="toc level4"><a href="ike-task-25.html#ike-task-41">How to Configure IKE With Certificates Signed by a CA</a></p>
<p class="toc level4"><a href="ike-task-25.html#ike-task-14">How to Generate and Store Public Key Certificates on Hardware</a></p>
<p class="toc level4"><a href="ike-task-25.html#ike-task-22">How to Handle a Certificate Revocation List</a></p>
<p class="toc level3 tocsp"><a href="ike-task-38.html">Configuring IKE for Mobile Systems (Task Map)</a></p>
<p class="toc level3"><a href="ike-task-48.html">Configuring IKE for Mobile Systems</a></p>
<p class="toc level4"><a href="ike-task-48.html#ike-task-40">How to Configure IKE for Off-Site Systems</a></p>
<p class="toc level3 tocsp"><a href="ike-task-17.html">Configuring IKE to Find Attached Hardware (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Configuring IKE to Find Attached Hardware</a></p>
<p class="toc level4"><a href="#ike-task-32">How to Configure IKE to Find the Sun Crypto Accelerator 1000 Board</a></p>
<p class="toc level4"><a href="#ike-task-11">How to Configure IKE to Find the Sun Crypto Accelerator 4000 Board</a></p>
</div>
<p class="toc level3 tocsp"><a href="ike-task-19.html">Changing IKE Transmission Parameters (Task Map)</a></p>
<p class="toc level3"><a href="ike-task-20.html">Changing IKE Transmission Parameters</a></p>
<p class="toc level4"><a href="ike-task-20.html#ike-task-34">How to Change the Duration of Phase 1 IKE Key Negotiation</a></p>
<p class="toc level2 tocsp"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ike-task-35"></a><h3>Configuring IKE to Find Attached Hardware</h3>
<p><a name="indexterm-2167"></a>Public key certificates can also be stored on attached hardware, the Sun Crypto
Accelerator 1000 board and the Sun Crypto Accelerator 4000 board. With the
Sun Crypto Accelerator 4000 board, public key operations can also be offloaded from
the system to the board.</p>

<a name="ike-task-32"></a><h4>How to Configure IKE to Find the Sun Crypto Accelerator 1000 Board</h4><a name="indexterm-2168"></a><a name="indexterm-2169"></a><a name="indexterm-2170"></a><a name="indexterm-2171"></a><a name="indexterm-2172"></a><h6>Before You Begin</h6><p>The following procedure assumes that a Sun Crypto Accelerator 1000 board is
attached to the system. The procedure also assumes that the software for the
board has been installed and that the software has been configured. For instructions,
see the <i>Sun Crypto Accelerator 1000 Board Version 1.1 Installation and User's Guide</i>.</p><ol>
<li><b>On the system console, assume the Primary Administrator role or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p>
<hr><p><b>Note - </b>Logging in remotely exposes security-critical traffic to eavesdropping. Even if you somehow protect
the remote login, the security of the system is reduced to the security
of the remote login session.</p>
<hr>
</li>
<li><b>Check that the library is linked.</b><p>Type the following command to determine whether a PKCS&nbsp;#11 library is linked:</p><pre># <tt><b>ikeadm get stats</b></tt>
Phase 1 SA counts:
Current:   initiator:          0   responder:          0
Total:     initiator:          0   responder:          0
Attempted: initiator:          0   responder:          0
Failed:    initiator:          0   responder:          0
           initiator fails include 0 time-out(s)
PKCS#11 library linked in from /usr/lib/libpkcs11.so
# </pre></li>
<li><b>Solaris 10 1/06: In this release, you can store keys in the
softtoken keystore.</b><p>For information on the keystore that is provided by the Solaris cryptographic framework,
see the <a href="http://docs.sun.com/doc/819-2240/cryptoadm-1m?a=view"><tt>cryptoadm</tt>(1M)</a> man page. For an example of using the keystore, see
<a href="#ike-task-46">Example&nbsp;23-9</a>.</p></li></ol>

<a name="ike-task-11"></a><h4>How to Configure IKE to Find the Sun Crypto Accelerator 4000 Board</h4><a name="indexterm-2173"></a><a name="indexterm-2174"></a><a name="indexterm-2175"></a><a name="indexterm-2176"></a><a name="indexterm-2177"></a><h6>Before You Begin</h6><p>The following procedure assumes that a Sun Crypto Accelerator 4000 board is
attached to the system. The procedure also assumes that the software for the
board has been installed and that the software has been configured. For instructions,
see the <i>Sun Crypto Accelerator 4000 Board Installation and User's Guide</i>. The guide is available from the <a href="http://www.sun.com/products-n-solutions/hardware/docs">http://www.sun.com/products-n-solutions/hardware/docs</a> web site, under Network
and Security Products.</p><ol>
<li><b>On the system console, assume the Primary Administrator role or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p>
<hr><p><b>Note - </b>Logging in remotely exposes security-critical traffic to eavesdropping. Even if you somehow protect
the remote login, the security of the system is reduced to the security
of the remote login session.</p>
<hr>
</li>
<li><b>Check that the PKCS&nbsp;#11 library is linked.</b><p>IKE uses the library's routines to handle key generation and key storage on
the Sun Crypto Accelerator 4000 board. Type the following command to determine
whether a PKCS&nbsp;#11 library has been linked:</p><pre>$ <tt><b>ikeadm get stats</b></tt>
&hellip;
PKCS#11 library linked in from /usr/lib/libpkcs11.so
$</pre>
<hr><p><b>Note - </b>The Sun Crypto Accelerator 4000 board supports keys up to 2048 bits
for RSA. For DSA, this board supports keys up to 1024 bits.</p>
<hr>
</li>
<li><b><a name="indexterm-2178"></a><a name="indexterm-2179"></a><a name="indexterm-2180"></a><a name="indexterm-2181"></a>Find the token ID for the attached Sun Crypto Accelerator 4000 board.</b><pre>$ <tt><b>ikecert tokens</b></tt>
Available tokens with library "/usr/lib/libpkcs11.so":

"Sun Metaslot                     "</pre><p>The library returns a token ID, also called a <a href="glossary-1.html#glossary-124">keystore name</a>, of 32
characters. In this example, you could use the <tt>Sun Metaslot</tt> token with the <tt>ikecert</tt> commands
to store and to accelerate IKE keys.</p><p>For instructions on how to use the token, see <a href="ike-task-25.html#ike-task-14">How to Generate and Store Public Key Certificates on Hardware</a>.</p><p>The trailing spaces are automatically padded by the <tt>ikecert</tt> command.</p></li></ol><a name="ike-task-46"></a>Example&nbsp;23-9 Finding and Using Metaslot Tokens<a name="indexterm-2182"></a><a name="indexterm-2183"></a><p>Tokens can be stored on disk, on an attached board, or in
the softtoken keystore that the Solaris encryption framework provides. The softtoken keystore token ID
might resemble the following.</p><pre>$ <tt><b>ikecert tokens</b></tt>
Available tokens with library "/usr/lib/libpkcs11.so":

"Sun Metaslot                   "</pre><p>To create a passphrase for the softtoken keystore, see the <a href="http://docs.sun.com/doc/819-2239/pktool-1?a=view"><tt>pktool</tt>(1)</a> man
page.</p><p>A command that resembles the following would add a certificate to the softtoken
keystore. <tt>Sun.Metaslot.cert</tt> is a file that contains the CA certificate:</p><pre># <tt><b>ikecert certdb -a -T "Sun Metaslot" &lt; Sun.Metaslot.cert</b></tt>
Enter PIN for PKCS#11 token: Type user:passphrase</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ike-task-17.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ike-task-19.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

