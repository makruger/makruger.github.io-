<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Preparing Your Network for the DHCP Service (Task Map) - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chap2-26.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter2-29.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Preparing Your Network for the DHCP Service (Task Map)</a></p>
</div>
<p class="toc level3"><a href="chapter2-29.html">Making Decisions for Your DHCP Server Configuration (Task Map)</a></p>
<p class="toc level3"><a href="chapter2-30.html">Making Decisions for IP Address Management (Task Map)</a></p>
<p class="toc level3"><a href="dhcp-plan-1.html">Planning for Multiple DHCP Servers</a></p>
<p class="toc level3"><a href="dhcp-plan-2.html">Planning DHCP Configuration of Your Remote Networks</a></p>
<p class="toc level3"><a href="chapter2-34.html">Selecting the Tool for Configuring DHCP</a></p>
<p class="toc level2 tocsp"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter2-4"></a><h3>Preparing Your Network for the DHCP Service (Task Map)</h3>
<p><a name="indexterm-1369"></a><a name="indexterm-1370"></a>Before you set up your network to use DHCP, you must collect
information to help you make decisions for configuring one or more servers. Use
the following task map to identify the tasks for preparing your network for
DHCP.</p><a name="indexterm-1371"></a><table><col width="33*"><col width="33*"><col width="33*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Map your network topology.</p></td>
<td align="left" valign="top" scope="row"><p>Determine and locate the services that are available
on the network.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#chapter2-5">Mapping Your Network Topology</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Determine the number of DHCP servers you need.</p></td>
<td align="left" valign="top" scope="row"><p>Use the expected
number of DHCP clients as a basis for determining the number of DHCP
servers you need.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#dhcp-plan-3">Determining the Number of DHCP Servers</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Update system files and <tt>netmasks</tt> table.</p></td>
<td align="left" valign="top" scope="row"><p>Reflect the network topology accurately.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#chapter2-7">Updating System Files and Netmask Tables</a></p></td>
</tr>
</table>

<a name="chapter2-5"></a><h4>Mapping Your Network Topology</h4>
<p><a name="indexterm-1372"></a><a name="indexterm-1373"></a>If you have not already done so, you should map the physical
structure of your network. Indicate the location of routers and clients, and the
location of servers that provide network services. This map of your network topology can
help you determine which server to use for the DHCP service. The
map can also help you determine the configuration information that the DHCP server can
provide to clients.</p><p>See <a href="ipplan-1.html">Chapter&nbsp;2, Planning an IPv4 Addressing Scheme (Tasks</a> for more information about planning your network.</p><p>The DHCP configuration process can gather some network information from the server's system
and network files. <a href="#chapter2-7">Updating System Files and Netmask Tables</a> discusses these files. However, you might want to give
clients other service information, which you must enter into the server's macros. As
you examine your network topology, record the IP addresses of any servers you
want your clients to know about. The following servers, for example, might provide
services on your network. The DHCP configuration does not discover these servers.</p>
<ul><li><p>Time server</p></li>
<li><p>Log server</p></li>
<li><p>Print server</p></li>
<li><p>Install server</p></li>
<li><p>Boot server</p></li>
<li><p>Web proxy server</p></li>
<li><p>Swap server</p></li>
<li><p>X Window font server</p></li>
<li><p>Trivial File Transfer Protocol (TFTP) server</p></li></ul>


<a name="chapter2-6"></a><h5>Network Topology to Avoid</h5>
<p>In some IP network environments, several local area networks (LANs) share the same
network hardware media. The networks may use multiple network hardware interfaces or multiple
logical interfaces. DHCP does not work well in this kind of shared media
network. When multiple LANs run across the same physical network, a DHCP client's
request arrives on all network hardware interfaces. This effect makes the client appear
to be attached to all of the IP networks simultaneously.</p><p>DHCP must be able to determine the address of a client's network
in order to assign an appropriate IP address to the client. If more
than one network is present on the hardware media, the server cannot determine
the client's network. The server cannot assign an IP address without knowing the network
number.</p><p>You can use DHCP on only one of the networks. If one
network does not suit your DHCP needs, you must reconfigure the networks. You
should consider the following suggestions:</p>
<ul><li><p>Use a variable length subnet mask (VLSM) on your subnets to make better use of the IP address space you have. You may not need to run multiple networks on the same physical network. See the <a href="http://docs.sun.com/doc/819-2251/netmasks-4?a=view"><tt>netmasks</tt>(4)</a> man page for information about implementing variable length subnetting. For more detailed information about Classless Inter-Domain Routing (CIDR) and VLSM, see <a href="http://www.ietf.org/rfc/rfc1519.txt">http://www.ietf.org/rfc/rfc1519.txt</a>.</p></li>
<li><p>Configure the ports on your switches to assign devices to different physical LANs. This technique preserves the mapping of one LAN to one IP network, required for Solaris DHCP. See the documentation for the switch for information about port configuration.</p></li></ul>


<a name="dhcp-plan-3"></a><h4>Determining the Number of DHCP Servers</h4>
<p><a name="indexterm-1374"></a>The data store option that you choose has a direct effect on
the number of servers you must have to support your DHCP clients. The
following table shows the maximum number of DHCP and BOOTP clients that can
be supported by one DHCP server for each data store.</p><a name="dhcp-plan-tbl-3"></a><h6>Table&nbsp;13-1 Estimated Maximum Number of Clients Supported by One DHCP Server</h6><table><col width="32.98*"><col width="67.02*"><tr><th align="left" valign="top" scope="column"><p>Data Store Type</p></th>
<th align="left" valign="top" scope="column"><p>Maximum Number
of Clients Supported</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Text files</p></td>
<td align="left" valign="top" scope="row"><p>10,000</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>NIS+</p></td>
<td align="left" valign="top" scope="row"><p>40,000</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Binary files</p></td>
<td align="left" valign="top" scope="row"><p>100,000</p></td>
</tr>
</table><p>This maximum number is a general guideline, not an absolute number. A DHCP
server's client capacity depends greatly on the number of transactions per second that
the server must process. Lease times and usage patterns have a significant impact
on the transaction rate. For example, suppose leases are set to 12 hours
and users turn their systems off at night. If many users turn on
their systems at the same time in the morning, the server must
handle transaction peaks as many clients request leases simultaneously. The DHCP server can support
fewer clients in such an environment. The DHCP server can support more clients
in an environment with longer leases, or an environment that consists of constantly
connected devices such as cable modems.</p><p>The section <a href="chapter2-29.html#chapter2-39">Choosing the DHCP Data Store</a> compares the types of data stores.</p>

<a name="chapter2-7"></a><h4>Updating System Files and Netmask Tables</h4>
<p>During DHCP configuration, the DHCP tools scan various system files on your server
for information that can be used to configure the server.</p><p>You must be sure the information in the system files is current
before you run DHCP Manager or <tt>dhcpconfig</tt> to configure your server. If you notice
errors after you configure the server, use DHCP Manager or <tt>dhtadm</tt> to
modify the macros on the server.</p><p><a name="indexterm-1375"></a>The following table lists some of the information gathered during DHCP server configuration,
and the sources for the information. Be sure this information is set correctly
on the server before you configure DHCP on the server. If you make
changes to the system files after you configure the server, you should reconfigure
the service to reflect these changes.</p><a name="chapter2-tbl-8"></a><h6>Table&nbsp;13-2 Information Used for DHCP Configuration</h6><table><col width="115*"><col width="119*"><col width="162*"><tr><th align="left" valign="top" scope="column"><p>Information</p></th>
<th align="left" valign="top" scope="column"><p>Source</p></th>
<th align="left" valign="top" scope="column"><p>Comments</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Time zone</p></td>
<td align="left" valign="top" scope="row"><p>System date, time zone settings</p></td>
<td align="left" valign="top" scope="row"><p>The date
and time zone are initially set during Solaris installation. You can change the
date by using the <tt>date</tt> command. You can change the time zone by
editing the <tt>/etc/default/init</tt> file to set the <tt>TZ</tt> environment variable. See the <a href="http://docs.sun.com/doc/819-2251/uc-timezone-4?a=view"><tt>TIMEZONE</tt>(4)</a>
man page for more information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>DNS parameters</p></td>
<td align="left" valign="top" scope="row"><p><tt>/etc/resolv.conf</tt> </p></td>
<td align="left" valign="top" scope="row"><p>The DHCP server uses the <tt>/etc/resolv.conf</tt> file to
obtain DNS parameters such as the DNS domain name and DNS server
addresses. See <a href="http://docs.sun.com/doc/819-3194"><i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a> or the <a href="http://docs.sun.com/doc/819-2251/resolv.conf-4?a=view"><tt>resolv.conf</tt>(4)</a> man page for more information about <tt>resolv.conf</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>NIS or
NIS+ parameters</p></td>
<td align="left" valign="top" scope="row"><p>System domain name, <tt>nsswitch.conf</tt>, NIS or NIS+</p></td>
<td align="left" valign="top" scope="row"><p>The DHCP server uses the
<tt>domainname</tt> command to obtain the domain name of the server system. The <tt>nsswitch.conf</tt>
file tells the server where to look for domain-based information. If the server system
is an NIS or NIS+ client, the DHCP server performs a query
to get NIS or NIS+ server IP addresses. See the <a href="http://docs.sun.com/doc/819-2251/nsswitch.conf-4?a=view"><tt>nsswitch.conf</tt>(4)</a> man page
for more information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Default router</p></td>
<td align="left" valign="top" scope="row"><p>System routing tables, user prompt</p></td>
<td align="left" valign="top" scope="row"><p>The DHCP server searches the
network routing tables to find the default router for clients that are attached
to the local network. For clients not on the same network, the DHCP
server must prompt you for the information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Subnet mask</p></td>
<td align="left" valign="top" scope="row"><p>Network interface, <tt>netmasks</tt> table</p></td>
<td align="left" valign="top" scope="row"><p>The DHCP
server looks to its own network interfaces to determine the netmask and broadcast
address for local clients. If the request was forwarded by a relay agent,
the server obtains the subnet mask in the <tt>netmasks</tt> table on the relay
agent's network.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Broadcast address</p></td>
<td align="left" valign="top" scope="row"><p>Network interface, <tt>netmasks</tt> table</p></td>
<td align="left" valign="top" scope="row"><p>For the local network, the DHCP server
obtains the broadcast address by querying the network interface. For remote networks, the
server uses the BOOTP relay agent's IP address and the remote network's netmask
to calculate the broadcast address for the network.</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chap2-26.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter2-29.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

