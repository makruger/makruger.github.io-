<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>IPQoS Configuration File - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipqos-reference-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipqos-reference-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level3"><a href="ipqos-reference-2.html">IPQoS Architecture and the Diffserv Model</a></p>
<div class="onpage">
<p class="toc level3"><a href="">IPQoS Configuration File</a></p>
</div>
<p class="toc level3"><a href="ipqos-reference-30.html"><tt>ipqosconf</tt> Configuration Utility</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipqos-reference-22"></a><h3>IPQoS Configuration File</h3>
<p><a name="indexterm-3192"></a>This section contains full details about the parts of the IPQoS configuration file.
The IPQoS boot-time activated policy is stored in the file <tt>/etc/inet/ipqosinit.conf</tt>. Although you
can edit this file, the best practice for a new IPQoS system is
to create a configuration file with a different name. Tasks for applying and
debugging an IPQoS configuration are in <a href="ipqos-policy-planning-1.html">Chapter&nbsp;34, Creating the IPQoS Configuration File (Tasks)</a>.</p><p>The syntax of the IPQoS configuration file is shown in <a href="#ipqos-reference-ex-23">Example&nbsp;37-3</a>. The
example uses the following conventions:</p>
<ul><li><p><tt>computer-style type</tt> &ndash; Syntactical information that is provided to explain the parts of the configuration file. You do not type any text that appears in computer-style type.</p></li>
<li><p><tt><b>bold type</b></tt> &ndash; Literal text that you must type in the IPQoS configuration file. For example, you must always begin the IPQoS configuration file with <tt><b>fmt_version</b></tt>.</p></li>
<li><p><a name="indexterm-3193"></a><i>italic type</i> &ndash; Variable text that you replace with descriptive information about your configuration. For example, you must always replace <i>action-name</i> or <i>module-name</i> with information that pertains to your configuration.</p></li></ul>
<a name="ipqos-reference-ex-23"></a>Example&nbsp;37-3 Syntax of the IPQoS Configuration File<pre>file_format_version ::= fmt_version <i>version</i>

action_clause ::= action {
     name <i>action-name</i>
     module <i>module-name</i>
     <i>params-clause</i> |  ""
     <i>cf-clauses</i>
}
action_name ::= <i>string</i>
module_name ::= ipgpc | dlcosmk | dscpmk | tswtclmt | tokenmt | flowacct 

params_clause ::= params { 
     <i>parameters</i>
     <i>params-stats</i> |   ""
     }
parameters ::=    <i>prm-name-value parameters</i> |  ""
prm_name_value ::= <i>param-name param-value</i>

params_stats ::= global-stats <i>boolean</i>

cf_clauses ::= <i>class-clause cf-clauses</i> |
               <i>filter-clause cf-clauses</i> | ""

class_clause ::= class {
     name <i>class-name</i>
     next_action <i>next-action-name</i>
     <i>class-stats</i> | ""
                 }
class_name  ::= <i>string</i>
next_action_name  ::= <i>string</i>
class_stats ::= enable_stats <i>boolean</i>
boolean ::= TRUE | FALSE

filter_clause ::= filter {
                name <i>filter-name</i>
                class <i>class&ndash;name</i>
                <i>parameters</i>
                }
filter_name ::= <i>string</i></pre><p>The remaining text describes each major part of the IPQoS configuration file.</p>

<a name="ipqos-reference-240"></a><h4><tt>action</tt> Statement</h4>
<p><a name="indexterm-3194"></a><a name="indexterm-3195"></a>You use <tt>action</tt> statements to invoke the various IPQoS modules that are described
in <a href="ipqos-reference-2.html">IPQoS Architecture and the Diffserv Model</a>. </p><p>When you create the IPQoS configuration file, you must always begin with the
version number. Then, you must add the following <tt>action</tt> statement to invoke the
classifier:</p><pre>fmt_version 1.0

action {
    module ipgpc
    name ipgpc.classify
}</pre><p>Follow the classifier <tt>action</tt> statement with a <tt>params</tt> clause or a <tt>class</tt>
clause.</p><p><a name="indexterm-3196"></a>Use the following syntax for all other <tt>action</tt> statements:</p><pre>action {
name <i>action-name</i>
module <i>module-name</i>
<i>params-clause</i> | ""
<i>cf-clauses</i>
}</pre><dl><dt><tt>name</tt> <i>action_name</i></dt>
<dd><p>Assigns a name to the action.</p></dd>
<dt><tt>module</tt> <i>module_name</i></dt>
<dd><p>Identifies the IPQoS module to be invoked, which must be one of the modules in <a href="#ipqos-reference-tbl-2">Table&nbsp;37-5</a>.</p></dd>
<dt><i>params_clause</i></dt>
<dd><p>Can be parameters for the classifier to process, such as global statistics or the next action to process.</p></dd>
<dt><i>cf_clauses</i></dt>
<dd><p>A set of zero or more <tt>class</tt> clauses or <tt>filter</tt> clauses</p></dd>
</dl>


<a name="ipqos-reference-260"></a><h4>Module Definitions</h4>
<p><a name="indexterm-3197"></a>The module definition indicates which module is to process the parameters in the
<tt>action</tt> statement. The IPQoS configuration file can include the following modules.</p><a name="ipqos-reference-tbl-2"></a><h6>Table&nbsp;37-5 IPQoS Modules</h6><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Module Name</p></th>
<th align="left" valign="top" scope="column"><p>Definition</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ipgpc</tt></p></td>
<td align="left" valign="top" scope="row"><p>IP classifier</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>dscpmk</tt></p></td>
<td align="left" valign="top" scope="row"><p>Marker
to be used to create DSCPs in IP packets</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>dlcosmk</tt></p></td>
<td align="left" valign="top" scope="row"><p>Marker to be used
with VLAN devices</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>tokenmt</tt></p></td>
<td align="left" valign="top" scope="row"><p>Token bucket meter</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>tswtclmt</tt></p></td>
<td align="left" valign="top" scope="row"><p>Time-sliding window meter</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>flowacct</tt></p></td>
<td align="left" valign="top" scope="row"><p>Flow-accounting module</p></td>
</tr>
</table>

<a name="ipqos-reference-270"></a><h4><tt>class</tt> Clause</h4>
<p><a name="indexterm-3198"></a><a name="indexterm-3199"></a>You define a <tt>class</tt> clause for each class of traffic. </p><p>Use this syntax to define the remaining classes in the IPQoS configuration:</p><pre>class {
     
      name <i>class-name</i>
      next_action <i>next-action-name</i>
}      </pre><p><a name="indexterm-3200"></a>To enable statistics collection on a particular class, you must first enable global
statistics in the <tt>ipgpc.classify</tt> <tt>action</tt> statement. For more information, refer to <a href="#ipqos-reference-240"><tt>action</tt> Statement</a>.</p><p><a name="indexterm-3201"></a>Use the <tt>enable_stats TRUE</tt> statement whenever you want to turn on statistics collection for
a class. If you do not need to gather statistics for a class,
you can specify <tt>enable_stats FALSE</tt>. Alternatively, you can eliminate the <tt>enable_stats</tt> statement.</p><p>Traffic on an IPQoS-enabled network that you do not specifically define is relegated
to the <b>default class</b>.</p>

<a name="ipqos-reference-28"></a><h4><tt>filter</tt> Clause</h4>
<p><a name="indexterm-3202"></a><b>Filters</b> are made up of selectors that group traffic flows into classes. These
selectors specifically define the criteria to be applied to traffic of the class
that was created in the class clause. If a packet matches all selectors
of the highest-priority filter, the packet is considered to be a member of
the filter's class. For a complete list of selectors that you can use
with the <tt>ipgpc</tt> classifier, refer to <a href="ipqos-reference-2.html#ipqos-reference-tbl-32">Table&nbsp;37-1</a>.</p><p><a name="indexterm-3203"></a>You define filters in the IPQoS configuration file by using a <b>filter clause</b>,
which has the following syntax:</p><pre>filter { 
       name <i>filter-name</i>
       class <i>class-name</i> 
       <i>parameters (selectors)</i>
       }</pre>

<a name="ipqos-reference-29"></a><h4><tt>params</tt> Clause</h4>
<p><a name="indexterm-3204"></a>The <tt>params</tt> clause contains processing instructions for the module that is defined in
the action statement. Use the following syntax for the <tt>params</tt> clause:</p><pre>params {
           <i>parameters</i>
           <i>params-stats |</i> ""
       }</pre><p><a name="indexterm-3205"></a>In the <tt>params</tt> clause, you use parameters that are applicable to the module.</p><p>The <i>params-stats</i> value in the <tt>params</tt> clause is either <tt>global_stats TRUE</tt> or <tt>global_stats FALSE</tt>. The <tt>global_stats TRUE</tt>
instruction turns on UNIX style statistics for the <tt>action</tt> statement where global statistics
is invoked. You can view the statistics by using the <tt>kstat</tt> command. You must
enable <tt>action</tt> statement statistics before you can enable per-class statistics.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipqos-reference-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipqos-reference-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

