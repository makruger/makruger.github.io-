<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>IPMP Addressing - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyprl.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eobra.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level3"><a href="chapter1-2.html">Why You Should Use IPMP</a></p>
<p class="toc level3"><a href="eyprl.html">Basic Requirements of IPMP</a></p>
<div class="onpage">
<p class="toc level3"><a href="">IPMP Addressing</a></p>
</div>
<p class="toc level3"><a href="eobra.html">IPMP Interface Configurations</a></p>
<p class="toc level3"><a href="emqqq.html">IPMP Failure Detection and Recovery Features</a></p>
<p class="toc level3"><a href="esqdy.html">IPMP and Dynamic Reconfiguration</a></p>
<p class="toc level2 tocsp"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="emqwq"></a><h3>IPMP Addressing</h3>
<p>You can configure IPMP failure detection on both IPv4 networks and dual-stack, IPv4
and IPv6 networks. Interfaces that are configured with IPMP support two types of
addresses: data addresses and test addresses.</p>

<a name="emqwg"></a><h4>Data Addresses</h4>
<a name="indexterm-2845"></a><a name="indexterm-2846"></a><a name="indexterm-2847"></a><p><b>Data addresses</b> are the conventional IPv4 and IPv6 addresses that are assigned to an
interface of a NIC at boot time or manually, through the <tt>ifconfig</tt> command.
The standard IPv4 and, if applicable, IPv6 packet traffic through an interface is
considered to be <b>data traffic</b>.</p>

<a name="emqvv"></a><h4>Test Addresses</h4>
<a name="indexterm-2848"></a><a name="indexterm-2849"></a><p><a name="indexterm-2850"></a><b>Test addresses</b> are IPMP-specific addresses that are used by the <tt>in.mpathd</tt> daemon. For an
interface to use probe-based failure and repair detection, that interface must be configured with
at least one test address.</p>
<hr><p><b>Note - </b>You need to configure test addresses only if you want to use
probe-based failure detection.</p>
<hr>
<p><a name="indexterm-2851"></a><a name="indexterm-2852"></a><a name="indexterm-2853"></a><a name="indexterm-2854"></a>The <tt>in.mpathd</tt> daemon uses test addresses to exchange ICMP probes, also called <b>probe traffic</b>,
with other targets on the IP link. Probe traffic helps to determine the
status of the interface and its NIC, including whether an interface has failed.
The probes verify that the send and receive path to the interface is
working correctly. </p><p>Each interface can be configured with an IP test address. For an
interface on a dual-stack network, you can configure an IPv4 test address, an
IPv6 test address, or both IPv4 and IPv6 test addresses.</p><p>After an interface fails, the test addresses remain on the failed interface so
that <tt>in.mpathd</tt> can continue to send probes to check for subsequent repair. You
must specifically configure test addresses so that applications do not accidentally use them.
For more information, refer to <a href="#emycj">Preventing Applications From Using Test Addresses</a>.</p><p>For more information on probe-based failure detection, refer to <a href="emqqq.html#emqra">Probe-Based Failure Detection</a>.</p>

<a name="emqyk"></a><h5>IPv4 Test Addresses</h5>
<p><a name="indexterm-2855"></a><a name="indexterm-2856"></a><a name="indexterm-2857"></a>In general, you can use any IPv4 address on your subnet as
a test address. IPv4 test addresses do not need to be routeable. Because
IPv4 addresses are a limited resource for many sites, you might want to
use non-routeable RFC 1918 private addresses as test addresses. Note that the <tt>in.mpathd</tt>
daemon exchanges only ICMP probes with other hosts on the same subnet as
the test address.  If you do use RFC 1918-style test addresses, be
sure to configure other systems, preferably routers, on the IP link with addresses
on the appropriate RFC 1918 subnet. The <tt>in.mpathd</tt> daemon can then successfully exchange probes
with target systems.  </p><p>The IPMP examples use RFC 1918 addresses from the <tt>192.168.0/24</tt> network as IPv4
test addresses.  For more information about RFC 1918 private addresses, refer to
<a href="http://www.ietf.org/rfc/rfc1918.txt?number=1918">RFC 1918, Address Allocation for Private Internets.</a></p><p>To configure IPv4 test addresses, refer to the task <a href="deploynetmult-57.html#emqul">How to Configure an IPMP Group With Multiple Interfaces</a>.</p>

<a name="emqxv"></a><h5>IPv6 Test Addresses</h5>
<a name="indexterm-2858"></a><a name="indexterm-2859"></a><p>The only valid IPv6 test address is the link-local address of a
physical interface. You do not need a separate IPv6 address to serve as
an IPMP test address. The IPv6 link-local address is based on the Media
Access Control (MAC ) address of the interface. Link-local addresses are automatically configured when
the interface becomes IPv6-enabled at boot time or when the interface is manually
configured through <tt>ifconfig</tt>. </p><p>To identify the link-local address of an interface, run the <tt>ifconfig</tt> <i>interface</i>
command on an IPv6-enabled node. Check the output for the address that begins
with the prefix <tt>fe80</tt>, the link-local prefix. The <tt>NOFAILOVER</tt> flag in the following
<tt>ifconfig</tt> output indicates that the link-local address <tt>fe80::a00:20ff:feb9:17fa/10</tt> of  the <tt>hme0</tt>
interface is used as the test address. </p><pre>hme0: flags=a000841&lt;UP,RUNNING,MULTICAST,IPv6,NOFAILOVER> mtu 1500 index 2
            inet6 fe80::a00:20ff:feb9:17fa/10 </pre><p>For more information on link-local addresses, refer to <a href="ipv6-overview-10.html#ipv6-overview-15">Link-Local Unicast Address</a>.</p><p>When an IPMP group has both IPv4 and IPv6 plumbed on all
the group's interfaces, you do not need to configure separate IPv4 test addresses.
The <tt>in.mpathd</tt> daemon can use the IPv6 link-local addresses as test addresses.</p><p>To create an IPv6 test address, refer to the task <a name="indexterm-2860"></a><a href="deploynetmult-57.html#emqul">How to Configure an IPMP Group With Multiple Interfaces</a>.</p>

<a name="emycj"></a><h4>Preventing Applications From Using Test Addresses</h4>
<a name="indexterm-2861"></a><p><a name="indexterm-2862"></a><a name="indexterm-2863"></a>After you have configured a test address, you need to ensure that this
address is not used by applications. Otherwise, if the interface fails, the application
is no longer reachable because test addresses do not fail over during the
failover operation. To ensure that IP does not choose the test address for
normal applications, mark the test address as <tt>deprecated</tt>.</p><p>IPv4 does not use a deprecated address as a source address for
any communication, unless an application explicitly binds to the address. The <tt>in.mpathd</tt> daemon explicitly
binds to such an address in order to send and receive probe
traffic.</p><p>Because IPv6 link-local addresses are usually not present in a name service, DNS
and NIS applications do not use link-local addresses for communication. Consequently, you must
not mark IPv6 link-local addresses as <tt>deprecated</tt>.</p><p>IPv4 test addresses should not be placed in the DNS and NIS
name service tables. In IPv6, link-local addresses  are not normally placed in
the name service tables.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyprl.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eobra.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

