<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Solaris 10 IPv6 Implementation - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipv6-ref-81.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipv6-ref-34.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level2"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level3"><a href="ipv6-ref-77.html">IPv6 Addressing Formats Beyond the Basics</a></p>
<p class="toc level3"><a href="ipv6-ref-2.html">IPv6 Packet Header Format</a></p>
<p class="toc level3"><a href="ipv6-ref-81.html">Dual-Stack Protocols</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Solaris 10 IPv6 Implementation</a></p>
</div>
<p class="toc level3"><a href="ipv6-ref-34.html">IPv6 Neighbor Discovery Protocol</a></p>
<p class="toc level3"><a href="ipv6-ref-33.html">IPv6 Routing</a></p>
<p class="toc level3"><a href="ipv6-ref-47.html">IPv6 Tunnels</a></p>
<p class="toc level3"><a href="ipv6-ref-64.html">IPv6 Extensions to Solaris Name Services</a></p>
<p class="toc level3"><a href="ipv6-ref-71.html">NFS and RPC IPv6 Support</a></p>
<p class="toc level3"><a href="ipv6-ref-103.html">IPv6 Over ATM Support</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipv6-ref-83"></a><h3>Solaris 10 IPv6 Implementation</h3>
<p>This section describes the files, commands, and daemons that enable IPv6 in the
Solaris OS.</p>

<a name="ipv6-ref-72"></a><h4>IPv6 Configuration Files</h4>
<p>This section describes the configuration files that are part of an IPv6 implementation:</p>
<ul><li><p><a href="#ipv6-ref-10"><tt>ndpd.conf</tt> Configuration File</a></p></li>
<li><p><a href="#ipv6-ref-73">IPv6 Interface Configuration File</a></p></li>
<li><p><a href="#ipv6-ref-16"><tt>/etc/inet/ipaddrsel.conf</tt> Configuration File</a></p></li></ul>


<a name="ipv6-ref-10"></a><h5><tt>ndpd.conf</tt> Configuration File</h5>
<a name="indexterm-1190"></a><a name="indexterm-1191"></a><a name="indexterm-1192"></a><p>The <tt>/etc/inet/ndpd.conf</tt> file is used to configure options that are used by the
<tt>in.ndpd</tt> Neighbor Discovery daemon. For a router, you primarily use <tt>ndpd.conf</tt> to configure the
site prefix to be advertised to the link. For a host, you
use <tt>ndpd.conf</tt> to turn off address autoconfiguration or to configure temporary addresses.</p><p>The next table shows the keywords that are used in the <tt>ndpd.conf</tt>
file.</p><a name="ipv6-ref-tbl-84"></a><h6>Table&nbsp;11-2 <tt>/etc/inet/ndpd.conf</tt> Keywords</h6><table><col width="85.00*"><col width="311.00*"><tr><th align="left" valign="top" scope="column"><p>Variable</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ifdefault</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the router behavior for all interfaces. Use the following syntax to set
router parameters and corresponding values:</p><p><tt>ifdefault [<i>variable-value</i>]</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>prefixdefault</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the default behavior for prefix advertisements. Use
the following syntax to set router parameters and corresponding values:</p><p><tt>prefixdefault [<i>variable-value</i>]</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>if</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets per-interface parameters. Use
the following syntax:</p><p><tt>if <i>interface</i> [<i>variable-value</i>]</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>prefix</tt></p></td>
<td align="left" valign="top" scope="row"><p>Advertises per-interface prefix information. Use the following syntax:</p><p><tt>prefix <i>prefix</i>/<i>length</i> <i>interface</i> [<i>variable-value</i>]</tt></p></td>
</tr>
</table><p>In the <tt>ndpd.conf</tt> file, you use the keywords in this table with a
set of router configuration variables. These variables are defined in detail in <a href="http://www.ietf.org/rfc/rfc2461.txt?number=2461">RFC 2461, Neighbor Discovery for IP Version 6 (IPv6)</a>.
</p><p>The next table shows the variables for configuring an interface, along with brief
definitions.<a name="indexterm-1193"></a><a name="indexterm-1194"></a><a name="indexterm-1195"></a></p><a name="ipv6-ref-tbl-105"></a><h6>Table&nbsp;11-3 <tt>/etc/inet/ndpd.conf</tt> Interface Configuration Variables</h6><table><col width="38.75*"><col width="34.97*"><col width="76.28*"><tr><th align="left" valign="top" scope="column"><p>Variable</p></th>
<th align="left" valign="top" scope="column"><p>Default</p></th>
<th align="left" valign="top" scope="column"><p>Definition</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvRetransTimer</tt></p></td>
<td align="left" valign="top" scope="row"><p>0</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the value in the Retrans Timer field in the advertisement messages sent
by the router.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvCurHopLimit</tt></p></td>
<td align="left" valign="top" scope="row"><p>Current diameter of the Internet</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the value to be placed
in the current hop limit in the advertisement messages sent by the router.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvDefaultLifetime</tt></p></td>
<td align="left" valign="top" scope="row"><p>3
+ <tt>MaxRtrAdvInterval</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the default lifetime of the router advertisements.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvLinkMTU</tt></p></td>
<td align="left" valign="top" scope="row"><p>0</p></td>
<td align="left" valign="top" scope="row"><p>Specifies a maximum transmission
unit (MTU) value to be sent by the router. The zero indicates that
the router does not specify MTU options.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvManaged Flag</tt></p></td>
<td align="left" valign="top" scope="row"><p>False</p></td>
<td align="left" valign="top" scope="row"><p>Indicates the value to be placed
in the Manage Address Configuration flag in the router advertisement.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvOtherConfigFlag</tt></p></td>
<td align="left" valign="top" scope="row"><p>False</p></td>
<td align="left" valign="top" scope="row"><p>Indicates the value to
be placed in the Other Stateful Configuration flag in the router advertisement.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvReachableTime</tt></p></td>
<td align="left" valign="top" scope="row"><p>0</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the
value in the Reachable Time field in the advertisement messages sent by the
router.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvSendAdvertisements</tt></p></td>
<td align="left" valign="top" scope="row"><p>False</p></td>
<td align="left" valign="top" scope="row"><p>Indicates whether the node should send out advertisements and respond to router solicitations.
You need to explicitly set this variable to &ldquo;TRUE&rdquo; in the <tt>ndpd.conf</tt> file
to turn on router advertisement functions. For more information, refer to <a href="ipv6-config-tasks-5.html#ipv6-config-tasks-21">How to Configure an IPv6-Enabled Router</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>DupAddrDetect</tt></p><p><tt>Transmits</tt></p></td>
<td align="left" valign="top" scope="row"><p>1</p></td>
<td align="left" valign="top" scope="row"><p>Defines the
number of consecutive neighbor solicitation  messages that the Neighbor Discovery protocol should
send during duplicate address detection of the local node's address.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>MaxRtrAdvInterval</tt></p></td>
<td align="left" valign="top" scope="row"><p>600 seconds</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the maximum
time to wait between sending unsolicited multicast advertisements.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>MinRtrAdvInterval</tt></p></td>
<td align="left" valign="top" scope="row"><p>200 seconds</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the minimum time to
wait between sending unsolicited multicast advertisements.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>StatelessAddrConf</tt></p></td>
<td align="left" valign="top" scope="row"><p>True</p></td>
<td align="left" valign="top" scope="row"><p>Controls whether the node configures its IPv6 address
through stateless address autoconfiguration. If False is declared in <tt>ndpd.conf</tt>, then the address must
be manually configured. For more information, refer to <a href="ipv6-config-tasks-6.html#ipv6-config-tasks-70">How to Configure a User-Specified IPv6 Token</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TmpAddrsEnabled</tt></p></td>
<td align="left" valign="top" scope="row"><p>False</p></td>
<td align="left" valign="top" scope="row"><p>Indicates whether a temporary address
should be created for all interfaces or for a particular interface of a
node. For more information, refer to <a href="ipv6-config-tasks-6.html#ipv6-config-tasks-106">How to Configure a Temporary Address</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TmpMaxDesyncFactor</tt></p></td>
<td align="left" valign="top" scope="row"><p>600 seconds</p></td>
<td align="left" valign="top" scope="row"><p>Specifies a random value to
be subtracted from the preferred lifetime variable <tt>TmpPreferredLifetime</tt> when <tt>in.ndpd</tt> starts. The purpose of
the <tt>TmpMaxDesyncFactor</tt> variable is to prevent all the systems on your network from
regenerating their temporary addresses at the same time. <tt>TmpMaxDesyncFactor</tt> allows you to change the
upper bound on that random value.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TmpPreferredLifetime</tt></p></td>
<td align="left" valign="top" scope="row"><p>False</p></td>
<td align="left" valign="top" scope="row"><p>Sets the preferred lifetime of a temporary
address. For more information, refer to <a href="ipv6-config-tasks-6.html#ipv6-config-tasks-106">How to Configure a Temporary Address</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TmpRegenAdvance</tt></p></td>
<td align="left" valign="top" scope="row"><p>False</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the lead time in advance of
address deprecation for a temporary address. For more information, refer to <a href="ipv6-config-tasks-6.html#ipv6-config-tasks-106">How to Configure a Temporary Address</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TmpValidLifetime</tt></p></td>
<td align="left" valign="top" scope="row"><p>False</p></td>
<td align="left" valign="top" scope="row"><p>Sets the
valid lifetime for a temporary address. For more information, refer to <a href="ipv6-config-tasks-6.html#ipv6-config-tasks-106">How to Configure a Temporary Address</a>.</p></td>
</tr>
</table><p>The next table shows the variables that are used for configuring IPv6 prefixes.<a name="indexterm-1196"></a><a name="indexterm-1197"></a><a name="indexterm-1198"></a></p><a name="ipv6-ref-tbl-106"></a><h6>Table&nbsp;11-4 <tt>/etc/inet/ndpd.conf</tt> Prefix Configuration Variables</h6><table><col width="27.37*"><col width="19.29*"><col width="52.33*"><tr><th align="left" valign="top" scope="column"><p>Variable</p></th>
<th align="left" valign="top" scope="column"><p>Default</p></th>
<th align="left" valign="top" scope="column"><p>Definition</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvAutonomousFlag</tt></p></td>
<td align="left" valign="top" scope="row"><p>True</p></td>
<td align="left" valign="top" scope="row"><p>Specifies
the value to be placed in the Autonomous Flag field in the Prefix
Information option. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvOnLinkFlag</tt></p></td>
<td align="left" valign="top" scope="row"><p>True</p><p></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the value to be placed in the on-link 
flag (&ldquo;L-bit&rdquo;) in the Prefix Information option.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvPreferredExpiration</tt></p></td>
<td align="left" valign="top" scope="row"><p>Not set</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the preferred expiration date of
the prefix.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvPreferredLifetime</tt></p></td>
<td align="left" valign="top" scope="row"><p>604800 seconds</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the value to be placed in the preferred lifetime
in the Prefix Information option. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvValidExpiration</tt></p></td>
<td align="left" valign="top" scope="row"><p>Not set</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the valid expiration date of the
prefix.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>AdvValidLifetime</tt></p></td>
<td align="left" valign="top" scope="row"><p>2592000 seconds</p></td>
<td align="left" valign="top" scope="row"><p>Specifies the valid lifetime of the prefix that is being configured.</p></td>
</tr>
</table><a name="eobnx"></a>Example&nbsp;11-1 <tt>/etc/inet/ndpd.conf</tt> File<p>The following example shows how the keywords and configuration variables are used in
the <tt>ndpd.conf</tt> file. Remove the comment (#) to activate the variable.</p><pre># ifdefault      [<i>variable-value</i> ]*
# prefixdefault [<i>variable-value</i> <i></i>]*
# if <i>ifname</i>   [<i>variable-value</i> <i></i>]*
# prefix <i>prefix</i>/<i>length</i> <i>ifname</i>
#
#  Per interface configuration variables
#
#DupAddrDetectTransmits
#AdvSendAdvertisements
#MaxRtrAdvInterval
#MinRtrAdvInterval
#AdvManagedFlag
#AdvOtherConfigFlag
#AdvLinkMTU
#AdvReachableTime
#AdvRetransTimer
#AdvCurHopLimit
#AdvDefaultLifetime
#
# Per Prefix:  AdvPrefixList configuration variables
#
#
#AdvValidLifetime
#AdvOnLinkFlag
#AdvPreferredLifetime
#AdvAutonomousFlag
#AdvValidExpiration
#AdvPreferredExpiration

ifdefault AdvReachableTime 30000 AdvRetransTimer 2000
prefixdefault AdvValidLifetime 240m AdvPreferredLifetime 120m

if qe0 AdvSendAdvertisements 1
prefix 2:0:0:56::/64 qe0
prefix fec0:0:0:56::/64 qe0

if qe1 AdvSendAdvertisements 1
prefix 2:0:0:55::/64 qe1
prefix fec0:0:0:56::/64 qe1

if hme1 AdvSendAdvertisements 1
prefix  2002:8192:56bb:1::/64 qfe0 

if hme1 AdvSendAdvertisements 1
prefix  2002:8192:56bb:2::/64 hme1</pre>

<a name="ipv6-ref-73"></a><h5>IPv6 Interface Configuration File</h5>
<a name="indexterm-1199"></a><a name="indexterm-1200"></a><a name="indexterm-1201"></a><a name="indexterm-1202"></a><a name="indexterm-1203"></a><p>IPv6 uses the <tt>/etc/hostname6.</tt><i>interface</i> file at start up to automatically define IPv6 logical
interfaces. When you select the IPv6 Enabled option during Solaris installation, the installation
program creates an <tt>/etc/hostname6.</tt><i>interface</i> file for the primary network interface, in addition to the
<tt>/etc/hostname.</tt><i>interface</i> file.</p><p>If more than one physical interface is detected during installation, you are prompted
as to whether you want to configure these interfaces. The installation program creates
IPv4 physical interface configuration files and IPv6 logical interface configuration files for each
additional interface that you indicate. </p><p>As with IPv4 interfaces, you can also configure IPv6 interfaces manually, after Solaris
installation. You create<tt>/etc/hostname6.</tt><i>interface</i> files for the new interfaces. For instructions for manually configuring
interfaces, refer to  <a href="fwawf.html">Chapter&nbsp;6, Administering Network Interfaces (Tasks)</a>.</p><p>The network interface configuration file names have the following syntax:</p><pre>hostname.<i>interface</i>
hostname6.<i>interface</i></pre><p>The <i>interface</i> variable has the following syntax:</p><pre><i>dev</i>[.<i>module</i>[.<i>module</i> ...]]<i>PPA</i></pre><dl><dt><i>dev</i></dt>
<dd><p>Indicates a network interface device. The device can be a physical network interface, such as <tt>eri</tt> or <tt>qfe</tt>, or a logical interface, such as a tunnel. See <a href="#ipv6-ref-73">IPv6 Interface Configuration File</a> for more details. </p></dd>
<dt><i>Module</i></dt>
<dd><p>Lists one or more <tt>STREAMS</tt> modules to be pushed onto the device when the device is plumbed.</p></dd>
<dt><i>PPA</i></dt>
<dd><p>Indicates the physical point of attachment.</p></dd>
</dl>
<p>The syntax [.[.]] is also accepted.</p><a name="eoboa"></a>Example&nbsp;11-2 IPv6 Interface Configuration Files<p>The following are examples of valid IPv6 configuration file names:</p><pre>hostname6.qfe0
hostname.ip.tun0
hostname.ip6.tun0
hostname6.ip6to4tun0
hostname6.ip.tun0
hostname6.ip6.tun0</pre>

<a name="ipv6-ref-16"></a><h5><tt>/etc/inet/ipaddrsel.conf</tt> Configuration File</h5>
<a name="indexterm-1204"></a><a name="indexterm-1205"></a><a name="indexterm-1206"></a><p>The <tt>/etc/inet/ipaddrsel.conf</tt> file contains the IPv6 default address selection policy table. When you
install the Solaris OS with IPv6 enabled, this file contains the contents that
are shown in <a href="#ipv6-admintasks-tbl-75">Table&nbsp;11-5</a>. </p><p>You can edit the contents of <tt>/etc/inet/ipaddrsel.conf</tt>. However, in most cases, you should
refrain from modifying this file. If modification is necessary, refer to the procedure
<a href="ipv6-admintasks-43.html#ipv6-admintasks-77">How to Administer the IPv6 Address Selection Policy Table</a>. For more information on <tt>ippaddrsel.conf</tt>, refer to <a href="#euaza">Reasons for Modifying the IPv6 Address Selection Policy Table</a> and the <a href="http://docs.sun.com/doc/819-2251/ipaddrsel.conf-4?a=view"><tt>ipaddrsel.conf</tt>(4)</a> man
page.</p>

<a name="ipv6-ref-74"></a><h4>IPv6-Related Commands</h4>
<p>This section describes commands that are added with the Solaris IPv6 implementation. The
text also describes modifications to existing commands to support IPv6. </p>

<a name="ipv6-ref-108"></a><h5><tt>ipaddrsel</tt> Command</h5>
<a name="indexterm-1207"></a><a name="indexterm-1208"></a><p>The <tt>ipaddrsel</tt> command enables you to modify the IPv6 default address selection policy
table.</p><p>The Solaris kernel uses the IPv6 default address selection policy table to perform
destination address ordering and source address selection for an IPv6 packet header. The
<tt>/etc/inet/ipaddrsel.conf</tt> file contains the policy table. </p><p>The following table lists the default address formats and their priorities for the
policy table. You can find technical details for IPv6 address selection in the
<a href="http://docs.sun.com/doc/819-2254/inet6-7p?a=view"><tt>inet6</tt>(7P)</a> man page.<a name="indexterm-1209"></a></p><a name="ipv6-admintasks-tbl-75"></a><h6>Table&nbsp;11-5 IPv6 Address Selection Policy Table</h6><table><col width="33*"><col width="33*"><col width="33*"><tr><th align="left" valign="top" scope="column"><p>Prefix</p></th>
<th align="left" valign="top" scope="column"><p>Precedence</p></th>
<th align="left" valign="top" scope="column"><p>Definition</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>::1/128</tt></p></td>
<td align="left" valign="top" scope="row"><p>50</p></td>
<td align="left" valign="top" scope="row"><p>Loopback</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>::/0</tt></p></td>
<td align="left" valign="top" scope="row"><p>40</p></td>
<td align="left" valign="top" scope="row"><p>Default</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>2002::/16</tt></p></td>
<td align="left" valign="top" scope="row"><p>30</p></td>
<td align="left" valign="top" scope="row"><p>6to4</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>::/96</tt></p></td>
<td align="left" valign="top" scope="row"><p>20</p></td>
<td align="left" valign="top" scope="row"><p>IPv4 Compatible</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>::ffff:0:0/96</tt></p></td>
<td align="left" valign="top" scope="row"><p>10</p></td>
<td align="left" valign="top" scope="row"><p>IPv4</p></td>
</tr>
</table><p>In this table, IPv6 prefixes (<tt>::1/128</tt> and <tt>::/0</tt>) take precedence over 6to4 addresses
(<tt>2002::/16</tt>) and IPv4 addresses (<tt>::/96</tt> and <tt>::ffff:0:0/96</tt>). Therefore, by default, the kernel selects the
global IPv6 address of the interface for packets going to another IPv6 destination.
The IPv4 address of the interface has a lower priority, particularly for packets
going to an IPv6 destination. Given the selected IPv6 source address, the kernel
also uses the IPv6 format for the destination address.</p>

<a name="euaza"></a><h5>Reasons for Modifying the IPv6 Address Selection Policy Table</h5>
<p>Under most instances, you do not need to change the IPv6 default
address selection policy table. If you do need to administer the policy table,
you use the <tt>ipaddrsel</tt> command.</p><p>You might want to modify the policy table under the following circumstances:</p>
<ul><li><p>If the system has an interface that is used for a 6to4 tunnel, you can give higher priority to 6to4 addresses.</p></li>
<li><p>If you want a particular source address to be used only in communications with a particular destination address, you can add these addresses to the policy table. Then, you can use <tt>ifconfig</tt> to flag these addresses as preferred. </p></li>
<li><p>If you want IPv4 addresses to take precedence over IPv6 addresses, you can change the priority of <tt>::ffff:0:0/96</tt> to a higher number.</p></li>
<li><p>If you need to assign a higher priority to deprecated addresses, you can add the deprecated address to the policy table. For example, site-local addresses are now deprecated in IPv6. These addresses have the prefix <tt>fec0::/10</tt>. You can change the policy table to give higher priority to site-local addresses.</p></li></ul>
<p>For details about the <tt>ipaddrsel</tt> command, refer to the <tt>ipaddrsel</tt>(1M) man page.</p>

<a name="ipv6-ref-17"></a><h5><tt>6to4relay</tt> Command</h5>
<p><a name="indexterm-1210"></a><a name="indexterm-1211"></a><b>6to4 tunneling</b> enables communication between isolated 6to4 sites. However, to transfer packets with a
native, non-6to4 IPv6 site, the 6to4 router must establish a tunnel with a
6to4 relay router.  The <b>6to4 relay router</b> then forwards the 6to4 packets to the IPv6
network and ultimately, to the native IPv6 site. If your 6to4-enabled site must
exchange data with a native IPv6 site, you use the <tt>6to4relay</tt> command to
enable the appropriate tunnel.</p><p>Because the use of relay routers is insecure, tunneling to a relay
router is disabled by default in the Solaris OS. Carefully consider the issues
that are involved in creating a tunnel to a 6to4 relay router before
deploying this scenario. For detailed information on 6to4 relay routers, refer to <a href="ipv6-ref-47.html#ipv6-ref-56">Considerations for Tunnels to a 6to4 Relay Router</a>. If
you decide to enable 6to4 relay router support, you can find the
related procedures in <a href="ipv6-config-tasks-16.html#ipv6-config-tasks-24">How to Configure a 6to4 Tunnel</a>.</p>

<a name="ipv6-ref-18"></a><h5>Syntax of <tt>6to4relay</tt></h5>
<p><a name="indexterm-1212"></a>The <tt>6to4relay</tt> command has the following syntax:</p><pre>6to4relay -e [-a <b>IPv4-address</b>] -d -h</pre><dl><dt><tt>-e</tt></dt>
<dd><p>Enables support for tunnels between the 6to4 router and an anycast 6to4 relay router. The tunnel endpoint address is then set to <tt>192.88.99.1</tt>, the default address for the anycast group of 6to4 relay routers.</p></dd>
<dt><tt>-a</tt> <i>IPv4-address</i></dt>
<dd><p>Enables support for tunnels between the 6to4 router and a 6to4 relay router with the specified <i>IPv4-address</i>.</p></dd>
<dt><tt>-d</tt></dt>
<dd><p>Disables support for tunneling to the 6to4 relay router, the default for the Solaris OS.</p></dd>
<dt><tt>-h</tt></dt>
<dd><p>Displays help for <tt>6to4relay</tt>.</p></dd>
</dl>
<p>For more information, refer to the <tt>6to4relay</tt>(1M) man page.</p><a name="eobon"></a>Example&nbsp;11-3 Default Status Display of 6to4 Relay Router Support<p><a name="indexterm-1213"></a>The <tt>6to4relay</tt> command, without arguments, shows the current status of 6to4 relay router
support. This example shows the default for the Solaris OS implementation of IPv6.</p><pre># <tt><b>/usr/sbin/6to4relay</b></tt>
6to4relay:6to4 Relay Router communication support is disabled</pre><a name="eobog"></a>Example&nbsp;11-4 Status Display With 6to4 Relay Router Support Enabled<p>If relay router support is enabled, <tt>6to4relay</tt> displays the following output:</p><pre># <tt><b>/usr/sbin/6to4relay</b></tt>
6to4relay:6to4 Relay Router communication support is enabled
IPv4 destination address of Relay Router=192.88.99.1</pre><a name="eobok"></a>Example&nbsp;11-5 Status Display With a 6to4 Relay Router Specified<p>If you specify the <tt>-a</tt> option and an IPv4 address to the <tt>6to4relay</tt>
command, the IPv4 address that you give with <tt>-a</tt> is displayed instead
of <tt>192.88.99.1</tt>.</p><p><tt>6to4relay</tt> does not report successful execution of the <tt>-d</tt>, <tt>-e</tt>, and<tt>-a</tt> <i>IPv4 address</i> options.
However, <tt>6to4relay</tt> does display any error messages that might be generated when you
run these options.</p>

<a name="ipv6-ref-21"></a><h5><tt>ifconfig</tt> Command Extensions for IPv6 Support</h5>
<p><a name="indexterm-1214"></a><a name="indexterm-1215"></a>The <tt>ifconfig</tt> command enables IPv6 interfaces and the tunneling module to be plumbed.
<tt>ifconfig</tt> uses an extended set of ioctls to configure both IPv4 and IPv6
network interfaces. The following describes <tt>ifconfig</tt> options that support IPv6 operations. See <a href="ipconfig-141.html">Monitoring the Interface Configuration With the <tt>ifconfig</tt> Command</a> for
a range of both IPv4 and IPv6 tasks that involve <tt>ifconfig</tt>.</p><dl><dt><tt>index</tt></dt>
<dd><p>Sets the interface index.</p></dd>
<dt><tt>tsrc</tt>/<tt>tdst</tt></dt>
<dd><p>Sets the tunnel source or destination.</p></dd>
<dt><tt>addif</tt></dt>
<dd><p>Creates the next available logical interface.</p></dd>
<dt><tt>removeif</tt></dt>
<dd><p>Deletes a logical interface with a specific IP address.</p></dd>
<dt><tt>destination</tt></dt>
<dd><p>Sets the point-to-point destination address for an interface.</p></dd>
<dt><tt>set</tt></dt>
<dd><p>Sets an address, netmask, or both for an interface.</p></dd>
<dt><tt>subnet</tt></dt>
<dd><p>Sets the subnet address of an interface.</p></dd>
<dt><tt>xmit</tt>/<tt>-xmit</tt></dt>
<dd><p>Enables or disables packet transmission on an interface.</p></dd>
</dl>
<p><a href="ipv6-config-tasks-1.html">Chapter&nbsp;7, Enabling IPv6 on a Network (Tasks)</a> provides IPv6 configuration procedures.</p><a name="eobol"></a>Example&nbsp;11-6 Adding a Logical IPv6 Interface With the <tt>-addif</tt> Option of the <tt>ifconfig</tt> Command<p>The following form of the <tt>ifconfig</tt> command creates the <tt>hme0:3</tt> logical interface:</p><pre># <tt><b>ifconfig hme0 inet6 addif up</b></tt>
Created new logical interface hme0:3</pre><p>This form of <tt>ifconfig</tt> verifies the creation of the new interface:</p><pre># <tt><b>ifconfig hme0:3 inet6</b></tt>
hme0:3: flags=2000841&lt;UP,RUNNING,MULTICAST,IPv6> mtu 1500 index 2
        inet6  inet6 fe80::203:baff:fe11:b321/10</pre><a name="eobob"></a>Example&nbsp;11-7 Removing a Logical IPv6 Interface With the <tt>-removeif</tt> Option of the <tt>ifconfig</tt> Command<p>The following form of the <tt>ifconfig</tt> command removes the <tt>hme0:3</tt> logical interface.</p><pre># <tt><b>ifconfig hme0:3 inet6 down</b></tt>

# <tt><b>ifconfig hme0 inet6 removeif 1234::5678</b></tt></pre><a name="ipv6-ref-ex-86"></a>Example&nbsp;11-8 Using <tt>ifconfig</tt> to Configure an IPv6 Tunnel Source<a name="indexterm-1216"></a><a name="indexterm-1217"></a><pre># <tt><b>ifconfig ip.tun0 inet6 plumb index 13</b></tt></pre><p>Opens the tunnel to be associated with the physical interface name.</p><pre># <tt><b>ifconfig ip.tun0 inet6</b></tt>
ip.tun0: flags=2200850&lt;POINTOPOINT,RUNNING,MULTICAST,NONUD,
#IPv6> mtu 1480 index 13
        inet tunnel src 0.0.0.0 
        inet6 fe80::/10 --> :: </pre><p>Configures the streams that are needed for TCP/IP to use the tunnel device
and report the status of the device.</p><pre># <tt><b>ifconfig ip.tun0 inet6 tsrc 120.46.86.158 tdst 120.46.86.122</b></tt></pre><p>Configures the source and the destination address for the tunnel.</p><pre># <tt><b>ifconfig ip.tun0 inet6</b></tt>
ip.tun0: flags=2200850&lt;POINTOPOINT,RUNNING,MULTICAST,NONUD,
IPv6> mtu 1480 index 13
        inet tunnel src 120.46.86.158  tunnel dst 120.46.86.122
        inet6 fe80::8192:569e/10 --> fe80::8192:567a</pre><p>Reports the new status of the device after the configuration.</p><a name="ipv6-ref-ex-88"></a>Example&nbsp;11-9 Configuring a 6to4 Tunnel Through <tt>ifconfig</tt> (Long Form)<p>This example of a 6to4 pseudo-interface configuration uses the subnet ID of 1
and specifies the host ID, in hexadecimal form.</p><pre># <tt><b>ifconfig ip.6to4tun0 inet6 plumb</b></tt>
# <tt><b>ifconfig ip.6to4tun0 inet tsrc 129.146.86.187 \ 2002:8192:56bb:1::8192:56bb/64 up</b></tt></pre><pre># <tt><b>ifconfig ip.6to4tun0 inet6</b></tt>
ip.6to4tun0: flags=2200041&lt;UP,RUNNING,NONUD,IPv6>mtu 1480 index 11
        inet tunnel src 129.146.86.187 
        tunnel hop limit 60 
        inet6 2002:8192:56bb:1::8192:56bb/64 </pre><a name="ipv6-ref-ex-89"></a>Example&nbsp;11-10 Configuring a 6to4 Tunnel Through <tt>ifconfig</tt> (Short Form)<p>This example shows the short form for configuring a 6to4 tunnel.</p><pre># <tt><b>ifconfig ip.6to4tun0 inet6 plumb</b></tt>
# <tt><b>ifconfig ip.6to4tun0 inet tsrc 129.146.86.187 up</b></tt></pre><pre># <tt><b>ifconfig ip.6to4tun0 inet6</b></tt>
ip.6to4tun0: flags=2200041&lt;UP,RUNNING,NONUD,IPv6>mtu 1480 index 11
        inet tunnel src 129.146.86.187 
        tunnel hop limit 60 
        inet6 2002:8192:56bb::1/64 </pre>

<a name="ipv6-ref-23"></a><h5><tt>netstat</tt> Command Modifications for IPv6 Support</h5>
<p><a name="indexterm-1218"></a><a name="indexterm-1219"></a>The <tt>netstat</tt> command displays both IPv4 and IPv6 network status. You can choose
which protocol information to display by setting the <tt>DEFAULT_IP</tt> value in the <tt>/etc/default/inet_type</tt>
file or by using the <tt>-f</tt> command-line option. With a permanent setting of
<tt>DEFAULT_IP</tt>, you can ensure that <tt>netstat</tt> displays only IPv4 information. You can
override this setting by using the <tt>-f</tt> option. For more information on the
<tt>inet_type</tt> file, see the <a href="http://docs.sun.com/doc/819-2251/inet-type-4?a=view"><tt>inet_type</tt>(4)</a> man page.</p><p>The <tt>-p</tt> option of the <tt>netstat</tt> command displays the net-to-media table, which is
the ARP table for IPv4 and the neighbor cache for IPv6. See the
<a href="http://docs.sun.com/doc/819-2240/netstat-1m?a=view"><tt>netstat</tt>(1M)</a> man page for details. See <a href="ipconfig-142.html#ipv6-admintasks-16">How to Display the Status of Sockets</a> for descriptions of procedures that use
this command.</p>

<a name="ipv6-ref-24"></a><h5><tt>snoop</tt> Command Modifications for IPv6 Support</h5>
<p><a name="indexterm-1220"></a><a name="indexterm-1221"></a>The <tt>snoop</tt> command can capture both IPv4 and IPv6 packets. This command can
display IPv6 headers, IPv6 extension headers, ICMPv6 headers, and Neighbor Discovery protocol data.
By default, the <tt>snoop</tt> command displays both IPv4 and IPv6 packets. If
you specify the <tt>ip</tt> or <tt>ip6</tt> protocol keyword, the <tt>snoop</tt> command displays only
IPv4 or IPv6 packets. The IPv6 filter option enables you to filter through
all packets,  both IPv4 and IPv6, displaying only the IPv6 packets. See
the <a href="http://docs.sun.com/doc/819-2240/snoop-1m?a=view"><tt>snoop</tt>(1M)</a> man page for details. See <a href="ipv6-admintasks-670.html#ipv6-admintasks-10">How to Monitor IPv6 Network Traffic</a> for procedures that use the
<tt>snoop</tt> command.</p>

<a name="ipv6-ref-25"></a><h5><tt>route</tt> Command Modifications for IPv6 Support</h5>
<p><a name="indexterm-1222"></a>The <tt>route</tt> command operates on both IPv4 and IPv6 routes, with IPv4 routes
as the default. If you use the <tt>-inet6</tt> option on the command line
immediately after the <tt>route</tt> command, operations are performed on IPv6 routes. See the
<a href="http://docs.sun.com/doc/819-2240/route-1m?a=view"><tt>route</tt>(1M)</a> man page for details. </p>

<a name="ipv6-ref-26"></a><h5><tt>ping</tt> Command Modifications for IPv6 Support</h5>
<p><a name="indexterm-1223"></a>The <tt>ping</tt> command can use both IPv4 and IPv6 protocols to probe target
hosts. Protocol selection depends on the addresses that are returned by the name
server for the specific target host. By default, if the name server returns
an IPv6 address for the target host, the <tt>ping</tt> command uses the
IPv6 protocol. If the server returns only an IPv4 address, the <tt>ping</tt> command
uses the IPv4 protocol. You can override this action by using the <tt>-A</tt>
command-line option to specify which protocol to use.</p><p>For detailed information, see the <a href="http://docs.sun.com/doc/819-2240/ping-1m?a=view"><tt>ping</tt>(1M)</a> man page. For procedures that use
<tt>ping</tt>, refer to <a href="ipv6-admintasks-53.html">Probing Remote Hosts With the <tt>ping</tt> Command</a>.</p>

<a name="ipv6-ref-27"></a><h5><tt>traceroute</tt> Command Modifications for IPv6 Support</h5>
<p><a name="indexterm-1224"></a>You can use the <tt>traceroute</tt> command to trace both the IPv4 and IPv6
routes to a specific host. From a protocol perspective, <tt>traceroute</tt> uses the
same algorithm as <tt>ping</tt>. Use the <tt>-A</tt> command-line option to override this selection.
You can trace each individual route to every address of a multihomed host
by using the <tt>-a</tt> command-line option. </p><p>For detailed information, see the <a href="http://docs.sun.com/doc/819-2240/traceroute-1m?a=view"><tt>traceroute</tt>(1M)</a> man page. For procedures that use <tt>traceroute</tt>,
refer to <a href="ipv6-admintasks-72.html">Displaying Routing Information With the <tt>traceroute</tt> Command</a>.</p>

<a name="ipv6-ref-75"></a><h4>IPv6-Related Daemons</h4>
<p>This section discusses the IPv6-related daemons.</p>

<a name="ipv6-ref-28"></a><h5><tt>in.ndpd</tt> Daemon, for Neighbor Discovery</h5>
<p><a name="indexterm-1225"></a><a name="indexterm-1226"></a><a name="indexterm-1227"></a><a name="indexterm-1228"></a><a name="indexterm-1229"></a><a name="indexterm-1230"></a><a name="indexterm-1231"></a>The<tt>in.ndpd</tt> daemon implements the IPv6 Neighbor Discovery protocol and router discovery. The daemon
also implements address autoconfiguration for IPv6. The following shows the supported options of
<tt>in.ndpd</tt>.</p><dl><dt><tt>-d</tt></dt>
<dd><p>Turns on debugging.</p></dd>
<dt><tt>-D</tt></dt>
<dd><p>Turns on debugging for specific events.</p></dd>
<dt><tt>-f</tt></dt>
<dd><p>Specifies a file to read configuration data from, instead of the default <tt>/etc/inet/ndpd.conf</tt> file.</p></dd>
<dt><tt>-I</tt></dt>
<dd><p>Prints related information for each interface.</p></dd>
<dt><tt>-n</tt></dt>
<dd><p>Does not loop back router advertisements.</p></dd>
<dt><tt>-r</tt></dt>
<dd><p>Ignores received packets.</p></dd>
<dt><tt>-v</tt></dt>
<dd><p>Specifies verbose mode, reporting various types of diagnostic messages.</p></dd>
<dt><tt>-t</tt></dt>
<dd><p>Turns on packet tracing.</p></dd>
</dl>
<p><a name="indexterm-1232"></a><a name="indexterm-1233"></a>The <tt>in.ndpd</tt> daemon is controlled by parameters that are set in the <tt>/etc/inet/ndpd.conf</tt>
configuration file and any applicable parameters in the <tt>/var/inet/ndpd_state.</tt><i>interface</i> startup file.</p><p>When the <tt>/etc/inet/ndpd.conf</tt> file exists, the file is parsed and used to configure
a node as a router. <a href="#ipv6-ref-tbl-84">Table&nbsp;11-2</a> lists the valid keywords that might appear
in this file. When a host is booted, routers might not be immediately
available. Advertised packets by the router might be dropped. Also, advertised packets might
not reach the host. </p><p>The <tt>/var/inet/ndpd_state</tt>.<i>interface</i> file is a state file. This file is updated periodically by
each node. When the node fails and is restarted, the node can configure
its interfaces in the absence of routers. This file contains the interface address,
the last time that the file was updated, and how long the file
is valid. This file also contains other parameters that are &ldquo;learned&rdquo; from previous
router advertisements.</p>
<hr><p><b>Note - </b><a name="indexterm-1234"></a>You do not need to alter the contents of state files. The
<tt>in.ndpd</tt> daemon automatically maintains state files.</p>
<hr>
<p>See the <a href="http://docs.sun.com/doc/819-2240/in.ndpd-1m?a=view"><tt>in.ndpd</tt>(1M)</a> man page and the <a href="http://docs.sun.com/doc/819-2251/ndpd.conf-4?a=view"><tt>ndpd.conf</tt>(4)</a> man page for lists of configuration
variables and allowable values.</p>

<a name="ipv6-ref-31"></a><h5><tt>in.ripngd</tt> Daemon, for IPv6 Routing</h5>
<p><a name="indexterm-1235"></a><a name="indexterm-1236"></a><a name="indexterm-1237"></a>The <tt>in.ripngd</tt> daemon implements the Routing Information Protocol next-generation for IPv6 routers (RIPng).
RIPng defines the IPv6 equivalent of RIP. When you configure an IPv6 router
with the <tt>routeadm</tt> command and turn on IPv6 routing, the <tt>in.ripngd</tt> daemon implements
RIPng on the router.</p><p>The following shows the supported options of RIPng.</p><dl><dt><tt>-p</tt> <i>n</i></dt>
<dd><p><i>n</i> specifies the alternate port number that is used to send or receive RIPnG packets.</p></dd>
<dt><tt>-q</tt></dt>
<dd><p>Suppresses routing information.</p></dd>
<dt><tt>-s</tt></dt>
<dd><p>Forces routing information even if the daemon is acting as a router.</p></dd>
<dt><tt>-P</tt></dt>
<dd><p>Suppresses use of poison reverse.</p></dd>
<dt><tt>-S</tt></dt>
<dd><p>If <tt>in.ripngd</tt> does not act as a router, the daemon enters only a default route for each router.</p></dd>
</dl>


<a name="fapbh"></a><h5><tt>inetd</tt> Daemon and IPv6 Services</h5>
<a name="indexterm-1238"></a><p>An IPv6-enabled server application can handle both IPv4 requests and IPv6 requests, or
IPv6 requests only. The server always handles  requests through an IPv6 socket.
Additionally, the server uses the same protocol that the corresponding client uses. To
add or modify a service for IPv6, use the commands available from the
Service Management Facility (SMF).</p>
<ul><li><p>For information about the SMF commands, refer to <a href="http://docs.sun.com/doc/819-2379/dzhqq?a=view">SMF Command-Line Administrative Utilities in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><p>For an example task that uses SMF to configure an IPv4 service manifest that runs over SCTP, refer to <a href="ipconfig-111.html#ermig">How to Add Services That Use the SCTP Protocol</a>.</p></li></ul>
<p>To configure an IPv6 service, you must ensure that the <tt>proto</tt> field value
in the <tt>inetadm</tt> profile for that service lists the appropriate value:</p>
<ul><li><p>For a service that handles both IPv4 and IPv6 requests, choose <tt>tcp6</tt>, <tt>udp6</tt>, or <tt>sctp</tt>. A <tt>proto</tt> value of <tt>tcp6</tt>, <tt>udp6</tt>, or <tt>sctp6</tt> causes <tt>inetd</tt> to pass on an IPv6 socket to the server. The server contains an IPv4-mapped address in case a IPv4 client has a request.</p></li>
<li><p>For a service that handles only IPv6 requests, choose <tt>tcp6only</tt> or <tt>udp6only</tt>. With either of these values for <tt>proto</tt>, <tt>inetd</tt> passes the server an IPv6 socket.</p></li></ul>
<p>If you replace a Solaris command with another implementation, you must verify that
the implementation of that service supports IPv6. If the implementation does not support
IPv6, then you must specify the <tt>proto</tt> value as either <tt>tcp</tt>, <tt>udp</tt>, or
<tt>sctp</tt>.</p><p>Here is a profile that results from running <tt>inetadm</tt> for an <tt>echo</tt> service
manifest that supports both IPv4 and IPv6 and runs over SCTP:</p><pre># inetadm -l svc:/network/echo:sctp_stream
    SCOPE    NAME=VALUE      name="echo"
             endpoint_type="stream"
             proto="sctp6"
             isrpc=FALSE
             wait=FALSE
             exec="/usr/lib/inet/in.echod -s"
             user="root"
    default  bind_addr=""
    default  bind_fail_max=-1
    default  bind_fail_interval=-1
    default  max_con_rate=-1
    default  max_copies=-1
    default  con_rate_offline=-1
    default  failrate_cnt=40
    default  failrate_interval=60
    default  inherit_env=TRUE
    default  tcp_trace=FALSE
    default  tcp_wrappers=FALSE</pre><p>To change the value of the <tt>proto</tt> field, use the following syntax:</p><pre># <tt><b>inetadm -m </tt><i>FMRI</i><tt> proto="</tt><i>transport-protocols</i><tt>"</b></tt></pre><p>All servers that are provided with Solaris software require only one profile entry
that specifies <tt>proto</tt> as <tt>tcp6</tt>, <tt>udp6</tt>, or <tt>sctp6</tt>. However, the remote shell
server (<tt>shell</tt>)  and the remote execution server (<tt>exec</tt>) now are composed of a
single service  instance, which requires a <tt>proto</tt> value containing both the <tt>tcp</tt>
and <tt>tcp6only</tt> values.  For example, to set the <tt>proto</tt> value for <tt>shell,</tt>
you would issue the following command:</p><pre># <tt><b>inetadm -m network/shell:default proto="tcp,tcp6only"</b></tt></pre><p>See IPv6 extensions to the Socket API in <a href="http://docs.sun.com/doc/817-4415"><i>Programming Interfaces Guide</i></a> for more details on
writing IPv6-enabled servers that use sockets.</p>

<a name="fapcd"></a><h5>Considerations When Configuring a Service for IPv6</h5>
<p>When you add or modify a service for IPv6, keep in mind
the following caveats:</p>
<ul><li><p>You need to specify the <tt>proto</tt> value as <tt>tcp6</tt>, <tt>sctp6</tt>, or <tt>udp6</tt> to enable both IPv4 or IPv6 connections. If you specify the value for <tt>proto</tt> as <tt>tcp</tt>, <tt>sctp</tt>, or <tt>udp</tt>, the service uses only IPv4.</p></li>
<li><p>Though you can add a service instance that uses one-to-many style SCTP sockets for <tt>inetd</tt>, this is not recommended. <tt>inetd</tt> does not work with one-to-many style SCTP sockets.</p></li>
<li><p>If a service requires two entries because its <tt>wait-status</tt> or <tt>exec</tt> properties differ, then you must create two instances/services from the original service.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipv6-ref-81.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipv6-ref-34.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

