<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Common Problems When Deploying IPv6 - System Administration Guide: IP Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: IP Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipconfig-138.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipref-8.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="iptm-1.html">Part&nbsp;I&nbsp;TCP/IP Administration</a></p>
<p class="toc level2"><a href="ipov-1.html">1.&nbsp;&nbsp;Solaris TCPIP Protocol Suite (Overview)</a></p>
<p class="toc level2"><a href="ipplan-1.html">2.&nbsp;&nbsp;Planning an IPv4 Addressing Scheme (Tasks</a></p>
<p class="toc level2"><a href="ipv6-overview-7.html">3.&nbsp;&nbsp;Planning an IPv6 Addressing Scheme (Overview)</a></p>
<p class="toc level2"><a href="ipv6-planning-1.html">4.&nbsp;&nbsp;Planning an IPv6 Network (Tasks)</a></p>
<p class="toc level2"><a href="ipconfig-1.html">5.&nbsp;&nbsp;Configuring TCP/IP Network Services and IPv4 Addressing (Tasks)</a></p>
<p class="toc level2"><a href="fwawf.html">6.&nbsp;&nbsp;Administering Network Interfaces (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-config-tasks-1.html">7.&nbsp;&nbsp;Enabling IPv6 on a Network (Tasks)</a></p>
<p class="toc level2"><a href="ipv6-admintasks-1.html">8.&nbsp;&nbsp;Administering a TCP/IP Network (Tasks)</a></p>
<p class="toc level2"><a href="gegel.html">9.&nbsp;&nbsp;Troubleshooting Network Problems (Tasks)</a></p>
<p class="toc level3"><a href="ipconfig-138.html">General Network Troubleshooting Tips</a></p>
<p class="toc level4"><a href="ipconfig-138.html#ipv6-troubleshoot-10">How to Perform Basic Network Software Checking</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Common Problems When Deploying IPv6</a></p>
</div>
<p class="toc level2 tocsp"><a href="ipref-8.html">10.&nbsp;&nbsp;TCP/IP and IPv4 in Depth (Reference)</a></p>
<p class="toc level2"><a href="ipv6-ref-76.html">11.&nbsp;&nbsp;IPv6 in Depth (Reference)</a></p>
<p class="toc level1 tocsp"><a href="dhcptm-1.html">Part&nbsp;II&nbsp;DHCP</a></p>
<p class="toc level2"><a href="dhcp-overview-1.html">12.&nbsp;&nbsp;About Solaris DHCP (Overview)</a></p>
<p class="toc level2"><a href="chap2-26.html">13.&nbsp;&nbsp;Planning for DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="chapter3-20.html">14.&nbsp;&nbsp;Configuring the DHCP Service (Tasks)</a></p>
<p class="toc level2"><a href="dhcp-admin-9.html">15.&nbsp;&nbsp;Administering DHCP (Tasks)</a></p>
<p class="toc level2"><a href="eyatl.html">16.&nbsp;&nbsp;Configuring and Administering  DHCP Clients</a></p>
<p class="toc level2"><a href="dhcp-trouble-1.html">17.&nbsp;&nbsp;Troubleshooting DHCP (Reference)</a></p>
<p class="toc level2"><a href="dhcp-ref-4.html">18.&nbsp;&nbsp;DHCP Commands and Files (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipsectm-1.html">Part&nbsp;III&nbsp;IP Security</a></p>
<p class="toc level2"><a href="ipsec-ov-1.html">19.&nbsp;&nbsp;IP Security Architecture (Overview)</a></p>
<p class="toc level2"><a href="ipsec-mgtasks-1.html">20.&nbsp;&nbsp;Configuring IPsec (Tasks)</a></p>
<p class="toc level2"><a href="ipsecref-1.html">21.&nbsp;&nbsp;IP Security Architecture (Reference)</a></p>
<p class="toc level2"><a href="ike-1.html">22.&nbsp;&nbsp;Internet Key Exchange (Overview)</a></p>
<p class="toc level2"><a href="ike-task-1.html">23.&nbsp;&nbsp;Configuring IKE (Tasks)</a></p>
<p class="toc level2"><a href="ikeref-1.html">24.&nbsp;&nbsp;Internet Key Exchange (Reference)</a></p>
<p class="toc level2"><a href="eupsq.html">25.&nbsp;&nbsp;Solaris IP Filter (Overview)</a></p>
<p class="toc level2"><a href="ipfilter-admin-1.html">26.&nbsp;&nbsp;Solaris IP Filter (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="miptm-1.html">Part&nbsp;IV&nbsp;Mobile IP</a></p>
<p class="toc level2"><a href="mipoverview-1.html">27.&nbsp;&nbsp;Mobile IP (Overview)</a></p>
<p class="toc level2"><a href="mipimplementing-1.html">28.&nbsp;&nbsp;Administering Mobile IP (Tasks)</a></p>
<p class="toc level2"><a href="mipmanaging-22.html">29.&nbsp;&nbsp;Mobile IP Files and Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="ipmptm-1.html">Part&nbsp;V&nbsp;IPMP</a></p>
<p class="toc level2"><a href="mpoverview.html">30.&nbsp;&nbsp;Introducing IPMP (Overview)</a></p>
<p class="toc level2"><a href="deploynetmult-56.html">31.&nbsp;&nbsp;Administering IPMP (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ipqostm-1.html">Part&nbsp;VI&nbsp;IP Quality of Service (IPQoS)</a></p>
<p class="toc level2"><a href="ipqos-intro-1.html">32.&nbsp;&nbsp;Introducing IPQoS (Overview)</a></p>
<p class="toc level2"><a href="ipqos-config-planning-1.html">33.&nbsp;&nbsp;Planning for an IPQoS-Enabled Network (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-policy-planning-1.html">34.&nbsp;&nbsp;Creating the IPQoS Configuration File (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-isp-setup-1.html">35.&nbsp;&nbsp;Starting and Maintaining IPQoS (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-accounting-1.html">36.&nbsp;&nbsp;Using Flow Accounting and Statistics Gathering (Tasks)</a></p>
<p class="toc level2"><a href="ipqos-reference-1.html">37.&nbsp;&nbsp;IPQoS in Detail (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ipv6-troubleshoot-2"></a><h3>Common Problems When Deploying IPv6</h3>
<a name="indexterm-927"></a><a name="indexterm-928"></a><p>This section describes issues and problems that you might encounter while planning and
deploying IPv6 at your site. For actual planning tasks, refer to <a href="ipv6-planning-1.html">Chapter&nbsp;4, Planning an IPv6 Network (Tasks)</a>.</p>

<a name="ipv6-troubleshoot-3"></a><h4>IPv4 Router Cannot Be Upgraded to IPv6</h4>
<a name="indexterm-929"></a><p>If your existing equipment cannot be upgraded, you might have to purchase IPv6-ready
equipment. Check the manufacturers' documentation for any equipment-specific procedures you might have to
perform to support IPv6.</p><p>Certain IPv4 routers cannot be upgraded for IPv6 support. If this situation applies
to your topology, physically wire an IPv6 router next to the IPv4 router.
Then, you can tunnel from the IPv6 router over the IPv4 router.
For tasks for configuring tunnels, refer to <a href="ipv6-config-tasks-17.html">Tasks for Configuring Tunnels for IPv6 Support (Task Map)</a>.</p>

<a name="ipv6-troubleshoot-6"></a><h4>Problems After Upgrading Services to IPv6</h4>
<p>You might encounter the following situations when preparing services for IPv6 support:</p>
<ul><li><p>Certain applications, even after they are ported to IPv6, do not turn on IPv6 support by default. You might have to configure these applications to turn on IPv6.</p></li>
<li><p>A server that runs multiple services, some of which are IPv4 only, and others that are both IPv4 and IPv6, can experience problems. Some clients might need to use both types of services, which leads to confusion on the server side.</p></li></ul>


<a name="ipv6-troubleshoot-7"></a><h4>Current ISP Does Not Support IPv6</h4>
<a name="indexterm-930"></a><a name="indexterm-931"></a><p>If you want to deploy IPv6 but your current ISP does not
offer IPv6 addressing, consider the following alternatives to changing ISPs:</p>
<ul><li><p>Hire an ISP to provide a second line for IPv6 communications from your site. This solution is expensive.</p></li>
<li><p>Get a <b>virtual ISP</b>. A virtual ISP provides your site with IPv6 connectivity but no link. Instead, you create a tunnel from your site, over your IPv4 ISP, to the virtual ISP.</p></li>
<li><p>Use a 6to4 tunnel over your ISP to other IPv6 sites. For an address, use the registered IPv4 address of the 6to4 router as the public topology part of the IPv6 address.</p></li></ul>


<a name="ipv6-ref-58"></a><h4>Security Issues When Tunneling to a 6to4 Relay Router</h4>
<p><a name="indexterm-932"></a><a name="indexterm-933"></a>By nature, a tunnel between a 6to4 router and a 6to4 relay
router is insecure. Security problems, such as the following, are inherent in such a
tunnel:</p>
<ul><li><p>Though 6to4 relay routers do encapsulate and decapsulate packets, these routers do not check the data that is contained within the packets.</p></li>
<li><p>Address spoofing is a major issue on tunnels to a 6to4 relay router. For incoming traffic, the 6to4 router is unable to match the IPv4 address of the relay router with the IPv6 address of the source. Therefore, the address of the IPv6 host can easily be spoofed. The address of the 6to4 relay router can also be spoofed.</p></li>
<li><p>By default, no trust mechanism exists between 6to4 routers and 6to4 relay routers. Thus, a 6to4 router cannot identify whether the 6to4 relay router is to be trusted, or even if it is a legitimate 6to4 relay router. A trust relationship between the 6to4 site and the IPv6 destination must exist, or both sites leave themselves open to possible attacks.</p></li></ul>
<p>These problems and other security issues that are inherent with 6to4 relay routers
are explained in the Internet Draft, <i>Security Considerations for 6to4</i>. Generally, you should consider enabling
support for 6to4 relay routers for the following reasons only:</p>
<ul><li><p>Your 6to4 site intends to communicate with a private, trusted IPv6 network. For example, you might enable 6to4 relay router support on a campus network that consists of isolated 6to4 sites and native IPv6 sites.</p></li>
<li><p>Your 6to4 site has a compelling business reason to communicate with certain native IPv6 hosts.</p></li>
<li><p>You have implemented the checks and trust models that are suggested in the Internet Draft, <i>Security Considerations for 6to4</i>.</p></li></ul>


<a name="ipv6-ref-59"></a><h4>Known Issues With a 6to4 Router</h4>
<p><a name="indexterm-934"></a><a name="indexterm-935"></a><a name="indexterm-936"></a>The following known bugs affect 6to4 configuration:</p>
<ul><li><p>4709338 &ndash; Need a RIPng implementation which recognizes static routes</p></li>
<li><p>4152864 &ndash; Configuring two tunnels with the same tsrc/tdst pair works</p></li></ul>


<a name="ipv6-ref-60"></a><h5>Implementing Static Routes at the 6to4 Site (Bug ID 4709338)</h5>
<p>The following issue occurs on 6to4 sites with routers that are internal to
the 6to4 boundary router. When you configure the 6to4 pseudo-interface, the static route
<tt>2002::/16</tt> is automatically added to the routing table on the 6to4 router. Bug
4709338 describes a limitation in the Solaris RIPng routing protocol that prevents this
static route from being advertised to the 6to4 site. </p><p>Either of the following workarounds are available for Bug 4709338.</p>
<ul><li><p>Add the <tt>2002::/16</tt>static route to the routing tables of all intrasite routers within the 6to4 site.</p></li>
<li><p>Use a routing protocol other than RIPng on the 6to4 site's internal router.</p></li></ul>


<a name="ipv6-ref-61"></a><h5>Configuring Tunnels with the Same Source Address (Bug ID 4152864)</h5>
<p>Bug ID 4152864 describes problems that occur when two tunnels are configured with
the same tunnel source address, which is a serious issue for 6to4
tunnels. </p>
<hr><p><b>Caution - </b>Do not configure a 6to4 tunnel and an automatic tunnel (<tt>atun</tt>) with
the same tunnel source address. For information about automatics and the <tt>atun</tt> command,
refer to the <a href="http://docs.sun.com/doc/819-2254/lc-tun-7m?a=view"><tt>tun</tt>(7M)</a> man page.</p>
<hr>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ipconfig-138.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ipref-8.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

