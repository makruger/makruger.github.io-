<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Probes - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Dynamic Tracing Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-proc.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gelse.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chp-intro.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1 tocsp"><a href="chp-typeopexpr.html">2.&nbsp;&nbsp;Types, Operators, and Expressions</a></p>
<p class="toc level1 tocsp"><a href="chp-variables.html">3.&nbsp;&nbsp;Variables</a></p>
<p class="toc level1 tocsp"><a href="chp-prog.html">4.&nbsp;&nbsp;D Program Structure</a></p>
<p class="toc level1 tocsp"><a href="chp-pointers.html">5.&nbsp;&nbsp;Pointers and Arrays</a></p>
<p class="toc level1 tocsp"><a href="chp-strings.html">6.&nbsp;&nbsp;Strings</a></p>
<p class="toc level1 tocsp"><a href="chp-structs.html">7.&nbsp;&nbsp;Structs and Unions</a></p>
<p class="toc level1 tocsp"><a href="chp-types.html">8.&nbsp;&nbsp;Type and Constant Definitions</a></p>
<p class="toc level1 tocsp"><a href="chp-aggs.html">9.&nbsp;&nbsp;Aggregations</a></p>
<p class="toc level1 tocsp"><a href="chp-actsub.html">10.&nbsp;&nbsp;Actions and Subroutines</a></p>
<p class="toc level1 tocsp"><a href="chp-buf.html">11.&nbsp;&nbsp;Buffers and Buffering</a></p>
<p class="toc level1 tocsp"><a href="chp-fmt.html">12.&nbsp;&nbsp;Output Formatting</a></p>
<p class="toc level1 tocsp"><a href="chp-spec.html">13.&nbsp;&nbsp;Speculative Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace1m.html">14.&nbsp;&nbsp;<tt>dtrace</tt>(1M) Utility</a></p>
<p class="toc level1 tocsp"><a href="chp-script.html">15.&nbsp;&nbsp;Scripting</a></p>
<p class="toc level1 tocsp"><a href="chp-opt.html">16.&nbsp;&nbsp;Options and Tunables</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace.html">17.&nbsp;&nbsp;<tt>dtrace</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-lockstat.html">18.&nbsp;&nbsp;<tt>lockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-profile.html">19.&nbsp;&nbsp;<tt>profile</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fbt.html">20.&nbsp;&nbsp;<tt>fbt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-syscall.html">21.&nbsp;&nbsp;<tt>syscall</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sdt.html">22.&nbsp;&nbsp;<tt>sdt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sysinfo.html">23.&nbsp;&nbsp;<tt>sysinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-vminfo.html">24.&nbsp;&nbsp;<tt>vminfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-proc.html">25.&nbsp;&nbsp;<tt>proc</tt> Provider</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Probes</a></p>
</div>
<p class="toc level2"><a href="gelse.html">Arguments</a></p>
<p class="toc level2"><a href="gelrt.html">Examples</a></p>
<p class="toc level2"><a href="chp-proc-stability.html">Stability</a></p>
<p class="toc level1 tocsp"><a href="chp-sched.html">26.&nbsp;&nbsp;<tt>sched</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-io.html">27.&nbsp;&nbsp;<tt>io</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-mib.html">28.&nbsp;&nbsp;<tt>mib</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fpuinfo.html">29.&nbsp;&nbsp;<tt>fpuinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-pid.html">30.&nbsp;&nbsp;<tt>pid</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-plockstat.html">31.&nbsp;&nbsp;<tt>plockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fasttrap.html">32.&nbsp;&nbsp;<tt>fasttrap</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-user.html">33.&nbsp;&nbsp;User Process Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-usdt.html">34.&nbsp;&nbsp;Statically Defined Tracing for User Applications</a></p>
<p class="toc level1 tocsp"><a href="chp-sec.html">35.&nbsp;&nbsp;Security</a></p>
<p class="toc level1 tocsp"><a href="chp-anon.html">36.&nbsp;&nbsp;Anonymous Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-post.html">37.&nbsp;&nbsp;Postmortem Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-perf.html">38.&nbsp;&nbsp;Performance Considerations</a></p>
<p class="toc level1 tocsp"><a href="chp-stab.html">39.&nbsp;&nbsp;Stability</a></p>
<p class="toc level1 tocsp"><a href="chp-xlate.html">40.&nbsp;&nbsp;Translators</a></p>
<p class="toc level1 tocsp"><a href="chp-vers.html">41.&nbsp;&nbsp;Versioning</a></p>
<p class="toc level1 tocsp"><a href="gloss01.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gelrh"></a><h3>Probes</h3>
<p><a name="indexterm-373"></a><a name="indexterm-374"></a>The <tt>proc</tt> probes are described in <a href="#tbl-proc">Table&nbsp;25-1</a>.</p><a name="tbl-proc"></a><h6>Table&nbsp;25-1 <tt>proc</tt> Probes</h6><table><col width="25%"><col width="75%"><tr><th align="left" valign="top" scope="column"><p>Probe</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>create</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when a process
is created using <a href="http://docs.sun.com/doc/819-2241/fork-2?a=view"><tt>fork</tt>(2)</a>, <a href="http://docs.sun.com/doc/819-2241/forkall-2?a=view"><tt>forkall</tt>(2)</a>, <a href="http://docs.sun.com/doc/819-2241/fork1-2?a=view"><tt>fork1</tt>(2)</a>, or <a href="http://docs.sun.com/doc/819-2241/vfork-2?a=view"><tt>vfork</tt>(2)</a>. The <tt>psinfo_t</tt> corresponding to the
new child process is pointed to by <tt>args[0]</tt>. You can distinguish <tt>vfork</tt> from
the other fork variants by checking for <tt>PR_VFORKP</tt> in the <tt>pr_flag</tt> member of the
forking thread's <tt>lwpsinfo_t</tt>. You can distinguish <tt>fork1</tt> from <tt>forkall</tt> by examining the
<tt>pr_nlwp</tt> members of both the parent process's <tt>psinfo_t</tt> (<tt>curpsinfo</tt>) and the child
process's <tt>psinfo_t</tt> (<tt>args[0]</tt>). Because the <tt>create</tt> probe only fires after the process has
been successfully created, and because LWP creation is part of creating a process,
<tt>lwp-create</tt> will fire for any LWPs created at process creation time <b>before</b> the
<tt>create</tt> probe fires for the new process.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>exec</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires whenever a process
loads a new process image with a variant of the <a href="http://docs.sun.com/doc/819-2241/exec-2?a=view"><tt>exec</tt>(2)</a> system call: <a href="http://docs.sun.com/doc/819-2241/exec-2?a=view"><tt>exec</tt>(2)</a>,
<a href="http://docs.sun.com/doc/819-2241/execle-2?a=view"><tt>execle</tt>(2)</a>, <a href="http://docs.sun.com/doc/819-2241/execlp-2?a=view"><tt>execlp</tt>(2)</a>, <a href="http://docs.sun.com/doc/819-2241/execv-2?a=view"><tt>execv</tt>(2)</a>, <a href="http://docs.sun.com/doc/819-2241/execve-2?a=view"><tt>execve</tt>(2)</a>, <a href="http://docs.sun.com/doc/819-2241/execvp-2?a=view"><tt>execvp</tt>(2)</a>. The <tt>exec</tt> probe fires <b>before</b> the process image
is loaded. Process variables like <tt>execname</tt> and <tt>curpsinfo</tt> therefore contain the process state before
the image is loaded. Some time after the <tt>exec</tt> probe fires, either
the <tt>exec-failure</tt> probe or the <tt>exec-success</tt> probe will subsequently fire in the same thread.
The path of the new process image is pointed to by <tt>args[0]</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>exec-failure</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe
that fires when an <a href="http://docs.sun.com/doc/819-2241/exec-2?a=view"><tt>exec</tt>(2)</a> variant has failed. The <tt>exec-failure</tt> probe fires only
after the <tt>exec</tt> probe has fired in the same thread. The <a href="http://docs.sun.com/doc/819-2243/errno-3c?a=view"><tt>errno</tt>(3C)</a>
value is provided in <tt>args[0]</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>exec-success</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when an <a href="http://docs.sun.com/doc/819-2241/exec-2?a=view"><tt>exec</tt>(2)</a> variant has succeeded.
Like the <tt>exec-failure</tt> probe, the <tt>exec-success</tt> probe fires only after the <tt>exec</tt>
probe has fired in the same thread. By the time the <tt>exec-success</tt> probe fires,
process variables like <tt>execname</tt> and <tt>curpsinfo</tt> contain the process state after the new
process image has been loaded.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>exit</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when the current process is
exiting. The reason for exit, which is expressed as one of the <tt>SIGCHLD</tt>
<a href="http://docs.sun.com/doc/819-2242/siginfo.h-3head?a=view"><tt>siginfo.h</tt>(3HEAD)</a> codes, is contained in <tt>args[0]</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>fault</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when a thread experiences a
machine fault. The fault code (as defined in <tt>proc</tt>(4)) is in <tt>args[0]</tt>. The <tt>siginfo</tt>
structure corresponding to the fault is pointed to by <tt>args[1]</tt>. Only those faults that
induce a signal can trigger the <tt>fault</tt> probe.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lwp-create</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when an
LWP is created, typically as a result of <a href="http://docs.sun.com/doc/819-2243/thr-create-3c?a=view"><tt>thr_create</tt>(3C)</a>. The <tt>lwpsinfo_t</tt> corresponding
to the new thread is pointed to by <tt>args[0]</tt>. The <tt>psinfo_t</tt> of the
process containing the thread is pointed to by <tt>args[1]</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lwp-start</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires within the
context of a newly created LWP. The <tt>lwp-start</tt> probe will fire before
any user-level instructions are executed. If the LWP is the first LWP in
the process, the <tt>start</tt> probe will fire, followed by <tt>lwp-start</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lwp-exit</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when
an LWP is exiting, due either to a signal or to an explicit
call to <a href="http://docs.sun.com/doc/819-2243/thr-exit-3c?a=view"><tt>thr_exit</tt>(3C)</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>signal-discard</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when a signal is sent to a
single-threaded process, and the signal is both unblocked and ignored by the process.
Under these conditions, the signal is discarded on generation. The <tt>lwpsinfo_t</tt> and <tt>psinfo_t</tt>
of the target process and thread are in <tt>args[0]</tt> and <tt>args[1]</tt>, respectively.
The signal number is in <tt>args[2]</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>signal-send</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires when a signal is
sent to a thread or process. The <tt>signal-send</tt> probe fires in the
context of the sending process and thread. The <tt>lwpsinfo_t</tt> and <tt>psinfo_t</tt> of the receiving
process and thread are in <tt>args[0]</tt> and <tt>args[1]</tt>, respectively. The signal number
is in <tt>args[2]</tt>. <tt>signal-send</tt> is always followed by <tt>signal-handle</tt> or <tt>signal-clear</tt> in
the receiving process and thread.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>signal-handle</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires immediately before a thread handles
a signal. The <tt>signal-handle</tt> probe fires in the context of the thread
that will handle the signal. The signal number is in <tt>args[0]</tt>. A pointer to
the <tt>siginfo_t</tt> structure that corresponds to the signal is in <tt>args[1]</tt>. The value
of <tt>args[1]</tt> is NULL if there is no <tt>siginfo_t</tt> structure or if the signal
handler does not have the <tt>SA_SIGINFO</tt> flag set. The address of the signal
handler in the process is in <tt>args[2]</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>signal-clear</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probes that fires when a pending
signal is cleared because the target thread was waiting for the signal in
<a href="http://docs.sun.com/doc/819-2241/sigwait-2?a=view"><tt>sigwait</tt>(2)</a>, <tt>sigwaitinfo</tt>(3RT), or <tt>sigtimedwait</tt>(3RT). Under these conditions, the pending signal is cleared and
the signal number is returned to the caller. The signal number is in
<tt>args[0]</tt>. <tt>signal-clear</tt> fires in the context of the formerly waiting thread.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>start</tt></p></td>
<td align="left" valign="top" scope="row"><p>Probe that fires
in the context of a newly created process. The <tt>start</tt> probe will
fire before any user-level instructions are executed in the process.</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-proc.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gelse.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

