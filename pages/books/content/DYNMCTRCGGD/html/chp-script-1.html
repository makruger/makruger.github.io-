<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Interpreter Files - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Dynamic Tracing Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-script.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-script-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chp-intro.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1 tocsp"><a href="chp-typeopexpr.html">2.&nbsp;&nbsp;Types, Operators, and Expressions</a></p>
<p class="toc level1 tocsp"><a href="chp-variables.html">3.&nbsp;&nbsp;Variables</a></p>
<p class="toc level1 tocsp"><a href="chp-prog.html">4.&nbsp;&nbsp;D Program Structure</a></p>
<p class="toc level1 tocsp"><a href="chp-pointers.html">5.&nbsp;&nbsp;Pointers and Arrays</a></p>
<p class="toc level1 tocsp"><a href="chp-strings.html">6.&nbsp;&nbsp;Strings</a></p>
<p class="toc level1 tocsp"><a href="chp-structs.html">7.&nbsp;&nbsp;Structs and Unions</a></p>
<p class="toc level1 tocsp"><a href="chp-types.html">8.&nbsp;&nbsp;Type and Constant Definitions</a></p>
<p class="toc level1 tocsp"><a href="chp-aggs.html">9.&nbsp;&nbsp;Aggregations</a></p>
<p class="toc level1 tocsp"><a href="chp-actsub.html">10.&nbsp;&nbsp;Actions and Subroutines</a></p>
<p class="toc level1 tocsp"><a href="chp-buf.html">11.&nbsp;&nbsp;Buffers and Buffering</a></p>
<p class="toc level1 tocsp"><a href="chp-fmt.html">12.&nbsp;&nbsp;Output Formatting</a></p>
<p class="toc level1 tocsp"><a href="chp-spec.html">13.&nbsp;&nbsp;Speculative Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace1m.html">14.&nbsp;&nbsp;<tt>dtrace</tt>(1M) Utility</a></p>
<p class="toc level1 tocsp"><a href="chp-script.html">15.&nbsp;&nbsp;Scripting</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Interpreter Files</a></p>
</div>
<p class="toc level2"><a href="chp-script-2.html">Macro Variables</a></p>
<p class="toc level2"><a href="chp-script-3.html">Macro Arguments</a></p>
<p class="toc level2"><a href="chp-script-4.html">Target Process ID</a></p>
<p class="toc level1 tocsp"><a href="chp-opt.html">16.&nbsp;&nbsp;Options and Tunables</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace.html">17.&nbsp;&nbsp;<tt>dtrace</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-lockstat.html">18.&nbsp;&nbsp;<tt>lockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-profile.html">19.&nbsp;&nbsp;<tt>profile</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fbt.html">20.&nbsp;&nbsp;<tt>fbt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-syscall.html">21.&nbsp;&nbsp;<tt>syscall</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sdt.html">22.&nbsp;&nbsp;<tt>sdt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sysinfo.html">23.&nbsp;&nbsp;<tt>sysinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-vminfo.html">24.&nbsp;&nbsp;<tt>vminfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-proc.html">25.&nbsp;&nbsp;<tt>proc</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sched.html">26.&nbsp;&nbsp;<tt>sched</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-io.html">27.&nbsp;&nbsp;<tt>io</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-mib.html">28.&nbsp;&nbsp;<tt>mib</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fpuinfo.html">29.&nbsp;&nbsp;<tt>fpuinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-pid.html">30.&nbsp;&nbsp;<tt>pid</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-plockstat.html">31.&nbsp;&nbsp;<tt>plockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fasttrap.html">32.&nbsp;&nbsp;<tt>fasttrap</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-user.html">33.&nbsp;&nbsp;User Process Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-usdt.html">34.&nbsp;&nbsp;Statically Defined Tracing for User Applications</a></p>
<p class="toc level1 tocsp"><a href="chp-sec.html">35.&nbsp;&nbsp;Security</a></p>
<p class="toc level1 tocsp"><a href="chp-anon.html">36.&nbsp;&nbsp;Anonymous Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-post.html">37.&nbsp;&nbsp;Postmortem Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-perf.html">38.&nbsp;&nbsp;Performance Considerations</a></p>
<p class="toc level1 tocsp"><a href="chp-stab.html">39.&nbsp;&nbsp;Stability</a></p>
<p class="toc level1 tocsp"><a href="chp-xlate.html">40.&nbsp;&nbsp;Translators</a></p>
<p class="toc level1 tocsp"><a href="chp-vers.html">41.&nbsp;&nbsp;Versioning</a></p>
<p class="toc level1 tocsp"><a href="gloss01.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chp-script-1"></a><h3>Interpreter Files</h3>
<p><a name="indexterm-275"></a><a name="indexterm-276"></a>Similar to your shell and utilities such as <a href="http://docs.sun.com/doc/819-2239/awk-1?a=view"><tt>awk</tt>(1)</a> and <a href="http://docs.sun.com/doc/819-2239/perl-1?a=view"><tt>perl</tt>(1)</a>, <a href="http://docs.sun.com/doc/819-2240/dtrace-1m?a=view"><tt>dtrace</tt>(1M)</a>
can be used to create executable interpreter files. An interpreter file begins
with a line of the form:</p><p><tt>#!</tt> <i>pathname</i> <i>arg</i></p><p>where <i>pathname</i> is the path of the interpreter and <i>arg</i> is a
single optional argument. When an interpreter file is executed, the system invokes
the specified interpreter. If <i>arg</i> was specified in the interpreter file, it
is passed as an argument to the interpreter. The path to the
interpreter file itself and any additional arguments specified when it was executed
are then appended to the interpreter argument list. Therefore, you will always
need to create DTrace interpreter files with at least these arguments:</p><pre>#!/usr/sbin/dtrace -s</pre><p>When your interpreter file is executed, the argument to the <tt>-s</tt> option
will therefore be the pathname of the interpreter file itself. <tt>dtrace</tt> will
then read, compile, and execute this file as if you had typed
the following command in your shell:</p><pre># dtrace -s <i>interpreter-file</i></pre><p>The following example shows how to create and execute a <tt>dtrace</tt> interpreter
file. Type the following D source code and save it in a
file named <tt>interp.d</tt>:</p><pre>#!/usr/sbin/dtrace -s
BEGIN
{
    trace("hello");
    exit(0);
}</pre><p>Mark the <tt>interp.d</tt> file as executable and execute it as follows:</p><pre><tt><b># chmod a+rx interp.d</b></tt>
<tt><b># ./interp.d</b></tt>
dtrace: script './interp.d' matched 1 probe
CPU     ID                    FUNCTION:NAME
  1      1                           :BEGIN   hello
<tt><b>#</b></tt></pre><p>Remember that the <tt>#!</tt> directive must comprise the first two characters of
your file with no intervening or preceding whitespace. The D compiler knows
to automatically ignore this line when it processes the interpreter file.</p><p><tt>dtrace</tt> uses <a href="http://docs.sun.com/doc/819-2243/getopt-3c?a=view"><tt>getopt</tt>(3C)</a> to process command-line options, so you can combine multiple
options in your single interpreter argument. For example, to add the <tt>-q</tt>
option to the preceding example you could change the interpreter directive to:</p><pre>#!/usr/sbin/dtrace -qs</pre><p>If you specify multiple option letters, the <tt>-s</tt> option must always end
the list of boolean options so that the next argument (the interpreter
file name) is processed as the argument corresponding to the <tt>-s</tt> option.</p><p>If you need to specify more than one option that requires an
argument in your interpreter file, you will not be able to fit
all your options and arguments into the single interpreter argument. Instead, use
the <tt>#pragma D option</tt> directive syntax to set your options. All of the <tt>dtrace</tt>
command-line options have <tt>#pragma</tt> equivalents that you can use, as shown in
<a href="chp-opt.html">Chapter&nbsp;16, Options and Tunables</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-script.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-script-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

