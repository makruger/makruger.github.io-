<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Macro Variables - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Dynamic Tracing Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-script-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-script-3.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chp-intro.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1 tocsp"><a href="chp-typeopexpr.html">2.&nbsp;&nbsp;Types, Operators, and Expressions</a></p>
<p class="toc level1 tocsp"><a href="chp-variables.html">3.&nbsp;&nbsp;Variables</a></p>
<p class="toc level1 tocsp"><a href="chp-prog.html">4.&nbsp;&nbsp;D Program Structure</a></p>
<p class="toc level1 tocsp"><a href="chp-pointers.html">5.&nbsp;&nbsp;Pointers and Arrays</a></p>
<p class="toc level1 tocsp"><a href="chp-strings.html">6.&nbsp;&nbsp;Strings</a></p>
<p class="toc level1 tocsp"><a href="chp-structs.html">7.&nbsp;&nbsp;Structs and Unions</a></p>
<p class="toc level1 tocsp"><a href="chp-types.html">8.&nbsp;&nbsp;Type and Constant Definitions</a></p>
<p class="toc level1 tocsp"><a href="chp-aggs.html">9.&nbsp;&nbsp;Aggregations</a></p>
<p class="toc level1 tocsp"><a href="chp-actsub.html">10.&nbsp;&nbsp;Actions and Subroutines</a></p>
<p class="toc level1 tocsp"><a href="chp-buf.html">11.&nbsp;&nbsp;Buffers and Buffering</a></p>
<p class="toc level1 tocsp"><a href="chp-fmt.html">12.&nbsp;&nbsp;Output Formatting</a></p>
<p class="toc level1 tocsp"><a href="chp-spec.html">13.&nbsp;&nbsp;Speculative Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace1m.html">14.&nbsp;&nbsp;<tt>dtrace</tt>(1M) Utility</a></p>
<p class="toc level1 tocsp"><a href="chp-script.html">15.&nbsp;&nbsp;Scripting</a></p>
<p class="toc level2"><a href="chp-script-1.html">Interpreter Files</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Macro Variables</a></p>
</div>
<p class="toc level2"><a href="chp-script-3.html">Macro Arguments</a></p>
<p class="toc level2"><a href="chp-script-4.html">Target Process ID</a></p>
<p class="toc level1 tocsp"><a href="chp-opt.html">16.&nbsp;&nbsp;Options and Tunables</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace.html">17.&nbsp;&nbsp;<tt>dtrace</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-lockstat.html">18.&nbsp;&nbsp;<tt>lockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-profile.html">19.&nbsp;&nbsp;<tt>profile</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fbt.html">20.&nbsp;&nbsp;<tt>fbt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-syscall.html">21.&nbsp;&nbsp;<tt>syscall</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sdt.html">22.&nbsp;&nbsp;<tt>sdt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sysinfo.html">23.&nbsp;&nbsp;<tt>sysinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-vminfo.html">24.&nbsp;&nbsp;<tt>vminfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-proc.html">25.&nbsp;&nbsp;<tt>proc</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sched.html">26.&nbsp;&nbsp;<tt>sched</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-io.html">27.&nbsp;&nbsp;<tt>io</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-mib.html">28.&nbsp;&nbsp;<tt>mib</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fpuinfo.html">29.&nbsp;&nbsp;<tt>fpuinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-pid.html">30.&nbsp;&nbsp;<tt>pid</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-plockstat.html">31.&nbsp;&nbsp;<tt>plockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fasttrap.html">32.&nbsp;&nbsp;<tt>fasttrap</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-user.html">33.&nbsp;&nbsp;User Process Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-usdt.html">34.&nbsp;&nbsp;Statically Defined Tracing for User Applications</a></p>
<p class="toc level1 tocsp"><a href="chp-sec.html">35.&nbsp;&nbsp;Security</a></p>
<p class="toc level1 tocsp"><a href="chp-anon.html">36.&nbsp;&nbsp;Anonymous Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-post.html">37.&nbsp;&nbsp;Postmortem Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-perf.html">38.&nbsp;&nbsp;Performance Considerations</a></p>
<p class="toc level1 tocsp"><a href="chp-stab.html">39.&nbsp;&nbsp;Stability</a></p>
<p class="toc level1 tocsp"><a href="chp-xlate.html">40.&nbsp;&nbsp;Translators</a></p>
<p class="toc level1 tocsp"><a href="chp-vers.html">41.&nbsp;&nbsp;Versioning</a></p>
<p class="toc level1 tocsp"><a href="gloss01.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chp-script-2"></a><h3>Macro Variables</h3>
<p><a name="indexterm-277"></a>The D compiler defines a set of built-in macro variables that you
can use when writing D programs or interpreter files. Macro variables are
identifiers that are prefixed with a dollar sign (<tt>$</tt>) and are expanded
once by the D compiler when processing your input file. The D
compiler provides the following macro variables:</p><a name="tbl-macros"></a><h6>Table&nbsp;15-1 D Macro Variables</h6><table><col width="33%"><col width="33%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Name</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Reference</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$[0-9]+</tt></p></td>
<td align="left" valign="top" scope="row"><p>macro arguments</p></td>
<td align="left" valign="top" scope="row"><p>See <a href="chp-script-3.html">Macro Arguments</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$egid</tt></p></td>
<td align="left" valign="top" scope="row"><p>effective group-ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getegid-2?a=view"><tt>getegid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$euid</tt></p></td>
<td align="left" valign="top" scope="row"><p>effective user-ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/geteuid-2?a=view"><tt>geteuid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$gid</tt></p></td>
<td align="left" valign="top" scope="row"><p>real group-ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getgid-2?a=view"><tt>getgid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$pid</tt></p></td>
<td align="left" valign="top" scope="row"><p>process ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getpid-2?a=view"><tt>getpid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$pgid</tt></p></td>
<td align="left" valign="top" scope="row"><p>process
group ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getpgid-2?a=view"><tt>getpgid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$ppid</tt></p></td>
<td align="left" valign="top" scope="row"><p>parent process ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getppid-2?a=view"><tt>getppid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$projid</tt></p></td>
<td align="left" valign="top" scope="row"><p>project ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getprojid-2?a=view"><tt>getprojid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$sid</tt></p></td>
<td align="left" valign="top" scope="row"><p>session ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getsid-2?a=view"><tt>getsid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$target</tt></p></td>
<td align="left" valign="top" scope="row"><p>target process ID</p></td>
<td align="left" valign="top" scope="row"><p>See <a href="chp-script-4.html">Target Process ID</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$taskid</tt></p></td>
<td align="left" valign="top" scope="row"><p>task ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/gettaskid-2?a=view"><tt>gettaskid</tt>(2)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>$uid</tt></p></td>
<td align="left" valign="top" scope="row"><p>real user-ID</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getuid-2?a=view"><tt>getuid</tt>(2)</a></p></td>
</tr>
</table><p>Except for the <tt>$[0-9]+</tt> macro arguments and the <tt>$target</tt> macro variable, the
macro variables all expand to integers corresponding to system attributes such as
the process ID and user ID. The variables expand to the attribute
value associated with the current <tt>dtrace</tt> process itself, or whatever process is
running the D compiler.</p><p>Using macro variables in interpreter files enables you to create persistent D
programs that do not need to be edited each time you want
to use them. For example, to count all system calls except those
executed by the <tt>dtrace</tt> command, you can use the following D program
clause containing <tt>$pid</tt>:</p><pre>syscall:::entry
/pid != $pid/
{
    @calls = count();
}</pre><p>This clause always produces the desired result, even though each invocation of
the <tt>dtrace</tt> command will have a different process ID.</p><p>Macro variables can be used anywhere an integer, identifier, or string can
be used in a D program. Macro variables are expanded only once
(that is, not recursively) when the input file is parsed. Each macro
variable is expanded to form a separate input token, and cannot be
concatenated with other text to yield a single token. For example, if
<tt>$pid</tt> expands to the value 456, the D code:</p><pre>123$pid</pre><p>would expand to the two adjacent tokens 123 and 456, resulting in
a syntax error, rather than the single integer token 123456.</p><p>Macro variables are expanded and concatenated with adjacent text inside of D
probe descriptions at the start of your program clauses. For example, the
following clause uses the DTrace <tt>pid</tt> provider to instrument the <tt>dtrace</tt> command:</p><pre>pid$pid:libc.so:printf:entry
{
    ...
}</pre><p>Macro variables are only expanded once within each probe description field; they
may not contain probe description delimiters (<tt>:</tt>).</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-script-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-script-3.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

