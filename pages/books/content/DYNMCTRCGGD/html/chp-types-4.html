<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Type Namespaces - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Dynamic Tracing Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-types-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-aggs.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chp-intro.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1 tocsp"><a href="chp-typeopexpr.html">2.&nbsp;&nbsp;Types, Operators, and Expressions</a></p>
<p class="toc level1 tocsp"><a href="chp-variables.html">3.&nbsp;&nbsp;Variables</a></p>
<p class="toc level1 tocsp"><a href="chp-prog.html">4.&nbsp;&nbsp;D Program Structure</a></p>
<p class="toc level1 tocsp"><a href="chp-pointers.html">5.&nbsp;&nbsp;Pointers and Arrays</a></p>
<p class="toc level1 tocsp"><a href="chp-strings.html">6.&nbsp;&nbsp;Strings</a></p>
<p class="toc level1 tocsp"><a href="chp-structs.html">7.&nbsp;&nbsp;Structs and Unions</a></p>
<p class="toc level1 tocsp"><a href="chp-types.html">8.&nbsp;&nbsp;Type and Constant Definitions</a></p>
<p class="toc level2"><a href="chp-types-1.html">Typedef</a></p>
<p class="toc level2"><a href="chp-types-2.html">Enumerations</a></p>
<p class="toc level2"><a href="chp-types-3.html">Inlines</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Type Namespaces</a></p>
</div>
<p class="toc level1 tocsp"><a href="chp-aggs.html">9.&nbsp;&nbsp;Aggregations</a></p>
<p class="toc level1 tocsp"><a href="chp-actsub.html">10.&nbsp;&nbsp;Actions and Subroutines</a></p>
<p class="toc level1 tocsp"><a href="chp-buf.html">11.&nbsp;&nbsp;Buffers and Buffering</a></p>
<p class="toc level1 tocsp"><a href="chp-fmt.html">12.&nbsp;&nbsp;Output Formatting</a></p>
<p class="toc level1 tocsp"><a href="chp-spec.html">13.&nbsp;&nbsp;Speculative Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace1m.html">14.&nbsp;&nbsp;<tt>dtrace</tt>(1M) Utility</a></p>
<p class="toc level1 tocsp"><a href="chp-script.html">15.&nbsp;&nbsp;Scripting</a></p>
<p class="toc level1 tocsp"><a href="chp-opt.html">16.&nbsp;&nbsp;Options and Tunables</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace.html">17.&nbsp;&nbsp;<tt>dtrace</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-lockstat.html">18.&nbsp;&nbsp;<tt>lockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-profile.html">19.&nbsp;&nbsp;<tt>profile</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fbt.html">20.&nbsp;&nbsp;<tt>fbt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-syscall.html">21.&nbsp;&nbsp;<tt>syscall</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sdt.html">22.&nbsp;&nbsp;<tt>sdt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sysinfo.html">23.&nbsp;&nbsp;<tt>sysinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-vminfo.html">24.&nbsp;&nbsp;<tt>vminfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-proc.html">25.&nbsp;&nbsp;<tt>proc</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sched.html">26.&nbsp;&nbsp;<tt>sched</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-io.html">27.&nbsp;&nbsp;<tt>io</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-mib.html">28.&nbsp;&nbsp;<tt>mib</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fpuinfo.html">29.&nbsp;&nbsp;<tt>fpuinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-pid.html">30.&nbsp;&nbsp;<tt>pid</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-plockstat.html">31.&nbsp;&nbsp;<tt>plockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fasttrap.html">32.&nbsp;&nbsp;<tt>fasttrap</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-user.html">33.&nbsp;&nbsp;User Process Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-usdt.html">34.&nbsp;&nbsp;Statically Defined Tracing for User Applications</a></p>
<p class="toc level1 tocsp"><a href="chp-sec.html">35.&nbsp;&nbsp;Security</a></p>
<p class="toc level1 tocsp"><a href="chp-anon.html">36.&nbsp;&nbsp;Anonymous Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-post.html">37.&nbsp;&nbsp;Postmortem Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-perf.html">38.&nbsp;&nbsp;Performance Considerations</a></p>
<p class="toc level1 tocsp"><a href="chp-stab.html">39.&nbsp;&nbsp;Stability</a></p>
<p class="toc level1 tocsp"><a href="chp-xlate.html">40.&nbsp;&nbsp;Translators</a></p>
<p class="toc level1 tocsp"><a href="chp-vers.html">41.&nbsp;&nbsp;Versioning</a></p>
<p class="toc level1 tocsp"><a href="gloss01.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chp-types-4"></a><h3>Type Namespaces</h3>
<p><a name="indexterm-147"></a>This section discusses D namespaces and namespace issues related to types. In traditional languages
such as ANSI-C, type visibility is determined by whether a type is nested
inside of a function or other declaration. Types declared at the outer scope
of a C program are associated with a single global namespace and are
visible throughout the entire program. Types defined in C header files are typically
included in this outer scope. Unlike these languages, D provides access to types
from multiple outer scopes.</p><p>D is a language that facilitates dynamic observability across multiple layers of a
software stack, including the operating system kernel, an associated set of loadable kernel
modules, and user processes running on the system. A single D program may
instantiate probes to gather data from multiple kernel modules or other software entities
that are compiled into independent binary objects. Therefore, more than one data type
of the same name, perhaps with different definitions, might be present in the
universe of types available to DTrace and the D compiler. To manage this
situation, the D compiler associates each type with a namespace identified by the
containing program object. Types from a particular program object can be accessed by
specifying the object name and backquote (<tt>`</tt>) scoping operator in any type name.</p><p>For example, if a kernel module named <tt>foo</tt> contains the following C type
declaration:</p><pre>typedef struct bar {
    int x;
} bar_t;</pre><p>then the types <tt>struct bar</tt> and <tt>bar_t</tt> could be accessed from D using the
type names:</p><pre>struct foo`bar                foo`bar_t</pre><p>The backquote operator can be used in any context where a type
name is appropriate, including when specifying the type for D variable declarations or cast
expressions in D probe clauses.</p><p><a name="indexterm-148"></a>The D compiler also provides two special built-in type namespaces that use the
names <tt>C</tt> and <tt>D</tt> respectively. The C type namespace is initially populated with
the standard ANSI-C intrinsic types such as <tt>int</tt>. In addition, type definitions acquired using
the C preprocessor <a href="http://docs.sun.com/doc/819-2239/cpp-1?a=view"><tt>cpp</tt>(1)</a> using the <tt>dtrace</tt> <tt>-C</tt> option will be processed by and
added to the C scope. As a result, you can include C
header files containing type declarations which are already visible in another type namespace
without causing a compilation error.</p><p>The D type namespace is initially populated with the D type intrinsics such
as <tt>int</tt> and <tt>string</tt> as well as the built-in D type aliases such
as <tt>uint32_t</tt>. Any new type declarations that appear in the D program source
are automatically added to the D type namespace. If you create a complex
type such as a <tt>struct</tt> in your D program consisting of member types
from other namespaces, the member types will be copied into the D namespace
by the declaration.</p><p>When the D compiler encounters a type declaration that does not specify an
explicit namespace using the backquote operator, the compiler searches the set of active
type namespaces to find a match using the specified type name. The C
namespace is always searched first, followed by the D namespace. If the type
name is not found in either the C or D namespace, the
type namespaces of the active kernel modules are searched in ascending order by
kernel module ID. This ordering guarantees that the binary objects that form the
core kernel are searched before any loadable kernel modules, but does not guarantee
any ordering properties among the loadable modules. You should use the scoping operator when
accessing types defined in loadable kernel modules to avoid type name conflicts with
other kernel modules.</p><p>The D compiler uses compressed ANSI-C debugging information provided with the core Solaris
kernel modules in order to automatically access the types associated with the operating
system source code without the need for accessing the corresponding C include files.
This symbolic debugging information might not be available for all kernel modules on
your system. The D compiler will report an error if you attempt to
access a type within the namespace of a module that lacks compressed C
debugging information intended for use with DTrace.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-types-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-aggs.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

