<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Pointer and Array Relationship - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Dynamic Tracing Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-pointers-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-pointers-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chp-intro.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1 tocsp"><a href="chp-typeopexpr.html">2.&nbsp;&nbsp;Types, Operators, and Expressions</a></p>
<p class="toc level1 tocsp"><a href="chp-variables.html">3.&nbsp;&nbsp;Variables</a></p>
<p class="toc level1 tocsp"><a href="chp-prog.html">4.&nbsp;&nbsp;D Program Structure</a></p>
<p class="toc level1 tocsp"><a href="chp-pointers.html">5.&nbsp;&nbsp;Pointers and Arrays</a></p>
<p class="toc level2"><a href="chp-pointers-1.html">Pointers and Addresses</a></p>
<p class="toc level2"><a href="chp-pointers-2.html">Pointer Safety</a></p>
<p class="toc level2"><a href="chp-pointers-3.html">Array Declarations and Storage</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Pointer and Array Relationship</a></p>
</div>
<p class="toc level2"><a href="chp-pointers-5.html">Pointer Arithmetic</a></p>
<p class="toc level2"><a href="chp-pointers-6.html">Generic Pointers</a></p>
<p class="toc level2"><a href="chp-pointers-7.html">Multi-Dimensional Arrays</a></p>
<p class="toc level2"><a href="chp-pointers-8.html">Pointers to DTrace Objects</a></p>
<p class="toc level2"><a href="chp-pointers-9.html">Pointers and Address Spaces</a></p>
<p class="toc level1 tocsp"><a href="chp-strings.html">6.&nbsp;&nbsp;Strings</a></p>
<p class="toc level1 tocsp"><a href="chp-structs.html">7.&nbsp;&nbsp;Structs and Unions</a></p>
<p class="toc level1 tocsp"><a href="chp-types.html">8.&nbsp;&nbsp;Type and Constant Definitions</a></p>
<p class="toc level1 tocsp"><a href="chp-aggs.html">9.&nbsp;&nbsp;Aggregations</a></p>
<p class="toc level1 tocsp"><a href="chp-actsub.html">10.&nbsp;&nbsp;Actions and Subroutines</a></p>
<p class="toc level1 tocsp"><a href="chp-buf.html">11.&nbsp;&nbsp;Buffers and Buffering</a></p>
<p class="toc level1 tocsp"><a href="chp-fmt.html">12.&nbsp;&nbsp;Output Formatting</a></p>
<p class="toc level1 tocsp"><a href="chp-spec.html">13.&nbsp;&nbsp;Speculative Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace1m.html">14.&nbsp;&nbsp;<tt>dtrace</tt>(1M) Utility</a></p>
<p class="toc level1 tocsp"><a href="chp-script.html">15.&nbsp;&nbsp;Scripting</a></p>
<p class="toc level1 tocsp"><a href="chp-opt.html">16.&nbsp;&nbsp;Options and Tunables</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace.html">17.&nbsp;&nbsp;<tt>dtrace</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-lockstat.html">18.&nbsp;&nbsp;<tt>lockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-profile.html">19.&nbsp;&nbsp;<tt>profile</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fbt.html">20.&nbsp;&nbsp;<tt>fbt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-syscall.html">21.&nbsp;&nbsp;<tt>syscall</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sdt.html">22.&nbsp;&nbsp;<tt>sdt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sysinfo.html">23.&nbsp;&nbsp;<tt>sysinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-vminfo.html">24.&nbsp;&nbsp;<tt>vminfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-proc.html">25.&nbsp;&nbsp;<tt>proc</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sched.html">26.&nbsp;&nbsp;<tt>sched</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-io.html">27.&nbsp;&nbsp;<tt>io</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-mib.html">28.&nbsp;&nbsp;<tt>mib</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fpuinfo.html">29.&nbsp;&nbsp;<tt>fpuinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-pid.html">30.&nbsp;&nbsp;<tt>pid</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-plockstat.html">31.&nbsp;&nbsp;<tt>plockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fasttrap.html">32.&nbsp;&nbsp;<tt>fasttrap</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-user.html">33.&nbsp;&nbsp;User Process Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-usdt.html">34.&nbsp;&nbsp;Statically Defined Tracing for User Applications</a></p>
<p class="toc level1 tocsp"><a href="chp-sec.html">35.&nbsp;&nbsp;Security</a></p>
<p class="toc level1 tocsp"><a href="chp-anon.html">36.&nbsp;&nbsp;Anonymous Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-post.html">37.&nbsp;&nbsp;Postmortem Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-perf.html">38.&nbsp;&nbsp;Performance Considerations</a></p>
<p class="toc level1 tocsp"><a href="chp-stab.html">39.&nbsp;&nbsp;Stability</a></p>
<p class="toc level1 tocsp"><a href="chp-xlate.html">40.&nbsp;&nbsp;Translators</a></p>
<p class="toc level1 tocsp"><a href="chp-vers.html">41.&nbsp;&nbsp;Versioning</a></p>
<p class="toc level1 tocsp"><a href="gloss01.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chp-pointers-4"></a><h3>Pointer and Array Relationship</h3>
<p><a name="indexterm-100"></a><a name="indexterm-101"></a>Pointers and arrays have a special relationship in D, just as they
do in ANSI-C. An array is represented by a variable that is
associated with the address of its first storage location. A pointer is
also the address of a storage location with a defined type, so
D permits the use of the array [ ] index notation with
both pointer variables and array variables. For example, the following two D
fragments are equivalent in meaning:</p><pre>p = &amp;a[0];                trace(a[2]);
trace(p[2]);</pre><p>In the left-hand fragment, the pointer <tt>p</tt> is assigned to the address
of the first array element in <tt>a</tt> by applying the <tt>&amp;</tt> operator
to the expression <tt>a[0]</tt>. The expression <tt>p[2]</tt> traces the value of the
third array element (index 2). Because <tt>p</tt> now contains the same address
associated with <tt>a</tt>, this expression yields the same value as <tt>a[2]</tt>, shown
in the right-hand fragment. One consequence of this equivalence is that C
and D permit you to access any index of any pointer or
array. Array bounds checking is not performed for you by the compiler
or DTrace runtime environment. If you access memory beyond the end of
an array's predefined value, you will either get an unexpected result or
DTrace will report an invalid address error, as shown in the previous
example. As always, you can't damage DTrace itself or your operating system,
but you will need to debug your D program.</p><p>The difference between pointers and arrays is that a pointer variable refers
to a separate piece of storage that contains the integer address of
some other storage. An array variable names the array storage itself, not
the location of an integer that in turn contains the location of
the array. This difference is illustrated in the following diagram:</p><a name="fig-ptrarr"></a><h6>Figure&nbsp;5-2 Pointer and Array Storage</h6><img src="figures/arrptr.gif" alt="Diagram shows a pointer to an array of five objects."></img><p>This difference is manifested in the D syntax if you attempt to
assign pointers and scalar arrays. If <tt>x</tt> and <tt>y</tt> are pointer variables,
the expression <tt>x = y</tt> is legal; it simply copies the pointer address in
<tt>y</tt> to the storage location named by <tt>x</tt>. If <tt>x</tt> and <tt>y</tt>
are scalar array variables, the expression <tt>x = y</tt> is not legal. Arrays may
not be assigned as a whole in D. However, an array variable
or symbol name can be used in any context where a pointer
is permitted. If <tt>p</tt> is a pointer and <tt>a</tt> is an array,
the statement <tt>p = a</tt> is permitted; this statement is equivalent to the statement
<tt>p = &amp;a[0]</tt>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-pointers-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-pointers-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

