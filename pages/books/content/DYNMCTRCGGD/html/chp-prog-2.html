<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Probe Descriptions - Solaris Dynamic Tracing Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-11-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Dynamic Tracing Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-prog-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-prog-pred.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chp-intro.html">1.&nbsp;&nbsp;Introduction</a></p>
<p class="toc level1 tocsp"><a href="chp-typeopexpr.html">2.&nbsp;&nbsp;Types, Operators, and Expressions</a></p>
<p class="toc level1 tocsp"><a href="chp-variables.html">3.&nbsp;&nbsp;Variables</a></p>
<p class="toc level1 tocsp"><a href="chp-prog.html">4.&nbsp;&nbsp;D Program Structure</a></p>
<p class="toc level2"><a href="chp-prog-1.html">Probe Clauses and Declarations</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Probe Descriptions</a></p>
</div>
<p class="toc level2"><a href="chp-prog-pred.html">Predicates</a></p>
<p class="toc level2"><a href="chp-prog-4.html">Actions</a></p>
<p class="toc level2"><a href="chp-prog-5.html">Use of the C Preprocessor</a></p>
<p class="toc level1 tocsp"><a href="chp-pointers.html">5.&nbsp;&nbsp;Pointers and Arrays</a></p>
<p class="toc level1 tocsp"><a href="chp-strings.html">6.&nbsp;&nbsp;Strings</a></p>
<p class="toc level1 tocsp"><a href="chp-structs.html">7.&nbsp;&nbsp;Structs and Unions</a></p>
<p class="toc level1 tocsp"><a href="chp-types.html">8.&nbsp;&nbsp;Type and Constant Definitions</a></p>
<p class="toc level1 tocsp"><a href="chp-aggs.html">9.&nbsp;&nbsp;Aggregations</a></p>
<p class="toc level1 tocsp"><a href="chp-actsub.html">10.&nbsp;&nbsp;Actions and Subroutines</a></p>
<p class="toc level1 tocsp"><a href="chp-buf.html">11.&nbsp;&nbsp;Buffers and Buffering</a></p>
<p class="toc level1 tocsp"><a href="chp-fmt.html">12.&nbsp;&nbsp;Output Formatting</a></p>
<p class="toc level1 tocsp"><a href="chp-spec.html">13.&nbsp;&nbsp;Speculative Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace1m.html">14.&nbsp;&nbsp;<tt>dtrace</tt>(1M) Utility</a></p>
<p class="toc level1 tocsp"><a href="chp-script.html">15.&nbsp;&nbsp;Scripting</a></p>
<p class="toc level1 tocsp"><a href="chp-opt.html">16.&nbsp;&nbsp;Options and Tunables</a></p>
<p class="toc level1 tocsp"><a href="chp-dtrace.html">17.&nbsp;&nbsp;<tt>dtrace</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-lockstat.html">18.&nbsp;&nbsp;<tt>lockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-profile.html">19.&nbsp;&nbsp;<tt>profile</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fbt.html">20.&nbsp;&nbsp;<tt>fbt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-syscall.html">21.&nbsp;&nbsp;<tt>syscall</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sdt.html">22.&nbsp;&nbsp;<tt>sdt</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sysinfo.html">23.&nbsp;&nbsp;<tt>sysinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-vminfo.html">24.&nbsp;&nbsp;<tt>vminfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-proc.html">25.&nbsp;&nbsp;<tt>proc</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-sched.html">26.&nbsp;&nbsp;<tt>sched</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-io.html">27.&nbsp;&nbsp;<tt>io</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-mib.html">28.&nbsp;&nbsp;<tt>mib</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fpuinfo.html">29.&nbsp;&nbsp;<tt>fpuinfo</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-pid.html">30.&nbsp;&nbsp;<tt>pid</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-plockstat.html">31.&nbsp;&nbsp;<tt>plockstat</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-fasttrap.html">32.&nbsp;&nbsp;<tt>fasttrap</tt> Provider</a></p>
<p class="toc level1 tocsp"><a href="chp-user.html">33.&nbsp;&nbsp;User Process Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-usdt.html">34.&nbsp;&nbsp;Statically Defined Tracing for User Applications</a></p>
<p class="toc level1 tocsp"><a href="chp-sec.html">35.&nbsp;&nbsp;Security</a></p>
<p class="toc level1 tocsp"><a href="chp-anon.html">36.&nbsp;&nbsp;Anonymous Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-post.html">37.&nbsp;&nbsp;Postmortem Tracing</a></p>
<p class="toc level1 tocsp"><a href="chp-perf.html">38.&nbsp;&nbsp;Performance Considerations</a></p>
<p class="toc level1 tocsp"><a href="chp-stab.html">39.&nbsp;&nbsp;Stability</a></p>
<p class="toc level1 tocsp"><a href="chp-xlate.html">40.&nbsp;&nbsp;Translators</a></p>
<p class="toc level1 tocsp"><a href="chp-vers.html">41.&nbsp;&nbsp;Versioning</a></p>
<p class="toc level1 tocsp"><a href="gloss01.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chp-prog-2"></a><h3>Probe Descriptions</h3>
<p><a name="indexterm-87"></a>Every D program clause begins with a list of one or more
probe descriptions, each taking the usual form:</p><p><i>provider</i>:<i>module</i>:<i>function</i>:<i>name</i></p><p>If one or more fields of the probe description are omitted, the
specified fields are interpreted from right to left by the D compiler.
For example, the probe description <tt>foo:bar</tt> would match a probe with function
<tt>foo</tt> and name <tt>bar</tt> regardless of the value of the probe's provider
and module fields. Therefore, a probe description is really more accurately viewed
as a <b>pattern</b> that can be used to match one or more
probes based on their names.</p><p><a name="indexterm-88"></a>You should write your D probe descriptions specifying all four field delimiters
so that you can specify the desired <b>provider</b> on the left-hand side.
If you don't specify the provider, you might obtain unexpected results if
multiple providers publish probes with the same name. Similarly, future versions of
DTrace might include new providers whose probes unintentionally match your partially specified
probe descriptions. You can specify a provider but match any of its
probes by leaving any of the module, function, and name fields blank.
For example, the description <tt>syscall:::</tt> can be used to match every probe
published by the DTrace <tt>syscall</tt> provider.</p><p><a name="indexterm-89"></a>Probe descriptions also support a pattern matching syntax similar to the shell
<b>globbing</b> pattern matching syntax described in <a href="http://docs.sun.com/doc/819-2239/sh-1?a=view"><tt>sh</tt>(1)</a>. Before matching a probe to
a description, DTrace scans each description field for the characters <tt>*</tt>, <tt>?</tt>,
and <tt>[</tt>. If one of these characters appears in a probe description
field and is not preceded by a <tt>\</tt>, the field is regarded
as a pattern. The description pattern must match the entire corresponding field
of a given probe. The complete probe description must match on every
field in order to successfully match and enable a probe. A probe
description field that is not a pattern must exactly match the corresponding
field of the probe. A description field that is empty matches any
probe.</p><p>The special characters in the following table are recognized in probe name
patterns:</p><a name="tbl-glob"></a><h6>Table&nbsp;4-1 Probe Name Pattern Matching Characters</h6><table><col width="25%"><col width="75%"><tr><th align="left" valign="top" scope="column"><p>Symbol</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>*</tt></p></td>
<td align="left" valign="top" scope="row"><p>Matches any string, including the null string.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>?</tt></p></td>
<td align="left" valign="top" scope="row"><p>Matches any single character.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>[ ... ]</tt></p></td>
<td align="left" valign="top" scope="row"><p>Matches any one
of the enclosed characters. A pair of characters separated by <tt>-</tt> matches
any character between the pair, inclusive. If the first character after the
<tt>[</tt> is <tt>!</tt>, any character not enclosed in the set is matched.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>\</tt></p></td>
<td align="left" valign="top" scope="row"><p>Interpret
the next character as itself, without any special meaning.</p></td>
</tr>
</table><p>Pattern match characters can be used in any or all of the
four fields of your probe descriptions. You can also use patterns to
list matching probes by using the patterns on the command line with
<tt>dtrace</tt> <tt>-l</tt>. For example, the command <tt>dtrace -l -f kmem_*</tt> lists all DTrace probes in
functions whose names begin with the prefix <tt>kmem_</tt>.</p><p>If you want to specify the same predicate and actions for more
than one probe description or description pattern, you can place the descriptions
in a comma-separated list. For example, the following D program would trace
a timestamp each time probes associated with entry to system calls containing
the words &ldquo;<tt>lwp</tt>&rdquo; or &ldquo;<tt>sock</tt>&rdquo; fire:</p><pre>syscall::*lwp*:entry, syscall::*sock*:entry
{
    trace(timestamp);
}</pre><p>A probe description may also specify a probe using its integer probe
ID. For example, the clause:</p><pre>12345
{
    trace(timestamp);
}</pre><p>could be used to enable probe ID 12345, as reported by <tt>dtrace -l -i 12345</tt>.
You should always write your D programs using human-readable probe descriptions. Integer
probe IDs are not guaranteed to remain consistent as DTrace provider kernel
modules are loaded and unloaded or following a reboot.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chp-prog-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chp-prog-pred.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

