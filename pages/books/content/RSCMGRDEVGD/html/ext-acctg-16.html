<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Extended Accounting API Functions - Solaris Containers: Resource Management and Solaris Zones Developer's Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Containers: Resource Management and Solaris Zones Developer's Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ext-acctg-12.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ext-acctg-15.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="concepts-2.html">1.&nbsp;&nbsp;Resource Management in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="tasks-3.html">2.&nbsp;&nbsp;Projects and Tasks</a></p>
<p class="toc level1 tocsp"><a href="ext-acctg-11.html">3.&nbsp;&nbsp;Using the C Interface to Extended Accounting</a></p>
<p class="toc level2"><a href="ext-acctg-12.html">Overview of the C Interface to Extended Accounting</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Extended Accounting API Functions</a></p>
</div>
<p class="toc level2"><a href="ext-acctg-15.html">C Code Examples for Accessing <tt>exacct</tt> Files</a></p>
<p class="toc level2"><a href="ext-acctg-1.html">Programming Issues With <tt>exacct</tt> Files</a></p>
<p class="toc level1 tocsp"><a href="extacctg-perl-1.html">4.&nbsp;&nbsp;Using the Perl Interface to Extended Accounting</a></p>
<p class="toc level1 tocsp"><a href="resource-ctrls-8.html">5.&nbsp;&nbsp;Resource Controls</a></p>
<p class="toc level1 tocsp"><a href="resource-pools-5.html">6.&nbsp;&nbsp;Resource Pools</a></p>
<p class="toc level1 tocsp"><a href="fquzd.html">7.&nbsp;&nbsp;Design Considerations for Resource Management Applications in Solaris Zones</a></p>
<p class="toc level1 tocsp"><a href="faate.html">8.&nbsp;&nbsp;Configuration Examples</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ext-acctg-16"></a><h3>Extended Accounting API Functions</h3>
<p>The extended accounting API contains functions that perform the following: </p>
<ul><li><p><tt>exacct</tt> system calls</p></li>
<li><p>Operations on the <tt>exacct</tt> file</p></li>
<li><p>Operations on <tt>exacct</tt> objects</p></li>
<li><p>Miscellaneous Operations</p></li></ul>


<a name="ext-acctg-17"></a><h4><tt>exacct</tt> System Calls</h4>
<table><tr><td align="left" valign="top" scope="row"><p></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
</tr>
</table><p>The following table lists the system calls that interact with the extended accounting
subsystem.</p><a name="fygec"></a><h6>Table&nbsp;3-1 Extended Accounting System Calls</h6><table><col width="19.92*"><col width="80.08*"><tr><th align="left" valign="top" scope="column"><p>Function</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/putacct-2?a=view"><tt>putacct</tt>(2)</a></p></td>
<td align="left" valign="top" scope="row"><p>Provides privileged processes with the ability to tag accounting records with additional data
that is specific to the process</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/getacct-2?a=view"><tt>getacct</tt>(2)</a></p></td>
<td align="left" valign="top" scope="row"><p>Enables privileged processes to request extended accounting
buffers from the kernel for currently executing tasks and processes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2241/wracct-2?a=view"><tt>wracct</tt>(2)</a></p></td>
<td align="left" valign="top" scope="row"><p>Requests the kernel to
write resource usage data for a specified task or process</p></td>
</tr>
</table>

<a name="ext-acctg-18"></a><h4>Operations on the <tt>exacct</tt> File</h4>
<p>These functions provide access to the <tt>exacct</tt> files:</p><a name="fygdy"></a><h6>Table&nbsp;3-2 <tt>exacct</tt> File Functions</h6><table><col width="33.47*"><col width="66.53*"><tr><th align="left" valign="top" scope="column"><p>Function</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-open-3exacct?a=view"><tt>ea_open</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Opens an <tt>exacct</tt> file.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-close-3exacct?a=view"><tt>ea_close</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Closes an
<tt>exacct</tt> file.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-get-object-3exacct?a=view"><tt>ea_get_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>First time use on a group of objects reads data into
an <tt>ea_object_t</tt> structure. Subsequent use on the group cycles through the objects in
the group.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-write-object-3exacct?a=view"><tt>ea_write_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Appends the specified object to the open <tt>exacct</tt> file.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-next-object-3exacct?a=view"><tt>ea_next_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Reads the basic
fields (<tt>eo_catalog</tt> and <tt>eo_type</tt>) into an <tt>ea_object_t</tt> structure and rewinds to the head of
the record.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-previous-object-3exacct?a=view"><tt>ea_previous_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Skips back one object in the <tt>exacct</tt> file and reads the basic
fields (<tt>eo_catalog</tt> and <tt>eo_type</tt>) into an <tt>ea_object_t</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-get-hostname-3exacct?a=view"><tt>ea_get_hostname</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Gets the name of the host on
which the <tt>exacct</tt> file was created.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-get-creator-3exacct?a=view"><tt>ea_get_creator</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Determines the creator of the <tt>exacct</tt> file.</p></td>
</tr>
</table>

<a name="ext-acctg-19"></a><h4>Operations on <tt>exacct</tt> Objects</h4>
<p>These functions are used to access <tt>exacct</tt> objects:</p><a name="fygjd"></a><h6>Table&nbsp;3-3 <tt>exacct</tt> Object Functions</h6><table><col width="33.19*"><col width="66.81*"><tr><th align="left" valign="top" scope="column"><p>Function</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-set-item-3exacct?a=view"><tt>ea_set_item</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Assigns an <tt>exacct</tt> object and
sets the value(s).</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-set-group-3exacct?a=view"><tt>ea_set_group</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Sets the values of a group of <tt>exacct</tt> objects.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-match-object-catalog-3exacct?a=view"><tt>ea_match_object_catalog</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Checks an
<tt>exacct</tt> object's mask to see if that object has a specific catalog tag.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-attach-to-object-3exacct?a=view"><tt>ea_attach_to_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Attaches
an <tt>exacct</tt> object to a specified <tt>exacct</tt> object.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-attach-to-group-3exacct?a=view"><tt>ea_attach_to_group</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Attaches a chain of <tt>exacct</tt>
objects as member items of a specified group.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-free-item-3exacct?a=view"><tt>ea_free_item</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Frees the <tt>value</tt> fields in the
specified <tt>exacct</tt> object.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-free-object-3exacct?a=view"><tt>ea_free_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Frees the specified <tt>exacct</tt> object and any attached hierarchies of objects.</p></td>
</tr>
</table>

<a name="ext-acctg-20"></a><h4>Memory Management</h4>
<p>The following table lists the functions associated with extended accounting memory management. The
function name is a link to its man page.</p><a name="ext-acctg-tbl-4"></a><h6>Table&nbsp;3-4 Extended Accounting Memory Management Functions</h6><table><col width="40.27*"><col width="59.73*"><tr><th align="left" valign="top" scope="column"><p>Link to man page</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-4"></a><a href="http://docs.sun.com/doc/819-2246/ea-pack-object-3exacct?a=view"><tt>ea_pack_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Converts
an <tt>exacct</tt> object from unpacked (in-memory) representation to packed (in-file) representation.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-5"></a><a href="http://docs.sun.com/doc/819-2246/ea-unpack-object-3exacct?a=view"><tt>ea_unpack_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Converts an <tt>exacct</tt>
object from packed (in-file) representation to unpacked (in-memory) representation.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-6"></a><a href="http://docs.sun.com/doc/819-2246/ea-strdup-3exacct?a=view"><tt>ea_strdup</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Duplicates a string that is
to be stored inside an <tt>ea_object_t</tt> structure.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-7"></a><a href="http://docs.sun.com/doc/819-2246/ea-strfree-3exacct?a=view"><tt>ea_strfree</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Frees a string previously copied by
<tt>ea_strdup()</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-8"></a><a href="http://docs.sun.com/doc/819-2246/ea-alloc-3exacct?a=view"><tt>ea_alloc</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Allocates a block of memory of the requested size. This block can
be safely passed to <tt>libexacct</tt> functions, and can be safely freed by any of
 the <tt>ea_free</tt> functions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-9"></a><a href="http://docs.sun.com/doc/819-2246/ea-free-3exacct?a=view"><tt>ea_free</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Frees a block of memory previously allocated by <tt>ea_alloc()</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-10"></a><a href="http://docs.sun.com/doc/819-2246/ea-free-object-3exacct?a=view"><tt>ea_free_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Frees
variable-length data in object hierarchy.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-11"></a><a href="http://docs.sun.com/doc/819-2246/ea-free-item-3exacct?a=view"><tt>ea_free_item</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Frees value fields of designated object, if EUP_ALLOC
is specified. The object  is not freed.  <tt>ea_free_object()</tt> frees the specified object
and any attached hierarchy of objects. If the flag argument is set to
EUP_ALLOC, <tt>ea_free_object()</tt> also frees any variable-length data in the object hierarchy. If the
flag argument is set to EUP_NOALLOC, <tt>ea_free_object()</tt> does not free the variable-length
data. In particular, these flags should correspond to the flags specified in calls
to <tt>ea_unpack_object</tt>(3EXACCT).</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-12"></a><a href="http://docs.sun.com/doc/819-2246/ea-copy-object-3exacct?a=view"><tt>ea_copy_object</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p>Copies an <tt>ea_object_t</tt>. If  the source object is part of a
chain, only the current object is copied. If the source object is
a group, only  the group object is copied without its list of
members. The group object <tt>eg_nobjs</tt> and <tt>eg_objs fields</tt> are set to 0 and NULL
respectively. Use <tt>ea_copy_tree()</tt> to copy recursively a group or a list of items.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-13"></a><a href="http://docs.sun.com/doc/819-2246/ea-copy-object-tree-3exacct?a=view"><tt>ea_copy_object_tree</tt>(3EXACCT)</a></p></td>
<td align="left" valign="top" scope="row"><p><tt>ea_copy_object_tree</tt>
recursively copies an <tt>ea_object_t</tt>. All elements in the <tt>eo_next</tt> list are copied. Any
group objects are recursively copied. The returned object can be completely freed with
<tt>ea_free_object</tt>(3EXACCT) by specifying the EUP_ALLOC flag. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-14"></a><tt>ea_get_object_tree()</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reads in nobj top-level objects  from
the file, returning the same data structure that would have originally been passed
to <tt>ea_write_object()</tt>. On encountering a group object,<tt>ea_get_object()</tt> reads only the group header part of
the group. <tt>ea_get_object_tree()</tt> reads  the group and all its member items, recursing
into subrecords if necessary. The returned object data structure can be completely freed
with <tt>ea_free_object()</tt> by specifying the EUP_ALLOC flag.</p></td>
</tr>
</table>

<a name="ext-acctg-21"></a><h4>Miscellaneous Operations</h4>
<p>These functions are associated with miscellaneous operations:</p><table><tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-error-3exacct?a=view"><tt>ea_error</tt>(3EXACCT)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2246/ea-match-object-catalog-3exacct?a=view"><tt>ea_match_object_catalog</tt>(3EXACCT)</a></p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ext-acctg-12.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ext-acctg-15.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

