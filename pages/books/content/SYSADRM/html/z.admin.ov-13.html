<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Device Use in Non-Global Zones - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gelkh.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.admin.ov-42.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level3"><a href="z.admin.ov-4.html">Global Zone Visibility and Access</a></p>
<p class="toc level3"><a href="z.admin.ov-22.html">Process ID Visibility in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-24.html">System Observability in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-11.html">Non-Global Zone Node Name</a></p>
<p class="toc level3"><a href="z.admin.ov-2.html">File Systems and Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-9.html">Networking in Shared-IP Non-Global Zones</a></p>
<p class="toc level3"><a href="gelkh.html">Networking in Exclusive-IP Non-Global Zones</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Device Use in Non-Global Zones</a></p>
</div>
<p class="toc level3"><a href="z.admin.ov-42.html">Running Applications in Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-3.html">Resource Controls Used in Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-43.html">Fair Share Scheduler on a Solaris System With Zones Installed</a></p>
<p class="toc level3"><a href="z.admin.ov-6.html">Extended Accounting on a Solaris System With Zones Installed</a></p>
<p class="toc level3"><a href="z.admin.ov-18.html">Privileges in a Non-Global Zone</a></p>
<p class="toc level3"><a href="z.admin.ov-29.html">Using IP Security Architecture in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-20.html">Using Solaris Auditing in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-21.html">Core Files in Zones</a></p>
<p class="toc level3"><a href="gcogk.html">Running DTrace in a Non-Global Zone</a></p>
<p class="toc level3"><a href="gbrho.html">About Backing Up a Solaris System With Zones Installed</a></p>
<p class="toc level3"><a href="gbrhi.html">Determining What to Back Up in Non-Global Zones</a></p>
<p class="toc level3"><a href="gbrip.html">About Restoring Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-32.html">Commands Used on a Solaris System With Zones Installed</a></p>
<p class="toc level2 tocsp"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="z.admin.ov-13"></a><h3>Device Use in Non-Global Zones</h3>
<p>The set of devices available within a zone is restricted to prevent a
process in one zone from interfering with processes running in other zones. For
example, a process in a zone cannot modify kernel memory or modify
the contents of the root disk. Thus, by  default, only certain pseudo-devices that
are considered safe for use in a zone are available. Additional devices can
be made available within specific zones by using the <tt>zonecfg</tt> utility.</p>

<a name="z.admin.ov-14"></a><h4><tt>/dev</tt> and the <tt>/devices</tt> Namespace</h4>
<p>The <tt>devfs</tt> file system described in the <a href="http://docs.sun.com/doc/819-2254/devfs-7fs?a=view"><tt>devfs</tt>(7FS)</a> man page is used by
the Solaris system to manage <tt>/devices</tt>. Each element in this namespace represents the
physical path to a hardware device, pseudo-device, or nexus device. The namespace is
a reflection of the device tree. As such, the file system is populated
by a hierarchy of directories and device special files.</p><p>Devices are grouped according to the relative <tt>/dev</tt> hierarchy. For example, all of
the devices under <tt>/dev</tt> in the global zone are grouped as global zone
devices. For a non-global zone, the devices are grouped in a <tt>/dev</tt> directory
under the zone's root path. Each group is a mounted <tt>/dev</tt> file system
instance that is mounted under the <tt>/dev</tt> directory. Thus, the global zone devices are
mounted under <tt>/dev</tt>, while the devices for a non-global zone named <tt>my-zone</tt> are
mounted under <tt>/my-zone_rootpath/dev</tt>.</p><p>The <tt>/dev</tt> file hierarchy is managed by the <tt>dev</tt> file system described
in the <a href="http://docs.sun.com/doc/819-2254/dev-7fs?a=view"><tt>dev</tt>(7FS)</a> man page.</p>
<hr><p><b>Caution - </b>Subsystems that rely on <tt>/devices</tt> path names are not able to run in
non-global zones. The subsystems must be updated to use <tt>/dev</tt> path names.</p>
<hr>


<a name="z.admin.ov-15"></a><h4>Exclusive-Use Devices</h4>
<p>You might have devices that you want to assign to specific zones.
Allowing unprivileged users to access block devices could permit those devices to be used
to cause system panic, bus resets, or other adverse effects. Before making such
assignments, consider the following issues:</p>
<ul><li><p>Before assigning a SCSI tape device to a specific zone, consult the <a href="http://docs.sun.com/doc/819-2254/sgen-7d?a=view"><tt>sgen</tt>(7D)</a> man page.</p></li>
<li><p>Placing a physical device into more than one zone can create a covert channel between zones. Global zone applications that use such a device risk the possibility of compromised data or data corruption by a non-global zone.</p></li></ul>


<a name="z.admin.ov-16"></a><h4>Device Driver Administration</h4>
<p>In a non-global zone, you can use the <tt>modinfo</tt> command described in the
<a href="http://docs.sun.com/doc/819-2240/modinfo-1m?a=view"><tt>modinfo</tt>(1M)</a> man page to examine the list of loaded kernel modules.</p><p>Most operations concerning kernel, device, and platform management will not work inside a
non-global zone because modifying platform hardware configurations violates the zone security model. These
operations include the following:</p>
<ul><li><p>Adding and removing drivers</p></li>
<li><p>Explicitly loading and unloading kernel modules</p></li>
<li><p>Initiating dynamic reconfiguration (DR) operations</p></li>
<li><p>Using facilities that affect the state of the physical platform</p></li></ul>


<a name="z.admin.ov-19"></a><h4>Utilities That Do Not Work or Are Modified in Non-Global Zones</h4>


<a name="z.admin.ov-40"></a><h5>Utilities That Do Not Work in Non-Global Zones</h5>
<p>The following utilities do not work in a zone because they rely
on devices that are not normally available:</p>
<ul><li><p><tt>prtconf</tt> (see the <a href="http://docs.sun.com/doc/819-2240/prtconf-1m?a=view"><tt>prtconf</tt>(1M)</a> man page)</p></li>
<li><p><tt>prtdiag</tt> (see the <a href="http://docs.sun.com/doc/819-2240/prtdiag-1m?a=view"><tt>prtdiag</tt>(1M)</a> man page)</p></li></ul>


<a name="z.admin.ov-41"></a><h5>SPARC: Utility Modified for Use in a Non-Global Zone</h5>
<p>The <tt>eeprom</tt> utility can be used in a zone to view settings. The
utility cannot be used to change settings. For more information, see the <a href="http://docs.sun.com/doc/819-2240/eeprom-1m?a=view"><tt>eeprom</tt>(1M)</a>
and <a href="http://docs.sun.com/doc/819-2254/openprom-7d?a=view"><tt>openprom</tt>(7D)</a> man pages.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gelkh.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.admin.ov-42.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

