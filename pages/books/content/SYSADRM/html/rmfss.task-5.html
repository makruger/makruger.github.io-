<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring the FSS - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmfss.task-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rm.rcapd-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level3"><a href="rmfss.task-23.html">Administering the Fair Share Scheduler (Task Map)</a></p>
<p class="toc level3"><a href="rmfss.task-2.html">Monitoring the FSS</a></p>
<p class="toc level4"><a href="rmfss.task-2.html#rmfss.task-4">How to Monitor System CPU Usage by Projects</a></p>
<p class="toc level4"><a href="rmfss.task-2.html#rmfss.task-3">How to Monitor CPU Usage by Projects in Processor Sets</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Configuring the FSS</a></p>
<p class="toc level4"><a href="#rmfss.task-6">How to Make FSS the Default Scheduler Class</a></p>
<p class="toc level4"><a href="#rmfss.task-7">How to Manually Move Processes From the TS Class Into the FSS Class</a></p>
<p class="toc level4"><a href="#rmfss.task-12">How to Manually Move Processes From All User Classes Into the FSS Class</a></p>
<p class="toc level4"><a href="#rmfss.task-17">How to Manually Move a Project's Processes Into the FSS Class</a></p>
</div>
<p class="toc level2 tocsp"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rmfss.task-5"></a><h3>Configuring the FSS</h3>
<p><a name="indexterm-72"></a>The same commands that you use with other scheduling classes in the Solaris
system can be used with FSS. You can set the scheduler class, configure
the scheduler's tunable parameters, and configure the properties of individual processes.</p><p>Note that you can use <tt>svcadm</tt> <tt>restart</tt> to restart the scheduler service. See
<a href="http://docs.sun.com/doc/819-2240/svcadm-1m?a=view"><tt>svcadm</tt>(1M)</a> for more information.</p>

<a name="rmfss.task-6"></a><h4>How to Make FSS the Default Scheduler Class</h4><p>The FSS must be the default scheduler on your system to have
CPU shares assignment take effect.</p><p>Using a combination of the <tt>priocntl</tt> and <tt>dispadmin</tt> commands ensures that the
FSS becomes the default scheduler immediately and also after reboot.</p><ol>
<li><a name="rmfss.task-step-25"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmfss.task-step-26"></a><b>Set the default scheduler for the system to be the FSS.</b><pre># <tt><b>dispadmin -d FSS</b></tt></pre><p>This change takes effect on the next reboot. After reboot, every process on
the system runs in the FSS scheduling class.</p></li>
<li><b>Make this configuration take effect immediately, without rebooting.</b><pre># <tt><b>priocntl -s -c FSS</b></tt></pre></li></ol>

<a name="rmfss.task-7"></a><h4>How to Manually Move Processes From the TS Class Into the FSS Class</h4><p>You can manually move processes from one scheduling class to another scheduling class
without changing the default scheduling class and rebooting. This procedure shows how to
manually move processes from the TS scheduling class into the FSS scheduling class.</p><ol>
<li><a name="rmfss.task-step-9"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmfss.task-step-10"></a><b>Move the <tt>init</tt> process (pid 1) into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i pid 1</b></tt></pre></li>
<li><a name="rmfss.task-step-11"></a><b>Move all processes from the TS scheduling class into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i class TS</b></tt></pre>
<hr><p><b>Note - </b>All processes again run in the TS scheduling class after reboot.</p>
<hr>
</li></ol>

<a name="rmfss.task-12"></a><h4>How to Manually Move Processes From All User Classes Into the FSS Class</h4><p>You might be using a default class other than TS. For example,
your system might be running a window environment that uses the IA class
by default. You can manually move all processes into the FSS scheduling class
without changing the default scheduling class and rebooting.</p><ol>
<li><a name="rmfss.task-step-14"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmfss.task-step-15"></a><b>Move the <tt>init</tt> process (pid 1) into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i pid 1</b></tt></pre></li>
<li><a name="rmfss.task-step-16"></a><b>Move all processes from their current scheduling classes into the FSS scheduling class.</b><pre># <tt><b>priocntl -s -c FSS -i all</b></tt></pre>
<hr><p><b>Note - </b>All processes again run in the default scheduling class after reboot.</p>
<hr>
</li></ol>

<a name="rmfss.task-17"></a><h4>How to Manually Move a Project's Processes Into the FSS Class</h4><p>You can manually move a project's processes from their current scheduling class to
the FSS scheduling class.</p><ol>
<li><a name="rmfss.task-step-19"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmfss.task-step-20"></a><b>Move processes that run in project ID <i>10</i> to the FSS scheduling
class.</b><pre># <tt><b>priocntl -s -c FSS -i projid </tt><i>10</i><tt></b></tt></pre><p>The project's processes again run in the default scheduling class after reboot.</p></li></ol>

<a name="rmfss.task-21"></a><h4>How to Tune Scheduler Parameters</h4>
<p>You can use the <tt>dispadmin</tt> command to display or change process scheduler parameters
while the system is running. For example, you can use <tt>dispadmin</tt> to examine
and tune the FSS scheduler's time quantum value. <b>Time quantum</b> is the amount of
time that a thread is allowed to run before it must relinquish the
processor.</p><p>To display the current time quantum for the FSS scheduler while the system
is running, type:</p><pre>$ <tt><b>dispadmin -c FSS -g</b></tt>
#
# Fair Share Scheduler Configuration
#
RES=1000
#
# Time Quantum
#
QUANTUM=110</pre><p>When you use the <tt>-g</tt> option, you can also use the <tt>-r</tt>
option to specify the resolution that is used for printing time quantum values.
If no resolution is specified, time quantum values are displayed in milliseconds by default.</p><pre>$ <tt><b>dispadmin -c FSS -g -r 100</b></tt>
#
# Fair Share Scheduler Configuration
#
RES=100
#
# Time Quantum
#
QUANTUM=11</pre><p>To set scheduling parameters for the FSS scheduling class, use <tt>dispadmin</tt> <tt>-s</tt>.
The values in <i>file</i> must be in the format output by the <tt>-g</tt>
option. These values overwrite the current values in the kernel. Type the following:</p><pre>$ <tt><b>dispadmin -c FSS -s </tt><i>file</i><tt></b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmfss.task-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rm.rcapd-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

