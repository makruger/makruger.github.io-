<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Resource Controls Concepts - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmctrls-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmctrls-3.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Resource Controls Concepts</a></p>
</div>
<p class="toc level3"><a href="rmctrls-3.html">Configuring Resource Controls and Attributes</a></p>
<p class="toc level3"><a href="rmctrls-12.html">Applying Resource Controls</a></p>
<p class="toc level3"><a href="rmctrls-13.html">Temporarily Updating Resource Control Values on a Running System</a></p>
<p class="toc level3"><a href="rmctrls-19.html">Commands Used With Resource Controls</a></p>
<p class="toc level2 tocsp"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rmctrls-2"></a><h3>Resource Controls Concepts</h3>
<p><a name="indexterm-33"></a><a name="indexterm-34"></a><a name="indexterm-35"></a>In the Solaris Operating System, the concept of a per-process resource limit has
been extended to the task and project entities described in <a href="rmtaskproj-1.html">Chapter&nbsp;2, Projects and Tasks (Overview)</a>. These enhancements
are provided by the resource controls (rctls) facility. In addition, allocations that were set
through the <tt>/etc/system</tt> tunables are now automatic or configured through the resource controls
mechanism as well.</p><p>A resource control is identified by the prefix <tt>zone</tt>, <tt>project</tt>, <tt>task</tt>, or
<tt>process</tt>. Resource controls can be observed on a system-wide basis. It is possible
to update resource control values on a running system.</p><p>For a list of the standard resource controls that are available in
this release, see <a href="rmctrls-3.html#rmctrls-4">Available Resource Controls</a> See <a href="z.config.ov-12.html#z.config.ov-17">Resource Type Properties</a> for information on available zone-wide resource controls.</p>

<a name="rmctrls-16"></a><h4>Resource Limits and Resource Controls</h4>
<p>UNIX systems have traditionally provided a resource limit facility (<b>rlimit</b>). The rlimit
facility allows administrators to set one or more numerical limits on the amount
of resources a process can consume. These limits include per-process CPU time used,
per-process core file size, and per-process maximum heap size. <b>Heap size</b> is the amount of
scratch memory that is allocated for the process data segment.</p><p><a name="indexterm-36"></a><a name="indexterm-37"></a><a name="indexterm-38"></a>The resource controls facility provides compatibility interfaces for the resource limits facility. Existing applications
that use resource limits continue to run unchanged. These applications can be observed
in the same way as applications that are modified to take advantage of
the resource controls facility.</p>

<a name="rmctrls-23"></a><h4>Interprocess Communication and Resource Controls</h4>
<p><a name="indexterm-39"></a><a name="indexterm-40"></a>Processes can communicate with each other by using one of several types of
interprocess communication (IPC). IPC allows information transfer or synchronization to occur between processes. Prior
to the Solaris 10 release, IPC tunable parameters were set by adding an
entry to the <tt>/etc/system</tt> file. The resource controls facility now provides resource controls
that define the behavior of the kernel's IPC facilities. These resource controls replace the
<tt>/etc/system</tt> tunables.</p><p>Obsolete parameters might be included in the <tt>/etc/system</tt> file on this Solaris system.
If so, the parameters are used to initialize the default resource control values
as in previous Solaris releases. However, using the obsolete parameters is not recommended.</p><p>To observe which IPC objects are contributing to a project's usage, use the
<tt>ipcs</tt> command with the <tt>-J</tt> option. See <a href="rmctrls.task-35.html#rmctrls.task-13">How to Use <tt>ipcs</tt></a> to view an example display. For
more information about the <tt>ipcs</tt> command, see <a href="http://docs.sun.com/doc/819-2239/ipcs-1?a=view"><tt>ipcs</tt>(1)</a>.</p><p>For information about Solaris system tuning, see the <a href="http://docs.sun.com/doc/819-2724"><i>Solaris Tunable Parameters Reference Manual</i></a>.</p>

<a name="rmctrls-17"></a><h4>Resource Control Constraint Mechanisms</h4>
<p>Resource controls provide a mechanism for the constraint of system resources. Processes, tasks,
projects, and zones can be prevented from consuming amounts of specified system resources.
This mechanism leads to a more manageable system by preventing over-consumption of resources.</p><p>Constraint mechanisms can be used to support capacity-planning processes. An encountered constraint can
provide information about application resource needs without necessarily denying the resource to the
application.</p>

<a name="rmctrls-18"></a><h4>Project Attribute Mechanisms</h4>
<p>Resource controls can also serve as a simple attribute mechanism for resource management
facilities. For example, the number of CPU shares made available to a project
in the fair share scheduler (FSS) scheduling class is defined by the <tt>project.cpu-shares</tt>
resource control. Because the project is assigned a fixed number of shares by
the control, the various actions associated with exceeding a control are not relevant.
In this context, the current value for the <tt>project.cpu-shares</tt> control is considered an attribute
on the specified project.</p><p>Another type of project attribute is used to regulate the resource consumption of
physical memory by collections of processes attached to a project. These attributes have
the prefix <tt>rcap</tt>, for example, <tt>rcap.max-rss</tt>. Like a resource control, this type
of attribute is configured in the <tt>project</tt> database. However, while resource controls are synchronously
enforced by the kernel, resource caps are asynchronously enforced at the user level
by the resource cap enforcement daemon, <tt>rcapd</tt>. For information on <tt>rcapd</tt>, see
<a href="rm.rcapd-1.html">Chapter&nbsp;10, Physical Memory Control Using the Resource Capping Daemon (Overview)</a> and <tt>rcapd</tt>(1M).</p><p>The <tt>project.pool</tt> attribute is used to specify a pool binding for a project.
For more information on resource pools, see <a href="rmpool-1.html">Chapter&nbsp;12, Resource Pools (Overview)</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmctrls-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmctrls-3.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

