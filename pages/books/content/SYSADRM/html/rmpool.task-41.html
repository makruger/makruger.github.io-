<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Pool Attributes and Binding to a Pool - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmpool.task-32.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmpool.task-104.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level3"><a href="gentextid-6182.html">Administering Resource Pools (Task Map)</a></p>
<p class="toc level3"><a href="rmpool.task-57.html">Enabling and Disabling the Pools Facility</a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvca">How to Enable the Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvbg">How to Disable the Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvdw">How to Enable the Dynamic Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvda">How to Disable the Dynamic Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#rmpool.task-58">How to Enable Resource Pools Using <tt>pooladm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#rmpool.task-62">How to Disable Resource Pools Using <tt>pooladm</tt></a></p>
<p class="toc level3 tocsp"><a href="rmpool.task-2.html">Configuring Pools</a></p>
<p class="toc level4"><a href="rmpool.task-2.html#rmpool.task-84">How to Create a Static Configuration</a></p>
<p class="toc level4"><a href="rmpool.task-2.html#rmpool.task-15">How to Modify a Configuration</a></p>
<p class="toc level4"><a href="rmpool.task-2.html#rmpool.task-22">How to Associate a Pool With a Scheduling Class</a></p>
<p class="toc level4"><a href="rmpool.task-2.html#gcvwh">How to Set Configuration Constraints</a></p>
<p class="toc level4"><a href="rmpool.task-2.html#rmpool.task-108">How to Define Configuration Objectives</a></p>
<p class="toc level4"><a href="rmpool.task-2.html#rmpool.task-117">How to Set the <tt>poold</tt> Logging Level</a></p>
<p class="toc level4"><a href="rmpool.task-2.html#rmpool.task-27">How to Use Command Files With <tt>poolcfg</tt></a></p>
<p class="toc level3 tocsp"><a href="rmpool.task-80.html">Transferring Resources</a></p>
<p class="toc level4"><a href="rmpool.task-80.html#gentextid-6737">How to Move CPUs Between Processor Sets</a></p>
<p class="toc level3 tocsp"><a href="rmpool.task-32.html">Activating and Removing Pool Configurations</a></p>
<p class="toc level4"><a href="rmpool.task-32.html#rmpool.task-33">How to Activate a Pools Configuration</a></p>
<p class="toc level4"><a href="rmpool.task-32.html#rmpool.task-66">How to Validate a Configuration Before Committing the Configuration</a></p>
<p class="toc level4"><a href="rmpool.task-32.html#rmpool.task-37">How to Remove a Pools Configuration</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Setting Pool Attributes and Binding to a Pool</a></p>
<p class="toc level4"><a href="#rmpool.task-42">How to Bind Processes to a Pool</a></p>
<p class="toc level4"><a href="#rmpool.task-46">How to Bind Tasks or Projects to a Pool</a></p>
<p class="toc level4"><a href="#rmpool.task-50">How to Set the <tt>project.pool</tt> Attribute for a Project</a></p>
<p class="toc level4"><a href="#rmpool.task-51">How to Use <tt>project</tt> Attributes to Bind a Process to a Different Pool</a></p>
</div>
<p class="toc level3 tocsp"><a href="rmpool.task-104.html">Using <tt>poolstat</tt> to Report Statistics for Pool-Related Resources</a></p>
<p class="toc level2 tocsp"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rmpool.task-41"></a><h3>Setting Pool Attributes and Binding to a Pool</h3>
<p><a name="indexterm-131"></a>You can set a <tt>project.pool</tt> attribute to associate a resource pool with a project.</p><p><a name="indexterm-132"></a><a name="indexterm-133"></a>You can bind a running process to a pool in two ways:</p>
<ul><li><p>You can use the <tt>poolbind</tt> command described in <a href="http://docs.sun.com/doc/819-2240/poolbind-1m?a=view"><tt>poolbind</tt>(1M)</a> command to bind a specific process to a named resource pool.</p></li>
<li><p>You can use the <tt>project.pool</tt> attribute in the <tt>project</tt> database to identify the pool binding for a new login session or a task that is launched through the <tt>newtask</tt> command. See the <a href="http://docs.sun.com/doc/819-2239/newtask-1?a=view"><tt>newtask</tt>(1)</a>, <a href="http://docs.sun.com/doc/819-2240/projmod-1m?a=view"><tt>projmod</tt>(1M)</a>, and <a href="http://docs.sun.com/doc/819-2251/project-4?a=view"><tt>project</tt>(4)</a> man pages.</p></li></ul>


<a name="rmpool.task-42"></a><h4>How to Bind Processes to a Pool</h4><p>The following procedure uses <tt>poolbind</tt> with the <tt>-p</tt> option to manually bind
a process (in this case, the current shell) to a pool named <tt>ohare</tt>.</p><ol>
<li><a name="rmpool.task-step-44"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-45"></a><b>Manually bind a process to a pool:</b><pre># <tt><b>poolbind -p ohare $$</b></tt></pre></li>
<li><a name="rmpool.task-step-103"></a><b>Verify the pool binding for the process by using <tt>poolbind</tt> with the <tt>-q</tt>
option.</b><pre>$ <tt><b>poolbind -q $$</b></tt>
155509 ohare</pre><p>The system displays the process ID and the pool binding.</p></li></ol>

<a name="rmpool.task-46"></a><h4>How to Bind Tasks or Projects to a Pool</h4><p>To bind tasks or projects to a pool, use the <tt>poolbind</tt> command with
the <tt>-i</tt> option. The following example binds all processes in the <tt>airmiles</tt> project
to the <tt>laguardia</tt> pool.</p><ol>
<li><a name="rmpool.task-step-48"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-49"></a><b>Bind all processes in the <tt>airmiles</tt> project to the <tt>laguardia</tt> pool.</b><pre># <tt><b>poolbind -i project -p laguardia airmiles</b></tt></pre></li></ol>

<a name="rmpool.task-50"></a><h4>How to Set the <tt>project.pool</tt> Attribute for a Project</h4><p>You can set the <tt>project.pool</tt> attribute to bind a project's processes to a
resource pool.</p><ol>
<li><a name="rmpool.task-step-123"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-124"></a><b>Add a <tt>project.pool</tt> attribute to each entry in the <tt>project</tt> database.</b><pre># <tt><b>projmod -a -K project.pool=</tt><i>poolname</i><tt> </tt><i>project</i><tt></b></tt></pre></li></ol>

<a name="rmpool.task-51"></a><h4>How to Use <tt>project</tt> Attributes to Bind a Process to a Different Pool</h4><p>Assume you have a configuration with two pools that are named <tt>studio</tt>
and <tt>backstage</tt>. The <tt>/etc/project</tt> file has the following contents:</p><pre>user.paul:1024::::project.pool=studio
user.george:1024::::project.pool=studio
user.ringo:1024::::project.pool=backstage
passes:1027::paul::project.pool=backstage</pre><p>With this configuration, processes that are started by user <tt>paul</tt> are bound by
default to the <tt>studio</tt> pool.</p><p>User <tt>paul</tt> can modify the pool binding for processes he starts. <tt>paul</tt> can
use <tt>newtask</tt> to bind work to the <tt>backstage</tt> pool as well, by launching
in the <tt>passes</tt> project.</p><ol>
<li><a name="rmpool.task-step-53"></a><b>Launch a process in the <tt>passes</tt> project.</b><pre>$ <tt><b>newtask -l -p passes</b></tt></pre></li>
<li><a name="rmpool.task-step-54"></a><b>Use the <tt>poolbind</tt> command with the <tt>-q</tt> option to verify the pool binding
for the process. Also use a double dollar sign (<tt>$$</tt>) to pass the
process number of the parent shell to the command.</b><pre>$ <tt><b>poolbind -q $$</b></tt>
6384  pool backstage</pre><p>The system displays the process ID and the pool binding.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmpool.task-32.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmpool.task-104.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

