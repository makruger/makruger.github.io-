<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Project Identifiers - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmtaskproj-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmtaskproj-7.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level3"><a href="rmtaskproj-2.html">Project and Task Facilities</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Project Identifiers</a></p>
</div>
<p class="toc level3"><a href="rmtaskproj-7.html">Task Identifiers</a></p>
<p class="toc level3"><a href="rmtaskproj-14.html">Commands Used With Projects and Tasks</a></p>
<p class="toc level2 tocsp"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rmtaskproj-6"></a><h3>Project Identifiers</h3>
<p><a name="indexterm-6"></a>The project identifier is an administrative identifier that is used to identify related
work. The project identifier can be thought of as a workload tag equivalent
to the user and group identifiers. A user or group can belong to
one or more projects. These projects can be used to represent the workloads
in which the user (or group of users) is allowed to participate. This
membership can then be the basis of chargeback that is based on,
for example, usage or initial resource allocations. Although a user must be assigned to
a default project, the processes that the user launches can be associated with
any of the projects of which that user is a member.</p>

<a name="rmtaskproj-3"></a><h4>Determining a User's Default Project</h4>
<p><a name="indexterm-7"></a>To log in to the system, a user must be assigned a default
project. A user is automatically a member of that default project, even if
the user is not in the user or group list specified in that
project.</p><p>Because each process on the system possesses project membership, an algorithm to assign
a default project to the login or other initial process is necessary. The
algorithm is documented in the man page <tt>getprojent</tt>(3C). The system follows ordered
steps to determine the default project. If no default project is found, the
user's login, or request to start a process, is denied.</p><p>The system sequentially follows these steps to determine a user's default project:</p>
<ol><li><p><a name="indexterm-8"></a>If the user has an entry with a <tt>project</tt> attribute defined in the <tt>/etc/user_attr</tt> extended user attributes database, then the value of the <tt>project</tt> attribute is the default project. See the <a href="http://docs.sun.com/doc/819-2251/user-attr-4?a=view"><tt>user_attr</tt>(4)</a> man page.</p></li>
<li><p>If a project with the name <tt>user.</tt><i>user-id</i> is present in the <tt>project</tt> database, then that project is the default project. See the <a href="http://docs.sun.com/doc/819-2251/project-4?a=view"><tt>project</tt>(4)</a> man page for more information.</p></li>
<li><p>If a project with the name <tt>group.</tt><i>group-name</i> is present in the <tt>project</tt> database, where <i>group-name</i> is the name of the default group for the user, as specified in the <tt>passwd</tt> file, then that project is the default project. For information on the <tt>passwd</tt> file, see the <a href="http://docs.sun.com/doc/819-2251/passwd-4?a=view"><tt>passwd</tt>(4)</a> man page.</p></li>
<li><p>If the special project <tt>default</tt> is present in the <tt>project</tt> database, then that project is the default project.</p></li></ol>
<p>This logic is provided by the <tt>getdefaultproj()</tt> library function. See the <a href="http://docs.sun.com/doc/819-2247/getprojent-3project?a=view"><tt>getprojent</tt>(3PROJECT)</a> man
page for more information.</p>

<a name="rmtaskproj-15"></a><h4>Setting User Attributes With the <tt>useradd</tt>, <tt>usermod</tt>, and <tt>passmgmt</tt> Commands</h4>
<p>You can use the following commands with the <tt>-K</tt> option and a <i>key</i><tt>=</tt><i>value</i>
pair to set user attributes in local files :</p><dl><dt><tt>passmgmt</tt></dt>
<dd><p>Modify user information</p></dd>
<dt><tt>useradd</tt></dt>
<dd><p>Set default project for user</p></dd>
<dt><tt>usermod</tt></dt>
<dd><p>Modify user information</p></dd>
</dl>
<p>Local files can include the following:</p>
<ul><li><p><tt>/etc/group</tt></p></li>
<li><p><tt>/etc/passwd</tt></p></li>
<li><p><tt>/etc/project</tt></p></li>
<li><p><tt>/etc/shadow</tt></p></li>
<li><p><tt>/etc/user_attr</tt></p></li></ul>
<p>If a network naming service such as NIS is being used to
supplement the local file with additional entries, these commands cannot change information supplied by
the network name service. However, the commands do verify the following against the
external <b>naming service database</b>:</p>
<ul><li><p>Uniqueness of the user name (or role)</p></li>
<li><p>Uniqueness of the user ID</p></li>
<li><p>Existence of any group names specified</p></li></ul>
<p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/passmgmt-1m?a=view"><tt>passmgmt</tt>(1M)</a>, <a href="http://docs.sun.com/doc/819-2240/useradd-1m?a=view"><tt>useradd</tt>(1M)</a>, <a href="http://docs.sun.com/doc/819-2240/usermod-1m?a=view"><tt>usermod</tt>(1M)</a>, and <a href="http://docs.sun.com/doc/819-2251/user-attr-4?a=view"><tt>user_attr</tt>(4)</a> man pages.</p>

<a name="rmtaskproj-9"></a><h4><tt>project</tt> Database</h4>
<p><a name="indexterm-9"></a><a name="indexterm-10"></a>You can store project data in a local file, in the Domain Name
System (DNS), in a Network Information Service (NIS) project map, or in a
Lightweight Directory Access Protocol (LDAP) directory service. The <tt>/etc/project</tt> file or naming service
is used at login and by all requests for account management by the
pluggable authentication module (PAM) to bind a user to a default project.</p>
<hr><p><b>Note - </b>Updates to entries in the project database, whether to the <tt>/etc/project</tt> file
or to a representation of the database in a network naming service, are
not applied to currently active projects. The updates are applied to new tasks
that join the project when either the <tt>login</tt> or the <tt>newtask</tt> command is
used. For more information, see the <a href="http://docs.sun.com/doc/819-2239/login-1?a=view"><tt>login</tt>(1)</a> and <a href="http://docs.sun.com/doc/819-2239/newtask-1?a=view"><tt>newtask</tt>(1)</a> man pages.</p>
<hr>


<a name="rmtaskproj-10"></a><h4>PAM Subsystem</h4>
<p><a name="indexterm-11"></a><a name="indexterm-12"></a>Operations that change or set identity include logging in to the system, invoking
an <tt>rcp</tt> or <tt>rsh</tt> command, using <tt>ftp</tt>, or using <tt>su</tt>. When an operation
involves changing or setting an identity, a set of configurable modules is used
to provide authentication, account management, credentials management, and session management.</p><p>For an overview of PAM, see <a href="http://docs.sun.com/doc/819-3321/pam-1?a=view">Chapter 17, Using PAM, in <i>System Administration Guide: Security Services</i></a>.</p>

<a name="rmtaskproj-11"></a><h4>Naming Services Configuration</h4>
<p>Resource management supports naming service <tt>project</tt> databases. The location where the <tt>project</tt> database
is stored is defined in the <tt>/etc/nsswitch.conf</tt> file. By default, <tt>files</tt> is listed
first, but the sources can be listed in any order.</p><pre>project: files [nis] [ldap]</pre><p>If more than one source for project information is listed, the <tt>nsswitch.conf</tt>
file directs the routine to start searching for the information in the first
source listed, and then search subsequent sources.</p><p>For more information about the <tt>/etc/nsswitch.conf</tt> file, see <a href="http://docs.sun.com/doc/819-3194/a12swit-86415?a=view">Chapter 2, The Name Service Switch (Overview), in <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a> and <a href="http://docs.sun.com/doc/819-2251/nsswitch.conf-4?a=view"><tt>nsswitch.conf</tt>(4)</a>.</p>

<a name="rmtaskproj-12"></a><h4>Local <tt>/etc/project</tt> File Format</h4>
<p><a name="indexterm-13"></a><a name="indexterm-14"></a>If you select <tt>files</tt> as your <tt>project</tt> database source in the <tt>nsswitch.conf</tt> file, the
login process searches the <tt>/etc/project</tt> file for project information. See the <a href="http://docs.sun.com/doc/819-2239/projects-1?a=view"><tt>projects</tt>(1)</a> and
<a href="http://docs.sun.com/doc/819-2251/project-4?a=view"><tt>project</tt>(4)</a> man pages for more information.</p><p>The <tt>project</tt> file contains a one-line entry of the following form for each
project recognized by the system:</p><pre>projname:projid:comment:user-list:group-list:attributes</pre><p>The fields are defined as follows:</p><dl><dt><i>projname</i></dt>
<dd><p>The name of the project. The name must be a string that consists of alphanumeric characters, underline (_) characters, hyphens (-), and periods (.). The period, which is reserved for projects with special meaning to the operating system, can only be used in the names of default projects for users. <i>projname</i> cannot contain colons (:) or newline characters.</p></dd>
<dt><i>projid</i></dt>
<dd><p>The project's unique numerical ID (PROJID) within the system. The maximum value of the <i>projid</i> field is <tt>UID_MAX</tt> (<tt>2147483647</tt>).</p></dd>
<dt><i>comment</i></dt>
<dd><p>A description of the project.</p></dd>
<dt><i>user-list</i></dt>
<dd><p>A comma-separated list of users who are allowed in the project.</p><p>Wildcards can be used in this field. An asterisk (*) allows all users to join the project. An exclamation point followed by an asterisk (!*) excludes all users from the project. An exclamation mark (!) followed by a user name excludes the specified user from the project.</p></dd>
<dt><i>group-list</i></dt>
<dd><p>A comma-separated list of groups of users who are allowed in the project.</p><p>Wildcards can be used in this field. An asterisk (*) allows all groups to join the project. An exclamation point followed by an asterisk (!*) excludes all groups from the project. An exclamation mark (!) followed by a group name excludes the specified group from the project.</p></dd>
<dt><i>attributes</i></dt>
<dd><p>A semicolon-separated list of name-value pairs, such as resource controls (see <a href="rmctrls-1.html">Chapter&nbsp;6, Resource Controls (Overview)</a>). <i>name</i> is an arbitrary string that specifies the object-related attribute, and <i>value</i> is the optional value for that attribute.</p><pre>name[=<i>value</i>]</pre><p>In the name-value pair, names are restricted to letters, digits, underscores, and periods. A period is conventionally used as a separator between the categories and subcategories of the resource control (rctl). The first character of an attribute name must be a letter. The name is case sensitive.</p><p>Values can be structured by using commas and parentheses to establish precedence.</p><p>A semicolon is used to separate name-value pairs. A semicolon cannot be used in a value definition. A colon is used to separate project fields. A colon cannot be used in a value definition.</p></dd>
</dl>

<hr><p><b>Note - </b>Routines that read this file halt if they encounter a malformed entry. Any
projects that are specified after the incorrect entry are not assigned.</p>
<hr>
<p>This example shows the default <tt>/etc/project</tt> file:</p><pre>system:0:System:::
user.root:1:Super-User:::
noproject:2:No Project:::
default:3::::
group.staff:10::::</pre><p>This example shows the default <tt>/etc/project</tt> file with project entries added at the
end:</p><pre>system:0:System:::
user.root:1:Super-User:::
noproject:2:No Project:::
default:3::::
group.staff:10::::
user.ml:2424:Lyle Personal:::
booksite:4113:Book Auction Project:ml,mp,jtd,kjh::</pre><p>You can also add resource controls and attributes to the <tt>/etc/project</tt> file:</p>
<ul><li><p>To add resource controls for a project, see <a href="rmctrls.task-2.html">Setting Resource Controls</a>.</p></li>
<li><p>To define a physical memory resource cap for a project using the resource capping daemon described in <a href="http://docs.sun.com/doc/819-2240/rcapd-1m?a=view"><tt>rcapd</tt>(1M)</a>, see <a href="rm.rcapd-4.html">Attribute to Limit Physical Memory Usage</a>.</p></li>
<li><p>To add a <tt>project.pool</tt> attribute to a project's entry, see <a href="rmconfig-4.html">Creating the Configuration</a>.</p></li></ul>


<a name="rmtaskproj-4"></a><h4>Project Configuration for NIS</h4>
<p>If you are using NIS, you can specify in the <tt>/etc/nsswitch.conf</tt> file to
search the NIS project maps for projects:</p><pre>project: nis files </pre><p>The NIS maps, either <tt>project.byname</tt> or <tt>project.bynumber</tt>, have the same form as
the <tt>/etc/project</tt> file:</p><pre>projname:projid:comment:user-list:group-list:attributes</pre><p>For more information, see <a href="http://docs.sun.com/doc/819-3194/anis1-25461?a=view">Chapter 4, Network Information Service (NIS) (Overview), in <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>.</p>

<a name="rmtaskproj-5"></a><h4>Project Configuration for LDAP</h4>
<p>If you are using LDAP, you can specify in the <tt>/etc/nsswitch.conf</tt> file to
search the LDAP <tt>project</tt> database for projects:</p><pre>project: ldap files</pre><p>For more information about LDAP, see <a href="http://docs.sun.com/doc/819-3194/overview-1?a=view">Chapter 8, Introduction to LDAP Naming Services (Overview/Reference), in <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>. For more information about the
schema for project entries in an LDAP database, see <a href="http://docs.sun.com/doc/819-3194/appendixa-5?a=view">Solaris Schemas in <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmtaskproj-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmtaskproj-7.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

