<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Zone Configuration Data - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.config.ov-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.config.ov-18.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level3"><a href="gejut.html">About Resources in Zones</a></p>
<p class="toc level3"><a href="z.config.ov-2.html">Pre-Installation Configuration Process</a></p>
<p class="toc level3"><a href="z.config.ov-3.html">Zone Components</a></p>
<p class="toc level3"><a href="z.config.ov-5.html">Using the <tt>zonecfg</tt> Command</a></p>
<p class="toc level3"><a href="z.config.ov-10.html"><tt>zonecfg</tt> Modes</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Zone Configuration Data</a></p>
</div>
<p class="toc level3"><a href="z.config.ov-18.html">Tecla Command-Line Editing Library</a></p>
<p class="toc level2 tocsp"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="z.config.ov-12"></a><h3>Zone Configuration Data</h3>
<p><a name="indexterm-198"></a>Zone configuration data consists of two kinds of entities: resources and properties. Each
resource has a type, and each resource can also have a set of
one or more properties. The properties have names and values. The set of
properties is dependent on the resource type.</p>

<a name="z.config.ov-16"></a><h4>Resource and Property Types</h4>
<p><a name="indexterm-199"></a><a name="indexterm-200"></a>The resource and property types are described as follows:</p><dl><dt><tt>zonename</tt></dt>
<dd><p>The name of the zone. The following rules apply to zone names:</p>
<ul><li><p>Each zone must have a unique name.</p></li>
<li><p>A zone name is case-sensitive.</p></li>
<li><p>A zone name must begin with an alphanumeric character.</p><p>The name can contain alphanumeric characters, underbars (<tt>_</tt>), hyphens (<tt>-</tt>), and periods (<tt>.</tt>).</p></li>
<li><p>The name cannot be longer than 64 characters.</p></li>
<li><p>The name <tt>global</tt> and all names beginning with <tt>SUNW</tt> are reserved and cannot be used.</p></li></ul>
</dd>
<dt><tt>zonepath</tt></dt>
<dd><p>The <tt>zonepath</tt> property is the path to the zone root. Each zone has a path to its root directory that is relative to the global zone's root directory. At installation time, the global zone directory is required to have restricted visibility. It must be owned by <tt>root</tt> with the mode <tt>700</tt>.</p><p>The non-global zone's root path is one level lower. The zone's root directory has the same ownership and permissions as the root directory (<tt>/</tt>) in the global zone. The zone directory must be owned by <tt>root</tt> with the mode <tt>755</tt>. These directories are created automatically with the correct permissions, and do not need to be verified by the zone administrator. This hierarchy ensures that unprivileged users in the global zone are prevented from traversing a non-global zone's file system.</p><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Path</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/home/export/my-zone</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>zonecfg</tt> <tt>zonepath</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/home/export/my-zone/root</tt></p></td>
<td align="left" valign="top" scope="row"><p>Root of the zone</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/home/export/my-zone/root/dev</tt></p></td>
<td align="left" valign="top" scope="row"><p>Devices created for the zone</p></td>
</tr>
</table><p>See <a href="z.admin.ov-2.html#z.admin.ov-8">Traversing File Systems</a> for a further discussion of this issue.</p>
<hr><p><b>Note - </b>You can move a zone to another location on the same system by specifying a new, full <tt>zonepath</tt> with the <tt>move</tt> subcommand of <tt>zoneadm</tt>. See <a href="gbwym.html">Moving a Non-Global Zone</a> for instructions.</p>
<hr>
</dd>
<dt><tt>autoboot</tt></dt>
<dd><p>If this property is set to true, the zone is automatically booted when the global zone is booted. Note that if the zones service, <tt>svc:/system/zones:default</tt> is disabled, the zone will not autoboot, regardless of the setting of this property. You can enable the zones service with the <tt>svcadm</tt> command described in the <a href="http://docs.sun.com/doc/819-2240/svcadm-1m?a=view"><tt>svcadm</tt>(1M)</a> man page:</p><pre>global# <tt><b>svcadm enable zones</b></tt></pre></dd>
<dt><tt>bootargs</tt></dt>
<dd><p><a name="indexterm-201"></a><a name="indexterm-202"></a>This property is used to set a boot argument for the zone. The boot argument is applied unless overridden by the <tt>reboot</tt>, <tt>zoneadm boot</tt>, or <tt>zoneadm reboot</tt> commands. See <a href="z.inst.ov-6.html#gdepq">Zone Boot Arguments</a>.</p></dd>
<dt><tt>pool</tt></dt>
<dd><p><a name="indexterm-203"></a><a name="indexterm-204"></a>This property is used to associate the zone with a resource pool on the system. Multiple zones can share the resources of one pool. Also see <a href="z.config.ov-3.html#gejlw"><tt>dedicated-cpu</tt> Resource</a>.</p></dd>
<dt><tt>limitpriv</tt></dt>
<dd><p><a name="indexterm-205"></a><a name="indexterm-206"></a><a name="indexterm-207"></a><a name="indexterm-208"></a>This property is used to specify a privilege mask other than the default. See <a href="z.admin.ov-18.html">Privileges in a Non-Global Zone</a>.</p><p>Privileges are added by specifying the privilege name, with or without the leading <tt>priv_</tt>. Privileges are excluded by preceding the name with a dash (<tt>-</tt>) or an exclamation mark (<tt>!</tt>). The privilege values are separated by commas and placed within quotation marks (<tt>&ldquo;</tt>).</p><p>As described in <a href="http://docs.sun.com/doc/819-2243/priv-str-to-set-3c?a=view"><tt>priv_str_to_set</tt>(3C)</a>, the special privilege sets of <tt>none</tt>, <tt>all</tt>, and <tt>basic</tt> expand to their normal definitions. Because zone configuration takes place from the global zone, the special privilege set <tt>zone</tt> cannot be used. Because a common use is to alter the default privilege set by adding or removing certain privileges, the special set <tt>default</tt> maps to the default, set of privileges. When <tt>default</tt> appears at the beginning of the <tt>limitpriv</tt> property, it expands to the default set.</p><p>The following entry adds the ability to use DTrace programs that only require the <tt>dtrace_proc</tt> and <tt>dtrace_user</tt> privileges in the zone:</p><pre>global# zonecfg -z userzone
zonecfg:userzone> set limitpriv="default,dtrace_proc,dtrace_user"</pre><p>If the zone's privilege set contains a disallowed privilege, is missing a required privilege, or includes an unknown privilege, an attempt to verify, ready, or boot the zone will fail with an error message.</p></dd>
<dt><tt>scheduling-class</tt></dt>
<dd><p><a name="indexterm-209"></a><a name="indexterm-210"></a>This property sets the scheduling class for the zone. See <a href="z.config.ov-3.html#gejen">Scheduling Class</a> for additional information and tips.</p></dd>
<dt><tt>ip-type</tt></dt>
<dd><p><a name="indexterm-211"></a><a name="indexterm-212"></a>This property is required to be set only if the zone is an exclusive-IP zone. See <a href="z.config.ov-3.html#gekkb">Exclusive-IP Non-Global Zones</a> and <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>.</p></dd>
<dt><tt>dedicated-cpu</tt></dt>
<dd><p><a name="indexterm-213"></a><a name="indexterm-214"></a>This resource dedicates a subset of the system's processors to the zone while it is running. The <tt>dedicated-cpu</tt> resource provides limits for <tt>ncpus</tt> and, optionally, <tt>importance</tt>. For more information, see <a href="z.config.ov-3.html#gejlw"><tt>dedicated-cpu</tt> Resource</a>.</p></dd>
<dt><tt>capped-cpu</tt></dt>
<dd><p><a name="indexterm-215"></a><a name="indexterm-216"></a>This resource sets a limit on the amount of CPU resources that can be consumed by the zone while it is running. The <tt>capped-cpu</tt> resource provides a limit for <tt>ncpus</tt>. For more information, see <a href="z.config.ov-3.html#gepzc"><tt>capped-cpu</tt> Resource</a>.</p></dd>
<dt><tt>capped-memory</tt></dt>
<dd><p><a name="indexterm-217"></a><a name="indexterm-218"></a>This resource groups the properties used when capping memory for the zone. The <tt>capped-memory</tt> resource provides limits for <tt>physical</tt>, <tt>swap</tt>, and <tt>locked</tt> memory. At least one of these properties must be specified.</p></dd>
<dt><tt>dataset</tt></dt>
<dd><p><a name="indexterm-219"></a><a name="indexterm-220"></a>Adding a Zetabyte File System (ZFS) dataset resource enables the delegation of storage administration to a non-global zone. The zone administrator can create and destroy file systems within that dataset, and modify properties of the dataset. The zone administrator cannot affect datasets that have not been added to the zone or exceed any top level quotas set on the dataset assigned to the zone.</p><p>ZFS datasets can be added to a zone in the following ways.</p>
<ul><li><p>As an lofs mounted file system, when the goal is solely to share space with the global zone</p></li>
<li><p>As a delegated dataset</p></li></ul>
<p>See <a href="http://docs.sun.com/doc/817-2271/ftyxh?a=view">Chapter 10, ZFS Advanced Topics, in <i>Solaris ZFS Administration Guide</i></a> and <a href="z.admin.ov-2.html">File Systems and Non-Global Zones</a>.</p><p>Also see <a href="gclkx.html">Chapter&nbsp;28, Troubleshooting Miscellaneous Solaris Zones Problems</a> for information on dataset issues.</p></dd>
<dt><tt>fs</tt></dt>
<dd><p>Each zone can have various file systems that are mounted when the zone transitions from the installed state to the ready state. The file system resource specifies the path to the file system mount point. For more information about the use of file systems in zones, see <a href="z.admin.ov-2.html">File Systems and Non-Global Zones</a>.</p></dd>
<dt><tt>inherit-pkg-dir</tt></dt>
<dd><p><a name="indexterm-221"></a>This resource should not be configured in a whole root zone.</p><p>In a sparse root zone, the <tt>inherit-pkg-dir</tt> resource is used to represent directories that contain packaged software that a non-global zone shares with the global zone.</p><p>The contents of software packages transferred into the <tt>inherit-pkg-dir</tt> directory are inherited in read-only mode by the non-global zone. The zone's packaging database is updated to reflect the packages. These resources cannot be modified or removed after the zone has been installed using <tt>zoneadm</tt>.</p>
<hr><p><b>Note - </b>Four default <tt>inherit-pkg-dir</tt> resources are included in the configuration. These directory resources indicate which directories should have their associated packages inherited from the global zone. The resources are implemented through a read-only loopback file system mount.</p>
<ul><li><p><tt>/lib</tt></p></li>
<li><p><tt>/platform</tt></p></li>
<li><p><tt>/sbin</tt></p></li>
<li><p><tt>/usr</tt></p></li></ul>

<hr>
</dd>
<dt><tt>net</tt></dt>
<dd><p>The network interface resource is the interface name. Each zone can have network interfaces that should be set up when the zone transitions from the installed state to the ready state.</p></dd>
<dt><tt>device</tt></dt>
<dd><p>The device resource is the device matching specifier. Each zone can have devices that should be configured when the zone transitions from the installed state to the ready state.</p></dd>
<dt><tt>rctl</tt></dt>
<dd><p>The <tt>rctl</tt> resource is used for zone-wide resource controls. The controls are enabled when the zone transitions from the installed state to the ready state.</p><p> See <a href="z.config.ov-3.html#z.config.ov-13">Setting Zone-Wide Resource Controls</a> for more information.</p>
<hr><p><b>Note - </b>To configure zone-wide controls using the <tt>set</tt> <i>global_property_name</i> subcommand of <tt>zonefig</tt> instead of the <tt>rctl</tt> resource, see <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>.</p>
<hr>
</dd>
<dt><tt>attr</tt></dt>
<dd><p>This generic attribute can be used for user comments or by other subsystems. The <tt>name</tt> property of an <tt>attr</tt> must begin with an alphanumeric character. The <tt>name</tt> property can contain alphanumeric characters, hyphens (<tt>-</tt>), and periods (<tt>.</tt>). Attribute names beginning with <tt>zone.</tt> are reserved for use by the system.</p></dd>
</dl>


<a name="z.config.ov-17"></a><h4>Resource Type Properties</h4>
<p><a name="indexterm-222"></a>Resources also have properties to configure. The following properties are associated with the
resource types shown.</p><dl><dt><tt>dedicated-cpu</tt></dt>
<dd><p><tt>ncpus</tt>, <tt>importance</tt></p><p>Specify the number of CPUs and, optionally, the relative importance of the pool. The following example specifies a CPU range for use by the zone <tt>my-zone</tt>. <tt>importance</tt> is also set.</p><pre>zonecfg:my-zone> <tt><b>add dedicated-cpu</b></tt>
zonecfg:my-zone:dedicated-cpu> <tt><b>set ncpus=1-3</b></tt>
zonecfg:my-zone:dedicated-cpu> <tt><b>set importance=2</b></tt>
zonecfg:my-zone:dedicated-cpu> <tt><b>end</b></tt></pre></dd>
<dt><tt>capped-cpu</tt></dt>
<dd><p><tt>ncpus</tt></p><p>Specify the number of CPUs. The following example specifies a CPU cap of 3.5 CPUs for the zone <tt>my-zone</tt>.</p><pre>zonecfg:my-zone> <tt><b>add capped-cpu</b></tt>
zonecfg:my-zone:capped-cpu> <tt><b>set ncpus=3.5</b></tt>
zonecfg:my-zone:capped-cpu> <tt><b>end</b></tt></pre></dd>
<dt><tt>capped-memory</tt></dt>
<dd><p><tt>physical</tt>, <tt>swap</tt>, <tt>locked</tt>Specify the memory limits for the zone <tt>my-zone</tt>. Each limit is optional, but at least one must be set.</p><pre>zonecfg:my-zone> <tt><b>add capped-memory</b></tt>
zonecfg:my-zone:capped-memory> <tt><b>set physical=50m</b></tt>
zonecfg:my-zone:capped-memory> <tt><b>set swap=100m</b></tt>
zonecfg:my-zone:capped-memory> <tt><b>set locked=30m</b></tt>
zonecfg:my-zone:capped-memory> <tt><b>end</b></tt></pre></dd>
<dt><tt>fs</tt></dt>
<dd><p><tt>dir</tt>, <tt>special</tt>, <tt>raw</tt>, <tt>type</tt>, <tt>options</tt></p><p>The <tt>fs</tt> resource parameters supply the values that determine how and where to mount file systems. The <tt>fs</tt> parameters are defined as follows:</p><dl><dt><tt>dir</tt></dt>
<dd><p>Specifies the mount point for the file system</p></dd>
<dt><tt>special</tt></dt>
<dd><p>Specifies the block special device name or directory from the global zone to mount</p></dd>
<dt><tt>raw</tt></dt>
<dd><p>Specifies the raw device on which to run <tt>fsck</tt> before mounting the file system</p></dd>
<dt><tt>type</tt></dt>
<dd><p>Specifies the file system type</p></dd>
<dt><tt>options</tt></dt>
<dd><p>Specifies mount options similar to those found with the <tt>mount</tt> command </p></dd>
</dl>
<p>The lines in the following example specify that <tt>/dev/dsk/c0t0d0s2</tt> in the global zone is to be mounted as <tt>/mnt</tt> in a zone being configured. The <tt>raw</tt> property specifies an optional device on which the <tt>fsck</tt> command is to be run before an attempt is made to mount the file system. The file system type to use is UFS. The options <tt>nodevices</tt> and <tt>logging</tt> are added.</p><pre>zonecfg:my-zone> <tt><b>add fs</b></tt>
zonecfg:my-zone:fs> <tt><b>set dir=/mnt</b></tt>
zonecfg:my-zone:fs> <tt><b>set special=/dev/dsk/c0t0d0s2</b></tt>
zonecfg:my-zone:fs> <tt><b>set raw=/dev/rdsk/c0t0d0s2</b></tt>
zonecfg:my-zone:fs> <tt><b>set type=ufs</b></tt>
zonecfg:my-zone:fs> <tt><b>add options [nodevices,logging]</b></tt>
zonecfg:my-zone:fs> <tt><b>end</b></tt></pre><p>For more information, see <a href="z.admin.ov-2.html#z.admin.ov-23">The <tt>-o</tt> <tt>nosuid</tt> Option</a>, <a href="z.admin.ov-2.html#z.admin.ov-7">Security Restrictions and File System Behavior</a>, and the <a href="http://docs.sun.com/doc/819-2240/fsck-1m?a=view"><tt>fsck</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2240/mount-1m?a=view"><tt>mount</tt>(1M)</a> man pages. Also note that section 1M man pages are available for mount options that are unique to a specific file system. The names of these man pages have the form <tt>mount_</tt><i>filesystem</i>.</p>
<hr><p><b>Note - </b>To add a ZFS file system using the <tt>fs</tt> resource property, see <a href="http://docs.sun.com/doc/817-2271/gbbrq?a=view">Adding ZFS File Systems to a Non-Global Zone in <i>Solaris ZFS Administration Guide</i></a>.</p>
<hr>
</dd>
<dt><tt>dataset</tt></dt>
<dd><p><tt>name</tt></p><p>The lines in the following example specify that the dataset <i>sales</i> is to be visible and mounted in the non-global zone and no longer visible in the global zone.</p><pre>zonecfg:my-zone> <tt><b>add dataset</b></tt>
zonecfg:my-zone> <tt><b>set name=tank/sales</b></tt>
zonecfg:my-zone> <tt><b>end</b></tt></pre></dd>
<dt><tt>inherit-pkg-dir</tt></dt>
<dd><p><tt>dir</tt></p><p>The lines in the following example specify that <tt>/opt/sfw</tt> is to be loopback mounted from the global zone.</p><pre>zonecfg:my-zone> <tt><b>add inherit-pkg-dir</b></tt>
zonecfg:my-zone:inherit-pkg-dir> <tt><b>set dir=/opt/sfw</b></tt>
zonecfg:my-zone:inherit-pkg-dir> <tt><b>end</b></tt></pre></dd>
<dt><tt>net</tt></dt>
<dd><p><tt>address</tt>, <tt>physical</tt>, <tt>defrouter</tt></p>
<hr><p><b>Note - </b><a name="indexterm-223"></a>For a shared-IP zone, both the IP address and the device are specified. Optionally, the default router can be set . For an exclusive-IP zone, only the physical interface is specified.</p>
<hr>
<p>In the following example for a shared-IP zone, the IP address <tt>192.168.0.1</tt> is added to the zone. An <tt>hme0</tt> card is used for the physical interface. To determine which physical interface to use, type <tt>ifconfig</tt> <tt>-a</tt> on your system. Each line of the output, other than loopback driver lines, begins with the name of a card installed on your system. Lines that contain <tt>LOOPBACK</tt> in the descriptions do not apply to cards. The default route is set to <tt>10.0.0.1</tt> for the zone.</p><pre>zonecfg:my-zone> <tt><b>add net</b></tt>
zonecfg:my-zone:net> <tt><b>set physical=hme0</b></tt>
zonecfg:my-zone:net> <tt><b>set address=192.168.0.1</b></tt>
zonecfg:my-zone:net> <tt><b>set defrouter=10.0.0.1</b></tt>
zonecfg:my-zone:net> <tt><b>end</b></tt></pre><p>In the following example for an exclusive-IP zone, a <tt>bge32001</tt> link is used for the physical interface, which is a VLAN on <tt>bge1</tt>. To determine which data-links are available, use the command <tt>dladm</tt> <tt>show-link</tt>. Note that <tt>ip-type=exclusive</tt> must also be specified.</p><pre>zonecfg:my-zone> <tt><b>set ip-type=exclusive</b></tt>
zonecfg:my-zone> <tt><b>add net</b></tt>
zonecfg:my-zone:net> <tt><b>set physical=bge32001</b></tt>
zonecfg:my-zone:net> <tt><b>end</b></tt></pre>
<hr><p><b>Note - </b>Prior to OpenSolaris<sup>TM</sup> build snv_83, the data-link used with exclusive-IP zones must be GLDv3 . Non-GLDv3 data-links appear as <tt>type: legacy</tt> in the <tt>dladm</tt> <tt>show-link</tt> output. The <tt>ce</tt> legacy device is an exception. This device can support an exclusive-IP zone.</p>
<hr>
</dd>
<dt><tt>device</tt></dt>
<dd><p><tt>match</tt></p><p>In the following example, a <tt>/dev/pts</tt> device is included in a zone.</p><pre>zonecfg:my-zone> <tt><b>add device</b></tt>
zonecfg:my-zone:device> <tt><b>set match=/dev/pts*</b></tt>
zonecfg:my-zone:device> <tt><b>end</b></tt></pre>
<hr><p><b>Note - </b>See <a href="z.admin.ov-13.html">Device Use in Non-Global Zones</a>.</p>
<hr>
</dd>
<dt><tt>rctl</tt></dt>
<dd><p><tt>name</tt>, <tt>value</tt></p><p> The following zone-wide resource controls are available.</p>
<ul><li><p><tt>zone.cpu-cap</tt></p></li>
<li><p><tt>zone.cpu-shares</tt> (preferred: <tt>cpu-shares</tt>)</p></li>
<li><p><tt>zone.max-locked-memory</tt></p></li>
<li><p><tt>zone.max-lwps</tt> (preferred: <tt>max-lwps</tt>)</p></li>
<li><p><tt>zone.max-msg-ids</tt> (preferred: <tt>max-msg-ids</tt>)</p></li>
<li><p><tt>zone.max-sem-ids</tt> (preferred: <tt>max-sem-ids</tt>)</p></li>
<li><p><tt>zone.max-shm-ids</tt> (preferred: <tt>max-shm-ids</tt>)</p></li>
<li><p><tt>zone.max-shm-memory</tt> (preferred: <tt>max-shm-memory</tt>)</p></li>
<li><p><tt>zone.max-swap</tt></p></li></ul>
<p>Note that the preferred, simpler method for setting a zone-wide resource control is to use the property name instead of the <tt>rctl</tt> resource, as shown in <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>. If zone-wide resource control entries in a zone are configured using <tt>add</tt> <tt>rctl</tt>, the format is different than resource control entries in the <tt>project</tt> database. In a zone configuration, the <tt>rctl</tt> resource type consists of three name/value pairs. The names are <tt>priv</tt>, <tt>limit</tt>, and <tt>action</tt>. Each of the names takes a simple value.</p><pre>zonecfg:my-zone> <tt><b>add rctl</b></tt>
zonecfg:my-zone:rctl> <tt><b>set name=zone.cpu-shares</b></tt>
zonecfg:my-zone:rctl> <tt><b>add value (priv=privileged,limit=10,action=none)</b></tt>zonecfg:my-zone:rctl> <tt><b>end</b></tt></pre><pre>zonecfg:my-zone> <tt><b>add rctl</b></tt>
zonecfg:my-zone:rctl> <tt><b>set name=zone.max-lwps</b></tt>
zonecfg:my-zone:rctl> <tt><b>add value (priv=privileged,limit=100,action=deny)</b></tt>
zonecfg:my-zone:rctl> <tt><b>end</b></tt></pre><p>For general information about resource controls and attributes, see <a href="rmctrls-1.html">Chapter&nbsp;6, Resource Controls (Overview)</a> and <a href="z.admin.ov-3.html">Resource Controls Used in Non-Global Zones</a>. </p></dd>
<dt><tt>attr</tt></dt>
<dd><p><tt>name</tt>, <tt>type</tt>, <tt>value</tt></p><p>In the following example, a comment about a zone is added.</p><pre>zonecfg:my-zone> <tt><b>add attr</b></tt>
zonecfg:my-zone:attr> <tt><b>set name=comment</b></tt>
zonecfg:my-zone:attr> <tt><b>set type=string</b></tt>
zonecfg:my-zone:attr> <tt><b>set value="Production zone"</b></tt>
zonecfg:my-zone:attr> <tt><b>end</b></tt></pre></dd>
</dl>
<p>You can use the <tt>export</tt> subcommand to print a zone configuration to standard
output. The configuration is saved in a form that can be used in
a command file.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.config.ov-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.config.ov-18.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

