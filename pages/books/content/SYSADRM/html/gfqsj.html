<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>virt-install</tt> Overview - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gfqke.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gentextid-22133.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<div class="onpage">
<p class="toc level3"><a href=""><tt>virt-install</tt> Overview</a></p>
<p class="toc level4"><a href="#gfwri">How to Determine Whether a Machine Is HVM-Capable</a></p>
</div>
<p class="toc level3 tocsp"><a href="gentextid-22133.html">Install Using <tt>virt-install</tt> With Options</a></p>
<p class="toc level4"><a href="gentextid-22133.html#gexyd">How to Complete the Solaris DomU <tt>sysidcfg</tt> Configuration</a></p>
<p class="toc level3 tocsp"><a href="gexsq.html">Install a DomU Interactively by Using <tt>virt-install</tt></a></p>
<p class="toc level3"><a href="gfser.html">About Network Installations</a></p>
<p class="toc level2 tocsp"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gfqsj"></a><h3><tt>virt-install</tt> Overview</h3>
<p>The <tt>virt-install</tt> program can be run as a command-line utility, with parameters specified
through options, or interactively, in response to a series of prompts.</p>

<a name="gfrjv"></a><h4>Supported Machines</h4>
<p>x64 and x86 based systems are supported.</p><p>To run Windows hardware-assisted virtual machine (HVM) domains, an HVM-capable machine that is
running Solaris xVM dom0 is required. A machine is HVM-capable if it is
has either an AMD Opteron Revision F or later, or an Intel
CPU with VT extensions.</p>

<a name="gfwri"></a><h4>How to Determine Whether a Machine Is HVM-Capable</h4><p>To determine whether a machine is HVM-capable, run the <tt>virt-install</tt> program with
no arguments. </p><p>If the system asks whether you want a fully virtualized guest, you
have an HVM-capable system.</p><p>If this question is not displayed, then you have a non-HVM capable
system.</p><ol>
<li><b>Become superuser, or assume the Primary Administrator role.</b></li>
<li><b>Type <tt>virt-install</tt> without options.</b><pre># <tt><b>virt-install</b></tt></pre><p>If you see the following display, you have an HVM-capable system:</p><pre>Would you like a fully virtualized guest (yes or no)?  
This will allow you to run unmodified operating systems.</pre></li></ol>

<a name="gfrks"></a><h4>Installation Types</h4>
<p>Types of installations that can be performed include the following:</p>
<ul><li><p>Interactive</p></li>
<li><p>Command line, with options supplied</p></li>
<li><p>Netinstall</p></li>
<li><p>ISO image</p></li>
<li><p>Solaris JumpStart</p></li></ul>


<a name="gfrkt"></a><h4>Required Information</h4>
<p>You will need to supply the guest domain information listed below.</p><dl><dt>name</dt>
<dd><p>Name for the guest domain. Each guest domain must have a unique name. This name serves as the label of the guest operating system. The name must be a real hostname for network installationss to work.</p></dd>
<dt>image location</dt>
<dd><p>Location of the installation software. Installation must be over a network (which includes an NFS share from the local host operating system) or be an ISO install.</p><p>For example:</p><pre><tt><b>--location nfs:my.nfs.server.com:/home/install/test/mydomain</b></tt></pre><p>For HVM, an ISO or CDROM device should be given instead of an image location.</p><p>See <a href="gentextid-22133.html#gfsio"><tt>virt-install</tt> Examples</a>.</p><p>Installations using <tt>http</tt> or <tt>ftp</tt>, as shown in the following examples, are supported for Linux paravirtualized domain installations only:</p><pre>http://my.http.server.com:/install/test/mydomain
ftp://my.ftp.server.com:/install/test/mydomain</pre></dd>
<dt>vcpus</dt>
<dd><p>The number of CPUs for the guest domain. The default is <tt>1</tt>. You can assign specific CPUs. If undefined, the hypervisor makes the selection.</p></dd>
<dt>memory</dt>
<dd><p>Amount of RAM to be allocated to the guest, in megabytes. A running domain should use a minimum of 512 megabytes. However, to install the guest domain, 1 Gbyte (1024 megabytes) is required.</p></dd>
<dt>graphics</dt>
<dd><p>Graphical console. Default is <tt>graphics</tt>. The <tt>nographics</tt> option applies to paravirtual guests only. If you intend to enable graphics support, you must decide whether the graphical installer should be used.</p></dd>
<dt>(Optional) Virtual network interface MAC address</dt>
<dd><p>This is the MAC address of the dom0's network interface that you want the domU to use to send and receive internet traffic. By default, the hypervisor tools uses the first available network interface card (NIC) when creating guest domains.</p></dd>
</dl>
<p>The default values for the action to be taken on a domU
shutdown, reboot, or crash are set by <tt>virt-install</tt>. You currently cannot change these defaults.</p>

<a name="gfszc"></a><h4>Options</h4>
<p>Usage examples are provided in subsequent sections of this chapter.</p><dl><dt><tt>--accelerate</tt></dt>
<dd><p>Use kernel acceleration capabilities.</p></dd>
<dt><tt>--arch=</tt><i>arch</i></dt>
<dd><p>The CPU architecture to simulate. Acceptable values are <i>x86</i> and <i>sparc</i>.</p></dd>
<dt><tt>--autocf=</tt><i>AUTOCF</i></dt>
<dd><p>JumpStart path, which is <tt>nfs:</tt><i>host:/path</i>. The path must point to the directory containing JumpStart information,</p></dd>
<dt><tt>-b</tt> <i>bridge</i>, <tt>--bridge=</tt><i>bridge</i></dt>
<dd><p>Bridge to which to connect the network interface. If you do not specify a bridge, the system attempts to determine the default.</p></dd>
<dt><tt>-c</tt> <i>cdrom</i>, <tt>--cdrom=</tt><i>cdrom</i></dt>
<dd><p>File to use as a virtual CD-ROM device for fully virtualized guests. This option works with HVM domains and is ignored with paravirtualized domains. To install from <i>cdrom</i>, pass the ISO path to <tt>--location</tt>.</p></dd>
<dt><tt>--check-cpu</tt></dt>
<dd><p>Verify that assigned VCPUs do not exceed physical CPUs and output a warning if this is the case.</p></dd>
<dt><tt>--connect=</tt><i>URI</i></dt>
<dd><p>Connect to hypervisor at <i>URI</i>.</p></dd>
<dt><tt>-d</tt>, <tt>--debug</tt></dt>
<dd><p>Display debugging information.</p></dd>
<dt><tt>-f</tt> <i>disk_image</i>, <tt>--file=</tt><i>disk_image</i></dt>
<dd><p>Virtual Backing Device (VBD), such as the file to use as the disk image location.</p><p>The file is created by <tt>virt-install</tt> if the file does not exist. By default, <tt>virt-install</tt> creates a sparse image file. To create a non-sparse image, use the <tt>--nonsparse</tt> option on the <tt>virt-install</tt> command line. With appropriate permissions, the VBD can be on a remote system and specified with the <tt>/net/system</tt> construction.</p><p>A physical partition or device can be used, such as <tt>/dev/dsk/c0t0d0s3</tt>.</p></dd>
<dt><tt>-h</tt>,<tt>--help</tt></dt>
<dd><p>Display list of <tt>virt-install</tt> options.</p></dd>
<dt><tt>-k</tt> <i>keymap</i>, <tt>--keymap=</tt><i>keymap</i></dt>
<dd><p>Set up <i>keymap</i> for a graphical console.</p></dd>
<dt><tt>-l</tt> <i>location</i>, <tt>--location=</tt><i>location</i></dt>
<dd><p>Installation source for a paravirtualized domU, such as <tt>nfs:</tt><i>host:/path</i>.</p></dd>
<dt><tt>-m</tt> <i>mac_addr</i>, <tt>--mac=</tt><i>mac_addr</i></dt>
<dd><p>Fixed MAC address for the domU. If the keywords <tt>none</tt> or <tt>random</tt> are specified, a random address will be used.</p></dd>
<dt><tt>-n</tt> <i>name</i>, <tt>--name=</tt><i>name</i></dt>
<dd><p>Name of the domU.</p></dd>
<dt><tt>--noacpi</tt></dt>
<dd><p>Disables Advanced Configuration and Power Interface (ACPI) for a fully virtualized domU. Overrides stored configuration setting specified by the <tt>--os-type</tt> and <tt>--os-variant</tt> options.</p></dd>
<dt><tt>--noapic</tt></dt>
<dd><p>Disables Programmable Interrupt Controller (APIC) for a fully virtualized domU. Overrides stored configuration setting specified by the <tt>--os-type</tt> and <tt>--os-variant</tt> options.</p></dd>
<dt><tt>--noautoconsole</tt></dt>
<dd><p>Do not automatically try to connect to the guest console.</p></dd>
<dt><tt>--nonsparse</tt></dt>
<dd><p>Do not use sparse files for disks..Note that the use of this option causes domU creation to be significantly slower.</p></dd>
<dt><tt>--ostype=</tt><i>os_type</i></dt>
<dd><p>The OS type for fully virtualized guests. Acceptable values are <i>solaris</i>, <i>unix</i>, <i>linux</i>, and <i>windows</i>.</p></dd>
<dt><tt>-p</tt>, <tt>--paravirt</tt></dt>
<dd><p>Indicates that guest is paravirtualized.</p></dd>
<dt><tt>-p -nographics</tt></dt>
<dd><p>This is a paravirtual installation. Do not set up a graphical console for the guest. The console is serial. These two options are always used together.</p><p>When using <tt>virt-install</tt> to create a paravirtualized guest, <tt>--nographics</tt> must be used to override the default mode.</p><p>By default, consoles for HVM guests are graphics consoles. HVM installs may specify either VNC (<tt>--vnc</tt>) or Simple DirectMedia Layer (SDL) (<tt>--sdl</tt>) for graphics support.</p></dd>
<dt><tt>--variant=</tt><i>os_variant</i></dt>
<dd><p>The OS variant for fully virtualized guests. Acceptable values are <i>fedora6</i>, <i>rhel5</i>, <i>solaris10</i>, <i>win2k</i>, and <i>vista</i>.</p></dd>
<dt><tt>--vcpus=</tt><i>N</i></dt>
<dd><p>Sets the number of vcpus for the guest domain.</p></dd>
<dt><tt>-r</tt> <i>mem_amount</i>, <tt>--ram=</tt><i>mem_amount</i></dt>
<dd><p>Memory to allocate for domU instance, in megabytes.</p><p>To optimize the current dom0 handling of memory, you should size memory allocated to a domU to be no more than approximately 55 percent of the total physical memory installed in your system, and then divide the allocated memory among the domUs you intend to run concurrently.</p><p>For example, if you have 2 Gbytes of RAM installed in your system, you should not allocate more than approximately 1.1 Gbytes of RAM to domUs. Thus, if you only intend to run one domU, you can allocate the entire 1.1 Gbytes to it. If you intend to run two domUs concurrently, you should not allocate more than 550 MB of RAM to either domain, etc.</p><p> Use 1 Gbyte or more for installations, and reduce the amount later if necessary.</p></dd>
<dt><tt>-s</tt> <i>disksize</i>, <tt>--file-size=</tt><i>disksize</i></dt>
<dd><p>Size of the disk image (if it does not exist), in Gbytes.</p></dd>
<dt><tt>--sdl</tt></dt>
<dd><p>Use Simple DirectMedia Layer (SDL) for graphics support. This option works with some guest domains, including HVM, but cannot be used with Solaris. For more information on SDL, see <a href="http://en.wikipedia.org/wiki/Simple_DirectMedia _Layer">Simple DirectMedia Layer</a>.</p></dd>
<dt><tt>-u</tt> <i>UUID</i>, <tt>--uuid=</tt><i>UUID</i></dt>
<dd><p>Specifies the UUID as a 32&ndash;digit hexadecimal number, for the domU. If no UUID is specified, the system generates a random UUID.</p></dd>
<dt><tt>-v</tt> , <tt>--hvm</tt></dt>
<dd><p>Specifies that the guest is a hardware assisted virtual machine (HVM).</p></dd>
<dt><tt>--vcpus=</tt><i>vcpus</i></dt>
<dd><p>Number of virtual CPUs (VCPUs) to configure for the domU.</p>
<hr><p><b>Note - </b>From dom0, you can dynamically reset the number of active VCPUs allocated for the domain by using:</p><pre># <tt><b>xm vcpu-set </tt><i>domain</i><tt> </tt><i>number_vCPUs</i><tt></b></tt></pre>
<hr>
</dd>
<dt><tt>-vnc</tt></dt>
<dd><p>Use Virtual Network Computing (VNC) for graphics support. The graphical output of the guest is redirected over VNC. This option works with HVM domains but it does not work with paravirtualized domains.</p></dd>
<dt><tt>--vncport</tt></dt>
<dd><p>Port to use for VNC.</p></dd>
<dt><tt>-w</tt> <i>network</i>, <tt>--network=</tt><i>network</i></dt>
<dd><p>Connect the guest to a virtual network, forwarding to the physical network with Network Address Translation (NAT).</p></dd>
<dt><tt>-x</tt> <i>extra_args</i>, <tt>--extra-args=</tt><i>extra_args</i></dt>
<dd><p>When installing paravirtualized guests, specifies additional arguments to pass to the installer.</p></dd>
</dl>
<p>After you enter the required information, the installation starts. If you enabled graphics,
a VNC window containing the graphical installer opens. If graphics are not enabled,
the text installer displays.</p><p>For more information, see the <tt>virt-install</tt>(1M) man page.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gfqke.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gentextid-22133.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

