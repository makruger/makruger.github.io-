<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Zone Components - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.config.ov-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.config.ov-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level3"><a href="gejut.html">About Resources in Zones</a></p>
<p class="toc level3"><a href="z.config.ov-2.html">Pre-Installation Configuration Process</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Zone Components</a></p>
</div>
<p class="toc level3"><a href="z.config.ov-5.html">Using the <tt>zonecfg</tt> Command</a></p>
<p class="toc level3"><a href="z.config.ov-10.html"><tt>zonecfg</tt> Modes</a></p>
<p class="toc level3"><a href="z.config.ov-12.html">Zone Configuration Data</a></p>
<p class="toc level3"><a href="z.config.ov-18.html">Tecla Command-Line Editing Library</a></p>
<p class="toc level2 tocsp"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="z.config.ov-3"></a><h3>Zone Components</h3>
<p>This section covers the required and optional zone components that can be configured.
Additional information is provided in <a href="z.config.ov-12.html">Zone Configuration Data</a>.</p>

<a name="z.config.ov-9"></a><h4>Zone Name and Path</h4>
<p>You must choose a name and a path for your zone.</p>

<a name="gdagb"></a><h4>Zone Autoboot</h4>
<p>The <tt>autoboot</tt> property setting determines whether the zone is automatically booted when the
global zone is booted. The zones service, <tt>svc:/system/zones:default</tt> must also be enabled.</p>

<a name="gdafs"></a><h4>Resource Pool Association</h4>
<p>If you have configured resource pools on your system as described in
<a href="rmpool.task-1.html">Chapter&nbsp;13, Creating and Administering Resource Pools (Tasks)</a>, you can use the <tt>pool</tt> property to associate the zone with one
of the resource pools when you configure the zone.</p><p>If you do not have resource pools configured, you can still specify that
a subset of the system's processors be dedicated to a non-global zone while
it is running by using the <tt>dedicated-cpu</tt> resource. The system will dynamically create
a temporary pool for use while the zone is running. With specification through
<tt>zonecfg</tt>, pool settings propagate during migrations.</p>
<hr><p><b>Note - </b>A zone configuration using a persistent pool set through the <tt>pool</tt> property
is incompatible with a temporary pool configured through the <tt>dedicated-cpu</tt> resource. You can
set only one of these two properties.</p>
<hr>


<a name="gejlw"></a><h4><tt>dedicated-cpu</tt> Resource</h4>
<p><a name="indexterm-157"></a><a name="indexterm-158"></a>The <tt>dedicated-cpu</tt> resource specifies that a subset of the system's processors should be
dedicated to a non-global zone while it is running. When the zone boots,
the system will dynamically create a temporary pool for use while the zone
is running.</p><p>With specification in <tt>zonecfg</tt>, pool settings propagate during migrations.</p><p>The <tt>dedicated-cpu</tt> resource sets limits for <tt>ncpus</tt>, and optionally, <tt>importance</tt>. </p><dl><dt><tt>ncpus</tt></dt>
<dd><p>Specify the number of CPUs or specify a range, such as 2&ndash;4 CPUs. If you specify a range because you want dynamic resource pool behavior, also do the following:</p>
<ul><li><p>Set the <tt>importance</tt> property.</p></li>
<li><p>Enable the <tt>poold</tt> service. For instructions, see <a href="rmpool.task-57.html#gbvdw">How to Enable the Dynamic Resource Pools Service Using <tt>svcadm</tt></a>.</p></li></ul>
</dd>
<dt><tt>importance</tt></dt>
<dd><p>If you are using a CPU range to achieve dynamic behavior, also set the <tt>importance</tt> property, The <tt>importance</tt> property, which is <b>optional</b>, defines the relative importance of the pool. This property is only needed when you specify a range for <tt>ncpus</tt> and are using dynamic resource pools managed by <tt>poold</tt>. If <tt>poold</tt> is not running, then <tt>importance</tt> is ignored. If <tt>poold</tt> is running and <tt>importance</tt> is not set, <tt>importance</tt> defaults to <tt>1</tt>. For more information, see <a href="rmpool-75.html#gbvhv"><tt>pool.importance</tt> Property Constraint</a>.</p></dd>
</dl>

<hr><p><b>Note - </b>The <tt>capped-cpu</tt> resource and the <tt>dedicated-cpu</tt> resource are incompatible. The <tt>cpu-shares</tt> rctl and
the <tt>dedicated-cpu</tt> resource are incompatible.</p>
<hr>


<a name="gepzc"></a><h4><tt>capped-cpu</tt> Resource</h4>
<p><a name="indexterm-159"></a><a name="indexterm-160"></a>The <tt>capped-cpu</tt> resource provides an absolute fine-grained limit on the amount of CPU
resources that can be consumed by a project or a zone. When used
in conjunction with  processor sets, CPU caps limit CPU usage within a
set. The <tt>capped-cpu</tt> resource has a single <tt>ncpus</tt> property that is a positive
decimal with two digits to the right of the decimal. This property corresponds
to units of CPUs. The resource does not accept a range. The resource
does accept a decimal number. When specifying <tt>ncpus</tt>, a value of <tt>1</tt> means
100 percent of a CPU. A value of <tt>1.25</tt> means 125 percent, because
100 percent corresponds to one full CPU on the system.</p>
<hr><p><b>Note - </b>The <tt>capped-cpu</tt> resource and the <tt>dedicated-cpu</tt> resource are incompatible.</p>
<hr>


<a name="gejen"></a><h4>Scheduling Class</h4>
<p><a name="indexterm-161"></a>You can use the <b>fair share scheduler</b> (FSS) to control the allocation of available CPU resources
among zones, based on their importance. This importance is expressed by the number
of <b>shares</b> of CPU resources that you assign to each zone. Even if
you are not using FSS to manage CPU resource allocation between zones, you
can set the zone's scheduling-class to use FSS so that you can set
shares on projects within the zone.</p><p>When you explicitly set the <tt>cpu-shares</tt> property, the fair share scheduler (FSS) will
be used as the scheduling class for that zone. However, the preferred way
to use FSS in this case is to set FSS to be the
system default scheduling class with the <tt>dispadmin</tt> command. That way, all zones will
benefit from getting a fair share of the system CPU resources. If <tt>cpu-shares</tt>
is not set for a zone, the zone will use the system default
scheduling class. The following actions set the scheduling class for a zone:</p>
<ul><li><p>You can use the <tt>scheduling-class</tt> property in <tt>zonecfg</tt> to set the scheduling class for the zone.</p></li>
<li><p>You can set the scheduling class for a zone through the resource pools facility. If the zone is associated with a pool that has its <tt>pool.scheduler</tt> property set to a valid scheduling class, then processes running in the zone run in that scheduling class by default. See <a href="rmpool-2.html">Introduction to Resource Pools</a> and <a href="rmpool.task-2.html#rmpool.task-22">How to Associate a Pool With a Scheduling Class</a>.</p></li>
<li><p>If the <tt>cpu-shares</tt> rctl is set and FSS has not been set as the scheduling class for the zone through another action, <tt>zoneadmd</tt> sets the scheduling class to FSS when the zone boots.</p></li>
<li><p>If the scheduling class is not set through any other action, the zone inherits the system default scheduling class.</p></li></ul>
<p>Note that you can use the <tt>priocntl</tt> described in the <a href="http://docs.sun.com/doc/819-2239/priocntl-1?a=view"><tt>priocntl</tt>(1)</a> man
page to move running processes into a different scheduling class without changing the default
scheduling class and rebooting.</p>

<a name="gejkz"></a><h4>Physical Memory Control and the <tt>capped-memory</tt> Resource</h4>
<p><a name="indexterm-162"></a><a name="indexterm-163"></a>The <tt>capped-memory</tt> resource sets limits for <tt>physical</tt>, <tt>swap</tt>, and <tt>locked</tt> memory. Each limit
is optional, but at least one must be set.</p>
<ul><li><p><a name="indexterm-164"></a>Determine values for this resource if you plan to cap memory for the zone by using <tt>rcapd</tt> from the global zone. The <tt>physical</tt> property of the <tt>capped-memory</tt> resource is used by <tt>rcapd</tt> as the <tt>max-rss</tt> value for the zone.</p></li>
<li><p><a name="indexterm-165"></a>The <tt>swap</tt> property of the <tt>capped-memory</tt> resource is the preferred way to set the <tt>zone.max-swap</tt> resource control.</p></li>
<li><p><a name="indexterm-166"></a>The <tt>locked</tt> property of the <tt>capped-memory</tt> resource is the preferred way to set the <tt>zone.max-locked-memory</tt> resource control.</p></li></ul>
<p>For more information, see <a href="rm.rcapd-1.html">Chapter&nbsp;10, Physical Memory Control Using the Resource Capping Daemon (Overview)</a>, <a href="rm.rcapd.task-1.html">Chapter&nbsp;11, Administering the Resource Capping Daemon (Tasks)</a>, and <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>.</p>

<a name="z.config.ov-6"></a><h4>Zone Network Interfaces</h4>
<p>Zone network interfaces configured by the <tt>zonecfg</tt> command to provide network connectivity will
automatically be set up and placed in the zone when it is booted.</p><p>The Internet Protocol (IP) layer accepts and delivers packets for the network. This
layer includes IP routing, the Address Resolution Protocol (ARP), IP security architecture (IPsec),
and IP Filter.</p><p>There are two IP types available for non-global zones, shared-IP and exclusive-IP. The
shared-IP zone shares a network interface and the exclusive-IP zone must have a
dedicated network interface.</p><p>For information about IP features in each type, see <a href="z.admin.ov-9.html">Networking in Shared-IP Non-Global Zones</a> and <a href="gelkh.html">Networking in Exclusive-IP Non-Global Zones</a>.</p>

<a name="gekku"></a><h5>Shared-IP Non-Global Zones</h5>
<p><a name="indexterm-167"></a><a name="indexterm-168"></a><a name="indexterm-169"></a>The shared-IP zone is the default type. The zone must have one or
more dedicated IP addresses. A shared-IP zone shares the IP layer configuration and
state with the global zone. The zone should use the shared-IP instance if
both of the following are true:</p>
<ul><li><p>The zone is to be connected to the same data-link, that is, be on the same IP subnet or subnets as the global zone</p></li>
<li><p>You do not want the other capabilities that the exclusive-IP zone provides.</p></li></ul>
<p>Shared-IP zones are assigned one or more IP addresses using the <tt>zonecfg</tt>
command. The data-link names must also be configured in the global zone.</p><p>In the <tt>zonecfg</tt> <tt>net</tt> resource, the <tt>address</tt> and the <tt>physical</tt> properties must
be set. The <tt>defrouter</tt> property is optional.</p><p>These addresses are associated with logical network interfaces. The <tt>ifconfig</tt> command can
be used from the global zone to add or remove logical interfaces in
a running zone. For more information, see <a href="z.admin.ov-9.html#z.admin.ov-12">Shared-IP Network Interfaces</a>.</p>

<a name="gekkb"></a><h5>Exclusive-IP Non-Global Zones</h5>
<p><a name="indexterm-170"></a><a name="indexterm-171"></a>Full IP-level functionality is available in an exclusive-IP zone.</p><p>An exclusive-IP zone has its own IP-related state.</p><p>This includes the ability to use the following features in an exclusive-IP zone:</p>
<ul><li><p><a name="indexterm-172"></a>DHCPv4 and IPv6 stateless address autoconfiguration</p></li>
<li><p><a name="indexterm-173"></a>IP Filter, including network address translation (NAT) functionality</p></li>
<li><p><a name="indexterm-174"></a>IP Network Multipathing (IPMP)</p></li>
<li><p><a name="indexterm-175"></a>IP routing</p></li>
<li><p><tt>ndd</tt> for setting TCP/UDP/SCTP as well as IP/ARP-level knobs</p></li>
<li><p>IP security (IPsec) and IKE, which automates the provision of authenticated keying material for IPsec security association</p></li></ul>
<p><a name="indexterm-176"></a>An exclusive-IP zone is assigned its own set of data-links using the <tt>zonecfg</tt>
command. The zone is given a data-link name such as <tt>xge0</tt>, <tt>e1000g1</tt>, or
<tt>bge32001</tt>, using the <tt>physical</tt> property of the <tt>net</tt> resource. The <tt>address</tt> and the
<tt>defrouter</tt> properties of the <tt>net</tt> resource are not set.</p><p>Note that the assigned data-link enables the <tt>snoop</tt> command to be used.</p><p>The <tt>dladm</tt> command can be used with the <tt>show-linkprop</tt> subcommand to show
the assignment of data-links to running exclusive-IP zones. The <tt>dladm</tt> command can be
used with the <tt>set-linkprop</tt> subcommand to assign additional data-links to running zones.
See <a href="geohb.html">Administering Data-Links in Exclusive-IP Non-Global Zones</a> for usage examples.</p><p>Inside a running exclusive-IP zone, the <tt>ifconfig</tt> command can be used to configure
IP, which includes the ability to add or remove logical interfaces. The IP
configuration in a zone can be set up in the same way
as for the global zone, by using the <tt>sysidtools</tt> described in <a href="http://docs.sun.com/doc/819-2251/sysidcfg-4?a=view"><tt>sysidcfg</tt>(4)</a>.</p>
<hr><p><b>Note - </b>The IP configuration of an exclusive-IP zone can only be viewed from the
global zone by using the <tt>zlogin</tt> command. An example follows.</p><pre>global# <tt><b>zlogin zone1 ifconfig -a</b></tt></pre>
<hr>


<a name="geocw"></a><h5>Security Differences Between Shared-IP and Exclusive-IP Non-Global Zones</h5>
<p>In a shared-IP zone, applications in the zone, including the superuser, cannot send
packets with source IP addresses other than the ones assigned to the zone
through the <tt>zonecfg</tt> utility. This type of zone does not have access to
send and receive arbitrary data-link (layer 2) packets.</p><p>For an exclusive-IP zone, <tt>zonecfg</tt> instead grants the entire specified data-link to the
zone. As a result, the superuser in an exclusive-IP zone can send spoofed
packets on those data-links, just as can be done in the global 
zone.</p>

<a name="geotb"></a><h5>Using Shared-IP and Exclusive-IP Non-Global Zones at the Same Time</h5>
<p>The shared-IP zones always share the IP layer with the global zone, and
the exclusive-IP zones always have their own instance of the IP layer. Both
shared-IP zones and exclusive-IP zones can be used on the same machine.</p>

<a name="z.config.ov-7"></a><h4>File Systems Mounted in Zones</h4>
<p>Generally, the file systems mounted in a zone include the following:</p>
<ul><li><p>The set of file systems mounted when the virtual platform is initialized</p></li>
<li><p>The set of file systems mounted from within the application environment itself</p></li></ul>
<p>This can include, for example, the following file systems:</p>
<ul><li><p>File systems specified in a zone's <tt>/etc/vfstab</tt> file</p></li>
<li><p><tt>AutoFS</tt> and <tt>AutoFS</tt>-triggered mounts</p></li>
<li><p>Mounts explicitly performed by a zone administrator</p></li></ul>
<p>Certain restrictions are placed on mounts performed from within the application environment. These
restrictions prevent the zone administrator from denying service to the rest of the
system, or otherwise negatively impacting other zones.</p><p>There are security restrictions associated with mounting certain file systems from within a
zone. Other file systems exhibit special behavior when mounted in a zone. See
<a href="z.admin.ov-2.html">File Systems and Non-Global Zones</a> for more information.</p>

<a name="z.config.ov-8"></a><h4>Configured Devices in Zones</h4>
<p>The <tt>zonecfg</tt> command uses a rule-matching system to specify which devices should appear
in a particular zone. Devices matching one of the rules are included in
the zone's <tt>/dev</tt> file system. For more information, see <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>.</p>

<a name="z.config.ov-13"></a><h4>Setting Zone-Wide Resource Controls</h4>
<p><a name="indexterm-177"></a><a name="indexterm-178"></a><a name="indexterm-179"></a>The global administrator can set privileged zone-wide resource controls for a zone. Zone-wide resource
controls limit the total resource usage of all process entities within a zone.</p><p>These limits are specified for both the global and non-global zones by using
the <tt>zonecfg</tt> command. See <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>.</p><p>The preferred, simpler method for setting a zone-wide resource control is to use
the property name instead of the <tt>rctl</tt> resource.</p><p><a name="indexterm-180"></a>The <tt>zone.cpu-cap</tt> resource control sets an absolute limit on the amount of CPU
resources that can be consumed by a zone. A value of <tt>100</tt> means
100 percent of one CPU as the <tt>project.cpu-cap</tt> setting. A value of
<tt>125</tt> is 125 percent, because 100 percent corresponds to one full CPU on
the system when using CPU caps.</p>
<hr><p><b>Note - </b>When setting the <tt>capped-cpu</tt> resource, you can use a decimal number for the
unit. The value correlates to the <tt>zone.capped-cpu</tt> resource control, but the setting
is scaled down by 100. A setting of <tt>1</tt> is equivalent to a
setting of <tt>100</tt> for the resource control.</p>
<hr>
<p><a name="indexterm-181"></a>The <tt>zone.cpu-shares</tt> resource control sets a limit on the number of fair share
scheduler (FSS) CPU shares for a zone. CPU shares are first allocated to
the zone, and then further subdivided among projects within the zone as specified
in the <tt>project.cpu-shares</tt> entries. For more information, see <a href="z.admin.task-71.html">Using the Fair Share Scheduler on a Solaris System With Zones Installed</a>. The global property name for
this control is <tt>cpu-shares</tt>.</p><p><a name="indexterm-182"></a>The <tt>zone.max-locked-memory</tt> resource control limits the amount of locked physical memory available to
a zone The allocation of the locked memory resource across projects within the
zone can be controlled by using the <tt>project.max-locked-memory</tt> resource control. See <a href="rmctrls-3.html#rmctrls-tbl-5">Table&nbsp;6-1</a> for more information.</p><p><a name="indexterm-183"></a>The <tt>zone.max-lwps</tt> resource control enhances resource isolation by preventing too many LWPs in
one zone from affecting other zones. The allocation of the LWP resource across
projects within the zone can be controlled by using the <tt>project.max-lwps</tt> resource control. See
<a href="rmctrls-3.html#rmctrls-tbl-5">Table&nbsp;6-1</a> for more information. The global property name for this control is <tt>max-lwps</tt>.</p><p><a name="indexterm-184"></a><a name="indexterm-185"></a><a name="indexterm-186"></a><a name="indexterm-187"></a>The <tt>zone.max-msg-ids</tt>, <tt>zone.max-sem-ids</tt>, <tt>zone.max-shm-ids</tt>, and <tt>zone.max-shm-memory</tt> resource controls are used to limit
System V resources used by all processes within a zone. The allocation of
System V resources across projects within the zone can be controlled by using
the project versions of these resource controls. The global property names for these
controls are <tt>max-msg-ids</tt>, <tt>max-sem-ids</tt>, <tt>max-shm-ids</tt>, and <tt>max-shm-memory</tt>.</p><p><a name="indexterm-188"></a>The <tt>zone.max-swap</tt> resource control limits swap consumed by user process address space mappings
and <tt>tmpfs</tt> mounts within a zone. The output of <tt>prstat</tt> <tt>-Z</tt> displays a SWAP
column. The swap reported is the total swap consumed by the zone's processes
and <tt>tmpfs</tt> mounts. This value assists in monitoring the swap reserved by each
zone, which can be used to choose an appropriate <tt>zone.max-swap</tt> setting.</p><a name="gdswz"></a><h6>Table&nbsp;17-1 Zone-Wide Resource Controls</h6><table><col width="39*"><col width="30*"><col width="33*"><col width="20*"><col width="22*"><tr><th align="left" valign="top" scope="column"><p>Control Name</p></th>
<th align="left" valign="top" scope="column"><p>Global
Property Name</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Default Unit</p></th>
<th align="left" valign="top" scope="column"><p>Value Used For</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.cpu-cap</tt></p></td>
<td align="left" valign="top" scope="row"></td>
<td align="left" valign="top" scope="row"><p>Absolute limit on the amount of CPU resources
for this zone</p></td>
<td align="left" valign="top" scope="row"><p>Quantity (number of CPUs), expressed as a percentage</p>
<hr><p><b>Note - </b>When setting as
the <tt>capped-cpu</tt> resource, you can use a decimal number for the unit.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.cpu-shares</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>cpu-shares</tt></p></td>
<td align="left" valign="top" scope="row"><p>Number of
fair share scheduler (FSS) CPU shares for this zone</p></td>
<td align="left" valign="top" scope="row"><p>Quantity (shares)</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.max-locked-memory</tt></p></td>
<td align="left" valign="top" scope="row"></td>
<td align="left" valign="top" scope="row"><p>Total amount of
physical locked memory available to a zone.</p><p>If <tt>priv_proc_lock_memory</tt> is assigned to a
zone, consider setting this resource control as well, to prevent that zone from
locking all memory.</p></td>
<td align="left" valign="top" scope="row"><p>Size (bytes)</p></td>
<td align="left" valign="top" scope="row"><p><tt>locked</tt> property of <tt>capped-memory</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.max-lwps</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>max-lwps</tt></p></td>
<td align="left" valign="top" scope="row"><p>Maximum number of LWPs simultaneously available to
this zone</p></td>
<td align="left" valign="top" scope="row"><p>Quantity (LWPs)</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.max-msg-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>max-msg-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p>Maximum number of message queue IDs allowed for this zone</p></td>
<td align="left" valign="top" scope="row"><p>Quantity
(message queue IDs)</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.max-sem-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>max-sem-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p>Maximum number of semaphore IDs allowed for this zone</p></td>
<td align="left" valign="top" scope="row"><p>Quantity (semaphore
IDs)</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.max-shm-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>max-shm-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p>Maximum number of shared memory IDs allowed for this zone</p></td>
<td align="left" valign="top" scope="row"><p>Quantity (shared memory
IDs)</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.max-shm-memory</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>max-shm-memory</tt></p></td>
<td align="left" valign="top" scope="row"><p>Total amount of System V shared memory allowed for this zone</p></td>
<td align="left" valign="top" scope="row"><p>Size (bytes)</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>zone.max-swap</tt></p></td>
<td align="left" valign="top" scope="row"></td>
<td align="left" valign="top" scope="row"><p>Total
amount of swap that can be consumed by user process address space mappings
and <tt>tmpfs</tt> mounts for this zone.</p></td>
<td align="left" valign="top" scope="row"><p>Size (bytes)</p></td>
<td align="left" valign="top" scope="row"><p><tt>swap</tt> property of <tt>capped-memory</tt></p></td>
</tr>
</table><p>These limits can be specified for running processes by using the <tt>prctl</tt>
command. An example is provided in <a href="z.admin.task-71.html#z.admin.task-76">How to Set FSS Shares in the Global Zone Using the <tt>prctl</tt> Command</a>. Limits specified through the <tt>prctl</tt> command
are not persistent. The limits are only in effect until the system is
rebooted.</p>

<a name="gcnwa"></a><h4>Configurable Privileges</h4>
<p><a name="indexterm-189"></a><a name="indexterm-190"></a>When a zone is booted, a default set of <b>safe</b> privileges is included
in the configuration. These privileges are considered safe because they prevent a privileged
process in the zone from affecting processes in other non-global zones on the
system or in the global zone. You can use the <tt>zonecfg</tt> command
to do the following: </p>
<ul><li><p>Add to the default set of privileges, understanding that such changes might allow processes in one zone to affect processes in other zones by being able to control a global resource.</p></li>
<li><p>Remove from the default set of privileges, understanding that such changes might prevent some processes from operating correctly if they require those privileges to run.</p></li></ul>

<hr><p><b>Note - </b>There are a few privileges that cannot be removed from the zone's default
privilege set, and there are also a few privileges that cannot be added
to the set at this time.</p>
<hr>
<p>For more information, see <a href="z.admin.ov-18.html">Privileges in a Non-Global Zone</a>, <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>, and <a href="http://docs.sun.com/doc/819-2252/privileges-5?a=view"><tt>privileges</tt>(5)</a>.</p>

<a name="z.config.ov-14"></a><h4>Including a Comment for a Zone</h4>
<p>You can add a comment for a zone by using the <tt>attr</tt>
resource type. For more information, see <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.config.ov-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.config.ov-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

