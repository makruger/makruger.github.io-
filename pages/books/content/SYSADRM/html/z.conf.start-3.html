<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Evaluating the Current System Setup - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.conf.start-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.conf.start-4.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level3"><a href="z.conf.start-2.html">Planning and Configuring a Non-Global Zone (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Evaluating the Current System Setup</a></p>
</div>
<p class="toc level3"><a href="z.conf.start-4.html">Determine the Zone Host Name and Obtain the Network Address</a></p>
<p class="toc level3"><a href="z.conf.start-12.html">File System Configuration</a></p>
<p class="toc level3"><a href="z.conf.start-116.html">Creating, Revising, and Deleting Non-Global Zone Configurations (Task Map)</a></p>
<p class="toc level3"><a href="z.conf.start-85.html">Configuring, Verifying, and Committing a Zone</a></p>
<p class="toc level4"><a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a></p>
<p class="toc level4"><a href="z.conf.start-85.html#fnzbc">How to Display the Configuration of a Non-Global Zone</a></p>
<p class="toc level3 tocsp"><a href="z.conf.start-115.html">Using the <tt>zonecfg</tt> Command to Modify a Zone Configuration</a></p>
<p class="toc level4"><a href="z.conf.start-115.html#z.conf.start-63">How to Modify a Resource Type in a Zone Configuration</a></p>
<p class="toc level4"><a href="z.conf.start-115.html#fpjpi">How to Clear a Property Type  in a Zone Configuration</a></p>
<p class="toc level4"><a href="z.conf.start-115.html#gbrfh">How to Rename a Zone</a></p>
<p class="toc level4"><a href="z.conf.start-115.html#z.conf.start-73">How to Add a Dedicated Device to a Zone</a></p>
<p class="toc level4"><a href="z.conf.start-115.html#gejpu">How to Set <tt>zone.cpu-shares</tt> in the Global Zone</a></p>
<p class="toc level3 tocsp"><a href="z.conf.start-81.html">Using the <tt>zonecfg</tt> Command to Revert or Remove a Zone Configuration</a></p>
<p class="toc level4"><a href="z.conf.start-81.html#z.conf.start-30">How to Revert a Zone Configuration</a></p>
<p class="toc level4"><a href="z.conf.start-81.html#z.conf.start-82">How to Delete a Zone Configuration</a></p>
<p class="toc level2 tocsp"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="z.conf.start-3"></a><h3>Evaluating the Current System Setup</h3>
<p>Zones can be used on any machine that runs the Solaris 10
or later release. The following primary machine considerations are associated with the use
of zones.</p>
<ul><li><p>The performance requirements of the applications running within each zone.</p></li>
<li><p>The availability of disk space to hold the files that are unique within each zone.</p></li></ul>


<a name="z.conf.start-9"></a><h4>Disk Space Requirements</h4>
<p><a name="indexterm-226"></a>There are no limits on how much disk space can be consumed
by a zone. The global administrator is responsible for space restriction. The global administrator
must ensure that local storage is sufficient to hold a non-global zone's root
file system. Even a small uniprocessor system can support a number of zones
running simultaneously.</p><p>The nature of the packages installed in the global zone affects the space
requirements of the non-global zones that are created. The number of packages and
space requirements are factors.</p>

<a name="fgotf"></a><h5>Sparse Root Zones</h5>
<p>Non-global zones that have <tt>inherit-pkg-dir</tt> resources are called sparse root zones.</p><p>The sparse root zone model optimizes the sharing of objects in the
following ways:</p>
<ul><li><p>Only a subset of the packages installed in the global zone are installed directly into the non-global zone.</p></li>
<li><p>Read-only loopback file systems, identified as <tt>inherit-pkg-dir</tt> resources, are used to gain access to other files.</p></li></ul>
<p>In this model, all packages appear to be installed in the non-global 
zone. Packages that do not deliver content into read-only loopback mount file systems
are fully installed. There is no need to install content  delivered into
read-only loopback mounted file systems since that content is inherited (and visible) from
the global zone.</p>
<ul><li><p>As a general guideline, a zone requires about 100 megabytes of free disk space per zone when the global zone has been installed with all of the standard Solaris packages.</p></li>
<li><p>By default, any additional packages installed in the global zone also populate the non-global zones. The amount of disk space required might be increased accordingly, depending on whether the additional packages deliver files that reside in the <tt>inherit-pkg-dir</tt> resource space.</p></li></ul>
<p>An additional 40 megabytes of RAM per zone are suggested, but not
required on a machine with sufficient swap space.</p>

<a name="fgouj"></a><h5>Whole Root Zones</h5>
<p>The whole root zone model provides the maximum configurability. All of the required
and any selected optional Solaris packages are installed into the private file systems
of the zone. The advantages of this model include the capability for global
administrators to customize their zones file system layout. This would be done, for
example, to add arbitrary unbundled or third-party packages.</p><p>The disk requirements for this model are determined by the disk space used
by the packages currently installed in the global zone.</p>
<hr><p><b>Note - </b>If you create a sparse root zone that contains the following <tt>inherit-pkg-dir</tt>
directories, you must remove these directories from the non-global zone's configuration <b>before the zone is installed</b> to have
a whole root zone :</p>
<ul><li><p><tt>/lib</tt></p></li>
<li><p><tt>/platform</tt></p></li>
<li><p><tt>/sbin</tt></p></li>
<li><p><tt>/usr</tt></p></li></ul>
<p>See <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>.</p>
<hr>


<a name="z.conf.start-13"></a><h4>Restricting Zone Size</h4>
<p><a name="indexterm-227"></a>The following options can be used to restrict zone size:</p>
<ul><li><p>You can place the zone on a <tt>lofi</tt>-mounted partition. This action will limit the amount of space consumed by the zone to that of the file used by <tt>lofi</tt>. For more information, see the <a href="http://docs.sun.com/doc/819-2240/lofiadm-1m?a=view"><tt>lofiadm</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2254/lofi-7d?a=view"><tt>lofi</tt>(7D)</a> man pages.</p></li>
<li><p>You can use soft partitions to divide disk slices or logical volumes into partitions. You can use these partitions as zone roots, and thus limit per-zone disk consumption. The soft partition limit is 8192 partitions. For more information, see <a href="http://docs.sun.com/doc/819-2789/about-softpart-1?a=view">Chapter 12, Soft Partitions (Overview), in <i>Solaris Volume Manager Administration Guide</i></a>.</p></li>
<li><p>You can use the standard partitions of a disk for zone roots, and thus limit per-zone disk consumption.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.conf.start-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.conf.start-4.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

