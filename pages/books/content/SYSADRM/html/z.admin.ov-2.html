<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>File Systems and Non-Global Zones - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.admin.ov-11.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.admin.ov-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level3"><a href="z.admin.ov-4.html">Global Zone Visibility and Access</a></p>
<p class="toc level3"><a href="z.admin.ov-22.html">Process ID Visibility in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-24.html">System Observability in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-11.html">Non-Global Zone Node Name</a></p>
<div class="onpage">
<p class="toc level3"><a href="">File Systems and Non-Global Zones</a></p>
</div>
<p class="toc level3"><a href="z.admin.ov-9.html">Networking in Shared-IP Non-Global Zones</a></p>
<p class="toc level3"><a href="gelkh.html">Networking in Exclusive-IP Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-13.html">Device Use in Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-42.html">Running Applications in Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-3.html">Resource Controls Used in Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-43.html">Fair Share Scheduler on a Solaris System With Zones Installed</a></p>
<p class="toc level3"><a href="z.admin.ov-6.html">Extended Accounting on a Solaris System With Zones Installed</a></p>
<p class="toc level3"><a href="z.admin.ov-18.html">Privileges in a Non-Global Zone</a></p>
<p class="toc level3"><a href="z.admin.ov-29.html">Using IP Security Architecture in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-20.html">Using Solaris Auditing in Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-21.html">Core Files in Zones</a></p>
<p class="toc level3"><a href="gcogk.html">Running DTrace in a Non-Global Zone</a></p>
<p class="toc level3"><a href="gbrho.html">About Backing Up a Solaris System With Zones Installed</a></p>
<p class="toc level3"><a href="gbrhi.html">Determining What to Back Up in Non-Global Zones</a></p>
<p class="toc level3"><a href="gbrip.html">About Restoring Non-Global Zones</a></p>
<p class="toc level3"><a href="z.admin.ov-32.html">Commands Used on a Solaris System With Zones Installed</a></p>
<p class="toc level2 tocsp"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="z.admin.ov-2"></a><h3>File Systems and Non-Global Zones</h3>
<p>This section provides information about file system issues on a Solaris system with
zones installed. Each zone has its own section of the file system 
hierarchy, rooted at a directory known as the zone <tt>root</tt>. Processes in the
zone can access only files in the part of the hierarchy that is
located under the zone root. The <tt>chroot</tt> utility can be used in a
zone, but only to restrict the process to a root path within the
zone. For more information about <tt>chroot</tt>, see <a href="http://docs.sun.com/doc/819-2240/chroot-1m?a=view"><tt>chroot</tt>(1M)</a>.</p>

<a name="z.admin.ov-23"></a><h4>The <tt>-o</tt> <tt>nosuid</tt> Option</h4>
<p>The <tt>-o</tt> <tt>nosuid</tt> option to the <tt>mount</tt> utility has the following functionality:</p>
<ul><li><p>Processes from a <tt>setuid</tt> binary located on a file system that is mounted using the <tt>nosetuid</tt> option do not run with the privileges of the <tt>setuid</tt> binary. The processes run with the privileges of the user that executes the binary.</p><p>For example, if a user executes a <tt>setuid</tt> binary that is owned by <tt>root</tt>, the processes run with the privileges of the user.</p></li>
<li><p>Opening device-special entries in the file system is not allowed. This behavior is equivalent to specifying the <tt>nodevices</tt> option.</p></li></ul>
<p>This file system-specific option is available to all Solaris file systems that can
be mounted with <tt>mount</tt> utilities, as described in the <a href="http://docs.sun.com/doc/819-2240/mount-1m?a=view"><tt>mount</tt>(1M)</a> man page. In this
guide, these file systems are listed in <a href="#z.admin.ov-26">Mounting File Systems in Zones</a>. Mounting capabilities are also described.
For more information about the <tt>-o</tt> <tt>nosuid</tt> option, see &ldquo;Accessing Network File
Systems  (Reference)&rdquo; in <a href="http://docs.sun.com/doc/819-1634"><i>System Administration Guide: Network Services</i></a>.</p>

<a name="z.admin.ov-26"></a><h4>Mounting File Systems in Zones</h4>
<p>When file systems are mounted from within a zone, the <tt>nodevices</tt> option applies.
For example, if a zone is granted access to a block device
(<tt>/dev/dsk/c0t0d0s7</tt>) and a raw device (<tt>/dev/rdsk/c0t0d0s7</tt>) corresponding to a UFS file system, the
file system is automatically mounted <tt>nodevices</tt> when mounted from within a zone.
This rule does not apply to mounts specified through a <tt>zonecfg</tt> configuration.</p><p>Options for mounting file systems in non-global zones are described in the following
table. Procedures for these mounting alternatives are provided in <a href="z.conf.start-85.html">Configuring, Verifying, and Committing a Zone</a> and <a href="z.admin.task-11.html">Mounting File Systems in Running Non-Global Zones</a>.</p><p>Any file system type not listed in the table can be specified
in the configuration if it has a mount binary in <tt>/usr/lib/</tt><i>fstype</i><tt>/mount</tt>.</p><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>File System</p></th>
<th align="left" valign="top" scope="column"><p>Mounting Options
in a Non-Global Zone</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>AutoFS</p></td>
<td align="left" valign="top" scope="row"><p>Cannot be mounted using <tt>zonecfg</tt>, cannot be manually mounted from
the global zone into a non-global zone. Can be mounted from within the
zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>CacheFS</p></td>
<td align="left" valign="top" scope="row"><p>Cannot be used in a non-global zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>FDFS</p></td>
<td align="left" valign="top" scope="row"><p>Can be mounted using <tt>zonecfg</tt>, can
be manually mounted from the global zone into a non-global zone, can be
mounted from within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>HSFS</p></td>
<td align="left" valign="top" scope="row"><p>Can be mounted using <tt>zonecfg</tt>, can be manually mounted from
the global zone into a non-global zone, can be mounted from within
the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>LOFS</p></td>
<td align="left" valign="top" scope="row"><p>Can be mounted using <tt>zonecfg</tt>, can be manually mounted from the global zone
into a non-global zone, can be mounted from within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>MNTFS</p></td>
<td align="left" valign="top" scope="row"><p>Cannot be mounted
using <tt>zonecfg</tt>, cannot be manually mounted from the global zone into a non-global
zone. Can be mounted from within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>NFS</p></td>
<td align="left" valign="top" scope="row"><p>Cannot be mounted using <tt>zonecfg</tt>. V2,
V3, and V4, which are the versions currently supported in zones, can be
mounted from within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>PCFS </p></td>
<td align="left" valign="top" scope="row"><p>Can be mounted using <tt>zonecfg</tt>, can be manually
mounted from the global zone into a non-global zone, can be mounted from
within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>PROCFS</p></td>
<td align="left" valign="top" scope="row"><p>Cannot be mounted using <tt>zonecfg</tt>, cannot be manually mounted from the global
zone into a non-global zone. Can be mounted from within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>TMPFS</p></td>
<td align="left" valign="top" scope="row"><p>Can be
mounted using <tt>zonecfg</tt>, can be manually mounted from the global zone into a
non-global zone, can be mounted from within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>UDFS</p></td>
<td align="left" valign="top" scope="row"><p>Can be mounted using <tt>zonecfg</tt>,
can be manually mounted from the global zone into a non-global zone, can
be mounted from within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>UFS</p></td>
<td align="left" valign="top" scope="row"><p>Can be mounted using <tt>zonecfg</tt>, can be manually
mounted from the global zone into a non-global zone, can be mounted from
within the zone.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>XMEMFS</p></td>
<td align="left" valign="top" scope="row"><p>Support for this file system has been removed from Solaris with
this release.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>ZFS</p></td>
<td align="left" valign="top" scope="row"><p>Can be mounted using the <tt>zonecfg</tt> <tt>dataset</tt> and <tt>fs</tt> resource types.</p></td>
</tr>
</table><p>For more information, see <a href="z.conf.start-85.html#z.conf.start-29">How to Configure the Zone</a>, <a href="z.admin.task-11.html">Mounting File Systems in Running Non-Global Zones</a>, and the <a href="http://docs.sun.com/doc/819-2240/mount-1m?a=view"><tt>mount</tt>(1M)</a> man page.</p>

<a name="gafnf"></a><h4>Unmounting File Systems in Zones</h4>
<p>The ability to unmount a file system will depend on who performed
the initial mount. If a file system is specified as part of the
zone's configuration using the <tt>zonecfg</tt> command, then the global zone owns this mount and
the non-global zone administrator cannot unmount the file system. If the file system
is mounted from within the non-global zone, for example, by specifying the mount
in the zone's <tt>/etc/vfstab</tt> file, then the non-global zone administrator can unmount the
file system.</p>

<a name="z.admin.ov-7"></a><h4>Security Restrictions and File System Behavior</h4>
<p>There are security restrictions on mounting certain file systems from within a zone.
Other file systems exhibit special behavior when mounted in a zone. The list
of modified file systems follows.</p><dl><dt>AutoFS</dt>
<dd><p>Autofs is a client-side service that automatically mounts the appropriate file system. When a client attempts to access a file system that is not presently mounted, the AutoFS file system intercepts the request and calls <tt>automountd</tt> to mount the requested directory. AutoFS mounts established within a zone are local to that zone. The mounts cannot be accessed from other zones, including the global zone. The mounts are removed when the zone is halted or rebooted. For more information on AutoFS, see <a href="http://docs.sun.com/doc/819-1634/rfsrefer-75?a=view">How Autofs Works in <i>System Administration Guide: Network Services</i></a>.</p><p>Each zone runs its own copy of <tt>automountd</tt>. The auto maps and timeouts are controlled by the zone administrator. You cannot trigger a mount in another zone by crossing an AutoFS mount point for a non-global zone from the global zone.</p><p>Certain AutoFS mounts are created in the kernel when another mount is triggered. Such mounts cannot be removed by using the regular <tt>umount</tt> interface because they must be mounted or unmounted as a group. Note that this functionality is provided for zone shutdown.</p></dd>
<dt>MNTFS</dt>
<dd><p>MNTFS is a virtual file system that provides read-only access to the table of mounted file systems for the local system. The set of file systems visible by using <tt>mnttab</tt> from within a non-global zone is the set of file systems mounted in the zone, plus an entry for root (<tt>/</tt>) . Mount points with a special device that is not accessible from within the zone, such as <tt>/dev/rdsk/c0t0d0s0</tt>, have their special device set to the same as the mount point. All mounts in the system are visible from the global zone's <tt>/etc/mnttab</tt> table. For more information on MNTFS, see <a href="http://docs.sun.com/doc/819-2723/fsmount-42780?a=view">Chapter 19, Mounting and Unmounting File Systems (Tasks), in <i>System Administration Guide: Devices and File Systems</i></a>.</p></dd>
<dt>NFS</dt>
<dd><p>NFS mounts established within a zone are local to that zone. The mounts cannot be accessed from other zones, including the global zone. The mounts are removed when the zone is halted or rebooted.</p><p>As documented in the <a href="http://docs.sun.com/doc/819-2240/mount-nfs-1m?a=view"><tt>mount_nfs</tt>(1M)</a> man page, an NFS server should not attempt to mount its own file systems. Thus, a zone should not NFS mount a file system exported by the global zone. Zones cannot be NFS servers. From within a zone, NFS mounts behave as though mounted with the <tt>nodevices</tt> option.</p><p>The <tt>nfsstat</tt> command output only pertains to the zone in which the command is run. For example, if the command is run in the global zone, only information about the global zone is reported. For more information about the <tt>nfsstat</tt> command, see <a href="http://docs.sun.com/doc/819-2240/nfsstat-1m?a=view"><tt>nfsstat</tt>(1M)</a>.</p><p>The <tt>zlogin</tt> command will fail if any of its open files or any portion of its address space reside on NFS. For more information, see <a href="z.login.ov-2.html"><tt>zlogin</tt> Command</a>.</p></dd>
<dt>PROCFS</dt>
<dd><p>The <tt>/proc</tt> file system, or PROCFS, provides process visibility and access restrictions as well as information about the zone association of processes. Only processes in the same zone are visible through <tt>/proc</tt>.</p><p>Processes in the global zone can observe processes and other objects in non-global zones. This allows such processes to have system-wide observability.</p><p>From within a zone, <tt>procfs</tt> mounts behave as though mounted with the <tt>nodevices</tt> option. For more information about <tt>procfs</tt>, see the <a href="http://docs.sun.com/doc/819-2251/proc-4?a=view"><tt>proc</tt>(4)</a> man page.</p></dd>
<dt>LOFS</dt>
<dd><p>The scope of what can be mounted through LOFS is limited to the portion of the file system that is visible to the zone. Hence, there are no restrictions on LOFS mounts in a zone.</p></dd>
<dt>UFS, UDFS, PCFS, and other storage-based file systems</dt>
<dd><p>When using the <tt>zonecfg</tt> command to configure storage-based file systems that have an <tt>fsck</tt> binary, such as UFS, the zone administrator must specify a <tt>raw</tt> parameter. The parameter indicates the raw (character) device, such as <tt>/dev/rdsk/c0t0d0s7</tt>. <tt>zoneadmd</tt> automatically runs the <tt>fsck</tt> command in non-interactive check-only mode (<tt>fsck</tt> <tt>-m</tt>) on this device before it mounts the file system. If the <tt>fsck</tt> fails, <tt>zoneadmd</tt> cannot bring the zone to the ready state. The path specified by <tt>raw</tt> cannot be a relative path.</p><p>It is an error to specify a device to <tt>fsck</tt> for a file system that does not provide an <tt>fsck</tt> binary in <tt>/usr/lib/fs/</tt><i>fstype</i><tt>/fsck</tt>. It is also an error if you do not specify a device to <tt>fsck</tt> if an <tt>fsck</tt> binary exists for that file system.</p><p>For more information, see <a href="z.inst.ov-12.html">The <tt>zoneadmd</tt> Daemon</a> and the <a href="http://docs.sun.com/doc/819-2240/fsck-1m?a=view"><tt>fsck</tt>(1M)</a></p></dd>
<dt>ZFS</dt>
<dd><p>You can add a ZFS dataset to a non-global zone by using the <tt>zonecfg</tt> command with the <tt>add dataset</tt> resource. The dataset will be visible and mounted in the non-global zone and no longer visible in the global zone. The zone administrator can create and destroy file systems within that dataset, and modify the properties of the dataset.</p><p>The <tt>zoned</tt> attribute of <tt>zfs</tt> indicates whether a dataset has been added to a non-global zone.</p><pre># <tt><b>zfs get zoned tank/sales</b></tt>
NAME          PROPERTY    VALUE      SOURCE
tank/sales    zoned       on         local</pre><p>If you want to share a dataset from the global zone, you can add an LOFS-mounted ZFS file system by using the <tt>zonecfg</tt> command with the <tt>add</tt> <tt>fs</tt> subcommand. The global administrator is responsible for setting and controlling the properties of the dataset.</p><p>For more information on ZFS, see <a href="http://docs.sun.com/doc/817-2271/ftyxh?a=view">Chapter 10, ZFS Advanced Topics, in <i>Solaris ZFS Administration Guide</i></a>.</p></dd>
</dl>


<a name="z.admin.ov-39"></a><h4>Non-Global Zones as NFS Clients</h4>
<p>Zones can be NFS clients. Version 2, version 3, and version 4
protocols are supported. For information on these NFS versions, see <a href="http://docs.sun.com/doc/819-1634/rfsintro-101?a=view">Features of the NFS Service in <i>System Administration Guide: Network Services</i></a>. .</p><p>The default version is NFS version 4. You can enable other NFS
versions on a client by using one of the following methods:</p>
<ul><li><p>You can edit <tt>/etc/default/nfs</tt> to set <tt>NFS_CLIENT_VERSMAX=</tt><i>number</i> so that the zone uses the specified version by default. See <a href="http://docs.sun.com/doc/819-1634/rfsadmin-68?a=view">Setting Up NFS Services in <i>System Administration Guide: Network Services</i></a>. Use the procedure How to Select Different Versions of NFS on a Client by Modifying the <tt>/etc/default/nfs</tt> File from the task map.</p></li>
<li><p>You can manually create a version mount. This method overrides the contents of <tt>/etc/default/nfs</tt>. See <a href="http://docs.sun.com/doc/819-1634/rfsadmin-68?a=view">Setting Up NFS Services in <i>System Administration Guide: Network Services</i></a>. Use the procedure How to Use the Command Line to Select Different Versions of NFS on a Client from the task map.</p></li></ul>


<a name="z.admin.ov-35"></a><h4>Use of <tt>mknod</tt> Prohibited in a Zone</h4>
<p>Note that you cannot use the <tt>mknod</tt> command documented in the <tt>mknod</tt>(1M) man
page to make a special file in a non-global zone.</p>

<a name="z.admin.ov-8"></a><h4>Traversing File Systems</h4>
<p>A zone's file system namespace is a subset of the namespace accessible from
the global zone. Unprivileged processes in the global zone are prevented from traversing
a non-global zone's file system hierarchy through the following means:</p>
<ul><li><p>Specifying that the zone root's parent directory is owned, readable, writable, and executable by root only</p></li>
<li><p>Restricting access to directories exported by <tt>/proc</tt></p></li></ul>
<p>Note that attempting to access AutoFS nodes mounted for another zone will fail.
The global administrator must not have auto maps that descend into other zones.</p>

<a name="z.admin.ov-46"></a><h4>Restriction on Accessing A Non-Global Zone From the Global Zone</h4>
<p>After a non-global zone is installed, the zone must never be accessed directly
from the global zone by any commands other than system backup utilities. Moreover,
a non-global zone can no longer be considered secure after it has been
exposed to an unknown environment. An example would be a zone placed on
a publicly accessible network, where it would be possible for the zone to
be compromised and the contents of its file systems altered. If there
is any possibility that compromise has occurred, the global administrator should treat the zone
as untrusted.</p><p>Any command that accepts an alternative root by using the <tt>-R</tt> or
<tt>-b</tt> options (or the equivalent) must <b>not</b> be used when the following are
true:</p>
<ul><li><p>The command is run in the global zone.</p></li>
<li><p>The alternative root refers to any path within a non-global zone, whether the path is relative to the current running system's global zone or the global zone in an alternative root.</p></li></ul>
<p>An example is the <tt>-R</tt> <i>root_path</i> option to the <tt>pkgadd</tt> utility run from
the global zone with a non-global zone root path. </p><p>The list of commands, programs, and utilities that use <tt>-R</tt> with an alternative
root path include the following:</p>
<ul><li><p><tt>auditreduce</tt></p></li>
<li><p><tt>bart</tt></p></li>
<li><p><tt>flar</tt></p></li>
<li><p><tt>flarcreate</tt></p></li>
<li><p><tt>installf</tt></p></li>
<li><p><tt>localeadm</tt></p></li>
<li><p><tt>makeuuid</tt></p></li>
<li><p><tt>metaroot</tt></p></li>
<li><p><tt>patchadd</tt></p></li>
<li><p><tt>patchrm</tt></p></li>
<li><p><tt>pkgadd</tt></p></li>
<li><p><tt>pkgadm</tt></p></li>
<li><p><tt>pkgask</tt></p></li>
<li><p><tt>pkgchk</tt></p></li>
<li><p><tt>pkgrm</tt></p></li>
<li><p><tt>prodreg</tt></p></li>
<li><p><tt>removef</tt></p></li>
<li><p><tt>routeadm</tt></p></li>
<li><p><tt>showrev</tt></p></li>
<li><p><tt>syseventadm</tt></p></li></ul>
<p>The list of commands and programs that use <tt>-b</tt> with an alternative root
path include the following:</p>
<ul><li><p><tt>add_drv</tt></p></li>
<li><p><tt>pprosetup</tt></p></li>
<li><p><tt>rem_drv</tt></p></li>
<li><p><tt>roleadd</tt></p></li>
<li><p><tt>sysidconfig</tt></p></li>
<li><p><tt>update_drv</tt></p></li>
<li><p><tt>useradd</tt></p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="z.admin.ov-11.html">Previous</a>
             </td>
             <td align="right">
                 <a href="z.admin.ov-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

