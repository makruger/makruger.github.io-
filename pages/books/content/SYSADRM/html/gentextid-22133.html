<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Install Using <tt>virt-install</tt> With Options - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gfqsj.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gexsq.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level3"><a href="gfqsj.html"><tt>virt-install</tt> Overview</a></p>
<p class="toc level4"><a href="gfqsj.html#gfwri">How to Determine Whether a Machine Is HVM-Capable</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Install Using <tt>virt-install</tt> With Options</a></p>
<p class="toc level4"><a href="#gexyd">How to Complete the Solaris DomU <tt>sysidcfg</tt> Configuration</a></p>
</div>
<p class="toc level3 tocsp"><a href="gexsq.html">Install a DomU Interactively by Using <tt>virt-install</tt></a></p>
<p class="toc level3"><a href="gfser.html">About Network Installations</a></p>
<p class="toc level2 tocsp"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gentextid-22133"></a><h3>Install Using <tt>virt-install</tt> With Options</h3>
<p><a name="indexterm-468"></a>This example uses <tt>virt-install</tt> with options to install a Solaris domU from the
command line using an ISO image. The command line options specify for <tt>virt-install</tt>
to create an 18&ndash;Gbyte root disk image file <tt>/xvm/domu-x16.img</tt>. A specific MAC address is
used for a particular DHCP configuration. The option <tt>--nographics</tt> because this is
a Solaris paravirtualized configuration. See <a href="#gfsio"><tt>virt-install</tt> Examples</a> for examples of other types of guest domains.
If you invoke <tt>virt-install</tt> with command line options but do not supply all
required information, the tool prompts you for the needed information.</p><pre>machine:root> <tt><b>virt-install --nographics -n domu-x16 --paravirt \ -f /xvm/domu-x16.img -r 1011 --mac=aa:ff:bb:aa:28:16 -s 18 \ -l /net/inst-server/export/xVM/x_iso/63-0419-nd.iso</b></tt>
Starting install...
Creating domain...
SunOS Release 5.11 Version 64-bit
Copyright 1983-2007 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
Configuring /dev
Solaris Interactive Text (Console session)
Using install cd in /dev/dsk/c0d1p0
Using RPC Bootparams for network configuration information.
Attempting to configure interface xnf0...
Skipped interface xnf0
Setting up Java. Please wait...
Beginning system identification...
Searching for configuration file(s)...
Search complete.
Discovering additional network configuration...</pre><p>When the domain creation completes, <tt>sysidcfg</tt> runs to complete the system identification.</p>

<a name="gexyd"></a><h4>How to Complete the Solaris DomU <tt>sysidcfg</tt> Configuration</h4><ul>
<li><b>After the domain is created, the <tt>sysidcfg</tt> is initiated and you are prompted
to answer a series of questions. Your screen will look similar to this:</b><pre>SunOS Release 5.11 Version 64-bit
Copyright 1983-2007 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
Hostname: my-zone
Loading smf(5) service descriptions: 114/114
Select a Language

   1. English
   2. French
   3. German
   4. Italian
   5. Japanese
   6. Korean
   7. Simplified Chinese
   8. Spanish
   9. Swedish
  10. Traditional Chinese

Please make a choice (1 - 10), or press h or ? for help:

What type of terminal are you using?
      1) ANSI Standard CRT
      2) DEC VT52
      3) DEC VT100
      4) Heathkit 19
      5) Lear Siegler ADM31
      6) PC Console
      7) Sun Command Tool
      8) Sun Workstation
      9) Televideo 910
      10) Televideo 925
      11) Wyse Model 50
      12) X Terminal Emulator (xterms)
      13) CDE Terminal Emulator (dtterm)
      14) Other
Type the number of your choice and press Return:
.
.
.</pre><p>For more information on the <tt>sysidcfg</tt> file, see the <a href="http://docs.sun.com/doc/819-2251/sysidcfg-4?a=view"><tt>sysidcfg</tt>(4)</a> man page. For
an example <tt>sysidcfg</tt> file, see <i>Understanding the Solaris xVM Server Architecture</i>, Part No 820-3089-102.</p></li></ul>

<a name="gfsio"></a><h4><tt>virt-install</tt> Examples</h4>
<a name="gfseu"></a>Example&nbsp;40-1 Solaris PV Guest<pre>virt-install -n solarisPV --paravirt -r 1024 \ 
  --nographics -f /export/solarisPV/root.img -s 16 \ 
  -l /ws/xvm-gate/public/isos/72-0910/solarisdvd.iso</pre><a name="gfsfe"></a>Example&nbsp;40-2 Solaris HVM Guest<pre>virt-install -n solarisHVM --hvm -r 1024 --vnc \ 
  -f /export/solarisHVM/root.img -s 16 \ 
  -c /ws/xvm-gate/public/isos/72-0910/solarisdvd.iso</pre><p>For this version of <tt>virt-install</tt>, only installs from ISOs and physical CDs are
supported for HVM. Network installations are not supported in this version. If a
physical CD is used, remember to unmount it after use.</p><a name="gfsee"></a>Example&nbsp;40-3 Windows HVM Guest<pre># virt-install -n winxp --hvm -r 1024 --vnc \ 
  -f /export/winxp/root.img -s 16 -c /windows/media.iso</pre><p>For this version of <tt>virt-install</tt>, only installs from ISOs and physical CDs are
supported for HVM. Network installations are not supported in this version. If a
physical CD is used, remember to unmount it after use.</p><a name="gfzbk"></a>Example&nbsp;40-4 Install Microsoft Windows Using a Local File as a Root Disk<p>A normal file is used to store the contents of the guest
domain disk   image, as opposed to using a ZFS volume, for
example. </p><pre>virt-install --name windows1 --ram 1024 \
--cdrom /en_winxp_pro_with_sp2.iso --file /guests/windows1-disk
--file-size 10 --vnc
 </pre><a name="gfslf"></a>Example&nbsp;40-5 Install Solaris Using Network Install and JumpStart onto a ZFS Volume<pre>zfs create -V 8G pool/solaris1-disk
virt-install --name solaris1 --ram 1024 --nographics \
--file /dev/zvol/dsk/pool/solaris1-disk \
--location nfs:install.domain.com:/export/solaris/nv75 \
--autocf nfs:install.domain.com:/export/jumpstart/solaris1</pre>

<a name="gfsgg"></a><h4>VNC Password and Remote Display Requirements</h4>
<p><a name="indexterm-469"></a><a name="indexterm-470"></a>Set the VNC password property in the SMF configuration in <tt>xend</tt> before
starting an HVM domain.</p><p>Note that the procedures to set the VNC password and remote display  
are likely to change in a future release.</p><a name="gfshb"></a>Example&nbsp;40-6 How to Set the VNC Password Property<pre># <tt><b>svccfg -s xvm/xend setprop \ config/vncpasswd = astring: </tt><i>password</i><tt></b></tt>
# <tt><b>svcadm refresh xvm/xend; svcadm restart xvm/xend</b></tt></pre><p>If you are displaying the VNC session remotely, you must also set
the <tt>vnc-listen</tt> property.</p><p>For more information on setting up VNC, see the VNC man pages.
Refer to <a href="gfxsb.html#ggbgv">How to View the VNC Man Pages</a>.</p><a name="gfsha"></a>Example&nbsp;40-7 How to Set the <tt>vnc-listen</tt> Property<pre># <tt><b>svccfg -s xvm/xend setprop \ config/vnc-listen = astring: </tt><i>0.0.0.0</i><tt></b></tt> 
# <tt><b>svcadm refresh xvm/xend; svcadm restart xvm/xend</b></tt></pre><a name="ggjeq"></a>Example&nbsp;40-8 Verify That an <tt>xterm</tt> Can Be Displayed<p>Verify that an <tt>xterm</tt> can be opened to display HVM installation graphics.</p><pre># <tt><b>/usr/openwin/bin/xterm</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gfqsj.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gexsq.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

