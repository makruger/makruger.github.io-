<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>FSS and Processor Sets - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmfss-14.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmfss-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level3"><a href="rmfss-2.html">Introduction to the Scheduler</a></p>
<p class="toc level3"><a href="rmfss-4.html">CPU Share Definition</a></p>
<p class="toc level3"><a href="rmfss-5.html">CPU Shares and Process State</a></p>
<p class="toc level3"><a href="rmfss-6.html">CPU Share Versus Utilization</a></p>
<p class="toc level3"><a href="rmfss-7.html">CPU Share Examples</a></p>
<p class="toc level3"><a href="rmfss-14.html">FSS Configuration</a></p>
<div class="onpage">
<p class="toc level3"><a href="">FSS and Processor Sets</a></p>
</div>
<p class="toc level3"><a href="rmfss-17.html">Combining FSS With Other Scheduling Classes</a></p>
<p class="toc level3"><a href="rmfss-21.html">Setting the Scheduling Class for the System</a></p>
<p class="toc level3"><a href="rmfss-22.html">Scheduling Class on a System with Zones Installed</a></p>
<p class="toc level3"><a href="rmfss-20.html">Commands Used With FSS</a></p>
<p class="toc level2 tocsp"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level2"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rmfss-19"></a><h3>FSS and Processor Sets</h3>
<p><a name="indexterm-69"></a>The FSS can be used in conjunction with processor sets to provide more
fine-grained controls over allocations of CPU resources among projects that run on each
processor set than would be available with processor sets alone. The FSS scheduler
treats processor sets as entirely independent partitions, with each processor set controlled independently
with respect to CPU allocations.</p><p>The CPU allocations of projects running in one processor set are not affected
by the CPU shares or activity of projects running in another processor set
because the projects are not competing for the same resources. Projects only compete
with each other if they are running within the same processor set.</p><p>The number of shares allocated to a project is system wide. Regardless of
which processor set it is running on, each portion of a project
is given the same amount of shares.</p><p>When processor sets are used, project CPU allocations are calculated for active projects
that run within each processor set.</p><p>Project partitions that run on different processor sets might have different CPU allocations.
The CPU allocation for each project partition in a processor set depends only
on the allocations of other projects that run on the same processor 
set.</p><p>The performance and availability of applications that run within the boundaries of their
processor sets are not affected by the introduction of new processor sets. The
applications are also not affected by changes that are made to the share
allocations of projects that run on other processor sets.</p><p>Empty processor sets (sets without processors in them) or processor sets without processes
bound to them do not have any impact on the FSS scheduler behavior.</p>

<a name="rmfss-16"></a><h4>FSS and Processor Sets Examples</h4>
<p>Assume that a server with eight CPUs is running several CPU-bound applications in
projects <i>A</i>, <i>B</i>, and <i>C</i>. Project <i>A</i> is allocated one share, project <i>B</i>
is allocated two shares, and project <i>C</i> is allocated three shares.</p><p>Project <i>A</i> is running only on processor set 1. Project <i>B</i> is running
on processor sets 1 and 2. Project <i>C</i> is running on processor sets
1, 2, and 3. Assume that each project has enough processes to utilize
all available CPU power. Thus, there is always competition for CPU resources on
each processor set.</p><img src="figures/rmfss.gif" alt="Diagram shows total system-wide project CPU allocations on a server with eight CPUs that is running several CPU-bound applications in three projects."></img><p>The total system-wide project CPU allocations on such a system are shown in
the following table.</p><table><col width="25*"><col width="75*"><tr><th align="left" valign="top" scope="column"><p>Project</p></th>
<th align="left" valign="top" scope="column"><p>Allocation</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Project A</p></td>
<td align="left" valign="top" scope="row"><p>4% = (1/6 X 2/8)<sub>pset1</sub></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Project B</p></td>
<td align="left" valign="top" scope="row"><p>28% = (2/6 X
2/8)<sub>pset1</sub>+ (2/5 * 4/8)<sub>pset2</sub></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Project C</p></td>
<td align="left" valign="top" scope="row"><p>67% = (3/6 X 2/8)<sub>pset1</sub>+ (3/5 X 4/8)<sub>pset2</sub>+ (3/3
X 2/8)<sub>pset3</sub></p></td>
</tr>
</table><p>These percentages do not match the corresponding amounts of CPU shares that are
given to projects. However, within each processor set, the per-project CPU allocation ratios
are proportional to their respective shares.</p><p>On the same system <b>without</b> processor sets, the distribution of CPU resources would
be different, as shown in the following table.</p><table><col width="25*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Project</p></th>
<th align="left" valign="top" scope="column"><p>Allocation</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Project A</p></td>
<td align="left" valign="top" scope="row"><p>16.66% = (1/6)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Project B</p></td>
<td align="left" valign="top" scope="row"><p>33.33% =
(2/6)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Project C</p></td>
<td align="left" valign="top" scope="row"><p>50% = (3/6)</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmfss-14.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmfss-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

