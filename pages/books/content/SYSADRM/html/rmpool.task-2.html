<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring Pools - System Administration Guide:  Virtualization Using the Solaris Operating System</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-04-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide:  Virtualization Using the Solaris Operating System</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmpool.task-57.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmpool.task-80.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="preface-3.html">Solaris Virtualization Product Overview</a></p>
<p class="toc level1 tocsp"><a href="resource.html">Part&nbsp;I&nbsp;Resource Management</a></p>
<p class="toc level2"><a href="rmintro-1.html">1.&nbsp;&nbsp;Introduction to Solaris Resource Management</a></p>
<p class="toc level2"><a href="rmtaskproj-1.html">2.&nbsp;&nbsp;Projects and Tasks (Overview)</a></p>
<p class="toc level2"><a href="rmtaskproj.task-37.html">3.&nbsp;&nbsp;Administering Projects and Tasks</a></p>
<p class="toc level2"><a href="rmacct-1.html">4.&nbsp;&nbsp;Extended Accounting (Overview)</a></p>
<p class="toc level2"><a href="rmacct.task.sgm.html">5.&nbsp;&nbsp;Administering Extended Accounting (Tasks)</a></p>
<p class="toc level2"><a href="rmctrls-1.html">6.&nbsp;&nbsp;Resource Controls (Overview)</a></p>
<p class="toc level2"><a href="rmctrls.task-1.html">7.&nbsp;&nbsp;Administering Resource Controls (Tasks)</a></p>
<p class="toc level2"><a href="rmfss-1.html">8.&nbsp;&nbsp;Fair Share Scheduler (Overview)</a></p>
<p class="toc level2"><a href="rmfss.task-1.html">9.&nbsp;&nbsp;Administering the Fair Share Scheduler (Tasks)</a></p>
<p class="toc level2"><a href="rm.rcapd-1.html">10.&nbsp;&nbsp;Physical Memory Control Using the Resource Capping Daemon (Overview)</a></p>
<p class="toc level2"><a href="rm.rcapd.task-1.html">11.&nbsp;&nbsp;Administering the Resource Capping Daemon (Tasks)</a></p>
<p class="toc level2"><a href="rmpool-1.html">12.&nbsp;&nbsp;Resource Pools (Overview)</a></p>
<p class="toc level2"><a href="rmpool.task-1.html">13.&nbsp;&nbsp;Creating and Administering Resource Pools (Tasks)</a></p>
<p class="toc level3"><a href="gentextid-6182.html">Administering Resource Pools (Task Map)</a></p>
<p class="toc level3"><a href="rmpool.task-57.html">Enabling and Disabling the Pools Facility</a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvca">How to Enable the Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvbg">How to Disable the Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvdw">How to Enable the Dynamic Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#gbvda">How to Disable the Dynamic Resource Pools Service Using <tt>svcadm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#rmpool.task-58">How to Enable Resource Pools Using <tt>pooladm</tt></a></p>
<p class="toc level4"><a href="rmpool.task-57.html#rmpool.task-62">How to Disable Resource Pools Using <tt>pooladm</tt></a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Configuring Pools</a></p>
<p class="toc level4"><a href="#rmpool.task-84">How to Create a Static Configuration</a></p>
<p class="toc level4"><a href="#rmpool.task-15">How to Modify a Configuration</a></p>
<p class="toc level4"><a href="#rmpool.task-22">How to Associate a Pool With a Scheduling Class</a></p>
<p class="toc level4"><a href="#gcvwh">How to Set Configuration Constraints</a></p>
<p class="toc level4"><a href="#rmpool.task-108">How to Define Configuration Objectives</a></p>
<p class="toc level4"><a href="#rmpool.task-117">How to Set the <tt>poold</tt> Logging Level</a></p>
<p class="toc level4"><a href="#rmpool.task-27">How to Use Command Files With <tt>poolcfg</tt></a></p>
</div>
<p class="toc level3 tocsp"><a href="rmpool.task-80.html">Transferring Resources</a></p>
<p class="toc level4"><a href="rmpool.task-80.html#gentextid-6737">How to Move CPUs Between Processor Sets</a></p>
<p class="toc level3 tocsp"><a href="rmpool.task-32.html">Activating and Removing Pool Configurations</a></p>
<p class="toc level4"><a href="rmpool.task-32.html#rmpool.task-33">How to Activate a Pools Configuration</a></p>
<p class="toc level4"><a href="rmpool.task-32.html#rmpool.task-66">How to Validate a Configuration Before Committing the Configuration</a></p>
<p class="toc level4"><a href="rmpool.task-32.html#rmpool.task-37">How to Remove a Pools Configuration</a></p>
<p class="toc level3 tocsp"><a href="rmpool.task-41.html">Setting Pool Attributes and Binding to a Pool</a></p>
<p class="toc level4"><a href="rmpool.task-41.html#rmpool.task-42">How to Bind Processes to a Pool</a></p>
<p class="toc level4"><a href="rmpool.task-41.html#rmpool.task-46">How to Bind Tasks or Projects to a Pool</a></p>
<p class="toc level4"><a href="rmpool.task-41.html#rmpool.task-50">How to Set the <tt>project.pool</tt> Attribute for a Project</a></p>
<p class="toc level4"><a href="rmpool.task-41.html#rmpool.task-51">How to Use <tt>project</tt> Attributes to Bind a Process to a Different Pool</a></p>
<p class="toc level3 tocsp"><a href="rmpool.task-104.html">Using <tt>poolstat</tt> to Report Statistics for Pool-Related Resources</a></p>
<p class="toc level2 tocsp"><a href="rmconfig-1.html">14.&nbsp;&nbsp;Resource Management Configuration Example</a></p>
<p class="toc level2"><a href="rmconsole-1.html">15.&nbsp;&nbsp;Resource Control Functionality in the Solaris Management Console</a></p>
<p class="toc level1 tocsp"><a href="zone.html">Part&nbsp;II&nbsp;Zones</a></p>
<p class="toc level2"><a href="zones.intro-1.html">16.&nbsp;&nbsp;Introduction to Solaris Zones</a></p>
<p class="toc level2"><a href="z.config.ov-1.html">17.&nbsp;&nbsp;Non-Global Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="z.conf.start-1.html">18.&nbsp;&nbsp;Planning and Configuring Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.inst.ov-1.html">19.&nbsp;&nbsp;About Installing, Halting, Cloning, and Uninstalling Non-Global Zones (Overview)</a></p>
<p class="toc level2"><a href="z.inst.task-1.html">20.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling,  and Cloning Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.login.ov-1.html">21.&nbsp;&nbsp;Non-Global Zone Login (Overview)</a></p>
<p class="toc level2"><a href="z.login.task-1.html">22.&nbsp;&nbsp;Logging In to Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="gcgnc.html">23.&nbsp;&nbsp;Moving and Migrating Non-Global Zones (Tasks)</a></p>
<p class="toc level2"><a href="z.pkginst.ov-1.html">24.&nbsp;&nbsp;About Packages and Patches on a Solaris System With Zones Installed (Overview)</a></p>
<p class="toc level2"><a href="z.pkginst.task-1.html">25.&nbsp;&nbsp;Adding and Removing Packages and Patches on a Solaris System With Zones Installed (Tasks)</a></p>
<p class="toc level2"><a href="z.admin.ov-1.html">26.&nbsp;&nbsp;Solaris Zones Administration (Overview)</a></p>
<p class="toc level2"><a href="z.admin.task-1.html">27.&nbsp;&nbsp;Administering Solaris Zones (Tasks)</a></p>
<p class="toc level2"><a href="gclkx.html">28.&nbsp;&nbsp;Troubleshooting Miscellaneous Solaris Zones Problems</a></p>
<p class="toc level1 tocsp"><a href="gchhk.html">Part&nbsp;III&nbsp;Branded Zones</a></p>
<p class="toc level2"><a href="gchhy.html">29.&nbsp;&nbsp;About Branded Zones and the Linux Branded Zone</a></p>
<p class="toc level2"><a href="gcwwm.html">30.&nbsp;&nbsp;Planning the <tt>lx</tt> Branded Zone Configuration (Overview)</a></p>
<p class="toc level2"><a href="gdajn.html">31.&nbsp;&nbsp;Configuring the <tt>lx</tt> Branded Zone (Tasks)</a></p>
<p class="toc level2"><a href="gdbki.html">32.&nbsp;&nbsp;About Installing, Booting, Halting, Cloning, and Uninstalling <tt>lx</tt> Branded Zones (Overview)</a></p>
<p class="toc level2"><a href="gdduh.html">33.&nbsp;&nbsp;Installing, Booting, Halting, Uninstalling and Cloning <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgck.html">34.&nbsp;&nbsp;Logging In to <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdqnv.html">35.&nbsp;&nbsp;Moving and Migrating <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level2"><a href="gdgif.html">36.&nbsp;&nbsp;Administering and Running Applications in <tt>lx</tt> Branded Zones (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gefwp.html">Part&nbsp;IV&nbsp;Sun xVM</a></p>
<p class="toc level2"><a href="gfwrc.html">37.&nbsp;&nbsp;Sun xVM Hypervisor System Requirements</a></p>
<p class="toc level2"><a href="gefwo.html">38.&nbsp;&nbsp;Booting and Running the Sun xVM Hypervisor</a></p>
<p class="toc level2"><a href="gfwcu.html">39.&nbsp;&nbsp;Xvnc</a></p>
<p class="toc level2"><a href="gfqke.html">40.&nbsp;&nbsp;Using <tt>virt-install</tt> to Install a Domain</a></p>
<p class="toc level2"><a href="gfwlm.html">41.&nbsp;&nbsp;xVM System Administration</a></p>
<p class="toc level2"><a href="gefzh.html">42.&nbsp;&nbsp;Troubleshooting Miscellaneous Sun xVM Problems</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rmpool.task-2"></a><h3>Configuring Pools</h3>


<a name="rmpool.task-84"></a><h4>How to Create a Static Configuration</h4><p>Use the <tt>-s</tt> option to <tt>/usr/sbin/pooladm</tt> to create a static configuration file that
matches the current dynamic configuration. Unless a different file name is specified, the
default location <tt>/etc/pooladm.conf</tt> is used.</p><p>Commit your configuration using the <tt>pooladm</tt> command with the <tt>-c</tt> option. Then, use
the <tt>pooladm</tt> command with the <tt>-s</tt> option to update the static configuration to
match the state of the dynamic configuration.</p>
<hr><p><b>Note - </b>The new functionality <tt>pooladm</tt> <tt>-s</tt> is preferred over the previous functionality <tt>poolcfg</tt> <tt>-c</tt>
<tt>discover</tt> for creating a new configuration that matches the dynamic configuration.</p>
<hr>
<h6>Before You Begin</h6><p>Enable pools on your system.</p><ol>
<li><a name="rmpool.task-step-86"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-87"></a><b>Update the static configuration file to match the current dynamic configuration.</b><pre># <tt><b>pooladm -s</b></tt></pre></li>
<li><a name="rmpool.task-step-88"></a><b>View the contents of the configuration file in readable form.</b><p>Note that the configuration contains default elements created by the system.</p><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line</pre></li>
<li><a name="rmpool.task-step-91"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>.</b><pre># <tt><b>pooladm -c</b></tt></pre></li>
<li><a name="rmpool.task-step-96"></a><b>(Optional) To copy the dynamic configuration to a static configuration file called <tt>/tmp/backup</tt>,
type the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol>

<a name="rmpool.task-15"></a><h4>How to Modify a Configuration</h4><p>To enhance your configuration, create a processor set named <tt>pset_batch</tt> and a
pool named <tt>pool_batch</tt>. Then join the pool and the processor set with an
association.</p><p>Note that you must quote subcommand arguments that contain white space.</p><ol>
<li><a name="rmpool.task-step-17"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-18"></a><b>Create processor set <tt>pset_batch</tt>.</b><pre># <tt><b>poolcfg -c 'create pset pset_batch (uint pset.min = 2; uint pset.max = 10)'</b></tt></pre></li>
<li><a name="rmpool.task-step-19"></a><b>Create pool <tt>pool_batch</tt>.</b><pre># <tt><b>poolcfg -c 'create pool pool_batch'</b></tt></pre></li>
<li><a name="rmpool.task-step-20"></a><b>Join the pool and the processor set with an association.</b><pre># <tt><b>poolcfg -c 'associate pool pool_batch (pset pset_batch)'</b></tt></pre></li>
<li><a name="rmpool.task-step-21"></a><b>Display the edited configuration.</b><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment kernel state
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line

        pool pool_batch
                boolean pool.default false
                boolean pool.active true
                int pool.importance 1
                string pool.comment
                pset pset_batch

        pset pset_batch
                int pset.sys_id -2
                string pset.units population
                boolean pset.default true
                uint pset.max 10
                uint pset.min 2
                string pset.comment
                boolean pset.escapable false
                uint pset.load 0
                uint pset.size 0

                cpu
                        int     cpu.sys_id 5
                        string  cpu.comment
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 4
                        string  cpu.comment
                        string  cpu.status on-line</pre></li>
<li><a name="rmpool.task-step-76"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>.</b><pre># <tt><b>pooladm -c</b></tt></pre></li>
<li><a name="rmpool.task-step-93"></a><b>(Optional) To copy the dynamic configuration to a static configuration file named <tt>/tmp/backup</tt>,
type the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol>

<a name="rmpool.task-22"></a><h4>How to Associate a Pool With a Scheduling Class</h4><p>You can associate a pool with a scheduling class so that all
processes bound to the pool use this scheduler. To do this, set the
<tt>pool.scheduler</tt> property to the name of the scheduler. This example associates the pool
<tt>pool_batch</tt> with the fair share scheduler (FSS).</p><ol>
<li><a name="rmpool.task-step-24"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-25"></a><b>Modify pool <tt>pool_batch</tt> to be associated with the FSS.</b><pre># <tt><b>poolcfg -c 'modify pool pool_batch (string pool.scheduler="FSS")'</b></tt></pre></li>
<li><a name="rmpool.task-step-26"></a><b>Display the edited configuration.</b><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line

        pool pool_batch
                boolean pool.default false
                boolean pool.active true
                int pool.importance 1
                string pool.comment
                string pool.scheduler FSS
                pset batch

        pset pset_batch
                int pset.sys_id -2
                string pset.units population
                boolean pset.default true
                uint pset.max 10
                uint pset.min 2
                string pset.comment
                boolean pset.escapable false
                uint pset.load 0
                uint pset.size 0

                cpu
                        int     cpu.sys_id 5
                        string  cpu.comment
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 4
                        string  cpu.comment
                        string  cpu.status on-line</pre></li>
<li><a name="rmpool.task-step-77"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>:</b><pre># <tt><b>pooladm -c</b></tt></pre></li>
<li><a name="rmpool.task-step-95"></a><b>(Optional) To copy the dynamic configuration to a static configuration file called <tt>/tmp/backup</tt>,
type the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol>

<a name="gcvwh"></a><h4>How to Set Configuration Constraints</h4><p>Constraints affect the range of possible configurations by eliminating some of the potential
changes that could be made to a configuration. This procedure shows how to
set the <tt>cpu.pinned</tt> property.</p><p>In the following examples, <tt>cpuid</tt> is an integer.</p><ol>
<li><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Modify the <tt>cpu.pinned</tt> property in the static or dynamic configuration:</b><ul>
<li><b>Modify the boot-time (static) configuration:</b><pre># <tt><b>poolcfg -c 'modify cpu &lt;cpuid> (boolean cpu.pinned = true)'</b></tt></pre></li>
<li><b>Modify the running (dynamic) configuration without modifying the boot-time configuration:</b><pre># <tt><b>poolcfg -dc 'modify cpu &lt;cpuid> (boolean cpu.pinned = true)'</b></tt></pre></li></ul></li></ol>

<a name="rmpool.task-108"></a><h4>How to Define Configuration Objectives</h4><p>You can specify objectives for <tt>poold</tt> to consider when taking corrective action.</p><p>In the following procedure, the <tt>wt-load</tt> objective is being set so that <tt>poold</tt>
tries to match resource allocation to resource utilization. The <tt>locality</tt> objective is disabled to
assist in achieving this configuration goal.</p><ol>
<li><a name="rmpool.task-step-110"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-111"></a><b>Modify system <tt>tester</tt> to favor the <tt>wt-load</tt> objective.</b><pre># <tt><b>poolcfg -c 'modify system tester (string system.poold.objectives="wt-load")'</b></tt></pre></li>
<li><a name="rmpool.task-step-112"></a><b>Disable the <tt>locality</tt> objective for the default processor set.</b><pre># <tt><b>poolcfg -c 'modify pset pset_default (string pset.poold.objectives="locality none")'</b></tt>one line</pre></li>
<li><a name="rmpool.task-step-113"></a><b>Disable the <tt>locality</tt> objective for the <tt>pset_batch</tt> processor set.</b><pre># <tt><b>poolcfg -c 'modify pset pset_batch (string pset.poold.objectives="locality none")'</b></tt>one line</pre></li>
<li><a name="rmpool.task-step-114"></a><b>Display the edited configuration.</b><pre># <tt><b>poolcfg -c info</b></tt>
system tester
        string  system.comment
        int     system.version 1
        boolean system.bind-default true
        int     system.poold.pid 177916
        string  system.poold.objectives wt-load

        pool pool_default
                int     pool.sys_id 0
                boolean pool.active true
                boolean pool.default true
                int     pool.importance 1
                string  pool.comment 
                pset    pset_default

        pset pset_default
                int     pset.sys_id -1
                boolean pset.default true
                uint    pset.min 1
                uint    pset.max 65536
                string  pset.units population
                uint    pset.load 10
                uint    pset.size 4
                string  pset.comment 
                boolean testnullchanged true
                string  pset.poold.objectives locality none

                cpu
                        int     cpu.sys_id 3
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 2
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 1
                        string  cpu.comment 
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 0
                        string  cpu.comment 
                        string  cpu.status on-line

        pool pool_batch
                boolean pool.default false
                boolean pool.active true
                int pool.importance 1
                string pool.comment
                string pool.scheduler FSS
                pset batch

        pset pset_batch
                int pset.sys_id -2
                string pset.units population
                boolean pset.default true
                uint pset.max 10
                uint pset.min 2
                string pset.comment
                boolean pset.escapable false
                uint pset.load 0
                uint pset.size 0
                string  pset.poold.objectives locality none

                cpu
                        int     cpu.sys_id 5
                        string  cpu.comment
                        string  cpu.status on-line

                cpu
                        int     cpu.sys_id 4
                        string  cpu.comment
                        string  cpu.status on-line</pre></li>
<li><a name="rmpool.task-step-115"></a><b>Commit the configuration at <tt>/etc/pooladm.conf</tt>.</b><pre># <tt><b>pooladm -c</b></tt></pre></li>
<li><a name="rmpool.task-step-116"></a><b>(Optional) To copy the dynamic configuration to a static configuration file called <tt>/tmp/backup</tt>,
type the following:</b><pre># <tt><b>pooladm -s /tmp/backup</b></tt></pre></li></ol>

<a name="rmpool.task-117"></a><h4>How to Set the <tt>poold</tt> Logging Level</h4><p>To specify the level of logging information that <tt>poold</tt> generates, set the <tt>system.poold.log-level</tt>
property in the <tt>poold</tt> configuration. The <tt>poold</tt> configuration is held in the <tt>libpool</tt>
configuration. For information, see <a href="rmpool-100.html#rmpool-95"><tt>poold</tt> Logging Information</a> and the <a href="http://docs.sun.com/doc/819-2240/poolcfg-1m?a=view"><tt>poolcfg</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2242/libpool-3lib?a=view"><tt>libpool</tt>(3LIB)</a> man pages.</p><p>You can also use the <tt>poold</tt> command at the command line to specify
the level of logging information that <tt>poold</tt> generates.</p><ol>
<li><a name="rmpool.task-step-119"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-120"></a><b>Set the logging level by using the <tt>poold</tt> command with the <tt>-l</tt>
option and a parameter, for example, <tt>INFO</tt>.</b><pre># <tt><b>/usr/lib/pool/poold -l INFO</b></tt></pre><p>For information about available parameters, see <a href="rmpool-100.html#rmpool-95"><tt>poold</tt> Logging Information</a>. The default logging level is <tt>NOTICE</tt>.</p></li></ol>

<a name="rmpool.task-27"></a><h4>How to Use Command Files With <tt>poolcfg</tt></h4><p>The <tt>poolcfg</tt> command with the <tt>-f</tt> option can take input from a text
file that contains <tt>poolcfg</tt> subcommand arguments to the <tt>-c</tt> option. This method is
appropriate when you want a set of operations to be performed. When processing
multiple commands, the configuration is only updated if all of the commands succeed.
For large or complex configurations, this technique can be more useful than per-subcommand invocations.</p><p>Note that in command files,  the <tt>#</tt> character acts as a comment
mark for the rest of the line.</p><ol>
<li><a name="rmpool.task-step-29"></a><b>Create the input file <tt>poolcmds.txt</tt>.</b><pre>$ <tt><b>cat > poolcmds.txt</b></tt>
<tt><b>create system tester create pset pset_batch (uint pset.min = 2; uint pset.max = 10) create pool pool_batch associate pool pool_batch (pset pset_batch)</b></tt></pre></li>
<li><a name="rmpool.task-step-30"></a><b>Become superuser, or assume a role that includes the Process Management profile.</b><p>The System Administrator role includes the Process Management profile. For more information about
roles, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rmpool.task-step-31"></a><b>Execute the command:</b><pre># <tt><b>/usr/sbin/poolcfg -f poolcmds.txt</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rmpool.task-57.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rmpool.task-80.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

