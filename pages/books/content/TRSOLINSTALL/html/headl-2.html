<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Headless System Configuration in Trusted Extensions (Task Map) - Solaris Trusted Extensions Installation and Configuration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Trusted Extensions Installation and Configuration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="headl-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="appol-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-4.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="ovw-1.html">1.&nbsp;&nbsp;Security Planning for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="tmap-1.html">2.&nbsp;&nbsp;Installation and Configuration Roadmap for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="startinst-1.html">3.&nbsp;&nbsp;Installing Solaris Trusted Extensions Software  (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="txconf-1.html">4.&nbsp;&nbsp;Configuring Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="txldap-1.html">5.&nbsp;&nbsp;Configuring LDAP for Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="headl-1.html">6.&nbsp;&nbsp;Configuring a Headless System With Trusted Extensions (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Headless System Configuration in Trusted Extensions (Task Map)</a></p>
<p class="toc level3"><a href="#headl-6">Enable Remote Login in Trusted Extensions</a></p>
<p class="toc level3"><a href="#headl-4">Use the <tt>rlogin</tt> Command to Log In to a Headless System in Trusted Extensions</a></p>
<p class="toc level3"><a href="#headl-3">Use the <tt>ssh</tt> Command to Log In to a Headless System in Trusted Extensions</a></p>
<p class="toc level3"><a href="#headl-5">Set Up Administration by Serial Login in Trusted Extensions</a></p>
</div>
<p class="toc level1 tocsp"><a href="appol-1.html">A.&nbsp;&nbsp;Site Security Policy</a></p>
<p class="toc level1 tocsp"><a href="aptxconf-1.html">B.&nbsp;&nbsp;Using CDE Actions to Install Zones in Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="checklist-1.html">C.&nbsp;&nbsp;Configuration Checklist for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="headl-2"></a><h3>Headless System Configuration in Trusted Extensions (Task Map)</h3>
<a name="indexterm-274"></a><a name="indexterm-275"></a><p>On headless systems, a console is connected by means of a serial
line to a terminal emulator window. The line is typically secured by the
<tt>tip</tt> command. Depending on what type of second system is available, you can
use one of the following methods to configure a headless system. The methods
are listed from most preferred to least preferred in Task 3 in the
following table.</p><table><col width="20.21*"><col width="26.29*"><col width="39.72*"><tr><th align="left" valign="top" scope="column"><p>Tasks</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1. Identify the headless system as a <tt>cipso</tt> system.</p></td>
<td align="left" valign="top" scope="row"><p>If the
desktop system where you are going to configure the headless system is configured
with Trusted Extensions, make the headless system of host type <tt>cipso</tt>.</p></td>
<td align="left" valign="top" scope="row"><p>If you have
not already made the headless system part of the trusted network, assign to
the system the appropriate security template. See <a href="http://docs.sun.com/doc/819-7309/managetnet-16?a=view">How to Assign a Security Template to a Host or a Group of Hosts in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>2. Enable remote login.</p></td>
<td align="left" valign="top" scope="row"><p>As superuser,
enable remote login to the headless system.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#headl-6">Enable Remote Login in Trusted Extensions</a></p></td>
</tr>
<tr><td rowspan="3" align="left" valign="top" scope="row"><p>3. Choose a configuration and administration
method to set up the headless system.</p><p>The choice is based on available hardware
and software on a second system that communicates with the headless system. The
choices are listed in descending order of ease and security.</p></td>
<td align="left" valign="top" scope="row"><p>Use the <tt>rlogin</tt> command
to administer the remote system in a role.</p></td>
<td align="left" valign="top" scope="row"><p>To assume a role to administer
the remote system, go to <a href="#headl-4">Use the <tt>rlogin</tt> Command to Log In to a Headless System in Trusted Extensions</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Use the <tt>ssh</tt> command to administer the
remote system as superuser.</p></td>
<td align="left" valign="top" scope="row"><p>To administer the remote system as superuser, go to <a href="#headl-3">Use the <tt>ssh</tt> Command to Log In to a Headless System in Trusted Extensions</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>If
you have no windowing system, you can use serial login. This procedure is
insecure.</p></td>
<td align="left" valign="top" scope="row"><p>To use serial login to configure and administer the headless system, go to
<a href="#headl-5">Set Up Administration by Serial Login in Trusted Extensions</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>4. Configure Trusted Extensions on the headless system.</p></td>
<td align="left" valign="top" scope="row"><p>Having logged in, continue configuration
as you would on a system with a monitor.</p></td>
<td align="left" valign="top" scope="row"><p>See <a href="txconf-1.html">Chapter&nbsp;4, Configuring Trusted Extensions (Tasks)</a>, and use the
methods that are possible given your chosen login method.</p></td>
</tr>
</table>

<a name="headl-6"></a><h4>Enable Remote Login in Trusted Extensions</h4><p>Follow this procedure <b>only if</b> you must administer a headless system by using the
<tt>rlogin</tt> or <tt>ssh</tt> command. This procedure is not secure.</p><p>Configuration errors can be debugged remotely.</p><h6>Before You Begin</h6><p>Consult your security policy to determine which methods of remote login are permissible
at your site. The desktop system and the headless system must identify each
other as using the identical security template.</p><ol>
<li><b>Log in to the <tt>root</tt> account through the console device.</b></li>
<li><b>Choose to activate one or more of the following methods of remote login:</b><ul>
<li><b>Enable remote login by the <tt>root</tt> user.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Comment out the <tt>CONSOLE=</tt> line in the <tt>/etc/default/login</tt> file.</b><pre><tt><b>#</b></tt>CONSOLE=/dev/console</pre></li>
<li><b>Permit <tt>root</tt> user login for the <tt>ssh</tt> service.</b><p>Modify the <tt>/etc/ssh/sshd_config</tt> file. By default, <tt>ssh</tt> is enabled on a Solaris system.</p><pre>PermitRootLogin <tt><b>yes</b></tt></pre></li></ol></li>
<li><b>Permit roles to log in by using the <tt>rlogin</tt> service.</b><p>If <tt>root</tt> is a role, this modification is required for remote logins by
the <tt>root</tt> role.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>In a text editor, open the <tt>pam.conf</tt> file.</b><pre># <tt><b>vi /etc/pam.conf</b></tt></pre></li>
<li><b>Find <tt>other account requisite</tt> toward the end of the file.</b></li>
<li><b>Add <tt>allow_remote</tt> to the roles module.</b><p>Use the Tab key between fields.</p><pre>other account requisite      pam_roles.so.1        <tt><b>allow_remote</b></tt></pre><p>After your edits, this section looks similar to the following:</p><pre>other account requisite      pam_roles.so.1        allow_remote
other account required       pam_unix_account.so.1
other account required       pam_tsol_account.so.1</pre></li></ol></li>
<li><b>Allow remote login to the global zone from an unlabeled host.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>In a text editor, open the <tt>pam.conf</tt> file.</b><pre># <tt><b>vi /etc/pam.conf</b></tt></pre></li>
<li><b>Find <tt>other account requisite</tt> toward the end of the file.</b></li>
<li><b>Add <tt>allow_unlabeled</tt> to the <tt>tsol_account</tt> module.</b><p>Use the Tab key between fields.</p><pre>other account required       pam_tsol_account.so.1 <tt><b>allow_unlabeled</b></tt></pre><p>After your edits, this section looks similar to the following:</p><pre>other account requisite      pam_roles.so.1        allow_remote
other account required       pam_unix_account.so.1
other account required       pam_tsol_account.so.1 allow_unlabeled</pre></li></ol></li>
<li><b>Enable specific users to log in to the global zone.</b><p>Assign to these users an administrative label range. The username on the desktop must
be the same as the username on the headless system.</p><pre># usermod -R root -K min_label=ADMIN_LOW -K clearance=ADMIN_LOW <i>username</i></pre></li></ul></li>
<li><b>On the headless system, define the host type of your desktop.</b><p>The host type of the desktop system and the host type of
the headless system must match. To create this temporary definition, use the <tt>tnctl</tt>
command. For more information, see the <a href="http://docs.sun.com/doc/819-7307/tnctl-1m?a=view"><tt>tnctl</tt>(1M)</a> man page.</p><ul>
<li><b>For a labeled desktop system, define the host type as <tt>cipso</tt>.</b><pre># tnctl -h <i>desktop-IP-address</i>:cipso</pre></li>
<li><b>For an unlabeled desktop system, define the host type as an unlabeled system
that is running at <tt>ADMIN_LOW</tt>.</b><pre># tnctl -h <i>desktop-IP-address</i>:admin_low</pre></li></ul></li></ol>

<a name="headl-4"></a><h4>Use the <tt>rlogin</tt> Command to Log In to a Headless System in Trusted Extensions</h4><p>This procedure enables you to use the command line and Trusted Extensions
GUIs to administer a headless system by assuming a role.</p><h6>Before You Begin</h6><p>The headless system must have enough memory to use the Solaris Management
Console. The requirements are the same as for the Solaris OS. For details,
see <a href="http://docs.sun.com/doc/819-2393/webstart-83?a=view">System Requirements and Recommendations in <i>Solaris Express Installation Guide: Basic Installations</i></a>.</p><p>If the administrator's desktop system is configured with Trusted Extensions, the headless system
is identified as a CIPSO system on the desktop system. For details, see
<a href="http://docs.sun.com/doc/819-7309/managetnet-16?a=view">How to Assign a Security Template to a Host or a Group of Hosts in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p><p>You have completed <a href="#headl-6">Enable Remote Login in Trusted Extensions</a>.</p><p>You are a user who is enabled to log in to the
headless system.</p><ol>
<li><b>On the desktop system, enable processes from the headless system to display.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Enable the headless system to access the X server.</b><pre><i>desktop</i> $ <tt><b>xhost + </tt><i>headless-host</i><tt></b></tt></pre></li>
<li><b>Determine the value of the desktop's <tt>DISPLAY</tt> variable.</b><pre><i>desktop</i> $ <tt><b>echo $DISPLAY</b></tt>
:<i>n</i>.<i>n</i></pre></li></ol></li>
<li><b>On the Trusted Extensions desktop system, open a Trusted Path workspace.</b><ul>
<li><b>If your user account has direct access to the global zone, create a
Trusted Path workspace, then open a terminal window.</b></li>
<li><b>If your user account does not have direct access to the global zone,
assume a role, then open a terminal window.</b></li></ul></li>
<li><b>From this terminal window, remotely log in to the headless system.</b><pre><i>desktop</i> # rlogin <i>headless</i>
Password: Type the headless user's password</pre></li>
<li><b>Assume a role.</b><p>If you are logged in to the headless system as an unprivileged user,
assume a role with administrative privileges. Use the same terminal window. For example,
assume the <tt>root</tt> role.</p><pre><i>headless</i> $ su - root
Password: Type the root password</pre><p>You are now in the global zone.</p></li>
<li><b>Enable processes on the headless system to display on the desktop system.</b><pre><i>headless</i> $ setenv DISPLAY <i>desktop</i>:<i>n</i>.<i>n</i>
<i>headless</i> $ export DISPLAY=<i>n</i>:<i>n</i></pre><p>You can now administer the headless system by using Trusted Extensions GUIs.</p></li>
<li><b>Administer the headless system.</b><ul>
<li><b>Start the Solaris Management Console.</b><pre><i>headless</i> $ <tt><b>/usr/sbin/smc &amp;</b></tt></pre><p>The Solaris Management Console displays on the desktop system. From the list
of toolboxes, choose the <tt>Scope=Files, Policy=TSOL</tt> for the headless system.</p></li>
<li><b>Start the <tt>txzonemgr</tt>.</b><pre><i>headless</i> $ <tt><b>/usr/sbin/txzonemgr</b></tt></pre></li>
<li><b>Access Trusted CDE actions.</b><pre><i>headless</i> # /usr/dt/bin/dtappsession <i>desktop</i>
Password: Type the remote password</pre></li></ul></li></ol>

<a name="headl-3"></a><h4>Use the <tt>ssh</tt> Command to Log In to a Headless System in Trusted Extensions</h4><p>This procedure enables you to use the command line to administer a
headless system as superuser. To use Trusted Extensions GUIs, complete the steps for
remote display in <a href="#headl-4">Use the <tt>rlogin</tt> Command to Log In to a Headless System in Trusted Extensions</a>.</p><h6>Before You Begin</h6><p>The headless system must have enough memory to use the Solaris Management
Console. The requirements are the same as for the Solaris OS. For details,
see <a href="http://docs.sun.com/doc/819-2393/webstart-83?a=view">System Requirements and Recommendations in <i>Solaris Express Installation Guide: Basic Installations</i></a>.</p><p>If the administrator's desktop system is configured with Trusted Extensions, the headless system
is identified as a CIPSO system on the desktop system. For details, see
<a href="http://docs.sun.com/doc/819-7309/managetnet-16?a=view">How to Assign a Security Template to a Host or a Group of Hosts in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p><p>You have completed <a href="#headl-6">Enable Remote Login in Trusted Extensions</a>.</p><p>You are a user who is enabled to log in to the
headless system.</p><ol>
<li><b>On the Trusted Extensions desktop system, open a Trusted Path workspace.</b><ul>
<li><b>If your user account has direct access to the global zone, create a
Trusted Path workspace, then open a terminal window.</b></li>
<li><b>If your user account does not have direct access to the global zone,
assume a role, then open a terminal window.</b></li></ul></li>
<li><b>From this terminal window, remotely log in to the headless system.</b><pre><i>desktop</i> $ ssh -l <i>username-on-headless</i> <i>headless</i>
Password: Type the headless user's password
<i>headless</i> $</pre><p>The terminal window now displays actions on the headless system.</p></li>
<li><b>Become superuser.</b><p>If you are not in the global zone on the headless system, switch
user to <tt>root</tt> in the same terminal window:</p><pre><i>headless</i> $ su - root
Password: Type the root password</pre><p>You can now administer the headless system by using the command line.</p><p>To administer the system by using the administrative GUIs, enable the headless system
to display its processes on the desktop. For details, see <a href="#headl-4">Use the <tt>rlogin</tt> Command to Log In to a Headless System in Trusted Extensions</a>.</p></li></ol><a name="headl-ex-1"></a>Example&nbsp;6-1 Setting Up Remote Administration of a Headless System<p>In this example, the administrator sets up a labeled headless system from a
labeled desktop system. As in the Solaris OS, the administrator enables X server
access to the desktop system and sets the <tt>DISPLAY</tt> variable on the headless
system.</p><pre>TXdesk1 $ <tt><b>xhost + TXnohead4</b></tt>
TXdesk1 $ <tt><b>whoami</b></tt>
config1
TXdesk1 $ <tt><b>uname -n ; echo $DISPLAY</b></tt>
TXdesk1
:1.0</pre><pre>TXdesk1 $ <tt><b>ssh -l install1 TXnohead4</b></tt>
Password: <tt><b>Ins1PwD1</b></tt>
TXnohead4 $</pre><p>In the global zone, the administrator sets the <tt>DISPLAY</tt> variable.</p><pre>TXnohead4 # <tt><b>su -</b></tt>
Password: <tt><b>abcd1EFG</b></tt>
TXnohead4 # <tt><b>setenv DISPLAY TXdesk1:1.0</b></tt>
TXnohead4 # <tt><b>export DISPLAY=TXdesk1:1.0</b></tt></pre><p>Then, the administrator starts the Solaris Management Console.</p><pre>TXnohead4 # <tt><b>/usr/sbin/smc &amp;</b></tt></pre><p>Finally, the administrator selects the <tt>This Computer (TXnohead</tt>:<tt>Scope=Files, Policy=TSOL</tt><tt>)</tt> toolbox.</p>

<a name="headl-5"></a><h4>Set Up Administration by Serial Login in Trusted Extensions</h4><p>Follow this procedure <b>only if</b> you do not have a desktop system with which
to configure the headless system. This procedure is not secure.</p><h6>Before You Begin</h6><p>You must be superuser in single-user mode on the headless system. For a
modicum of security, two people should be present while the system is
being configured.</p><ol>
<li><b>Allocate the serial port.</b><p>For details, see the serial login procedure in <a href="http://docs.sun.com/doc/819-7309/managedev-33?a=view">Managing Devices in Trusted Extensions (Task Map) in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p></li>
<li><b>Administer the system as superuser.</b></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="headl-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="appol-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

