<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Up the Global Zone in Trusted Extensions - Solaris Trusted Extensions Installation and Configuration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Trusted Extensions Installation and Configuration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txconf-20.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-4.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="ovw-1.html">1.&nbsp;&nbsp;Security Planning for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="tmap-1.html">2.&nbsp;&nbsp;Installation and Configuration Roadmap for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="startinst-1.html">3.&nbsp;&nbsp;Installing Solaris Trusted Extensions Software  (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="txconf-1.html">4.&nbsp;&nbsp;Configuring Trusted Extensions (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Setting Up the Global Zone in Trusted Extensions</a></p>
<p class="toc level3"><a href="#confsys-17">Check and Install Your Label Encodings File</a></p>
<p class="toc level3"><a href="#txconf-35">Enable IPv6 Networking in Trusted Extensions</a></p>
<p class="toc level3"><a href="#txconf-42">Create ZFS Pool for Cloning Zones</a></p>
<p class="toc level3"><a href="#confsys-3">Reboot and Log In to Trusted Extensions</a></p>
<p class="toc level3"><a href="#confsys-21">Initialize the Solaris Management Console Server in Trusted Extensions</a></p>
<p class="toc level3"><a href="#txldap-8">Make the Global Zone an LDAP Client in Trusted Extensions</a></p>
</div>
<p class="toc level2 tocsp"><a href="txconf-20.html">Creating Labeled Zones</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-80">Run the <tt>txzonemgr</tt> Script</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-netint-1">Configure the Network Interfaces in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-11">Name and Label the Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-install-1">Install the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-76">Boot the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-74">Verify the Status of the Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-48">Customize the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-54">Create Another Zone in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-84">Add a Network Interface to an Existing Labeled Zone</a></p>
<p class="toc level2 tocsp"><a href="txconf-14.html">Creating Roles and Users in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-23">Create the Security Administrator Role in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-25">Create Users Who Can Assume Roles in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-29">Verify That the Trusted Extensions Roles Work</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-34">Enable Users to Log In to a Labeled Zone</a></p>
<p class="toc level2 tocsp"><a href="txconf-50.html">Creating Home Directories in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-50.html#txconf-52">Create the Home Directory Server in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-50.html#txconf-56">Enable Users to Access Their Home Directories in Trusted Extensions</a></p>
<p class="toc level2 tocsp"><a href="txconf-64.html">Adding Users and Hosts to an Existing Trusted Network</a></p>
<p class="toc level3"><a href="txconf-64.html#txconf-65">Add an NIS User to the LDAP Server</a></p>
<p class="toc level2 tocsp"><a href="txconf-trouble-1.html">Troubleshooting Your Trusted Extensions Configuration</a></p>
<p class="toc level2"><a href="txconf-18.html">Additional Trusted Extensions Configuration Tasks</a></p>
<p class="toc level3"><a href="txconf-18.html#basic-52">How to Copy Files to Portable Media in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-18.html#basic-25">How to Copy Files From Portable Media in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-18.html#txconf-72">How to Remove Trusted Extensions From the System</a></p>
<p class="toc level1 tocsp"><a href="txldap-1.html">5.&nbsp;&nbsp;Configuring LDAP for Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="headl-1.html">6.&nbsp;&nbsp;Configuring a Headless System With Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appol-1.html">A.&nbsp;&nbsp;Site Security Policy</a></p>
<p class="toc level1 tocsp"><a href="aptxconf-1.html">B.&nbsp;&nbsp;Using CDE Actions to Install Zones in Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="checklist-1.html">C.&nbsp;&nbsp;Configuration Checklist for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="txconf-60"></a><h3>Setting Up the Global Zone in Trusted Extensions</h3>
<p>Before setting up the global zone, you must make decisions about your configuration.
For the decisions, see <a href="startinst-6.html">Collecting Information and Making Decisions Before Installing Trusted Extensions</a>.</p><table><col width="18.21*"><col width="43.13*"><col width="37.65*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Protect the hardware.</p></td>
<td align="left" valign="top" scope="row"><p>Hardware can be protected by
requiring a password to change hardware settings.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-3321/secsystask-46?a=view">Controlling Access to System Hardware in <i>System Administration Guide: Security Services</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Configure labels.</p></td>
<td align="left" valign="top" scope="row"><p>Labels <b>must</b> be configured for your
site. If you plan to use the default <tt>label_encodings</tt> file, you can skip this
step.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#confsys-17">Check and Install Your Label Encodings File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>For IPv6, modify the <tt>/etc/system</tt> file.</p></td>
<td align="left" valign="top" scope="row"><p>If you are running an IPv6 network,
you modify  the <tt>/etc/system</tt> file to enable IP to recognize labeled packets.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#txconf-35">Enable IPv6 Networking in Trusted Extensions</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create
space for a Solaris ZFS snapshot.</p></td>
<td align="left" valign="top" scope="row"><p>If you plan to use a Solaris
ZFS snapshot to clone zones, create the ZFS pool. ZFS is derived from
and an acronym for &ldquo;zettabyte file system&rdquo;.</p><p>Perform this task if you are going
to clone the first zone to create the rest of the labeled zones.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#txconf-42">Create ZFS Pool for Cloning Zones</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Reboot
and log in.</p></td>
<td align="left" valign="top" scope="row"><p>Upon login, you are in the global zone, which is
an environment that recognizes and enforces mandatory access control (MAC).</p></td>
<td align="left" valign="top" scope="row"><p><a href="#confsys-3">Reboot and Log In to Trusted Extensions</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Initialize the Solaris Management
Console.</p></td>
<td align="left" valign="top" scope="row"><p>Trusted Extensions adds tools to the Solaris Management Console for administering users,
roles, zones, and the network.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#confsys-21">Initialize the Solaris Management Console Server in Trusted Extensions</a></p></td>
</tr>
<tr><td rowspan="2" align="left" valign="top" scope="row"><p>Configure LDAP.</p></td>
<td align="left" valign="top" scope="row"><p>If you are using the LDAP naming service,
set up the LDAP service.</p></td>
<td align="left" valign="top" scope="row"><p><a href="txldap-1.html">Chapter&nbsp;5, Configuring LDAP for Trusted Extensions (Tasks)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>If you have set up the LDAP service,
make this system an LDAP client.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#txldap-8">Make the Global Zone an LDAP Client in Trusted Extensions</a></p></td>
</tr>
</table>

<a name="confsys-17"></a><h4>Check and Install Your Label Encodings File</h4><a name="indexterm-87"></a><a name="indexterm-88"></a><a name="indexterm-89"></a><a name="indexterm-90"></a><a name="indexterm-91"></a><a name="indexterm-92"></a><a name="indexterm-93"></a><a name="indexterm-94"></a><a name="indexterm-95"></a><p>Your encodings file must be compatible with any Trusted Extensions host with which
you are communicating.</p>
<hr><p><b>Note - </b>Trusted Extensions installs a default <tt>label_encodings</tt> file. This default file is useful for
demonstrations. However, this file might not be a good choice for your use.
If you plan to use the default file, you can skip this procedure.</p>
<hr>

<ul><li><p>If you are familiar with encodings files, you can use the following procedure.</p></li>
<li><p>If you are not familiar with encodings files, consult <a href="http://docs.sun.com/doc/819-7308"><i>Solaris Trusted Extensions Label Administration</i></a> for requirements, procedures, and examples.</p></li></ul>

<hr><p><b>Caution - </b>You <b>must</b> successfully install labels before continuing, or the configuration will fail.</p>
<hr>
<h6>Before You Begin</h6><p>As the security administrator, you have just added the Trusted Extensions packages, so
you are already logged in.</p><p>The <a href="glossary-1.html#glossary-111">security administrator</a> is responsible for editing, checking, and maintaining the <tt>label_encodings</tt> file. If you
plan to edit the <tt>label_encodings</tt> file, make sure that the file itself is
writable. For more information, see the <a href="http://docs.sun.com/doc/819-7307/label-encodings-4?a=view"><tt>label_encodings</tt>(4)</a> man page.</p><ol>
<li><b>Insert the media with the <tt>label_encodings</tt> file into the appropriate device.</b></li>
<li><b>Copy the <tt>label_encodings</tt> file to the disk.</b></li>
<li><b>Check the syntax of the new label encodings file.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Open the Trusted_Extensions folder.</b><p>Click mouse button 3 on the background.</p></li>
<li><b>From the Workspace menu, choose Applications &rarr; Application Manager.</b></li>
<li><b>Double-click the Trusted_Extensions folder icon.</b><br><img src="figures/Dtagen.m.color.gif" alt="Illustration shows the Trusted_Extensions folder icon." width="32" height="32"></img></li></ol></li>
<li><b>Double-click the Check Encodings action.</b><p>In the dialog box, type the full path name to the file:</p><pre><i>/full-pathname-of-label-encodings-file</i></pre><p>The <tt>chk_encodings</tt> command is invoked to check the syntax of the file. The
results are displayed in the Check Encodings dialog box.</p></li>
<li><b>Read the contents of the Check Encodings dialog box.</b></li>
<li><b>Do one of the following:</b><dl><dt>CONTINUE</dt>
<dd><p>If the Check Encodings action reports no errors, you can continue. Go to <a href="#txconf-encode-ok-1">Step&nbsp;7</a>.</p></dd>
<dt>RESOLVE ERRORS</dt>
<dd><p>If the Check Encodings action reports errors, the errors <b>must</b> be resolved before continuing. For assistance, see <a href="http://docs.sun.com/doc/819-7308/modifyenc-1?a=view">Chapter 3, Making a Label Encodings File (Tasks), in <i>Solaris Trusted Extensions Label Administration</i></a>.</p></dd>
</dl>
</li>
<li><a name="txconf-encode-ok-1"></a><b>If the file passes the syntax check, click Yes.</b><p>The Check Encodings action creates a backup copy of the original file, then
installs the checked version in <tt>/etc/security/tsol/label_encodings</tt>. The action then restarts the label
daemon.</p>
<hr><p><b>Caution - </b>Your label encodings file <b>must</b> pass the Check Encodings test before you continue.</p>
<hr>
</li></ol><a name="txconf-75"></a>Example&nbsp;4-1 Checking <tt>label_encodings</tt> Syntax on the Command Line<a name="indexterm-96"></a><p>In this example, the administrator tests several <tt>label_encodings</tt> files by using the command
line.</p><pre># <tt><b>/usr/sbin/chk_encodings /var/encodings/label_encodings1</b></tt>
No errors found in /var/encodings/label_encodings1
# <tt><b>/usr/sbin/chk_encodings /var/encodings/label_encodings2</b></tt>
No errors found in /var/encodings/label_encodings2</pre><p>When management decides to use the <tt>label_encodings2</tt> file, the administrator runs a semantic
analysis of the file.</p><pre># <tt><b>/usr/sbin/chk_encodings -a /var/encodings/label_encodings2</b></tt>
No errors found in /var/encodings/label_encodings2

---> VERSION = MYCOMPANY LABEL ENCODINGS  2.0 10/10/2006

---> CLASSIFICATIONS &lt;---

   Classification 1: PUBLIC
   Initial Compartment bits: 10
   Initial Markings bits: NONE

---> COMPARTENTS AND MARKINGS USAGE ANALYSIS &lt;---
...
---> SENSITIVITY LABEL to COLOR MAPPING &lt;---
...</pre><p>The administrator prints a copy of the semantic analysis for her records, then
moves the file to the <tt>/etc/security/tsol</tt> directory.</p><pre># <tt><b>cp /var/encodings/label_encodings2 /etc/security/tsol/label.encodings.10.10.06</b></tt>

# <tt><b>cd /etc/security/tsol</b></tt>
# <tt><b>cp label_encodings label_encodings.tx.orig</b></tt>
# <tt><b>cp label.encodings.10.10.06 label_encodings</b></tt></pre><p>Finally, the administrator verifies that the <tt>label_encodings</tt> file is the company file.</p><pre># <tt><b>/usr/sbin/chk_encodings -a /etc/security/tsol/label_encodings | head -4</b></tt>
No errors found in /etc/security/tsol/label_encodings

---> VERSION = MYCOMPANY LABEL ENCODINGS  2.0 10/10/2006</pre>

<a name="txconf-35"></a><h4>Enable IPv6 Networking in Trusted Extensions</h4><a name="indexterm-97"></a><a name="indexterm-98"></a><a name="indexterm-99"></a><a name="indexterm-100"></a><p>When IPv6 is disabled, Trusted Extensions cannot forward IPv6 packets with CIPSO options.
To enable an IPv6 network in Trusted Extensions, you must add an entry
in the <tt>/etc/system</tt> file.</p><ul>
<li><b>Type the following entry into the <tt>/etc/system</tt> file:</b><pre><tt><b>set ip:ip6opt_ls = 0x0a</b></tt></pre></li></ul><h6>Troubleshooting</h6>
<ul><li><p><a name="indexterm-101"></a><a name="indexterm-102"></a>If error messages during boot indicate that your IPv6 configuration is incorrect, correct the entry:</p>
<ul><li><p>Check that the entry is spelled correctly.</p></li>
<li><p>Check that the system has been rebooted after adding the correct entry to the <tt>/etc/system</tt> file.</p></li></ul>
</li>
<li><p>If you install Trusted Extensions on a Solaris system that currently has IPv6 enabled, but you fail to add the IP entry in <tt>/etc/system</tt>, you see the following error message: <tt>t_optmgmt: System error: Cannot assign requested address</tt> <i>time-stamp</i></p></li>
<li><p>If you install Trusted Extensions on a Solaris system that does not have IPv6 enabled, and you fail to add the IP entry in <tt>/etc/system</tt>, you see the following types of error messages:</p>
<ul><li><p><tt>WARNING: IPv6 not enabled via /etc/system</tt></p></li>
<li><p><tt>Failed to configure IPv6 interface(s): hme0</tt></p></li>
<li><p><tt>rpcbind: Unable to join IPv6 multicast group for rpc broadcast</tt> <i>broadcast-number</i></p></li></ul>
</li></ul>


<a name="txconf-42"></a><h4>Create ZFS Pool for Cloning Zones</h4><a name="indexterm-103"></a><a name="indexterm-104"></a><p>If you plan to use a Solaris ZFS snapshot as your zone
template, you need to create a ZFS pool from a ZFS file or
a ZFS device. This pool holds the snapshot for cloning each zone. You
use the <tt>/zone</tt> device for your ZFS pool.</p><h6>Before You Begin</h6><p>You have set aside disk space during Solaris installation for a ZFS file
system. For details, see <a href="ovw-36.html#ovw-11">Planning for Zones in Trusted Extensions</a>.</p><ol>
<li><b>Unmount the <tt>/zone</tt> partition.</b><p>During installation, you created a <tt>/zone</tt> partition with sufficient disk space of about
2000 MBytes.</p><pre># <tt><b>umount /zone</b></tt></pre></li>
<li><b>Remove the <tt>/zone</tt> mount point.</b><pre># <tt><b>rmdir /zone</b></tt></pre></li>
<li><b>Comment out the <tt>/zone</tt> entry in the <tt>vfstab</tt> file.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Prevent the <tt>/zone</tt> entry from being read.</b><p>Open the <tt>vfstab</tt> file in an editor. Prefix the <tt>/zone</tt> entry with a comment
sign.</p><pre><tt><b>#</b></tt>/dev/dsk/c<i>n</i>t<i>n</i>d<i>n</i>s<i>n</i>  /dev/dsk/c<i>n</i>t<i>n</i>d<i>n</i>s<i>n</i>  /zone  ufs  2  yes  -</pre></li>
<li><b>Copy the disk slice, <tt>c</tt><i>n</i><tt>t</tt><i>n</i><tt>d</tt><i>n</i><tt>s</tt><i>n</i>, to the clipboard.</b></li>
<li><b>Save the file, and close the editor.</b></li></ol></li>
<li><b>Use the disk slice to re-create <tt>/zone</tt> as a ZFS pool.</b><pre># zpool create -f zone c<i>n</i>t<i>n</i>d<i>n</i>s<i>n</i></pre><p>For example, if your <tt>/zone</tt> entry used disk slice <tt>c0t0d0s5</tt>, then the command
would be the following:</p><pre># <tt><b>zpool create -f zone c0t0d0s5</b></tt></pre></li>
<li><a name="txconf-zpool-verify-1"></a><b>Verify that the ZFS pool is healthy.</b><p>Use one of the following commands:</p><pre># <tt><b>zpool status -x zone</b></tt>
pool 'zone' is healthy</pre><pre># <tt><b>zpool list</b></tt>
NAME     SIZE     USED   AVAIL   CAP   HEALTH   ALTROOT
/zone    5.84G   80K    5.84G    7%   ONLINE   -</pre><p>In this example, the install team reserved a 6000MByte partition for zones. For
more information, see the <a href="http://docs.sun.com/doc/819-2240/zpool-1m?a=view"><tt>zpool</tt>(1M)</a> man page.</p></li></ol>

<a name="confsys-3"></a><h4>Reboot and Log In to Trusted Extensions</h4><a name="indexterm-105"></a><a name="indexterm-106"></a><a name="indexterm-107"></a><p>At most sites, two or more administrators, who serve as an <a href="glossary-1.html#glossary-59">install team</a>,
are present when configuring the system.</p><h6>Before You Begin</h6><p>Before you first log in, become familiar with the desktop and label options
in Trusted Extensions. For details, see <a href="http://docs.sun.com/doc/819-7313/uglog-1?a=view">Chapter 2, Logging In to Trusted Extensions (Tasks), in <i>Solaris Trusted Extensions User&rsquo;s Guide</i></a>.</p><ol>
<li><b>Reboot the system.</b><pre># <tt><b>/usr/sbin/reboot</b></tt></pre><p>If your system does not have a graphical display, go to <a href="headl-1.html">Chapter&nbsp;6, Configuring a Headless System With Trusted Extensions (Tasks)</a>.</p></li>
<li><b>Log in to the Solaris Trusted Extensions (CDE) desktop as superuser.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>In the login window, select Solaris Trusted Extensions (CDE) as the desktop.</b><p>This Trusted CDE desktop contains actions that are useful when configuring the system.</p></li>
<li><b>In the login dialog box, type <tt>root</tt> and the root password.</b><p>Users must not disclose their passwords to another person, as that person might
then have access to the data of the user and will not
be uniquely identified or accountable. Note that disclosure can be direct, through the
user deliberately disclosing his/her password to another person, or indirect, such as through writing
it down, or choosing an insecure password. Trusted Extensions software provides protection against
insecure passwords, but cannot prevent a user disclosing his/her password or writing it
down.</p></li></ol></li>
<li><b>Read the information in the Last Login dialog box.</b><br><img src="figures/last.login.gif" alt="Illustration shows the Last Login dialog box."></img><p>Then click OK to dismiss the box.</p></li>
<li><b>Read the Label Builder.</b><p>Click OK to accept the default label.</p><p><a name="indexterm-108"></a><a name="indexterm-109"></a><a name="indexterm-110"></a>Once the login process is complete, the Trusted Extensions screen appears briefly, and
you are in a desktop session with four workspaces. The <tt>Trusted Path</tt> symbol
is displayed in the <a href="glossary-1.html#glossary-133">trusted stripe</a>. </p>
<hr><p><b>Note - </b>You must log off or lock the screen before leaving a system unattended.
Otherwise, a person can access the system without having to pass identification and
authentication, and that person would not be uniquely identified or accountable.</p>
<hr>
</li></ol>

<a name="confsys-21"></a><h4>Initialize the Solaris Management Console Server in Trusted Extensions</h4><a name="indexterm-111"></a><a name="indexterm-112"></a><a name="indexterm-113"></a><a name="indexterm-114"></a><a name="indexterm-115"></a><a name="indexterm-116"></a><p>This procedure enables you to administer users, roles, hosts, zones, and the network
on this system. On the first system that you configure, only the <tt>files</tt>
scope is available.</p><h6>Before You Begin</h6><p>You must be superuser.</p><ol>
<li><b>Start the Solaris Management Console.</b><pre># <tt><b>/usr/sbin/smc &amp;</b></tt></pre>
<hr><p><b>Note - </b>The first time the Solaris Management Console  is started, it performs
several registration tasks. These tasks can take a few minutes.</p>
<hr>
</li>
<li><a name="gewnh"></a><b><a name="indexterm-117"></a><a name="indexterm-118"></a>Do one of the following if toolbox icons do not appear in
the Solaris Management Console:</b><ul>
<li><a name="gewpg"></a><b>If the Navigation pane is not visible:</b><ol style="list-style-type: lower-alpha">
				 
<li><b>In the Open Toolbox dialog box that is displayed, click Load next to
this system's name under Server.</b><p>If this system does not have the recommended amount of memory and swap,
it might take a few minutes for the toolboxes to display. For recommendations,
see <a href="startinst-4.html">Installing or Upgrading the Solaris OS for Trusted Extensions</a>.</p></li>
<li><b>From the list of toolboxes, select a toolbox whose <tt>Policy=TSOL</tt>.</b><p><a href="#txconf-fig-1">Figure&nbsp;4-1</a> shows a This Computer (<i>this-host</i>: <tt>Scope=Files, Policy=TSOL</tt>) toolbox. Trusted Extensions modifies tools under
the System Configuration node.</p>
<hr><p><b>Caution - </b>Do not choose a toolbox that has no policy. Toolboxes without a listed
policy do not support Trusted Extensions.</p>
<hr>
<p>Your toolbox choice depends on which scope you want to influence. </p>
<ul><li><p>To edit local files, choose the Files scope.</p></li>
<li><p>To edit LDAP databases, choose the LDAP scope.</p><p>After you complete <a href="confsys-10.html#txldap-7">Edit the LDAP Toolbox in the Solaris Management Console</a>, the LDAP scope is available.</p></li></ul>
</li>
<li><b>Click Open.</b></li></ol></li>
<li><b>If the Navigation pane is visible, but the toolbox icons are stop signs:</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Exit the Solaris Management Console.</b></li>
<li><b>Restart the Solaris Management Console.</b><pre># <tt><b>/usr/sbin/smc &amp;</b></tt></pre></li></ol></li></ul></li>
<li><b>If you have not yet done so, select a toolbox whose <tt>Policy=TSOL</tt>.</b><p>The following figure shows a This Computer (<i>this-host</i>: <tt>Scope=Files, Policy=TSOL</tt>) toolbox. Trusted Extensions
modifies tools under the System Configuration node.</p><a name="txconf-fig-1"></a><h6>Figure&nbsp;4-1 Trusted Extensions Tools in the Solaris Management Console</h6><img src="figures/smc.navpanel.gif" alt="Window shows the System Configuration node with the Users tools and the Computers and Networks tools." width="322" height="415"></img></li>
<li>(Optional) <b>Save the current toolbox.</b><p>Saving a <tt>Policy=TSOL</tt> toolbox enables a Trusted Extensions toolbox to load by default. Preferences
are saved per role, per host. The host is the Solaris Management Console
server.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>From the Console menu, choose Preferences.</b><p>The Home toolbox is selected.</p></li>
<li><b>Define a <tt>Policy=TSOL</tt> toolbox as the Home toolbox.</b><p>Put the current toolbox in the Location field by clicking the Use
Current Toolbox button.</p></li>
<li><b>Click OK to save the preferences.</b></li></ol></li>
<li><b>Exit the Solaris Management Console.</b></li></ol><h6>See Also</h6><p>For an overview of the Trusted Extensions additions to the Solaris Management
Console, see <a href="http://docs.sun.com/doc/819-7309/txtool-8?a=view">Solaris Management Console Tools in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>. To use the Solaris Management Console to create security templates,
see <a href="http://docs.sun.com/doc/819-7309/managetnet-3?a=view">Configuring Trusted Network Databases (Task Map) in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p>

<a name="txldap-8"></a><h4>Make the Global Zone an LDAP Client in Trusted Extensions</h4><a name="indexterm-119"></a><a name="indexterm-120"></a><a name="indexterm-121"></a><a name="indexterm-122"></a><p>For LDAP, this procedure establishes the naming service configuration for the global zone.
If you are not using LDAP, you can skip this procedure.</p><h6>Before You Begin</h6><p>The Sun Java<sup>TM</sup> System Directory Server, that is, the LDAP server, must
exist. The server must be populated with Trusted Extensions databases, and this system
must be able to contact the server. So, the system that you are
configuring must have an entry in the <tt>tnrhdb</tt> database on the LDAP server,
or this system must be included in a wildcard entry before you perform
this procedure.</p><p>If an LDAP server that is configured with Trusted Extensions does not
exist, you must complete the procedures in <a href="txldap-1.html">Chapter&nbsp;5, Configuring LDAP for Trusted Extensions (Tasks)</a> before you perform this procedure.</p><ol>
<li><b>Save a copy of the original <tt>nsswitch.ldap</tt> file.</b><p>The standard naming service switch file for LDAP is too restrictive for Trusted
Extensions.</p><pre># <tt><b>cd /etc</b></tt>
# <tt><b>cp nsswitch.ldap nsswitch.ldap.orig</b></tt></pre></li>
<li><b>If you are using DNS, change the <tt>nsswitch.ldap</tt> file entries for the following
services.</b><p>The correct entries are similar to the following:</p><pre>hosts:    files dns ldap

ipnodes:    files dns ldap

networks:   ldap files
protocols:  ldap files
rpc:        ldap files
ethers:     ldap files
netmasks:   ldap files
bootparams: ldap files
publickey:  ldap files

services:   files</pre><p>Note that Trusted Extensions adds two entries:</p><pre>tnrhtp:    files ldap
tnrhdb:    files ldap</pre></li>
<li><b>Copy the modified <tt>nsswitch.ldap</tt> file to <tt>nsswitch.conf</tt>.</b><pre># <tt><b>cp nsswitch.ldap nsswitch.conf</b></tt></pre></li>
<li><b>In a Trusted CDE workspace, navigate to the Trusted_Extensions folder.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Click mouse button 3 on the background.</b></li>
<li><b>From the Workspace menu, choose Applications &rarr; Application Manager.</b></li>
<li><b>Double-click the Trusted_Extensions folder icon.</b><p>This folder contains actions that set up interfaces, LDAP clients, and labeled zones.</p></li></ol></li>
<li><b>Double-click the Create LDAP Client action.</b><p>Answer the following prompts:</p><pre>Domain Name:               Type the domain name
Hostname of LDAP Server:   Type the name of the server
IP Address of LDAP Server: Type the IP address
LDAP Proxy Password:       Type the password to the server
Profile Name:              Type the profile name</pre></li>
<li><b>Click OK.</b><p>The following completion message appears:</p><pre>global zone will be LDAP client of <i>LDAP-server</i>
System successfully configured.

*** Select Close or Exit from the window menu to close this window ***</pre></li>
<li><b>Close the action window.</b></li>
<li><b>Verify that the information on the server is correct.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Open a terminal window, and query the LDAP server.</b><pre># <tt><b>ldapclient list</b></tt></pre><p>The output looks similar to the following:</p><pre>NS_LDAP_FILE_VERSION= 2.0
NS_LDAP_BINDDN= cn=proxyagent,ou=profile,dc=<i>domain-name</i>
...
NS_LDAP_BIND_TIME= <i>number</i></pre></li>
<li><b>Correct any errors.</b><p>If you get an error, run the Create LDAP Client action with the
correct values. For example, the following error can indicate that the system does
not have an entry on the LDAP server:</p><pre>LDAP ERROR (91): Can't connect to the LDAP server.
Failed to find defaultSearchBase for domain <i>domain-name</i></pre><p>To correct this error, you need to check the LDAP server.</p></li></ol></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txconf-20.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

