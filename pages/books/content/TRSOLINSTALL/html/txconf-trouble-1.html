<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Troubleshooting Your Trusted Extensions Configuration - Solaris Trusted Extensions Installation and Configuration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Trusted Extensions Installation and Configuration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-64.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txconf-18.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-4.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="ovw-1.html">1.&nbsp;&nbsp;Security Planning for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="tmap-1.html">2.&nbsp;&nbsp;Installation and Configuration Roadmap for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="startinst-1.html">3.&nbsp;&nbsp;Installing Solaris Trusted Extensions Software  (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="txconf-1.html">4.&nbsp;&nbsp;Configuring Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txconf-60.html">Setting Up the Global Zone in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#confsys-17">Check and Install Your Label Encodings File</a></p>
<p class="toc level3"><a href="txconf-60.html#txconf-35">Enable IPv6 Networking in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#txconf-42">Create ZFS Pool for Cloning Zones</a></p>
<p class="toc level3"><a href="txconf-60.html#confsys-3">Reboot and Log In to Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#confsys-21">Initialize the Solaris Management Console Server in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#txldap-8">Make the Global Zone an LDAP Client in Trusted Extensions</a></p>
<p class="toc level2 tocsp"><a href="txconf-20.html">Creating Labeled Zones</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-80">Run the <tt>txzonemgr</tt> Script</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-netint-1">Configure the Network Interfaces in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-11">Name and Label the Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-install-1">Install the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-76">Boot the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-74">Verify the Status of the Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-48">Customize the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-54">Create Another Zone in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-84">Add a Network Interface to an Existing Labeled Zone</a></p>
<p class="toc level2 tocsp"><a href="txconf-14.html">Creating Roles and Users in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-23">Create the Security Administrator Role in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-25">Create Users Who Can Assume Roles in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-29">Verify That the Trusted Extensions Roles Work</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-34">Enable Users to Log In to a Labeled Zone</a></p>
<p class="toc level2 tocsp"><a href="txconf-50.html">Creating Home Directories in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-50.html#txconf-52">Create the Home Directory Server in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-50.html#txconf-56">Enable Users to Access Their Home Directories in Trusted Extensions</a></p>
<p class="toc level2 tocsp"><a href="txconf-64.html">Adding Users and Hosts to an Existing Trusted Network</a></p>
<p class="toc level3"><a href="txconf-64.html#txconf-65">Add an NIS User to the LDAP Server</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Troubleshooting Your Trusted Extensions Configuration</a></p>
</div>
<p class="toc level2"><a href="txconf-18.html">Additional Trusted Extensions Configuration Tasks</a></p>
<p class="toc level3"><a href="txconf-18.html#basic-52">How to Copy Files to Portable Media in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-18.html#basic-25">How to Copy Files From Portable Media in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-18.html#txconf-72">How to Remove Trusted Extensions From the System</a></p>
<p class="toc level1 tocsp"><a href="txldap-1.html">5.&nbsp;&nbsp;Configuring LDAP for Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="headl-1.html">6.&nbsp;&nbsp;Configuring a Headless System With Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appol-1.html">A.&nbsp;&nbsp;Site Security Policy</a></p>
<p class="toc level1 tocsp"><a href="aptxconf-1.html">B.&nbsp;&nbsp;Using CDE Actions to Install Zones in Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="checklist-1.html">C.&nbsp;&nbsp;Configuration Checklist for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="txconf-trouble-1"></a><h3>Troubleshooting Your Trusted Extensions Configuration</h3>
<a name="indexterm-200"></a><a name="indexterm-201"></a><p>In Trusted Extensions, the labeled zones communicate with the X server through the
global zone. Therefore, the labeled zones must have usable routes to the global
zone. Also, options that were selected during a Solaris installation can prevent Trusted
Extensions from using interfaces to the global zone.</p>

<a name="txconf-70"></a><h4><tt>netservices limited</tt> Was Run After Trusted Extensions Was Installed</h4>
<dl><dt><b>Description:</b></dt>
<dd><p>Instead of running the <tt>netservices limited</tt> command before you added the Trusted Extensions packages, you ran the command in the global zone after you added the packages. Therefore, your labeled zones are unable to connect to the X server in the global zone.</p></dd>
<dt><b>Solution:</b></dt>
<dd><p>Run the following commands to open the services that Trusted Extensions requires to communicate between zones:</p><pre># <tt><b>svccfg -s x11-server setprop options/tcp_listen = true</b></tt>
# <tt><b>svcadm enable svc:/network/rpc/rstat:default</b></tt></pre></dd>
</dl>


<a name="cannotopenconsolewindowinlabeledzone"></a><h4>Cannot Open the Console Window in a Labeled Zone</h4>
<a name="indexterm-202"></a><a name="indexterm-203"></a><dl><dt><b>Description:</b></dt>
<dd><p>When you attempt to open a console window in a labeled zone, the following error appears in a dialog box:</p><pre>Action:DttermConsole,*,*,*,0 [Error]
Action not authorized.</pre></dd>
<dt><b>Solution:</b></dt>
<dd><p>Verify that the following two lines are present in each of the zone entries in the <tt>/etc/security/exec_attr</tt> file:</p><pre>All Actions:solaris:act:::*;*;*;*;*:
All:solaris:act:::*;*;*;*;*:</pre><p>If these lines are not present, the Trusted Extensions package that adds these entries was not installed in the labeled zones. In this case, re-create the labeled zones. For the procedure, see <a href="txconf-20.html">Creating Labeled Zones</a>.</p></dd>
</dl>


<a name="labeledzonecannotaccessxserver"></a><h4>Labeled Zone Is Unable to Access the X Server</h4>
<a name="indexterm-204"></a><a name="indexterm-205"></a><a name="indexterm-206"></a><a name="indexterm-207"></a><a name="indexterm-208"></a><a name="indexterm-209"></a><a name="indexterm-210"></a><dl><dt><b>Description:</b></dt>
<dd><p>If a labeled zone cannot successfully access the X server, you might see messages such as the following:</p>
<ul><li><p><tt>Action failed. Reconnect to Solaris Zone?</tt></p></li>
<li><p><tt>No route available</tt></p></li>
<li><p><tt>Cannot reach globalzone-</tt><i>hostname</i><tt>:0</tt></p></li></ul>
</dd>
<dt><b>Cause:</b></dt>
<dd><p>The labeled zones might not be able to access the X server for any of the following reasons:</p>
<ul><li><p>The zone is not initialized and is waiting for the <tt>sysidcfg</tt> process to complete.</p></li>
<li><p>The labeled zone's host name is not recognized by the naming service that runs in the global zone.</p></li>
<li><p>No interface is specified as <tt>all-zones</tt>.</p></li>
<li><p>The labeled zone's network interface is down.</p></li>
<li><p>LDAP name lookups fail.</p></li>
<li><p>NFS mounts do not work.</p></li></ul>
</dd>
<dt><b>Steps toward a solution:</b></dt>
<dd><p>Do the following:</p>
<ol><li><p>Log in to the zone.</p><p>You can use the <tt>zlogin</tt> command or the Zone Terminal Console action.</p><pre># <tt><b>zlogin -z </tt><i>zone-name</i><tt></b></tt></pre><p>If you cannot log in as superuser, use the <tt>zlogin -S</tt> command to bypass authentication.</p></li>
<li><p>Verify that the zone is running.</p><pre># <tt><b>zoneadm list</b></tt></pre><p>If a zone has a status of <tt>running</tt>, the zone is running at least one process.</p></li>
<li><p>Address any problems that prevent the labeled zones from accessing the X server.</p>
<ul><li><p>Initialize the zone by completing the <tt>sysidcfg</tt> process.</p><p>Run the <tt>sysidcfg</tt> program interactively. Answer the prompts in the Zone Terminal Console, or in the terminal window where you ran the <tt>zlogin</tt> command.</p><p><a name="indexterm-211"></a><a name="indexterm-212"></a><a name="indexterm-213"></a>To run the <tt>sysidcfg</tt> process noninteractively, you can do one of the following:</p>
<ul><li><p>Specify the Initialize item for the <tt>/usr/sbin/txzonemgr</tt> script.</p><p>The Initialize item enables you to supply default values to the <tt>sysidcfg</tt> questions.</p></li>
<li><p>Write your own <tt>sysidcfg</tt> script.</p><p>For more information, see the <a href="http://docs.sun.com/doc/819-2251/sysidcfg-4?a=view"><tt>sysidcfg</tt>(4)</a> man page.</p></li></ul>
</li>
<li><p>Verify that the X server is available to the zone.</p><p>Log in to the labeled zone. Set the <tt>DISPLAY</tt> variable to point to the X server, and open a window.</p><pre># DISPLAY=<i>global-zone-hostname</i>:<i>n</i>.<i>n</i>
# export DISPLAY
# /usr/openwin/bin/xclock</pre><p>If a labeled window does not appear, the zone networking has not been configured correctly for that labeled zone.</p></li>
<li><p>Configure the zone's host name with the naming service.</p><p>The zone's local <tt>/etc/hosts</tt> file is not used. Instead, equivalent information must be specified in the global zone or on the LDAP server. The information must include the IP address of the host name that is assigned to the zone.</p></li>
<li><p>No interface is specified as <tt>all-zones</tt>.</p><p>Unless all your zones have IP addresses on the same subnet as the global zone, you might need to configure an <tt>all-zones</tt> (shared) interface. This configuration enables a labeled zone to connect to the X server of the global zone. If you want to restrict remote connections to the X server of the global zone, you can use <tt>vni0</tt> as the <tt>all-zones</tt> address.</p><p>If you do <b>not</b> want an <tt>all-zones</tt> interface configured, you must provide a route to the global zone X server for each zone. These routes must be configured in the global zone.</p></li>
<li><p>The labeled zone's network interface is down.</p><pre># <tt><b>ifconfig -a</b></tt></pre><p>Use the <tt>ifconfig</tt> command to verify that the labeled zone's network interface is both <tt>UP</tt> and <tt>RUNNING</tt>.</p></li>
<li><p>LDAP name lookups fail.</p><p>Use the <tt>ldaplist</tt> command to verify that each zone can communicate with the LDAP server or the LDAP proxy server. On the LDAP server, verify that the zone is listed in the <tt>tnrhdb</tt> database.</p></li>
<li><p>NFS mounts do not work.</p><p>As superuser, restart <tt>automount</tt> in the zone. Or, add a <tt>crontab</tt> entry to run the <tt>automount</tt> command every five minutes.</p></li></ul>
</li></ol>
</dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-64.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txconf-18.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

