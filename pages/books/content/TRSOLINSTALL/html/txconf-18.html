<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Additional Trusted Extensions Configuration Tasks - Solaris Trusted Extensions Installation and Configuration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Trusted Extensions Installation and Configuration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-trouble-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txldap-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-4.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="ovw-1.html">1.&nbsp;&nbsp;Security Planning for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="tmap-1.html">2.&nbsp;&nbsp;Installation and Configuration Roadmap for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="startinst-1.html">3.&nbsp;&nbsp;Installing Solaris Trusted Extensions Software  (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="txconf-1.html">4.&nbsp;&nbsp;Configuring Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txconf-60.html">Setting Up the Global Zone in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#confsys-17">Check and Install Your Label Encodings File</a></p>
<p class="toc level3"><a href="txconf-60.html#txconf-35">Enable IPv6 Networking in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#txconf-42">Create ZFS Pool for Cloning Zones</a></p>
<p class="toc level3"><a href="txconf-60.html#confsys-3">Reboot and Log In to Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#confsys-21">Initialize the Solaris Management Console Server in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-60.html#txldap-8">Make the Global Zone an LDAP Client in Trusted Extensions</a></p>
<p class="toc level2 tocsp"><a href="txconf-20.html">Creating Labeled Zones</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-80">Run the <tt>txzonemgr</tt> Script</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-netint-1">Configure the Network Interfaces in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-11">Name and Label the Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-install-1">Install the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-76">Boot the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-74">Verify the Status of the Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-48">Customize the Labeled Zone</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-54">Create Another Zone in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-20.html#txconf-84">Add a Network Interface to an Existing Labeled Zone</a></p>
<p class="toc level2 tocsp"><a href="txconf-14.html">Creating Roles and Users in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-23">Create the Security Administrator Role in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-25">Create Users Who Can Assume Roles in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-29">Verify That the Trusted Extensions Roles Work</a></p>
<p class="toc level3"><a href="txconf-14.html#txconf-34">Enable Users to Log In to a Labeled Zone</a></p>
<p class="toc level2 tocsp"><a href="txconf-50.html">Creating Home Directories in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-50.html#txconf-52">Create the Home Directory Server in Trusted Extensions</a></p>
<p class="toc level3"><a href="txconf-50.html#txconf-56">Enable Users to Access Their Home Directories in Trusted Extensions</a></p>
<p class="toc level2 tocsp"><a href="txconf-64.html">Adding Users and Hosts to an Existing Trusted Network</a></p>
<p class="toc level3"><a href="txconf-64.html#txconf-65">Add an NIS User to the LDAP Server</a></p>
<p class="toc level2 tocsp"><a href="txconf-trouble-1.html">Troubleshooting Your Trusted Extensions Configuration</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Additional Trusted Extensions Configuration Tasks</a></p>
<p class="toc level3"><a href="#basic-52">How to Copy Files to Portable Media in Trusted Extensions</a></p>
<p class="toc level3"><a href="#basic-25">How to Copy Files From Portable Media in Trusted Extensions</a></p>
<p class="toc level3"><a href="#txconf-72">How to Remove Trusted Extensions From the System</a></p>
</div>
<p class="toc level1 tocsp"><a href="txldap-1.html">5.&nbsp;&nbsp;Configuring LDAP for Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="headl-1.html">6.&nbsp;&nbsp;Configuring a Headless System With Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appol-1.html">A.&nbsp;&nbsp;Site Security Policy</a></p>
<p class="toc level1 tocsp"><a href="aptxconf-1.html">B.&nbsp;&nbsp;Using CDE Actions to Install Zones in Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="checklist-1.html">C.&nbsp;&nbsp;Configuration Checklist for Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="txconf-18"></a><h3>Additional Trusted Extensions Configuration Tasks</h3>
<a name="indexterm-214"></a><a name="indexterm-215"></a><p>The following two tasks enable you to transfer exact copies of configuration files
to every Trusted Extensions system at your site. The final task enables you
to remove  Trusted Extensions customizations from a Solaris system.</p>

<a name="basic-52"></a><h4>How to Copy Files to Portable Media in Trusted Extensions</h4><a name="indexterm-216"></a><a name="indexterm-217"></a><p>When copying to portable media, label the media with the sensitivity label of
the information.</p>
<hr><p><b>Note - </b>During installation, superuser or an equivalent role copies administrative files to and from
portable media. Label the media with <tt>Trusted Path</tt>.</p>
<hr>
<h6>Before You Begin</h6><p>To copy administrative files, you must be superuser or in a role
in the global zone.</p><ol>
<li><b>Allocate the appropriate device.</b><p>Use the Device Allocation Manager, and insert clean media. &nbsp;For details, see <a href="http://docs.sun.com/doc/819-7313/ugelem-27?a=view">How to Allocate a Device in Trusted Extensions in <i>Solaris Trusted Extensions User&rsquo;s Guide</i></a>.
</p>
<ul><li><p>In Solaris Trusted Extensions (CDE), a <b>File Manager</b> displays the contents of the portable media.</p></li>
<li><p>In Solaris Trusted Extensions (JDS), a <b>File Browser</b> displays the contents.</p></li></ul>
<p>In In this procedure, File Manager is used to refer to this
GUI.</p></li>
<li><b>Open a second File Manager.</b></li>
<li><b>Navigate to the folder that contains the files to be copied</b><p>For example, you might have copied files to an <tt>/export/clientfiles</tt> folder.</p></li>
<li><b>For each file, do the following:</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Highlight the icon for the file.</b></li>
<li><b>Drag the file to the File Manager for the portable media.</b></li></ol></li>
<li><b>Deallocate the device.</b><p>For details, see <a href="http://docs.sun.com/doc/819-7313/ugtour-12?a=view">How to Deallocate a Device in Trusted Extensions in <i>Solaris Trusted Extensions User&rsquo;s Guide</i></a>.</p></li>
<li><b>On the File Manager for the portable media, choose Eject from the File
menu.</b>
<hr><p><b>Note - </b>Remember to physically affix a label to the media with the sensitivity label
of the copied files.</p>
<hr>
</li></ol><a name="txconf-copy-1"></a>Example&nbsp;4-7 Keeping Configuration Files Identical on All Systems<p>The system administrator wants to ensure that every machine is configured with the
same settings. So, on the first machine that is configured, she creates a
directory that cannot be deleted between reboots. In that directory, the administrator places
the files that should be identical or very similar on all systems.</p><p>For example, she copies the Trusted Extensions toolbox that the Solaris Management
Console uses for the LDAP scope, <tt>/var/sadm/smc/toolboxes/tsol_ldap/tsol_ldap.tbx</tt>. She has customized remote host templates in
the <tt>tnrhtp</tt> file, has a list of DNS servers, and audit configuration files.
She also modified the <tt>policy.conf</tt> file for her site. So, she copies the files
to the permanent directory.</p><pre># <tt><b>mkdir /export/commonfiles</b></tt>
# <tt><b>cp /etc/security/policy.conf \ /etc/security/audit_control \ /etc/security/audit_startup \ /etc/security/tsol/tnrhtp \ /etc/resolv.conf \ /etc/nsswitch.conf \ /export/commonfiles</b></tt></pre><p>She uses the Device Allocation Manager to allocate a diskette in the global
zone, and transfers the files to the diskette. On a separate diskette, labeled
<tt>ADMIN_HIGH</tt>, she puts the <tt>label_encodings</tt> file for the site.</p><p>When she copies the files onto a system, she modifies the <tt>dir:</tt>
entries in the <tt>/etc/security/audit_control</tt> file for that system.</p>

<a name="basic-25"></a><h4>How to Copy Files From Portable Media in Trusted Extensions</h4><p><a name="indexterm-218"></a><a name="indexterm-219"></a>It is safe practice to rename the original Trusted Extensions file before replacing
the file. When configuring a system, the <tt>root</tt> role renames and copies administrative
files.</p><h6>Before You Begin</h6><p>To copy administrative files, you must be superuser or in a role in
the global zone.</p><ol>
<li><b>Allocate the appropriate device.</b><p>For details, see <a href="http://docs.sun.com/doc/819-7313/ugelem-27?a=view">How to Allocate a Device in Trusted Extensions in <i>Solaris Trusted Extensions User&rsquo;s Guide</i></a>.</p>
<ul><li><p>In Solaris Trusted Extensions (CDE), a <b>File Manager</b> displays the contents of the portable media.</p></li>
<li><p>In Solaris Trusted Extensions (JDS), a <b>File Browser</b> displays the contents.</p></li></ul>
<p>In this procedure, File Manager is used to refer to this GUI.</p></li>
<li><b>Insert the media that contains the administrative files.</b></li>
<li><b>If the system has a file of the same name, copy the
original file to a new name.</b><p>For example, add <tt>.orig</tt> to the end of the original file:</p><pre># <tt><b>cp /etc/security/tsol/tnrhtp /etc/security/tsol/tnrhtp.orig</b></tt></pre></li>
<li><b>Open a File Manager.</b></li>
<li><b>Navigate to the desired destination directory, such as <tt>/etc/security/tsol</tt></b></li>
<li><b>For each file that you want to copy, do the following:</b><ol style="list-style-type: lower-alpha">
				 
<li><b>In the File Manager for the mounted media, highlight the icon for the
file.</b></li>
<li><b>Then, drag the file to the destination directory in the second File Manager.</b></li></ol></li>
<li><b>Deallocate the device.</b><p>For details, see <a href="http://docs.sun.com/doc/819-7313/ugtour-12?a=view">How to Deallocate a Device in Trusted Extensions in <i>Solaris Trusted Extensions User&rsquo;s Guide</i></a>.</p></li>
<li><b>When prompted, eject and remove the media.</b></li></ol><a name="managedev-28"></a>Example&nbsp;4-8 Loading Audit Configuration Files in Trusted Extensions<p>In this example, roles are not yet configured on the system. The <tt>root</tt>
user needs to copy configuration files to portable media. The contents of the
media will then  be copied to other systems. These files are to
be copied to each system that is configured with Trusted Extensions software.</p><p>The <tt>root</tt> user allocates the <tt>floppy_0</tt> device in the Device Allocation Manager and
responds <tt>yes</tt> to the mount query. Then, the <tt>root</tt> user inserts the diskette
with the configuration files and copies them to the disk. The diskette is
labeled <tt>Trusted Path</tt>.</p><p>To read from the media, the <tt>root</tt> user allocates the device on the
receiving host, then downloads the contents.</p><p><a name="indexterm-220"></a><a name="indexterm-221"></a>If the configuration files are on a tape, the <tt>root</tt> user allocates the
<tt>mag_0</tt> device. If the configuration files are on a CD-ROM, the <tt>root</tt> user
allocates the <tt>cdrom_0</tt> device.</p>

<a name="txconf-72"></a><h4>How to Remove Trusted Extensions From the System</h4><a name="indexterm-222"></a><a name="indexterm-223"></a><a name="indexterm-224"></a><a name="indexterm-225"></a><a name="indexterm-226"></a><p>To remove Trusted Extensions from your Solaris system, you perform specific steps to
remove Trusted Extensions customizations to the Solaris system.</p><ol>
<li><b>As in the Solaris OS, archive any data in the labeled zones
that you want to keep.</b></li>
<li><b><a name="indexterm-227"></a><a name="indexterm-228"></a>Remove the labeled zones from the system.</b><p>For details, see <a href="http://docs.sun.com/doc/819-2450/z.inst.task-44?a=view">How to Remove a Non-Global Zone in <i>System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</i></a>.</p></li>
<li><b>Remove the Trusted Extensions packages from the system.</b><ul>
<li><b>If you added the Trusted Extensions packages by using the install wizard, use
the uninstall wizard.</b><p>The wizard can be found in the <tt>/var/sadm/tx</tt> directory.</p><pre># <tt><b>cd /var/sadm/tx</b></tt>
# <tt><b>java uninstall_Solaris_Trusted_Extensions</b></tt></pre><p>You can also use the <tt>prodreg</tt> command. For details, see  <a href="http://docs.sun.com/doc/819-2240/prodreg-1m?a=view"><tt>prodreg</tt>(1M)</a> command.</p></li>
<li><b>If you added the Trusted Extensions packages by using the <tt>pkgadd</tt> command,
use the <tt>pkgrm</tt> command.</b><p>For details, see the <a href="http://docs.sun.com/doc/819-2240/pkgrm-1m?a=view"><tt>pkgrm</tt>(1M)</a> man page.</p></li></ul></li>
<li><b>Run the <tt>bsmunconv</tt> command.</b><p>For the effect of this command, see the <a href="http://docs.sun.com/doc/819-2240/bsmunconv-1m?a=view"><tt>bsmunconv</tt>(1M)</a> man page.</p></li>
<li>(Optional) <b>Reboot the system.</b></li>
<li><b>Configure the system.</b><p>Various services might need to be configured for your Solaris system. Candidates include
auditing, basic networking, naming services, and file system mounts.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-trouble-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txldap-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

