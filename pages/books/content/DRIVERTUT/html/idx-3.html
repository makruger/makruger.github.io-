<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title> - Device Driver Tutorial</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-12-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Device Driver Tutorial</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="idx-2.html">Previous</a>
             </td>
             <td align="right">
                 
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="drivertutp.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="drivertut1.html">1.&nbsp;&nbsp;Introduction to Device Drivers</a></p>
<p class="toc level1 tocsp"><a href="eoqrt.html">2.&nbsp;&nbsp;Template Driver Example</a></p>
<p class="toc level1 tocsp"><a href="faatl.html">3.&nbsp;&nbsp;Reading and Writing Data in Kernel Memory</a></p>
<p class="toc level1 tocsp"><a href="eoqrv.html">4.&nbsp;&nbsp;Tips for Developing Device Drivers</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             <h4>L</h4>
<div class="indexdiv">
<dl>
<dd><tt>ld</tt> command<dl>
<dd><a href="emjjp.html#indexterm-11">Structural Differences Between Kernel Modules and User Programs</a></dd>
<dd><a href="frymm.html#indexterm-130">Compiling with Sun Studio</a></dd>
<dd><a href="writedriver.html#indexterm-200">Defining the Module Unload Entry Point</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd>linking<dl>
<dd><a href="emjjp.html#indexterm-9">Structural Differences Between Kernel Modules and User Programs</a></dd>
<dd><a href="frymm.html#indexterm-123">Building a Driver</a></dd>
<dd><a href="writedriver.html#indexterm-198">Defining the Module Unload Entry Point</a></dd>
</dl>
</dd>
</dl>
</div><h4>M</h4>
<div class="indexdiv">
<dl>
<dd>major number<dl>
<dd><a href="fgomr.html#indexterm-66">Devices Directories</a></dd>
<dd><a href="fgomr.html#indexterm-98">Device Numbers</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>mdb</tt> modular debugger, <a href="fdlbo.html#indexterm-585">Device Driver Debugging and Tuning Tips</a></dd>
</dl>
<dl>
<dd><tt>memcpy()</tt> kernel function, <a href="ffdqq.html#indexterm-523">Reporting and Setting Device Size and Re-initializing the Device</a></dd>
</dl>
<dl>
<dd>metadevice, <a href="fgomr.html#indexterm-88">Character and Block Devices</a></dd>
</dl>
<dl>
<dd>minor number<dl>
<dd><a href="fgomr.html#indexterm-67">Devices Directories</a></dd>
<dd><a href="fgomr.html#indexterm-99">Device Numbers</a></dd>
<dd><a href="writedriver.html#indexterm-232">Defining the Device Attach Entry Point</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>mknod</tt> command, <a href="fgomr.html#indexterm-62">Devices Directories</a></dd>
</dl>
<dl>
<dd><tt>mknod()</tt> system call, <a href="fgomr.html#indexterm-63">Devices Directories</a></dd>
</dl>
<dl>
<dd><tt>mmap()</tt> system call, <a href="emjjp.html#indexterm-21">User and Kernel Address Spaces on x86 and SPARC Machines</a></dd>
</dl>
<dl>
<dd><tt>mod_info()</tt> kernel function<dl>
<dd><a href="writedriver.html#indexterm-176">Writing the Loadable Module Configuration Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-190">Defining the Module Information Entry Point</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>mod_install()</tt> kernel function<dl>
<dd><a href="writedriver.html#indexterm-174">Writing the Loadable Module Configuration Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-182">Defining the Module Initialization Entry Point</a></dd>
<dd><a href="dataondemand.html#indexterm-360">Initializing and Unloading</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>mod_remove()</tt> kernel function<dl>
<dd><a href="writedriver.html#indexterm-178">Writing the Loadable Module Configuration Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-196">Defining the Module Unload Entry Point</a></dd>
<dd><a href="dataondemand.html#indexterm-366">Initializing and Unloading</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>moddir</tt> kernel variable, <a href="emjjp.html#indexterm-46">Driver Directory Organization</a></dd>
</dl>
<dl>
<dd><tt>modinfo</tt> command<dl>
<dd><a href="frymm.html#indexterm-146">Adding, Updating, and Removing a Driver</a></dd>
<dd><a href="eoxzu.html#indexterm-315">Adding the Template Driver</a></dd>
<dd><a href="dataondemand.html#indexterm-413">Building, Installing, and Using Quote Of The Day Version&nbsp;2</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>modinfo</tt> driver structure, <a href="writedriver.html#indexterm-192">Defining the Module Information Entry Point</a></dd>
</dl>
<dl>
<dd><tt>modldrv</tt> driver structure<dl>
<dd><a href="writedriver.html#indexterm-279">Writing the Driver Data Structures</a></dd>
<dd><a href="writedriver.html#indexterm-298">Defining the Module Linkage Structures</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>modlinkage</tt> driver structure<dl>
<dd><a href="writedriver.html#indexterm-184">Defining the Module Initialization Entry Point</a></dd>
<dd><a href="writedriver.html#indexterm-281">Writing the Driver Data Structures</a></dd>
<dd><a href="writedriver.html#indexterm-300">Defining the Module Linkage Structures</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>modload</tt> command, <a href="eoxzu.html#indexterm-321">Adding the Template Driver</a></dd>
</dl>
<dl>
<dd><tt>modunload</tt> command, <a href="eoxzu.html#indexterm-333">Removing the Template Driver</a></dd>
</dl>
<dl>
<dd><tt>more</tt> command, <a href="dataondemand.html#indexterm-421">Building, Installing, and Using Quote Of The Day Version&nbsp;2</a></dd>
</dl>
<dl>
<dd><tt>mutex_destroy()</tt> kernel function<dl>
<dd><a href="ffdqq.html#indexterm-443">Checking for Changes, Cleaning Up, and Detaching</a></dd>
<dd><a href="ffdqq.html#indexterm-480">Managing Thread Synchronization</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>mutex_init()</tt> kernel function<dl>
<dd><a href="ffdqq.html#indexterm-435">Attaching, Allocating Memory, and Initializing a Mutex and a Condition Variable</a></dd>
<dd><a href="ffdqq.html#indexterm-478">Managing Thread Synchronization</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>mutex()</tt> kernel function, <a href="ffdqq.html#indexterm-472">Managing Thread Synchronization</a></dd>
</dl>
<dl>
<dd><tt>mutex_owned()</tt> kernel function, <a href="fdlbn.html#indexterm-550">Device Driver Coding Tips</a></dd>
</dl>
<dl>
<dd>mutexes, <a href="ffdqq.html#indexterm-461">Managing Thread Synchronization</a><dl>
<dd>avoiding problems, <a href="fdlbn.html#indexterm-555">Device Driver Coding Tips</a></dd>
</dl>
</dd>
</dl>
</div><h4>N</h4>
<div class="indexdiv">
<dl>
<dd>naming, unique prefix for driver symbols, <a href="fdlbn.html#indexterm-539">Device Driver Coding Tips</a></dd>
</dl>
<dl>
<dd>naming conventions, <a href="fdlbn.html#indexterm-537">Device Driver Coding Tips</a></dd>
</dl>
<dl>
<dd>nexus device, <a href="fgomr.html#indexterm-73">Device Tree</a></dd>
</dl>
<dl>
<dd><tt>nochpoll()</tt> kernel function, <a href="writedriver.html#indexterm-288">Defining the Character and Block Operations Structure</a></dd>
</dl>
<dl>
<dd><tt>nodev()</tt> kernel function<dl>
<dd><a href="writedriver.html#indexterm-286">Defining the Character and Block Operations Structure</a></dd>
<dd><a href="writedriver.html#indexterm-295">Defining the Device Operations Structure</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>nulldev()</tt> kernel function<dl>
<dd><a href="writedriver.html#indexterm-259">Writing the User Context Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-293">Defining the Device Operations Structure</a></dd>
</dl>
</dd>
</dl>
</div><h4>O</h4>
<div class="indexdiv">
<dl>
<dd><tt>open()</tt> entry point<dl>
<dd><a href="writedriver.html#indexterm-258">Writing the User Context Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-268">Defining the Open Device Entry Point</a></dd>
<dd><a href="dataondemand.html#indexterm-388">Opening the Device, Closing the Device, and Getting Module Information</a></dd>
</dl>
</dd>
</dl>
</div><h4>P</h4>
<div class="indexdiv">
<dl>
<dd>PCI ID numbers, <a href="frymm.html#indexterm-150">Adding, Updating, and Removing a Driver</a></dd>
</dl>
<dl>
<dd>power management, <a href="fdlbn.html#indexterm-558">Device Driver Coding Tips</a></dd>
</dl>
<dl>
<dd>prefix, unique prefix for driver symbols, <a href="fdlbn.html#indexterm-540">Device Driver Coding Tips</a></dd>
</dl>
<dl>
<dd>prefixes<dl>
<dd><a href="frymm.html#indexterm-104">Writing a Driver Module</a></dd>
<dd><a href="writedriver.html#indexterm-218">Declaring the Autoconfiguration Entry Points</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>printf()</tt> function, <a href="fdlbn.html#indexterm-545">Device Driver Coding Tips</a></dd>
</dl>
<dl>
<dd><tt>prop_op()</tt> entry point<dl>
<dd><a href="writedriver.html#indexterm-215">Writing the Autoconfiguration Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-253">Defining the Report Driver Property Information Entry Point</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd>protected mode, <a href="fcaof.html#indexterm-3">Solaris Operating System Definition</a></dd>
</dl>
<dl>
<dd><tt>prtconf</tt> command<dl>
<dd><a href="fgomr.html#indexterm-60">Devices Directories</a></dd>
<dd><a href="fgomr.html#indexterm-75">Device Tree</a></dd>
<dd><a href="frymm.html#indexterm-125">Building a Driver</a></dd>
<dd><a href="frymm.html#indexterm-155">Adding, Updating, and Removing a Driver</a></dd>
<dd><a href="eoxzu.html#indexterm-319">Adding the Template Driver</a></dd>
<dd><a href="dataondemand.html#indexterm-417">Building, Installing, and Using Quote Of The Day Version&nbsp;2</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>prtpicl</tt> command, <a href="fgomr.html#indexterm-77">Device Tree</a></dd>
</dl>
</div><h4>Q</h4>
<div class="indexdiv">
<dl>
<dd><tt>QOTD_BUSY</tt> condition<dl>
<dd><a href="ffdqq.html#indexterm-465">Managing Thread Synchronization</a></dd>
<dd><a href="ffdqq.html#indexterm-471">Managing Thread Synchronization</a></dd>
</dl>
</dd>
</dl>
</div><h4>R</h4>
<div class="indexdiv">
<dl>
<dd><tt>raw</tt> device, <a href="fgomr.html#indexterm-86">Character and Block Devices</a></dd>
</dl>
<dl>
<dd><tt>read()</tt> entry point<dl>
<dd><a href="writedriver.html#indexterm-264">Writing the User Context Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-272">Defining the Read Device Entry Point</a></dd>
<dd><a href="dataondemand.html#indexterm-398">Reading the Data</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>read()</tt> system call, <a href="fgomr.html#indexterm-52">Devices as Files</a></dd>
</dl>
<dl>
<dd><tt>rem_drv</tt> command<dl>
<dd><a href="frymm.html#indexterm-158">Adding, Updating, and Removing a Driver</a></dd>
<dd><a href="frymm.html#indexterm-162">Loading and Unloading a Driver</a></dd>
<dd><a href="eoxzu.html#indexterm-330">Removing the Template Driver</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd>restricted mode, <a href="fcaof.html#indexterm-5">Solaris Operating System Definition</a></dd>
</dl>
</div><h4>S</h4>
<div class="indexdiv">
<dl>
<dd>serial connections, use in testing, <a href="fdlbq.html#indexterm-572">Device Driver Testing Tips</a></dd>
</dl>
<dl>
<dd><tt>signal()</tt> function<dl>
<dd><a href="ffdqq.html#indexterm-488">Managing Thread Synchronization</a></dd>
<dd><a href="ffdqq.html#indexterm-505">Writing New Data</a></dd>
<dd><a href="ffdqq.html#indexterm-521">Reporting and Setting Device Size and Re-initializing the Device</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>snooping</tt> kernel variable, <a href="fdlbq.html#indexterm-570">Device Driver Testing Tips</a></dd>
</dl>
<dl>
<dd>soft state, <a href="dataondemand.html#indexterm-344">Managing Device State</a></dd>
</dl>
<dl>
<dd>SPARC<dl>
<dd>address space, <a href="emjjp.html#indexterm-13">User and Kernel Address Spaces on x86 and SPARC Machines</a></dd>
<dd>compiling, <a href="frymm.html#indexterm-120">Building a Driver</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd>special files, <a href="fgomr.html#indexterm-48">Devices as Files</a></dd>
</dl>
<dl>
<dd>state structures<dl>
<dd><a href="dataondemand.html#indexterm-340">Writing Quote Of The Day Version 2</a></dd>
<dd><a href="dataondemand.html#indexterm-343">Managing Device State</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>strlcpy()</tt> kernel function<dl>
<dd><a href="ffdqq.html#indexterm-439">Attaching, Allocating Memory, and Initializing a Mutex and a Condition Variable</a></dd>
<dd><a href="ffdqq.html#indexterm-527">Reporting and Setting Device Size and Re-initializing the Device</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>strncpy()</tt> kernel function, <a href="ffdqq.html#indexterm-441">Attaching, Allocating Memory, and Initializing a Mutex and a Condition Variable</a></dd>
</dl>
<dl>
<dd>Sun Studio, <a href="frymm.html#indexterm-126">Compiling with Sun Studio</a></dd>
</dl>
<dl>
<dd><tt>syslogd</tt> command<dl>
<dd><a href="eoxzu.html#indexterm-307">Testing the Template Driver</a></dd>
<dd><a href="fahrt.html#indexterm-339">Building, Installing, and Using Quote Of The Day Version&nbsp;1</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd>system calls<dl>
<dd><tt>mknod()</tt>, <a href="fgomr.html#indexterm-64">Devices Directories</a></dd>
<dd><tt>mmap()</tt>, <a href="emjjp.html#indexterm-22">User and Kernel Address Spaces on x86 and SPARC Machines</a></dd>
<dd><tt>read()</tt>, <a href="fgomr.html#indexterm-53">Devices as Files</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>system</tt> configuration information file, <a href="emjjp.html#indexterm-40">Driver Directory Organization</a></dd>
</dl>
<dl>
<dd>system crash dumps, use in testing, <a href="fdlbq.html#indexterm-577">Device Driver Testing Tips</a></dd>
</dl>
</div><h4>T</h4>
<div class="indexdiv">
<dl>
<dd>testing device drivers, <a href="fdlbq.html#indexterm-561">Device Driver Testing Tips</a></dd>
</dl>
<dl>
<dd>thread synchronization, <a href="ffdqq.html#indexterm-459">Managing Thread Synchronization</a></dd>
</dl>
<dl>
<dd>tuning device drivers, tips, <a href="fdlbo.html#indexterm-583">Device Driver Debugging and Tuning Tips</a></dd>
</dl>
</div><h4>U</h4>
<div class="indexdiv">
<dl>
<dd><tt>uio</tt> kernel structure<dl>
<dd><a href="dataondemand.html#indexterm-406">Reading the Data</a></dd>
<dd><a href="ffdqq.html#indexterm-503">Writing New Data</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>uiomove()</tt> kernel function<dl>
<dd><a href="dataondemand.html#indexterm-404">Reading the Data</a></dd>
<dd><a href="ffdqq.html#indexterm-424">Writing Quote Of The Day Version 3</a></dd>
<dd><a href="ffdqq.html#indexterm-466">Managing Thread Synchronization</a></dd>
<dd><a href="ffdqq.html#indexterm-507">Writing New Data</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>update_drv</tt> command, <a href="frymm.html#indexterm-153">Adding, Updating, and Removing a Driver</a></dd>
</dl>
<dl>
<dd>user mode, <a href="fcaof.html#indexterm-4">Solaris Operating System Definition</a></dd>
</dl>
<dl>
<dd><tt>/usr/kernel</tt> directory<dl>
<dd><a href="emjjp.html#indexterm-41">Driver Directory Organization</a></dd>
<dd><a href="emjjp.html#indexterm-45">Driver Directory Organization</a></dd>
</dl>
</dd>
</dl>
</div><h4>V</h4>
<div class="indexdiv">
<dl>
<dd><tt>/var/adm/messages</tt> file<dl>
<dd><a href="eoxzu.html#indexterm-305">Testing the Template Driver</a></dd>
<dd><a href="fahrt.html#indexterm-337">Building, Installing, and Using Quote Of The Day Version&nbsp;1</a></dd>
</dl>
</dd>
</dl>
<dl>
<dd><tt>volatile</tt> keyword, <a href="fdlbn.html#indexterm-559">Device Driver Coding Tips</a></dd>
</dl>
</div><h4>W</h4>
<div class="indexdiv">
<dl>
<dd><tt>write()</tt> entry point<dl>
<dd><a href="writedriver.html#indexterm-266">Writing the User Context Entry Points</a></dd>
<dd><a href="writedriver.html#indexterm-274">Defining the Write Device Entry Point</a></dd>
<dd><a href="ffdqq.html#indexterm-500">Writing New Data</a></dd>
</dl>
</dd>
</dl>
</div><h4>X</h4>
<div class="indexdiv">
<dl>
<dd>x86<dl>
<dd>address space, <a href="emjjp.html#indexterm-12">User and Kernel Address Spaces on x86 and SPARC Machines</a></dd>
<dd>compiling, <a href="frymm.html#indexterm-121">Building a Driver</a></dd>
</dl>
</dd>
</dl>
</div>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="idx-2.html">Previous</a>
             </td>
             <td align="right">
                 
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

