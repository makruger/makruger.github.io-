<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>NFS Module Parameters - Solaris Tunable Parameters Reference Manual</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Tunable Parameters Reference Manual</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter3-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter3-22.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chapter1-1.html">1.&nbsp;&nbsp;Overview of Solaris System Tuning</a></p>
<p class="toc level1 tocsp"><a href="chapter2-1.html">2.&nbsp;&nbsp;Solaris Kernel Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter3-1.html">3.&nbsp;&nbsp;NFS Tunable Parameters</a></p>
<p class="toc level2"><a href="chapter3-23.html">Where to Find Tunable Parameter Information</a></p>
<p class="toc level2"><a href="chapter3-2.html">Tuning the NFS Environment</a></p>
<div class="onpage">
<p class="toc level2"><a href="">NFS Module Parameters</a></p>
</div>
<p class="toc level2"><a href="chapter3-22.html"><tt>nfssrv</tt> Module Parameters</a></p>
<p class="toc level2"><a href="chapter3-27.html"><tt>rpcmod</tt> Module Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter4-1.html">4.&nbsp;&nbsp;Internet Protocol Suite Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter5-1.html">5.&nbsp;&nbsp;Network Cache and Accelerator Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter6-1.html">6.&nbsp;&nbsp;System Facility Parameters</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Tunable Parameters Change History</a></p>
<p class="toc level1 tocsp"><a href="appendixb-1.html">B.&nbsp;&nbsp;Revision History for This Manual</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter3-3"></a><h3>NFS Module Parameters</h3>
<p>This section describes parameters related to the NFS kernel module.</p>

<a name="chapter3-42"></a><h4><tt>nfs:nfs3_pathconf_disable_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-76"></a>Controls the caching of <tt>pathconf</tt> information for NFS Version 3 mounted file systems.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (caching enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (caching enabled) or 1 (caching disabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>The <tt>pathconf</tt> information is cached on a per file basis. However, if the server can change the information for a specific file dynamically, use this parameter to disable caching. There is no mechanism for the client to validate its cache entry.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-32"></a><h4><tt>nfs:nfs4_pathconf_disable_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-77"></a>Controls the caching of <tt>pathconf</tt> information for NFS Version 4 mounted file systems.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (caching enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (caching enabled) or 1 (caching disabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>The <tt>pathconf</tt> information is cached on a per file basis. However, if the server can change the information for a specific file dynamically, use this parameter to disable caching. There is no mechanism for the client to validate its cache entry.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-31"></a><h4><tt>nfs:nfs_allow_preepoch_time</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls whether files with incorrect or <b>negative</b> time stamps should be made visible on the client.</p><p>Historically, neither the NFS client nor the NFS server would do any range checking on the file times being returned. The over-the-wire timestamp values are unsigned and 32-bits long. So, all values have been legal.</p><p>However, on a system running a 32-bit Solaris kernel, the timestamp values are signed and 32-bits long. Thus, it would be possible to have a timestamp representation that appeared to be prior to January 1, 1970, or <b>pre-epoch</b>.</p><p>The problem on a system running a 64-bit Solaris kernel is slightly different. The timestamp values on the 64-bit Solaris kernel are signed and 64-bits long. It is impossible to determine whether a time field represents a full 32-bit time or a negative time, that is, a time prior to January 1, 1970.</p><p><a name="indexterm-78"></a>It is impossible to determine whether to sign extend a time value when converting from 32 bits to 64 bits. The time value should be sign extended if the time value is truly a negative number. However, the time value should not be sign extended if it does truly represent a full 32-bit time value. This problem is resolved by simply disallowing full 32-bit time values.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (32-bit time stamps disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (32-bit time stamps disabled) or 1 (32-bit time stamps enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Even during normal operation, it is possible for the timestamp values on some files to be set very far in the future or very far in the past. If access to these files is preferred using NFS mounted file systems, set this parameter to 1 to allow the timestamp values to be passed through unchecked.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-4"></a><h4><tt>nfs:nfs_cots_timeo</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-79"></a>Controls the default RPC timeout for NFS version 2 mounted file systems using connection-oriented transports such as TCP for the transport protocol. </p></dd>
<dt>Data Type</dt>
<dd><p>Signed integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>600 (60 seconds)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>10th of seconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the RPC timeout for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>TCP does a good job ensuring requests and responses are delivered appropriately. However, if the round-trip times are very large in a particularly slow network, the NFS version 2 client might time out prematurely.</p><p>Increase this parameter to prevent the client from timing out incorrectly. The range of values is very large, so increasing this value too much might result in situations where a retransmission is not detected for long periods of time.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-5"></a><h4><tt>nfs:nfs3_cots_timeo</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-80"></a>Controls the default RPC timeout for NFS version 3 mounted file systems using connection-oriented transports such as TCP for the transport protocol. </p></dd>
<dt>Data Type</dt>
<dd><p>Signed integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>600 (60 seconds)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>10th of seconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the RPC timeout for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>TCP does a good job ensuring requests and responses are delivered appropriately. However, if the round-trip times are very large in a particularly slow network, the NFS version 3 client might time out prematurely.</p><p>Increase this parameter to prevent the client from timing out incorrectly. The range of values is very large, so increasing this value too much might result in situations where a retransmission is not detected for long periods of time.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-50"></a><h4><tt>nfs:nfs4_cots_timeo</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-81"></a>Controls the default RPC timeout for NFS version 4 mounted file systems using connection-oriented transports such as TCP for the transport protocol. </p><p>The NFS Version 4 protocol specification disallows retransmission over the same TCP connection. Thus, this parameter primarily controls how quickly the client responds to certain events, such as detecting a forced unmount operation or detecting how quickly the server fails over to a new server.</p></dd>
<dt>Data Type</dt>
<dd><p>Signed integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>600 (60 seconds)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>10th of seconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>TCP does a good job ensuring requests and responses are delivered appropriately. However, if the round-trip times are very large in a particularly slow network, the NFS version 4 client might time out prematurely.</p><p>Increase this parameter to prevent the client from timing out incorrectly. The range of values is very large, so increasing this value too much might result in situations where a retransmission is not detected for long periods of time.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-6"></a><h4><tt>nfs:nfs_do_symlink_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-82"></a>Controls whether the contents of symbolic link files are cached for NFS version 2 mounted file systems.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32&ndash;bit)</p></dd>
<dt>Default</dt>
<dd><p>1 (caching enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (caching disabled) or 1 (caching enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>If a server changes the contents of a symbolic link file without updating the modification timestamp on the file or if the granularity of the timestamp is too large, then changes to the contents of the symbolic link file might not be visible on the client for extended periods. In this case, use this parameter to disable the caching of symbolic link contents. Doing so makes the changes immediately visible to applications running on the client.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-7"></a><h4><tt>nfs:nfs3_do_symlink_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-83"></a>Controls whether the contents of symbolic link files are cached for NFS version 3 mounted file systems.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1 (caching enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (caching disabled) or 1 (caching enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>If a server changes the contents of a symbolic link file without updating the modification timestamp on the file or if the granularity of the timestamp is too large, then changes to the contents of the symbolic link file might not be visible on the client for extended periods. In this case, use this parameter to disable the caching of symbolic link contents. Doing so makes the changes immediately visible to applications running on the client.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-28"></a><h4><tt>nfs:nfs4_do_symlink_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-84"></a>Controls whether the contents of symbolic link files are cached for NFS version 4 mounted file systems.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1 (caching enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (caching disabled) or 1 (caching enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>If a server changes the contents of a symbolic link file without updating the modification timestamp on the file or if the granularity of the timestamp is too large, then changes to the contents of the symbolic link file might not be visible on the client for extended periods. In this case, use this parameter to disable the caching of symbolic link contents. Doing so makes the changes immediately visible to applications running on the client.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-8"></a><h4><tt>nfs:nfs_dynamic</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-85"></a>Controls whether a feature known as <b>dynamic retransmission</b> is enabled for NFS version 2 mounted file systems using connectionless transports such as UDP. This feature attempts to reduce retransmissions by monitoring server response times and then adjusting RPC timeouts and read- and write- transfer sizes.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this parameter.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-9"></a><h4><tt>nfs:nfs3_dynamic</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-86"></a>Controls whether a feature known as <b>dynamic retransmission</b> is enabled for NFS version 3 mounted file systems using connectionless transports such as UDP. This feature attempts to reduce retransmissions by monitoring server response times and then adjusting RPC timeouts and read- and write- transfer sizes.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this parameter.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-10"></a><h4><tt>nfs:nfs_lookup_neg_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-87"></a>Controls whether a negative name cache is used for NFS version 2 mounted file systems. This negative name cache records file names that were looked up, but not found. The cache is used to avoid over-the-network look-up requests made for file names that are already known to not exist.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>For the cache to perform correctly, negative entries must be strictly verified before they are used. This consistency mechanism is relaxed slightly for read-only mounted file systems. It is assumed that the file system on the server is not changing or is changing very slowly, and that it is okay for such changes to propagate slowly to the client. The consistency mechanism becomes the normal attribute cache mechanism in this case.</p><p>If file systems are mounted read-only on the client, but are expected to change on the server and these changes need to be seen immediately by the client, use this parameter to disable the negative cache.</p><p>If you disable the <tt>nfs:nfs_disable_rddir_cache</tt> parameter, you should probably also disable this parameter. For more information, see <a href="#chapter3-36"><tt>nfs:nfs_disable_rddir_cache</tt></a>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-11"></a><h4><tt>nfs:nfs3_lookup_neg_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-88"></a>Controls whether a negative name cache is used for NFS version 3 mounted file systems. This negative name cache records file names that were looked up, but were not found. The cache is used to avoid over-the-network look-up requests made for file names that are already known to not exist.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>For the cache to perform correctly, negative entries must be strictly verified before they are used. This consistency mechanism is relaxed slightly for read-only mounted file systems. It is assumed that the file system on the server is not changing or is changing very slowly, and that it is okay for such changes to propagate slowly to the client. The consistency mechanism becomes the normal attribute cache mechanism in this case. </p><p>If file systems are mounted read-only on the client, but are expected to change on the server and these changes need to be seen immediately by the client, use this parameter to disable the negative cache.</p><p>If you disable the <tt>nfs:nfs_disable_rddir_cache</tt> parameter, you should probably also disable this parameter. For more information, see <a href="#chapter3-36"><tt>nfs:nfs_disable_rddir_cache</tt></a>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-29"></a><h4><tt>nfs:nfs4_lookup_neg_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-89"></a>Controls whether a negative name cache is used for NFS version 4 mounted file systems. This negative name cache records file names that were looked up, but were not found. The cache is used to avoid over-the-network look-up requests made for file names that are already known to not exist.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>For the cache to perform correctly, negative entries must be strictly verified before they are used. This consistency mechanism is relaxed slightly for read-only mounted file systems. It is assumed that the file system on the server is not changing or is changing very slowly, and that it is okay for such changes to propagate slowly to the client. The consistency mechanism becomes the normal attribute cache mechanism in this case. </p><p>If file systems are mounted read-only on the client, but are expected to change on the server and these changes need to be seen immediately by the client, use this parameter to disable the negative cache.</p><p>If you disable the <tt>nfs:nfs_disable_rddir_cache</tt> parameter, you should probably also disable this parameter. For more information, see <a href="#chapter3-36"><tt>nfs:nfs_disable_rddir_cache</tt></a>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-12"></a><h4><tt>nfs:nfs_max_threads</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the number of kernel threads that perform asynchronous I/O for the NFS version 2 client. Because NFS is based on RPC and RPC is inherently synchronous, separate execution contexts are required to perform NFS operations that are asynchronous from the calling thread.</p><p><a name="indexterm-90"></a>The operations that can be executed asynchronously are read for read-ahead, readdir for readdir read-ahead, write for putpage and pageio operations, commit, and inactive for cleanup operations that the client performs when it stops using a file.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (16-bit)</p></dd>
<dt>Default</dt>
<dd><p>8</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>15</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Threads</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>To increase or reduce the number of simultaneous I/O operations that are outstanding at any given time. For example, for a very low bandwidth network, you might want to decrease this value so that the NFS client does not overload the network. Alternately, if the network is very high bandwidth, and the client and server have sufficient resources, you might want to increase this value. Doing so can more effectively utilize the available network bandwidth, and the client and server resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-13"></a><h4><tt>nfs:nfs3_max_threads</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the number of kernel threads that perform asynchronous I/O for the NFS version 3 client. Because NFS is based on RPC and RPC is inherently synchronous, separate execution contexts are required to perform NFS operations that are asynchronous from the calling thread.</p><p><a name="indexterm-91"></a>The operations that can be executed asynchronously are read for read-ahead, readdir for readdir read-ahead, write for putpage and pageio requests, and commit.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (16-bit)</p></dd>
<dt>Default</dt>
<dd><p>8</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>15</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Threads</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>To increase or reduce the number of simultaneous I/O operations that are outstanding at any given time. For example, for a very low bandwidth network, you might want to decrease this value so that the NFS client does not overload the network. Alternately, if the network is very high bandwidth, and the client and server have sufficient resources, you might want to increase this value. Doing so can more effectively utilize the available network bandwidth, and the client and server resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-33"></a><h4><tt>nfs:nfs4_max_threads</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the number of kernel threads that perform asynchronous I/O for the NFS version 4 client. Because NFS is based on RPC and RPC is inherently synchronous, separate execution contexts are required to perform NFS operations that are asynchronous from the calling thread.</p><p><a name="indexterm-92"></a>The operations that can be executed asynchronously are read for read-ahead, write-behind, directory read-ahead, and cleanup operations that the client performs when it stops using a file.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (16-bit)</p></dd>
<dt>Default</dt>
<dd><p>8</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>15</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Threads</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>To increase or reduce the number of simultaneous I/O operations that are outstanding at any given time. For example, for a very low bandwidth network, you might want to decrease this value so that the NFS client does not overload the network. Alternately, if the network is very high bandwidth, and the client and server have sufficient resources, you might want to increase this value. Doing so can more effectively utilize the available network bandwidth, and the client and server resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-15"></a><h4><tt>nfs:nfs_nra</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-93"></a>Controls the number of read-ahead operations that are queued by the NFS version 2 client when sequential access to a file is discovered. These read-ahead operations increase concurrency and read throughput. Each read-ahead request is generally for one logical block of file data.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>4</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Logical blocks. (See <a href="#chapter3-57"><tt>nfs:nfs_bsize</tt></a>.)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>To increase or reduce the number of read-ahead requests that are outstanding for a specific file at any given time. For example, for a very low bandwidth network or on a low memory client, you might want to decrease this value so that the NFS client does not overload the network or the system memory. Alternately, if the network is very high bandwidth, and the client and server have sufficient resources, you might want to increase this value. Doing so can more effectively utilize the available network bandwidth, and the client and server resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-16"></a><h4><tt>nfs:nfs3_nra</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-94"></a>Controls the number of read-ahead operations that are queued by the NFS version 3 client when sequential access to a file is discovered. These read-ahead operations increase concurrency and read throughput. Each read-ahead request is generally for one logical block of file data.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>4</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Logical blocks. (See <a href="#chapter3-35"><tt>nfs:nfs3_bsize</tt></a>.)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>To increase or reduce the number of read-ahead requests that are outstanding for a specific file at any given time. For example, for a very low bandwidth network or on a low memory client, you might want to decrease this value so that the NFS client does not overload the network or the system memory. Alternately, if the network is very high bandwidth and the client and server have sufficient resources, you might want to increase this value. Doing so can more effectively utilize the available network bandwidth, and the client and server resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-47.html#gdoef"><tt>nfs:nfs3_nra</tt> (Solaris 10)</a>.</p></dd>
</dl>


<a name="chapter3-14"></a><h4><tt>nfs:nfs4_nra</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-95"></a>Controls the number of read-ahead operations that are queued by the NFS version 4 client when sequential access to a file is discovered. These read-ahead operations increase concurrency and read throughput. Each read-ahead request is generally for one logical block of file data.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>4</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Logical blocks. (See <a href="#chapter3-37"><tt>nfs:nfs4_bsize</tt></a>.)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>To increase or reduce the number of read-ahead requests that are outstanding for a specific file at any given time. For example, for a very low bandwidth network or on a low memory client, you might want to decrease this value so that the NFS client does not overload the network or the system memory. Alternately, if the network is very high bandwidth, and the client and server have sufficient resources, you might want to increase this value. Doing so can more effectively utilize the available network bandwidth, and the client and server resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-17"></a><h4><tt>nfs:nrnode</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the size of the <tt>rnode</tt> cache on the NFS client.</p><p>The <tt>rnode</tt>, used by both NFS version 2, 3, and 4 clients, is the central data structure that describes a file on the NFS client. The <tt>rnode</tt> contains the file handle that identifies the file on the server. The <tt>rnode</tt> also contains pointers to various caches used by the NFS client to avoid network calls to the server. Each <tt>rnode</tt> has a one-to-one association with a <tt>vnode</tt>. The <tt>vnode</tt> caches file data.</p><p><a name="indexterm-96"></a>The NFS client attempts to maintain a minimum number of <tt>rnode</tt>s to attempt to avoid destroying cached data and metadata. When an <tt>rnode</tt> is reused or freed, the cached data and metadata must be destroyed.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>The default setting of this parameter is 0, which means that the value of <tt>nrnode</tt> should be set to the value of the <tt>ncsize</tt> parameter. Actually, any non positive value of <tt>nrnode</tt> results in <tt>nrnode</tt> being set to the value of <tt>ncsize</tt>.</p></dd>
<dt>Range</dt>
<dd><p>1 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p><tt>rnode</tt>s</p></dd>
<dt>Dynamic?</dt>
<dd><p>No. This value can only be changed by adding or changing the parameter in the <tt>/etc/system</tt> file, and then rebooting the system.</p></dd>
<dt>Validation</dt>
<dd><p>The system enforces a maximum value such that the <tt>rnode</tt> cache can only consume 25 percent of available memory.</p></dd>
<dt>When to Change</dt>
<dd><p>Because <tt>rnode</tt>s are created and destroyed dynamically, the system tends to settle upon a <i>nrnode</i>-size cache, automatically adjusting the size of the cache as memory pressure on the system increases or as more files are simultaneously accessed. However, in certain situations, you could set the value of <tt>nrnode</tt> if the mix of files being accessed can be predicted in advance. For example, if the NFS client is accessing a few very large files, you could set the value of <tt>nrnode</tt> to a small number so that system memory can cache file data instead of <tt>rnode</tt>s. Alternately, if the client is accessing many small files, you could increase the value of <tt>nrnode</tt> to optimize for storing file metadata to reduce the number of network calls for metadata.</p><p>Although it is not recommended, the <tt>rnode</tt> cache can be effectively disabled by setting the value of <tt>nrnode</tt> to 1. This value instructs the client to only cache 1 <tt>rnode</tt>, which means that it is reused frequently.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-47.html#appendixa-48"><tt>nfs:nrnode</tt> (Solaris 9 8/03)</a>.</p></dd>
</dl>


<a name="chapter3-18"></a><h4><tt>nfs:nfs_shrinkreaddir</tt></h4>
<dl><dt>Description</dt>
<dd><p>Some older NFS servers might incorrectly handle NFS version 2 <tt>READDIR</tt> requests for more than 1024 bytes of directory information. This problem is due to a bug in the server implementation. However, this parameter contains a workaround in the NFS version 2 client.</p><p><a name="indexterm-97"></a>When this parameter is enabled, the client does not generate a <tt>READDIR</tt> request for larger than 1024 bytes of directory information. If this parameter is disabled, then the over-the-wire size is set to the lesser of either the size passed in by using the <tt>getdents</tt> system call or by using <tt>NFS_MAXDATA</tt>, which is 8192 bytes. For more information, see <a href="http://docs.sun.com/doc/819-2241/getdents-2?a=view"><tt>getdents</tt>(2)</a>.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter if an older NFS version 2 only server is used and interoperability problems occur when the server tries to read directories. Enabling this parameter might cause a slight decrease in performance for applications that read directories.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-24"></a><h4><tt>nfs:nfs3_shrinkreaddir</tt></h4>
<dl><dt>Description</dt>
<dd><p>Some older NFS servers might incorrectly handle NFS version 3 <tt>READDIR</tt> requests for more than 1024 bytes of directory information. This problem is due to a bug in the server implementation. However, this parameter contains a workaround in the NFS version 3 client.</p><p><a name="indexterm-98"></a>When this parameter is enabled, the client does not generate a <tt>READDIR</tt> request for larger than 1024 bytes of directory information. If this parameter is disabled, then the over-the-wire size is set to the minimum of either the size passed in by using the <tt>getdents</tt> system call or by using <tt>MAXBSIZE</tt>, which is 8192 bytes. For more information, see <a href="http://docs.sun.com/doc/819-2241/getdents-2?a=view"><tt>getdents</tt>(2)</a>.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter if an older NFS version 3 only server is used and interoperability problems occur when the server tries to read directories. Enabling this parameter might cause a slight decrease in performance for applications that read directories.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-38"></a><h4><tt>nfs:nfs4_shrinkreaddir</tt></h4>
<dl><dt>Description</dt>
<dd><p>Some NFS servers might incorrectly handle NFS version 4 <tt>READDIR</tt> requests for more than 1024 bytes of directory information. This problem is due to a bug in the server implementation. However, this parameter contains a workaround in the NFS version 4 client.</p><p><a name="indexterm-99"></a>When this parameter is enabled, the client does not generate a <tt>READDIR</tt> request for larger than 1024 bytes of directory information. If this parameter is disabled, then the over-the-wire size is set to the lesser of either the size passed in by using the <tt>getdents</tt> system call or by using <tt>MAXBSIZE</tt>, which is 8192 bytes. For more information, see <a href="http://docs.sun.com/doc/819-2241/getdents-2?a=view"><tt>getdents</tt>(2)</a>.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter if an NFS version 4 only server is used and interoperability problems occur when the server tries to read directories. Enabling this parameter might cause a slight performance drop for applications that read directories.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-19"></a><h4><tt>nfs:nfs_write_error_interval</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-100"></a>Controls the time duration in between logging <tt>ENOSPC</tt> and <tt>EDQUOT</tt> write errors received by the NFS client. This parameter affects NFS version 2, 3, and 4 clients.</p></dd>
<dt>Data Type</dt>
<dd><p>Long integer (32 bits on 32-bit platforms and 64 bits on 64-bit platforms)</p></dd>
<dt>Default</dt>
<dd><p>5 seconds</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1 on 32-bit platforms</p><p>0 to 2<sup>63</sup> - 1 on 64-bit platforms</p></dd>
<dt>Units</dt>
<dd><p>Seconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Increase or decrease the value of this parameter in response to the volume of messages being logged by the client. Typically, you might want to increase the value of this parameter to decrease the number of <tt>out of space</tt> messages being printed when a full file system on a server is being actively used.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-47.html#appendixa-50"><tt>nfs:nfs_write_error_interval</tt> (Solaris 9 8/03)</a>.</p></dd>
</dl>


<a name="chapter3-20"></a><h4><tt>nfs:nfs_write_error_to_cons_only</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-101"></a>Controls whether NFS write errors are logged to the system console and <tt>syslog</tt> or to the system console only. This parameter affects messages for NFS version 2, 3, and 4 clients.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (system console and <tt>syslog</tt>)</p></dd>
<dt>Range</dt>
<dd><p>0 (system console and <tt>syslog</tt>) or 1 (system console)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter to avoid filling up the file system containing the messages logged by the <tt>syslogd</tt> daemon. When this parameter is enabled, messages are printed on the system console only and are not copied to the <tt>syslog</tt> messages file.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-47.html#appendixa-51"><tt>nfs:nfs_write_error_to_cons_only</tt> (Solaris 9 8/03)</a>.</p></dd>
</dl>


<a name="chapter3-36"></a><h4><tt>nfs:nfs_disable_rddir_cache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-102"></a>Controls the use of a cache to hold responses from <tt>READDIR</tt> and <tt>READDIRPLUS</tt> requests. This cache avoids over-the-wire calls to the server to retrieve directory information.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>0 (caching enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (caching enabled) or 1 (caching disabled)</p></dd>
<dt>Units</dt>
<dd><p>Boolean values</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter if interoperability problems develop due to a server that does not update the modification time on a directory  when a file or directory is created in it or removed from it. The symptoms are that new names do not appear in directory listings after they have been added to the directory or that old names do not disappear after they have been removed from the directory.</p><p>This parameter controls the caching for NFS version 2, 3, and 4 mounted file systems. This parameter applies to all NFS mounted file systems, so caching cannot be disabled or enabled on a per file system basis.</p><p>If you disable this parameter, you should also disable the following parameters to to prevent bad entries in the DNLC negative cache:</p>
<ul><li><p><a href="#chapter3-10"><tt>nfs:nfs_lookup_neg_cache</tt></a></p></li>
<li><p><a href="#chapter3-11"><tt>nfs:nfs3_lookup_neg_cache</tt></a></p></li>
<li><p><a href="#chapter3-29"><tt>nfs:nfs4_lookup_neg_cache</tt></a></p></li></ul>
</dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-47.html#appendixa-52"><tt>nfs:nfs_disable_rddir_cache</tt> (Solaris 9 8/03)</a>.</p></dd>
</dl>


<a name="chapter3-57"></a><h4><tt>nfs:nfs_bsize</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-103"></a>Controls the logical block size used by the NFS version 2 client. This block size represents the amount of data that the client attempts to read from or write to the server when it needs to do an I/O.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>8192 bytes</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the block size for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. Setting this parameter too low or too high might cause the system to malfunction. Do not set this parameter to anything less than <tt>PAGESIZE</tt> for the specific platform. Do not set this parameter too high because it might cause the system to hang while waiting for memory allocations to be granted.</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this parameter.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-35"></a><h4><tt>nfs:nfs3_bsize</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-104"></a>Controls the logical block size used by the NFS version 3 client. This block size represents the amount of data that the client attempts to read from or write to the server when it needs to do an I/O.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>32,768 (32 Kbytes)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the block size for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. Setting this parameter too low or too high might cause the system to malfunction. Do not set this parameter to anything less than <tt>PAGESIZE</tt> for the specific platform. Do not set this parameter too high because it might cause the system to hang while waiting for memory allocations to be granted.</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter when attempting to change the maximum data transfer size. Change this parameter in conjunction with the <tt>nfs:nfs3_max_transfer_size</tt> parameter. If larger transfers are preferred, increase both parameters. If smaller transfers are preferred, then just reducing this parameter should suffice.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-37"></a><h4><tt>nfs:nfs4_bsize</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-105"></a>Controls the logical block size used by the NFS version 4 client. This block size represents the amount of data that the client attempts to read from or write to the server when it needs to do an I/O.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>32,768 (32 Kbytes)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the block size for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. Setting this parameter too low or too high might cause the system to malfunction. Do not set this parameter to anything less than <tt>PAGESIZE</tt> for the specific platform. Do not set this parameter too high because it might cause the system to hang while waiting for memory allocations to be granted.</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter when attempting to change the maximum data transfer size. Change this parameter in conjunction with the <tt>nfs:nfs4_max_transfer_size</tt> parameter. If larger transfers are preferred, increase both parameters. If smaller transfers are preferred, then just reducing this parameter should suffice.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-51"></a><h4><tt>nfs:nfs_async_clusters</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the mix of asynchronous requests that are generated by the NFS version 2 client. The four types of asynchronous requests are read-ahead, putpage, pageio, and readdir-ahead. The client attempts to round-robin between these different request types to attempt to be fair and not starve one request type in favor of another.</p><p>However, the functionality in some NFS version 2 servers such as write gathering depends upon certain behaviors of existing NFS Version 2 clients. In particular, this functionality depends upon the client sending out multiple WRITE requests at about the same time. If one request is taken out of the queue at a time, the client would be defeating this server functionality designed to enhance performance for the client.</p><p><a name="indexterm-106"></a>Thus, use this parameter to control the number of requests of each request type that are sent out before changing types.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Asynchronous requests</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the cluster setting for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting the value of this parameter to 0 causes all of the queued requests of a particular request type to be processed before moving on to the next type. This effectively disables the fairness portion of the algorithm.</p></dd>
<dt>When to Change</dt>
<dd><p>To increase the number of each type of asynchronous request that is generated before switching to the next type. Doing so might help with server functionality that depends upon clusters of requests coming from the client.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-52"></a><h4><tt>nfs:nfs3_async_clusters</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the mix of asynchronous requests that are generated by the NFS version 3 client. The five types of asynchronous requests are read-ahead, putpage, pageio, readdir-ahead, and commit. The client attempts to round-robin between these different request types to attempt to be fair and not starve one request type in favor of another.</p><p>However, the functionality in some NFS version 3 servers such as write gathering depends upon certain behaviors of existing NFS version 3 clients. In particular, this functionality depends upon the client sending out multiple WRITE requests at about the same time. If one request is taken out of the queue at a time, the client would be defeating this server functionality designed to enhance performance for the client.</p><p><a name="indexterm-107"></a>Thus, use this parameter to control the number of requests of each request type that are sent out before changing types.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Asynchronous requests</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the cluster setting for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting the value of this parameter to 0 causes all of the queued requests of a particular request type to be processed before moving on to the next type. This value effectively disables the fairness portion of the algorithm.</p></dd>
<dt>When to Change</dt>
<dd><p>To increase the number of each type of asynchronous operation that is generated before switching to the next type. Doing so might help with server functionality that depends upon clusters of operations coming from the client.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-55"></a><h4><tt>nfs:nfs4_async_clusters</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the mix of asynchronous requests that are generated by the NFS version 4 client. The six types of asynchronous requests are read-ahead, putpage, pageio, readdir-ahead, commit, and inactive. The client attempts to round-robin between these different request types to attempt to be fair and not starve one request type in favor of another.</p><p>However, the functionality in some NFS version 4 servers such as write gathering depends upon certain behaviors of existing NFS version 4 clients. In particular, this functionality depends upon the client sending out multiple WRITE requests at about the same time. If one request is taken out of the queue at a time, the client would be defeating this server functionality designed to enhance performance for the client.</p><p><a name="indexterm-108"></a>Thus, use this parameter to control the number of requests of each request type that are sent out before changing types.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Asynchronous requests</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the cluster setting for a file system is set when the file system is mounted. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting the value of this parameter to 0 causes all of the queued requests of a particular request type to be processed before moving on to the next type. This effectively disables the fairness portion of the algorithm.</p></dd>
<dt>When to Change</dt>
<dd><p>To increase the number of each type of asynchronous request that is generated before switching to the next type. Doing so might help with server functionality that depends upon clusters of requests coming from the client.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-53"></a><h4><tt>nfs:nfs_async_timeout</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-109"></a>Controls the duration of time that threads, which execute asynchronous I/O requests, sleep with nothing to do before exiting. When there are no more requests to execute, each thread goes to sleep. If no new requests come in before this timer expires, the thread wakes up and exits. If a request does arrive, a thread is woken up to execute requests until there are none again. Then, the thread goes back to sleep waiting for another request to arrive, or for the timer to expire.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>6000 (1 minute expressed as 60 sec * 100Hz)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Hz. (Typically, the clock runs at 100Hz.)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting this parameter to a non positive value causes these threads exit as soon as there are no requests in the queue for them to process.</p></dd>
<dt>When to Change</dt>
<dd><p>If the behavior of applications in the system is known precisely and the rate of asynchronous I/O requests can be predicted, it might be possible to tune this parameter to optimize performance slightly in either of the following ways:</p>
<ul><li><p>By making the threads expire more quickly, thus freeing up kernel resources more quickly</p></li>
<li><p>By making the threads expire more slowly, thus avoiding thread create and destroy overhead</p></li></ul>
</dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-54"></a><h4><tt>nfs:nacache</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-110"></a>Tunes the number of hash queues that access the file access cache on the NFS client. The file access cache stores file access rights that users have with respect to files that they are trying to access. The cache itself is dynamically allocated. However, the hash queues used to index into the cache are statically allocated. The algorithm assumes that there is one access cache entry per active file and four of these access cache entries per hash bucket. Thus, by default, the value of this parameter is set to the value of the <tt>nrnode</tt> parameter.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>The default setting of this parameter is 0. This value means that the value of <tt>nacache</tt> should be set to the value of the <tt>nrnode</tt> parameter.</p></dd>
<dt>Range</dt>
<dd><p>1 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Access cache entries</p></dd>
<dt>Dynamic?</dt>
<dd><p>No. This value can only be changed by adding or changing the parameter in the <tt>/etc/system</tt> file, and then rebooting system.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting this parameter to a negative value will probably cause the system to try to allocate a very large set of hash queues. While trying to do so, the system is likely to hang.</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter if the basic assumption of one access cache entry per file would be violated. This violation could occur for systems in a timesharing mode where multiple users are accessing the same file at about the same time. In this case, it might be helpful to increase the expected size of the access cache so that the hashed access to the cache stays efficient.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-48"></a><h4><tt>nfs:nfs3_jukebox_delay</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-111"></a>Controls the duration of time that the NFS version 3 client waits to transmit a new request after receiving the <tt>NFS3ERR_JUKEBOX</tt> error from a previous request. The <tt>NFS3ERR_JUKEBOX</tt> error is generally returned from the server when the file is temporarily unavailable for some reason. This error is generally associated with hierarchical storage, and CD or tape jukeboxes.</p></dd>
<dt>Data Type</dt>
<dd><p>Long integer (32 bits on 32-bit platforms and 64 bits on 64-bit platforms)</p></dd>
<dt>Default</dt>
<dd><p>1000 (10 seconds expressed as 10 sec * 100Hz)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1 on 32-bit platforms</p><p>0 to 2<sup>63</sup> - 1 on 64-bit platforms</p></dd>
<dt>Units</dt>
<dd><p>Hz. (Typically, the clock runs at 100Hz.)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter and perhaps adjust it to match the behaviors exhibited by the server. Increase this value if the delays in making the file available are long in order to reduce network overhead due to repeated retransmissions. Decrease this value to reduce the delay in discovering that the file has become available.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-49"></a><h4><tt>nfs:nfs3_max_transfer_size</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-112"></a>Controls the maximum size of the data portion of an NFS version 3 <tt>READ</tt>, <tt>WRITE</tt>, <tt>READDIR</tt>, or <tt>READDIRPLUS</tt> request. This parameter controls both the maximum size of the request that the server returns as well as the maximum size of the request that the client generates.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1,048,576 (1 Mbyte)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting the maximum transfer size on the server to 0 is likely to cause clients to malfunction or just decide not to attempt to talk to the server.</p><p>There is also a limit on the maximum transfer size when using NFS over the UDP transport. UDP has a hard limit of 64 Kbytes per datagram. This 64 Kbytes must include the RPC header as well as other NFS information, in addition to the data portion of the request. Setting the limit too high might result in errors from UDP and communication problems between the client and the server.</p></dd>
<dt>When to Change</dt>
<dd><p>To tune the size of data transmitted over the network. In general, the <tt>nfs:nfs3_bsize</tt> parameter should also be updated to reflect changes in this parameter. </p><p>For example, when you attempt to increase the transfer size beyond 32 Kbytes, update <tt>nfs:nfs3_bsize</tt> to reflect the increased value. Otherwise, no change in the over-the-wire request size is observed. For more information, see <a href="#chapter3-35"><tt>nfs:nfs3_bsize</tt></a>.</p><p>If you want to use a smaller transfer size than the default transfer size, use the <tt>mount</tt> command's <tt>-wsize</tt> or <tt>-rsize</tt> option on a per-file system basis.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-47.html#appendixa-53"><tt>nfs:nfs3_max_transfer_size</tt> (Solaris 9 8/03)</a>.</p></dd>
</dl>


<a name="chapter3-73"></a><h4><tt>nfs:nfs4_max_transfer_size</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-113"></a>Controls the maximum size of the data portion of an NFS version 4 <tt>READ</tt>, <tt>WRITE</tt>, <tt>READDIR</tt>, or <tt>READDIRPLUS</tt> request. This parameter controls both the maximum size of the request that the server returns as well as the maximum size of the request that the client generates.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>32, 768 (32 Kbytes)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting the maximum transfer size on the server to 0 is likely to cause clients to malfunction or just decide not to attempt to talk to the server.</p><p>There is also a limit on the maximum transfer size when using NFS over the UDP transport. For more information on the maximum for UDP, see <a href="#chapter3-49"><tt>nfs:nfs3_max_transfer_size</tt></a>.</p></dd>
<dt>When to Change</dt>
<dd><p>To tune the size of data transmitted over the network. In general, the <tt>nfs:nfs4_bsize</tt> parameter should also be updated to reflect changes in this parameter.</p><p>For example, when you attempt to increase the transfer size beyond 32 Kbytes, update <tt>nfs:nfs4_bsize</tt> to reflect the increased value. Otherwise, no change in the over-the-wire request size is observed. For more information, see <a href="#chapter3-37"><tt>nfs:nfs4_bsize</tt></a>.</p><p>If you want to use a smaller transfer size than the default transfer size, use the <tt>mount</tt> command's <tt>-wsize</tt> or <tt>-rsize</tt> option on a per-file system basis.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-45"></a><h4><tt>nfs:nfs3_max_transfer_size_clts</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-114"></a>Controls the maximum size of the data portion of an NFS version 3 <tt>READ</tt>, <tt>WRITE</tt>, <tt>READDIR</tt>, or <tt>READDIRPLUS</tt> request over UDP. This parameter controls both the maximum size of the request that the server returns as well as the maximum size of the request that the client generates.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>32, 768 (32 Kbytes)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting the maximum transfer size on the server to 0 is likely to cause clients to malfunction or just decide not to attempt to talk to the server.</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this parameter.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-58"></a><h4><tt>nfs:nfs3_max_transfer_size_cots</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-115"></a>Controls the maximum size of the data portion of an NFS version 3 <tt>READ</tt>, <tt>WRITE</tt>, <tt>READDIR</tt>, or <tt>READDIRPLUS</tt> request over TCP. This parameter controls both the maximum size of the request that the server returns as well as the maximum size of the request that the client generates.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1048576 bytes</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but this parameter is set per file system at mount time. To affect a particular file system, unmount and mount the file system after changing this parameter.</p></dd>
<dt>Validation</dt>
<dd><p>None. However, setting the maximum transfer size on the server to 0 is likely to cause clients to malfunction or just decide not to attempt to talk to the server.</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this parameter unless transfer sizes larger than 1 Mbyte are preferred.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter3-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter3-22.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

