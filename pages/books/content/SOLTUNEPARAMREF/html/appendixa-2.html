<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Kernel Parameters - Solaris Tunable Parameters Reference Manual</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Tunable Parameters Reference Manual</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="appendixa-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="appendixa-47.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chapter1-1.html">1.&nbsp;&nbsp;Overview of Solaris System Tuning</a></p>
<p class="toc level1 tocsp"><a href="chapter2-1.html">2.&nbsp;&nbsp;Solaris Kernel Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter3-1.html">3.&nbsp;&nbsp;NFS Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter4-1.html">4.&nbsp;&nbsp;Internet Protocol Suite Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter5-1.html">5.&nbsp;&nbsp;Network Cache and Accelerator Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter6-1.html">6.&nbsp;&nbsp;System Facility Parameters</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Tunable Parameters Change History</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Kernel Parameters</a></p>
</div>
<p class="toc level2"><a href="appendixa-47.html">NFS Tunable Parameters</a></p>
<p class="toc level2"><a href="appendixa-28.html">TCP/IP Tunable Parameters</a></p>
<p class="toc level2"><a href="gbhkm.html">UDP Tunable Parameters</a></p>
<p class="toc level2"><a href="appendixa-39.html">Network Cache and Accelerator (NCA) Tunable Parameters</a></p>
<p class="toc level2"><a href="appendixa-6.html">Parameters That Are Obsolete or Have Been Removed</a></p>
<p class="toc level1 tocsp"><a href="appendixb-1.html">B.&nbsp;&nbsp;Revision History for This Manual</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="appendixa-2"></a><h3>Kernel Parameters</h3>


<a name="appendixa-8"></a><h4>Process-Sizing Tunables</h4>


<a name="appendixa-29"></a><h5><tt>max_nprocs</tt> (Solaris 9 Releases)</h5>
<p><a name="indexterm-234"></a>The Solaris 10 description section was updated by removing the text &ldquo;sun4m.&rdquo;</p>

<a name="appendixa-35"></a><h4>General I/O Tunable Parameters</h4>


<a name="gfpvm"></a><h5><tt>maxphys</tt> (Solaris 10 Releases)</h5>
<p>The default value is updated to include sun4v systems. For more information, see
<a href="chapter2-29.html#chapter2-30"><tt>maxphys</tt></a>.<a name="indexterm-235"></a></p>

<a name="appendixa-36"></a><h5><tt>maxphys</tt> (Solaris 9 Releases)</h5>
<p><a name="indexterm-236"></a>The text &ldquo;126,976 (sun4m)&rdquo; was removed from the Solaris 10 <tt>maxphys</tt> default section.</p>

<a name="appendixa-31"></a><h5><tt>rlim_fd_max</tt> (Solaris 8 Release)</h5>
<p><a name="indexterm-237"></a>In the Solaris 8 version, the default is 1024. In later Solaris releases,
the default is 65,536.</p>

<a name="appendixa-11"></a><h4>General Kernel and Memory Parameters</h4>


<a name="appendixa-37"></a><h5><tt>noexec_user_stack</tt> (Solaris 9 Releases)</h5>
<p><a name="indexterm-238"></a>The Solaris 10 description section was updated by removing the text &ldquo;and sun4m&rdquo;
and adding the text &ldquo;64&ndash;bit SPARC and AMD64.&rdquo;</p>

<a name="fahqp"></a><h5><tt>lwp_default_stksize</tt> (Solaris 9 Releases)</h5>
<p>The Solaris 10 description section was updated by adding default and maximum values
for AMD64.</p><p>The Solaris 10 default value for SPARC platforms was changed to 24,576.</p>

<a name="appendixa-21"></a><h5><tt>noexec_user_stack</tt> (Solaris 2.6, 7, and 8 Releases)</h5>
<p>The Solaris 9 description section was updated by removing the text &ldquo;and sun4d.&rdquo;</p>

<a name="appendixa-41"></a><h5><tt>segkpsize</tt> (Solaris 9 12/02 Release)</h5>
<p><a name="indexterm-239"></a>In previous Solaris 9 releases, units were incorrectly identified as Mbytes instead of 8-Kbyte
pages. In addition, the following text is removed from the range and default
descriptions in the Solaris 10 release because this parameter is only available on
systems running 64-bit kernels:</p><p>32-bit kernels, 512 Mbytes</p>

<a name="appendixa-12"></a><h4>Paging-Related Tunable Parameters</h4>


<a name="gfhxd"></a><h5><tt>maxpgio</tt> (Solaris 10 Releases)</h5>
<p><a name="indexterm-240"></a>In the Solaris 10 versions, the range value was incorrectly documented as 1
to 1024. The actual range depends on system architecture and I/O subsystems. For more
information, see <a href="chapter2-10.html#chapter2-148"><tt>maxpgio</tt></a>.</p>

<a name="appendixa-27"></a><h5><tt>pages_pp_maximum</tt> (Solaris Releases Prior to Solaris 9 Releases)</h5>
<p>In the Solaris 8 versions, the default description is as follows:</p><p><a name="indexterm-241"></a>Maximum of the triplet (200, <tt>tune_t_minarmem</tt> + 100, [10% of memory available at
boot time])</p>

<a name="appendixa-38"></a><h4>General File System Parameters</h4>


<a name="appendixa-56"></a><h5><tt>ncsize</tt> (Solaris 9 and Previous Releases)</h5>
<p><a name="indexterm-242"></a>In the Solaris 9 release and previous releases, the <tt>nfs:nrnode</tt> parameter was incorrectly identified
as <tt>nfs:nfs_rnode</tt> in the when to change description.</p>

<a name="gdpbi"></a><h4><tt>ncsize</tt> (Solaris 10 Release)</h4>
<p>In the Solaris 10 release, the default value of the <tt>ncsize</tt> parameter was
incorrectly described as follows:</p><p>4 x (<tt>v.v_proc</tt> + <tt>maxusers</tt>) + 320 / 100</p><p>The correct default value is as follows:</p><p>(4 x (<tt>v.v_proc</tt> + <tt>maxusers</tt>) + 320) + (4 x (<tt>v.v_proc</tt> + <tt>maxusers</tt>)
+ 320 / 100</p><p>For more information, see <a href="chapter2-33.html#chapter2-35"><tt>ncsize</tt></a>.</p>

<a name="appendixa-54"></a><h4>UFS Tunable Parameters</h4>


<a name="appendixa-55"></a><h5><tt>bufhwm</tt> (Solaris 9 Releases)</h5>
<p>This parameter information changed significantly in the Solaris 10 release. Please see <a href="chapter2-37.html#chapter2-38"><tt>bufhwm</tt> and <tt>bufhwm_pct</tt></a>
for more information.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-243"></a>Maximum amount of memory for caching I/O buffers. The buffers are used for writing file system metadata (superblocks, inodes, indirect blocks, and directories). Buffers are allocated as needed until the amount to be allocated would exceed <tt>bufhwm</tt>. At this point, enough buffers are reclaimed to satisfy the request.</p><p>For historical reasons, this parameter does not require the <tt>ufs:</tt> prefix.</p></dd>
<dt>Data Type</dt>
<dd><p>Signed integer</p></dd>
<dt>Default</dt>
<dd><p>2% of physical memory</p></dd>
<dt>Range</dt>
<dd><p>80 Kbytes to 20% of physical memory</p></dd>
<dt>Units</dt>
<dd><p>Kbytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>No. Value is used to compute hash bucket sizes and is then stored into a data structure that adjusts the value in the field as buffers are allocated and deallocated. Attempting to adjust this value without following the locking protocol on a running system can lead to incorrect operation.</p></dd>
<dt>Validation</dt>
<dd><p>If <tt>bufhwm</tt> is less than 80 Kbytes or greater than the lesser of 20% of physical memory or twice the current amount of kernel heap, it is reset to the lesser of 20% of physical memory or twice the current amount of kernel heap. The following message appears on the system console and in the <tt>/var/adm/messages</tt> file. </p><pre>"binit: bufhwm out of range (value attempted). Using <b>N</b>."</pre><p>Value attempted refers to the value entered in <tt>/etc/system</tt> or by using the <tt>kadb</tt> <tt>-d</tt> command. <i>N</i> is the value computed by the system based on available system memory.</p></dd>
<dt>When to Change</dt>
<dd><p>Since buffers are only allocated as they are needed, the overhead from the default setting is the allocation of a number of control structures to handle the maximum possible number of buffers. These structures consume 52 bytes per potential buffer on a 32&ndash;bit kernel and 104 bytes per potential buffer on a 64&ndash;bit kernel. On a 512 Mbyte 64&ndash;bit kernel this consumes 104*10144 bytes, or 1 Mbyte. The header allocations assumes buffers are 1 Kbyte in size, although in most cases, the buffer size is larger.</p><p>The amount of memory, which has not been allocated in the buffer pool, can be found by looking at the <tt>bfreelist</tt> structure in the kernel with a kernel debugger. The field of interest in the structure is <tt>bufsize</tt>, which is the possible remaining memory in bytes. Looking at it with the <tt>buf</tt> macro by using <tt>mdb</tt>:</p><pre># <tt><b>mdb</b></tt> <tt>-k</tt>Loading modules: [ unix krtld genunix ip nfs ipc ]
> <tt><b>bfreelist$&lt;buf</b></tt>
bfreelist:
[ elided ]
bfreelist + 0x78:    bufsize            [ elided ]
                           75734016</pre><p><tt>bufhwm</tt> on this system, with 6 Gbytes of memory, is 122277. It is not directly possible to determine the number of header structures used since the actual buffer size requested is usually larger than 1 Kbyte. However, some space might be profitably reclaimed from control structure allocation for this system.</p><p>The same structure on the 512 Mbyte system shows that only 4 Kbytes of 10144 Kbytes has not been allocated. When the <tt>biostats kstat</tt> is examined with <tt>kstat -n biostats</tt>, it is seen that the system had a reasonable ratio of <tt>buffer_cache_hits</tt> to <tt>buffer_cache_lookups</tt> as well. This indicates that the default setting is reasonable for that system.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="gfpvf"></a><h4>TMPFS Parameters</h4>


<a name="gfpvy"></a><h5><tt>tmpfs:tmpfs_maxkmem</tt> (Solaris 10 Releases)</h5>
<p>The range description is updated to include sun4v systems. For more information, see
<a href="chapter2-47.html#chapter2-129"><tt>tmpfs:tmpfs_maxkmem</tt></a>.<a name="indexterm-244"></a></p>

<a name="appendixa-26"></a><h5><tt>tmpfs:tmpfs_minfree</tt> (Solaris 8 Releases)</h5>
<p><a name="indexterm-245"></a>In the Solaris 8 versions, the units was incorrectly described as &ldquo;Bytes,&rdquo; instead
of &ldquo;Pages.&rdquo;</p>

<a name="gfpvd"></a><h4>sun4u or sun4v Specific Parameters (Solaris 10 Releases)</h4>
<p>The title of the Sun-4u Specific Parameters section was revised in the Solaris
10 8/07 release to include sun4v systems.<a name="indexterm-246"></a><a name="indexterm-247"></a></p>

<a name="gbbsb"></a><h4>Solaris Volume Manager Parameters</h4>


<a name="gbbsj"></a><h5><tt>md_mirror:md_resync_bufsz</tt></h5>
<p>In the Solaris Express release, the default value was increased to 1024 blocks
from 128 blocks.<a name="indexterm-248"></a></p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="appendixa-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="appendixa-47.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

