<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>What's New in Solaris System Tuning in the Solaris 10 Release? - Solaris Tunable Parameters Reference Manual</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Tunable Parameters Reference Manual</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsvdj.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter1-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chapter1-1.html">1.&nbsp;&nbsp;Overview of Solaris System Tuning</a></p>
<p class="toc level2"><a href="fsvdj.html">What's New in Solaris System Tuning?</a></p>
<div class="onpage">
<p class="toc level2"><a href="">What's New in Solaris System Tuning in the Solaris 10 Release?</a></p>
</div>
<p class="toc level2"><a href="chapter1-2.html">Tuning a Solaris System</a></p>
<p class="toc level2"><a href="chapter1-3.html">Tuning Format of Tunable Parameters Descriptions</a></p>
<p class="toc level2"><a href="chapter1-9.html">Tuning the Solaris Kernel</a></p>
<p class="toc level2"><a href="chapter1-13.html">Special Solaris <tt>tune</tt> and <tt>var</tt> Structures</a></p>
<p class="toc level2"><a href="chapter1-28.html">Viewing Solaris System Configuration Information</a></p>
<p class="toc level2"><a href="chapter1-25.html"><tt>kstat</tt> Utility</a></p>
<p class="toc level1 tocsp"><a href="chapter2-1.html">2.&nbsp;&nbsp;Solaris Kernel Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter3-1.html">3.&nbsp;&nbsp;NFS Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter4-1.html">4.&nbsp;&nbsp;Internet Protocol Suite Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter5-1.html">5.&nbsp;&nbsp;Network Cache and Accelerator Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter6-1.html">6.&nbsp;&nbsp;System Facility Parameters</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Tunable Parameters Change History</a></p>
<p class="toc level1 tocsp"><a href="appendixb-1.html">B.&nbsp;&nbsp;Revision History for This Manual</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter1-32"></a><h3>What's New in Solaris System Tuning in the Solaris 10 Release?</h3>
<p>This section describes new or changed parameters in the Solaris 10 release.</p>
<ul><li><p><a href="#faasv">Default Stack Size</a></p></li>
<li><p><a href="#chapter1-33">System V IPC Configuration</a></p></li>
<li><p><a href="#chapter1-34">NFSv4 Parameters</a></p></li>
<li><p><a href="#chapter1-36">New and Changed TCP/IP Parameters</a></p></li>
<li><p><a href="#chapter1-37">SPARC: Translation Storage Buffer (TSB) Parameters</a></p></li>
<li><p><a href="#chapter1-38">SCTP Tunable Parameters</a></p></li></ul>


<a name="faasv"></a><h4>Default Stack Size</h4>
<p>A new parameter, <tt>default_stksize</tt>, specifies the default stack size of all threads, kernel
or user. The <tt>lwp_default_stksize</tt> parameter is still available, but it does not affect
all kernel stacks. If <tt>default_stksize</tt> is set, it overrides <tt>lwp_default_stksize</tt>. For more information,
see <a href="chapter2-2.html#faawu"><tt>default_stksize</tt></a>.</p>

<a name="chapter1-33"></a><h4>System V IPC Configuration</h4>
<p>In this Solaris release, all System V IPC facilities are either automatically configured
or can be controlled by resource controls. Facilities that can be shared are
memory, message queues, and semaphores.</p><p>Resource controls allow IPC settings to be made on a per-project or per-process
basis on the local system or in a name service environment.</p><p>In previous Solaris releases, IPC facilities were controlled by kernel tunables. You had
to modify the <tt>/etc/system</tt> file and reboot the system to change the default
values for these facilities.</p><p>Because the IPC facilities are now controlled by resource controls, their configuration can
be modified while the system is running.</p><p>Many applications that previously required system tuning to function might now run without
tuning because of increased defaults and the automatic allocation of resources.</p><p>The following table identifies the now obsolete IPC tunables and the possible resource
controls that could be used as replacements. An important distinction between the obsolete
IPC tunables and resource controls is that the IPC tunables were set on
a system-wide basis and the resource controls are set on a per-project or
per-process basis.</p><table><col width="27.96*"><col width="28.92*"><col width="23.24*"><col width="10.43*"><col width="9.47*"><tr><th align="left" valign="top" scope="column"><p>Resource Control</p></th>
<th align="left" valign="top" scope="column"><p>Obsolete Tunable</p></th>
<th align="left" valign="top" scope="column"><p>Old Default Value</p></th>
<th align="left" valign="top" scope="column"><p>Maximum Value</p></th>
<th align="left" valign="top" scope="column"><p>New Default Value</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>process.max-msg-qbytes</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>msgsys:msginfo_msgmnb</tt></p></td>
<td align="left" valign="top" scope="row"><p>4096</p></td>
<td align="left" valign="top" scope="row"><p><tt>ULONG_MAX</tt></p></td>
<td align="left" valign="top" scope="row"><p>65536</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>process.max-msg-messages</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>msgsys:msginfo_msgtql</tt></p></td>
<td align="left" valign="top" scope="row"><p>40</p></td>
<td align="left" valign="top" scope="row"><p><tt>UINT_MAX</tt> </p></td>
<td align="left" valign="top" scope="row"><p>8192</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>process.max-sem-ops</tt> </p></td>
<td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semopm</tt></p></td>
<td align="left" valign="top" scope="row"><p>10</p></td>
<td align="left" valign="top" scope="row"><p><tt>INT_MAX</tt></p></td>
<td align="left" valign="top" scope="row"><p>512</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>process.max-sem-nsems</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semmsl</tt></p></td>
<td align="left" valign="top" scope="row"><p>25</p></td>
<td align="left" valign="top" scope="row"><p><tt>SHRT_MAX</tt> </p></td>
<td align="left" valign="top" scope="row"><p>512</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>project.max-shm-memory</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>shmsys:shminfo_shmmax*</tt></p></td>
<td align="left" valign="top" scope="row"><p>0x800000</p></td>
<td align="left" valign="top" scope="row"><p><tt>UINT64_MAX</tt></p></td>
<td align="left" valign="top" scope="row"><p>1/4
of physical memory</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p> <tt>project.max-shm-ids</tt> </p></td>
<td align="left" valign="top" scope="row"><p><tt>shmsys:shminfo_shmmni</tt></p></td>
<td align="left" valign="top" scope="row"><p>100</p></td>
<td align="left" valign="top" scope="row"><p><tt>2</tt><sup>24</sup></p></td>
<td align="left" valign="top" scope="row"><p>128</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>project.max-msg-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>msgsys:msginfo_msgmni</tt></p></td>
<td align="left" valign="top" scope="row"><p>50</p></td>
<td align="left" valign="top" scope="row"><p>2<sup>24</sup></p></td>
<td align="left" valign="top" scope="row"><p>128</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>project.max-sem-ids</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semmni</tt></p></td>
<td align="left" valign="top" scope="row"><p>10</p></td>
<td align="left" valign="top" scope="row"><p>2<sup>24</sup></p></td>
<td align="left" valign="top" scope="row"><p>128</p></td>
</tr>
</table><p>* Note that the <tt>project.max-shm-memory</tt> resource control limits the total amount of shared
memory of one project, whereas previously, the <tt>shmsys:shminfo_shmmax</tt> parameter limited the size of a
single shared memory segment.</p><p>For more detailed descriptions of the resource controls, see <a href="http://docs.sun.com/doc/819-2450/rmctrls-4?a=view">Available Resource Controls in <i>System Administration Guide: Virtualization Using the Solaris Operating System</i></a>.</p><p>Obsolete parameters can still be included in the <tt>/etc/system</tt> file on a Solaris
system. If so, the parameters are used to initialize the default resource control
values as in previous Solaris releases. For more information, see <a href="appendixa-6.html">Parameters That Are Obsolete or Have Been Removed</a>. However, using
the obsolete parameters is not recommended.</p><p>The following related parameters have been removed. If these parameters are included in
the <tt>/etc/system</tt> file on a Solaris system, the parameters are commented out.</p><table><col width="50*"><col width="50*"><tr><td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semmns</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semvmx</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semmnu</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semaem</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semume</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semusz</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>semsys:seminfo_semmap</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>shmsys:shminfo_shmseg</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>shmsys:shminfo_shmmin</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>msgsys:msginfo_msgmap</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>msgsys:msginfo_msgseg</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>msgsys:msginfo_msgssz</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>msgsys:msginfo_msgmax</tt></p></td>
<td align="left" valign="top" scope="row"><p></p></td>
</tr>
</table><p>For the current list of available resource controls, see <a href="http://docs.sun.com/doc/819-2240/rctladm-1m?a=view"><tt>rctladm</tt>(1M)</a>. For information
about configuring resource controls, see <a href="http://docs.sun.com/doc/819-2251/project-4?a=view"><tt>project</tt>(4)</a>, and <a href="http://docs.sun.com/doc/819-2450/rmctrls-1?a=view">Chapter 6, Resource Controls (Overview), in <i>System Administration Guide: Virtualization Using the Solaris Operating System</i></a>.</p>

<a name="chapter1-34"></a><h4>NFSv4 Parameters</h4>
<p>The following parameters for the NFSv4 protocol are included in this release:</p>
<ul><li><p><a href="chapter3-3.html#chapter3-32"><tt>nfs:nfs4_pathconf_disable_cache</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-50"><tt>nfs:nfs4_cots_timeo</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-28"><tt>nfs:nfs4_do_symlink_cache</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-29"><tt>nfs:nfs4_lookup_neg_cache</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-33"><tt>nfs:nfs4_max_threads</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-14"><tt>nfs:nfs4_nra</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-38"><tt>nfs:nfs4_shrinkreaddir</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-37"><tt>nfs:nfs4_bsize</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-55"><tt>nfs:nfs4_async_clusters</tt></a></p></li>
<li><p><a href="chapter3-3.html#chapter3-73"><tt>nfs:nfs4_max_transfer_size</tt></a></p></li></ul>
<p>For information about NFSv4 parameters, see <a href="chapter3-3.html">NFS Module Parameters</a>.</p>

<a name="chapter1-36"></a><h4>New and Changed TCP/IP Parameters</h4>
<p>The following IP parameters have been added in this Solaris release:</p>
<ul><li><p><a href="chapter4-31.html#chapter4-5"><tt>ip_squeue_worker_wait</tt></a></p></li>
<li><p><a href="chapter4-21.html#chapter4-7"><tt>ip_squeue_fanout</tt></a></p></li>
<li><p><a href="chapter4-31.html#chapter4-75"><tt>ipcl_conn_hash_size</tt></a></p></li></ul>
<p>The following TCP parameters are new in this Solaris release:</p>
<ul><li><p><a href="chapter4-31.html#fahpm"><tt>tcp_rst_sent_rate_enabled</tt></a></p></li>
<li><p><a href="chapter4-31.html#fahpq"><tt>tcp_rst_sent_rate</tt></a></p></li>
<li><p><a href="chapter4-31.html#fapwd"><tt>tcp_mdt_max_pbufs</tt></a></p></li></ul>
<p>The following TCP/IP parameters are obsolete in this Solaris release.</p>
<ul><li><p><tt>ipc_tcp_conn_hash_size</tt></p></li>
<li><p><tt>tcp_compression_enabled</tt></p></li>
<li><p><tt>tcp_conn_hash_size</tt></p></li>
<li><p><tt>ip_forwarding</tt></p></li>
<li><p><tt>ip6_forwarding</tt></p></li>
<li><p><tt>xxx_forwarding</tt></p></li></ul>


<a name="eypmk"></a><h5>IP Forwarding Changes</h5>
<p>In this Solaris release, IP forwarding is enabled or disabled by using the
<tt>routeadm</tt> command or the <tt>ifconfig</tt> commands instead of setting the following tunable parameters
with the <tt>ndd</tt> command:</p>
<ul><li><p><tt>ip_forwarding</tt></p></li>
<li><p><tt>ip6_forwarding</tt></p></li>
<li><p><tt>xxx_forwarding</tt></p></li></ul>
<p>Using the <tt>routeadm</tt> command and the  <tt>ifconfig</tt> command instead of the <tt>ndd</tt>
command to set IP forwarding provides the following advantages:<a name="indexterm-1"></a></p>
<ul><li><p>All settings are persistent across reboots</p></li>
<li><p>The new <tt>ifconfig</tt> <tt>router</tt> and <tt>-router</tt> commands can be placed in the <tt>/etc/hostname</tt>.<i>interface</i> files, along with other <tt>ifconfig</tt> commands that are run when the interface is initially configured.</p></li></ul>
<p>To enable IPv4 or IPv6 packet forwarding on all interfaces of a
system, you would use the following commands:</p><pre># <tt><b>routeadm -e ipv4-forwarding</b></tt></pre><pre># <tt><b>routeadm -e ipv6-forwarding</b></tt></pre><p>To disable IPv4 or IPv6 packet forwarding on all interfaces of a
system, you would use the following commands:</p><pre># <tt><b>routeadm -d ipv4-forwarding</b></tt></pre><pre># <tt><b>routeadm -d ipv6-forwarding</b></tt></pre><p>In previous Solaris releases, you would enable IPv4 or IPv6 packet forwarding on
all interfaces of a system as follows:</p><pre># <tt><b>ndd -set /dev/ip ip_forwarding 1</b></tt></pre><pre># <tt><b>ndd -set /dev/ip ip6_forwarding 1</b></tt></pre><p>In previous Solaris releases, you would disable IPv4 or IPv6 packet forwarding on
all interfaces of a system as follows:</p><pre># <tt><b>ndd -set /dev/ip ip_forwarding 0</b></tt></pre><pre># <tt><b>ndd -set /dev/ip ip6_forwarding 0</b></tt></pre><p>If you want to enable IP forwarding on a specific IPv4 interface
or IPv6 interface, you would use syntax similar to the following for your
interface. The <tt>bge0</tt> interface is used an as example.</p><pre># <tt><b>ifconfig bge0 router</b></tt></pre><pre># <tt><b>ifconfig bge0 inet6 router</b></tt></pre><p>If you want to disable IP forwarding on a specific IPv4 interface
or IPv6 interface, you would use syntax similar to the following for your
interface. The <tt>bge0</tt> interface is used an as example.</p><pre># <tt><b>ifconfig bge0 -router</b></tt></pre><pre># <tt><b>ifconfig bge0 inet6 -router</b></tt></pre><p>Previously, IP forwarding was enabled on a specific interface as follows:</p><pre># <tt><b>ndd -set /dev/ip bge0:ip_forwarding 1</b></tt></pre><pre># <tt><b>ndd -set /dev/ip bge0:ip_forwarding 1</b></tt></pre><p>Previously, IP forwarding on a specific interface was disabled as follows:</p><pre># <tt><b>ndd -set /dev/ip ip_forwarding 0</b></tt></pre><pre># <tt><b>ndd -set /dev/ip ip6_forwarding 0</b></tt></pre><p>If you want any of the preceding <tt>routeadm</tt> settings to take effect on
the running system, use the following command:</p><pre># <tt><b>routeadm -u</b></tt></pre><p>For more information, see <a href="http://docs.sun.com/doc/819-2240/routeadm-1m?a=view"><tt>routeadm</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2240/ifconfig-1m?a=view"><tt>ifconfig</tt>(1M)</a>.</p>

<a name="chapter1-37"></a><h4>SPARC: Translation Storage Buffer (TSB) Parameters</h4>
<p>New parameters for tuning Translation Storage Buffer (TSB) are included in this release.
For information about TSB parameters, see <a href="chapter2-94.html">sun4u or sun4v Specific Parameters</a>.</p>

<a name="chapter1-38"></a><h4>SCTP Tunable Parameters</h4>
<p>Stream Control Transmission Protocol (SCTP), a reliable transport protocol that provides services similar
to the services provided by TCP, is provided in this Solaris release. For
more information about SCTP tunable parameters, see <a href="chapter4-98.html">SCTP Tunable Parameters</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsvdj.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter1-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

