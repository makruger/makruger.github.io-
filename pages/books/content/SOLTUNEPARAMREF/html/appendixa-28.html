<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>TCP/IP Tunable Parameters - Solaris Tunable Parameters Reference Manual</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Tunable Parameters Reference Manual</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="appendixa-47.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gbhkm.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chapter1-1.html">1.&nbsp;&nbsp;Overview of Solaris System Tuning</a></p>
<p class="toc level1 tocsp"><a href="chapter2-1.html">2.&nbsp;&nbsp;Solaris Kernel Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter3-1.html">3.&nbsp;&nbsp;NFS Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter4-1.html">4.&nbsp;&nbsp;Internet Protocol Suite Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter5-1.html">5.&nbsp;&nbsp;Network Cache and Accelerator Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter6-1.html">6.&nbsp;&nbsp;System Facility Parameters</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Tunable Parameters Change History</a></p>
<p class="toc level2"><a href="appendixa-2.html">Kernel Parameters</a></p>
<p class="toc level2"><a href="appendixa-47.html">NFS Tunable Parameters</a></p>
<div class="onpage">
<p class="toc level2"><a href="">TCP/IP Tunable Parameters</a></p>
</div>
<p class="toc level2"><a href="gbhkm.html">UDP Tunable Parameters</a></p>
<p class="toc level2"><a href="appendixa-39.html">Network Cache and Accelerator (NCA) Tunable Parameters</a></p>
<p class="toc level2"><a href="appendixa-6.html">Parameters That Are Obsolete or Have Been Removed</a></p>
<p class="toc level1 tocsp"><a href="appendixb-1.html">B.&nbsp;&nbsp;Revision History for This Manual</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="appendixa-28"></a><h3>TCP/IP Tunable Parameters</h3>


<a name="appendixa-44"></a><h4><tt>ip_forward_src_routed</tt> and <tt>ip6_forward_src_routed</tt> (Solaris 10 Release)</h4>
<p>The default value of these parameters was incorrectly documented in the Solaris 9
and Solaris 10 releases. The correct default value is disabled.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-255"></a><a name="indexterm-256"></a>Controls whether IPv4 or IPv6 forwards packets with source IPv4 routing options or IPv6 routing headers.</p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
</dl>


<a name="appendixa-43"></a><h4><tt>ip_multidata_outbound</tt> (Solaris 10 Release)</h4>
<p>This parameter was enhanced in the Solaris Express 12/05 release to deliver IP
fragments in batches to the network driver. For more information, see <a href="chapter4-21.html#gbglv"><tt>ip_multidata_outbound</tt></a>.</p><dl><dt>Description</dt>
<dd><p>Enables the network stack to send more than one packet at one time to the network device driver during transmission.</p><p>Enabling this parameter reduces the per-packet processing costs by improving host CPU utilization, network throughput, or both.</p><p><a name="indexterm-257"></a>The multidata transmit (MDT) feature is only effective for device drivers that support this feature.</p><p>See also <a href="chapter4-31.html#fapwd"><tt>tcp_mdt_max_pbufs</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>1 (Enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If you do not want this parameter enabled for debugging purposes or for any other reasons, disable it.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="#appendixa-46"><tt>ip_multidata_outbound</tt> (Solaris 9 Release)</a>.</p></dd>
</dl>


<a name="appendixa-46"></a><h4><tt>ip_multidata_outbound</tt> (Solaris 9 Release)</h4>
<p>This parameter information changed significantly in releases after the Solaris 9 8/03 release.
Please see <a href="chapter4-21.html#gbglv"><tt>ip_multidata_outbound</tt></a> for more information.</p><dl><dt>Description</dt>
<dd><p>This parameter enables the network stack to send more than one packet at one time to the network device driver during transmission.</p><p>Enabling this parameter reduces the per-packet processing costs by improving the host CPU utilization and/or network throughput.</p><p><a name="indexterm-258"></a>The multidata transmit (MDT) feature is only effective for device drivers that support this feature.</p><p>The following parameter must be enabled in the <tt>/etc/system</tt> file to use the MDT parameter:</p><p><tt>set ip:ip_use_dl_cap = 0x1</tt></p></dd>
<dt>Default</dt>
<dd><p>Disabled</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled), 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>This feature can be enabled at any time to allow for improved system performance with the following cautions:</p>
<ul><li><p>Enabling this feature might change the appearance of any packets between the IP layer and the DLPI provider. So, any third-party STREAMS module that is dynamically inserted between the IP layer and the DLPI provider by using <tt>ifconfig</tt>'s <tt>modinsert</tt> feature, which doesn't understand the MDT STREAMS data type, might not work.</p><p>Modules that are inserted between the IP and the DLPI provider with the <tt>autopush(1m)</tt> mechanism might not work as well.</p></li>
<li><p>Keep this feature disabled when a STREAMS module is not MDT aware. For example, the public domain utilities such as ipfilter, Checkpoint Firewall-1, and so on, are not MDT aware.</p></li></ul>
</dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="getmg"></a><h4><tt>ip_squeue_fanout</tt> (Solaris 10 11/06 Release)</h4>
<p>Zone configuration information was added in the Solaris 10 8/07 release. For more
information, see <a href="chapter4-21.html#chapter4-7"><tt>ip_squeue_fanout</tt></a>.</p>

<a name="getlj"></a><h4><tt>ip_squeue_worker_wait</tt> (Solaris 10 11/06 Release)</h4>
<p>Zone configuration information was added in the Solaris 10 8/07 release. For more
information, see <a href="chapter4-31.html#chapter4-5"><tt>ip_squeue_worker_wait</tt></a> In addition, this parameter was moved to <a href="chapter4-31.html#chapter4-66">TCP/IP Parameters Set in the <tt>/etc/system</tt> File</a>.</p>

<a name="getmv"></a><h4><tt>ip_soft_rings_cnt</tt> (Solaris 10 11/06 Release)</h4>
<p>Zone configuration information was added in the Solaris 10 8/07 release. For more
information, see <a href="chapter4-21.html#gbsbo"><tt>ip_soft_rings_cnt</tt></a>.</p>

<a name="gcdcv"></a><h4><tt>ip_squeue_write</tt> (Solaris 10 Release)</h4>
<p>This parameter was incorrectly documented in the Solaris 10 release. It has been
removed.</p>

<a name="appendixa-3"></a><h4><tt>tcp_conn_hash_size</tt> (Solaris 9 Releases)</h4>
<p>This parameter was removed in the Solaris 10 release.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-259"></a>Controls the hash table size in the TCP module for all TCP connections.</p></dd>
<dt>Data Type</dt>
<dd><p>Signed integer</p></dd>
<dt>Default</dt>
<dd><p>512</p></dd>
<dt>Range</dt>
<dd><p>512 to 1,073,741,824</p></dd>
<dt>Implicit</dt>
<dd><p>The value should be a power of 2.</p></dd>
<dt>Dynamic?</dt>
<dd><p>No. The parameter can only be changed at boot time. </p></dd>
<dt>Validation</dt>
<dd><p>If you set the parameter to a value that is not a power of 2, it is rounded up to the nearest power of 2.</p></dd>
<dt>When to Change</dt>
<dd><p>If the system consistently has tens of thousands of TCP connections, increase the value accordingly. With the default value, TCP performs well up to a few thousand active connections. Note that increasing the hash table size means more memory consumption so set an appropriate value to avoid wasting memory unnecessarily.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="gbudm"></a><h4><tt>tcp_wscale_always</tt> (Solaris 9 Releases)</h4>
<p>The default value of this parameter was changed to enabled in the
Solaris 10 release.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-260"></a>When this parameter is enabled, which is the default setting, TCP always sends a SYN segment with the window scale option, even if the window scale option value is 0. Note that if TCP receives a SYN segment with the window scale option, even if the parameter is disabled, TCP responds with a SYN segment with the window scale option. In addition, the option value is set according to the receive window size.</p><p>Refer to RFC 1323 for the window scale option.</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If there is an interoperability problem with an old TCP stack that does not support the window scale option, disable this parameter.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="appendixa-4"></a><h4><tt>ipc_tcp_conn_hash_size</tt> (Solaris 9 Releases)</h4>
<p>This parameter was removed in the Solaris 10 release.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-261"></a>Controls the hash table size in an IP module for all active (in ESTABLISHED state) TCP connections.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer</p></dd>
<dt>Default</dt>
<dd><p>512</p></dd>
<dt>Range</dt>
<dd><p>512 to 2,147,483,648</p></dd>
<dt>Implicit</dt>
<dd><p>It should be a power of two.</p></dd>
<dt>Dynamic?</dt>
<dd><p>No. This parameter can only be changed at boot time. </p></dd>
<dt>Validation</dt>
<dd><p>If you set the parameter to a value that is not a power of 2, it is rounded up to the nearest power of two.</p></dd>
<dt>When to Change</dt>
<dd><p>If the system consistently has tens of thousands of active TCP connections, increase the value accordingly. With the default value, the system performs well up to a few thousand active connections. Note that increasing the hash table size means more memory consumption so set an appropriate value to avoid wasting memory unnecessarily.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="appendixa-5"></a><h4><tt>tcp_compression_enabled</tt> (Solaris 9 Releases)</h4>
<p>This parameter was removed in the Solaris 10 release.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-262"></a>If set to 1, protocol control blocks of TCP connections in TIME-WAIT state are compressed to reduce memory usage. If set to 0, no compression is done. See <a href="chapter4-31.html#chapter4-51"><tt>tcp_time_wait_interval</tt></a> also. </p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled), 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not turn off the compression mechanism.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="appendixa-9"></a><h4><tt>ip_forwarding</tt> and <tt>ip6_forwarding</tt> (Solaris 9 Releases)</h4>
<p>These parameters are obsolete in the Solaris 10 release.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-263"></a><a name="indexterm-264"></a>Controls whether IP does IPv4 or IPv6 forwarding between interfaces. See also <a href="#appendixa-10"><i>xxx</i><tt>:ip_forwarding</tt> (Solaris 9 Releases)</a>.</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If IP forwarding is needed, enable it.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="appendixa-10"></a><h4><i>xxx</i><tt>:ip_forwarding</tt> (Solaris 9 Releases)</h4>
<p>This parameter is obsolete in the Solaris 10 release.</p><dl><dt>Description</dt>
<dd><p><a name="indexterm-265"></a>Enables IPv4 forwarding for a particular <i>xxx</i> interface. The exact name of the parameter is <i>interface-name</i><tt>:ip_forwarding</tt>. For example, two interfaces are <tt>hme0</tt> and <tt>hme1</tt>. Here are their corresponding parameter names:</p><p><tt>hme0:ip_forwarding</tt> and <tt>hme1:ip_forwarding</tt></p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If you need IPv4 forwarding, use this parameter to enable forwarding on a per-interface basis.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="eyplw"></a><h4><tt>tcp_conn_req_max_q0</tt> (Solaris 8 Release)</h4>
<p>The when to change text was revised in later Solaris releases from
this:</p><dl><dt>When to Change</dt>
<dd><p>For applications, such as web servers that might receive excessive connection requests, you can increase the default value to match the incoming rate.</p><p>The following explains the relationship between <tt>tcp_conn_req_max_q0</tt> and the maximum number of pending connections for each socket. </p><p>When a connection request is received, TCP first checks if the number (<i>N</i>) of pending TCP connections (three-way handshake is done) waiting to be accepted exceeds the maximum for the listener. If the connections are excessive, the request is denied. If the number of connections is allowable, then TCP checks if the number of incomplete pending TCP connections exceeds the sum of <i>N</i> and <tt>tcp_conn_req_max_q0</tt>. If it does not, the request is accepted. Otherwise, the oldest incomplete pending TCP request is dropped.</p><p>to this:</p></dd>
<dt>When to Change</dt>
<dd><p>For applications, such as web servers that might receive excessive connection requests, you can increase the default value to match the incoming rate. </p><p>The following explains the relationship between <tt>tcp_conn_req_max_q0</tt> and the maximum number of pending connections for each socket.</p><p>When a connection request is received, TCP first checks if the number of pending TCP connections (three-way handshake is done) waiting to be accepted exceeds the maximum (<i>N</i>) for the listener. If the connections are excessive, the request is denied. If the number of connections is allowable, then TCP checks if the number of incomplete pending TCP connections exceeds the sum of N and <tt>tcp_conn_req_max_q0</tt>. If it does not, the request is accepted. Otherwise, the oldest incomplete pending TCP request is dropped.</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="appendixa-47.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gbhkm.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

