<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>General Kernel and Memory Parameters - Solaris Tunable Parameters Reference Manual</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Tunable Parameters Reference Manual</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter2-9.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter2-3.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chapter1-1.html">1.&nbsp;&nbsp;Overview of Solaris System Tuning</a></p>
<p class="toc level1 tocsp"><a href="chapter2-1.html">2.&nbsp;&nbsp;Solaris Kernel Tunable Parameters</a></p>
<p class="toc level2"><a href="chapter2-9.html">Where to Find Tunable Parameter Information</a></p>
<div class="onpage">
<p class="toc level2"><a href="">General Kernel and Memory Parameters</a></p>
</div>
<p class="toc level2"><a href="chapter2-3.html"><tt>fsflush</tt> and Related Parameters</a></p>
<p class="toc level2"><a href="chapter2-4.html">Process-Sizing Parameters</a></p>
<p class="toc level2"><a href="chapter2-10.html">Paging-Related Parameters</a></p>
<p class="toc level2"><a href="chapter2-123.html">Swapping-Related Parameters</a></p>
<p class="toc level2"><a href="chapter2-126.html">Kernel Memory Allocator</a></p>
<p class="toc level2"><a href="chapter2-27.html">General Driver Parameter</a></p>
<p class="toc level2"><a href="chapter2-29.html">General I/O Parameters</a></p>
<p class="toc level2"><a href="chapter2-33.html">General File System Parameters</a></p>
<p class="toc level2"><a href="chapter2-37.html">UFS Parameters</a></p>
<p class="toc level2"><a href="chapter2-47.html">TMPFS Parameters</a></p>
<p class="toc level2"><a href="chapter2-50.html">Pseudo Terminals</a></p>
<p class="toc level2"><a href="chapter2-52.html">STREAMS Parameters</a></p>
<p class="toc level2"><a href="chapter2-56.html">System V Message Queues</a></p>
<p class="toc level2"><a href="chapter2-63.html">System V Semaphores</a></p>
<p class="toc level2"><a href="chapter2-73.html">System V Shared Memory</a></p>
<p class="toc level2"><a href="chapter2-98.html">Scheduling</a></p>
<p class="toc level2"><a href="chapter2-82.html">Timers</a></p>
<p class="toc level2"><a href="chapter2-94.html">sun4u or sun4v Specific Parameters</a></p>
<p class="toc level2"><a href="chapter2-156.html">Solaris Volume Manager Parameters</a></p>
<p class="toc level2"><a href="chapter2-164.html">Network Driver Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter3-1.html">3.&nbsp;&nbsp;NFS Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter4-1.html">4.&nbsp;&nbsp;Internet Protocol Suite Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter5-1.html">5.&nbsp;&nbsp;Network Cache and Accelerator Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter6-1.html">6.&nbsp;&nbsp;System Facility Parameters</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Tunable Parameters Change History</a></p>
<p class="toc level1 tocsp"><a href="appendixb-1.html">B.&nbsp;&nbsp;Revision History for This Manual</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter2-2"></a><h3>General Kernel and Memory Parameters</h3>
<p>This section describes general kernel parameters that are related to physical memory and
stack configuration.</p>

<a name="chapter2-12"></a><h4><tt>physmem</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-2"></a>Modifies the system's configuration of the number of physical pages of memory after the Solaris OS and firmware are accounted for.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned long</p></dd>
<dt>Default</dt>
<dd><p>Number of usable pages of physical memory available on the system, not counting the memory where the core kernel and data are stored</p></dd>
<dt>Range</dt>
<dd><p>1 to amount of physical memory on system</p></dd>
<dt>Units</dt>
<dd><p>Pages</p></dd>
<dt>Dynamic?</dt>
<dd><p>No</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Whenever you want to test the effect of running the system with less physical memory. Because this parameter does <b>not</b> take into account the memory used by the core kernel and data, as well as various other data structures allocated early in the startup process, the value of <tt>physmem</tt> should be less than the actual number of pages that represent the smaller amount of memory.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="faawu"></a><h4><tt>default_stksize</tt></h4>
<dl><dt>Description</dt>
<dd><p>Specifies the default stack size of all threads. No thread can be created with a stack size smaller than <tt>default_stksize</tt>.  If <tt>default_stksize</tt> is set, it overrides <tt>lwp_default_stksize</tt>. See also <a href="#chapter2-118"><tt>lwp_default_stksize</tt></a>.<a name="indexterm-3"></a></p></dd>
<dt>Data Type</dt>
<dd><p>Integer</p></dd>
<dt>Default</dt>
<dd>
<ul><li><p>3 x <tt>PAGESIZE</tt> on SPARC systems</p></li>
<li><p>2 x <tt>PAGESIZE</tt> on x86 systems</p></li>
<li><p>5 x <tt>PAGESIZE</tt> on AMD64 systems</p></li></ul>
</dd>
<dt>Range</dt>
<dd><p>Minimum is the default values:</p>
<ul><li><p>3 x <tt>PAGESIZE</tt> on SPARC systems</p></li>
<li><p>2 x <tt>PAGESIZE</tt> on x86 systems</p></li>
<li><p>5 x <tt>PAGESIZE</tt> on AMD64 systems</p></li></ul>
<p>Maximum is 32 times the default value.</p></dd>
<dt>Units</dt>
<dd><p>Bytes in multiples of the value returned by the <tt>getpagesize</tt> parameter. For more information, see <a href="http://docs.sun.com/doc/819-2243/getpagesize-3c?a=view"><tt>getpagesize</tt>(3C)</a>.</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes. Affects threads created after the variable is changed.</p></dd>
<dt>Validation</dt>
<dd><p>Must be greater than or equal to 8192 and less than or equal to 262,144 (256 x 1024). Also must be a multiple of the system page size. If these conditions are not met, the following message is displayed:</p><pre>Illegal stack size, Using <i>N</i></pre><p>The value of <i>N</i> is the default value of <tt>default_stksize</tt>.</p></dd>
<dt>When to Change</dt>
<dd><p>When the system panics because it has run out of stack space. The best solution for this problem is to determine why the system is running out of space and then make a correction.</p><p>Increasing the default stack size means that almost every kernel thread will have a larger stack, resulting in increased kernel memory consumption for no good reason. Generally, that space will be unused. The increased consumption means other resources that are competing for the same pool of memory will have the amount of space available to them reduced, possibly decreasing the system's ability to perform work. Among the side effects is a reduction in the number of threads that the kernel can create. This solution should be treated as no more than an interim workaround until the root cause is remedied.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter2-118"></a><h4><tt>lwp_default_stksize</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-4"></a>Specifies the default value of the stack size to be used when a kernel thread is created, and when the calling routine does not provide an explicit size to be used.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer</p></dd>
<dt>Default</dt>
<dd>
<ul><li><p>8192 for x86 platforms</p></li>
<li><p>24,576 for SPARC platforms</p></li>
<li><p>20,480 for AMD64 platforms</p></li></ul>
</dd>
<dt>Range</dt>
<dd><p>Minimum is the default values:</p>
<ul><li><p>3 x <tt>PAGESIZE</tt> on SPARC systems</p></li>
<li><p>2 x <tt>PAGESIZE</tt> on x86 systems</p></li>
<li><p>5 x <tt>PAGESIZE</tt> on AMD64 systems</p></li></ul>
<p>Maximum is 32 times the default value.</p></dd>
<dt>Units</dt>
<dd><p>Bytes in multiples of the value returned by the <tt>getpagesize</tt> parameter. For more information, see <a href="http://docs.sun.com/doc/819-2243/getpagesize-3c?a=view"><tt>getpagesize</tt>(3C)</a>.</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes. Affects threads created after the variable is changed.</p></dd>
<dt>Validation</dt>
<dd><p>Must be greater than or equal to 8192 and less than or equal to 262,144 (256 x 1024). Also must be a multiple of the system page size. If these conditions are not met, the following message is displayed:</p><pre>Illegal stack size, Using <i>N</i></pre><p>The value of <i>N</i> is the default value of <tt>lwp_default_stksize</tt>.</p></dd>
<dt>When to Change</dt>
<dd><p>When the system panics because it has run out of stack space. The best solution for this problem is to determine why the system is running out of space and then make a correction.</p><p>Increasing the default stack size means that almost every kernel thread will have a larger stack, resulting in increased kernel memory consumption for no good reason. Generally, that space will be unused. The increased consumption means other resources that are competing for the same pool of memory will have the amount of space available to them reduced, possibly decreasing the system's ability to perform work. Among the side effects is a reduction in the number of threads that the kernel can create. This solution should be treated as no more than an interim workaround until the root cause is remedied.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-2.html#fahqp"><tt>lwp_default_stksize</tt> (Solaris 9 Releases)</a>.</p></dd>
</dl>


<a name="chapter2-155"></a><h4><tt>logevent_max_q_sz</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-5"></a>Maximum number of system events allowed to be queued and waiting for delivery to the <tt>syseventd</tt> daemon. Once the size of the system event queue reaches this limit, no other system events are allowed on the queue.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer</p></dd>
<dt>Default</dt>
<dd><p>5000</p></dd>
<dt>Range</dt>
<dd><p>0 to MAXINT</p></dd>
<dt>Units</dt>
<dd><p>System events</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>The system event framework checks this value every time a system event is generated by <tt>ddi_log_sysevent</tt> and <tt>sysevent_post_event</tt>.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2256/ddi-log-sysevent-9f?a=view"><tt>ddi_log_sysevent</tt>(9F)</a> and <a href="http://docs.sun.com/doc/819-2248/sysevent-post-event-3sysevent?a=view"><tt>sysevent_post_event</tt>(3SYSEVENT)</a>.</p></dd>
<dt>When to Change</dt>
<dd><p>When error log messages indicate that a system event failed to be logged, generated, or posted.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter2-150"></a><h4><tt>segkpsize</tt></h4>
<dl><dt>Description</dt>
<dd><p>Specifies the amount of kernel pageable memory available. This memory is used primarily for kernel thread stacks. Increasing this number allows either larger stacks for the same number of threads or more threads. This parameter can only be set on a system running a 64-bit kernel. A system running a 64-bit kernel uses a default stack size of 24 Kbytes.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned long</p></dd>
<dt>Default</dt>
<dd><p>64-bit kernels, 2 Gbytes</p><p>32-bit kernels, 512 Mbytes</p></dd>
<dt>Range</dt>
<dd><p>64-bit kernels, 512 Mbytes to 24 Gbytes</p></dd>
<dt>Units</dt>
<dd><p>8-Kbyte pages</p></dd>
<dt>Dynamic?</dt>
<dd><p>No</p></dd>
<dt>Validation</dt>
<dd><p>Value is compared to minimum and maximum sizes (512 Mbytes and 24 Gbytes for 64-bit systems). If smaller than the minimum or larger than the maximum, it is reset to 2 Gbytes. A message to that effect is displayed.</p><p>The actual size used in creation of the cache is the lesser of the value specified in <tt>segkpsize</tt> after the validation checking or 50 percent of physical memory.</p></dd>
<dt>When to Change</dt>
<dd><p>Required to support large numbers of processes on a system. The default size of 2 Gbytes, assuming at least 1 Gbyte of physical memory is present. This default size allows creation of 24-Kbyte stacks for more than 87,000 kernel threads. The size of a stack in a 64-bit kernel is the same, whether the process is a 32-bit process or a 64-bit process. If more than this number is needed, <tt>segkpsize</tt> can be increased, assuming sufficient physical memory exists.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-2.html#appendixa-41"><tt>segkpsize</tt> (Solaris 9 12/02 Release)</a>.</p></dd>
</dl>


<a name="chapter2-26"></a><h4><tt>noexec_user_stack</tt></h4>
<dl><dt>Description</dt>
<dd><p>Enables the stack to be marked as nonexecutable, which helps make buffer-overflow attacks more difficult.</p><p><a name="indexterm-6"></a>A Solaris system running a 64-bit kernel makes the stacks of all 64-bit applications nonexecutable by default. Setting this parameter is necessary to make 32-bit applications nonexecutable on systems running 64-bit or 32-bit kernels.</p>
<hr><p><b>Note - </b>This parameter exists on all systems running the Solaris 2.6, 7, 8, 9, or 10 releases, but it is only effective on 64&ndash;bit SPARC and AMD64 architectures.</p>
<hr>
</dd>
<dt>Data Type</dt>
<dd><p>Signed integer</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Units</dt>
<dd><p>Toggle (on/off)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes. Does not affect currently running processes, only processes created after the value is set.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Should be enabled at all times unless applications are deliberately placing executable code on the stack without using <tt>mprotect</tt> to make the stack executable. For more information, see <a href="http://docs.sun.com/doc/819-2241/mprotect-2?a=view"><tt>mprotect</tt>(2)</a>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-2.html#appendixa-37"><tt>noexec_user_stack</tt> (Solaris 9 Releases)</a>.</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter2-9.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter2-3.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

