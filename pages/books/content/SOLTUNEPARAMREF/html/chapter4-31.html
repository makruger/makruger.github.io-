<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>TCP Tunable Parameters - Solaris Tunable Parameters Reference Manual</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Tunable Parameters Reference Manual</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter4-21.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter4-57.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chapter1-1.html">1.&nbsp;&nbsp;Overview of Solaris System Tuning</a></p>
<p class="toc level1 tocsp"><a href="chapter2-1.html">2.&nbsp;&nbsp;Solaris Kernel Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter3-1.html">3.&nbsp;&nbsp;NFS Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter4-1.html">4.&nbsp;&nbsp;Internet Protocol Suite Tunable Parameters</a></p>
<p class="toc level2"><a href="chapter4-9.html">Where to Find Tunable Parameter Information</a></p>
<p class="toc level2"><a href="chapter4-2.html">Overview of Tuning IP Suite Parameters</a></p>
<p class="toc level2"><a href="chapter4-21.html">IP Tunable Parameters</a></p>
<div class="onpage">
<p class="toc level2"><a href="">TCP Tunable Parameters</a></p>
</div>
<p class="toc level2"><a href="chapter4-57.html">UDP Tunable Parameters</a></p>
<p class="toc level2"><a href="chapter4-62.html">IPQoS Tunable Parameter</a></p>
<p class="toc level2"><a href="chapter4-98.html">SCTP Tunable Parameters</a></p>
<p class="toc level2"><a href="chapter4-64.html">Per-Route Metrics</a></p>
<p class="toc level1 tocsp"><a href="chapter5-1.html">5.&nbsp;&nbsp;Network Cache and Accelerator Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter6-1.html">6.&nbsp;&nbsp;System Facility Parameters</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Tunable Parameters Change History</a></p>
<p class="toc level1 tocsp"><a href="appendixb-1.html">B.&nbsp;&nbsp;Revision History for This Manual</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter4-31"></a><h3>TCP Tunable Parameters</h3>


<a name="chapter4-37"></a><h4><tt>tcp_deferred_ack_interval</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-144"></a>Specifies the time-out value for the TCP-delayed acknowledgment (ACK) timer for hosts that are not directly connected.</p><p>Refer to RFC 1122, 4.2.3.2.</p></dd>
<dt>Default</dt>
<dd><p>100 milliseconds</p></dd>
<dt>Range</dt>
<dd><p>1 millisecond to 1 minute</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not increase this value to more than 500 milliseconds.</p><p>Increase the value under the following circumstances:</p>
<ul><li><p>Slow network links (less than 57.6 Kbps) with greater than 512 bytes maximum segment size (MSS)</p></li>
<li><p>The interval for receiving more than one TCP segment is short</p></li></ul>
</dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-71"></a><h4><tt>tcp_local_dack_interval</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-145"></a>Specifies the time-out value for TCP-delayed acknowledgment (ACK) timer for hosts that are directly connected.</p><p>Refer to RFC 1122, 4.2.3.2.</p></dd>
<dt>Default</dt>
<dd><p>50 milliseconds</p></dd>
<dt>Range</dt>
<dd><p>1 millisecond to 1 minute</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not increase this value to more than 500 milliseconds.</p><p>Increase the value under the following circumstances:</p>
<ul><li><p>Slow network links (less than 57.6 Kbps) with greater than 512 bytes maximum segment size (MSS)</p></li>
<li><p>The interval for receiving more than one TCP segment is short</p></li></ul>
</dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-38"></a><h4><tt>tcp_deferred_acks_max</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-146"></a>Specifies the maximum number of TCP segments received from remote destinations (not directly connected) before an acknowledgment (ACK) is generated. TCP segments are measured in units of maximum segment size (MSS) for individual connections. If set to 0 or 1, no ACKs are delayed, assuming all segments are 1 MSS long. The actual number is dynamically calculated for each connection. The value is the default maximum.</p></dd>
<dt>Default</dt>
<dd><p>2</p></dd>
<dt>Range</dt>
<dd><p>0 to 16</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value. In some circumstances, when the network traffic becomes very bursty because of the delayed ACK effect, decrease the value. Do not decrease this value below 2.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-72"></a><h4><tt>tcp_local_dacks_max</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-147"></a>Specifies the maximum number of TCP segments received from directly connected destinations before an acknowledgment (ACK) is generated. TCP segments are measured in units of maximum segment size (MSS) for individual connections. If set to 0 or 1, it means no ACKs are delayed, assuming all segments are 1 MSS long. The actual number is dynamically calculated for each connection. The value is the default maximum.</p></dd>
<dt>Default</dt>
<dd><p>8</p></dd>
<dt>Range</dt>
<dd><p>0 to 16</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value. In some circumstances, when the network traffic becomes very bursty because of the delayed ACK effect, decrease the value. Do not decrease this value below 2.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-39"></a><h4><tt>tcp_wscale_always</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-148"></a>When this parameter is enabled, which is the default setting, TCP always sends a SYN segment with the window scale option, even if the window scale option value is 0. Note that if TCP receives a SYN segment with the window scale option, even if the parameter is disabled, TCP responds with a SYN segment with the window scale option. In addition, the option value is set according to the receive window size.</p><p>Refer to RFC 1323 for the window scale option.</p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If there is an interoperability problem with an old TCP stack that does not support the window scale option, disable this parameter.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-28.html#gbudm"><tt>tcp_wscale_always</tt> (Solaris 9 Releases)</a>.</p></dd>
</dl>


<a name="chapter4-40"></a><h4><tt>tcp_tstamp_always</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-149"></a>If set to 1, TCP always sends a SYN segment with the timestamp option. Note that if TCP receives a SYN segment with the timestamp option, TCP responds with a SYN segment with the timestamp option even if the parameter is set to 0.</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If getting an accurate measurement of round-trip time (RTT) and TCP sequence number wraparound is a problem, enable this parameter.</p><p>Refer to RFC 1323 for more reasons to enable this option.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-42"></a><h4><tt>tcp_xmit_hiwat</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-150"></a>Defines the default send window size in bytes. Refer to <a href="chapter4-64.html">Per-Route Metrics</a> for a discussion of setting a different value on a per-route basis. See also <a href="#chapter4-45"><tt>tcp_max_buf</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>49,152</p></dd>
<dt>Range</dt>
<dd><p>4096 to 1,073,741,824</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>An application can use <a href="http://docs.sun.com/doc/819-2244/setsockopt-3xnet?a=view"><tt>setsockopt</tt>(3XNET)</a> <tt>SO_SNDBUF</tt> to change the individual connection's send buffer.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-43"></a><h4><tt>tcp_recv_hiwat</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-151"></a>Defines the default receive window size in bytes. Refer to <a href="chapter4-64.html">Per-Route Metrics</a> for a discussion of setting a different value on a per-route basis. See also <a href="#chapter4-45"><tt>tcp_max_buf</tt></a> and <a href="#chapter4-44"><tt>tcp_recv_hiwat_minmss</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>49,152</p></dd>
<dt>Range</dt>
<dd><p>2048 to 1,073,741,824</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>An application can use <a href="http://docs.sun.com/doc/819-2244/setsockopt-3xnet?a=view"><tt>setsockopt</tt>(3XNET)</a> <tt>SO_RCVBUF</tt> to change the individual connection's receive buffer.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-45"></a><h4><tt>tcp_max_buf</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-152"></a>Defines the maximum buffer size in bytes. This parameter controls how large the send and receive buffers are set to by an application that uses <a href="http://docs.sun.com/doc/819-2244/setsockopt-3xnet?a=view"><tt>setsockopt</tt>(3XNET)</a>. </p></dd>
<dt>Default</dt>
<dd><p>1,048,576</p></dd>
<dt>Range</dt>
<dd><p>8192 to 1,073,741,824</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If TCP connections are being made in a high-speed network environment, increase the value to match the network link speed.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-46"></a><h4><tt>tcp_cwnd_max</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-153"></a>Defines the maximum value of the TCP congestion window (cwnd) in bytes.</p><p>For more information on the TCP congestion window, refer to RFC 1122 and RFC 2581.</p></dd>
<dt>Default</dt>
<dd><p>1,048,576</p></dd>
<dt>Range</dt>
<dd><p>128 to 1,073,741,824</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Even if an application uses <a href="http://docs.sun.com/doc/819-2244/setsockopt-3xnet?a=view"><tt>setsockopt</tt>(3XNET)</a> to change the window size to a value higher than <tt>tcp_cwnd_max</tt>, the actual window used can never grow beyond <tt>tcp_cwnd_max</tt>. Thus, <tt>tcp_max_buf</tt> should be greater than <tt>tcp_cwnd_max</tt>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-47"></a><h4><tt>tcp_slow_start_initial</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-154"></a>Defines the maximum initial congestion window (cwnd) size in the maximum segment size (MSS) of a TCP connection.</p><p>Refer to RFC 2414 on how the initial congestion window size is calculated.</p></dd>
<dt>Default</dt>
<dd><p>4</p></dd>
<dt>Range</dt>
<dd><p>1 to 4</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value.</p><p>If the initial cwnd size causes network congestion under special circumstances, decrease the value.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-48"></a><h4><tt>tcp_slow_start_after_idle</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-155"></a>The congestion window size in the maximum segment size (MSS) of a TCP connection after it has been idled (no segment received) for a period of one retransmission timeout (RTO).</p><p>Refer to RFC 2414 on how the initial congestion window size is calculated.</p></dd>
<dt>Default</dt>
<dd><p>4</p></dd>
<dt>Range</dt>
<dd><p>1 to 16,384</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>For more information, see <a href="#chapter4-47"><tt>tcp_slow_start_initial</tt></a>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-49"></a><h4><tt>tcp_sack_permitted</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-156"></a>If set to 2, TCP always sends a SYN segment with the selective acknowledgment (SACK) permitted option. If TCP receives a SYN segment with a SACK-permitted option and this parameter is set to 1, TCP responds with a SACK-permitted option. If the parameter is set to 0, TCP does not send a SACK-permitted option, regardless of whether the incoming segment contains the SACK permitted option. </p><p>Refer to RFC 2018 for information on the SACK option.</p></dd>
<dt>Default</dt>
<dd><p>2 (active enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled), 1 (passive enabled), or 2 (active enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>SACK processing can improve TCP retransmission performance so it should be actively enabled. Sometimes, the other side can be confused with the SACK option actively enabled. If this confusion occurs, set the value to 1 so that SACK processing is enabled only when incoming connections allow SACK processing.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-50"></a><h4><tt>tcp_rev_src_routes</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-157"></a>If set to 0, TCP does not reverse the IP source routing option for incoming connections for security reasons. If set to 1, TCP does the normal reverse source routing.</p></dd>
<dt>Default</dt>
<dd><p>0 (disabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>If IP source routing is needed for diagnostic purposes, enable it.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-51"></a><h4><tt>tcp_time_wait_interval</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-158"></a>Specifies the time in milliseconds that a TCP connection stays in TIME-WAIT state.</p><p>For more information, refer to RFC 1122, 4.2.2.13.</p></dd>
<dt>Default</dt>
<dd><p>60,000 (60 seconds)</p></dd>
<dt>Range</dt>
<dd><p>1 second to 10 minutes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not set the value lower than 60 seconds.</p><p>For information on changing this parameter, refer to RFC 1122, 4.2.2.13.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-73"></a><h4><tt>tcp_ecn_permitted</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls Explicit Congestion Notification (ECN) support.</p><p>If this parameter is set to 0, TCP does not negotiate with a peer that supports the ECN mechanism.</p><p>If this parameter is set to 1 when initiating a connection, TCP does not tell a peer that it supports ECN mechanism.</p><p>However, TCP tells a peer that it supports ECN mechanism when accepting a new incoming connection request if the peer indicates that it supports ECN mechanism in the SYN segment.</p><p>If this parameter is set to 2, in addition to negotiating with a peer on the ECN mechanism when accepting connections, TCP indicates in the outgoing SYN segment that it supports the ECN mechanism when TCP makes active outgoing connections.</p><p><a name="indexterm-159"></a>Refer to RFC 3168 for information on ECN.</p></dd>
<dt>Default</dt>
<dd><p>1 (passive enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled), 1 (passive enabled), or 2 (active enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>ECN can help TCP better handle congestion control. However, there are existing TCP implementations, firewalls, NATs, and other network devices that are confused by this mechanism. These devices do not comply to the IETF standard.</p><p>Because of these devices, the default value of this parameter is set to 1. In rare cases, passive enabling can still cause problems. Set the parameter to 0 only if absolutely necessary.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-53"></a><h4><tt>tcp_conn_req_max_q</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-160"></a>Specifies the default maximum number of pending TCP connections for a TCP listener waiting to be accepted by <a href="http://docs.sun.com/doc/819-2244/accept-3socket?a=view"><tt>accept</tt>(3SOCKET)</a>. See also <a href="#chapter4-54"><tt>tcp_conn_req_max_q0</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>128</p></dd>
<dt>Range</dt>
<dd><p>1 to 4,294,967,296</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>For applications such as web servers that might receive several connection requests, the default value might be increased to match the incoming rate.</p><p>Do not increase the parameter to a very large value. The pending TCP connections can consume excessive memory. Also, if an application cannot handle that many connection requests fast enough because the number of pending TCP connections is too large, new incoming requests might be denied. </p><p>Note that increasing <tt>tcp_conn_req_max_q</tt> does not mean that applications can have that many pending TCP connections. Applications can use <a href="http://docs.sun.com/doc/819-2244/listen-3socket?a=view"><tt>listen</tt>(3SOCKET)</a> to change the maximum number of pending TCP connections for each socket. This parameter is the maximum an application can use <tt>listen()</tt> to set the number to. Thus, even if this parameter is set to a very large value, the actual maximum number for a socket might be much less than <tt>tcp_conn_req_max_q</tt>, depending on the value used in <tt>listen()</tt>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-28.html#appendixa-10"><i>xxx</i><tt>:ip_forwarding</tt> (Solaris 9 Releases)</a>.</p></dd>
</dl>


<a name="chapter4-54"></a><h4><tt>tcp_conn_req_max_q0</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-161"></a>Specifies the default maximum number of incomplete (three-way handshake not yet finished) pending TCP connections for a TCP listener.</p><p>For more information on TCP three-way handshake, refer to RFC 793. See also <a href="#chapter4-53"><tt>tcp_conn_req_max_q</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>1024</p></dd>
<dt>Range</dt>
<dd><p>0 to 4,294,967,296</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>For applications such as web servers that might receive excessive connection requests, you can increase the default value to match the incoming rate.</p><p>The following explains the relationship between <tt>tcp_conn_req_max_q0</tt> and the maximum number of pending connections for each socket. </p><p>When a connection request is received, TCP first checks if the number of pending TCP connections (three-way handshake is done) waiting to be accepted exceeds the maximum (<i>N</i>) for the listener. If the connections are excessive, the request is denied. If the number of connections is allowable, then TCP checks if the number of incomplete pending TCP connections exceeds the sum of <i>N</i> and <tt>tcp_conn_req_max_q0</tt>. If it does not, the request is accepted. Otherwise, the oldest incomplete pending TCP request is dropped. </p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-28.html#appendixa-10"><i>xxx</i><tt>:ip_forwarding</tt> (Solaris 9 Releases)</a>.</p></dd>
</dl>


<a name="chapter4-55"></a><h4><tt>tcp_conn_req_min</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-162"></a>Specifies the default minimum value for the maximum number of pending TCP connection requests for a listener waiting to be accepted. This is the lowest maximum value of <a href="http://docs.sun.com/doc/819-2244/listen-3socket?a=view"><tt>listen</tt>(3SOCKET)</a> that an application can use.</p></dd>
<dt>Default</dt>
<dd><p>1</p></dd>
<dt>Range</dt>
<dd><p>1 to 1024</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>This parameter can be a solution for applications that use <a href="http://docs.sun.com/doc/819-2244/listen-3socket?a=view"><tt>listen</tt>(3SOCKET)</a> to set the maximum number of pending TCP connections to a value too low. Increase the value to match the incoming connection request rate.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="fahpm"></a><h4><tt>tcp_rst_sent_rate_enabled</tt></h4>
<dl><dt>Description</dt>
<dd><p>If this parameter is set to 1, the maximum rate of sending a RST segment is controlled by the <tt>ndd</tt> parameter, <tt>tcp_rst_sent_rate</tt>. If this parameter is set to 0, no rate control when sending a RST segment is available.<a name="indexterm-163"></a></p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>This tunable helps defend against denial of service attacks on TCP by limiting the rate by which a RST segment is sent out. The only time this rate control should be disabled is when strict conformance to RFC 793 is required.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="fahpq"></a><h4><tt>tcp_rst_sent_rate</tt></h4>
<dl><dt>Description</dt>
<dd><p>Sets the maximum number of RST segments that TCP can send out per second.<a name="indexterm-164"></a></p></dd>
<dt>Default</dt>
<dd><p>40</p></dd>
<dt>Range</dt>
<dd><p>0 to 4,294,967,296</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>In a TCP environment, there might be a legitimate reason to generate more RSTs than the default value allows. In this case, increase the default value of this parameter.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="fapwd"></a><h4><tt>tcp_mdt_max_pbufs</tt></h4>
<dl><dt>Description</dt>
<dd><p>Specifies the number of payload buffers that can be carried by a single <tt>M_MULTIDATA</tt> message that is generated by TCP. See also <a href="chapter4-21.html#gbglv"><tt>ip_multidata_outbound</tt></a>.<a name="indexterm-165"></a></p></dd>
<dt>Default</dt>
<dd><p>16</p></dd>
<dt>Range</dt>
<dd><p>1 to 16</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Decreasing this parameter might aid in debugging device driver development by limiting the amount of payload buffers per <tt>M_MULTIDATA</tt> message that is generated by TCP.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="fsvdg"></a><h4><tt>tcp_keepalive_interval</tt></h4>
<dl><dt>Description</dt>
<dd><p>This <tt>ndd</tt> parameter sets a probe interval that is first sent out after a TCP connection is idle on a system-wide basis.</p><p>Solaris supports the TCP keep-alive mechanism as described in RFC 1122. This mechanism is enabled by setting the <tt>SO_KEEPALIVE</tt> socket option on a TCP socket.</p><p>If <tt>SO_KEEPALIVE</tt> is enabled for a socket, the first keep-alive probe is sent out after a TCP connection is idle for two hours, the default value of the <tt>tcp_keepalive_interval</tt> parameter. If the peer does not respond to the probe after eight minutes, the TCP connection is aborted. For more information, refer to <a href="#fsvdh"><tt>tcp_keepalive_abort_interval</tt></a>.<a name="indexterm-166"></a></p><p>You can also use the <tt>TCP_KEEPALIVE_THRESHOLD</tt> socket option on individual applications to override the default interval so that each application can have its own interval on each socket. The option value is an unsigned integer in milliseconds. See also <a href="http://docs.sun.com/doc/819-2254/tcp-7p?a=view"><tt>tcp</tt>(7P)</a>.</p></dd>
<dt>Default</dt>
<dd><p>2 hours</p></dd>
<dt>Range</dt>
<dd><p>10 seconds to 10 days</p></dd>
<dt>Units</dt>
<dd><p>Unsigned integer (milliseconds)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value. If under special circumstances, the first keepalive probe needs to be sent earlier than two hours, use the <tt>TCP_KEEPALIVE_THRESHOLD</tt> socket option to reduce the interval on an individual application.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="fsvdh"></a><h4><tt>tcp_keepalive_abort_interval</tt></h4>
<dl><dt>Description</dt>
<dd><p>This <tt>ndd</tt> parameter sets a default time threshold to abort a TCP connection after the keepalive probing mechanism has failed.</p><p>This abort time threshold can also be changed on a per socket basis by using the <tt>TCP_KEEPALIVE_ABORT_THRESHOLD</tt> option on a TCP socket. The option value is an unsigned integer in milliseconds.</p><p>If an application has the <tt>SO_KEEPALIVE</tt> socket option enabled, it can then use the <tt>TCP_KEEPALIVE_THRESHOLD</tt> socket option to change the initial probe interval and <tt>TCP_KEEPALIVE_ABORT_THRESHOLD</tt> socket option to change the abort interval.</p><p>A value of zero means that TCP should never time out and abort the connection when probing.</p><p>See also <a href="#fsvdg"><tt>tcp_keepalive_interval</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>8 minutes</p></dd>
<dt>Range</dt>
<dd><p>0 to 8 minutes</p></dd>
<dt>Units</dt>
<dd><p>Unsigned integer (milliseconds)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value. If under special circumstances, a TCP connection needs to be aborted earlier than the default eight minutes of the keepalive probing, use the <tt>TCP_KEEPALIVE_ABORT_THRESHOLD</tt> socket option to reduce the abort interval on an individual application.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-66"></a><h4>TCP/IP Parameters Set in the <tt>/etc/system</tt> File</h4>
<p>The following parameters can be set only in the <tt>/etc/system</tt> file. After the
file is modified, reboot the system.</p><p>For example, the following entry sets the <tt>ipcl_conn_hash_size</tt> parameter:</p><pre>set ip:ipcl_conn_hash_sizes=<i>value</i></pre>

<a name="chapter4-75"></a><h5><tt>ipcl_conn_hash_size</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-167"></a>Controls the size of the connection hash table used by IP. The default value of 0 means that the system automatically sizes an appropriate value for this parameter at boot time, depending on the available memory.</p></dd>
<dt>Data Type</dt>
<dd><p>Unsigned integer</p></dd>
<dt>Default</dt>
<dd><p>0</p></dd>
<dt>Range</dt>
<dd><p>0 to 82,500</p></dd>
<dt>Dynamic?</dt>
<dd><p>No. The parameter can only be changed at boot time.</p></dd>
<dt>When to Change</dt>
<dd><p>If the system consistently has tens of thousands of TCP connections, the value can be increased accordingly. Increasing the hash table size means that more memory is wired down, thereby reducing available memory to user applications.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-5"></a><h5><tt>ip_squeue_worker_wait</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-168"></a>Governs the maximum delay in waking up a worker thread to process TCP/IP packets that are enqueued on an squeue. An <b>squeue</b> is a serialization queue that is used by the TCP/IP kernel code to process TCP/IP packets.</p></dd>
<dt>Default</dt>
<dd><p>10 milliseconds</p></dd>
<dt>Range</dt>
<dd><p>0 &ndash; 50 milliseconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Consider tuning this parameter if latency is an issue, and network traffic is light. For example, if the machine serves mostly interactive network traffic.</p><p>The default value usually works best on a network file server, a web server, or any server that has substantial network traffic.</p></dd>
<dt>Zone Configuration</dt>
<dd><p>This parameter can only be set in the global zone.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
<dt>Change History</dt>
<dd><p>For information, see <a href="appendixa-28.html#getlj"><tt>ip_squeue_worker_wait</tt> (Solaris 10 11/06 Release)</a>.</p></dd>
</dl>


<a name="chapter4-69"></a><h4>TCP Parameters With Additional Cautions</h4>
<p>Changing the following parameters is not recommended.</p>

<a name="chapter4-32"></a><h5><tt>tcp_ip_abort_interval</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-169"></a>Specifies the default total retransmission timeout value for a TCP connection. For a given TCP connection, if TCP has been retransmitting for <tt>tcp_ip_abort_interval</tt> period of time and it has not received any acknowledgment from the other endpoint during this period, TCP closes this connection.</p><p>For TCP retransmission timeout (RTO) calculation, refer to RFC 1122, 4.2.3. See also <a href="#chapter4-34"><tt>tcp_rexmit_interval_max</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>8 minutes</p></dd>
<dt>Range</dt>
<dd><p>500 milliseconds to 1193 hours</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this value. See <a href="#chapter4-34"><tt>tcp_rexmit_interval_max</tt></a> for exceptions.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-33"></a><h5><tt>tcp_rexmit_interval_initial</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-170"></a>Specifies the default initial retransmission timeout (RTO) value for a TCP connection. Refer to <a href="chapter4-64.html">Per-Route Metrics</a> for a discussion of setting a different value on a per-route basis.</p></dd>
<dt>Default</dt>
<dd><p>3 seconds</p></dd>
<dt>Range</dt>
<dd><p>1 millisecond to 20 seconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this value. Lowering the value can result in unnecessary retransmissions.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-34"></a><h5><tt>tcp_rexmit_interval_max</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-171"></a>Defines the default maximum retransmission timeout value (RTO). The calculated RTO for all TCP connections cannot exceed this value. See also <a href="#chapter4-32"><tt>tcp_ip_abort_interval</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>60 seconds </p></dd>
<dt>Range</dt>
<dd><p>1 millisecond to 2 hours</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value in a normal network environment.</p><p>If, in some special circumstances, the round-trip time (RTT) for a connection is about 10 seconds, you can increase this value. If you change this value, you should also change the <tt>tcp_ip_abort_interval</tt> parameter. Change the value of <tt>tcp_ip_abort_interval</tt> to at least four times the value of <tt>tcp_rexmit_interval_max</tt>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-35"></a><h5><tt>tcp_rexmit_interval_min</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-172"></a>Specifies the default minimum retransmission time out (RTO) value. The calculated RTO for all TCP connections cannot be lower than this value. See also <a href="#chapter4-34"><tt>tcp_rexmit_interval_max</tt></a>.</p></dd>
<dt>Default</dt>
<dd><p>400 milliseconds </p></dd>
<dt>Range</dt>
<dd><p>1 millisecond to 20 seconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value in a normal network environment.</p><p>TCP's RTO calculation should cope with most RTT fluctuations. If, in some very special circumstances, the round-trip time (RTT) for a connection is about 10 seconds, increase this value. If you change this value, you should change the <tt>tcp_rexmit_interval_max</tt> parameter. Change the value of <tt>tcp_rexmit_interval_max</tt> to at least eight times the value of <tt>tcp_rexmit_interval_min</tt>.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-36"></a><h5><tt>tcp_rexmit_interval_extra</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-173"></a>Specifies a constant added to the calculated retransmission time out value (RTO). </p></dd>
<dt>Default</dt>
<dd><p>0 milliseconds</p></dd>
<dt>Range</dt>
<dd><p>0 to 2 hours</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value.</p><p>When the RTO calculation fails to obtain a good value for a connection, you can change this value to avoid unnecessary retransmissions.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-41"></a><h5><tt>tcp_tstamp_if_wscale</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-174"></a>If this parameter is set to 1, and the window scale option is enabled for a connection, TCP also enables the <tt>timestamp</tt> option for that connection.</p></dd>
<dt>Default</dt>
<dd><p>1 (enabled)</p></dd>
<dt>Range</dt>
<dd><p>0 (disabled) or 1 (enabled)</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change this value. In general, when TCP is used in high-speed network, protection against sequence number wraparound is essential. Thus, you need the <tt>timestamp</tt> option.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter4-44"></a><h5><tt>tcp_recv_hiwat_minmss</tt></h5>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-175"></a>Controls the default minimum receive window size. The minimum is <tt>tcp_recv_hiwat_minmss</tt> times the size of maximum segment size (MSS) of a connection.</p></dd>
<dt>Default</dt>
<dd><p>4</p></dd>
<dt>Range</dt>
<dd><p>1 to 65,536</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>When to Change</dt>
<dd><p>Do not change the value. If changing it is necessary, do not change the value lower than 4.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter4-21.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter4-57.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

