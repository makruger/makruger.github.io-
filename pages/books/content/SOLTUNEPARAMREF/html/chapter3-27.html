<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>rpcmod</tt> Module Parameters - Solaris Tunable Parameters Reference Manual</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Tunable Parameters Reference Manual</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter3-22.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter4-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="chapter1-1.html">1.&nbsp;&nbsp;Overview of Solaris System Tuning</a></p>
<p class="toc level1 tocsp"><a href="chapter2-1.html">2.&nbsp;&nbsp;Solaris Kernel Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter3-1.html">3.&nbsp;&nbsp;NFS Tunable Parameters</a></p>
<p class="toc level2"><a href="chapter3-23.html">Where to Find Tunable Parameter Information</a></p>
<p class="toc level2"><a href="chapter3-2.html">Tuning the NFS Environment</a></p>
<p class="toc level2"><a href="chapter3-3.html">NFS Module Parameters</a></p>
<p class="toc level2"><a href="chapter3-22.html"><tt>nfssrv</tt> Module Parameters</a></p>
<div class="onpage">
<p class="toc level2"><a href=""><tt>rpcmod</tt> Module Parameters</a></p>
</div>
<p class="toc level1 tocsp"><a href="chapter4-1.html">4.&nbsp;&nbsp;Internet Protocol Suite Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter5-1.html">5.&nbsp;&nbsp;Network Cache and Accelerator Tunable Parameters</a></p>
<p class="toc level1 tocsp"><a href="chapter6-1.html">6.&nbsp;&nbsp;System Facility Parameters</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Tunable Parameters Change History</a></p>
<p class="toc level1 tocsp"><a href="appendixb-1.html">B.&nbsp;&nbsp;Revision History for This Manual</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="chapter3-27"></a><h3><tt>rpcmod</tt> Module Parameters</h3>
<p>This section describes NFS parameters for the <tt>rpcmod</tt> module.</p>

<a name="chapter3-26"></a><h4><tt>rpcmod:clnt_max_conns</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-120"></a>Controls the number of TCP connections that the NFS client uses when communicating with each NFS server. The kernel RPC is constructed so that it can multiplex RPCs over a single connection. However, multiple connections can be used, if preferred.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1</p></dd>
<dt>Range</dt>
<dd><p>1 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Connections</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>In general, one connection is sufficient to achieve full network bandwidth. However, if TCP cannot utilize the bandwidth offered by the network in a single stream, then multiple connections might increase the throughput between the client and the server.</p><p>Increasing the number of connections doesn't come without consequences. Increasing the number of connections also increases kernel resource usage needed to keep track of each connection.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-39"></a><h4><tt>rpcmod:clnt_idle_timeout</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-121"></a>Controls the duration of time on the client that a connection between the client and server is allowed to remain idle before being closed.</p></dd>
<dt>Data Type</dt>
<dd><p>Long integer (32 bits on 32-bit platforms and 64 bits on 64-bit platforms)</p></dd>
<dt>Default</dt>
<dd><p>300,000 milliseconds (5 minutes)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1 on 32-bit platforms</p><p>0 to 2<sup>63</sup> - 1 on 64-bit platforms</p></dd>
<dt>Units</dt>
<dd><p>Milliseconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Use this parameter to change the time that idle connections are allowed to exist on the client before being closed. You might might want to close connections at a faster rate to avoid consuming system resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-40"></a><h4><tt>rpcmod:svc_idle_timeout</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-122"></a>Controls the duration of time on the server that a connection between the client and server is allowed to remain idle before being closed.</p></dd>
<dt>Data Type</dt>
<dd><p>Long integer (32 bits on 32-bit platforms and 64 bits on 64-bit platforms)</p></dd>
<dt>Default</dt>
<dd><p>360,000 milliseconds (6 minutes)</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1 on 32-bit platforms</p><p>0 to 2<sup>63</sup> - 1 on 64-bit platforms</p></dd>
<dt>Units</dt>
<dd><p>Milliseconds</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Use this parameter to change the time that idle connections are allowed to exist on the server before being closed. You might want to close connections at a faster rate to avoid consuming system resources.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-41"></a><h4><tt>rpcmod:svc_default_stksize</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-123"></a>Sets the size of the kernel stack for kernel RPC service threads.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>The default value is 0. This value means that the stack size is set to the system default.</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Bytes</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, for all new threads that are allocated. The stack size is set when the thread is created. Therefore, changes to this parameter do not affect existing threads but are applied to all new threads that are allocated.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Very deep call depths can cause the stack to overflow and cause red zone faults. The combination of a fairly deep call depth for the transport, coupled with a deep call depth for the local file system, can cause NFS service threads to overflow their stacks.</p><p>Set this parameter to a multiple of the hardware <tt>pagesize</tt> on the platform.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-34"></a><h4><tt>rpcmod:svc_default_max_same_xprt</tt></h4>
<dl><dt>Description</dt>
<dd><p>Controls the maximum number of requests that are processed for each transport endpoint before switching transport endpoints. The kernel RPC works by having a pool of service threads and a pool of transport endpoints. Any one of the service threads can process requests from any one of the transport endpoints. For performance, multiple requests on each transport endpoint are consumed before switching to a different transport endpoint. This approach offers performance benefits while avoiding starvation.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>8</p></dd>
<dt>Range</dt>
<dd><p>0 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Requests</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes, but the maximum number of requests to process before switching transport endpoints is set when the transport endpoint is configured into the kernel RPC subsystem. Changes to this parameter only affect new transport endpoints, not existing transport endpoints.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Tune this parameter so that services can take advantage of client behaviors such as the clustering that accelerate NFS version 2 <tt>WRITE</tt> requests. Increasing this parameter might result in the server being better able to take advantage of client behaviors.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-43"></a><h4><tt>rpcmod:maxdupreqs</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-124"></a>Controls the size of the duplicate request cache that detects RPC- level retransmissions on connectionless transports. This cache is indexed by the client network address and the RPC procedure number, program number, version number, and transaction ID. This cache avoids processing retransmitted requests that might not be idempotent.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32-bit)</p></dd>
<dt>Default</dt>
<dd><p>1024</p></dd>
<dt>Range</dt>
<dd><p>1 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Requests</p></dd>
<dt>Dynamic?</dt>
<dd><p>The cache is dynamically sized, but the hash queues that provide fast access to the cache are statically sized. Making the cache very large might result in long search times to find entries in the cache.</p><p>Do not set the value of this parameter to 0. This value prevents the NFS server from handling non idempotent requests.</p></dd>
<dt>Validation</dt>
<dd><p>None</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter if false failures are encountered by NFS clients. For example, if an attempt to create a directory fails, but the directory is actually created, perhaps that retransmitted <tt>MKDIR</tt> request was not detected by the server.</p><p>The size of the cache should match the load on the server. The cache records non idempotent requests and so only needs to track a portion of the total requests. The cache does need to hold the information long enough to be able to detect a retransmission by the client. Typically, the client timeout for connectionless transports is relatively short, starting around 1 second and increasing to about 20 seconds.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>


<a name="chapter3-44"></a><h4><tt>rpcmod:cotsmaxdupreqs</tt></h4>
<dl><dt>Description</dt>
<dd><p><a name="indexterm-125"></a>Controls the size of the duplicate request cache that detects RPC- level retransmissions on connection-oriented transports. This cache is indexed by the client network address and the RPC procedure number, program number, version number, and transaction ID. This cache avoids processing retransmitted requests that might not be idempotent.</p></dd>
<dt>Data Type</dt>
<dd><p>Integer (32&ndash;bit)</p></dd>
<dt>Default</dt>
<dd><p>1024</p></dd>
<dt>Range</dt>
<dd><p>1 to 2<sup>31</sup> - 1</p></dd>
<dt>Units</dt>
<dd><p>Requests</p></dd>
<dt>Dynamic?</dt>
<dd><p>Yes</p></dd>
<dt>Validation</dt>
<dd><p>The cache is dynamically sized, but the hash queues that provide fast access to the cache are statically sized. Making the cache very large might result in long search times to find entries in the cache.</p><p>Do not set the value of this parameter to 0. It prevents the NFS server from handling non-idempotent requests.</p></dd>
<dt>When to Change</dt>
<dd><p>Examine the value of this parameter if false failures are encountered by NFS clients. For example, if an attempt to create a directory fails, but the directory is actually created, it is possible that a retransmitted <tt>MKDIR</tt> request was not detected by the server.</p><p>The size of the cache should match the load on the server. The cache records non-idempotent requests and so only needs to track a portion of the total requests. It does need to hold the information long enough to be able to detect a retransmission on the part of the client. Typically, the client timeout for connection oriented transports is very long, about 1 minute. Thus, entries need to stay in the cache for fairly long times.</p></dd>
<dt>Commitment Level</dt>
<dd><p>Unstable</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="chapter3-22.html">Previous</a>
             </td>
             <td align="right">
                 <a href="chapter4-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

