<?Pub UDT _bookmark _target?><?Pub UDT __target_1 _target?><?Pub UDT registeredtm trademark?><?Pub CX solbook(?><chapter id="ppdadmin-1"><?Pub Tag atict:info tracking="off" ref="1"?><?Pub Tag atict:user user="jonj" fullname="Juanita Heieck"?><?Pub Tag atict:user
user="jh118764" fullname="Juanita Heieck"?><?Pub Tag atict:user user="wsm"
fullname=""?><title>Administering Printers by Using the PPD File Management
Utility (Tasks)</title><highlights><para>This chapter describes how to use the PPD File Manager, <command>/usr/sbin/ppdmgr</command>, utility to administer PostScript Printer Description (PPD) files
that are used with the Solaris print subsystem. The <command>ppdmgr</command> utility
enables you to customize printers and automates a variety of administrative
printing tasks.</para><itemizedlist><para>This is a list of information in this chapter:</para><listitem><para><olink targetptr="geawn" remap="internal">Administering PPD Files by Using
the PPD File Management Utility (Task Map)</olink></para>
</listitem><listitem><para><olink targetptr="gepre" remap="internal">Overview of the PPD File Management
Utility</olink></para>
</listitem><listitem><para><olink targetptr="gfkqx" remap="internal">Using the PPD File Manager (ppdmgr) Utility</olink></para>
</listitem>
</itemizedlist><para>For reference information, see <olink targetptr="geqnf" remap="internal">PPD File Management
Utility</olink>.</para>
</highlights><sect1 id="geawn"><title>Administering PPD Files by Using the PPD File Management
Utility (Task Map)</title><indexterm><primary>PPD file administration</primary><secondary>task map</secondary>
</indexterm><indexterm><primary><command>ppgmgr</command> utility</primary><secondary>using to administer PPD files</secondary>
</indexterm><table frame="all" id="geawj"><title>Administering PPD Files by using <command>ppdmgr</command>: Task Map</title><tgroup cols="3" colsep="1" rowsep="1"><?PubTbl tgroup dispwid="1146.00px"?><colspec colwidth="28.17*"/><colspec colwidth="32.92*"/><colspec colwidth="37.93*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Add a PPD file to a system by using the <command>ppdmgr</command> utility.</para>
</entry><entry><para>Use the <command>ppdmgr</command> utility to add a PPD file to the system.</para>
</entry><entry><para><olink targetptr="gecgu" remap="internal">How to Add a PPD File to a System by Using
the ppdmgr Utility</olink></para>
</entry>
</row><row><entry><para>Add a PPD file to a system by using the <command>lpadmin</command> <option>n</option> command.</para>
</entry><entry><para>Use the <command>lpadmin</command> <option>n</option> command to modify
an existing print queue to associate a PPD file with it.</para>
</entry><entry><para><olink targetptr="gechc" remap="internal">How to Add a PPD File to a System by Using
the lpadmin -n Command</olink></para>
</entry>
</row><row><entry><para>Request an update or a rebuild of the PPD cache file that is associated
with a specific label or all labels.</para><note><para>Depending on the number of PPD files to process, a rebuild of
the PPD cache file can be time-consuming.</para>
</note>
</entry><entry><para>Use the <command>ppdmgr</command> utility to request an update of the
PPD cache file, if you added a PPD file manually or by using the <command>pkgadd</command> command.</para><itemizedlist><para>If you suspect the PPD cache file has become corrupted, you can request
a rebuild of the PPD cache file information for PPD files in these locations:</para><listitem><para>In a specified label directory within a specified repository
on a system</para>
</listitem><listitem><para>Within all the repositories on a system</para>
</listitem>
</itemizedlist>
</entry><entry><para><olink targetptr="geqby" remap="internal">How to Update or Rebuild the PPD Cache File
by Using the ppdmgr Utility</olink></para>
</entry>
</row><row><entry><para>Enable the <filename>application/print<?SolBook linebreak?>/ppd-cache-update</filename> service.</para>
</entry><entry><para>The <filename>application/print<?SolBook linebreak?>/ppd-cache-update</filename> service
must be online to reflect changes made to PPD file repositories in the PPD
cache. This service is enabled by default. You can enable the service by using
the <command>svcadm</command> command, if necessary.</para>
</entry><entry><para><olink targetptr="gewsn" remap="internal">How to Enable or Disable the ppd-cache-update
Service</olink></para>
</entry>
</row><row><entry><para>Disable the <filename>application/print<?SolBook linebreak?>/ppd-cache-update</filename> service.</para>
</entry><entry><para>Use the <command>svcadm</command> command to disable the <filename>application/print<?SolBook linebreak?>/ppd-cache-update</filename> service.</para>
</entry><entry><para><olink targetptr="gewsn" remap="internal">How to Enable or Disable the ppd-cache-update
Service</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect1><sect1 id="gepre"><title>Overview of the PPD File Management Utility</title><indexterm><primary>administering PPD files</primary><secondary>overview</secondary>
</indexterm><indexterm><primary><command>ppdmgr</command> utility</primary><secondary>administering</secondary>
</indexterm><indexterm><primary>PPD files</primary><secondary>administering by using the <command>ppdmgr</command> utility</secondary>
</indexterm><para>To provide support for a wide range of printers, the Solaris print system
has the ability to use PostScript Printer Description (PPD) files. The PPD
File Manager (<command>/usr/sbin/ppdmgr</command>) provides a means of administering
PPD files on a system. This utility enables you to add PPD files to the system
and update printer information for printers that are not yet supported in
the running Solaris OS.</para><itemizedlist><para>With the <command>ppdmgr</command> utility, you can perform the following
tasks:</para><listitem><para>Add a PPD file to a PPD file repository on a system. </para>
</listitem><listitem><para>Supply a label that groups PPD files within a PPD file repository.</para>
</listitem><listitem><para>Update the information in the PPD cache file Solaris Print
Manager uses to display supported printer information.</para>
</listitem>
</itemizedlist><sect2 id="geqcc"><title>Adding PPD Files to a System</title><indexterm><primary><command>ppdmgr</command> utility</primary><secondary>adding a PPD file</secondary>
</indexterm><indexterm><primary>PPD files</primary><secondary>adding to a system</secondary>
</indexterm><para>When you add or modify a printer by using Solaris Print Manager, a <emphasis>PPD cache</emphasis> file, <filename>ppdcache</filename>, is referenced to
display printer driver information.  See <olink targetptr="gexki" remap="internal">Description
of the Printer Driver Field in Solaris Print Manager</olink>. The PPD File
Management utility generates the cache file by gathering printer information
from the PPD files in all of the PPD file repositories on a system.  To reflect
any changes that are made in Solaris Print Manager, the PPD cache file must
be updated.</para><itemizedlist><para>You can use the following methods to add a PPD file to a system:<indexterm><primary>methods for adding a PPD file to a system</primary></indexterm><indexterm><primary>adding a PPD file to a system</primary><secondary>methods</secondary></indexterm><indexterm><primary><command>lpadmin -n</command> command</primary><secondary>adding PPD files</secondary></indexterm><indexterm><primary><command>ppdmgr</command> utility</primary><secondary>adding PPD files </secondary><tertiary>methods</tertiary></indexterm><indexterm><primary><command>pkgadd</command> command</primary><secondary>using to add PPD files</secondary></indexterm></para><listitem><para><command>ppdmgr</command> utility</para>
</listitem><listitem><para><command>lpadmin</command> command with the <option>n</option> option</para>
</listitem><listitem><para><command>pkgadd</command> command</para>
</listitem>
</itemizedlist><para>When you add a PPD file to a system by using the <command>ppdmgr</command> utility
or the <command>lpadmin</command> <option>n</option> command, the changes
are reflected in Solaris Print Manager. If the PPD file is manually copied
to the system or added by using the <command>pkgadd</command> command, you
can use the <command>ppdmgr</command> utility to make sure that the new PPD
files are reflected in the cache file that is used by Solaris Print Manager.</para><para>Using the <command>ppdmgr</command> utility to add a PPD file to the
system provides more flexibility because you can specify what label is used
and where the file is stored. The <option>L</option> and <option>R</option> options
of the <command>ppdmgr</command> utility enable you to specify a label and
repository of your own choosing. See <olink targetptr="gecdb" remap="internal">Specifying a
PPD File Label</olink>. If you add a PPD files to a system by using the <command>lpadmin</command> <option>n</option> command or the <command>ppdmgr</command> utility
and do not specify a label or repository, the PPD file is stored in the <filename>user</filename> label directory within the <filename>user</filename> repository.
Similarly, if the source path to the PPD file that you provide is not from
an existing PPD file label within an existing PPD file repository on the system,
then the file is copied to the <filename>user</filename> label within the <filename>user</filename> repository.</para>
</sect2><sect2 id="gecdb"><title>Specifying a PPD File Label</title><indexterm><primary>PPD file label</primary><secondary>specifying</secondary>
</indexterm><indexterm><primary>specifying a PPD file label</primary>
</indexterm><para>A <emphasis>PPD file label</emphasis> describes a grouping of PPD files
and refers to a user-selected or default directory name within a PPD file
repository. When you use the <command>ppdmgr</command> utility to add a PPD
file to the system, you can optionally specify a label. Using labels allows
for easier organization of PPD files, which makes for easier identification
of PPD files when you add or modify a printer by using Solaris Print Manager.</para><para>You can also specify a file label when you request an update or a rebuild
of the PPD cache file by using the <option>u</option> or the <option>r</option> option
. If you do not specify a label, the <filename>user</filename> default label
is assigned to the PPD file. If you request an update or a rebuild of the
PPD cache file, the default label is <literal>all</literal>, which specifies
all PPD file repositories.</para><note><para>You cannot specify the <literal>all</literal> label when adding
a PPD file to a system by using the <command>ppdmgr</command> utility with
the <option>a</option> option. See <olink targetptr="geqos" remap="internal">PPD File Labels</olink> for
more information.</para>
</note>
</sect2><sect2 id="gewsi"><title>Specifying a PPD File Repository</title><indexterm><primary>PPD file repository</primary>
</indexterm><indexterm><primary>specifying a PPD file repository</primary>
</indexterm><para>You can specify a repository when adding a PPD file to a system by using
the <command>ppdmgr</command> utility or when requesting an update of the
PPD cache file. A <emphasis>repository</emphasis> is a directory where PPD
file information is stored. More than one PPD file repository can exist on
a system. PPD files that are supplied by third-party vendors are stored in
the <filename>vendor</filename> repository. PPD files that are added by system
administrators can be stored in the <filename>admin</filename> repository.</para><itemizedlist><para>The following are locations where PPD files are stored on a system:</para><listitem><para>The PPD files that are delivered with the Solaris OS are stored
in the <filename>system</filename> repository.</para>
</listitem><listitem><para>PPD files that are added manually by using the <command>ppdmgr
-a</command> command or the <command>lpadmin</command> <option>n </option> command
are stored in the <filename>user</filename> repository.</para>
</listitem><listitem><para>PPD files that are added manually by using the <command>ppdmgr</command> utility
with the <option>R</option> option are stored in the repository that you specify
with this option.</para>
</listitem><listitem><para>The <literal>all</literal> repository is used to specify all
the repositories on a system. You can specify the <command>all</command> repository
when requesting an update or a rebuild of the PPD cache file by using the <option>u</option> or <option>r</option> option of the <command>ppdmgr</command> command.
If no repository is specified, the default repository is <filename>user</filename>.
For more information, see <olink targetptr="geqby" remap="internal">How to Update or Rebuild
the PPD Cache File by Using the ppdmgr Utility</olink>.</para><note><para>You cannot specify the <literal>all</literal> repository when
adding a PPD file to a system by using the <command>ppdmgr</command> utility
with the <option>a</option> option. See <olink targetptr="geqmb" remap="internal">PPD File
Repositories</olink> for more information.</para>
</note>
</listitem>
</itemizedlist>
</sect2><sect2 id="geqql"><title>Locating PPD File Label and Repository Information
in Solaris Print Manager</title><indexterm><primary>PPD file label</primary><secondary>displaying in Solaris Print Manager</secondary>
</indexterm><indexterm><primary>Printer Driver field in Solaris Print Manager</primary><secondary>displaying PPD file labels</secondary>
</indexterm><para>The Printer Driver field in Solaris Print Manager now displays the PPD
file label and the PPD file repository abbreviation, in addition to the printer
driver information. The addition of the label and repository information assists
in the selection of the correct printer driver. This information is especially
useful in situations where multiple PPD files with identical names are located
on a system, within various label directories and repositories.</para><para>For more information, see <olink targetptr="gexki" remap="internal">Description of the
Printer Driver Field in Solaris Print Manager</olink>.</para>
</sect2>
</sect1><sect1 id="gfkqx"><title>Using the PPD File Manager (<command>ppdmgr</command>) Utility</title><task id="gecgu"><title>How to Add a PPD File to a System by Using the <command>ppdmgr</command> Utility</title><indexterm><primary>adding PPD files</primary><secondary>by using the <command>ppdmgr</command> utility</secondary>
</indexterm><indexterm><primary><command>ppdmgr</command> utility</primary><secondary>how to add PPD files</secondary>
</indexterm><indexterm><primary>PPD files</primary><secondary>how to add by using the <command>ppdmgr</command> utility</secondary>
</indexterm><tasksummary><para>This procedure describes how to use the <command>ppdmgr</command> utility
to add a new PPD file to the system. You can also specify a PPD file label,
PPD repository, or the source path of the PPD file, by using the appropriate
arguments with the <command>ppdmgr</command> <option>a</option> command. Note
that when you add a PPD file to the system by using the <command>ppdmgr</command> command,
the file is copied to the label and repository that you specify and then compressed.</para>
</tasksummary><procedure><step><para>Become superuser or assume an equivalent role.</para><para>Roles
contain authorizations and privileged commands. For more information about
roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para>
</step><step><para>Add the PPD file to the system.<indexterm><primary><command>ppdmgr</command> utility</primary><secondary>command-line options</secondary></indexterm><indexterm><primary>options of the <command>ppdmgr</command> command</primary></indexterm></para><screen># <userinput>ppdmgr -a <replaceable>ppd-file-path</replaceable> [ -L <replaceable>label</replaceable> ] [ -R <replaceable>repository</replaceable> ] [-w]</userinput></screen><variablelist><varlistentry><term><option>a</option></term><listitem><para>Copies the PPD file that is specified in <filename>ppd-file-path</filename> to
the PPD repository, then updates the information in the cache file to reflect
the change.</para><para>If the <option>L</option> option is not specified, the default label
that is assigned to the PPD file is <literal>user</literal>.</para><para>If the <option>R</option> option is not specified, the default repository
that is assigned to the PPD file is <filename>user</filename>.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>ppd-file-path</replaceable></term><listitem><para>Specifies the source path to the PPD file and the name of
that file. This file is used with the <option>a</option> option to add a copy
of <replaceable>ppd-file-path</replaceable> to the specified label within
the specified repository with the specified label. The <command>ppdmgr</command> utility
accepts a valid PPD file that has either a <filename>.ppd</filename> or <literal>.ppd.gz</literal> extension.</para>
</listitem>
</varlistentry><varlistentry><term><option>L</option> <replaceable>label</replaceable></term><listitem><para>Specifies a PPD file label. The default label is <filename>user</filename>.
 Label names must contain characters that are in the portable file name character
set. Label names must not begin with a hyphen (<literal>-</literal>) or contain
a semicolon (<literal>:</literal>).  Label names cannot be a reserved label
name.</para><itemizedlist><para>The following label names are reserved and cannot be used with the <option>a</option> option:</para><listitem><para><literal>caches</literal></para>
</listitem><listitem><para><literal>ppdcache</literal></para>
</listitem><listitem><para><literal>manufaliases</literal></para>
</listitem><listitem><para><literal>all</literal></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry><varlistentry><term><option>R</option> <replaceable>repository</replaceable></term><listitem><para>Specifies the name of a PPD file repository that represents
one of the PPD file installation locations. When using this option, one of
the following PPD file repositories can be specified:</para><itemizedlist><listitem><para><filename>user</filename> (default)</para>
</listitem><listitem><para><filename>admin</filename></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry><varlistentry><term><option>w</option></term><listitem><para>Displays the full path where the PPD file was copied. The <option>w</option> option is only valid if it is used with the <option>a</option> option.
Otherwise, this option is ignored.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Verify that the PPD file was added by using one of the following
methods:</para><stepalternatives><step><para>Check that the file is displayed in Solaris Print Manager:</para><substeps><step><para>Launch Solaris Printer Manager. See <olink targetptr="printsetup-6" remap="internal">How
to Start Solaris Print Manager</olink>.</para>
</step><step><para>Select Modify Printer Attributes (attached or network).</para>
</step><step><para>Select the printer for which you added the PPD file.</para><para>If
the PPD file that you specified was added successfully, the information is
displayed in the Printer Driver field. See <olink targetptr="gexki" remap="internal">Description
of the Printer Driver Field in Solaris Print Manager</olink>.</para>
</step>
</substeps>
</step>
</stepalternatives>
</step>
</procedure><example id="gewpf"><title>Adding a PPD File to a System by Using the <command>ppdmgr</command> utility</title><indexterm><primary>adding a PPD file (example of)</primary>
</indexterm><para>This example shows how to add a PPD file, <filename>myHPprinter.ppd</filename>,
to the system.</para><para>Note that in this example and the examples that follow the <replaceable>path</replaceable> that is specified varies.</para><screen># <userinput>ppdmgr -a /net/somesystem/myHPprinter.ppd</userinput></screen><para>The path to where the copy of the
PPD file can be found on the system is <filename>/var/lp/ppd/user/HP/myHPprinter.ppd.gz</filename>.</para><para>Using this command, with the <option>a</option> option, copies the file
to the <filename>user</filename> label within the <filename>user</filename> repository.</para>
</example><example id="gewob"><title>Adding a PPD File to a System With a Specified Label by Using the <command>ppdmgr</command> utility</title><para>This example shows how to add the PPD file <filename>myHPprinter.ppd</filename>,
with the specified label, <filename>Photos</filename>, to the system.</para><screen># <userinput>ppdmgr -a /net/somesystem/myHPprinter.ppd -L Photos</userinput></screen><para>The path to where the copy of the
PPD file can be found on the system is <filename>/var/lp/ppd/Photos/HP/myHPprinter.ppd.gz</filename>.</para><para>Using this command, with the <option>a</option> and the <option>L</option> options,
copies the PPD file to the <filename>Photos</filename> label within the <filename>user</filename> repository.</para>
</example><example id="gewnp"><title>Adding a PPD File to a System to a Specified Repository by Using the <command>ppdmgr</command> Utility</title><para>This example shows how to add a PPD file, <filename>myHPprinter.ppd</filename>,
to the <filename>admin</filename> repository on a system.</para><screen># <userinput>ppdmgr -a /net/somesystem/myHPprinter.ppd -R admin</userinput></screen><para>The path to where the copy of the
PPD file can be found on the system is <filename>/usr/local/share/ppd/user/HP/myHPprinter.ppd.gz</filename>.</para><para>Using this command with the <option>a</option> and <option>R</option> options,
copies the file to the <filename>user</filename> label directory within the <filename>admin</filename> repository.</para>
</example><example id="gewog"><title>Adding a PPD File to a System With a Specified Label to a Specified
Repository by Using the <command>ppdmgr</command> Utility</title><para>This example shows how to add a PPD file, <filename>myHPprinter.ppd</filename>,
to a system, specifying the <filename>Photos</filename> label and the <filename>admin</filename> repository.</para><screen># <userinput>ppdmgr -a /net/somesystem/myHPprinter.ppd -L Photos -R admin</userinput></screen><para>The path to where the copy of the PPD file can be found on the system
is <filename>/usr/local/share/ppd/Photos/HP/myHPprinter.ppd.gz</filename>.</para><para>Using this command with the <option>a</option>, <option>L</option> and <option>R</option> options copies the file to the <filename>Photos</filename> label
within the <filename>admin</filename> repository.</para>
</example><example id="gewoo"><title>Adding a PPD File to a System and Displaying the Full Path to Where
the File Was Copied by Using the <command>ppdmgr</command> Utility</title><para>This example shows how to add a PPD file, <filename>myHPprinter.ppd</filename>,
to a system, displaying the destination path of the PPD file. Use the <command>ppdmgr</command> command with this option to determine where on the system the PPD
file was copied.</para><screen># <userinput>ppdmgr -a /net/somesystem/myHPprinter.ppd -w</userinput></screen><para>The path to where the copy of the PPD file can be found on the system
is <filename>/var/lp/ppd/user/HP/myHPprinter.ppd.gz</filename>.</para><para>Using this command with the <option>a</option> and <option>w</option> options
copies the specified file to the <filename>user</filename> label within the <filename>user</filename> repository.</para><para>The <option>w</option> option is only valid when used in combination
with the <option>a</option> option. Otherwise, this option is ignored.</para>
</example><taskrelated role="see-also"><para>For a detailed description of the <command>ppdmgr</command> command-line
options and for guidelines on adding PPD files, see <olink targetptr="geqok" remap="internal">Description
of the Command-Line Options for the ppdmgr Utility</olink>.</para>
</taskrelated>
</task><task id="gechc"><title>How to Add a PPD File to a System by Using the <command>lpadmin
-n</command> Command</title><indexterm><primary>adding a PPD file</primary><secondary>by using the <command>lpadmin -n</command> command</secondary>
</indexterm><indexterm><primary><command>lpadmin -n</command>adding a PPD file</primary>
</indexterm><tasksummary><para>This procedure shows how to use the <command>lpadmin</command> command
to modify an existing print queue configuration to associate a specified PPD
file with the print queue.</para><para>If you use the <command>lpadmin</command> command with the <option>n</option> option
to add a PPD file to a system, you cannot specify a label or a repository.
Instead, the <filename>user</filename> label is assigned to the file, and
the file is then copied to the <filename>user</filename> repository. If you
want to specify a user-defined label or repository, use the <command>ppdmgr</command> utility
to add the PPD file. See <olink targetptr="gecgu" remap="internal">How to Add a PPD File to
a System by Using the ppdmgr Utility</olink>.</para>
</tasksummary><procedure><step><para>Become superuser or assume an equivalent role.</para><para>Roles
contain authorizations and privileged commands. For more information about
roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para>
</step><step><para>Modify an existing print queue by associating it with a PPD file.</para><screen># <userinput>lpadmin -p <replaceable>print-queue</replaceable> -n <replaceable>ppd-file-path</replaceable></userinput></screen><variablelist><varlistentry><term><command>lpadmin</command></term><listitem><para>Administrative command that is used to configure the LP print
service.</para>
</listitem>
</varlistentry><varlistentry><term><option>p</option> <replaceable>print-queue</replaceable></term><listitem><para>Specifies the print queue. Note that the print queue sometimes
referred to as the <replaceable>printer-name</replaceable>.</para>
</listitem>
</varlistentry><varlistentry><term><option>n</option></term><listitem><para>Copies the PPD file that is specified in the <replaceable>ppd-file-path</replaceable> to the default <literal>user</literal> label directory that
is located within the default <filename>user</filename> PPD file repository.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>ppd-file-path</replaceable></term><listitem><para>Specifies the source path to the PPD file and the name of
that file. This file is used with the <option>a</option> option to add a copy
of <replaceable>ppd-file-path</replaceable> to the system to the specified
label within the specified repository. The <command>ppdmgr</command> utility
accepts a valid PPD file with either a <filename>.ppd</filename> or <literal>.ppd.gz</literal> extension.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Verify that the PPD file was added by using one of the following
methods:</para><stepalternatives><step><para>Check that the file is displayed in Solaris Print Manager:</para><substeps><step><para>Launch Solaris Printer Manager. See <olink targetptr="printsetup-6" remap="internal">How
to Start Solaris Print Manager</olink></para>
</step><step><para>Select Modify Printer Attributes (attached or network).</para>
</step><step><para>Select the print queue that you specified in Step 2 of this procedure.</para><para>If the PPD file that is associated with the print queue was added
successfully, it is displayed in the Printer Driver field. See <olink targetptr="gexki" remap="internal">Description of the Printer Driver Field in Solaris Print
Manager</olink>.</para>
</step>
</substeps>
</step><step><para>Use the <command>lpstat</command> command to verify the PPD file
was added:</para><screen>% lpstat -p <replaceable>print-queue</replaceable> -l</screen><para>If the PPD file was added to the print queue successfully, the PPD file
name is included in the PPD field of the <command>lpstat</command> command's
output.</para>
</step>
</stepalternatives>
</step>
</procedure><example id="geqem"><title>Adding a PPD File to an Existing Print Queue by Using the <command>lpadmin
-n</command> Command</title><indexterm><primary>modifying a print queue</primary><secondary>by using the <command>lpadmin</command> <option>n</option> command</secondary>
</indexterm><para>This example shows how to modify the print queue, <literal>printer1</literal>,
to associate it with a copy of the specified PPD file.</para><screen># <userinput>lpadmin -p printer1 -n /<replaceable>path</replaceable>/mynewHPppdfile.ppd</userinput></screen><para>The specified PPD file is stored in <filename>/var/lp/ppd/user/HP/mynewHPppdfile.ppd.gz</filename>.</para>
</example>
</task><sect2 id="gewtf"><title>Updating the PPD Cache File</title><para>An update of the PPD cache file on a system updates the existing information
in the PPD cache file.</para><itemizedlist><para>You might the request and update of the PPD cache file on a system in
the following instances:</para><listitem><para>If you add a PPD file to the system by using the <command>pkgadd</command> command.</para>
</listitem><listitem><para>If you copied a PPD file to a label directory, within a known
PPD file repository manually.</para>
</listitem>
</itemizedlist><para>Any changes that you make are reflected in Solaris Print Manager after
the update has completed.</para>
</sect2><sect2 id="gexmf"><title>Rebuilding the PPD Cache File</title><para>A rebuild of the PPD cache file removes the existing cache and builds
a completely new cache. This process can be time-consuming, especially if
many PPD files are on the system. Therefore, only request a rebuild of the
PPD cache file in troubleshooting situations. For guidelines that pertain
to updating and rebuilding the PPD cache file, see <olink targetptr="geqok" remap="internal">Description
of the Command-Line Options for the ppdmgr Utility</olink>.</para>
</sect2><task id="geqby"><title>How to Update or Rebuild the PPD Cache File by Using
the <command>ppdmgr</command> Utility</title><indexterm><primary>requesting an update of the PPD cache file</primary>
</indexterm><indexterm><primary>updating the PPD cache file</primary>
</indexterm><indexterm><primary>PPD cache file</primary><secondary>updating by using the <command>ppdmgr</command> utility</secondary>
</indexterm><indexterm><primary>rebuilding the PPD cache file</primary>
</indexterm><indexterm><primary>PPD cache file</primary><secondary>rebuilding by using the <command>ppdmgr</command> utility</secondary>
</indexterm><tasksummary><para>This procedure describes how to update or rebuild the PPD cache file
by using either the <option>u</option> or the <option>r</option> option of
the <command>ppdmgr</command> utility.</para><itemizedlist><listitem><para>To update the PPD cache file, use the <command>ppdmgr</command> command
with the <option>u</option> option.</para>
</listitem><listitem><para>To rebuild the PPD cache file, use the <command>ppdmgr</command> command
with the <option>r</option> option.</para>
</listitem>
</itemizedlist>
</tasksummary><procedure><step><para>Become superuser or assume an equivalent role.</para><para>Roles
contain authorizations and privileged commands. For more information about
roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para>
</step><step><para> Update or rebuild the PPD cache file to reflect any recent changes.</para><screen># <userinput>ppdmgr -u | -r [ -R <replaceable>repository</replaceable> ] [ -L <replaceable>label</replaceable> ]</userinput></screen><variablelist><varlistentry><term><option>u</option></term><listitem><para>Updates the PPD cache file with information about the PPD
file, or files, that are assigned to the specified label within the specified
repository. The default label is <filename>user</filename>. The default repository
is also <filename>user</filename>. If no changes are identified, no changes
are made to the cache file.</para>
</listitem>
</varlistentry><varlistentry><term><option>r</option></term><listitem><para>Removes the existing PPD cache file, then rebuilds the file
with the PPD file information for the PPD file, or files, within the specified
label.</para><para>If no label is specified, the default label is <literal>user</literal>,
within the specified repository. If a repository is not specified, the default
repository is also <filename>user</filename>.</para><para>Under normal circumstances, you do not need to request a rebuild of
the PPD cache file. Use this option only if you suspect that the PPD cache
file has become corrupted.</para>
</listitem>
</varlistentry><varlistentry><term><option>R</option> <replaceable>repository</replaceable></term><listitem><para>Specifies a PPD file repository to update. You can specify
one of the following PPD file repositories:</para><itemizedlist><listitem><para><filename>admin</filename></para>
</listitem><listitem><para><filename>all</filename> (Specifies all available PPD file
repositories on a system)</para>
</listitem><listitem><para><filename>system</filename></para>
</listitem><listitem><para><filename>user</filename> (default)</para>
</listitem><listitem><para><filename>vendor</filename></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry><varlistentry><term><option>L</option> <replaceable>label</replaceable></term><listitem><para>Specifies a PPD file label.</para><para>The default label is <filename>user</filename>.  Label names must contain
characters that are in the portable file name character set. Label names must
not begin with a hyphen (<literal>-</literal>) or contain a semicolon (<literal>:</literal>).  Label names cannot be a reserved label name.</para><itemizedlist><para>The following label names are reserved:</para><listitem><para><literal>caches</literal></para>
</listitem><listitem><para><literal>ppdcache</literal></para>
</listitem><listitem><para><literal>manufaliases</literal></para>
</listitem><listitem><para><literal>all</literal></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Verify that the PPD file was added by using one of the following
methods:</para><stepalternatives><step><para>Check that the file is displayed in Solaris Print Manager:</para><substeps><step><para>Launch Solaris Printer Manager. See <olink targetptr="printsetup-6" remap="internal">How
to Start Solaris Print Manager</olink>.</para>
</step><step><para>Select Modify Printer Attributes (attached or network).</para>
</step><step><para>Select the print queue for which you added the PPD file in Step
2 of this procedure.</para><para>If the PPD file that you specified was added
successfully, the information is displayed in the Printer Driver field. See <olink targetptr="gexki" remap="internal">Description of the Printer Driver Field in Solaris Print
Manager</olink>.</para>
</step>
</substeps>
</step><step><para>Use the <command>lpstat</command> command to verify the PPD file
was added:</para><screen>% <userinput>lpstat -p <replaceable>printer-name</replaceable> -l</userinput></screen><para>If the PPD file was added to the system successfully, the PPD file name
is included in the PPD field of the <command>lpstat</command> command's output.</para>
</step>
</stepalternatives>
</step>
</procedure><example id="geqfa"><title>Updating the PPD Cache File by Using the <command>ppdmgr</command> Utility</title><para>This example shows how to update the PPD cache file to reflect information
from the PPD files that are assigned in all the labels within the <filename>user</filename> repository.</para><screen># <userinput>ppdmgr -u</userinput></screen><para>This example shows how to update the PPD cache file to reflect information
from the PPD files that are assigned in the <filename>Photos</filename> label
within the <filename>user</filename> repository.</para><screen># <userinput>ppdmgr -u -L Photos</userinput></screen><para>This example shows how to update the PPD cache file to reflect the information
from the PPD files that are assigned in all the labels within the <filename>admin</filename> repository.</para><screen># <userinput>ppdmgr -u -R system</userinput></screen><para>This example shows how to update the PPD cache file to reflect information
from the PPD files that are assigned in the <filename>Photos</filename> label
within the <filename>admin</filename> repository.</para><screen># <userinput>ppdmgr -u -L Photos -R admin</userinput></screen>
</example>
</task><sect2 id="gewte"><title>Managing the <filename>ppd-cache-update</filename> Service</title><indexterm><primary>managing the <filename>print/ppd-cache-update</filename> service</primary><secondary>through SMF</secondary>
</indexterm><indexterm><primary>SMF</primary><secondary>managing the <filename>print/ppd-cache-update</filename> service</secondary>
</indexterm><indexterm><primary>service instance</primary><secondary><filename>svc:/application/print/ppd-cache-update</filename></secondary>
</indexterm><para>The Service Management Facility (SMF) service for updating the PPD cache
file, <filename>application/print/ppd-cache-update</filename>, is run once
during system reboot to ensure that modifications made to any PPD file repositories
on a system are reflected in the <filename>ppdcache</filename> file. The service
instance is <filename>svc:/application/print/ppd-cache-update</filename>.
This service is enabled by default when you install the Solaris software.
To enable or disable the service, use the <command>svcadm</command> command.</para><note><para>During a software installation or an upgrade, the cache file entries
are generated for all PPD files that are delivered to the system repository, <filename>/var/lp/ppd</filename>. As a result, when the system reboots, it might take
longer for the service to make the transition to an online state.</para>
</note><para>For instructions, see <olink targetptr="gewsn" remap="internal">How to Enable or Disable
the ppd-cache-update Service</olink>. For information about using SMF and
the <command>svcadm</command> command, see the <olink targetdoc="refman" targetptr="smf-5" remap="external"><citerefentry><refentrytitle>smf</refentrytitle><manvolnum>5</manvolnum></citerefentry></olink> and <olink targetdoc="refman" targetptr="svcadm-1m" remap="external"><citerefentry><refentrytitle>svcadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> man
pages.</para>
</sect2><task id="gewsn"><title>How to Enable or Disable the <filename>ppd-cache-update</filename> Service</title><indexterm><primary>SMF</primary><secondary>enabling and disabling <filename>application/print/ppd-cache-update</filename> services</secondary>
</indexterm><indexterm><primary>enabling and disabling <filename>application/print/ppd-cache-update</filename> services</primary>
</indexterm><procedure><step><para>Become superuser or assume an equivalent role.</para><para>Roles
contain authorizations and privileged commands. For more information about
roles, see <olink targetdoc="sysadv6" targetptr="rbactask-15" remap="external"><citetitle remap="section">Configuring RBAC (Task Map)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para>
</step><step><para>To enable or disable the <filename>application/print/ppd-cache-update</filename> service, type:</para><screen># <userinput>svcadm enable|disable application/print/ppd-cache-update</userinput></screen>
</step><step><para>To verify that the service is enabled or disabled, type:</para><screen>% <userinput>svcs application/print/ppd-cache-update</userinput></screen><para>If the service is enabled, the output is as follows:</para><screen>% svcs application/print/ppd-cache-update
STATE          STIME    FMRI
online         Apr_26   svc:/application/print/ppd-cache-update:default</screen><para>If the service is disabled, the output is as follows:</para><screen>% svcs application/print/ppd-cache-update
STATE          STIME    FMRI
diabled        Apr_26   svc:/application/print/ppd-cache-update:default</screen>
</step>
</procedure><taskrelated role="see-also"><para>For step-by-step instructions on using the <command>ppdmgr</command> utility
with the <option>u</option> option to update the PPD cache file, see <olink targetptr="geqby" remap="internal">How to Update or Rebuild the PPD Cache File by Using the
ppdmgr Utility</olink>.</para>
</taskrelated>
</task>
</sect1>
</chapter><?Pub *0000043387 0?>