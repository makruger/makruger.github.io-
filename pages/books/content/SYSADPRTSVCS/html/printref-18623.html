<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>LP Print Service - System Administration Guide: Solaris Printing</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Solaris Printing</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gdtev.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ppdref-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="printintro-1.html">1.&nbsp;&nbsp;Introduction to Printing in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="printplan-1.html">2.&nbsp;&nbsp;Planning for Printing in the Solaris Operating System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printsetup-33230.html">3.&nbsp;&nbsp;Setting Up Printing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printers-33230.html">4.&nbsp;&nbsp;Setting Up Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printadmin-15883.html">5.&nbsp;&nbsp;Administering Printers by Using Solaris Print Manager and LP Print Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="proto-1.html">6.&nbsp;&nbsp;Administering Printers That Use Network Printing Protocols (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printcust-66310.html">7.&nbsp;&nbsp;Customizing Printing Services and Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="forms-1.html">8.&nbsp;&nbsp;Administering Character Sets, Filters, Forms, and Fonts (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ppdadmin-1.html">9.&nbsp;&nbsp;Administering Printers by Using the PPD File Management Utility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printdesktop-1.html">10.&nbsp;&nbsp;Setting Up and Administering Printers From the Desktop (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printref-76596.html">11.&nbsp;&nbsp;Printing in the Solaris Operating System (Reference)</a></p>
<p class="toc level2"><a href="gdtev.html">Solaris Print Manager</a></p>
<div class="onpage">
<p class="toc level2"><a href="">LP Print Service</a></p>
</div>
<p class="toc level2"><a href="ppdref-1.html">Using PPD Files To Set Up Printers</a></p>
<p class="toc level2"><a href="geqnf.html">PPD File Management Utility</a></p>
<p class="toc level2"><a href="gdkmc.html">How PAPI Is Implemented in the Solaris OS</a></p>
<p class="toc level1 tocsp"><a href="tsprint-34397.html">12.&nbsp;&nbsp;Troubleshooting Printing Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;Using the Internet Printing Protocol</a></p>
<p class="toc level1 tocsp"><a href="gdqrm.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="printref-18623"></a><h3>LP Print Service</h3>
<a name="printref-ix164"></a><p>This section describes the directory structure, files, and logs of the LP print
service.</p>

<a name="printref-92628"></a><h4>LP Print Service Commands</h4>

<hr><p><b>Note - </b>The LP Print Service client commands have been modified to be a consumer
of the FSG OpenPrinting Open Standard Print API (PAPI). These print commands are
layered on top of the PAPI. See <a href="gdkmc.html">How PAPI Is Implemented in the Solaris OS</a> for more information.</p>
<hr>
<p>The following table lists frequently used LP print service commands. </p><a name="printref-16924"></a><h6>Table&nbsp;11-2 LP Print Service Commands</h6><table><col width="33%"><col width="33%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Command</p></th>
<th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Man Page</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>enable</tt></p></td>
<td align="left" valign="top" scope="row"><p>Activate
a printer</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2239/enable-1?a=view"><tt>enable</tt>(1)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>cancel</tt></p></td>
<td align="left" valign="top" scope="row"><p>Cancel a print request</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2239/cancel-1?a=view"><tt>cancel</tt>(1)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lp</tt></p></td>
<td align="left" valign="top" scope="row"><p>Send one or more file or files to
a printer</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2239/lp-1?a=view"><tt>lp</tt>(1)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpstat</tt></p></td>
<td align="left" valign="top" scope="row"><p>Report the status of the LP print service</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2239/lpstat-1?a=view"><tt>lpstat</tt>(1)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>disable</tt></p></td>
<td align="left" valign="top" scope="row"><p>Deactivate on or more
printers</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2239/enable-1?a=view"><tt>enable</tt>(1)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>accept</tt></p></td>
<td align="left" valign="top" scope="row"><p>Permit print requests to be queued for a specific destination</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/accept-1m?a=view"><tt>accept</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>reject</tt></p></td>
<td align="left" valign="top" scope="row"><p>Prevent print requests
from being queued for a specific destination</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/accept-1m?a=view"><tt>accept</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpadmin</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set up or change a printer
configuration</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpadmin-1m?a=view"><tt>lpadmin</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpfilter</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set up or change filter definitions</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpfilter-1m?a=view"><tt>lpfilter</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpforms</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set up or change preprinted forms</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpforms-1m?a=view"><tt>lpforms</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpadmin</tt></p></td>
<td align="left" valign="top" scope="row"><p>Mount a
form</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpadmin-1m?a=view"><tt>lpadmin</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpmove</tt></p></td>
<td align="left" valign="top" scope="row"><p>Move output requests from one destination to another destination</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpmove-1m?a=view"><tt>lpmove</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpsched</tt></p></td>
<td align="left" valign="top" scope="row"><p>Start the LP print
service scheduler</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpsched-1m?a=view"><tt>lpsched</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpshut</tt></p></td>
<td align="left" valign="top" scope="row"><p>Stop the LP print service scheduler</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpshut-1m?a=view"><tt>lpshut</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>lpusers</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set or change the default priority
and priority limits that can be requested of the LP print service by
users </p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/lpusers-1m?a=view"><tt>lpusers</tt>(1M)</a></p></td>
</tr>
</table><p>For information about Solaris print commands that have been modified for use with
the PAPI, see <a href="gdkmc.html">How PAPI Is Implemented in the Solaris OS</a>.</p>

<a name="printref-34"></a><h4>Daemons and LP Internal Files</h4>
<p><a name="printref-ix174"></a><a name="printref-ix175"></a><a name="printref-ix177"></a><a name="printref-ix179"></a><a name="printref-ix180"></a>The <tt>/usr/lib/lp</tt> directory contains daemons and files used by the LP print service,
as described in the following table.</p><a name="printref-86958"></a><h6>Table&nbsp;11-3 Contents of the <tt>/usr/lib/lp</tt> Directory</h6><table><col width="22%"><col width="27%"><col width="50%"><tr><th align="left" valign="top" scope="column"><p>File</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>bin</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Contains files for generating printing alerts, slow filters,
and queue management programs.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>model</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Contains the standard printer interface program.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>postscript</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Contains all PostScript filter programs
provided by the LP print service. These filters come with descriptor files in
the <tt>/etc/lp/fd</tt> directory. These files tell the LP print service the characteristics of
the filters and where to locate them.</p></td>
</tr>
</table>

<a name="printref-32"></a><h4>LP Print Service Directories</h4>
<p><a name="printref-ix166"></a>The files of the LP print service are distributed among the directories that
are shown in the following table.</p><a name="printref-64046"></a><h6>Table&nbsp;11-4 Directories for the LP Print Service</h6><table><col width="30%"><col width="70%"><tr><th align="left" valign="top" scope="column"><p>Directory</p></th>
<th align="left" valign="top" scope="column"><p>Contents</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/bin</tt></p></td>
<td align="left" valign="top" scope="row"><p>The LP print service user commands.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/etc/lp</tt></p></td>
<td align="left" valign="top" scope="row"><p>A hierarchy of
LP server configuration files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/share/lib</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>terminfo</tt> database directory.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/lib/print</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>lp</tt> conversion scripts, <tt>in.lpd</tt> daemon, and
the <tt>printd</tt> daemon. The <tt>printd</tt> daemon transfers all pending jobs in the<tt>/var/spool/print</tt> directory once
per minute. When no jobs are remaining to transfer, the <tt>printd</tt> daemon exits.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/sbin</tt></p></td>
<td align="left" valign="top" scope="row"><p>The
LP print service administrative commands</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/lib/lp</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>lpsched</tt> program, binary files, PostScript filters, and the
<tt>model</tt> directory, which contains the standard printer interface program.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/var/lp/logs</tt></p></td>
<td align="left" valign="top" scope="row"><p>LP log files such as
<tt>lpsched.</tt><i>n</i> (which includes messages from <tt>lpsched</tt>) and <tt>requests.</tt><i>n</i> (which includes information about completed print
requests).</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/var/spool/lp</tt></p></td>
<td align="left" valign="top" scope="row"><p>The spooling directory where files are queued for printing.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/var/spool/print</tt></p></td>
<td align="left" valign="top" scope="row"><p>The staging area for
LP print service client-side requests.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/etc/lp/model/uri</tt></p></td>
<td align="left" valign="top" scope="row"><p>The location of the interface script that process
<i>device-uri</i> information.</p></td>
</tr>
</table>

<a name="printref-11882"></a><h4>LP Print Service Configuration Files</h4>
<a name="printref-ix167"></a><p>The <tt>lpsched</tt> daemon stores configuration information  in the <tt>/etc/lp</tt> directory, as described
in the following table.</p>
<hr><p><b>Caution - </b><a name="printref-ix168"></a><a name="indexterm-268"></a><a name="printref-ix169"></a>The configuration files listed in this table are private interfaces. These files are
subject to change in future releases. You should not build software that relies
on these files being in their current locations or that relies on the
data being in the format currently used. </p>
<hr>
<a name="printref-69325"></a><h6>Table&nbsp;11-5 Contents of the <tt>/etc/lp</tt> Directory</h6><table><col width="24%"><col width="30%"><col width="45%"><tr><th align="left" valign="top" scope="column"><p>File</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>classes</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Files identifying classes provided by
the <tt>lpadmin -c</tt> command.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>fd</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Description of existing filters.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>filter.table</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Print filter look-up table.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>forms</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Location to put files
for each form. Initially, this directory is empty.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>interfaces</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Printer interface program files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>logs</tt></p></td>
<td align="left" valign="top" scope="row"><p>Link to
<tt>/var/lp/logs</tt></p></td>
<td align="left" valign="top" scope="row"><p>Log files of printing activities.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>model</tt></p></td>
<td align="left" valign="top" scope="row"><p>Link to <tt>/usr/lib/lp/model</tt></p></td>
<td align="left" valign="top" scope="row"><p>The standard printer interface program.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>printers</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Directories for
each local printer. Each directory contains configuration information and alert files for an
individual printer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pwheels</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Print wheel files or cartridge files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ppd</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Each local queue that is configured
with a PPD file has a copy of the PPD file placed here.</p></td>
</tr>
</table><p><a name="printref-ix171"></a>These configuration files serve a function similar to the <tt>/etc/printcap</tt> file on LPD-based print
servers. </p>
<hr><p><b>Note - </b>You can check the contents of the configuration files, but you should not
edit these files directly. Instead, use the <tt>lpadmin</tt> command to make configuration changes.
Your changes are written to the configuration files in the <tt>/etc/lp</tt> directory. The
<tt>lpsched</tt> daemon administers and updates the configuration files.</p>
<hr>
<p><a name="printref-ix172"></a>The <tt>/etc/lp/printers</tt> directory has a subdirectory for each local printer that is
known to the system. The following example shows the <tt>/etc/lp/printers</tt> subdirectories of printers <tt>sparc1</tt>
and <tt>luna</tt>. </p><pre>$ <tt><b>ls -l /etc/lp/printers</b></tt>
drwxrwxr-x 2 lp lp 512 Jan 23 23:53 luna
drwxrwxr-x 2 lp lp 512 Jan 11 17:50 sparc1</pre><p>The following table describes the files within each printer-specific directory.</p><table><col width="50%"><col width="50%"><tr><th align="left" valign="top" scope="column"><p>File Name</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>alert.sh</tt></p></td>
<td align="left" valign="top" scope="row"><p>Shell to execute
in response to alerts</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>alert.vars</tt></p></td>
<td align="left" valign="top" scope="row"><p>Alert variables</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>configuration</tt></p></td>
<td align="left" valign="top" scope="row"><p>Configuration file</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>users.deny</tt></p></td>
<td align="left" valign="top" scope="row"><p>List of users to whom printer access
is denied</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>comment</tt></p></td>
<td align="left" valign="top" scope="row"><p>Printer description</p></td>
</tr>
</table><p>The configuration file for the printer <tt>luna</tt>, <tt>/etc/lp/printers/luna/configuration</tt>, would typically appear as
follows:</p><pre>Banner: on: Always
Content types: PS
Device: /dev/term/b
Interface: /usr/lib/lp/model/standard
Printer type: PS
Modules: default</pre>

<a name="printref-33"></a><h4>The <tt>terminfo</tt> Database</h4>
<a name="printref-ix173"></a><p>The <tt>/usr/share/lib</tt> directory contains the <tt>terminfo</tt> database directory. This directory contains definitions
for many types of terminals and printers. The LP print service uses information
in the <tt>terminfo</tt> database to perform the following tasks:</p>
<ul><li><p>Initializes a printer</p></li>
<li><p>Establishes a selected page size, character pitch, line pitch, and character set</p></li>
<li><p>Communicates the sequence of codes to a printer</p></li></ul>
<p>Each printer is identified in the <tt>terminfo</tt> database with a short name. For
a description of the structure of the <tt>terminfo</tt> database, see <a href="printplan-29.html#printplan-15">Printer Type</a>. If necessary,
you can add entries to the <tt>terminfo</tt> database, but doing so is tedious and
time-consuming. For more information, see <a href="emjin.html#printcust-11157">Adding a <tt>terminfo</tt> Entry for an Unsupported Printer</a>.</p>

<a name="printplan-17"></a><h4>Printer Names in the <tt>terminfo</tt> Database</h4>
<p>Information about each printer type is stored in the <tt>terminfo</tt> database (<tt>/usr/share/lib/terminfo</tt>). This
information includes the printer capabilities and initialization control data. The printer you install must
correspond to an entry in the <tt>terminfo</tt> database.</p><pre>$ <tt><b>pwd</b></tt>
/usr/share/lib/terminfo
$ <tt><b>ls</b></tt>
1  3  5  7  9  B  H  P  a  c  e  g  i  k  m  o  q  s  u  w  y
2  4  6  8  A  G  M  S  b  d  f  h  j  l  n  p  r  t  v  x  z
$ </pre><p>Each subdirectory contains compiled database entries for terminals or printers. The entries are
organized by the first letter of the printer or terminal type. For example,
if you have an Epson printer, look in the <tt>/usr/share/lib/terminfo/e</tt> directory to
find your particular model of Epson printer.</p><pre>$ <tt><b>cd /usr/share/lib/terminfo/e</b></tt>
$ <tt><b>ls</b></tt>
emots           ep2500+high   ep48            ergo4000      exidy2500
env230          ep2500+low    epson2500       esprit
envision230     ep40          epson2500-80    ethernet
ep2500+basic    ep4000        epson2500-hi    ex3000
ep2500+color    ep4080        epson2500-hi80  exidy
$ </pre><p>The entries for Epson printers begin with <tt>epson</tt>.</p><p>If you have an NEC printer, look in the <tt>/usr/share/lib/terminfo/n</tt> directory for
your NEC printer model.</p><pre>$ <tt><b>cd /usr/share/lib/terminfo/n</b></tt>
$ <tt><b>ls</b></tt>
ncr7900        ncr7900iv      netronics      network        nuc
ncr7900-na     ncr7901        netty          netx           nucterm
ncr7900i       nec            netty-Tabs     newhp
ncr7900i-na    net            netty-vi       newhpkeyboard
$ </pre><p>The <tt>nec</tt> entry in this directory is for the NEC printer. </p>

<a name="printref-22672"></a><h4>LP Print Service Log Files</h4>
<a name="printref-ix181"></a><p><a name="printref-ix182"></a>The LP print service maintains two sets of log files that are described
in the following table.</p><table><col width="50%"><col width="50%"><tr><th align="left" valign="top" scope="column"><p>Log File Name</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>syslogd</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set <tt>lpr.debug</tt> in <tt>/etc/syslog.conf</tt> to enable LP
print service logging</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/var/spool/lp</tt></p></td>
<td align="left" valign="top" scope="row"><p>A list of current requests that are in the print
queue</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/var/lp/logs/requests</tt></p></td>
<td align="left" valign="top" scope="row"><p>An ongoing history of print requests</p></td>
</tr>
</table>

<a name="printref-35"></a><h4>Print Queue Logs</h4>
<a name="printref-ix183"></a><a name="printref-ix184"></a><p><a name="printref-ix185"></a><a name="printref-ix186"></a>The scheduler for each system keeps a log of print requests in the
<tt>/var/spool/lp/tmp/</tt><i>system</i> and <tt>/var/spool/lp/requests/</tt><i>system</i> directories. Each print request has two files, one file in
each directory, that contain information about the request. The information in the <tt>/var/spool/lp/requests/</tt><i>system</i>
directory can be accessed only by superuser or <tt>lp</tt>. The information in the <tt>/var/spool/lp/tmp/</tt><i>system</i>
directory can be accessed only by the user who submitted the request, superuser,
or <tt>lp</tt>.</p><p>The following example shows the contents of the <tt>/var/spool/lp/tmp/starbug</tt> directory:</p><pre>$ <tt><b>ls /var/spool/lp/tmp/starbug</b></tt>
5     5-0
# <tt><b>cat 5-0</b></tt>
C 1
D print1
F /etc/profile
P 20
T /etc/profile
t simple
U root
s 0000
v 2</pre><p>These files remain in their directories only as long as the print
request is in the queue. Once the print request is finished, the information
in the files is combined and appended to the <tt>/var/lp/logs/requests</tt> file. This file is
described in the next section.</p><p>Use the information in the <tt>/var/spool/lp/logs</tt> directory if you need to track the
status of a print request that is currently in the queue.</p>

<a name="printref-36"></a><h4>History Log Files</h4>
<a name="printref-ix187"></a><a name="printref-ix188"></a><p>The LP print service records a history of printing services in two
log files, <tt>lpsched</tt> and <tt>requests</tt>. These log files are located in the <tt>/var/lp/logs</tt> directory. You
can use the information in these log files to diagnose and troubleshoot printing
problems. An example of the contents of the <tt>/var/lp/logs</tt> directory is as follows:</p><pre># <tt><b>cd /var/lp/logs</b></tt>
# <tt><b>ls</b></tt>
lpsched.1    requests    requests.2
lpsched      lpsched.2   requests.1
# </pre><p>The two most important log files for troubleshooting are the following:</p>
<ul><li><p>The <tt>lpsched</tt> log file &mdash; Contains information about local printing requests.</p></li>
<li><p>The <tt>requests</tt> log file &mdash; Contains information about print requests that are completed and no longer in the print queue.</p></li></ul>
<p>The <tt>requests</tt> log file has a simple structure so that you can extract
data using common UNIX shell commands. Requests are listed in the order they
are printed. They are also separated by lines showing their request IDs. Each
line below the separator line, the line that starts with =, is marked
with a single letter that identifies the kind of information contained in that
line. Each letter is separated from the data by a single space.</p><p>The following example shows the contents of a <tt>requests</tt> log file:</p><pre># <tt><b>pwd</b></tt>
/var/lp/logs
# <tt><b>tail requests.2</b></tt>
= print1-3, uid 0, gid 1, size 206662, Wed Mar 14 08:56:30 MST 2003
z print1
C 1
D print1
F /usr/dict/words
P 20
T /usr/dict/words
t simple
U root
s 0x0014
v 2
#</pre><p><a name="printref-ix189"></a><a name="printref-ix190"></a>The following table shows the letter codes and the content of their corresponding lines
in the <tt>requests</tt> log file.  </p><a name="printref-68125"></a><h6>Table&nbsp;11-6 Codes in the <tt>requests</tt> Log File</h6><table><col width="19%"><col width="80%"><tr><th align="left" valign="top" scope="column"><p>Letter</p></th>
<th align="left" valign="top" scope="column"><p>Content of Line</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>=</tt></p></td>
<td align="left" valign="top" scope="row"><p>The separator line, which
contains the following items: request ID, user ID (UID), and group IDs (GIDs)
of the user, the total number of bytes in the original (unfiltered) file
size, and the time when the request was queued.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>z</tt></p></td>
<td align="left" valign="top" scope="row"><p>The name of the printer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>C</tt></p></td>
<td align="left" valign="top" scope="row"><p>The
number of copies printed.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>D</tt></p></td>
<td align="left" valign="top" scope="row"><p>The printer or class destination, or the word <tt>any</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>F</tt></p></td>
<td align="left" valign="top" scope="row"><p>The
name of the file printed. The line is repeated for each file
printed. Files were printed in the order shown.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>f</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) The name of the form
used.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>H</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) One of three types of special handling: resume, hold, and immediate. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>N</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional)
The type of alert used when the print request was successfully completed. The
type is the letter <tt>M</tt> if the user was notified by email or
<tt>W</tt> if the user was notified by a message to the terminal.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>O</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) The
printer-dependent <tt>-o</tt> options. For example, <tt>nobanner</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>P</tt></p></td>
<td align="left" valign="top" scope="row"><p>The priority of the print request.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>p</tt></p></td>
<td align="left" valign="top" scope="row"><p>The list of
pages printed.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>r</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) A single-letter line that is included if the user asked
for &ldquo;raw&rdquo; processing of the files with the <tt>lp -r</tt> command.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>S</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) The character set,
print wheel, or cartridge used.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>T</tt></p></td>
<td align="left" valign="top" scope="row"><p>The title placed on the banner page.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>t</tt></p></td>
<td align="left" valign="top" scope="row"><p>The type
of content found in the files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>U</tt></p></td>
<td align="left" valign="top" scope="row"><p>The name of the user who submitted
the print request.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>s</tt></p></td>
<td align="left" valign="top" scope="row"><p>The outcome of the request, shown as a combination of
individual bits expressed in hexadecimal format. Several bits are used internally by the
print service. The bits and what they mean are described in the following
table.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>v</tt></p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>0 &mdash; Identifies that the print job originated from the <tt>in.1pd</tt> print daemon or another system on the network.</p></li>
<li><p>2 &mdash; Identifies that the print job originated from the <tt>/usr/bin/lp</tt> or <tt>/usr/ucb/lpr</tt> commands.</p></li>
<li><p>1 &mdash; Identifies that the print job originated from an older version of the printing software.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>x</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) The slow filter used for the print request.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>Y</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) The list of
special modes for the print filters used to print the request.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>z</tt></p></td>
<td align="left" valign="top" scope="row"><p>(Optional) The printer
used for the request. This printer differs from the destination (the <tt>D</tt> line)
if the request was queued for any printer or a class of printers,
or if the request was moved to another destination.</p></td>
</tr>
</table><p>The following table shows the outcome codes in the LP <tt>requests</tt> log file
and their descriptions.</p><a name="printref-25174"></a><h6>Table&nbsp;11-7 Outcome Codes in the <tt>requests</tt> Log File</h6><table><col width="30%"><col width="70%"><tr><th align="left" valign="top" scope="column"><p>Outcome Code</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0001</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request was held pending resume.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0002</tt></p></td>
<td align="left" valign="top" scope="row"><p>Slow filtering is running.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0004</tt></p></td>
<td align="left" valign="top" scope="row"><p>Slow
filtering finished successfully.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0008</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request is on the printer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0010</tt></p></td>
<td align="left" valign="top" scope="row"><p>Printing finished successfully.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0020</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request was
held pending user change.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0040</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request was canceled.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0080</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request will print next.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0100</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request
failed filtering or printing.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0200</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request is in transit to a remote printer
(obsolete).</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0400</tt></p></td>
<td align="left" valign="top" scope="row"><p>The user will be notified.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x0800</tt></p></td>
<td align="left" valign="top" scope="row"><p>A notification is running.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x1000</tt></p></td>
<td align="left" valign="top" scope="row"><p>A remote system has accepted
the request (obsolete).</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x2000</tt></p></td>
<td align="left" valign="top" scope="row"><p>The administrator placed a hold on the request.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x4000</tt></p></td>
<td align="left" valign="top" scope="row"><p>The printer had
to change filters.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0x8000</tt></p></td>
<td align="left" valign="top" scope="row"><p>The request is temporarily stopped.</p></td>
</tr>
</table>

<a name="printref-15219"></a><h4>Spooling Directories</h4>
<a name="printref-ix191"></a><a name="printref-ix192"></a><p><a name="printref-ix193"></a>Files queued for printing are stored in the <tt>/var/spool/lp</tt> directory until they are printed,
which might be only seconds. The following table shows the contents of the
<tt>/var/spool/lp</tt> directory. </p><a name="printref-74445"></a><h6>Table&nbsp;11-8 Contents of the <tt>/var/spool/lp</tt> Directory</h6><table><col width="22%"><col width="22%"><col width="55%"><tr><th align="left" valign="top" scope="column"><p>File</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SCHEDLOCK</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Lock file for the scheduler. Check for this file if
the scheduler terminates and will not restart.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>admins</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Link to <tt>/etc/lp</tt><tt>.</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>bin</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Link to <tt>/usr/lib/lp/bin</tt><tt>.</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>logs</tt></p></td>
<td align="left" valign="top" scope="row"><p>Link</p></td>
<td align="left" valign="top" scope="row"><p>Link to <tt>../lp/logs</tt>
where completed print requests are logged.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>model</tt></p></td>
<td align="left" valign="top" scope="row"><p>Link</p></td>
<td align="left" valign="top" scope="row"><p>Link to <tt>/usr/lib/lp/model</tt><tt>.</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>requests</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Directory that contains subdirectories for each
configured printer where print requests are logged until printed. Users cannot access this
log.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>system</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>A print status file for the system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>temp</tt></p></td>
<td align="left" valign="top" scope="row"><p>Link</p></td>
<td align="left" valign="top" scope="row"><p>Link to <tt>/var/spool/lp/tmp/</tt><i>hostname</i>, which contains the
spooled requests.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>tmp</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Directory for each configured printer where print requests are logged until printed.
Changes to existing print requests are also recorded in this directory.</p></td>
</tr>
</table>

<a name="printref-53457"></a><h4>Filtering Print Files</h4>
<p><a name="printref-ix202"></a>Print filters are programs on the print server that convert the content of
a queued file from one format to another format. </p><p><a name="printref-ix203"></a>A print filter can be as simple or as complex as needed. The
Solaris OS provides print filters in the <tt>/usr/lib/lp/postscript</tt> directory that cover most situations
where the destination printer requires the data to be in PostScript format. If
you need filters for nonPostScript printers, you have to create the filters and
add them to the systems that need filters. </p><p><a name="printref-ix204"></a>A set of <b>print filter descriptor files</b> are provided in the <tt>/etc/lp/fd</tt> directory. These descriptor files
describe the characteristics of the filter (for example, fast or slow filter). These
description files point to the filter program (for example, to <tt>/usr/lib/lp/postscript/postdaisy</tt>). </p>

<a name="printref-41"></a><h4>How the Printer Interface Program Works</h4>
<p>The LP print service interacts with other parts of the Solaris OS.
The print service uses a standard printer interface program to do the following:</p>
<ul><li><p>Initialize the printer port, if necessary. The standard printer interface program uses the <tt>stty</tt> command to initialize the printer port.</p></li>
<li><p>Initialize the printer. The standard printer interface program uses the <tt>terminfo</tt> database and the <tt>TERM</tt> shell variable to find the appropriate control sequences.</p></li>
<li><p>Print a banner page, if necessary.</p></li>
<li><p>Print the correct number of copies specified by the print request.</p></li></ul>
<p><a name="printref-ix205"></a><a name="printref-ix206"></a><a name="printref-ix207"></a>The LP print service uses the standard interface program, found in the <tt>/usr/lib/lp/model</tt>
directory, unless you specify a different program. You can create custom interface programs. However,
you must make sure that the custom program does not terminate the connection
to the printer or interfere with proper printer initialization.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gdtev.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ppdref-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

