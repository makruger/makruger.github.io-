<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Administering Printers and the Print Scheduler by Using LP Print Commands (Task Map) - System Administration Guide: Solaris Printing</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Solaris Printing</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gfjnd.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gfjpw.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="printintro-1.html">1.&nbsp;&nbsp;Introduction to Printing in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="printplan-1.html">2.&nbsp;&nbsp;Planning for Printing in the Solaris Operating System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printsetup-33230.html">3.&nbsp;&nbsp;Setting Up Printing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printers-33230.html">4.&nbsp;&nbsp;Setting Up Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printadmin-15883.html">5.&nbsp;&nbsp;Administering Printers by Using Solaris Print Manager and LP Print Commands (Tasks)</a></p>
<p class="toc level2"><a href="gdtfs.html">Introduction to Administering Printers</a></p>
<p class="toc level2"><a href="gfjnd.html">Administering Printers by Using Solaris Print Manager (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Administering Printers and the Print Scheduler by Using LP Print Commands (Task Map)</a></p>
</div>
<p class="toc level2"><a href="gfjpw.html">Setting Printer Definitions by Using LP Print Commands (Task Map)</a></p>
<p class="toc level2"><a href="gfjrw.html">Administering Print Requests by Using the LP Print Commands (Task Map)</a></p>
<p class="toc level2"><a href="gfjno.html">Administering Printers That Are Associated With PPD Files (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="proto-1.html">6.&nbsp;&nbsp;Administering Printers That Use Network Printing Protocols (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printcust-66310.html">7.&nbsp;&nbsp;Customizing Printing Services and Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="forms-1.html">8.&nbsp;&nbsp;Administering Character Sets, Filters, Forms, and Fonts (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ppdadmin-1.html">9.&nbsp;&nbsp;Administering Printers by Using the PPD File Management Utility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printdesktop-1.html">10.&nbsp;&nbsp;Setting Up and Administering Printers From the Desktop (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printref-76596.html">11.&nbsp;&nbsp;Printing in the Solaris Operating System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="tsprint-34397.html">12.&nbsp;&nbsp;Troubleshooting Printing Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;Using the Internet Printing Protocol</a></p>
<p class="toc level1 tocsp"><a href="gdqrm.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gfjsi"></a><h3>Administering Printers and the Print Scheduler by Using LP Print Commands (Task Map)</h3>
<table><col width="33%"><col width="33%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Delete a printer and remove
printer access.</p></td>
<td align="left" valign="top" scope="row"><p>If a printer needs to be replaced or moved to a
different location, you can delete information about the printer from the <i>print-client</i></p></td>
<td align="left" valign="top" scope="row"><p><a href="#gfjoi">How to Delete a Printer and Remove Printer Access by Using LP Print Commands</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Check the
status of printers.</p></td>
<td align="left" valign="top" scope="row"><p>Use the <tt>lpstat</tt> command to check the status of all printers
or a specific printer. This command allows you to determine which printers are
available for use and enables you to examine the characteristics of those printers.
</p></td>
<td align="left" valign="top" scope="row"><p><a href="#printadmin-55230">How to Check the Status of Printers</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Stop the print scheduler.</p></td>
<td align="left" valign="top" scope="row"><p>If the print scheduler stops accepting print requests, you
might need to stop and restart the print scheduler.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#printadmin-22789">How to Stop the Print Scheduler</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Restart the print scheduler.</p></td>
<td align="left" valign="top" scope="row"><p>After you
stop the print scheduler, you will need to restart the print scheduler, so
the printer can begin accepting requests.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#printadmin-29920">How to Restart the Print Scheduler</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Start the print scheduler with options.</p></td>
<td align="left" valign="top" scope="row"><p>There are
two ways to pass options to the print scheduler under the Solaris Management
Facility (SMF). You can set options for the duration of a call, or
you can set options to remain over a system boot.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#fbdye">How to Set Print Option Values Only for the Duration of a Call</a></p><p><a href="#fbdyy">How to Set Printer Option Values That Remain Over a System Reboot</a></p></td>
</tr>
</table>

<a name="gfjoi"></a><h4>How to Delete a Printer and Remove Printer Access by Using LP Print Commands</h4><p>Use this procedure when you remove a printer from service, and you
want to remove the printer access from the print clients. Then, remove the
printer information from the print server.</p><ol>
<li><a name="admin-step-3"></a><b><a name="admin-ix377"></a>Log in as superuser, <tt>lp</tt>, or assume an equivalent role on a print client
that has access to the printer you want to delete.</b></li>
<li><a name="printadmin-step-4"></a><b>On the system that is the print client, delete information about the printer.</b><pre># <tt><b>lpadmin -x</b></tt> <i>printer-name</i></pre><dl><dt><tt>-x</tt></dt>
<dd><p>Deletes the specified printer.</p></dd>
<dt><i>printer-name</i></dt>
<dd><p>Specifies the name of the printer you want to delete.</p></dd>
</dl>
</li>
<li><a name="printadmin-step-7"></a><b>Log in as superuser, <tt>lp</tt>, or assume an equivalent role on the print
server.</b></li>
<li><a name="printadmin-step-8"></a><b><a name="printadmin-ix380"></a><a name="printadmin-ix381"></a>On the system that is the printer server, stop accepting print requests for
the printer.</b><pre># <tt><b>reject</b></tt> <i>printer-name</i></pre><p><tt>reject</tt> <i>printer-name</i> rejects print requests for the specified printer.</p><p>This step prevents any new requests from entering the printer's queue while you
are in the process of removing the printer. For a detailed description, see
<a href="gfjrw.html#printadmin-73033">How to Accept or Reject Print Requests for a Printer</a>.</p></li>
<li><a name="admin-step-9"></a><b><a name="admin-ix382"></a><a name="indexterm-80"></a>On the system that is the print server, stop the printer. </b><pre># <tt><b>disable</b></tt> <i>printer-name</i></pre><p>This step stops print requests from printing. For a detailed description on how
to stop printing, see <a href="gfjrw.html#printadmin-22348">How to Enable or Disable a Printer</a>.</p></li>
<li><a name="admin-step-10"></a><b>Move any print requests that are still in the queue to another printer.</b><p>For information about how to move print requests to another printer, see <a href="gfjrw.html#printadmin-22663">How to Move Print Requests to Another Printer</a>.</p></li>
<li><a name="admin-step-11"></a><b><a name="admin-ix385"></a>On the system that is the print server, delete the printer.</b><pre># <tt><b>lpadmin -x</b></tt> <i>printer-name</i></pre></li>
<li><a name="admin-step-107"></a><b>Verify that the printer information has been deleted:</b><ol style="list-style-type: lower-alpha">
				 
<li><a name="admin-step-122"></a><b>Confirm that the printer information has been deleted on the print client.</b><pre>$ <tt><b>lpstat -p</b></tt> <i>printer-name</i> <tt><b>-l</b></tt></pre><p>In the command output, you should receive an error indicating that the printer
does not exist.</p></li>
<li><a name="admin-step-108"></a><b>Confirm that the printer information has been deleted on the print server.</b><pre>$ <tt><b>lpstat -p</b></tt> <i>printer-name</i> <tt><b>-l</b></tt></pre><p>In the command output, you should receive an error indicating that the printer
does not exist.</p></li></ol></li></ol><a name="emjfg"></a><h6>Example&nbsp;5-1 Deleting a Printer and Remote Printer Access</h6><p>The following example shows how to delete the printer <tt>luna</tt> from the print
client <tt>terra</tt> and from the print server <tt>jupiter</tt>. This example also shows
how to delete the print client <tt>terra</tt> from the print server.</p><pre>terra# <tt><b>lpadmin -x luna</b></tt>
Removed &ldquo;luna&rdquo;.
terra# <tt><b>lpstat -p luna -l</b></tt> 
jupiter# <tt><b>lpadmin -x luna</b></tt>
Removed &ldquo;terra&rdquo;.
jupiter# <tt><b>lpstat -p luna -l</b></tt> </pre>

<a name="gfjon"></a><h4>Checking Printer Status</h4>
<a name="printconcept-ix125"></a><a name="indexterm-81"></a><p>Many routine printer administration tasks require information about the status of the LP
print service or a specific printer. For example, you can determine which printers
are available for use. You can also examine the characteristics of those printers.
You can use the <tt>lpstat</tt> command to find status information about the LP
print service or a specific printer.</p><p>If a PPD file was used to create or modify a print
queue, the specific PPD file is listed in the <tt>lpstat</tt> output. If a
PPD file was not specified when the print queue was created, the PPD
entry in the <tt>lpstat</tt> output is <tt>none</tt>.</p>

<a name="printadmin-55230"></a><h4>How to Check the Status of Printers</h4><a name="indexterm-82"></a><ol>
<li><a name="printadmin-step-16"></a><b>Log in to any system on the network.</b></li>
<li><a name="printadmin-step-17"></a><b>Check the status of printers.</b><p>Only the most commonly used options are shown here. For other options, see
the<a href="http://docs.sun.com/doc/819-2239/lpstat-1?a=view"><tt>lpstat</tt>(1)</a> man page.</p><pre>$ <tt><b>lpstat</b></tt> [<tt><b>-d</b></tt>] [<tt><b>-p</b></tt>] <i>printer-name</i> [<tt><b>-D</b></tt>] [<tt><b>-l</b></tt>] [<tt><b>-t</b></tt>]</pre><dl><dt><tt>-d</tt></dt>
<dd><p>Shows the system's default printer.</p></dd>
<dt><tt>-p</tt> <i>printer-name</i></dt>
<dd><p>Shows if a printer is active or idle, when the printer was enabled or disabled, and whether the printer is accepting print requests.</p><p>You can specify multiple printer names with this command. Use a space or a comma to separate printer names. If you use spaces, enclose the list of printer names in quotation marks. If you don't specify <i>printer-name</i>, the status of all printers is displayed. </p></dd>
<dt><tt>-D</tt></dt>
<dd><p>Shows the description of the specified <i>printer-name</i>.</p></dd>
<dt><tt>-l</tt></dt>
<dd><p>Shows the characteristics of the specified <i>printer-name</i>.</p></dd>
<dt><tt>-t</tt></dt>
<dd><p>Shows status information about the LP print service, including the status of all printers, such as whether they are active and whether they are accepting print requests.</p></dd>
</dl>
</li></ol><a name="emjfq"></a><h6>Example&nbsp;5-2 Checking the Status of Printers</h6><p>The following example shows how to display the system's default printer.</p><pre>$ <tt><b>lpstat -d</b></tt>
system default destination: luna</pre><p>The following example shows how to display the status of the printer
<tt>luna</tt>.</p><pre>$ <tt><b>lpstat -p luna</b></tt>
printer luna is idle. enabled since Jul 12 11:17 2001. available.</pre><p>The following example shows how to display the description of the printers
<tt>asteroid</tt> and <tt>luna</tt>.</p><pre>$ <tt><b>lpstat -p "asteroid luna" -D</b></tt>
printer asteroid faulted. enabled since Jan 5 11:35 2004. available.
unable to print: paper misfeed jam

Description: Printer by break room
printer luna is idle. enabled since Jan 5 11:36 2004. available.
Description: Printer by server room.</pre><p>The following example shows how to display the characteristics of the printer <tt>luna</tt>.</p><pre>$ <tt><b>lpstat -p luna -l</b></tt>
printer luna is idle. enabled since Thu Jul 12 15:02:32 PM PDT
        Form mounted: 
        Content types: postscript
        Printer types: PS
        Description:
        Connection: direct
        Interface: /usr/lib/lp/model/standard
                PPD: none
        After fault: continue
        Users allowed:
                (all)
        Forms allowed:
                (none)
        Banner not required
        Character sets:
                             (none)
                Default pitch:
        Default page size: 80 wide 66 long
        Default port settings:</pre>

<a name="printconcept-16"></a><h4>Stopping and Restarting the Print Scheduler</h4>
<a name="indexterm-83"></a><a name="printconcept-ix126"></a><a name="printconcept-ix127"></a><p>The print scheduler, <tt>lpsched</tt>, handles print requests on print servers. However, the print
scheduler might sometimes stop running on a system, so print requests stop being
accepted or printed. The <tt>lpadmin</tt> command automatically enables the <tt>lpsched</tt> service when local
printers are added to the system and disables it when the last local
printer is removed. The following procedures describe how to stop and restart the
print scheduler. If a print request was printing when the print scheduler stopped
running, the print request will be printed in its entirety when you restart
the print scheduler.</p>

<a name="printadmin-22789"></a><h4>How to Stop the Print Scheduler</h4><a name="indexterm-84"></a><a name="indexterm-85"></a><a name="indexterm-86"></a><ol>
<li><a name="printadmin-step-20"></a><b>Log in as superuser, <tt>lp</tt>, or assume an equivalent role on the print
server.</b></li>
<li><a name="printadmin-step-21"></a><b>Determine if the print scheduler is running.</b><pre># <tt><b>svcs application/print/server</b></tt></pre><p>You can also use the <tt>lpstat</tt> <tt>-r</tt> command to determine if the print
scheduler is running.</p><p>If the print scheduler is not running, the message <tt>scheduler is not running</tt> is displayed.</p></li>
<li><a name="printadmin-step-22"></a><b>If the print scheduler is running, stop it.</b><pre># <tt><b>svcadm disable application/print/server</b></tt></pre><p>You can also use the <tt>lpshut</tt> command to stop the print scheduler.</p></li></ol>

<a name="printadmin-29920"></a><h4>How to Restart the Print Scheduler</h4><a name="indexterm-87"></a><a name="indexterm-88"></a><a name="indexterm-89"></a><ol>
<li><a name="printadmin-step-24"></a><b>Log in as superuser, <tt>lp</tt>, or assume an equivalent role on the print
server.</b></li>
<li><a name="printadmin-step-25"></a><b>Determine if the print scheduler is running.</b><pre># <tt><b>svcs application/print/server</b></tt></pre><p>You can also use the <tt>lpstat</tt> <tt>-r</tt> command to determine if the print
scheduler is running.</p><p>If the print scheduler is not running, the message <tt>scheduler is not running</tt> is displayed.</p></li>
<li><a name="printadmin-step-26"></a><b>If the print scheduler is not running, start it.</b><pre># <tt><b>svcadm enable application/print/server</b></tt></pre><p>You can also use the <tt>/usr/lib/lpsched</tt> command to start the print scheduler. For
more information about the difference between starting the print scheduler by using the
<tt>/usr/lib/lpsched</tt> command or by using the <tt>svcadm enable application/print server</tt> command, see <a href="#fbdyt">Starting the Print Scheduler With Options</a>.</p></li></ol>

<a name="fbdyt"></a><h4>Starting the Print Scheduler With Options</h4>
<p>There are two ways to pass options to the print scheduler by
using SMF:</p>
<ul><li><p>By modifying option values only for the duration of a call.</p><p>Use the <tt>/usr/lib/lpsched</tt> command with the appropriate options when you only want to pass options to the print scheduler for the duration of a call. Before setting options, see the <a href="http://docs.sun.com/doc/819-2240/lpsched-1m?a=view"><tt>lpsched</tt>(1M)</a> man page for more information about these default values and reasons for changing them.</p></li>
<li><p>By maintaining option values over a system reboot, or if the print scheduler is restarted.</p><p>The SMF manifest for the print server contains properties that are utilized by the print server start-up script. These property values are passed on to the print scheduler and represent the options, which are set by using the <tt>svccfg</tt> command.</p><p>The properties are as follows:</p>
<ul><li><p><tt>lpsched/num_filters</tt></p></li>
<li><p><tt>lpsched/num_notifiers</tt></p></li>
<li><p><tt>lpsched/fd_limit</tt></p></li>
<li><p><tt>lpsched/reserved_fds</tt></p></li></ul>
<p>Any options that are not set with the <tt>svccfg</tt> command will use the default values that are in the print scheduler. For more information about using the <tt>svccfg</tt> command, see the <a href="http://docs.sun.com/doc/819-2240/svccfg-1m?a=view"><tt>svccfg</tt>(1M)</a> man page.</p></li></ul>


<a name="fbdye"></a><h4>How to Set Print Option Values Only for the Duration of a Call</h4><ol>
<li><b>Become superuser, <tt>lp</tt>, or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Set option values.</b><pre># <tt><b>/usr/lib/lpsched </tt><i>option</i><tt> </tt><i>value</i><tt></b></tt></pre><dl><dt><tt>-f</tt> num_filters</dt>
<dd><p>Specifies the number of concurrent slow filters that can be run on a print server. </p></dd>
<dt><tt>-n</tt> num_notifiers</dt>
<dd><p>Specifies the number of concurrent notification processes that can run on a print server.</p></dd>
<dt><tt>-p</tt> fd_limit</dt>
<dd><p>Specifies the file descriptor resource limit for the <tt>lpsched</tt> process.</p></dd>
<dt><tt>-r</tt> reserved_fds</dt>
<dd><p>Specifies the number of file descriptors that the scheduler reserves for internal communications under heavy load.</p></dd>
</dl>
</li></ol><a name="fbdze"></a><h6>Example&nbsp;5-3 Setting Option Values Only for the Duration of a Call</h6><p>This example shows how to set the number of filters to 2.
The remaining options will use the defaults that are in the print scheduler.</p><pre># <tt><b>/usr/lib/lpsched -f 2</b></tt></pre><p>To use the default options that are in the print scheduler, run
the <tt>/usr/lib/lpsched</tt> command without any options.</p><p>Note that starting the print scheduler by using the <tt>/usr/lib/lpsched</tt> command does
not utilize the values that are set with the <tt>svccfg</tt> command.</p>

<a name="fbdyy"></a><h4>How to Set Printer Option Values That Remain Over a System Reboot</h4><ol>
<li><b>Become superuser, <tt>lp</tt>, or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Set one or all options.</b><pre># <tt><b>svccfg svc:&gt; select svc:/application/print/server svc:/application/print/server&gt; setprop </tt><i>property</i><tt> = </tt><i>value</i><tt> . . . svc:/application/print/server&gt; quit</b></tt></pre><p>For each option that you want to set, repeat the <tt>setprop <i>property</i> = <i>value</i></tt> command on
a separate line.</p></li>
<li><b>Verify that the option has been correctly set by displaying the current values
of the print server properties.</b><pre># <tt><b>svcprop svc:/application/print/server</b></tt></pre></li>
<li><b>Restart the print scheduler.</b>
<ul><li><p>If the print scheduler is not running, use the following commands:</p><pre># <tt><b>svcadm refresh svc:/application/print/server</b></tt>
# <tt><b>svcadm enable svc:/application/print/server</b></tt></pre></li>
<li><p>If the print scheduler is running, use the following commands:</p><pre># <tt><b>svcadm refresh svc:/application/print/server</b></tt>
# <tt><b>svcadm restart svc:/application/print/server</b></tt></pre></li></ul>
<p>To determine if the print scheduler is running, run the <tt>svcs application/print/server</tt> command.</p></li></ol><a name="fbdyw"></a><h6>Example&nbsp;5-4 Setting Printer Option Values That Remain Over a System Reboot</h6><p>This example shows how to set the number of filters to 1.
This option will remain set over a system reboot, or if you restart
the print scheduler.</p><pre># <tt><b>svccfg svc:&gt; select svc:/application/print/server svc:/application/print/server&gt; setprop lpsched/num_filters = count: 1 svc:/application/print/server&gt; quit</b></tt></pre><p>This example shows how to set all options.</p><pre># <tt><b>svccfg svc:&gt; select svc:/application/print/server svc:/application/print/server&gt; setprop lpsched/num_filters = count: 1 svc:/application/print/server&gt; setprop lpsched/num_notifiers = count: 1 svc:/application/print/server&gt; setprop lpsched/fd_limit = count: 4096 svc:/application/print/server&gt; setprop lpsched/reserved_fds = count: 2 svc:/application/print/server&gt; quit</b></tt></pre><p>The following is a sample script that sets all options.</p><pre>#!/bin/ksh

svccfg &lt;&lt;-EOF
select svc:/application/print/server
setprop lpsched/num_filters = count: 1
setprop lpsched/num_notifiers = count: 1
setprop lpsched/fd_limit = count: 4096
setprop lpsched/reserved_fds = count: 2

EOF</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="gfjnd.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gfjpw.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

