<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Customizing Printing Services (Task Map) - System Administration Guide: Solaris Printing</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Solaris Printing</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="printcust-66310.html">Previous</a>
             </td>
             <td align="right">
                 <a href="forms-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="printintro-1.html">1.&nbsp;&nbsp;Introduction to Printing in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="printplan-1.html">2.&nbsp;&nbsp;Planning for Printing in the Solaris Operating System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printsetup-33230.html">3.&nbsp;&nbsp;Setting Up Printing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printers-33230.html">4.&nbsp;&nbsp;Setting Up Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printadmin-15883.html">5.&nbsp;&nbsp;Administering Printers by Using Solaris Print Manager and LP Print Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="proto-1.html">6.&nbsp;&nbsp;Administering Printers That Use Network Printing Protocols (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printcust-66310.html">7.&nbsp;&nbsp;Customizing Printing Services and Printers (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Customizing Printing Services (Task Map)</a></p>
</div>
<p class="toc level1 tocsp"><a href="forms-1.html">8.&nbsp;&nbsp;Administering Character Sets, Filters, Forms, and Fonts (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ppdadmin-1.html">9.&nbsp;&nbsp;Administering Printers by Using the PPD File Management Utility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printdesktop-1.html">10.&nbsp;&nbsp;Setting Up and Administering Printers From the Desktop (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printref-76596.html">11.&nbsp;&nbsp;Printing in the Solaris Operating System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="tsprint-34397.html">12.&nbsp;&nbsp;Troubleshooting Printing Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;Using the Internet Printing Protocol</a></p>
<p class="toc level1 tocsp"><a href="gdqrm.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="emjin"></a><h3>Customizing Printing Services (Task Map)</h3>
<table><col width="33%"><col width="33%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For
Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a <tt>terminfo</tt> entry of an unsupported printer.</p></td>
<td align="left" valign="top" scope="row"><p>Add an entry to the
<tt>terminfo</tt> database to initialize an unsupported printer and establish required settings.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#printcust-24894">How to Add a <tt>terminfo</tt> Entry for an Unsupported Printer</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Set up a
custom printer interface program.</p></td>
<td align="left" valign="top" scope="row"><p>You can furnish a custom printer interface program if
you have a printer that is not supported by the standard printer interface
program.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#printcust-47894">How to Set Up a Custom Printer Interface Program</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Adjust the printer port characteristics.</p></td>
<td align="left" valign="top" scope="row"><p>Make printer port characteristics the are set by
the LP print service compatible with the printer communication settings. </p></td>
<td align="left" valign="top" scope="row"><p><a href="#printcust-46383">How to Adjust the Printer Port Characteristics</a></p></td>
</tr>
</table>

<a name="printcust-72543"></a><h4>Adjusting Printer Port Characteristics</h4>
<a name="printcust-ix707"></a><a name="printcust-ix708"></a><p>The printer port characteristics set by the LP print service must be compatible
with the printer communication settings. If the default printer port settings provided by
the LP print service do not work with a printer, refer to the
printer manual from the manufacturer to determine what settings the printer requires from
the LP print service. Use the <tt>stty</tt> command to set and display printer
communication settings.</p><p><a name="printcust-ix709"></a><a name="printcust-ix710"></a>The following table shows the default <tt>stty</tt> settings that are used by the
LP print service.</p><a name="printcust-23215"></a><h6>Table&nbsp;7-1 Default <tt>stty</tt> Settings Used by the LP Print Service</h6><table><col width="30%"><col width="70%"><tr><th align="left" valign="top" scope="column"><p>Option</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-9600</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets baud to 9600</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-cs8</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets 8-bit bytes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-cstopb</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sends one stop bit per
byte</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-parity</tt></p></td>
<td align="left" valign="top" scope="row"><p>Does not generate parity</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-ixon</tt></p></td>
<td align="left" valign="top" scope="row"><p>Enables XON/XOFF (also known as START/STOP or DC1/DC3)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-opost</tt></p></td>
<td align="left" valign="top" scope="row"><p>Does 
&ldquo;output post-processing&rdquo; using all the settings that follow in this table</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-olcuc</tt></p></td>
<td align="left" valign="top" scope="row"><p>Do not map
lowercase to uppercase</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-onlcr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Changes linefeed to carriage return/linefeed</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-ocrnl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Does not change carriage returns into
linefeeds</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-onocr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Outputs carriage returns even at column 0</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-n10</tt></p></td>
<td align="left" valign="top" scope="row"><p>Provides no delay after linefeeds</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-cr0</tt></p></td>
<td align="left" valign="top" scope="row"><p>Provides no
delay after carriage returns</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-tab0</tt></p></td>
<td align="left" valign="top" scope="row"><p>Provides no delay after tabs</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-bs0</tt></p></td>
<td align="left" valign="top" scope="row"><p>Provides no delay after backspace
characters</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-vt0</tt></p></td>
<td align="left" valign="top" scope="row"><p>Provides no delay after vertical tabs</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-ff0</tt></p></td>
<td align="left" valign="top" scope="row"><p>Provides no delay after form feeds</p></td>
</tr>
</table>

<a name="printcust-46383"></a><h5>How to Adjust the Printer Port Characteristics</h5>
<a name="indexterm-109"></a><ol>
<li><a name="printcust-step-2"></a><b>Log in as superuser, <tt>lp</tt>, or assume an equivalent role on the print
server.</b></li>
<li><a name="printcust-step-3"></a><b><a name="printcust-ix712"></a>Adjust the printer port characteristics.</b><pre># <tt><b>lpadmin -p</b></tt> <i>printer-name</i> <tt><b>-o "stty=</b></tt><i>options</i><tt><b>"</b></tt></pre><dl><dt><tt>-p</tt></dt>
<dd><p>Specifies the name of the printer for which you are adjusting the port characteristics.</p></dd>
<dt><tt>-o</tt> &ldquo;stty=<i>options&rdquo;</i></dt>
<dd><p>Sets the port characteristic (<tt>stty</tt> option) specified by <i>options</i>. You can change more than one <tt>stty</tt> option setting with this command. Enclose each option in single quotation marks, and use a space to separate the options.  For a complete list of options, see the<a href="http://docs.sun.com/doc/819-2239/stty-1?a=view"><tt>stty</tt>(1)</a> man page. <a href="#printcust-23215">Table&nbsp;7-1</a> shows the default <tt>stty</tt> settings used by the LP print service. </p></dd>
</dl>
</li>
<li><a name="printcust-step-47"></a><b>Verify that the printer port characteristics have been changed.</b><pre># <tt><b>lpstat -p</b></tt> <i>printer-name</i> <tt><b>-l</b></tt></pre></li></ol><a name="emjgx"></a><h6>Example&nbsp;7-1 Adjusting the Printer Port Characteristics</h6><p>This example shows how to set the port characteristics for the printer
<tt>luna</tt>. The <tt>parenb</tt> option enables parity checking/generation. The <tt>parodd</tt> option sets odd parity
generation. The <tt>cs7</tt> option sets the character size to 7 bits.</p><pre># <tt><b>lpadmin -p luna -o "stty='parenb parodd cs7'"</b></tt></pre><a name="emjij"></a><h6>Example&nbsp;7-2 Setting the Terminal Baud Rate</h6><p>This example shows how to set the terminal baud rate to 19200
for the printer <tt>venus</tt>. </p><pre># <tt><b>lpadmin -p venus -o "stty=19200"</b></tt></pre>

<a name="printcust-11157"></a><h4>Adding a <tt>terminfo</tt> Entry for an Unsupported Printer</h4>
<a name="printcust-ix714"></a><a name="printcust-ix715"></a><a name="printcust-ix716"></a><a name="printcust-ix717"></a><p>The LP print service uses an interface program and the <tt>terminfo</tt> database to
initialize each printer and establish the following:</p>
<ul><li><p>Selected page size</p></li>
<li><p>Character pitch</p></li>
<li><p>Line pitch</p></li>
<li><p>Character set</p></li></ul>
<p>Each printer is identified in the <tt>terminfo</tt> database with a short name. The
short name required by the <tt>terminfo</tt> database is identical to the name used
to set the <tt>TERM</tt> shell variable. This name is also the printer type
that you specify when setting up a printer. For example, the entries for
different types of PostScript printers are in the <tt>/usr/share/lib/terminfo/P</tt> directory. The default entries provided
with the SunOS software release are <tt>PS</tt> (for PostScript) and <tt>PSR</tt> (for PostScript
Reverse). </p><p>If you cannot find a <tt>terminfo</tt> entry for your printer, you still might
be able to use the printer with the LP print service without the
automatic selection of page size, pitch, and character sets. However, you might have
trouble keeping the printer set in the correct modes for each print request.</p><p><a name="printcust-ix718"></a>If no <tt>terminfo</tt> entry exists for your type of printer and you
want to keep the printer set in the correct modes, you can do
one of the following:</p>
<ul><li><p>Customize the interface program used with the printer.</p></li>
<li><p>Add an entry to the <tt>terminfo</tt> database.</p></li></ul>
<p>A terminal or printer entry in the <tt>terminfo</tt> database contains and defines hundreds
of items. The LP print service, however, uses fewer than 50 of these
items. The following table lists the required <tt>terminfo</tt> items for a printer.</p><a name="printcust-89662"></a><h6>Table&nbsp;7-2 Required <tt>terminfo</tt> Items for a Printer (Booleans)</h6><table><col width="12%"><col width="17%"><col width="69%"><tr><th align="left" valign="top" scope="column"><p>Item</p></th>
<th align="left" valign="top" scope="column"><p></p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Booleans:</p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cpix</tt></p></td>
<td align="left" valign="top" scope="row"><p>Changing
character pitch changes resolution</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>daisy</tt></p></td>
<td align="left" valign="top" scope="row"><p>Printer requires an operator to change character set</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>lpix</tt></p></td>
<td align="left" valign="top" scope="row"><p>Changing line
pitch changes resolution</p></td>
</tr>
</table><a name="frylo"></a><h6>Table&nbsp;7-3 Required <tt>terminfo</tt> Items for a Printer (Numbers)</h6><table><col width="12%"><col width="17%"><col width="69%"><tr><th align="left" valign="top" scope="column"><p>Item</p></th>
<th align="left" valign="top" scope="column"><p></p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Numbers:</p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>bufsx</tt></p></td>
<td align="left" valign="top" scope="row"><p>Number of bytes buffered before printing</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cols</tt></p></td>
<td align="left" valign="top" scope="row"><p>Number of columns in a
line</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cps</tt></p></td>
<td align="left" valign="top" scope="row"><p>Average print rate in characters per second</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>it</tt></p></td>
<td align="left" valign="top" scope="row"><p>Tabs initially every <i>n</i> spaces</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>lines</tt></p></td>
<td align="left" valign="top" scope="row"><p>Number of
lines on a page</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>orc</tt></p></td>
<td align="left" valign="top" scope="row"><p>Horizontal resolution, in units per character</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>orhi</tt></p></td>
<td align="left" valign="top" scope="row"><p>Horizontal resolution, in units
per inch</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>orl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Vertical resolution, in units per line</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>orvi</tt></p></td>
<td align="left" valign="top" scope="row"><p>Vertical resolution, in units per inch</p></td>
</tr>
</table><a name="fryly"></a><h6>Table&nbsp;7-4 Required <tt>terminfo</tt> Items for a Printer (Strings)</h6><table><col width="12%"><col width="17%"><col width="69%"><tr><th align="left" valign="top" scope="column"><p>Item</p></th>
<th align="left" valign="top" scope="column"><p></p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Strings:</p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>chr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Changes
horizontal resolution</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cpi</tt></p></td>
<td align="left" valign="top" scope="row"><p>Changes number of characters per inch</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Carriage return</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>csnm</tt></p></td>
<td align="left" valign="top" scope="row"><p>List of character set names</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cudl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Moves
carriage down one line</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cud</tt></p></td>
<td align="left" valign="top" scope="row"><p>Moves carriage down <i>n</i> lines</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cuf</tt></p></td>
<td align="left" valign="top" scope="row"><p>Moves carriage to the right
<i>n</i> columns</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>cvr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Changes vertical resolution</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>ff</tt></p></td>
<td align="left" valign="top" scope="row"><p>Ejects page</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>hpa</tt></p></td>
<td align="left" valign="top" scope="row"><p>Horizontal position absolute</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>ht</tt></p></td>
<td align="left" valign="top" scope="row"><p>Tabs to next 8-space tab stop</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>if</tt></p></td>
<td align="left" valign="top" scope="row"><p>Is
the name of initialization file</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>iprog</tt></p></td>
<td align="left" valign="top" scope="row"><p>Is the path name of initialization program</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>is1</tt></p></td>
<td align="left" valign="top" scope="row"><p>Is a
printer initialization string</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>is2</tt></p></td>
<td align="left" valign="top" scope="row"><p>Is a printer initialization string</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>is3</tt></p></td>
<td align="left" valign="top" scope="row"><p>Is a printer initialization string</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>lpi</tt></p></td>
<td align="left" valign="top" scope="row"><p>Changes number
of lines per inch</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>mgc</tt></p></td>
<td align="left" valign="top" scope="row"><p>Clears all margins (top, bottom, and sides)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>rep</tt></p></td>
<td align="left" valign="top" scope="row"><p>Repeats a character
<i>n</i> times</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>rwidm</tt></p></td>
<td align="left" valign="top" scope="row"><p>Disables double-wide printing</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>scs</tt></p></td>
<td align="left" valign="top" scope="row"><p>Selects character set</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>scsd</tt></p></td>
<td align="left" valign="top" scope="row"><p>Starts definition of a character set</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>slines</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set page
length to <i>n</i> lines per page</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smgl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets left margin at current column</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smglp</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set left
margin</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smgr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets right margin at current column</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smgrp</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets right margin</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smglr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets both left and right
margins</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>msgt</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets top margin at current line</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smgtp</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets top margin</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smgb</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets bottom margin at current
line</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smgbp</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets bottom margin</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>smgtb</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets both top and bottom margins</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>swidm</tt></p></td>
<td align="left" valign="top" scope="row"><p>Enables double-wide printing</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><tt>vpa</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets vertical position
to absolute</p></td>
</tr>
</table>

<a name="printcust-24894"></a><h5>How to Add a <tt>terminfo</tt> Entry for an Unsupported Printer</h5>
<a name="indexterm-110"></a>
<hr><p><b>Note - </b>Before you create a <tt>terminfo</tt> entry for a printer, make sure that none
of the existing <tt>terminfo</tt> entries will support the printer. To do so, try
to set up the printer with an entry for a similar printer, if
a similar printer exists.</p>
<hr>
<ol>
<li><a name="printcust-step-7"></a><b>Log in as superuser, <tt>lp</tt>,  or assume an equivalent role on the
print server.</b></li>
<li><a name="printcust-step-9"></a><b>Determine a <tt>terminfo</tt> entry name for the printer.</b><p>The directories in the <tt>/usr/share/lib/terminfo</tt> directory contain all the valid <tt>terminfo</tt> entries. Use
these entries as a guide for choosing a name for the printer.</p></li>
<li><a name="printcust-step-10"></a><b>Create a <tt>terminfo</tt> entry file for the printer.</b><p><a href="#printcust-89662">Table&nbsp;7-2</a> shows the items you must define in the <tt>terminfo</tt> entry to add
a new printer to the LP print service. For more details about
the structure of the <tt>terminfo</tt> database, see the <a href="http://docs.sun.com/doc/819-2251/terminfo-4?a=view"><tt>terminfo</tt>(4)</a> man page.</p><p>To help you start writing a new <tt>terminfo</tt> entry, use the <tt>infocmp</tt> command
to save an existing <tt>terminfo</tt> entry to a file. This command is helpful
if there is a <tt>terminfo</tt> entry that is similar to entry you want
to create. For example, the following command saves the <tt>ps</tt> entry to the
<tt>ps_cust</tt> file, which will become the new <tt>terminfo</tt> entry.</p><p><tt>infocmp ps &gt; ps_cust</tt></p></li>
<li><a name="printcust-step-11"></a><b>Compile the <tt>terminfo</tt> entry file into the <tt>terminfo</tt> database.</b><pre># <tt><b>tic</b></tt> <i>terminfo_entry</i></pre><p>where <i>terminfo-entry</i> variable is the <tt>terminfo</tt> entry file you created.</p></li>
<li><a name="printcust-step-48"></a><b>Check for the new <tt>terminfo</tt> entry file in the <tt>/usr/share/lib/terminfo</tt> directory.</b></li></ol>

<a name="printcust-49492"></a><h4>Customizing the Printer Interface Program</h4>
<a name="printcust-ix720"></a><a name="printcust-ix721"></a><a name="printcust-ix722"></a><p>If you have a printer that is not supported by the standard
printer interface program, you can furnish your own printer interface program. You can copy
the standard program and then tell the LP print service to use
it for a specified printer. First, you need to understand what is in
the standard program. The following section describes the standard program.</p><p>A printer interface program should perform the following tasks:</p>
<ul><li><p>Initialize the printer port, if necessary. The standard printer interface program uses the <tt>stty</tt> command to initialize the printer port.</p></li>
<li><p>Initialize the printer hardware. The standard printer interface program receives the control sequences from the <tt>terminfo</tt> database and the <tt>TERM</tt> shell variable.</p></li>
<li><p>Print a banner page, if necessary.</p></li>
<li><p>Print the number of copies that are specified by the print request.</p></li></ul>

<hr><p><b>Caution - </b>If you have a printer interface program from a release of UNIX System
V prior to release 3.2, it will probably work with the Solaris
Express, SunOS 5.10, or compatible LP print service. However, several <tt>-o</tt> options have been
standardized in the Solaris Express, SunOS 5.10, or compatible LP print service. These
options will be passed to every printer interface program. These options might interfere
with similarly named options used by the old interface.</p>
<hr>
<p>The LP print service, not a printer interface program, is responsible for opening
the printer port. The printer port is given to the printer interface program
as standard output. In addition, the printer is identified as the &ldquo;controlling terminal&rdquo;
for the printer interface program so that a &ldquo;hang-up&rdquo; of the port causes
a SIGHUP signal to be sent to the printer interface program.</p>

<a name="printcust-52759"></a><h5>The Standard Printer Interface Program</h5>
<a name="printcust-ix723"></a><p>The standard (model) printer interface program is <tt>/usr/lib/lp/model/standard</tt>. This program is used
by the LP print service to set the printing defaults shown in the
following table.</p><a name="printcust-16763"></a><h6>Table&nbsp;7-5 Default Printer Port Characteristics</h6><table><col width="29%"><col width="70%"><tr><th align="left" valign="top" scope="column"><p>Characteristic</p></th>
<th align="left" valign="top" scope="column"><p>Default Setting</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Default filter</p></td>
<td align="left" valign="top" scope="row"><p><tt>None</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Character pitch</p></td>
<td align="left" valign="top" scope="row"><p><tt>None</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Line pitch</p></td>
<td align="left" valign="top" scope="row"><p><tt>None</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Page width</p></td>
<td align="left" valign="top" scope="row"><p><tt>None</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Page length</p></td>
<td align="left" valign="top" scope="row"><p><tt>None</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Character set</p></td>
<td align="left" valign="top" scope="row"><p><tt>None</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>stty</tt> options</p></td>
<td align="left" valign="top" scope="row"><p><tt>9600 cs8 -cstopb -parenb -parodd ixon -ixany opost -olcuc onlcr -ocrnl -onocr -onlret -ofill nl0 cr0 tab0 bs0 vt0 ff0</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="printcust-ix724"></a>Exit code </p></td>
<td align="left" valign="top" scope="row"><p><tt>0</tt></p></td>
</tr>
</table>

<a name="printcust-13"></a><h5>Customizing <tt>stty</tt> Modes</h5>
<a name="printcust-ix725"></a><p><a name="printcust-ix726"></a><a name="printcust-ix727"></a><a name="printcust-ix728"></a>If you need to change the terminal characteristics, such as baud rate or
output options, find the section of the standard printer interface program that begins with
the following comment:</p><p><tt>## Initialize the printer port</tt></p><p>For more information, see the <a href="#printcust-72543">Adjusting Printer Port Characteristics</a>.</p>

<a name="printcust-14"></a><h5>Exit Codes</h5>
<a name="printcust-ix729"></a><a name="printcust-ix730"></a><a name="printcust-ix731"></a><p>When printing is complete, your interface program should exit with a code that
shows the status of the print job. The exit code is the
last entry in the printer interface program.</p><p><a name="printcust-ix732"></a><a name="printcust-ix733"></a>The following table shows the exit codes and how they are interpreted by
the LP print service.</p><a name="printcust-74466"></a><h6>Table&nbsp;7-6 Printer Interface Program Exit Codes</h6><table><col width="20%"><col width="80%"><tr><th align="left" valign="top" scope="column"><p>Exit Code</p></th>
<th align="left" valign="top" scope="column"><p>Meaning to the LP Print Service</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>0</tt> </p></td>
<td align="left" valign="top" scope="row"><p>The print
request has been successfully completed. If a printer fault occurred, it has been
cleared.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>1</tt> to <tt>127</tt></p></td>
<td align="left" valign="top" scope="row"><p>A problem was encountered when printing a request. For example,
there were too many nonprintable characters or the request exceeds the printer's capabilities. The
LP print service notifies the person who submitted the request that an error
occurred when printing it. This error does not affect future print requests. If
a printer fault has occurred, it has been cleared.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>128</tt></p></td>
<td align="left" valign="top" scope="row"><p>This code is reserved
for use by the LP print service. Interface programs must not exit with
this code.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>129</tt></p></td>
<td align="left" valign="top" scope="row"><p>A printer fault was encountered when printing the request. This fault does
affect future print requests. If the fault recovery for the printer directs the
LP print service to wait for the administrator to correct the problem, the
LP print service disables the printer. If the fault recovery is to
continue printing, the LP print service does not disable the printer. However, the print
service will try printing again in a few minutes.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>&gt;129</tt></p></td>
<td align="left" valign="top" scope="row"><p>These codes are reserved
for use by the LP print service. Interface programs must not exit with
codes in this range.</p></td>
</tr>
</table><p>If the program exits with a code of 129, <tt>root</tt> is alerted of
a printer fault. The LP print service must also reprint the request from
the beginning, after the fault has been cleared. If you do not
want the entire request to be reprinted, you can have the interface program
send a fault message to the LP print service. (First wait for the
fault to be cleared.) When the fault is cleared, the interface program can
resume printing the file. When printing is finished, the printer interface program can
give a <tt>0</tt> exit code, just as if the fault had never occurred.
An added advantage of this approach: The interface program can detect when the
fault is cleared automatically. Thus, the administrator does not need to re-enable the
printer.</p>

<a name="printcust-15"></a><h5>Fault Messages</h5>
<a name="printcust-ix734"></a><p>You can use the <tt>lp.tell</tt> program to send fault messages to the LP
print service. This program is referenced by the <tt>LPTELL</tt> shell variable in the
standard printer interface code. The program takes standard input and sends it to
the LP print service. The LP print service puts standard input into the
message that alerts the administrator to the printer fault. If its standard input
is empty, the <tt>lp.tell</tt> program does not initiate an alert. For an example
of how the <tt>lp.tell</tt> program is used, examine the standard printer interface code
immediately after the following comment:</p><p><tt># Set up the $LPTELL program to capture fault messages here</tt></p><p>If you use the special exit code <tt>129</tt> or the <tt>lp.tell</tt> program,
the printer interface program does not need to disable the printer itself. The
interface program can disable the printer directly. However, doing so overrides the fault-alerting
mechanism. Alerts are sent only if the LP print service detects that the
printer has a fault, and the special exit code and the <tt>lp.tell</tt> program
are its main detection tools.</p><p>If the LP print service has to interrupt printing of a file
at any time, it kills the interface program with a signal TERM (trap
number 15). For more information, see the <a href="http://docs.sun.com/doc/819-2239/kill-1?a=view"><tt>kill</tt>(1)</a> and <a href="http://docs.sun.com/doc/819-2243/signal-3c?a=view"><tt>signal</tt>(3C)</a> man pages. If
the printer interface program dies from receipt of any other signal, the LP
print service assumes that future print requests are not be affected. As a
result, the LP print service continues to use the printer. The LP print
service notifies the user who submitted the request that the request has not
been finished successfully.</p><p>When the interface is first invoked, the signals HUP, INT, QUIT, and PIPE
(trap numbers 1, 2, 3, and 13) are ignored. The standard interface
changes this default behavior, so that the signals are trapped at appropriate times. The
standard interface interprets receipt of these signals as warnings that the printer has
a problem. When the standard interface receives a signal, it issues a fault
alert.</p>

<a name="printcust-16"></a><h5>Using a Customized Printer Interface Program</h5>
<p>You can create a customized printer interface program and use it instead of
the standard printer interface program on the print server. To do so,
you use the <tt>lpadmin</tt> command to register the program with the LP print service
for a specific printer.</p>

<a name="printcust-47894"></a><h5>How to Set Up a Custom Printer Interface Program</h5>
<a name="indexterm-111"></a><a name="indexterm-112"></a><a name="indexterm-113"></a><ol>
<li><a name="printcust-step-18"></a><b>Log in as superuser, <tt>lp</tt>,  or assume an equivalent role on the
print server.</b></li>
<li><a name="printcust-step-20"></a><b><a name="printcust-ix741"></a><a name="printcust-ix742"></a><a name="printcust-ix743"></a>Copy the standard printer interface program.</b><pre># <tt><b>cp /var/spool/lp/model/standard</b></tt>  <i>custom-interface</i></pre></li>
<li>(Optional) <b>If you already have a custom printer interface program, go to  <a href="#printcust-step-22">Step&nbsp;5</a></b></li>
<li><a name="printcust-step-21"></a><b>Change the copy of the standard printer interface program to meet your needs.</b><p>Refer to the description of the program in <a href="#printcust-52759">The Standard Printer Interface Program</a> to determine what you
need to change.</p></li>
<li><a name="printcust-step-22"></a><b>Set up the custom printer interface program for a specific printer.</b><pre># <tt><b>lpadmin -p</b></tt> <i>printer-name</i> <tt><b>-i</b></tt> <i>custom-interface</i></pre><dl><dt><tt>-p</tt></dt>
<dd><p>Specifies the printer that will use the custom printer interface program.</p></dd>
<dt><tt>-i</tt></dt>
<dd><p>Is the name of the custom printer interface program.</p></dd>
</dl>
<p>The custom printer interface program is registered with the LP print service, and
will be used by that printer when users submit print requests.</p></li>
<li><a name="printcust-step-49"></a><b>Verify that the custom printer interface program has been added in the <tt>/etc/lp/printers/</tt><i>printer-name</i><tt>/configuration</tt>
file.</b></li></ol><a name="emjhw"></a><h6>Example&nbsp;7-3 Setting Up a Custom Printer Interface Program</h6><p>This example shows how to set up a custom printer interface program named
<tt>custom</tt> for the printer <tt>luna</tt>.</p><pre># <tt><b>lpadmin -p luna -i custom</b></tt></pre><a name="emjiu"></a><h6>Example&nbsp;7-4 Copying a Custom Printer Interface Program</h6><p>This example shows how to copy a custom printer interface program from the
printer <tt>venus</tt> to the printer <tt>asteroid</tt>.</p><pre># <tt><b>lpadmin -p asteroid -e venus</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="printcust-66310.html">Previous</a>
             </td>
             <td align="right">
                 <a href="forms-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

