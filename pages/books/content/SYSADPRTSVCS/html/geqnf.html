<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>PPD File Management Utility - System Administration Guide: Solaris Printing</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Solaris Printing</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ppdref-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gdkmc.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="printintro-1.html">1.&nbsp;&nbsp;Introduction to Printing in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="printplan-1.html">2.&nbsp;&nbsp;Planning for Printing in the Solaris Operating System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printsetup-33230.html">3.&nbsp;&nbsp;Setting Up Printing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printers-33230.html">4.&nbsp;&nbsp;Setting Up Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printadmin-15883.html">5.&nbsp;&nbsp;Administering Printers by Using Solaris Print Manager and LP Print Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="proto-1.html">6.&nbsp;&nbsp;Administering Printers That Use Network Printing Protocols (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printcust-66310.html">7.&nbsp;&nbsp;Customizing Printing Services and Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="forms-1.html">8.&nbsp;&nbsp;Administering Character Sets, Filters, Forms, and Fonts (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ppdadmin-1.html">9.&nbsp;&nbsp;Administering Printers by Using the PPD File Management Utility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printdesktop-1.html">10.&nbsp;&nbsp;Setting Up and Administering Printers From the Desktop (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printref-76596.html">11.&nbsp;&nbsp;Printing in the Solaris Operating System (Reference)</a></p>
<p class="toc level2"><a href="gdtev.html">Solaris Print Manager</a></p>
<p class="toc level2"><a href="printref-18623.html">LP Print Service</a></p>
<p class="toc level2"><a href="ppdref-1.html">Using PPD Files To Set Up Printers</a></p>
<div class="onpage">
<p class="toc level2"><a href="">PPD File Management Utility</a></p>
</div>
<p class="toc level2"><a href="gdkmc.html">How PAPI Is Implemented in the Solaris OS</a></p>
<p class="toc level1 tocsp"><a href="tsprint-34397.html">12.&nbsp;&nbsp;Troubleshooting Printing Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;Using the Internet Printing Protocol</a></p>
<p class="toc level1 tocsp"><a href="gdqrm.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="geqnf"></a><h3>PPD File Management Utility</h3>
<a name="indexterm-271"></a><a name="indexterm-272"></a><p>This section contains reference information for managing PPD files.</p><p>When the <tt>ppdmgr</tt> utility is used to add a PPD file to the
system, a compressed (gzipped) copy of the specified PPD file is stored on
the system. The purpose is to maintain a current cache of PPD
file information from all known PPD files on the system. </p><p>The full path of the PPD file that is copied to the
system follows:</p><pre><i>repository</i>/<i>label</i>/<i>manufacturer</i>/<i>ppd-file-name</i></pre><dl><dt><i>repository</i></dt>
<dd><p>Is the specified repository. If no repository is specified by using the <tt>-R</tt> option, the default repository is the user repository, <tt>/var/lp/ppd/</tt>.</p></dd>
<dt><i>label</i></dt>
<dd><p>Is the specified label. If no label is specified by using the <tt>-L</tt> option, the default label is <tt>user</tt>, within the <tt>user</tt> repository.</p></dd>
<dt><i>manufacturer</i></dt>
<dd><p>Is the manufacturer's name that is contained within the PPD file. This name might be modified according to the manufacturer aliases that are defined in the <tt>/var/lp/ppd/manufaliases</tt> file. See <a href="#gfhxx">Manufacturer Aliases File</a>.</p></dd>
<dt><i>ppd-file-name</i></dt>
<dd><p>Is the same as the original PPD file name that is specified with the <tt>ppdmgr</tt> utility. This file can also contain the <tt>.gz</tt> extension if the PPD file is compressed.</p></dd>
</dl>
<p>The following figures show the layout of a typical PPD file repository and
the <tt>ppdmgr</tt> utility directory layout, which contains all relevant <tt>ppdmgr</tt> delivered and generated
files, including the PPD <tt>user</tt> file repository.</p><img src="figures/ppdfile_dir_tree3.gif" alt="Graphic showing the directory layout of a PPD file repository and the directory layout for delivered and generated ppdmgr files."></img>

<a name="geqmb"></a><h4>PPD File Repositories</h4>
<a name="indexterm-273"></a><a name="indexterm-274"></a><a name="indexterm-275"></a><a name="indexterm-276"></a><p>The following table describes the PPD file repositories that are located on a
system.</p><a name="gexss"></a><h6>Table&nbsp;11-9 Description of the PPD File Repositories</h6><table><col width="18%"><col width="24%"><col width="26%"><col width="30%"><tr><th align="left" valign="top" scope="column"><p>Repository</p></th>
<th align="left" valign="top" scope="column"><p>Location</p></th>
<th align="left" valign="top" scope="column"><p>Contents</p></th>
<th align="left" valign="top" scope="column"><p>Method Used to Add or Modify</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>admin</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/usr/local/share/ppd/</tt></p></td>
<td align="left" valign="top" scope="row"><p>This PPD file repository is used to
store PPD files that are used by system administrators.</p></td>
<td align="left" valign="top" scope="row"><p>PPD files can be added
to this repository manually, by using either the <tt>ppdmgr</tt> utility or the <tt>pkgadd</tt>
command.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>all</tt></p></td>
<td align="left" valign="top" scope="row"><p>Represents all of the PPD repositories on a system</p></td>
<td align="left" valign="top" scope="row"><p>This repository represents all
supported PPD repository locations on a system.</p></td>
<td align="left" valign="top" scope="row"><p>You can only specify the <tt>all</tt> repository
when requesting an update or rebuild of the PPD cache file by using
the <tt>ppdmgr</tt> utility.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>system</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/usr/share/ppd/</tt></p></td>
<td align="left" valign="top" scope="row"><p>This repository contains PPD files that are delivered with Solaris
OS.</p></td>
<td align="left" valign="top" scope="row"><p>PPD files that are delivered by Sun can be added to the
<tt>system</tt> repository by using the <tt>pkgadd</tt> and <tt>patchadd</tt> commands.</p><p>A PPD file in this
repository should not be modified manually or by using the <tt>ppdmgr</tt> utility. If
you modify this repository manually, your changes might be lost.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>user</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/var/lp/ppd </tt></p></td>
<td align="left" valign="top" scope="row"><p>This repository is used,
as needed, by administrators and users with appropriate privileges (Printer Management).</p></td>
<td align="left" valign="top" scope="row"><p>PPD files that are
added to the system by using the <tt>ppdmgr</tt> command with the <tt>-a</tt> option
are added to this repository unless otherwise specified.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>vendor</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/opt/share/ppd/</tt></p></td>
<td align="left" valign="top" scope="row"><p>This repository is a central location
for storing PPD files that are delivered to the Solaris OS by vendors.</p></td>
<td align="left" valign="top" scope="row"><p>The
<tt>pkgadd</tt> command is used to add PPD files to this repository</p>
<hr><p><b>Note - </b>This repository cannot
be modified by using the <tt>ppdmgr</tt> utility.</p>
<hr>
</td>
</tr>
</table>
<hr><p><b>Caution - </b>The location of the PPD files and the <tt>ppdcache</tt> file is private
and is therefore subject to change. Do <b>not</b> build software that relies on
these files being in their current location or the data being in its
current format.</p>
<hr>


<a name="geqos"></a><h4>PPD File Labels</h4>
<a name="indexterm-277"></a><p>On a system that is running the Solaris software, PPD files can
be stored default label directories.  You can also specify a label of
your own choosing to organize PPD files, as long as the label is
not reserved by the system.</p><p>The following label names are reserved:</p>
<ul><li><p><tt>caches</tt></p></li>
<li><p><tt>ppdcache</tt></p></li>
<li><p><tt>manufaliases</tt></p></li>
<li><p><tt>all</tt></p></li></ul>
<p>With the exception of the <tt>all</tt> label name, these label names cannot be
specified by using either the <tt>-L</tt> or <tt>-R</tt> options of the <tt>ppdmgr</tt> utility.
However, you can specify the <tt>all</tt> label name with the <tt>-L</tt> or
the <tt>-R</tt> option when using the <tt>-r</tt> and <tt>-u</tt> options. Any label name that
begins with <tt>SUNW</tt> is reserved for use by Sun, but is not prohibited.</p><p>If you add a PPD file to a system and specify a
label that does not exist, a directory with that label name is created
in the specified repository.  By default, if no PPD file repository is
specified, this directory is <tt>/var/lp/ppd/label</tt>. For more information about specifying labels when you
add PPD files to a system, see <a href="#geqok">Description of the Command-Line Options for the <tt>ppdmgr</tt> Utility</a>.</p>

<a name="gexki"></a><h4>Description of the Printer Driver Field in Solaris Print Manager</h4>
<p>The Printer Driver field in Solaris Print Manager is displayed when you select
the Add New Printer (attached or network) or Modify Printer Attributes (attached or
network) menu options. This field contains printer driver descriptions from the PPD cache
file, based on the printer model that you select. To distinguish between duplicate
printer driver descriptions that have different labels within the PPD file repositories, the
label and abbreviation of the PPD file repository name is also displayed.</p><p>The format that is used for the printer driver description is as
follows:</p><p><i>label</i>(<i>repository-letter</i>): <i>driver-description</i></p><p>For example, the following PPD file is located in the <tt>PHOTOS</tt> label within
the <tt>user</tt> PPD file repository:</p><p><tt>/var/lp/ppd/PHOTOS/HP/HP-PhotoSmart_P1100-hpijs.ppd.gz</tt></p><p>This PPD file would appear in Solaris Print Manager's Printer Driver field selection
list as follows:</p><p><tt>PHOTOS(U): Foomatic/hpijs (recommended)</tt></p><p>In the following example, the following PPD file is located in the
<tt>SUNWfoomatic</tt> label within the <tt>system</tt> PPD file repository:</p><p>This PPD file would appear in Solaris Print Manager's Printer Driver field selection
list as follows:</p><p><tt>SUNWfoomatic(S): Foomatic/hpijs (recommended)</tt></p><p>The following table describes the PPD file repository letters, the repositories they represent
and the location of the repositories a the system.</p><table><col width="33%"><col width="33%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Repository Abbreviation</p></th>
<th align="left" valign="top" scope="column"><p>Repository Name</p></th>
<th align="left" valign="top" scope="column"><p>Repository Location</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>A</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>admin</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/usr/local/share/ppd</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>S</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>system</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/usr/share/ppd</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>U</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>user</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/var/lp/ppd</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>V</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>vendor</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/opt/share/ppd</tt></p></td>
</tr>
</table>

<a name="gfhxx"></a><h4>Manufacturer Aliases File</h4>
<a name="indexterm-278"></a><a name="indexterm-279"></a><p>Manufacturer directories, one for each manufacturer, are located in the PPD repositories on
a system. When PPD files are added to a system, the manufacturer name
that is contained in the PPD file is used to determine which manufacturer
directory to copy the PPD file to. A private file, <tt>/var/lp/ppd/manufaliases</tt>, contains
aliases for all the manufacturer entries in a PPD file.  The <tt>manufaliases</tt>
file is referenced to determine which manufacturer directory to copy the PPD file
to. This process ensures that there is one directory per manufacturer, rather than
one directory per manufacturer alias. For example, if a PPD file contains the
manufacturer name, Hewlett-Packard, and an <tt>HP</tt> alias for Hewlett-Packard is listed in the
<tt>manufaliases</tt> file, the PPD file is stored in the <tt>HP</tt> directory.  This
strategy applies to all PPD files that are added to a system
by using the <tt>ppdmgr</tt> utility and the <tt>lpadmin</tt> <tt>-n</tt> command.</p>
<hr><p><b>Note - </b>The <tt>manufaliases</tt> file is a private file. Do <b>not</b> edit this file. Do
<b>not</b> build software that relies on the file being in its current location
or the data being in its current format.</p>
<hr>


<a name="gfhze"></a><h4>PPD File Caches</h4>
<a name="indexterm-280"></a><a name="indexterm-281"></a><a name="indexterm-282"></a><p>Private PPD file caches are maintained in the <tt>/var/lp/ppd/caches/</tt> directory, one for
each label within each repository.</p><p>The format of the cache file name that is used follows:</p><p><i>PPD-repository</i>: <i>label</i></p><p>The information about PPD files that is in the PPD cache files
is maintained by using the <tt>ppdmgr</tt> utility. Do <b>not</b> edit the PPD cache files
manually. Note that the cache files in the <tt>/var/lp/ppd/caches</tt> directory are used
to generate the private PPD cache file, <tt>/var/lp/ppd/ppdcache</tt>. This file is used
by the <tt>printmgr</tt> utility. For more information, see the <a href="http://docs.sun.com/doc/819-2240/printmgr-1m?a=view"><tt>printmgr</tt>(1M)</a> man page.</p>
<hr><p><b>Note - </b>The location of the <tt>ppdcache</tt> and it's contents is private. Do <b>not</b> build
software that relies on this file being in its current location or on
the data being in its current format. This information applies to any private
files that are generated or delivered for use by the <tt>ppdmgr</tt> utility.</p>
<hr>


<a name="geqok"></a><h4>Description of the Command-Line Options for the <tt>ppdmgr</tt> Utility</h4>
<a name="indexterm-283"></a><a name="indexterm-284"></a><a name="indexterm-285"></a><p>In this section, the command-line options for the <tt>ppdmgr</tt> utility are described. Additional
information about processes, guidelines, and restrictions for administering PPD files by using the
<tt>ppdmgr</tt> utility are also described.</p><p>The PPD Manager (<tt>ppdmgr</tt>) utility is located in <tt>/usr/sbin/ppdmgr</tt>.</p><p><b>To add a PPD file to a system, you would use the following syntax:</b></p><pre><tt><b>ppdmgr -a </tt><i>ppd-file-path</i><tt></b></tt></pre><p>The <tt>-a</tt> option copies the PPD file that is specified in <tt>ppd-file-path</tt> to
the PPD repository, then updates the PPD cache file to reflect the change.
If you do not specify a PPD file repository by using the <tt>-R</tt>
option, the PPD file is stored in the <tt>user</tt> PPD file repository. 
If you do not specify a label by using the <tt>-L</tt> option, the
PPD file is stored in the <tt>user</tt> label directory.</p><p>The following verifications are performed when you use the <tt>-a</tt> option with the
<tt>ppdmgr</tt> utility:</p>
<ul><li><p><b>Label verification</b> &ndash; A label name must <b>not</b> be a reserved label name.</p><p>The following label names are reserved:</p>
<ul><li><p><tt>caches</tt></p></li>
<li><p><tt>ppdcache</tt></p></li>
<li><p><tt>manufaliases</tt></p></li>
<li><p><tt>all</tt></p></li></ul>
</li>
<li><p><b>PPD File Path verification</b> &ndash; The specified <i>ppd-file-path</i> must be accessible and must contain either the <tt>.pdd </tt> or <tt>ppd.gz</tt> extension.</p></li>
<li><p><b>PPD file verification</b> &ndash; The PPD file that is specified in <i>ppd-file-path</i> must be a valid PPD file.</p></li></ul>

<hr><p><b>Note - </b>If you provide information that does not pass the various verification checks, or
if any of the actions that are performed by the <tt>ppdmgr</tt> utility are
unsuccessful, an error message is displayed, and the utility exits.</p>
<hr>
<p><b>Additional Actions Performed:</b></p>
<ul><li><p>If needed, parent directories of the destination path are created.</p></li>
<li><p>If a version of the PPD file with a <tt>.gz</tt> extension already exists in the PPD file repository, and the gzipped versions are not duplicates, an error message is displayed.</p></li>
<li><p>The <i>ppd-file-path</i> is copied to the destination path.</p></li>
<li><p>To reflect the change in the <tt>ppdcache</tt> file, the update action is then applied.</p></li></ul>
<p><b>To specify PPD file repository, you would use the following syntax:</b></p><pre><tt><b>ppdmgr -R </tt><i>repository</i><tt></b></tt></pre><p>The <tt>-R</tt> option with <i>repository</i> is used to identify one of the supported
PPD file repositories.  When the <tt>-R</tt> option is not specified, the default
<i>repository</i> is <tt>user</tt>. When the <tt>-R</tt> option is specified with the <tt>-a</tt>
option, the valid repository names are <tt>user</tt> and <tt>admin</tt>. See <a href="#geqmb">PPD File Repositories</a> for more
information about all of the supported repository names and their locations.</p><p><b>To specify a label, you would use the following syntax:</b></p><pre><tt><b>ppdmgr -L </tt><i>label-name</i><tt></b></tt></pre><p>The <tt>-L</tt> option with the <i>label-name</i> is used to identify a grouping of
PPD files within a PPD file repository. The label is also the name
of the directory that is located in the PPD file repository.  The
label can be comprised of any characters from the portable character set. However,
the label cannot contain a semicolon (<tt>;</tt>).</p><p>When the <tt>-L</tt> option is <b>not</b> specified, the following are the defaults that
are used for specifying a label name.</p><table><col width="40%"><col width="59%"><tr><th align="left" valign="top" scope="column"><p><tt>ppdmgr</tt> Command-Line Option</p></th>
<th align="left" valign="top" scope="column"><p>Default Label</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-a</tt></p></td>
<td align="left" valign="top" scope="row"><p>Defaults to the
<i>label</i> in <tt>ppd-file-path</tt>, if the <tt>ppd-file-path</tt> is located within a supported repository. Otherwise
<i>label</i> defaults to <tt>user</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-r</tt></p></td>
<td align="left" valign="top" scope="row"><p>Defaults to the <tt>all</tt> label.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-u</tt></p></td>
<td align="left" valign="top" scope="row"><p>Defaults to the <tt>all</tt> label.</p></td>
</tr>
</table><p><b>To request an update of the PPD cache file, you would use the following syntax:</b></p><pre><tt><b>ppdmgr -u</b></tt></pre><p>This option updates the cache file to reflect modifications within PPD file repositories.
 The PPD cache file is updated only if modifications are detected.</p>
<hr><p><b>Note - </b>When the <tt>-a</tt> option is specified, an update of the PPD cache file
occurs automatically to reflect the change in the label directory within the repository
where the PPD file was copied.</p>
<hr>
<p> When the <tt>-R</tt> or <tt>-L</tt> option is not specified, the PPD cache
file is updated to reflect modifications in the <tt>all</tt> label directory within the
<tt>user</tt> repository.</p><p><b>To request a rebuild of PPD cache file, you would use the following syntax:</b></p><pre><tt><b>ppdmgr -r</b></tt></pre><p>The <tt>-r</tt> option rebuilds the cache by removing and regenerating any intermediary cache
files that are associated with the specified label within the specified PPD file
repository.  This action results in an update of the PPD cache file,
<tt>/var/lp/ppd/ppdcache</tt>, if any intermediary cache files are removed. Because a regeneration of the
specified label within the specified PPD file repository is required, the regeneration of
the PPD cache information can be very time-consuming.  The time that it
takes to rebuild the PPD cache file depends upon the number of PPD
files that are affected, Therefore, the <tt>-r</tt> option should only be used when
PPD cache file corruption is suspected.</p><p>When the <tt>- R</tt> or <tt>- L</tt> option is not specified, intermediary cache files that
are associated with all of the labels within the <tt>user</tt> PPD file repository
are removed. These modifications are then reflected in the PPD cache file.</p><p><b>To display the full path of PPD File in the repository, you would use the following syntax:</b></p><pre><tt><b>ppdmgr -a </tt><i>ppd-file-path</i><tt> -w</b></tt></pre><p>The <tt>-w</tt> option must be specified with the <tt>-a</tt> option, and the PPD
file is added to the system successfully, the full destination path of the
PPD file is displayed on <tt>stdout</tt>.  Otherwise, this option is ignored.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ppdref-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gdkmc.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

