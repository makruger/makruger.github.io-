<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Up Directly Attached Printers by Using LP Print Service Commands - System Administration Guide: Solaris Printing</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Solaris Printing</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ermll.html">Previous</a>
             </td>
             <td align="right">
                 <a href="printsetup-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="printintro-1.html">1.&nbsp;&nbsp;Introduction to Printing in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="printplan-1.html">2.&nbsp;&nbsp;Planning for Printing in the Solaris Operating System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printsetup-33230.html">3.&nbsp;&nbsp;Setting Up Printing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printers-33230.html">4.&nbsp;&nbsp;Setting Up Printers (Tasks)</a></p>
<p class="toc level2"><a href="gfgzu.html">Introduction to Setting Up Printers</a></p>
<p class="toc level2"><a href="gfgxy.html">Setting Up Printers on a Print Server (Task Map)</a></p>
<p class="toc level2"><a href="ermll.html">Setting Up Directly Attached Printers by Using Solaris Print Manager</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Setting Up Directly Attached Printers by Using LP Print Service Commands</a></p>
</div>
<p class="toc level2"><a href="printsetup-30.html">Setting Up Network Printers</a></p>
<p class="toc level2"><a href="gfhgu.html">Setting Up Network-Attached Printers by Using Solaris Print Manager</a></p>
<p class="toc level2"><a href="gfhlh.html">Setting Up Network-Attached Printers by Using LP Print Commands</a></p>
<p class="toc level2"><a href="printconcept-17.html">Adding a New Network-Attached Printer by Using Printer Vendor-Supplied Software</a></p>
<p class="toc level2"><a href="geawp.html">Setting Up Printers That are Associated With PPD Files</a></p>
<p class="toc level2"><a href="gfhlt.html">Setting Up Printers on a Print Client (Task Map)</a></p>
<p class="toc level2"><a href="ermli.html">Setting Up a Print Client</a></p>
<p class="toc level2"><a href="printsetup-10.html">Setting Up a <tt>.printers</tt> File</a></p>
<p class="toc level1 tocsp"><a href="printadmin-15883.html">5.&nbsp;&nbsp;Administering Printers by Using Solaris Print Manager and LP Print Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="proto-1.html">6.&nbsp;&nbsp;Administering Printers That Use Network Printing Protocols (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printcust-66310.html">7.&nbsp;&nbsp;Customizing Printing Services and Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="forms-1.html">8.&nbsp;&nbsp;Administering Character Sets, Filters, Forms, and Fonts (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ppdadmin-1.html">9.&nbsp;&nbsp;Administering Printers by Using the PPD File Management Utility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printdesktop-1.html">10.&nbsp;&nbsp;Setting Up and Administering Printers From the Desktop (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printref-76596.html">11.&nbsp;&nbsp;Printing in the Solaris Operating System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="tsprint-34397.html">12.&nbsp;&nbsp;Troubleshooting Printing Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;Using the Internet Printing Protocol</a></p>
<p class="toc level1 tocsp"><a href="gdqrm.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gfhdc"></a><h3>Setting Up Directly Attached Printers by Using LP Print Service Commands</h3>
<p>The following table describes each printer attribute to help you determine the information
that is needed to set up a directly attached printer by using the
<tt>lpadmin</tt> command.</p><table><col width="17%"><col width="10%"><col width="15%"><col width="19%"><col width="17%"><col width="20%"><tr><th align="left" valign="top" scope="column"><p>Printer Definition</p></th>
<th align="left" valign="top" scope="column"><p>LP Print Command Option</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Example</p></th>
<th align="left" valign="top" scope="column"><p>Default Setting</p></th>
<th align="left" valign="top" scope="column"><p>Required/Optional?</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>Printer Name</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>-p</tt></p></td>
<td align="left" valign="top" scope="row"><p>Name of printer</p></td>
<td align="left" valign="top" scope="row"><p><tt>laser1</tt></p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
<td align="left" valign="top" scope="row"><p>Required to install an
attached or network printer and to add access to a printer</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>Print server</tt></p></td>
<td align="left" valign="top" scope="row"></td>
<td align="left" valign="top" scope="row"><p>Name of print
server</p></td>
<td align="left" valign="top" scope="row"><p><tt>venus</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>Use localhost for Printer Server</tt> attribute check box selected by default</p></td>
<td align="left" valign="top" scope="row"><p>Required to install an attached or network
printer and to add access to a printer &mdash; This field is filled
in by the tool</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>Description</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>-d</tt></p></td>
<td align="left" valign="top" scope="row"><p>User defined string</p></td>
<td align="left" valign="top" scope="row"><p><tt>laser printer near breakroom</tt></p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
<td align="left" valign="top" scope="row"><p>Optional</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>Printer Port</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>-v</tt></p></td>
<td align="left" valign="top" scope="row"><p>Device that the printer is attached to</p></td>
<td align="left" valign="top" scope="row"><p><tt>/dev/term/a</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/dev/term/a</tt></p></td>
<td align="left" valign="top" scope="row"><p>Required
to install an attached printer</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>Printer Type</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>-T</tt></p></td>
<td align="left" valign="top" scope="row"><p>Type of printer</p></td>
<td align="left" valign="top" scope="row"><p><tt>unknown</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>PostScript</tt></p></td>
<td align="left" valign="top" scope="row"><p>Required to install an attached printer
or a network printer without PPD files</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>File Content Type</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>-I</tt></p></td>
<td align="left" valign="top" scope="row"><p>Content to be printed</p></td>
<td align="left" valign="top" scope="row"><p><tt>any</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>PostScript</tt></p></td>
<td align="left" valign="top" scope="row"><p>Required to install an
attached printer or a network printer without PPD files</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>PPD file name</p></td>
<td align="left" valign="top" scope="row"><p><tt>-n</tt></p></td>
<td align="left" valign="top" scope="row"><p>Full path to
the PPD file and file name with <tt>.ppd</tt> extension.</p></td>
<td align="left" valign="top" scope="row"><p><i>path</i>/<i>necprinter</i><tt>.ppd</tt></p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
<td align="left" valign="top" scope="row"><p>Optional</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>Fault Notification</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>-A</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies how to notify
user of errors</p></td>
<td align="left" valign="top" scope="row"><p><tt>-A</tt> <tt><b>mail</b></tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>Write to superuser</tt></p></td>
<td align="left" valign="top" scope="row"><p>Optional</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Default Printer</p></td>
<td align="left" valign="top" scope="row"><p><tt>-d</tt></p></td>
<td align="left" valign="top" scope="row"><p>Identifies the default printer</p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
<td align="left" valign="top" scope="row"><p>Optional</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Banner Page control Menu:</p></td>
<td align="left" valign="top" scope="row"><p><tt>-o</tt></p></td>
<td align="left" valign="top" scope="row"><p>Select whether
to print banner page</p></td>
<td align="left" valign="top" scope="row"><p><tt>-o</tt> <tt><b>banner=never</b></tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>-o</tt> <tt><b>banner=optional</b></tt></p></td>
<td align="left" valign="top" scope="row"><p>Optional</p></td>
</tr>
</table>

<a name="ertru"></a><h4>How to Add a New Directly Attached Printer by Using LP Print Service Commands</h4><p><a name="indexterm-53"></a><a name="indexterm-54"></a><a name="indexterm-55"></a><a name="indexterm-56"></a>This procedure describes how to add a new attached printer specifying a PPD
file. The <tt>-n</tt> option to the <tt>lpadmin</tt> command enables you to specify a
PPD file when adding a new attached printer or modifying an existing attached
printer. Two examples follow this procedure. The first example shows you how to
add a new attached printer with PPD files. The second example shows you
how to add a new attached printer without PPD files.</p><ol><a name="ertrv"></a>
<li><b>Connect the printer to the system, and turn  on the power
to the printer.</b><p>Consult the printer vendor's installation documentation for information about the hardware switches and
cabling requirements.</p></li>
<li><b>Collect the information that is required to configure an attached printer with PPD
files.</b>
<ul><li><p>Printer name and port device</p></li>
<li><p>File content type</p></li>
<li><p>PPD file</p></li></ul>
<p>To determine the PPD file that the printer will use, first define
the printer make, model, and driver.</p><p>For overview information about using PPD files when adding a new printer or
modifying an existing printer by using LP print service commands, see <a href="printconcept-42.html">What's New in Printing?</a>.</p></li>
<li><b>Define the printer name, port device, file content type, and PPD file that
the printer will use.</b><p>When using PPD files, the file content type is typically PostScript.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>Specify the printer name and the port device that the printer will use.</b><pre># <tt><b>lpadmin -p </tt><i>printer-name</i><tt> -v /dev/printers/0</b></tt></pre><p>The device to use is <tt>/dev/printers/0</tt>.</p><p>You can now use the <tt>-s</tt> option with the <tt>lpadmin</tt> command to specify
the print service host name as localhost. For more information, see <a href="#gfjgi">How to Use LP Print Commands to Add a Print Queue With <tt>localhost</tt> Specified as the Host Name</a>.</p></li>
<li><b>Specify the interface script that the printer will use.</b><pre># <tt><b>lpadmin -p </tt><i>printer-name</i><tt> -m standard_foomatic</b></tt></pre></li>
<li><b>Specify the file content type and the PPD file that the printer will
use.</b><pre># <tt><b>lpadmin -p </tt><i>printer-name</i><tt> -I </tt><i>content-type</i><tt> -n /</tt><i>path</i><tt>/</tt><i>ppdfile</i><tt></b></tt></pre><p>The PPD file that you supply is located in the <tt>/</tt><i>path</i><tt></tt> directory.</p>
<hr><p><b>Note - </b>If /<i>path</i> is not a PPD file repository on the system, then a
copy of the PPD file is placed in the <tt>user</tt> label directory in
the <tt>user</tt> PPD file repository. For more information, see <a href="geawn.html">Administering PPD Files by Using the PPD File Management Utility (Task Map)</a>.</p>
<hr>
</li>
<li><b>Specify the printer description.</b><pre># <tt><b>lpadmin -p </tt><i>printer-name</i><tt> -D "</tt><i>printer-description</i><tt>"</b></tt></pre></li></ol><p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/lpadmin-1m?a=view"><tt>lpadmin</tt>(1M)</a> man page.</p></li>
<li><b>(Optional) Add filters to the print server.</b><pre># <tt><b>cd /etc/lp/fd</b></tt>
# <tt><b>for</b></tt> <i>filter</i> <tt><b>in *.fd;do</b></tt>
    &gt; <i>name</i><tt><b>=`basename $</b></tt><i>filter</i> <tt><b>.fd`</b></tt>
    &gt; <tt><b>lpfilter -f $</b></tt> <i>name</i><tt><b>-F $</b></tt> <i>filter</i>
    &gt; <tt><b>done</b></tt></pre></li>
<li><b>Enable the printer to accept print requests and to print those requests.</b><pre># <tt><b>accept</b></tt> <i>printer-name</i>
# <tt><b>enable</b></tt> <i>printer-name</i></pre></li>
<li><b>Verify that the printer is correctly configured.</b><pre># <tt><b>lpstat -p </tt><i>printer-name</i><tt> -l</b></tt></pre><p>The output of the <tt>lpstat</tt> command will list the PPD file that you
used.</p></li></ol><a name="ertrx"></a><h6>Example&nbsp;4-1 Adding a New Directly Attached Printer With PPD Files by Using LP Print Service Commands</h6><a name="indexterm-57"></a><p>This example shows how to add a new attached printer with PPD
files. The <tt>-n</tt> option to the <tt>lpadmin</tt> command enables you to add a new
print queue by specifying PPD files. The following information is used as an
example.</p><p>The information that you provide might vary from the following:</p>
<ul><li><p>Printer name: <tt>paper</tt></p></li>
<li><p>Port device: <tt>/dev/printers/0</tt></p></li>
<li><p>File content type: <tt>postscript</tt></p></li>
<li><p>PPD file: <tt>/</tt><i>path</i><tt>/Lexmark-Optra_E312-Postscript.ppd.gz</tt></p></li></ul>
<pre># <tt><b>lpadmin -p paper -v /dev/printers/0</b></tt> (1)
# <tt><b>lpadmin -p paper -I postscript</b></tt> (2)
# <tt><b>lpadmin -p paper -m standard_footmatic</b></tt> (3)
# <tt><b>lpadmin -p paper -n /</tt><i>path</i><tt>/Lexmark-Optra_E312-Postscript.ppd.gz</b></tt>(4)
# <tt><b>lpadmin -p paper -D "Color printer on third floor, rm 3003"</b></tt> (5)
# <tt><b>cd /etc/lp/fd</b></tt>

# <tt><b>accept paper</b></tt>
    destination &ldquo;paper&rdquo; now accepting requests 
# <tt><b>enable paper</b></tt>    (6) 
printer &ldquo;paper&rdquo; now enabled 
# <tt><b>lpstat -p paper</b></tt> (7)
printer paper is idle. enabled since Feb 28 11:21 2004...</pre>
<ol><li><p>Defines the printer name and the port device that the printer will use</p></li>
<li><p>Sets the file content types to which the printer can print to directly</p></li>
<li><p>Specifies the interface script for utilizing PPD files</p>
<hr><p><b>Note - </b>This command also copies the PPD file to the <tt>user</tt> label in the <tt>user</tt> PPD file repository, if /<i>path</i> is not in an existing PPD file repository on the system.</p>
<hr>
</li>
<li><p>Specifies the path to the PPD file and the PPD file name</p></li>
<li><p>Adds a description for the printer</p></li>
<li><p>Accepts print requests for the printer and enables the printer</p></li>
<li><p>Verifies that the printer is ready for printing</p></li></ol>
<a name="ertrw"></a><h6>Example&nbsp;4-2 Adding a New Directly Attached Printer Without PPD Files by Using LP Print Service Commands</h6><p>This example shows how to add a new attached printer without PPD
files. The commands in this example must be executed on the print server
where the printer is connected. The following information is used as an example.
</p><p>The information that you provide might vary from the following:</p>
<ul><li><p>Printer name: <tt>luna</tt></p></li>
<li><p>Port device: <tt>/dev/term/b</tt></p></li>
<li><p>Printer type: <tt>PS</tt></p></li>
<li><p>File content type: <tt>postscript</tt></p><pre># <tt><b>chown lp /dev/term/b</b></tt>
# <tt><b>chmod 600 /dev/term/b</b></tt> (1)
# <tt><b>lpadmin -p luna -v /dev/term/b</b></tt> (2)
# <tt><b>lpadmin -p luna -T PS</b></tt> (3)
# <tt><b>lpadmin -p luna -I postscript</b></tt> (4)
# <tt><b>lpadmin -p luna -D "Room 1954 ps"</b></tt> (5)
# <tt><b>cd /etc/lp/fd</b></tt>

# <tt><b>accept luna</b></tt>
destination &ldquo;luna&rdquo; now accepting requests 
# <tt><b>enable luna</b></tt> (6) 
printer &ldquo;luna&rdquo; now enabled 
# <tt><b>lpstat -p luna</b></tt> (7)
printer luna is idle.enabled since Feb 28 11:21 2003.available</pre></li></ul>

<ol><li><p>Gives <tt>lp</tt> ownership and sole access to a port device</p></li>
<li><p>Defines the printer name and the port device that the printer will use</p></li>
<li><p>Sets the printer type of the printer</p></li>
<li><p>Specifies the file content types to which the printer can print directly</p></li>
<li><p>Adds a description for the printer</p></li>
<li><p>Accepts print requests for the printer and enables the printer</p></li>
<li><p>Verifies that the printer is ready for printing</p></li></ol>
<h6>See Also</h6>
<ul><li><p><a href="ermli.html#printsetup-9">How to Add Printer Access by Using Solaris Print Manager</a> to add printer access on a print client.</p></li>
<li><p><a href="printsetup-10.html#printsetup-11">How to Set Up a <tt>.printers</tt> File</a> to allow users to customize printer aliases.</p></li></ul>


<a name="gfjgi"></a><h4>How to Use LP Print Commands to Add a Print Queue With <tt>localhost</tt> Specified as the Host Name</h4><p>This procedure shows how to use LP print commands to add a
local print queue with <tt>localhost</tt> specified as the host name in the
print system databases. This modification was added to enable print servers to maintain the
same print host name, independent of the machine host name. Note that you can
also modify a print queue by using these commands.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Set the print host name to <tt>localhost</tt>.</b><pre># <tt><b>lpadmin -p </tt><i>new-print-queue</i><tt> -s localhost -v </tt><i>device</i><tt></b></tt></pre></li>
<li><b>Check the entry in the <tt>/etc/printers.conf</tt> file.</b><pre>% <tt><b>lpget </tt><i>new-print-queue</i><tt></b></tt>
<i>new-print-queue</i>:
        bsdaddr=abc,<i>new-print-queue</i>,Solaris</pre><p>If the print queue was created or modified successfully, the output of the
<tt>lpget</tt> command returns the name of the new or modified print queue.</p></li></ol><a name="queueadd-5"></a><h6>Example&nbsp;4-3 Adding a Print Queue by Specifying <tt>localhost</tt> as the Host Name</h6><a name="indexterm-58"></a><a name="indexterm-59"></a><a name="indexterm-60"></a><p>This example shows how to add a new print queue, <tt>paper</tt>, by using
the <tt>lpadmin</tt> command with the <tt>-s</tt> option to specify <tt>localhost</tt> as the host
name.</p><pre>% <tt><b>su - root</b></tt>
# <tt><b>lpadmin -p paper -s localhost -v /dev/ecpp0</b></tt>

% <tt><b>lpget paper</b></tt>
paper:
        bsdaddr=localhost,paper,Solaris</pre><a name="add-default-1"></a><h6>Example&nbsp;4-4 Adding a Print Queue by Using the Default Behavior of <tt>lpadmin</tt> to Specify the Host Name</h6><p>This example shows the default behavior of the <tt>lpadmin</tt> command for using system
host name, <tt>abc</tt>, when adding a new print queue.</p><pre>% <tt><b>su - root</b></tt>
# <tt><b>lpadmin -p newspaper -v /dev/printers/0</b></tt>

% <tt><b>lpget newspaper</b></tt>
fargo:
        bsdaddr=abc,newspaper,Solaris</pre><a name="mod-local-1"></a><h6>Example&nbsp;4-5 Modifying a Print Queue to Use the Local Host as the Print Server Name</h6><p>This example shows how to modify an existing print queue, <tt>newspaper</tt>, and
specify <tt>localhost</tt> as the new print server name.</p><pre>% <tt><b>su - root</b></tt>
# <tt><b>lpadmin -p newspaper -s localhost</b></tt>

# <tt><b>lpget newspaper</b></tt>
newspaper:
        bsdaddr=localhost,newspaper,Solaris</pre><h6>See Also</h6><p>For information about specifying <tt>localhost</tt> as the print server's host name when adding
or modifying a print queue with Solaris Print Manager, see <a href="ermll.html#gfjoa">How to Use Solaris Print Manager to Add a Print Queue With the Local Host  Specified as the Host Name</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ermll.html">Previous</a>
             </td>
             <td align="right">
                 <a href="printsetup-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

