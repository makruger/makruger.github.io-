<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Administering Printers by Using the Internet Printing Protocol (Task Map) - System Administration Guide: Solaris Printing</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Solaris Printing</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="proto-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gfjoy.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="printintro-1.html">1.&nbsp;&nbsp;Introduction to Printing in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="printplan-1.html">2.&nbsp;&nbsp;Planning for Printing in the Solaris Operating System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printsetup-33230.html">3.&nbsp;&nbsp;Setting Up Printing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printers-33230.html">4.&nbsp;&nbsp;Setting Up Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printadmin-15883.html">5.&nbsp;&nbsp;Administering Printers by Using Solaris Print Manager and LP Print Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="proto-1.html">6.&nbsp;&nbsp;Administering Printers That Use Network Printing Protocols (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Administering Printers by Using the Internet Printing Protocol (Task Map)</a></p>
</div>
<p class="toc level2"><a href="gfjoy.html">Administering Printers by Using the RFC-1179 Printing Protocol (Task Map)</a></p>
<p class="toc level2"><a href="share-smb-1.html">Administering Printers by Using the SMB Protocol</a></p>
<p class="toc level1 tocsp"><a href="printcust-66310.html">7.&nbsp;&nbsp;Customizing Printing Services and Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="forms-1.html">8.&nbsp;&nbsp;Administering Character Sets, Filters, Forms, and Fonts (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ppdadmin-1.html">9.&nbsp;&nbsp;Administering Printers by Using the PPD File Management Utility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printdesktop-1.html">10.&nbsp;&nbsp;Setting Up and Administering Printers From the Desktop (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printref-76596.html">11.&nbsp;&nbsp;Printing in the Solaris Operating System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="tsprint-34397.html">12.&nbsp;&nbsp;Troubleshooting Printing Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;Using the Internet Printing Protocol</a></p>
<p class="toc level1 tocsp"><a href="gdqrm.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gedvp"></a><h3>Administering Printers by Using the Internet Printing Protocol (Task Map)</h3>
<a name="indexterm-96"></a><a name="indexterm-97"></a><a name="gfjor"></a><h6>Table&nbsp;6-1 Administering Printers by Using IPP: Task Map</h6><table><col width="28%"><col width="37%"><col width="34%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Check printer status and obtain information
about a printer when using IPP.</p></td>
<td align="left" valign="top" scope="row"><p>The <tt>lpset</tt> command is used to check printer
status when IPP is in use.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#ippuse-2">How to Obtain Information About Printers When Using IPP</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Move a remote print request when using IPP.</p></td>
<td align="left" valign="top" scope="row"><p>The
<tt>lpmove</tt> command is used to move print jobs to a new destination when
IPP is in use.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#gedux">How to Move Remote Print Requests Between Print Queues on a Print Server When Using IPP</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Modify a remote print request when using IPP.</p></td>
<td align="left" valign="top" scope="row"><p>The <tt>lp</tt>
command is used to modify remote print requests when IPP is in use.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#gedux">How to Move Remote Print Requests Between Print Queues on a Print Server When Using IPP</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Share
printers when using IPP.</p></td>
<td align="left" valign="top" scope="row"><p>To share printers when IPP is in use, you
need to modify the default file configuration.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#gedvq">Sharing Printers When Using IPP</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Turn on IPP authentication mechanisms.</p></td>
<td align="left" valign="top" scope="row"><p>In the Solaris
Express release, client authentication is required to access some <tt>uri-path</tt> and operation combinations.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#auth-3">Turning On IPP Authentication Mechanisms</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Set
authorizations that enable you to accept print queues when using IPP.</p></td>
<td align="left" valign="top" scope="row"><p>The proper authentication
information is required to enable an operation to be processed for the <tt>uri</tt>
path.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#auth-2">How to Set Authorizations That Enable You to Accept Print Queues When Using IPP?</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a user to the IPP <tt>AuthUser</tt> file.</p></td>
<td align="left" valign="top" scope="row"><p>Adding a user to the
IPP <tt>AuthUser</tt> file requires modification of the <tt>httpd-standalone-ipp.conf</tt> file by using the <tt>htpasswd</tt> command:</p></td>
<td align="left" valign="top" scope="row"><p><a href="#gflkq"> How to Add a User to the IPP <tt>AuthUser</tt> File</a></p></td>
</tr>
</table>

<a name="ippuse-2"></a><h4>How to Obtain Information About Printers When Using IPP</h4><a name="indexterm-98"></a><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>To obtain information about a printer when IPP is in use, you
would type:</b><pre># <tt><b>lpset -a printer-uri-supported=ipp://server/printers/</tt><i>server</i><tt> </tt><i>queue</i><tt></b></tt></pre></li>
<li><b>To see the return output for the printer, you would type:</b><pre># <tt><b>lpstat -p </tt><i>test</i><tt> -l</b></tt></pre></li></ol><a name="ipp-ex-1"></a><h6>Example&nbsp;6-1 Obtaining Information About Printers When IPP Is in Use</h6><pre># <tt><b>lpset -a printer-uri-supported=ipp://server/printers/test test</b></tt>
# <tt><b>lpstat -p test -l</b></tt>
printer test disabled since Fri Nov 03 11:48:53 2006. available.
        new printer
        Form mounted:
        Content types: application/postscript
        Description:
        Connection:
        Interface: /usr/lib/lp/model/uri
        PPD: /usr/lib/lp/model/ppd/system/foomatic \
/HP/HP-Color_LaserJet_4600-Postscript.ppd.gz
        On fault: write root
        After fault: continue
        Users allowed:
                (all)
        Forms allowed:
                (none)
        Media supported:
                Letter
                A4
                11x17
                A3
                A5
                B5
                Env10
                EnvC5
                EnvDL
                EnvISOB5
                EnvMonarch
                Executive
                Legal
        Banner required
        Character sets:
                (none)
        Default pitch:
        Default page size:
        Default port setting:
        Options:</pre>

<a name="gedux"></a><h4>How to Move Remote Print Requests Between Print Queues on a Print Server When Using IPP</h4><a name="indexterm-99"></a><a name="indexterm-100"></a><p>You can remotely move print jobs between print queues when IPP is
in use by using the <tt>lpmove</tt> command. Print jobs can be moved to the
new destination by request ID or by the destination.</p><ul>
<li><b>To move a remote print request from one print queue to another
print queue when using IPP, type the following command:</b><pre>$ <tt><b>lpmove </tt><i>request-id</i><tt> </tt><i>old-destination</i><tt> </tt><i>new-destination</i><tt></b></tt></pre></li></ul><a name="gedvk"></a><h6>Example&nbsp;6-2 Moving Remote Print Requests by Request ID</h6><p>This example shows how to move a remote print request <tt>luna-185</tt> to the
new destination printer <tt>lucille</tt> by using the request ID.</p><pre>$ <tt><b>lpmove luna-185 lucille</b></tt></pre><a name="geduq"></a><h6>Example&nbsp;6-3 Moving Remote Print Requests by Destination</h6><p>This example shows how to move all of the print requests from the
printer <tt>luna</tt> to the new destination printer <tt>lucille</tt>.</p><pre>$ <tt><b>lpmove luna luciille</b></tt></pre>

<a name="geduv"></a><h4>How to Modify Remote Print Requests When Using IPP</h4><a name="indexterm-101"></a><a name="indexterm-102"></a><p>You can use the <tt>lp</tt> command to perform a variety of tasks when
IPP is in use. For more information about using the <tt>lp</tt> command, see
the <a href="http://docs.sun.com/doc/819-2239/lp-1?a=view"><tt>lp</tt>(1)</a> man page.</p><ul>
<li><b>Use the <tt>lp</tt> command with the appropriate command options to modify remote print
jobs.</b><pre>$ <tt><b>lp [-d] [-H] [-i] [-n] [-o]</b></tt></pre><dl><dt><tt>-d</tt></dt>
<dd><p>Specifies the destination for the print request.</p></dd>
<dt><tt>-H</tt></dt>
<dd><p>Specifies special-handling. Prints the request according to the value of the special-handling.</p></dd>
<dt><tt>-i</tt></dt>
<dd><p>Specifies the request ID.</p></dd>
<dt><tt>-n</tt></dt>
<dd><p>Specifies number of copies. Specify this option as a digit. The default for number is 1.</p></dd>
<dt><tt>-o</tt></dt>
<dd><p>Specifies printer dependent options.</p></dd>
</dl>
</li></ul><a name="heldjob-5"></a><h6>Example&nbsp;6-4 Submitting Previously Held Print Requests</h6><p>This example shows how to submit previously held print requests for the printer
<tt>lucille</tt>.</p><pre>$ <tt><b>lp -d lucille -H hold /etc/motd</b></tt></pre><a name="gedur"></a><h6>Example&nbsp;6-5 Changing the Number of Copies Requested</h6><p>This example shows how to change the number of copies requested for the
request ID <tt>lucille-233</tt>.</p><pre>$ <tt><b>lp -i lucille-233 -n 5</b></tt></pre><a name="gedvi"></a><h6>Example&nbsp;6-6 Turning on and Releasing the Duplex Feature</h6><p>This example shows how to turn on and release the duplex feature for
a specified request ID.</p><pre>$ <tt><b>lp -i lucille-233 -o Duplex=DuplexNoTumble -H resume</b></tt></pre>

<a name="gedvq"></a><h4>Sharing Printers When Using IPP</h4>
<a name="indexterm-103"></a><a name="indexterm-104"></a><p>When you install the Solaris OS, the IPP listening service is automatically enabled
on a print server when you add the first print queue. the
listening service is also disabled when the last print queue has been removed.
The default configuration in some releases of Solaris 9 and Solaris 10 is
fairly permissive. If you have security concerns, you might want to modify the
default configuration to make it more restrictive. The set of unauthenticated IPP operations
that is supported by the service should be limited to operations that are
the least destructive.</p><p>Operations include:</p>
<ul><li><p><tt>print-job</tt></p></li>
<li><p><tt>validate-job</tt></p></li>
<li><p><tt>create-job</tt></p></li>
<li><p><tt>get-jobs</tt></p></li>
<li><p><tt>get-printer-attributes</tt></p></li>
<li><p><tt>send-document</tt></p></li>
<li><p><tt>cancel-job</tt></p></li>
<li><p><tt>get-job-attributes</tt></p></li>
<li><p><tt>cups-get-default</tt></p></li>
<li><p><tt>cups-get-printers</tt></p></li>
<li><p><tt>cups-get-classes</tt></p></li>
<li><p><tt>cups-move-job</tt></p></li></ul>


<a name="geduw"></a><h4>IPP Authentication Mechanisms</h4>
<a name="indexterm-105"></a><a name="indexterm-106"></a><p>IPP is layered on top of HTTP. As a result, the protocol
uses the authentication mechanisms that are built into HTTP and the Apache software.
The default configuration that is shipped in the Solaris OS doesn't make use
of these authentication mechanisms in some releases of Solaris 9, Solaris 10, as well
as the Solaris Express release. In the Solaris Express release, client authentication is
required to access some <tt>uri-path</tt> and operation combinations.</p><p>For example, the more common form of <i>printer-uri</i> that is used by client
systems is:</p><pre>ipp://<i>server</i>/printers/<i>queue</i></pre><p>When printing on a system that is running a version Windows, specify the
URI by using the following syntax:</p><pre>http://<i>server</i>:631/printers/<i>queue</i></pre><p>More information about printing in a heterogeneous environment can be found at <a href="http://opensolaris.org/os/community/printing/">http://opensolaris.org/os/community/printing/</a>.</p>

<a name="auth-3"></a><h4>Turning On IPP Authentication Mechanisms</h4>
<p>To authenticate, use the <tt>accept</tt> command as follows:</p><pre>$ <tt><b>accept ipp://</tt><i>server</i><tt>/admin/</tt><i>queue</i><tt></b></tt></pre><p>For example, to authenticate the print queue <tt>masterly</tt> on the server <tt>noreaster</tt> type:</p><pre>$ <tt><b>accept ipp://noreaster/admin/masterly</b></tt></pre><p>You are prompted for authentication.</p><p>Enter the proper authentication information to enable the operation to be processed for
the <tt>uri</tt> path.</p><p>For example:</p><pre>system% <tt><b>accept ipp://printing/printers/wspe</b></tt>
accept: ipp://printing/printers/wspe: operation-not-supported
system% <tt><b>accept ipp://printing/admin/wspe</b></tt>
passphrase for user-name to access ipp://printing/admin/wspe:
accept: ipp://printing/admin/wspe: not-authorized
system%</pre>
<hr><p><b>Note - </b>The following command will fail under the default configuration for IPP, because the
operation is not enabled for that <tt>uri</tt> path</p><pre>$ <tt><b>accept ipp://</tt><i>server</i><tt>/printers/</tt><i>queue</i><tt></b></tt></pre>
<hr>


<a name="auth-2"></a><h4>How to Set Authorizations That Enable You to Accept Print Queues When Using IPP?</h4>
<p>To set authorizations for accepting print queues when IPP is in use, edit
the <tt>/etc/apache/httpd-standalone-ipp.conf</tt> file.</p><p>Add the following entries to set up authentication:</p>
<ul><li><p><tt>AuthType</tt></p></li>
<li><p><tt>AuthName</tt></p></li>
<li><p><tt>AuthUserFile</tt></p></li></ul>
<p>For an example, see the <tt>/etc/apache/httpd-standalone-ipp.conf</tt> file.</p><p>In the Solaris Express release, the <tt>/printers</tt> patch turns on the following operations:</p>
<ul><li><p><tt>print-job</tt></p></li>
<li><p><tt>validate-job</tt></p></li>
<li><p><tt>create-job</tt></p></li>
<li><p><tt>get-jobs</tt></p></li>
<li><p><tt>get-printer-attributes</tt></p></li>
<li><p><tt>send-document</tt></p></li>
<li><p><tt>cancel-job</tt></p></li>
<li><p><tt>get-job-attributes</tt></p></li>
<li><p><tt>cups-get-default</tt></p></li>
<li><p><tt>cups-get-printers</tt></p></li>
<li><p><tt>cups-get-classe</tt>s</p></li>
<li><p><tt>cups-move-job</tt></p></li></ul>


<a name="gflkq"></a><h4> How to Add a User to the IPP <tt>AuthUser</tt> File</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Update the <tt>/etc/apache/httpd-standalone-ipp.conf</tt> file by using the <tt>htpasswd</tt> command:</b><pre># <tt><b>/usr/sfw/bin/htpasswd /etc/ipp-users </tt><i>user-name</i><tt></b></tt></pre></li>
<li><b>Verify the user was added, check the <tt>/etc/ipp-users</tt> file.</b><pre># <tt><b>grep </tt><i>user-name</i><tt> /etc/ipp-users</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="proto-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gfjoy.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

