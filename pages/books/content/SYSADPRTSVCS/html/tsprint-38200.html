<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Troubleshooting Printing Problems - System Administration Guide: Solaris Printing</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Solaris Printing</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tsprint-78101.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fddwm.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="printintro-1.html">1.&nbsp;&nbsp;Introduction to Printing in the Solaris Operating System</a></p>
<p class="toc level1 tocsp"><a href="printplan-1.html">2.&nbsp;&nbsp;Planning for Printing in the Solaris Operating System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printsetup-33230.html">3.&nbsp;&nbsp;Setting Up Printing Services (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printers-33230.html">4.&nbsp;&nbsp;Setting Up Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printadmin-15883.html">5.&nbsp;&nbsp;Administering Printers by Using Solaris Print Manager and LP Print Commands (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="proto-1.html">6.&nbsp;&nbsp;Administering Printers That Use Network Printing Protocols (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printcust-66310.html">7.&nbsp;&nbsp;Customizing Printing Services and Printers (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="forms-1.html">8.&nbsp;&nbsp;Administering Character Sets, Filters, Forms, and Fonts (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ppdadmin-1.html">9.&nbsp;&nbsp;Administering Printers by Using the PPD File Management Utility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printdesktop-1.html">10.&nbsp;&nbsp;Setting Up and Administering Printers From the Desktop (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="printref-76596.html">11.&nbsp;&nbsp;Printing in the Solaris Operating System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="tsprint-34397.html">12.&nbsp;&nbsp;Troubleshooting Printing Problems (Tasks)</a></p>
<p class="toc level2"><a href="gekzm.html">Tips on Troubleshooting Printer Setup Problems</a></p>
<p class="toc level2"><a href="tsprint-78101.html">Tips on Troubleshooting Printing Problems</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Troubleshooting Printing Problems</a></p>
</div>
<p class="toc level1 tocsp"><a href="fddwm.html">A.&nbsp;&nbsp;Using the Internet Printing Protocol</a></p>
<p class="toc level1 tocsp"><a href="gdqrm.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="tsprint-38200"></a><h3>Troubleshooting Printing Problems</h3>
<p>This section contains step-by-step instructions that explain:</p>
<ul><li><p>How to troubleshoot no output</p></li>
<li><p>How to troubleshoot incorrect output</p></li>
<li><p>How to unhang the <tt>lp</tt> commands</p></li>
<li><p>How to troubleshoot an idle (hung) printer</p></li>
<li><p>How to resolve conflicting status messages</p></li></ul>


<a name="tsprint-33410"></a><h4>Troubleshooting No Printer Output</h4>
<p>This task includes the following troubleshooting procedures to try when you submit a
print request to a printer and nothing prints:</p>
<ul><li><p>Check the hardware (<a href="#tsprint-84435">How to Check the Printer Hardware</a>).</p></li>
<li><p>Check the network (<a href="#tsprint-13730">How To Check the Printer Network Connections</a>).</p></li>
<li><p>Check the LP print service basic functions (<a href="#tsprint-89143">How to Check the Basic Functions of the LP Print Service</a>).</p></li>
<li><p>Check printing from a Solaris print client to a Solaris print server (<a href="#tsprint-40161">How to Check Printing From a Solaris Print Client to a Solaris Print Server</a>).</p></li></ul>
<p>Try the first three procedures in the order in which they are
listed, before going to the print client/server section. However, if the banner page prints,
but nothing else does, turn to the instructions under <a href="#tsprint-81415">How to Troubleshoot Incorrect Output</a>.</p>

<a name="tsprint-84435"></a><h4>How to Check the Printer Hardware</h4><ol>
<li><a name="tsprint-step-12"></a><b>Check that the printer is plugged in and turned on.</b></li>
<li><a name="tsprint-step-13"></a><b>Check that the cable is connected to the port on the printer and
to the port on the system or server.</b></li>
<li><a name="tsprint-step-14"></a><b>Make sure that the cable is the correct cable and that it is
not defective. </b><p><a name="tsprint-ix5523"></a>Refer to the manufacturer`s documentation. If the printer is connected to a serial port,
verify that the cable supports hardware flow control. A NULL modem adapter supports
this. The following table shows the pin configuration for NULL modem cables. </p><table><col width="35%"><col width="35%"><col width="29%"><tr><th align="left" valign="top" scope="column"></th>
<th align="left" valign="top" scope="column"><p>Host</p></th>
<th align="left" valign="top" scope="column"><p>Printer</p></th>
</tr>
<tr><th align="left" valign="top" scope="column"><p>Mini-Din-8</p></th>
<th align="left" valign="top" scope="column"><p>25-Pin
D-sub</p></th>
<th align="left" valign="top" scope="column"><p>25-Pin D-sub</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>  - </p></td>
<td align="left" valign="top" scope="row"><p>1 (FG)</p></td>
<td align="left" valign="top" scope="row"><p>1(FG)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>3(TD)</p></td>
<td align="left" valign="top" scope="row"><p>2(TD)</p></td>
<td align="left" valign="top" scope="row"><p>3(RD)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>5(RD)</p></td>
<td align="left" valign="top" scope="row"><p>3(RD)</p></td>
<td align="left" valign="top" scope="row"><p>2(TD)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>6(RTS)</p></td>
<td align="left" valign="top" scope="row"><p>4(RTS)</p></td>
<td align="left" valign="top" scope="row"><p>5(CTS)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>2(CTS)</p></td>
<td align="left" valign="top" scope="row"><p>5(CTS)</p></td>
<td align="left" valign="top" scope="row"><p>4(RTS)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>4(SG)</p></td>
<td align="left" valign="top" scope="row"><p>7(SG)</p></td>
<td align="left" valign="top" scope="row"><p>7(SG)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>7(DCD)</p></td>
<td align="left" valign="top" scope="row"><p>6(DSR), 8(DCD)</p></td>
<td align="left" valign="top" scope="row"><p>20(DTR)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1(DTR)</p></td>
<td align="left" valign="top" scope="row"><p>20(DTR)</p></td>
<td align="left" valign="top" scope="row"><p>6(DSR), 8(DCD)</p></td>
</tr>
</table></li>
<li><a name="tsprint-step-15"></a><b>Check that any hardware switches for the ports are set properly.</b><p>See the printer documentation for the correct settings.</p></li>
<li><a name="tsprint-step-16"></a><b>Check that the printer is operational.</b><p>Use the printer's self-test feature, if the printer has one. Check the printer
documentation for information about printer self-testing.</p></li>
<li><a name="tsprint-step-17"></a><b>Check that the baud settings for the computer and the printer are correct.
</b><p>If the baud settings are not the same for both the computer and
the printer, sometimes nothing will print, but more often you get incorrect output.
For instructions, see <a href="#tsprint-81415">How to Troubleshoot Incorrect Output</a>.</p></li></ol>

<a name="tsprint-13730"></a><h4>How To Check the Printer Network Connections</h4><ul>
<li><a name="tsprint-step-19"></a><b>Check that the network link between the print server and the print client
is set up correctly.</b><pre><i>print-client</i># <tt><b>ping</b></tt> <i>print-server</i> 
<i>print-server</i> is alive
<i>print-server</i># <tt><b>ping</b></tt> <i>print-client</i>
<i>print-client</i> not available</pre><p>If the message says the system is alive, you know you can
reach the system, so the network is all right. The message also tells
you that either a naming service or the local <tt>/etc/hosts</tt> file has translated the
host (system) name you entered into an IP address; otherwise, you would need
to enter the IP address. </p><p>If you get a <tt>not available</tt> message, try to answer the following questions: How
is NIS or NIS+ set up at your site? Do you need to
take additional steps so that print servers and print clients can communicate with
one another? If your site is not running NIS or NIS+, have
you entered the IP address for the print server in each print client's
<tt>/etc/hosts</tt> file, and entered all print client IP addresses in the <tt>/etc/hosts</tt> file of
the print server?</p></li></ul>

<a name="gekzo"></a><h4>How to Debug Printing Problems</h4><ol>
<li><b>On the system that you want to debug remote printing problems, become superuser
or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Type the following command:</b><pre># <tt><b>echo "lpr.debug /var/tmp/lpr.debug" &gt;&gt;/etc/syslog.conf</b></tt></pre>
<hr><p><b>Note - </b>The white space between <tt>lpr.debug</tt> and <tt>/var/tmp/lpr.debug</tt> <b>must</b> be a tab.</p>
<hr>
</li>
<li><b>Create the <tt>lpr.debug</tt> file.</b><pre># <tt><b>touch /var/tmp/lpr.debug</b></tt></pre></li>
<li><b>Restart the syslog service.</b><pre># <tt><b>svcadm restart system.log</b></tt></pre></li></ol>

<a name="tsprint-89143"></a><h4>How to Check the Basic Functions of the LP Print Service</h4><p>This procedure uses the printer <tt>luna</tt> as an example of checking basic LP
print service functions.</p><ol>
<li><a name="tsprint-step-23"></a><b>On the print server, make sure that the LP print service is running.</b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-176"></a><b>Check whether the LP scheduler is running by using one of the following
methods.</b>
<ul><li><p>Use the <tt>lpstat</tt> command.</p><pre>% <tt><b>lpstat -r</b></tt>
scheduler is running</pre><p>A message is displayed, indicating whether the LP scheduler is running.</p></li>
<li><p>Use the <tt>svcs</tt> command.</p><pre>% <tt><b>svcs application/print/server</b></tt></pre><p>The following output is displayed if the scheduler is running.</p><pre>STATE        STIME            FMRI
online        Oct_24        svc:/application/print/server:default</pre><p>The following output is displayed if the scheduler is not running.</p><pre>STATE            STIME            FMRI
disabled        14:27:48        svc:/application/print/server:default</pre></li></ul>
<pre></pre></li>
<li><a name="tsprint-step-25"></a><b><a name="tsprint-ix5525"></a>If the scheduler is not running, become superuser, <tt>lp</tt>, or assume an equivalent role.
Start the scheduler by using one of the following methods.</b>
<ul><li><p>Use the <tt>lpsched</tt> command.</p><pre># <tt><b>/usr/lib/lpsched</b></tt>
Print services started.</pre><p>A message is displayed, indicating the print services have been started.</p></li>
<li><p>Use the <tt>svcadm</tt> command.</p><pre># <tt><b>svcadm enable application/print/server</b></tt></pre><p>When you use the <tt>svcadm</tt> command, no message indicating whether the print services have been started is displayed. To determine if the print services are online, run the <tt>svcs application/print/server</tt> command again.</p></li></ul>
<p>If you have trouble starting the scheduler, see <a href="#tsprint-78868">How to Unhang the LP Print Service</a>.</p></li></ol></li>
<li><a name="tsprint-step-26"></a><b>On both the print server and print client, make sure that the printer
is accepting requests.</b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-27"></a><b>Check that the printer is accepting requests.</b><pre># <tt><b>lpstat -a</b></tt>
mars accepting requests since Jan 12 14:23 2004
luna not accepting requests since Jan 12 14:23 2004
unknown reason</pre><p>This command verifies that the LP system is accepting requests for each printer
configured for the system.</p></li>
<li><a name="tsprint-step-28"></a><b>If the printer is not accepting requests, become superuser, <tt>lp</tt>, or assume an
equivalent role, and allow the printer to accept print requests. </b><pre># <tt><b>accept luna</b></tt></pre><p>The specified printer now accepts requests.</p></li></ol></li>
<li><a name="tsprint-step-29"></a><b>On both the print server and print client, make sure that the printer
is enabled to print submitted print requests.</b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-30"></a><b>Check that the printer is enabled.</b><pre># <tt><b>lpstat -p luna</b></tt>
printer luna disabled since Jan 12 14:25 2004.
available.
unknown reason</pre><p>This command displays information about printer status. You can omit the printer name
to obtain information about all printers set up for the system. The following
example shows a printer that is disabled.</p></li>
<li><a name="tsprint-step-31"></a><b>If the printer is disabled, become superuser, <tt>lp</tt>, or assume an equivalent
role, and enable the printer.</b><pre># <tt><b>enable luna</b></tt>
printer "luna" now enabled.</pre><p>The specified printer is enabled to process print requests.</p></li></ol></li>
<li><a name="tsprint-step-32"></a><b><a name="tsprint-ix5527"></a>On the print server, make sure that the printer is connected to the
correct serial port. </b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-33"></a><b>Check that the printer is connected to the correct serial port.</b><pre># <tt><b>lpstat -t</b></tt>
scheduler is running
system default destination: luna
device for luna: /dev/term/a</pre><p>The message <tt>device for</tt> <i>printer-name</i> shows the port address. Is the cable connected to
the port to which the LP print service says is connected? If the
port is correct, skip to <a href="#tsprint-step-37">Step&nbsp;5</a>. </p></li>
<li><a name="tsprint-step-34"></a><b>Become superuser, <tt>lp</tt>, or assume an equivalent role.</b></li>
<li><a name="tsprint-step-35"></a><b>Change the file ownership of the device file that represents the port.</b><pre># <tt><b>chown lp </tt><i>device-filename</i><tt></b></tt></pre><p>This command assigns the special user <tt>lp</tt> as the owner of the device
file. In this command, <i>device-filename</i> is the name of the device file.</p></li>
<li><a name="tsprint-step-36"></a><b>Change the permissions on the printer port device file.</b><pre># <tt><b>chmod 600 </tt><i>device-filename</i><tt></b></tt></pre><p>This command allows only superuser, <tt>lp</tt>, or an equivalent role to access the
printer port device file.</p></li></ol></li>
<li><a name="tsprint-step-37"></a><b><a name="tsprint-ix5528"></a><a name="tsprint-ix5529"></a>On both the print server and print client, make sure that the printer
is configured properly.  </b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-38"></a><b>Check that the printer is configured properly.</b><pre># <tt><b>lpstat -p luna -l</b></tt>
printer luna is idle. enabled since Jan 12 14:24 2004. available
        Content types: postscript
        Printer types: PS</pre><p>The above example shows a PostScript printer that is configured properly, and that
is available to process print requests. If the printer type and file content
type are correct, skip to <a href="#tsprint-step-40">Step&nbsp;6</a>.</p></li>
<li><a name="tsprint-step-39"></a><b>If the printer type or file content type is incorrect, try setting the
print type to <tt>unknown</tt> and the content type to <tt>any</tt> on the print
client.</b><pre># <tt><b>lpadmin -p</b></tt> <i>printer-name</i> <tt><b>-T</b></tt> <i>printer-type</i> <tt><b>-I</b></tt> <i>file-content-type</i></pre></li></ol></li>
<li><a name="tsprint-step-40"></a><b>On the print server, make sure that the printer is not faulted.</b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-41"></a><b>Check that the printer is not waiting because of a printer fault.</b><pre># <tt><b>lpadmin -p</b></tt> <i>printer-name</i> <tt><b>-F continue</b></tt> </pre><p>This command instructs the LP print service to continue if it is
waiting because of a fault.</p></li>
<li><a name="tsprint-step-42"></a><b>Force an immediate retry by re-enabling the printer.</b><pre># <tt><b>enable</b></tt> <i>printer-name</i> </pre></li>
<li><a name="tsprint-step-43"></a><b>(Optional) Instruct the LP print service to enable quick notification of printer faults.
</b><pre># <tt><b>lpadmin -p</b></tt> <i>printer-name</i> <tt><b>-A 'write root'</b></tt></pre><p>This command instructs the LP print service to set a default policy of
writing root, sending the printer fault message to the terminal on which root
is logged in, if the printer fails. This might help you get
quick notification of faults as you try to fix the problem.</p></li></ol></li>
<li><a name="tsprint-step-44"></a><b>Make sure that the printer is not set up incorrectly as a login
terminal.</b>
<hr><p><b>Note - </b>It is easy to mistakenly set up a printer as a login
terminal, so be sure to check this possibility even if you think it
does not apply.</p>
<hr>
<ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-45"></a><b>Look for the printer port entry in the <tt>ps -ef</tt> command output.</b><pre># <tt><b>ps -ef</b></tt>
    root   169   167  0   Apr 04 ?        0:08 /usr/lib/saf/listen tcp
    root   939     1  0 19:30:47 ?        0:02 /usr/lib/lpsched
    root   859   858  0 19:18:54 term/a   0:01 /bin/sh -c \ /etc/lp
/interfaces/luna
luna-294 rocket!smith &ldquo;passwd\n##
#</pre><p>In the output from this command, look for the printer port entry.
In the above example, port <tt>/dev/term/a</tt> is set up incorrectly as a login terminal.
You can tell by the <tt>"passwd\n##</tt> information at the end of the line.
If the port is set correctly, skip the last steps in this procedure.</p></li>
<li><a name="tsprint-step-46"></a><b>Cancel the print request(s).</b><pre># <tt><b>cancel</b></tt> <i>request-id</i></pre><p>In this command, <i>request-id</i> is the request ID number for a print request
to be canceled.</p></li>
<li><a name="tsprint-step-47"></a><b>Set the printer port to be a nonlogin device.</b><pre># <tt><b>lpadmin -p</b></tt> <i>printer-name</i> <tt><b>-h</b></tt></pre></li>
<li><a name="tsprint-step-48"></a><b>Check the <tt>ps -ef</tt> command output to verify that the printer port is no
longer a login device.</b><p>If you do not find the source of the printing problem in the
basic LP print service functions, continue to one of the following procedures for
the specific client/server case that applies. </p></li></ol></li></ol>

<a name="tsprint-40161"></a><h4>How to Check Printing From a Solaris Print Client to a Solaris Print Server</h4><ol>
<li><a name="tsprint-step-49"></a><b><a name="tsprint-ix5530"></a>Check the basic functions of the LP print service on the print server,
if you have not done so already. </b><p>For instructions on checking basic functions, see <a href="#tsprint-89143">How to Check the Basic Functions of the LP Print Service</a>. Make sure that the printer works
locally before trying to figure out why nothing prints when a request is
made from a print client.</p></li>
<li><a name="tsprint-step-50"></a><b>Check the basic functions of the LP print service on the print client,
if you have not done so already.</b><p>On the print client, the printer has to be enabled and accepting requests
before any request from the client will print.</p>
<hr><p><b>Note - </b>For most of the following steps, you must be logged in as
root or <tt>lp</tt>.</p>
<hr>
</li>
<li><a name="tsprint-step-51"></a><b><a name="tsprint-ix5531"></a>Make sure that the print server is accessible. </b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-52"></a><b>On the print client, send an &ldquo;are you there?&rdquo; request to the print
server.</b><pre><i>print-client</i># <tt><b>ping</b></tt> <i>print-server</i></pre><p>If you receive the message <i>print-server</i> <tt>not available</tt>, you might have a network
problem.</p></li></ol></li>
<li><a name="tsprint-step-62"></a><b>Verify that the print server is operating properly.</b><pre># <tt><b>lpstat -t luna</b></tt> 
scheduler is running
system default destination: luna
device for luna: /dev/term/a
luna accepting requests since Jan 12 14:26 2004
printer luna now printing luna-314. enabled since Jan 12 14:26 2004. 
available.
luna-129            root               488   Jan 12 14:32
#</pre><p>The above example shows a print server up and running.</p></li>
<li><a name="tsprint-step-177"></a><b>If the print server is not operating properly, go back to step 1.</b></li></ol>

<a name="tsprint-81415"></a><h4>How to Troubleshoot Incorrect Output</h4><ol>
<li><a name="tsprint-step-127"></a><b>Log in as superuser, <tt>lp</tt>, or assume an equivalent role.</b></li>
<li><a name="tsprint-step-128"></a><b>Make sure that the printer type is correct. </b><p><a name="tsprint-ix5548"></a>An incorrect printer type might cause incorrect output. For example, if you specify
printer type <tt>PS</tt> and the pages print in reverse order, try printer type
<tt>PSR</tt>. (These type names must be in uppercase.) Also, an incorrect printer type
might cause missing text, illegible text, or text with the wrong font. To
determine the printer type, examine the entries in the <tt>terminfo</tt> database. For information on
the structure of the <tt>terminfo</tt> database, see <a href="printplan-29.html#printplan-15">Printer Type</a>.</p><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-129"></a><b>On the print server, display the printer's characteristics.</b><pre>$ <tt><b>lpstat -p luna -l</b></tt>
printer luna is idle. enabled since Thu Jul 12 15:02:32 ...
        Form mounted: 
        Content types: postscript
        Printer types: PS
        Description:
        Connection: direct
        Interface: /usr/lib/lp/model/standard
        After fault: continue
        Users allowed:
                (all)
        Forms allowed:
                (none)
        Banner not required
        Character sets:

        Default pitch:
        Default page size: 80 wide 66 long
        Default port settings:  
$</pre></li>
<li><a name="tsprint-step-130"></a><b>Consult the printer manufacturer's documentation to determine the printer model. </b></li>
<li><a name="tsprint-step-131"></a><b>If the printer type is not correct, change it with Solaris Print Manager's
Modify Printer Properties window, or use the following <tt>lpadmin</tt> command.</b><pre># <tt><b>lpstat -p</b></tt> <i>printer-name</i> <tt><b>-T</b></tt> <i>printer-type</i></pre><p>On the print client, the printer type should be <tt>unknown</tt>. On the print
server, the printer type must match a <tt>terminfo</tt> entry that is defined to
support the model of printer you have. If there is no <tt>terminfo</tt>
entry for the type of printer you have, see <a href="emjin.html#printcust-24894">How to Add a <tt>terminfo</tt> Entry for an Unsupported Printer</a>.</p></li></ol></li>
<li><a name="tsprint-step-132"></a><b><a name="tsprint-ix5549"></a>If the banner page prints, but there is no output for the body
of the document, check the file content types.   </b><p><a name="tsprint-ix5552"></a><a name="tsprint-ix5553"></a>File content types specified for a printer indicate the types of files the
printer can print directly without filtering. An incorrect file content type causes filtering
to be bypassed when it might be needed.  </p><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-133"></a><b>Note the information on file content type that was supplied in the previous
step by the <tt>lpstat</tt> command.</b><p>On the print client, the file content type should be <tt>any</tt>, unless you
have good reason to specify one or more explicit content types. If a
content is specified on the client, filtering is done on the print
client, rather than the print server. In addition, content types on the client
must match the content types specified on the print server, which in turn
must reflect the capabilities of the printer.</p></li>
<li><a name="tsprint-step-134"></a><b>Consult your printer manufacturer's documentation to determine which types of files the printer
can print directly.</b><p>The names you use to refer to these types of files do not
have to match the names used by the manufacturer. However, the names you
use must agree with the names used by the filters known to the
LP print service.</p></li>
<li><a name="tsprint-step-135"></a><b>If the file content type is not correct, change it with Solaris Print
Manager's Modify Printer Properties window, or the following <tt>lpadmin</tt> command.</b><pre># <tt><b>lpadmin -p</b></tt> <i>printer-name</i> <tt><b>-I</b></tt> <i>file-content-type(s)</i></pre><p>Run this command on either the print client, or print server, or
both, as needed. Try <tt>-I any</tt> on the print client, and <tt>-I ""</tt> on the print
server. The latter specifies a null file content type list, which means an
attempt should be made to filter all files, because the printer can directly
print only files that exactly match its printer type. </p><p>This combination is a good first choice when files are not printing. If
it works, you might want to try specifying explicit content types on
the print server to reduce unnecessary filtering. For a local PostScript printer, you should
use <tt>postscript</tt>, or <tt>postscript,simple</tt>, if the printer supports these types. Be aware that
<tt>PS</tt> and <tt>PSR</tt> are not file content types; they are printer types.</p><p>If you omit <tt>-I</tt>, the file content list defaults to <tt>simple</tt>. If
you use the <tt>-I</tt> option and want to specify file content types in
addition to <tt>simple</tt>, <tt>simple</tt> must be included in the list.</p><p>When specifying multiple file content types, separate the names with commas. Or you
can separate names with spaces and enclose the list in quotation marks. If
you specify <tt>any</tt> as the file content type, no filtering will be done
and only file types that can be printed directly by the printer should
be sent to it. </p></li></ol></li>
<li><a name="tsprint-step-136"></a><b>Check that the print request does not bypass filtering needed to download fonts.</b><p><a name="tsprint-ix5554"></a><a name="tsprint-ix5555"></a><a name="tsprint-ix5556"></a>If a user submits a print request to a PostScript printer with the
<tt>lp -T PS</tt> command, no filtering is done. Try submitting the request with the <tt>lp -T postscript</tt>
command to force filtering, which might result in the downloading of non-resident fonts needed
by the document.   </p></li>
<li><a name="tsprint-step-137"></a><b>Make sure that the <tt>stty</tt> settings for the printer port are correct.</b><ol style="list-style-type: lower-alpha">
				 
<li><a name="tsprint-step-138"></a><b>Read the printer documentation to determine the correct <tt>stty</tt> settings for the printer
port.</b>
<hr><p><b>Note - </b>If a printer is connected to a parallel or USB port, the
baud setting is irrelevant.</p>
<hr>
</li>
<li><a name="tsprint-step-139"></a><b>Examine the current settings by using the <tt>stty</tt> command.</b><pre># <tt><b>stty -a &lt; /dev/term/a</b></tt>
speed 9600 baud;
rows = 0; columns = 0; ypixels = 0; xpixels = 0;
eucw 1:0:0:0, scrw 1:0:0:0
intr = ^c; quit = ^|; erase = ^?; kill = ^u;
eof = ^d; eol = &lt;undef&gt;; eol2 = &lt;undef&gt;; swtch = &lt;undef&gt;;
start = ^q; stop = ^s; susp = ^z; dsusp = ^y;
rprnt = ^r; flush = ^o; werase = ^w; lnext = ^v;
parenb -parodd cs7 -cstopb -hupcl cread -clocal -loblk -parext
-ignbrk brkint -ignpar -parmrk -inpck istrip -inlcr -igncr icrnl -iuclc
ixon -ixany -ixoff imaxbel
isig icanon -xcase echo echoe echok -echonl -noflsh
-tostop echoctl -echoprt echoke -defecho -flusho -pendin iexten
opost -olcuc onlcr -ocrnl -onocr -onlret -ofill -ofdel tab3
#</pre><p>This command shows the current <tt>stty</tt> settings for the printer port.</p><p>The following table shows the default <tt>stty</tt> options used by the LP print
service's standard printer interface program.</p><table><col width="29%"><col width="70%"><tr><th align="left" valign="top" scope="column"><p>Option</p></th>
<th align="left" valign="top" scope="column"><p>Meaning</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-9600</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set baud rate to 9600</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-cs8</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set 8-bit bytes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-cstopb</tt></p></td>
<td align="left" valign="top" scope="row"><p>Send one
stop bit per byte</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-parity</tt></p></td>
<td align="left" valign="top" scope="row"><p>Do not generate parity</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-ixon</tt></p></td>
<td align="left" valign="top" scope="row"><p>Enable XON/XOFF (also known as START/STOP
or DC1/DC3)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-opost</tt></p></td>
<td align="left" valign="top" scope="row"><p>Do &ldquo;output post-processing&rdquo; using all the settings that follow in this table</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-olcuc</tt></p></td>
<td align="left" valign="top" scope="row"><p>Do
not map lowercase to uppercase</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-onlcr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Change line feed to carriage return/line feed</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-ocrnl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Do not
change carriage returns into line feeds</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-onocr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Output carriage returns even at column 0</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-n10</tt></p></td>
<td align="left" valign="top" scope="row"><p>No
delay after line feeds</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-cr0</tt></p></td>
<td align="left" valign="top" scope="row"><p>No delay after carriage returns</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-tab0</tt></p></td>
<td align="left" valign="top" scope="row"><p>No delay after tabs</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-bs0</tt></p></td>
<td align="left" valign="top" scope="row"><p>No delay
after backspaces</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-vt0</tt></p></td>
<td align="left" valign="top" scope="row"><p>No delay after vertical tabs</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-ff0</tt></p></td>
<td align="left" valign="top" scope="row"><p>No delay after form feeds</p></td>
</tr>
</table></li>
<li><a name="tsprint-step-140"></a><b>Change the <tt>stty</tt> settings.</b><pre># <tt><b>lpadmin -p</b></tt> <tt><b>printer-name</b></tt> <tt><b>-o "stty=</b></tt> <i>options</i><tt><b>"</b></tt> </pre><p><a name="tsprint-ix5557"></a><a name="tsprint-ix5558"></a><a name="tsprint-ix5560"></a>Use the following table to choose <tt>stty</tt> options to correct various problems affecting
print output.  </p><table><col width="24%"><col width="36%"><col width="39%"><tr><th align="left" valign="top" scope="column"><p><tt>stty</tt> Values</p></th>
<th align="left" valign="top" scope="column"><p>Result</p></th>
<th align="left" valign="top" scope="column"><p>Possible Problem  From Incorrect Setting</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>110</tt>, <tt>300</tt>, <tt>600</tt>,
<tt>1200</tt>, <tt>1800</tt>, <tt>2400</tt>, <tt>4800</tt>, <tt>9600</tt>, <tt>19200</tt>, <tt>38400</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets baud rate to the specified
value (enter only one baud rate)</p></td>
<td align="left" valign="top" scope="row"><p>Random characters and special characters might be
printed and spacing might be inconsistent</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>oddp</tt></p><p><tt>evenp</tt></p><p><tt>-parity</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets odd parity</p><p>Sets even parity</p><p>Sets no parity</p></td>
<td align="left" valign="top" scope="row"><p>Missing or
incorrect characters appear randomly</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-tabs</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets no tabs</p></td>
<td align="left" valign="top" scope="row"><p>Text is jammed against right margin</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>tabs</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets tabs
every eight spaces</p></td>
<td align="left" valign="top" scope="row"><p>Text has no left margin, is run together, or is
jammed together</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-onlcr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets no carriage return at the beginning of line(s)</p></td>
<td align="left" valign="top" scope="row"><p>Incorrect double spacing</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>onlcr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets
carriage return at beginning of line(s)</p></td>
<td align="left" valign="top" scope="row"><p>The print zigzags down the page</p></td>
</tr>
</table><p>You can change more than one option setting by enclosing the list of
options in single quotation marks and separating each option with spaces. For example,
suppose the printer requires you to enable odd parity and set a 7-bit
character size. You would type a command similar to that shown in the
following example:</p><pre># <tt><b>lpadmin -p neptune -o "stty='parenb parodd cs7'"</b></tt></pre><p>The <tt>stty</tt> option <tt>parenb</tt> enables parity checking/generation, <tt>parodd</tt> sets odd parity generation, and <tt>cs7</tt>
sets the character size to 7 bits.</p></li></ol></li>
<li><a name="tsprint-step-141"></a><b>Verify that the document prints correctly.</b><pre># <tt><b>lp -d</b></tt> <i>printer-name</i> <i>filename</i></pre></li></ol>

<a name="tsprint-78868"></a><h4>How to Unhang the LP Print Service</h4><a name="indexterm-289"></a><ol>
<li><a name="tsprint-step-143"></a><b>Log in as superuser, <tt>lp</tt>, or assume an equivalent role.</b></li>
<li><a name="tsprint-step-144"></a><b>Stop the LP print service.</b><pre># <tt><b>svcadm disable /application/print/server</b></tt></pre></li>
<li><a name="tsprint-step-149"></a><b>Restart the LP print service.</b><pre># <tt><b>svcadm enable /application/print/server</b></tt></pre><p>The LP print service should restart. If you are having trouble restarting the
scheduler, see <a href="gfjsi.html#printadmin-29920">How to Restart the Print Scheduler</a>.</p></li></ol>

<a name="tsprint-18877"></a><h4>Troubleshooting an Idle (Hung) Printer</h4>
<a name="tsprint-ix5566"></a><p>This task includes a number of procedures to use when a printer
appears idle but it should not be. It makes sense to try the
procedures in order, but the order is not mandatory.</p>

<a name="tsprint-150"></a><h4>How to Check That the Printer is Ready to Print</h4><ol>
<li><a name="tsprint-step-152"></a><b>Display printer status information.</b><pre># <tt><b>lpstat -p</b></tt> <i>printer-name</i> </pre><p>The information displayed shows you whether the printer is idle or active, enabled
or disabled, or available or not accepting print requests. If everything looks all
right, continue with other procedures in this section. If you cannot run the
<tt>lpstat</tt> command, see <a href="#tsprint-78868">How to Unhang the LP Print Service</a>.</p></li>
<li><a name="tsprint-step-153"></a><b>If the printer is not available (not accepting requests), allow the printer to
accept requests.</b><pre># <tt><b>accept</b></tt> <i>printer-name</i> </pre><p>The printer begins to accept requests into its print queue.</p></li>
<li><a name="tsprint-step-154"></a><b>If the printer is disabled, re-enable it.</b><pre># <tt><b>enable</b></tt> <i>printer-name</i> </pre><p>This command re-enables the printer so that it will act on the
requests in its queue.</p></li></ol>

<a name="tsprint-155"></a><h4>Checking for Print Filtering</h4>
<p>Check for print filtering by using the <tt>lpstat -o</tt> command. </p><pre>$ <tt><b>lpstat -o luna</b></tt>
luna-10           fred         1261   Mar 12 17:34 being filtered
luna-11           iggy         1261   Mar 12 17:36 on terra
luna-12           jack         1261   Mar 12 17:39 on terra
$</pre><p>See if the first waiting request is being filtered. If the output
looks like the above example, the file is being filtered; the printer is
not hung, it just is taking a while to process the request.</p>

<a name="tsprint-156"></a><h4>How to Resume Printing After a Printer Fault</h4><ol>
<li><a name="tsprint-step-158"></a><b>Look for a message about a printer fault and try to correct the
fault if there is one.</b><p>Depending on how printer fault alerts have been specified, messages might be sent
to root by email or written to a terminal on which root is
logged in.</p></li>
<li><a name="tsprint-step-159"></a><b>Re-enable the printer.</b><pre># <tt><b>enable</b></tt> <i>printer-name</i> </pre><p>If a request was blocked by a printer fault, this command will
force a retry. If this command does not work, continue with other procedures
in this section.</p></li></ol>

<a name="tsprint-160"></a><h4>How to Send Print Requests to a Remote Printer When Requests in the Local Queue Are Backed Up</h4><ol>
<li><a name="tsprint-step-162"></a><b>On the print client, stop further queuing of print requests to the print
server.</b><pre># <tt><b>reject</b></tt> <i>printer-name</i> </pre></li>
<li><a name="tsprint-step-163"></a><b>On the print client, send an &ldquo;are you there?&rdquo; request to the print
server. </b><pre><i>print-client</i># <tt><b>ping</b></tt> <i>print-server</i>
<i>print-server</i> is alive</pre><p>If you receive the message <i>print-server</i> <tt>not available</tt>, you might have a network
problem.</p></li>
<li><a name="tsprint-step-165"></a><b>After you fix the above problem, allow new print requests to be queued.</b><pre># <tt><b>accept</b></tt> <i>printer-name</i> </pre></li>
<li><a name="tsprint-step-166"></a><b>If necessary, re-enable the printer.</b><pre># <tt><b>enable</b></tt> <i>printer-name</i> </pre></li></ol>

<a name="tsprint-167"></a><h4>How to ReleasePrint Requests That Are Backed Up onthe Print Server</h4><ol>
<li><a name="tsprint-step-169"></a><b>On the print server, stop further queuing of print requests from any print
client to the print server.</b><pre># <tt><b>reject</b></tt> <i>printer-name</i> </pre></li>
<li><a name="tsprint-step-170"></a><b>Display the <tt>lpsched</tt> log file.</b><pre># <tt><b>more /var/lp/logs/lpsched</b></tt></pre><p>The information displayed might help you pinpoint what is preventing the print requests
from the print client to the print server from being printed.</p></li>
<li><a name="tsprint-step-171"></a><b>After you fix the problem, allow new print requests to be queued.</b><pre># <tt><b>accept</b></tt> <i>printer-name</i></pre></li>
<li><a name="tsprint-step-172"></a><b><a name="tsprint-ix5568"></a>If necessary, re-enable the printer on the print server. </b><pre># <tt><b>enable</b></tt> <i>printer-name</i></pre></li></ol>

<a name="tsprint-91367"></a><h4>How to Resolve Conflicting Printer Status Messages</h4><a name="indexterm-290"></a><ol>
<li><a name="tsprint-step-174"></a><b>On the print server, verify the printer is enabled and is accepting requests.</b><pre># <tt><b>lpstat -p</b></tt> <i>printer-name</i></pre><p>Users will see conflicting status messages when the print client is accepting requests,
but the print server is rejecting requests.</p></li>
<li><a name="tsprint-step-175"></a><b><a name="tsprint-ix5571"></a>On the print server, check that the definition of the printer on the
print client matches the definition of the printer on the print server. </b><pre># <tt><b>lpstat -p -l</b></tt> <i>printer-name</i></pre><p>Look at the definitions of the print job components, like print filters, character
sets, print wheels, and forms, to be sure they are the same
on both the client and server systems so that local users can access
printers on print server systems.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tsprint-78101.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fddwm.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

