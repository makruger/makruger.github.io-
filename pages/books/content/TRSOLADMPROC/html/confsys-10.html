<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring the Solaris Management Console for LDAP (Task Map) - Solaris Trusted Extensions Administrator's Procedures</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Trusted Extensions Administrator's Procedures</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-37.html">Previous</a>
             </td>
             <td align="right">
                 <a href="headl-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-4.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="trp-part-1.html">Part&nbsp;I&nbsp;Initial Configuration of Trusted Extensions</a></p>
<p class="toc level2"><a href="ovw-1.html">1.&nbsp;&nbsp;Security Planning for Trusted Extensions</a></p>
<p class="toc level2"><a href="tmap-1.html">2.&nbsp;&nbsp;Configuration Roadmap for Trusted Extensions</a></p>
<p class="toc level2"><a href="startinst-1.html">3.&nbsp;&nbsp;Adding Solaris Trusted Extensions Software to the Solaris OS (Tasks)</a></p>
<p class="toc level2"><a href="txconf-1.html">4.&nbsp;&nbsp;Configuring Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txldap-1.html">5.&nbsp;&nbsp;Configuring LDAP for Trusted Extensions (Tasks)</a></p>
<p class="toc level3"><a href="txldap-16.html">Configuring an LDAP Server on a Trusted Extensions Host (Task Map)</a></p>
<p class="toc level3"><a href="txldap-18.html">Configuring an LDAP Proxy Server on a Trusted Extensions Host (Task Map)</a></p>
<p class="toc level3"><a href="txconf-8.html">Configuring the Sun Java System Directory Server on a Trusted Extensions System</a></p>
<p class="toc level3"><a href="txconf-37.html">Creating a Trusted Extensions Proxy for an Existing Sun Java System Directory Server</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Configuring the Solaris Management Console for LDAP (Task Map)</a></p>
</div>
<p class="toc level2 tocsp"><a href="headl-1.html">6.&nbsp;&nbsp;Configuring a Headless System With Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="trp-part-2.html">Part&nbsp;II&nbsp;Administration of Trusted Extensions</a></p>
<p class="toc level2"><a href="txintro-1.html">7.&nbsp;&nbsp;Trusted Extensions Administration Concepts</a></p>
<p class="toc level2"><a href="txtool-1.html">8.&nbsp;&nbsp;Trusted Extensions Administration Tools</a></p>
<p class="toc level2"><a href="roles-1.html">9.&nbsp;&nbsp;Getting Started as a Trusted Extensions Administrator (Tasks)</a></p>
<p class="toc level2"><a href="secreq-1.html">10.&nbsp;&nbsp;Security Requirements on a Trusted Extensions System (Overview)</a></p>
<p class="toc level2"><a href="commontasks-1.html">11.&nbsp;&nbsp;Administering Security Requirements in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="useraccts-1.html">12.&nbsp;&nbsp;Users, Rights, and Roles in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="manageusers-1.html">13.&nbsp;&nbsp;Managing Users, Rights, and Roles in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="remotead-1.html">14.&nbsp;&nbsp;Remote Administration in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="manageldap-1.html">15.&nbsp;&nbsp;Trusted Extensions and LDAP (Overview)</a></p>
<p class="toc level2"><a href="managezones-1.html">16.&nbsp;&nbsp;Managing Zones in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="managefiles-1.html">17.&nbsp;&nbsp;Managing and Mounting Files in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txnet-1.html">18.&nbsp;&nbsp;Trusted Networking (Overview)</a></p>
<p class="toc level2"><a href="managetnet-1.html">19.&nbsp;&nbsp;Managing Networks in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="managemail-1.html">20.&nbsp;&nbsp;Multilevel Mail in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="manageprint-1.html">21.&nbsp;&nbsp;Managing Labeled Printing (Tasks)</a></p>
<p class="toc level2"><a href="gentextid-15538.html">22.&nbsp;&nbsp;Devices in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="managedev-1.html">23.&nbsp;&nbsp;Managing Devices for Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="audtask-1.html">24.&nbsp;&nbsp;Trusted Extensions Auditing (Overview)</a></p>
<p class="toc level2"><a href="softmgt-1.html">25.&nbsp;&nbsp;Software Management in Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appol-1.html">A.&nbsp;&nbsp;Site Security Policy</a></p>
<p class="toc level2"><a href="appol-12.html">Creating and Managing a Security Policy</a></p>
<p class="toc level2"><a href="appol-11.html">Site Security Policy and Trusted Extensions</a></p>
<p class="toc level2"><a href="appol-2.html">Computer Security Recommendations</a></p>
<p class="toc level2"><a href="appol-3.html">Physical Security Recommendations</a></p>
<p class="toc level2"><a href="appol-4.html">Personnel Security Recommendations</a></p>
<p class="toc level2"><a href="appol-5.html">Common Security Violations</a></p>
<p class="toc level2"><a href="appol-6.html">Additional Security References</a></p>
<p class="toc level1 tocsp"><a href="aptxconf-1.html">B.&nbsp;&nbsp;Using CDE Actions to Install Zones in Trusted Extensions</a></p>
<p class="toc level2"><a href="aptxconf-62.html">Associating Network Interfaces With Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level2"><a href="aptxconf-40.html">Preparing to Create Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level2"><a href="aptxconf-20.html">Creating Labeled Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="checklist-1.html">C.&nbsp;&nbsp;Configuration Checklist for Trusted Extensions</a></p>
<p class="toc level2"><a href="checklist-2.html">Checklist for Configuring Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="txapp-1.html">D.&nbsp;&nbsp;Quick Reference to Trusted Extensions Administration</a></p>
<p class="toc level2"><a href="txapp-2.html">Administrative Interfaces in Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-3.html">Solaris Interfaces Extended by Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-4.html">Tighter Security Defaults in Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-5.html">Limited Options in Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="txmp-1.html">E.&nbsp;&nbsp;List of Trusted Extensions Man Pages</a></p>
<p class="toc level2"><a href="txmp-2.html">Trusted Extensions Man Pages in Alphabetical Order</a></p>
<p class="toc level2"><a href="txmp-3.html">Solaris Man Pages That Are Modified by Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="confsys-10"></a><h3>Configuring the Solaris Management Console for LDAP (Task Map)</h3>
<a name="indexterm-297"></a><a name="indexterm-298"></a><a name="indexterm-299"></a><a name="indexterm-300"></a><a name="indexterm-301"></a><p>The Solaris Management Console is the GUI for administering the network of
systems that are running Trusted Extensions.</p><table><col width="21%"><col width="44%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Initialize the Solaris Management Console.</p></td>
<td align="left" valign="top" scope="row"><p>Initialize the Solaris
Management Console. This procedure is performed once per system in the global zone.</p></td>
<td align="left" valign="top" scope="row"><p><a href="txconf-60.html#confsys-21">Initialize the Solaris Management Console Server in Trusted Extensions</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Register
credentials.</p></td>
<td align="left" valign="top" scope="row"><p>Authenticate the Solaris Management Console with the LDAP server.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#txldap-11">Register LDAP Credentials With the Solaris Management Console</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Enable remote administration on
a system.</p></td>
<td align="left" valign="top" scope="row"><p>By default, a Solaris Management Console client cannot communicate with a
Console server on another system. You must explicitly enable remote administration.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#txldap-19">Enable the Solaris Management Console to Accept Network Communications</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create the LDAP
toolbox.</p></td>
<td align="left" valign="top" scope="row"><p>Create the LDAP toolbox in the Solaris Management Console for Trusted Extensions.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#txldap-7">Edit the LDAP Toolbox in the Solaris Management Console</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Verify
communications.</p></td>
<td align="left" valign="top" scope="row"><p>Verify that Trusted Extensions hosts can become LDAP clients.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#txldap-9">Verify That the Solaris Management Console Contains Trusted Extensions Information</a></p></td>
</tr>
</table>

<a name="txldap-11"></a><h4>Register LDAP Credentials With the Solaris Management Console</h4><a name="indexterm-302"></a><a name="indexterm-303"></a><a name="indexterm-304"></a><a name="indexterm-305"></a><a name="indexterm-306"></a><h6>Before You Begin</h6><p>You must be the <tt>root</tt> user on an LDAP server that is running
Trusted Extensions. The server can be a proxy server.</p><p>Your Sun Java System Directory Server must be configured. You have completed
one of the following configurations:</p>
<ul><li><p><a href="txldap-16.html">Configuring an LDAP Server on a Trusted Extensions Host (Task Map)</a></p></li>
<li><p><a href="txldap-18.html">Configuring an LDAP Proxy Server on a Trusted Extensions Host (Task Map)</a></p></li></ul>
<ol>
<li><b>Register the LDAP administrative credentials.</b><pre><i>LDAP-Server</i> # <tt><b>/usr/sadm/bin/dtsetup storeCred</b></tt>
Administrator DN:Type the value for cn on your system
Password:Type the Directory Manager password
Password (confirm):Retype the password</pre></li>
<li><b>List the scopes on the Directory Server.</b><pre><i>LDAP-Server</i> # <tt><b>/usr/sadm/bin/dtsetup scopes</b></tt>
Getting list of manageable scopes...
Scope 1 file:Displays name of file scope
Scope 2 ldap:Displays name of ldap scope</pre><p>Your LDAP server setup determines the scopes that are listed. The LDAP scope
is not listed until the LDAP toolbox is edited. The toolbox cannot
be edited until after the server is registered.</p></li></ol><a name="txldap-ex-cred-1"></a><h6>Example&nbsp;5-1 Registering LDAP Credentials</h6><p>In this example, the name of the LDAP server is <tt>LDAP1</tt> and the
value for <tt>cn</tt> is the default, <tt>Directory Manager</tt>.</p><pre># <tt><b>/usr/sadm/bin/dtsetup storeCred</b></tt>
Administrator DN:<tt><b>cn=Directory Manager</b></tt>
Password:<tt><b>abcde1;!</b></tt>
Password (confirm):<tt><b>abcde1;!</b></tt>
# <tt><b>/usr/sadm/bin/dtsetup scopes</b></tt>
Getting list of manageable scopes...
Scope 1 file:/LDAP1/LDAP1
Scope 2 ldap:/LDAP1/cd=LDAP1,dc=example,dc=com</pre>

<a name="txldap-19"></a><h4>Enable the Solaris Management Console to Accept Network Communications</h4><a name="indexterm-307"></a><a name="indexterm-308"></a><a name="indexterm-309"></a><a name="indexterm-310"></a><p>By default, Solaris systems are not configured to listen on ports that present
security risks. Therefore, you must explicitly configure any system that you plan to
administer remotely to accept network communications. For example, to administer network databases on
the LDAP server from a client, the Solaris Management Console server on the
LDAP server must accept network communications.</p><p>For an illustration of the Solaris Management Console configuration requirements for a
network with an LDAP server, see <a href="txtool-8.html#txtool-16">Client-Server Communication With the Solaris Management Console</a>.</p><h6>Before You Begin</h6><p>You must be superuser in the global zone on the Solaris Management
Console server system. In this procedure, that system is called the remote system.
Also, you must have command line access to the client system as superuser.</p><ol>
<li><b>On the remote system, enable the system to accept remote connections.</b><p>The <tt>smc</tt> daemon is controlled by the <tt>wbem</tt> service. If the <tt>options/tcp_listen</tt>
property to the <tt>wbem</tt> service is set to <tt>true</tt>, the Solaris Management Console server
accepts remote connections.</p><pre># <tt><b>/usr/sbin/svcprop -p options wbem</b></tt>
options/tcp_listen boolean false
# <tt><b>svccfg -s wbem setprop options/tcp_listen=true</b></tt></pre></li>
<li><b>Refresh and restart the <tt>wbem</tt> service.</b><pre># <tt><b>svcadm refresh wbem</b></tt>
# <tt><b>svcadm restart wbem</b></tt></pre></li>
<li><b>Verify that the <tt>wbem</tt> service is set to accept remote connections.</b><pre># <tt><b>svcprop -p options wbem</b></tt>
options/tcp_listen boolean true</pre></li>
<li><b>On the remote system and on any client that needs to access
the Solaris Management Console, ensure that remote connections are enabled in the <tt>smcserver.config</tt>
file.</b><ol style="list-style-type: lower-alpha">
<li><b>Open the <tt>smcserver.config</tt> file in the trusted editor.</b><pre># <tt><b>/usr/dt/bin/trusted_edit /etc/smc/smcserver.config</b></tt></pre></li>
<li><b>Set the <tt>remote.connections</tt> parameter to <tt>true</tt>.</b><pre>## remote.connections=false
<tt><b>remote.connections=true</b></tt></pre></li>
<li><b>Save the file and exit the trusted editor.</b></li></ol></li></ol><h6>Troubleshooting</h6><p>If you restart or enable the <tt>wbem</tt> service, you must ensure that the
<tt>remote.connections</tt> parameter in the <tt>smcserver.config</tt> file remains set to <tt>true</tt>.</p>

<a name="txldap-7"></a><h4>Edit the LDAP Toolbox in the Solaris Management Console</h4><a name="indexterm-311"></a><a name="indexterm-312"></a><a name="indexterm-313"></a><a name="indexterm-314"></a><a name="indexterm-315"></a><h6>Before You Begin</h6><p>You must be superuser on the LDAP server. The LDAP credentials must be
registered with the Solaris Management Console, and you must know the output
of the <tt>/usr/sadm/bin/dtsetup scopes</tt> command. For details, see <a href="#txldap-11">Register LDAP Credentials With the Solaris Management Console</a>.</p><ol>
<li><b>Find the LDAP toolbox.</b><pre># <tt><b>cd /var/sadm/smc/toolboxes/tsol_ldap</b></tt>
# <tt><b>ls *tbx</b></tt>
tsol_ldap.tbx</pre></li>
<li><b>Provide the LDAP server name.</b><ol style="list-style-type: lower-alpha">
<li><b>Open the trusted editor.</b></li>
<li><b>Copy and paste the full pathname of the <tt>tsol_ldap.tbx</tt> toolbox as the argument
to the editor.</b><p>For example, the following path is the default location of the LDAP toolbox:</p><pre>/var/sadm/smc/toolboxes/tsol_ldap/tsol_ldap.tbx</pre></li>
<li><b>Replace the scope information.</b><p>Replace the <tt>server</tt> tags between the <tt>&lt;Scope&gt;</tt> and <tt>&lt;/Scope&gt;</tt> tags with the
output of the <tt>ldap:/......</tt> line from the <tt>/usr/sadm/bin/dtsetup scopes</tt> command.</p><pre>&lt;Scope&gt;ldap:/&lt;<i>ldap-server-name</i>&gt;/&lt;dc=<i>domain</i>,dc=<i>suffix</i>&gt;&lt;/Scope&gt;</pre></li>
<li><b>Replace every instance of <tt>&lt;?server?&gt;</tt> or <tt>&lt;?server ?&gt;</tt> with the LDAP server.</b><pre>&lt;Name&gt;This Computer (<i>ldap-server-name</i>: Scope=ldap, Policy=TSOL)&lt;/Name&gt;
services and configuration of <i>ldap-server-name</i>.&lt;/Description&gt;
and configuring <i>ldap-server-name</i>.&lt;/Description&gt;
...</pre></li>
<li><b>Save the file, and exit the editor.</b></li></ol></li>
<li><b>Refresh and restart the <tt>wbem</tt> service.</b><pre># <tt><b>svcadm refresh wbem</b></tt>
# <tt><b>svcadm restart wbem</b></tt></pre></li></ol><a name="txldap-17"></a><h6>Example&nbsp;5-2 Configuring the LDAP Toolbox</h6><p>In this example, the name of the LDAP server is <tt>LDAP1</tt>. To configure
the toolbox, the administrator replaces the instances of <tt>&lt;?server ?&gt;</tt> with <tt>LDAP1</tt>.</p><pre># <tt><b>cd /var/sadm/smc/toolboxes/tsol_ldap</b></tt>
# <tt><b>/usr/dt/bin/trusted_edit /tsol_ldap.tbx</b></tt>
&lt;Scope&gt;ldap:<tt><b>/LDAP1/cd=LDAP1,dc=example,dc=com</b></tt>&lt;/Scope

...
&lt;Name&gt;This Computer (<tt><b>LDAP1</b></tt>: Scope=ldap, Policy=TSOL)&lt;/Name&gt;
services and configuration of <tt><b>LDAP1</b></tt>.&lt;/Description&gt;
and configuring <tt><b>LDAP1</b></tt>.&lt;/Description&gt;
...</pre>

<a name="txldap-9"></a><h4>Verify That the Solaris Management Console Contains Trusted Extensions Information</h4><p>For an illustration of the Solaris Management Console configuration requirements for a
network with an LDAP server and for a network without an LDAP server,
see <a href="txtool-8.html#txtool-16">Client-Server Communication With the Solaris Management Console</a>.</p><h6>Before You Begin</h6><p>You must be logged in to an LDAP client in an administrative
role, or as superuser. To make a system an LDAP client, see <a href="txconf-60.html#txldap-8">Make the Global Zone an LDAP Client in Trusted Extensions</a>.</p><p>To administer the local system, you must have completed <a href="txconf-60.html#confsys-21">Initialize the Solaris Management Console Server in Trusted Extensions</a>.</p><p>To connect to a Console server on a remote system from the
local system, you must have completed <a href="txconf-60.html#confsys-21">Initialize the Solaris Management Console Server in Trusted Extensions</a> on both systems. Also, on the remote
system, you must have completed <a href="#txldap-19">Enable the Solaris Management Console to Accept Network Communications</a>.</p><p>To administer the databases in the LDAP naming service from the LDAP client,
on the LDAP server you must have completed <a href="#txldap-7">Edit the LDAP Toolbox in the Solaris Management Console</a>, in addition to the
preceding procedures.</p><ol>
<li><b>Start the Solaris Management Console.</b><pre># <tt><b>/usr/sbin/smc &amp;</b></tt></pre></li>
<li><b>Open a Trusted Extensions toolbox.</b><p>A Trusted Extensions toolbox has the value <tt>Policy=TSOL</tt>.</p><ul>
<li><b>On a trusted network that uses LDAP as a naming service, perform the
following tests:</b><ol style="list-style-type: lower-alpha">
<li><b>To check that local administrative databases can be accessed, open the following toolbox:</b><pre>This Computer (<i>this-host</i>: <tt>Scope=Files, Policy=TSOL</tt>)</pre></li>
<li><b>To check that the LDAP server's local administrative databases can be accessed, specify
the following toolbox:</b><pre>This Computer (<i>ldap-server</i>: <tt>Scope=Files, Policy=TSOL</tt>)</pre></li>
<li><b>To check that the naming service databases on the LDAP server can be
accessed, specify the following toolbox:</b><pre>This Computer (<i>ldap-server</i>: <tt>Scope=LDAP, Policy=TSOL</tt>)</pre></li></ol></li>
<li><b>On a trusted network that does not use LDAP as a naming
service, perform the following tests:</b><ol style="list-style-type: lower-alpha">
<li><b>To check that local administrative databases can be accessed, open the following toolbox:</b><pre>This Computer (<i>this-host</i>: <tt>Scope=Files, Policy=TSOL</tt>)</pre></li>
<li><b>To check that a remote system's local administrative databases can be accessed, specify
the following toolbox:</b><pre>This Computer (<i>remote-system</i>: <tt>Scope=Files, Policy=TSOL</tt>)</pre></li></ol></li></ul></li>
<li><b>Under System Configuration, navigate to Computers and Networks, then Security Templates.</b></li>
<li><b>Check that the correct templates and labels have been applied to the remote
systems.</b>
<hr><p><b>Note - </b>When you try to access network database information from a system that is
not the LDAP server, the operation fails. The Console allows you to log
in to the remote host and open the toolbox. However, when you try
to access or change information, the following error message indicates that you have
selected <tt>Scope=LDAP</tt> on a system that is not the LDAP server:</p><pre>Management server cannot perform the operation requested.
...
Error extracting the <i>value-from-tool</i>.
The keys received from the client were <i>machine</i>, <i>domain</i>, Scope.
Problem with Scope.</pre>
<hr>
</li></ol><h6>Troubleshooting</h6><p>To troubleshoot LDAP configuration, see <a href="http://docs.sun.com/doc/819-3194/setupproblems-1?a=view">Chapter 13, LDAP Troubleshooting (Reference), in <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txconf-37.html">Previous</a>
             </td>
             <td align="right">
                 <a href="headl-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

