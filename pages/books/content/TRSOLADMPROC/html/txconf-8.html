<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring the Sun Java System Directory Server on a Trusted Extensions System - Solaris Trusted Extensions Administrator's Procedures</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Trusted Extensions Administrator's Procedures</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txldap-18.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txconf-37.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-4.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="trp-part-1.html">Part&nbsp;I&nbsp;Initial Configuration of Trusted Extensions</a></p>
<p class="toc level2"><a href="ovw-1.html">1.&nbsp;&nbsp;Security Planning for Trusted Extensions</a></p>
<p class="toc level2"><a href="tmap-1.html">2.&nbsp;&nbsp;Configuration Roadmap for Trusted Extensions</a></p>
<p class="toc level2"><a href="startinst-1.html">3.&nbsp;&nbsp;Adding Solaris Trusted Extensions Software to the Solaris OS (Tasks)</a></p>
<p class="toc level2"><a href="txconf-1.html">4.&nbsp;&nbsp;Configuring Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txldap-1.html">5.&nbsp;&nbsp;Configuring LDAP for Trusted Extensions (Tasks)</a></p>
<p class="toc level3"><a href="txldap-16.html">Configuring an LDAP Server on a Trusted Extensions Host (Task Map)</a></p>
<p class="toc level3"><a href="txldap-18.html">Configuring an LDAP Proxy Server on a Trusted Extensions Host (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Configuring the Sun Java System Directory Server on a Trusted Extensions System</a></p>
</div>
<p class="toc level3"><a href="txconf-37.html">Creating a Trusted Extensions Proxy for an Existing Sun Java System Directory Server</a></p>
<p class="toc level3"><a href="confsys-10.html">Configuring the Solaris Management Console for LDAP (Task Map)</a></p>
<p class="toc level2 tocsp"><a href="headl-1.html">6.&nbsp;&nbsp;Configuring a Headless System With Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="trp-part-2.html">Part&nbsp;II&nbsp;Administration of Trusted Extensions</a></p>
<p class="toc level2"><a href="txintro-1.html">7.&nbsp;&nbsp;Trusted Extensions Administration Concepts</a></p>
<p class="toc level2"><a href="txtool-1.html">8.&nbsp;&nbsp;Trusted Extensions Administration Tools</a></p>
<p class="toc level2"><a href="roles-1.html">9.&nbsp;&nbsp;Getting Started as a Trusted Extensions Administrator (Tasks)</a></p>
<p class="toc level2"><a href="secreq-1.html">10.&nbsp;&nbsp;Security Requirements on a Trusted Extensions System (Overview)</a></p>
<p class="toc level2"><a href="commontasks-1.html">11.&nbsp;&nbsp;Administering Security Requirements in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="useraccts-1.html">12.&nbsp;&nbsp;Users, Rights, and Roles in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="manageusers-1.html">13.&nbsp;&nbsp;Managing Users, Rights, and Roles in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="remotead-1.html">14.&nbsp;&nbsp;Remote Administration in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="manageldap-1.html">15.&nbsp;&nbsp;Trusted Extensions and LDAP (Overview)</a></p>
<p class="toc level2"><a href="managezones-1.html">16.&nbsp;&nbsp;Managing Zones in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="managefiles-1.html">17.&nbsp;&nbsp;Managing and Mounting Files in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txnet-1.html">18.&nbsp;&nbsp;Trusted Networking (Overview)</a></p>
<p class="toc level2"><a href="managetnet-1.html">19.&nbsp;&nbsp;Managing Networks in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="managemail-1.html">20.&nbsp;&nbsp;Multilevel Mail in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="manageprint-1.html">21.&nbsp;&nbsp;Managing Labeled Printing (Tasks)</a></p>
<p class="toc level2"><a href="gentextid-15538.html">22.&nbsp;&nbsp;Devices in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="managedev-1.html">23.&nbsp;&nbsp;Managing Devices for Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="audtask-1.html">24.&nbsp;&nbsp;Trusted Extensions Auditing (Overview)</a></p>
<p class="toc level2"><a href="softmgt-1.html">25.&nbsp;&nbsp;Software Management in Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appol-1.html">A.&nbsp;&nbsp;Site Security Policy</a></p>
<p class="toc level2"><a href="appol-12.html">Creating and Managing a Security Policy</a></p>
<p class="toc level2"><a href="appol-11.html">Site Security Policy and Trusted Extensions</a></p>
<p class="toc level2"><a href="appol-2.html">Computer Security Recommendations</a></p>
<p class="toc level2"><a href="appol-3.html">Physical Security Recommendations</a></p>
<p class="toc level2"><a href="appol-4.html">Personnel Security Recommendations</a></p>
<p class="toc level2"><a href="appol-5.html">Common Security Violations</a></p>
<p class="toc level2"><a href="appol-6.html">Additional Security References</a></p>
<p class="toc level1 tocsp"><a href="aptxconf-1.html">B.&nbsp;&nbsp;Using CDE Actions to Install Zones in Trusted Extensions</a></p>
<p class="toc level2"><a href="aptxconf-62.html">Associating Network Interfaces With Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level2"><a href="aptxconf-40.html">Preparing to Create Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level2"><a href="aptxconf-20.html">Creating Labeled Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="checklist-1.html">C.&nbsp;&nbsp;Configuration Checklist for Trusted Extensions</a></p>
<p class="toc level2"><a href="checklist-2.html">Checklist for Configuring Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="txapp-1.html">D.&nbsp;&nbsp;Quick Reference to Trusted Extensions Administration</a></p>
<p class="toc level2"><a href="txapp-2.html">Administrative Interfaces in Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-3.html">Solaris Interfaces Extended by Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-4.html">Tighter Security Defaults in Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-5.html">Limited Options in Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="txmp-1.html">E.&nbsp;&nbsp;List of Trusted Extensions Man Pages</a></p>
<p class="toc level2"><a href="txmp-2.html">Trusted Extensions Man Pages in Alphabetical Order</a></p>
<p class="toc level2"><a href="txmp-3.html">Solaris Man Pages That Are Modified by Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="txconf-8"></a><h3>Configuring the Sun Java System Directory Server on a Trusted Extensions System</h3>
<a name="indexterm-269"></a><a name="indexterm-270"></a><a name="indexterm-271"></a><a name="indexterm-272"></a><a name="indexterm-273"></a><a name="indexterm-274"></a><p>The LDAP naming service is the supported naming service for Trusted Extensions. If
your site is not yet running the LDAP naming service, configure a
Sun Java System Directory Server (Directory Server) on a system that is configured
with Trusted Extensions. If your site is already running a Directory Server, then
you need to add the Trusted Extensions databases to the server. To access
the Directory Server, you then set up an LDAP proxy on a Trusted
Extensions system.</p>
<hr><p><b>Note - </b>If you do not use this LDAP server as an NFS server
or as a server for Sun Ray<sup>TM</sup> clients, then you do not need
to install any labeled zones on this server.</p>
<hr>


<a name="txldap-3"></a><h4>Collect Information for the Directory Server for LDAP</h4><a name="indexterm-275"></a><a name="indexterm-276"></a><ul>
<li><b>Determine the values for the following items.</b><p>The items are listed in the order of their appearance in the Sun
Java Enterprise System Install Wizard.</p><table><col width="31%"><col width="68%"><tr><th align="left" valign="top" scope="column"><p>Install Wizard Prompt</p></th>
<th align="left" valign="top" scope="column"><p>Action or Information</p></th>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Sun Java System Directory Server
<i>version</i></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Administrator User ID</p></td>
<td align="left" valign="top" scope="row"><p>The default value is <tt>admin</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Administrator Password</p></td>
<td align="left" valign="top" scope="row"><p>Create a password, such as
<tt>admin123</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Directory Manager DN</p></td>
<td align="left" valign="top" scope="row"><p>The default value is <tt>cn=Directory Manager</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Directory Manager Password</p></td>
<td align="left" valign="top" scope="row"><p>Create a password, such
as <tt>dirmgr89</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Directory Server Root</p></td>
<td align="left" valign="top" scope="row"><p>The default value is <tt>/var/Sun/mps</tt>. This path is also used
later if the proxy software is installed.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Server Identifier</p></td>
<td align="left" valign="top" scope="row"><p>The default value is the
local system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Server Port</p></td>
<td align="left" valign="top" scope="row"><p>If you plan to use the Directory Server to provide
standard LDAP naming services to client systems, use the default value, <tt>389</tt>.</p><p>If you
plan to use the Directory Server to support a subsequent installation of a
proxy server, enter a nonstandard port, such as <tt>10389</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Suffix</p></td>
<td align="left" valign="top" scope="row"><p>Include your domain component,
as in <tt>dc=example-domain,dc=com</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Administration Domain</p></td>
<td align="left" valign="top" scope="row"><p>Construct to correspond to the Suffix, as in, <tt>example-domain.com</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>System
User</p></td>
<td align="left" valign="top" scope="row"><p>The default value is <tt>root</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>System Group</p></td>
<td align="left" valign="top" scope="row"><p>The default value is <tt>root</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Data Storage Location</p></td>
<td align="left" valign="top" scope="row"><p>The
default value is <tt>Store configuration data on this server</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Data Storage Location</p></td>
<td align="left" valign="top" scope="row"><p>The default value is <tt>Store user data and group data on this server</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Administration Port</p></td>
<td align="left" valign="top" scope="row"><p>The default
value is the Server Port. A suggested convention for changing the default is
<tt>software-version TIMES 1000</tt>. For software version 5.2, this convention would result in port <tt>5200</tt>.</p></td>
</tr>
</table></li></ul>

<a name="txldap-4"></a><h4>Install the Sun Java System Directory Server</h4><a name="indexterm-277"></a><a name="indexterm-278"></a><p>The Directory Server packages are available from the <a href="http://www.sun.com/software/solaris">Sun Software Gateway web site</a>. </p><ol>
<li><b>Find the Sun Java System Directory Server packages on the Sun web
site.</b><ol style="list-style-type: lower-alpha">
<li><b>On the <a href="http://www.sun.com/software/solaris">Sun Software Gateway</a> page, click the Get It tab.</b></li>
<li><b>Click the checkbox for the Sun Java Identity Management Suite.</b></li>
<li><b>Click the Submit button.</b></li>
<li><b>If you are not registered, register.</b></li>
<li><b>Log in to download the software.</b></li>
<li><b>Click the Download Center at the upper left of the screen.</b></li>
<li><b>Under Identity Management, download the most recent software that is appropriate for your
platform.</b></li></ol></li>
<li><b>In the <tt>/etc/hosts</tt> file, add the FQDN to your system's hostname entry.</b><p>The FQDN is the Fully Qualified Domain Name. This name is a combination
of the host name and the administration domain, as in:</p><pre>192.168.5.5 myhost myhost.example-domain.com</pre></li>
<li><b>Install the Directory Server packages.</b><p>Answer the questions by using the information from <a href="#txldap-3">Collect Information for the Directory Server for LDAP</a>.</p></li>
<li><b>Ensure that the Directory Server starts at every boot.</b><p><a name="indexterm-279"></a><a name="indexterm-280"></a><a name="indexterm-281"></a>Templates for the SMF services for the Directory Server are in the Sun
Java System Directory Server packages. </p><ul>
<li><b>For a Trusted Extensions Directory Server, enable the service.</b><pre># dsadm stop /export/home/ds/instances/<i>your-instance</i>
# dsadm enable-service -T SMF /export/home/ds/instances/<i>your-instance</i>
# dsadm start /export/home/ds/instances/<i>your-instance</i></pre><p>For information about the <tt>dsadm</tt> command, see the <tt>dsadm</tt>(1M) man page.</p></li>
<li><b><a name="indexterm-282"></a><a name="indexterm-283"></a><a name="indexterm-284"></a>For a proxy Directory Server, enable the service.</b><pre># dpadm stop /export/home/ds/instances/<i>your-instance</i>
# dpadm enable-service -T SMF /export/home/ds/instances/<i>your-instance</i>
# dpadm start /export/home/ds/instances/<i>your-instance</i></pre><p>For information about the <tt>dpadm</tt> command, see the <tt>dpadm</tt>(1M) man page.</p></li></ul></li>
<li><b>Verify your installation.</b><pre># dsadm info /export/home/ds/instances/<i>your-instance</i>
Instance Path:         /export/home/ds/instances/<i>your-instance</i>
Owner:                 root(root)
Non-secure port:       389
Secure port:           636
Bit format:            32-bit
State:                 Running
Server PID:            298
DSCC url:              -
SMF application name:  ds--export-home-ds-instances-<i>your-instance</i>
Instance version:      D-A00</pre></li></ol><h6>Troubleshooting</h6><p>For strategies to solve LDAP configuration problems, see <a href="http://docs.sun.com/doc/819-3194/setupproblems-1?a=view">Chapter 13, LDAP Troubleshooting (Reference), in <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>.</p>

<a name="txldap-12"></a><h4>Configure the Logs for the Sun Java System Directory Server</h4><a name="indexterm-285"></a><a name="indexterm-286"></a><p>This procedure configures three types of logs: access logs, audit logs, and error
logs. The following default settings are not changed:</p>
<ul><li><p>All logs are enabled and buffered.</p></li>
<li><p>Logs are placed in the appropriate <tt>/export/home/ds/instances/</tt><i>your-instance</i><tt>/logs/</tt><i>LOG_TYPE</i><tt></tt> directory.</p></li>
<li><p>Events are logged at log level 256.</p></li>
<li><p>Logs are protected with <tt>600</tt> file permissions.</p></li>
<li><p>Access logs are rotated daily.</p></li>
<li><p>Error logs are rotated weekly.</p></li></ul>
<p>The settings in this procedure meet the following requirements:</p>
<ul><li><p>Audit logs are rotated daily.</p></li>
<li><p>Log files that are older than 3 months expire.</p></li>
<li><p>All log files use a maximum of 20,000 MBytes of disk space.</p></li>
<li><p>A maximum of 100 log files is kept, and each file is at most 500 MBytes.</p></li>
<li><p>The oldest logs are deleted if less than 500 MBytes free disk space is available.</p></li>
<li><p>Additional information is collected in the error logs.</p></li></ul>
<ol>
<li><b>Configure the access logs.</b><p>The <i>LOG_TYPE</i> for access is <tt>ACCESS</tt>. The syntax for configuring logs is the following:</p><pre>dsconf set-log-prop <i>LOG_TYPE</i> <i>property</i>:<i>value</i></pre><pre># <tt><b>dsconf set-log-prop ACCESS max-age:3M</b></tt>
# <tt><b>dsconf set-log-prop ACCESS max-disk-space-size:20000M</b></tt>
# <tt><b>dsconf set-log-prop ACCESS max-file-count:100</b></tt>
# <tt><b>dsconf set-log-prop ACCESS max-size:500M</b></tt>
# <tt><b>dsconf set-log-prop ACCESS min-free-disk-space:500M</b></tt></pre></li>
<li><b>Configure the audit logs.</b><pre># <tt><b>dsconf set-log-prop AUDIT max-age:3M</b></tt>
# <tt><b>dsconf set-log-prop AUDIT max-disk-space-size:20000M</b></tt>
# <tt><b>dsconf set-log-prop AUDIT max-file-count:100</b></tt>
# <tt><b>dsconf set-log-prop AUDIT max-size:500M</b></tt>
# <tt><b>dsconf set-log-prop AUDIT min-free-disk-space:500M</b></tt>
# <tt><b>dsconf set-log-prop AUDIT rotation-interval:1d</b></tt></pre><p>By default, the rotation interval for audit logs is one week.</p></li>
<li><b>Configure the error logs.</b><p>In this configuration, you specify additional data to be collected in the error
log.</p><pre># <tt><b>dsconf set-log-prop ERROR max-age:3M</b></tt>
# <tt><b>dsconf set-log-prop ERROR max-disk-space-size:20000M</b></tt>
# <tt><b>dsconf set-log-prop ERROR max-file-count:30</b></tt>
# <tt><b>dsconf set-log-prop ERROR max-size:500M</b></tt>
# <tt><b>dsconf set-log-prop ERROR min-free-disk-space:500M</b></tt>
# <tt><b>dsconf set-log-prop ERROR verbose-enabled:on</b></tt></pre></li>
<li>(Optional) <b>Further configure the logs.</b><p>You can also configure the following settings for each log:</p><pre># dsconf set-log-prop <i>LOG_TYPE</i> rotation-min-file-size:<i>undefined</i>
# dsconf set-log-prop <i>LOG_TYPE</i> rotation-time:<i>undefined</i></pre><p>For information about the <tt>dsconf</tt> command, see the <tt>dsconf</tt>(1M) man page.</p></li></ol>

<a name="txldap-10"></a><h4>Configure a Multilevel Port for the Sun Java System Directory Server</h4><a name="indexterm-287"></a><p>To work in Trusted Extensions, the server port of the Directory Server
must be configured as a multilevel port (MLP) in the global zone.</p><ol>
<li><b>Start the Solaris Management Console.</b><pre># <tt><b>/usr/sbin/smc &amp;</b></tt></pre></li>
<li><b>Select the This Computer (<i>this-host</i>: <tt>Scope=Files, Policy=TSOL</tt>) toolbox.</b></li>
<li><b>Click System Configuration, then click Computers and Networks.</b><p>You are prompted for your password.</p></li>
<li><b>Type the appropriate password.</b></li>
<li><b>Double-click Trusted Network Zones.</b></li>
<li><b>Double-click the global zone.</b></li>
<li><b>Add a multilevel port for the TCP protocol:</b><ol style="list-style-type: lower-alpha">
<li><b>Click Add for the Multilevel Ports for Zone's IP Addresses.</b></li>
<li><b>Type 389 for the port number, and click OK.</b></li></ol></li>
<li><b>Add a multilevel port for the UDP protocol:</b><ol style="list-style-type: lower-alpha">
<li><b>Click Add for the Multilevel Ports for Zone's IP Addresses.</b></li>
<li><b>Type 389 for the port number.</b></li>
<li><b>Choose the udp protocol, and click OK.</b></li></ol></li>
<li><b>Click OK to save the settings.</b></li>
<li><b>Update the kernel.</b><pre># <tt><b>tnctl -fz /etc/security/tsol/tnzonecfg</b></tt></pre></li></ol>

<a name="txldap-2"></a><h4>Populate the Sun Java System Directory Server</h4><a name="indexterm-288"></a><a name="indexterm-289"></a><p>Several LDAP databases have been created or modified to hold Trusted Extensions
data about label configuration, users, and remote systems. In this procedure, you populate the
Directory Server databases with Trusted Extensions information.</p><h6>Before You Begin</h6><p><a name="indexterm-290"></a><a name="indexterm-291"></a>If site security requires <a href="glossary-1.html#glossary-148">separation of duty</a>, complete the following before populating the Directory server:</p>
<ul><li><p><a href="txconf-14.html#txconf-95">Create Rights Profiles That Enforce Separation of Duty</a></p></li>
<li><p><a href="txconf-14.html#txconf-23">Create the Security Administrator Role in Trusted Extensions</a></p></li>
<li><p><a href="txconf-14.html#txconf-97">Create a Restricted System Administrator Role</a></p></li></ul>
<ol>
<li><b><a name="indexterm-292"></a>Create a staging area for files that you plan to use to populate
the naming service databases.</b><pre># <tt><b>mkdir -p /setup/files</b></tt></pre></li>
<li><b>Copy the sample <tt>/etc</tt> files into the staging area.</b><pre># <tt><b>cd /etc</b></tt>
# <tt><b>cp aliases group networks netmasks protocols /setup/files</b></tt>
# <tt><b>cp rpc services auto_master /setup/files</b></tt>

# <tt><b>cd /etc/security</b></tt>
# <tt><b>cp auth_attr prof_attr exec_attr /setup/files/</b></tt>
#
# <tt><b>cd /etc/security/tsol</b></tt>
# <tt><b>cp tnrhdb tnrhtp /setup/files</b></tt></pre><pre># <tt><b>cd /etc/inet</b></tt>
# <tt><b>cp ipnodes /setup/files</b></tt></pre></li>
<li><b>Remove the <tt>+auto_master</tt> entry from the <tt>/setup/files/auto_master</tt> file.</b></li>
<li><b>Remove the <tt>?:::::?</tt> entry from the <tt>/setup/files/auth_attr</tt> file.</b></li>
<li><b>Remove the <tt>::::</tt> entry from the <tt>/setup/files/prof_attr</tt> file.</b></li>
<li><b>Create the zone automaps in the staging area.</b><p>In the following list of automaps, the first of each pair of
lines shows the name of the file. The second line of each pair
shows the file contents. The zone names identify labels from the default <tt>label_encodings</tt>
file that is included with the Trusted Extensions software.</p>
<ul><li><p>Substitute your zone names for the zone names in these lines.</p></li>
<li><p><i>myNFSserver</i> identifies the NFS server for the home directories.</p></li></ul>
<pre>/setup/files/auto_home_public
 * <i>myNFSserver</i>_FQDN:/zone/public/root/export/home/&amp;

/setup/files/auto_home_internal
 * <i>myNFSserve</i>r_FQDN:/zone/internal/root/export/home/&amp;

/setup/files/auto_home_needtoknow
 * <i>myNFSserver</i>_FQDN:/zone/needtoknow/root/export/home/&amp;

/setup/files/auto_home_restricted
 * <i>myNFSserver</i>_FQDN:/zone/restricted/root/export/home/&amp;</pre></li>
<li><b>Add every system on the network to the <tt>/setup/files/tnrhdb</tt> file. </b><p>No wildcard mechanism can be used here. The IP address of every system
to be contacted, including the IP addresses of labeled zones, <b>must</b> be
in this file.</p><ol style="list-style-type: lower-alpha">
<li><b>Open the trusted editor and edit <tt>/setup/files/tnrhdb</tt>.</b></li>
<li><b>Add every IP address on a labeled system in the Trusted Extensions
domain.</b><p>Labeled systems are of type <tt>cipso</tt>. Also, the name of the security template
for labeled systems is <tt>cipso</tt>. Therefore, in the default configuration, a <tt>cipso</tt> entry is
similar to the following:</p><pre>192.168.25.2:cipso</pre>
<hr><p><b>Note - </b>This list includes the IP addresses of global zones and labeled zones.</p>
<hr>
</li>
<li><b>Add every unlabeled system with which the domain can communicate.</b><p>Unlabeled systems are of type <tt>unlabeled</tt>. The name of the security template for
unlabeled systems is <tt>admin_low</tt>. Therefore, in the default configuration, an entry for an
unlabeled system is similar to the following:</p><pre>192.168.35.2:admin_low</pre></li>
<li><b>Save the file, and exit the editor.</b></li>
<li><b>Check the syntax of the file.</b><pre># <tt><b>tnchkdb -h /setup/files/tnrhdb</b></tt></pre></li>
<li><b>Fix any errors before continuing.</b></li></ol></li>
<li><b>Copy the <tt>/setup/files/tnrhdb</tt> file to the <tt>/etc/security/tsol/tnrhdb</tt> file.</b></li>
<li><a name="nisp-step-64"></a><b>Use the <tt>ldapaddent</tt> command to populate every file in the staging area.</b><pre># <tt><b>/usr/sbin/ldapaddent -D "cn=directory manager" \ -w dirmgr123 -a simple -f /setup/files/hosts hosts</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="txldap-18.html">Previous</a>
             </td>
             <td align="right">
                 <a href="txconf-37.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

