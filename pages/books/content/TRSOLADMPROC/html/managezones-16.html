<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Zones in Trusted Extensions - Solaris Trusted Extensions Administrator's Procedures</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris Trusted Extensions Administrator's Procedures</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="managezones-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="managezones-12.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-4.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="trp-part-1.html">Part&nbsp;I&nbsp;Initial Configuration of Trusted Extensions</a></p>
<p class="toc level2"><a href="ovw-1.html">1.&nbsp;&nbsp;Security Planning for Trusted Extensions</a></p>
<p class="toc level2"><a href="tmap-1.html">2.&nbsp;&nbsp;Configuration Roadmap for Trusted Extensions</a></p>
<p class="toc level2"><a href="startinst-1.html">3.&nbsp;&nbsp;Adding Solaris Trusted Extensions Software to the Solaris OS (Tasks)</a></p>
<p class="toc level2"><a href="txconf-1.html">4.&nbsp;&nbsp;Configuring Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txldap-1.html">5.&nbsp;&nbsp;Configuring LDAP for Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="headl-1.html">6.&nbsp;&nbsp;Configuring a Headless System With Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="trp-part-2.html">Part&nbsp;II&nbsp;Administration of Trusted Extensions</a></p>
<p class="toc level2"><a href="txintro-1.html">7.&nbsp;&nbsp;Trusted Extensions Administration Concepts</a></p>
<p class="toc level2"><a href="txtool-1.html">8.&nbsp;&nbsp;Trusted Extensions Administration Tools</a></p>
<p class="toc level2"><a href="roles-1.html">9.&nbsp;&nbsp;Getting Started as a Trusted Extensions Administrator (Tasks)</a></p>
<p class="toc level2"><a href="secreq-1.html">10.&nbsp;&nbsp;Security Requirements on a Trusted Extensions System (Overview)</a></p>
<p class="toc level2"><a href="commontasks-1.html">11.&nbsp;&nbsp;Administering Security Requirements in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="useraccts-1.html">12.&nbsp;&nbsp;Users, Rights, and Roles in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="manageusers-1.html">13.&nbsp;&nbsp;Managing Users, Rights, and Roles in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="remotead-1.html">14.&nbsp;&nbsp;Remote Administration in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="manageldap-1.html">15.&nbsp;&nbsp;Trusted Extensions and LDAP (Overview)</a></p>
<p class="toc level2"><a href="managezones-1.html">16.&nbsp;&nbsp;Managing Zones in Trusted Extensions (Tasks)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Zones in Trusted Extensions</a></p>
</div>
<p class="toc level3"><a href="managezones-12.html">Global Zone Processes and Labeled Zones</a></p>
<p class="toc level3"><a href="managezones-4.html">Zone Administration Utilities in Trusted Extensions</a></p>
<p class="toc level3"><a href="managezones-6.html">Managing Zones (Task Map)</a></p>
<p class="toc level2 tocsp"><a href="managefiles-1.html">17.&nbsp;&nbsp;Managing and Mounting Files in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="txnet-1.html">18.&nbsp;&nbsp;Trusted Networking (Overview)</a></p>
<p class="toc level2"><a href="managetnet-1.html">19.&nbsp;&nbsp;Managing Networks in Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="managemail-1.html">20.&nbsp;&nbsp;Multilevel Mail in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="manageprint-1.html">21.&nbsp;&nbsp;Managing Labeled Printing (Tasks)</a></p>
<p class="toc level2"><a href="gentextid-15538.html">22.&nbsp;&nbsp;Devices in Trusted Extensions (Overview)</a></p>
<p class="toc level2"><a href="managedev-1.html">23.&nbsp;&nbsp;Managing Devices for Trusted Extensions (Tasks)</a></p>
<p class="toc level2"><a href="audtask-1.html">24.&nbsp;&nbsp;Trusted Extensions Auditing (Overview)</a></p>
<p class="toc level2"><a href="softmgt-1.html">25.&nbsp;&nbsp;Software Management in Trusted Extensions (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="appol-1.html">A.&nbsp;&nbsp;Site Security Policy</a></p>
<p class="toc level2"><a href="appol-12.html">Creating and Managing a Security Policy</a></p>
<p class="toc level2"><a href="appol-11.html">Site Security Policy and Trusted Extensions</a></p>
<p class="toc level2"><a href="appol-2.html">Computer Security Recommendations</a></p>
<p class="toc level2"><a href="appol-3.html">Physical Security Recommendations</a></p>
<p class="toc level2"><a href="appol-4.html">Personnel Security Recommendations</a></p>
<p class="toc level2"><a href="appol-5.html">Common Security Violations</a></p>
<p class="toc level2"><a href="appol-6.html">Additional Security References</a></p>
<p class="toc level1 tocsp"><a href="aptxconf-1.html">B.&nbsp;&nbsp;Using CDE Actions to Install Zones in Trusted Extensions</a></p>
<p class="toc level2"><a href="aptxconf-62.html">Associating Network Interfaces With Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level2"><a href="aptxconf-40.html">Preparing to Create Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level2"><a href="aptxconf-20.html">Creating Labeled Zones by Using CDE Actions (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="checklist-1.html">C.&nbsp;&nbsp;Configuration Checklist for Trusted Extensions</a></p>
<p class="toc level2"><a href="checklist-2.html">Checklist for Configuring Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="txapp-1.html">D.&nbsp;&nbsp;Quick Reference to Trusted Extensions Administration</a></p>
<p class="toc level2"><a href="txapp-2.html">Administrative Interfaces in Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-3.html">Solaris Interfaces Extended by Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-4.html">Tighter Security Defaults in Trusted Extensions</a></p>
<p class="toc level2"><a href="txapp-5.html">Limited Options in Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="txmp-1.html">E.&nbsp;&nbsp;List of Trusted Extensions Man Pages</a></p>
<p class="toc level2"><a href="txmp-2.html">Trusted Extensions Man Pages in Alphabetical Order</a></p>
<p class="toc level2"><a href="txmp-3.html">Solaris Man Pages That Are Modified by Trusted Extensions</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="managezones-16"></a><h3>Zones in Trusted Extensions</h3>
<p><a name="indexterm-856"></a><a name="indexterm-857"></a>A properly configured Trusted Extensions system consists of a global zone, which is
the operating system instance, and one or more labeled non-global zones. During configuration,
Trusted Extensions attaches a unique label to each zone, which creates labeled zones.
The labels come from the <tt>label_encodings</tt> file. The administrators can create a zone for
each label, but are not required to. It is possible to have more
labels than labeled zones on a system. It is not possible to
have more labeled zones than labels.</p><p><a name="indexterm-858"></a><a name="indexterm-859"></a><a name="indexterm-860"></a>On a Trusted Extensions system, the file systems of a zone are
usually mounted as a loopback file system (lofs). All writable files and directories in
a labeled zone are at the label of the zone. By default,
a user can view files that are in a zone at a lower
label than the user's current label. This configuration enables users to view their
home directories at lower labels than the label of the current workspace. Although
users can view files at a lower label, they cannot modify them. Users
can only modify files from a process that has the same label as
the file.</p><p>In Trusted Extensions, the global zone is an administrative zone. The labeled zones
are for regular users. Users can work in a zone whose label
is within the user's accreditation range.</p><p>Every zone has an associated IP address and security attributes. A zone can
be configured with multilevel ports (MLPs). Also, a zone can be configured with
a policy for Internet Control Message Protocol (ICMP) broadcasts, such as <tt>ping</tt>.</p><p>For information about sharing directories from a labeled zone and about mounting directories
from labeled zones remotely, see <a href="managefiles-1.html">Chapter&nbsp;17, Managing and Mounting Files in Trusted Extensions (Tasks)</a>.</p><p>Zones in Trusted Extensions are built on the Solaris zones product. For details,
see <a href="http://docs.sun.com/doc/819-2450/zone?a=view">Part&nbsp;II, Zones, in <i>System Administration Guide: Virtualization Using the Solaris Operating System</i></a>. In particular, patching and package installation issues affect Trusted Extensions. For details,
see <a href="http://docs.sun.com/doc/819-2450/z.pkginst.ov-1?a=view">Chapter 24, About Packages and Patches on a Solaris System With Zones Installed (Overview), in <i>System Administration Guide: Virtualization Using the Solaris Operating System</i></a> and <a href="http://docs.sun.com/doc/819-2450/gclkx?a=view">Chapter 28, Troubleshooting Miscellaneous Solaris Zones Problems, in <i>System Administration Guide: Virtualization Using the Solaris Operating System</i></a>.</p>

<a name="managezones-2"></a><h4>Zones and IP Addresses in Trusted Extensions</h4>
<p>Your initial setup team assigned IP addresses to the global zone and the
labeled zones. Three types of configurations are documented in <a href="txconf-20.html">Creating Labeled Zones</a>:</p>
<ul><li><p>The system has one IP address for the global zone and all labeled zones.</p><p>This configuration is useful on a system that uses DHCP software to obtain its IP address. If no users are expected to log in, an LDAP server might have this configuration.</p></li>
<li><p>The system has one IP address for the global zone, and one IP address that is shared by all zones, including the global zone. Any zone can have a combination of a unique address and a shared address.</p><p>This configuration is useful on a system that regular users are going to log in to. It can also be used for a printer or an NFS server. This configuration conserves IP addresses.</p></li>
<li><p>The system has one IP address for the global zone, and each labeled zone has a unique IP address.</p><p>This configuration is useful for providing access to separate physical networks of single-level systems. Typically, each zone would have an IP address on a different physical network from the other labeled zones. Because this configuration is implemented with a single IP instance, the global zone controls the physical interfaces and manages global resources, such as the route table.</p></li></ul>
<p>With the introduction of exclusive IP instances for a non-global zone, a fourth
type of configuration is available in the Solaris OS. In the Solaris Express
Community Edition, a non-global zone can be assigned its own IP instance
and manage its own physical interfaces. In this configuration, each zone operates as if
it is a distinct system. For a description, see <a href="http://docs.sun.com/doc/819-2450/z.config.ov-6?a=view">Zone Network Interfaces in <i>System Administration Guide: Virtualization Using the Solaris Operating System</i></a>.</p><p>However, in such a configuration, each labeled zone operates as if it is
a distinct single-labeled system. The multilevel networking features of Trusted Extensions rely on
features of a shared IP stack. Administration procedures in Trusted Extensions assume that
networking is controlled entirely by the global zone. Therefore, if your initial setup
team has installed labeled zones with exclusive IP instances, you must provide or
refer to site-specific documentation.</p>

<a name="managezones-31"></a><h4>Zones and Multilevel Ports</h4>
<p>By default, a zone cannot send packets to and receive packets from
any other zone. Multilevel ports (MLPs) enable particular services on a port to accept
requests within a range of labels or from a set of labels.
These privileged services can reply at the label of the request. For example,
you might want to create a privileged web browser port that can listen
at all labels, but whose replies are restricted by label. By default, labeled
zones have no MLPs.</p><p>The range of labels or set of labels that constrains the packets
that the MLP can accept is based on the zone's IP address. The
IP address is assigned a remote host template in the <tt>tnrhdb</tt> database. The
label range or set of labels in the remote host template constrains the
packets that the MLP can accept.</p>
<ul><li><p>The constraints on MLPs for different IP address configurations are as follows:</p></li>
<li><p>On a system where the global zone has an IP address and each labeled zone has a unique IP address, an MLP for a particular service can be added to every zone. For example, the system could be configured so that the <tt>ssh</tt> service, over TCP port <tt>22</tt>, is an MLP in the global zone and in every labeled zone.</p></li>
<li><p>In a typical configuration, the global zone is assigned one IP address and labeled zones share a second IP address with the global zone. When an MLP is added to a shared interface, the service packet is routed to the labeled zone where the MLP is defined. The packet is accepted only if the remote host template for the labeled zone includes the label of the packet. If the range is <tt>ADMIN_LOW</tt> to <tt>ADMIN_HIGH</tt>, then all packets are accepted. A narrower range would discard packets that are not within the range.</p><p>At most, one zone can define a particular port to be an MLP on a shared interface. In the preceding scenario, where the <tt>ssh</tt> port is configured as a shared MLP in a non-global zone, no other zone can receive <tt>ssh</tt> connections on the shared address. However, the global zone could define the <tt>ssh</tt> port as a private MLP for receipt of connections on its zone-specific address. </p></li>
<li><p>On a system where the global zone and the labeled zones share an IP address, an MLP for the <tt>ssh</tt> service could be added to one zone. If the MLP for <tt>ssh</tt> is added to the global zone, then no labeled zone can add an MLP for the <tt>ssh</tt> service. Similarly, if the MLP for the <tt>ssh</tt> service is added to a labeled zone, then the global zone cannot be configured with an <tt>ssh</tt> MLP.</p></li></ul>
<p>For an example of adding MLPs to labeled zones, see <a href="managetnet-14.html#managetnet-33">Example&nbsp;19-16</a>.</p>

<a name="managezones-26"></a><h4>Zones and ICMP in Trusted Extensions</h4>
<p>Networks transmit broadcast messages and send ICMP packets to systems on the network.
On a multilevel system, these transmissions could flood the system at every label.
By default, the network policy for labeled zones requires that ICMP packets be
received only at the matching label.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="managezones-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="managezones-12.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

