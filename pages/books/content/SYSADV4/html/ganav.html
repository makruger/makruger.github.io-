<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting SMTP to Use TLS - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mailadmin-43.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mailadmin-377.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level3"><a href="mailadmin-270.html">Task Map for Mail Services</a></p>
<p class="toc level3"><a href="mailadmin-2.html">Planning Your Mail System</a></p>
<p class="toc level3"><a href="mailadmin-263.html">Setting Up Mail Services (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-13.html">Setting Up Mail Services</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-15">How to Set Up a Mail Server</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-20">How to Set Up a Mail Client</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-29">How to Set Up a Mail Host</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-37">How to Set Up a Mail Gateway</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-122">How to Use DNS With <tt>sendmail</tt></a></p>
<p class="toc level3 tocsp"><a href="mailadmin-43.html">Building the <tt>sendmail.cf</tt> Configuration File</a></p>
<p class="toc level4"><a href="mailadmin-43.html#mailadmin-44">How to Build a New <tt>sendmail.cf</tt> File</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Setting SMTP to Use TLS</a></p>
<p class="toc level4"><a href="#fxcty">How to Set SMTP to Use TLS</a></p>
</div>
<p class="toc level3 tocsp"><a href="mailadmin-377.html">Managing Mail Delivery by Using an Alternate Configuration</a></p>
<p class="toc level4"><a href="mailadmin-377.html#mailadmin-378">How to Manage Mail Delivery by Using an Alternate Configuration of <tt>sendmail.cf</tt></a></p>
<p class="toc level3 tocsp"><a href="mailadmin-260.html">Administering Mail Alias Files (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-52.html">Administering Mail Alias Files</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-345">How to Initiate an NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-327">How to List the Contents of the NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-330">How to Add Aliases to the NIS+ <tt>mail_aliases</tt> Table From the Command Line</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-331">How to Add Entries by Editing an NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-332">How to Edit Entries in an NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-93">How to Set Up an NIS <tt>mail.aliases</tt> Map</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-106">How to Set Up a Local Mail Alias File</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-118">How to Create a Keyed Map File</a></p>
<p class="toc level3 tocsp"><a href="mailadmin-262.html">Administering the Queue Directories (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-138.html">Administering the Queue Directories</a></p>
<p class="toc level4"><a href="mailadmin-138.html#eyhyo">How to Display the Contents of the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-142">How to Force Mail Queue Processing in the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-145">How to Run a Subset of the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-148">How to Move the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-156">How to Run the Old Mail Queue, <tt>/var/spool/omqueue</tt></a></p>
<p class="toc level3 tocsp"><a href="mailadmin-264.html">Administering <tt>.forward</tt> Files (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-160.html">Administering <tt>.forward</tt> Files</a></p>
<p class="toc level4"><a href="mailadmin-160.html#mailadmin-161">How to Disable <tt>.forward</tt> Files</a></p>
<p class="toc level4"><a href="mailadmin-160.html#mailadmin-167">How to Change the <tt>.forward</tt>-File Search Path</a></p>
<p class="toc level4"><a href="mailadmin-160.html#mailadmin-173">How to Create and Populate <tt>/etc/shells</tt></a></p>
<p class="toc level3 tocsp"><a href="mailadmin-265.html">Troubleshooting Procedures and Tips for Mail Services (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-180.html">Troubleshooting Procedures and Tips for Mail Services</a></p>
<p class="toc level4"><a href="mailadmin-180.html#mailadmin-181">How to Test the Mail Configuration</a></p>
<p class="toc level4"><a href="mailadmin-180.html#mailadmin-195">How to Test the <tt>sendmail</tt> Rule Sets</a></p>
<p class="toc level3 tocsp"><a href="mailadmin-219.html">Resolving Error Messages</a></p>
<p class="toc level2 tocsp"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ganav"></a><h3>Setting SMTP to Use TLS</h3>
<a name="indexterm-1159"></a><a name="indexterm-1160"></a><a name="indexterm-1161"></a><a name="indexterm-1162"></a><a name="indexterm-1163"></a><p>Starting in the Solaris 10 1/06 release, SMTP can use Transport Layer Security (TLS)
in version 8.13 of <tt>sendmail</tt>. This service to SMTP servers and clients provides private,
authenticated communications over the Internet, as well as protection from eavesdroppers and attackers. Note that
this service is not enabled by default. </p>

<a name="fxcty"></a><h4>How to Set SMTP to Use TLS</h4><p>The following procedure uses sample data to show you how to set up the
certificates that enable <tt>sendmail</tt> to use TLS. For more information, see <a href="evemx.html#fvbrb">Support for Running SMTP With TLS in Version 8.13 of <tt>sendmail</tt></a>.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a
role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Stop <tt>sendmail</tt>.</b><pre># <tt><b>svcadm -t disable network/smtp:sendmail</b></tt></pre></li>
<li><b>Set up the certificates that enable <tt>sendmail</tt> to use TLS.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Complete the following:</b><pre># <tt><b>cd /etc/mail</b></tt>
# <tt><b>mkdir -p certs/CA</b></tt>
# <tt><b>cd certs/CA</b></tt>
# <tt><b>mkdir certs crl newcerts private</b></tt>
# <tt><b>echo "01" > serial</b></tt>
# <tt><b>cp /dev/null index.txt</b></tt>
# <tt><b>cp /etc/sfw/openssl/openssl.cnf .</b></tt></pre></li>
<li><b>Use your preferred text editor to change the <tt>dir</tt> value in the <tt>openssl.cnf</tt> file from
<tt>/etc/sfw/openssl</tt> to <tt>/etc/mail/certs/CA</tt>.</b></li>
<li><b><a name="indexterm-1164"></a>Use the <tt>openssl</tt> command-line tool to implement TLS.</b><p>Note that the following command line generates interactive text.</p><pre># <tt><b>openssl req -new -x509 -keyout private/cakey.pem -out cacert.pem -days 365 \ -config openssl.cnf</b></tt>
Generating a 1024 bit RSA private key
.....................................++++++
.....................................++++++
writing new private key to 'private/cakey.pem'
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) []:<tt><b>US</b></tt>
State or Province Name (full name) []:<tt><b>California</b></tt>
Locality Name (eg, city) []:<tt><b>Menlo Park</b></tt>
Organization Name (eg, company) [Unconfigured OpenSSL Installation]:<tt><b>Sun Microsystems</b></tt>
Organizational Unit Name (eg, section) []:<tt><b>Solaris</b></tt>
Common Name (eg, YOUR name) []:<tt><b>somehost.somedomain.example.com</b></tt>
Email Address []:<tt><b>someuser@example.com</b></tt></pre><dl><dt><tt>req</tt></dt>
<dd><p>This command creates and processes certificate requests.</p></dd>
<dt><tt>-new</tt></dt>
<dd><p>This <tt>req</tt> option generates a new certificate request.</p></dd>
<dt><tt>-x509</tt></dt>
<dd><p>This <tt>req</tt> option creates a self-signed certificate.</p></dd>
<dt><tt>-keyout</tt> <tt>private/cakey.pem</tt></dt>
<dd><p>This <tt>req</tt> option enables you to assign <tt>private/cakey.pem</tt> as the file name for your newly created private key.</p></dd>
<dt><tt>-out</tt> <tt>cacert.pem</tt></dt>
<dd><p>This <tt>req</tt> option enables you to assign <tt>cacert.pem</tt> as your output file.</p></dd>
<dt><tt>-days</tt> <tt>365</tt></dt>
<dd><p>This <tt>req</tt> option enables you to certify the certificate for <tt>365</tt> days. The default value is <tt>30</tt>.</p></dd>
<dt><tt>-config</tt> <tt>openssl.cnf</tt></dt>
<dd><p>This <tt>req</tt> option enables you to specify <tt>openssl.cnf</tt> as the configuration file.</p></dd>
</dl>
<p>Note that this command requires that you provide the following:</p>
<ul><li><p><tt>Country Name</tt>, such as <tt>US</tt>.</p></li>
<li><p><tt>State or Province Name</tt>, such as <tt>California</tt>.</p></li>
<li><p><tt>Locality Name</tt>, such as <tt>Menlo Park</tt>.</p></li>
<li><p><tt>Organization Name</tt>, such as <tt>Sun Microsystems</tt>.</p></li>
<li><p><tt>Organizational Unit Name</tt>, such as <tt>Solaris</tt>.</p></li>
<li><p><tt>Common Name</tt>, which is the machine's fully qualified host name. For more information, see the <a href="http://docs.sun.com/doc/819-2240/check-hostname-1m?a=view"><tt>check-hostname</tt>(1M)</a> man page.</p></li>
<li><p><tt>Email Address</tt>, such as <tt>someuser@example.com</tt>.</p></li></ul>
</li></ol></li>
<li>(Optional) <b>If you need a new secure connection, make a new certificate and sign the new
certificate with the certificate authority.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Make a new certificate.</b><pre># <tt><b>cd /etc/mail/certs/CA</b></tt>
# <tt><b>openssl req -nodes -new -x509 -keyout newreq.pem -out newreq.pem -days 365 \ -config openssl.cnf</b></tt>
Generating a 1024 bit RSA private key
..............++++++
..............++++++
writing new private key to 'newreq.pem'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) []:<tt><b>US</b></tt>
State or Province Name (full name) []:<tt><b>California</b></tt>
Locality Name (eg, city) []:<tt><b>Menlo Park</b></tt>
Organization Name (eg, company) [Unconfigured OpenSSL Installation]:<tt><b>Sun Microsystems</b></tt>
Organizational Unit Name (eg, section) []:<tt><b>Solaris</b></tt>
Common Name (eg, YOUR name) []:<tt><b>somehost.somedomain.example.com</b></tt>
Email Address []:<tt><b>someuser@example.com</b></tt></pre><p>This command requires that you provide the same information that you provided in step
3c.</p><p>Note that in this example, the certificate and private key are in the file
<tt>newreq.pem</tt>.</p></li>
<li><b>Sign the new certificate with the certificate authority.</b><pre># <tt><b>cd /etc/mail/certs/CA</b></tt>
# <tt><b>openssl x509 -x509toreq -in newreq.pem -signkey newreq.pem -out tmp.pem</b></tt>
Getting request Private Key
Generating certificate request
# <tt><b>openssl ca -config openssl.cnf -policy policy_anything -out newcert.pem -infiles tmp.pem</b></tt>
Using configuration from openssl.cnf
Enter pass phrase for /etc/mail/certs/CA/private/cakey.pem:
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number: 1 (0x1)
        Validity
            Not Before: Jun 23 18:44:38 2005 GMT
            Not After : Jun 23 18:44:38 2006 GMT
        Subject:
            countryName               = US
            stateOrProvinceName       = California
            localityName              = Menlo Park
            organizationName          = Sun Microsystems
            organizationalUnitName    = Solaris
            commonName                = somehost.somedomain.example.com
            emailAddress              = someuser@example.com
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            Netscape Comment: 
                OpenSSL Generated Certificate
            X509v3 Subject Key Identifier: 
                93:D4:1F:C3:36:50:C5:97:D7:5E:01:E4:E3:4B:5D:0B:1F:96:9C:E2
            X509v3 Authority Key Identifier: 
                keyid:99:47:F7:17:CF:52:2A:74:A2:C0:13:38:20:6B:F1:B3:89:84:CC:68
                DirName:/C=US/ST=California/L=Menlo Park/O=Sun Microsystems/OU=Solaris/\
                CN=someuser@example.com/emailAddress=someuser@example.com
                serial:00

Certificate is to be certified until Jun 23 18:44:38 2006 GMT (365 days)
Sign the certificate? [y/n]:<tt><b>y</b></tt>


1 out of 1 certificate requests certified, commit? [y/n]<tt><b>y</b></tt>
Write out database with 1 new entries
Data Base Updated
# <tt><b>rm -f tmp.pem</b></tt></pre><p>In this example the file <tt>newreq.pem</tt> contains the unsigned certificate and private key. The
file <tt>newcert.pem</tt> contains the signed certificate.</p><dl><dt><tt>x509</tt> utility</dt>
<dd><p>Displays certificate information, converts certificates to various forms, and signs certificate requests</p></dd>
<dt><tt>ca</tt> application</dt>
<dd><p>Used to sign certificate requests in a variety of forms and to generate CRLs (certificate revocation lists)</p></dd>
</dl>
</li></ol></li>
<li><b>Enable <tt>sendmail</tt> to use the certificates by adding the following lines to your <tt>.mc</tt>
file.</b><pre><tt><b>define(`confCACERT_PATH', `/etc/mail/certs')dnl define(`confCACERT', `/etc/mail/certs/CAcert.pem')dnl define(`confSERVER_CERT', `/etc/mail/certs/MYcert.pem')dnl define(`confSERVER_KEY', `/etc/mail/certs/MYkey.pem')dnl define(`confCLIENT_CERT', `/etc/mail/certs/MYcert.pem')dnl define(`confCLIENT_KEY', `/etc/mail/certs/MYkey.pem')dnl</b></tt></pre><p>For more information, see <a href="evemx.html#fvbqb">Configuration File Options for Running SMTP With TLS</a>.</p></li>
<li><b>Rebuild and install your <tt>sendmail.cf</tt> file in your <tt>/etc/mail</tt> directory.</b><p>For detailed instructions, see <a href="mailadmin-43.html">Building the <tt>sendmail.cf</tt> Configuration File</a>.</p></li>
<li><b>Create symbolic links from the files you created with <tt>openssl</tt> to the files
you defined in your <tt>.mc</tt> file.</b><pre># <tt><b>cd /etc/mail/certs</b></tt>
# <tt><b>ln -s CA/cacert.pem CAcert.pem</b></tt>
# <tt><b>ln -s CA/newcert.pem MYcert.pem</b></tt>
# <tt><b>ln -s CA/newreq.pem MYkey.pem</b></tt></pre></li>
<li><b>For added security, deny read permission to group and others for <tt>MYkey.pem</tt>.</b><pre># <tt><b>chmod go-r MYkey.pem</b></tt></pre></li>
<li><b>Use a symbolic link to install CA certs in the directory assigned to <tt>confCACERT_PATH</tt>.</b><pre># <tt><b>C=CAcert.pem</b></tt>
# <tt><b>ln -s $C `openssl x509 -noout -hash &lt; $C`.0</b></tt></pre></li>
<li><b>For secure mail with other hosts, install their host certificates.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Copy the file defined by the other host's <tt>confCACERT</tt> option to <tt>/etc/mail/certs/</tt><i>host.domain</i><tt>.cert.pem</tt>.</b><p>Replace <i>host.domain</i> with the other host's fully qualified host name.</p></li>
<li><b>Use a symbolic link to install CA certs in the directory assigned to <tt>confCACERT_PATH</tt>.</b><pre># <tt><b>C=</b></tt><i>host.domain</i><tt><b>.cert.pem</b></tt>
# <tt><b>ln -s $C `openssl x509 -noout -hash &lt; $C`.0</b></tt></pre><p>Replace <i>host.domain</i> with the other host's fully qualified host name.</p></li></ol></li>
<li><b>Restart <tt>sendmail</tt>.</b><pre># <tt><b>svcadm enable network/smtp:sendmail</b></tt></pre></li></ol><a name="fxjdn"></a>Example&nbsp;13-1 <tt>Received:</tt> Mail Header<p>The following is an example of a <tt>Received:</tt> header for secure mail with TLS.</p><pre>Received: from his.example.com ([IPv6:2001:db8:3c4d:15::1a2f:1a2b])
        by her.example.com (8.13.4+Sun/8.13.4) with ESMTP id j2TNUB8i242496
        (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
        for &lt;janepc@her.example.com>; Tue, 29 Mar 2005 15:30:11 -0800 (PST)
Received: from her.example.com (her.city.example.com [192.168.0.0])
        by his.example.com (8.13.4+Sun/8.13.4) with ESMTP id j2TNU7cl571102
        version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
        for &lt;janepc@her.example.com>; Tue, 29 Mar 2005 15:30:07 -0800 (PST)</pre><p>Note that the value for <tt>verify</tt> is <tt>OK</tt>, which means that the authentication was
successful. For more information, see <a href="evemx.html#fvbqm">Macros for Running SMTP With TLS</a>.</p><h6>See Also</h6><p>The following OpenSSL man pages:</p>
<ul><li><p><a href="http://www.openssl.org/docs/apps/openssl.html">openssl(1)</a>.</p></li>
<li><p><a href="http://www.openssl.org/docs/apps/req.html">req(1)</a>.</p></li>
<li><p><a href="http://www.openssl.org/docs/apps/x509.html">x509(1)</a>.</p></li>
<li><p><a href="http://www.openssl.org/docs/apps/ca.html">ca(1)</a>.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mailadmin-43.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mailadmin-377.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

