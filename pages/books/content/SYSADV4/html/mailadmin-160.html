<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Administering <tt>.forward</tt> Files - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mailadmin-264.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mailadmin-265.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level3"><a href="mailadmin-270.html">Task Map for Mail Services</a></p>
<p class="toc level3"><a href="mailadmin-2.html">Planning Your Mail System</a></p>
<p class="toc level3"><a href="mailadmin-263.html">Setting Up Mail Services (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-13.html">Setting Up Mail Services</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-15">How to Set Up a Mail Server</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-20">How to Set Up a Mail Client</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-29">How to Set Up a Mail Host</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-37">How to Set Up a Mail Gateway</a></p>
<p class="toc level4"><a href="mailadmin-13.html#mailadmin-122">How to Use DNS With <tt>sendmail</tt></a></p>
<p class="toc level3 tocsp"><a href="mailadmin-43.html">Building the <tt>sendmail.cf</tt> Configuration File</a></p>
<p class="toc level4"><a href="mailadmin-43.html#mailadmin-44">How to Build a New <tt>sendmail.cf</tt> File</a></p>
<p class="toc level3 tocsp"><a href="ganav.html">Setting SMTP to Use TLS</a></p>
<p class="toc level4"><a href="ganav.html#fxcty">How to Set SMTP to Use TLS</a></p>
<p class="toc level3 tocsp"><a href="mailadmin-377.html">Managing Mail Delivery by Using an Alternate Configuration</a></p>
<p class="toc level4"><a href="mailadmin-377.html#mailadmin-378">How to Manage Mail Delivery by Using an Alternate Configuration of <tt>sendmail.cf</tt></a></p>
<p class="toc level3 tocsp"><a href="mailadmin-260.html">Administering Mail Alias Files (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-52.html">Administering Mail Alias Files</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-345">How to Initiate an NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-327">How to List the Contents of the NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-330">How to Add Aliases to the NIS+ <tt>mail_aliases</tt> Table From the Command Line</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-331">How to Add Entries by Editing an NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-332">How to Edit Entries in an NIS+ <tt>mail_aliases</tt> Table</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-93">How to Set Up an NIS <tt>mail.aliases</tt> Map</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-106">How to Set Up a Local Mail Alias File</a></p>
<p class="toc level4"><a href="mailadmin-52.html#mailadmin-118">How to Create a Keyed Map File</a></p>
<p class="toc level3 tocsp"><a href="mailadmin-262.html">Administering the Queue Directories (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-138.html">Administering the Queue Directories</a></p>
<p class="toc level4"><a href="mailadmin-138.html#eyhyo">How to Display the Contents of the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-142">How to Force Mail Queue Processing in the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-145">How to Run a Subset of the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-148">How to Move the Mail Queue, <tt>/var/spool/mqueue</tt></a></p>
<p class="toc level4"><a href="mailadmin-138.html#mailadmin-156">How to Run the Old Mail Queue, <tt>/var/spool/omqueue</tt></a></p>
<p class="toc level3 tocsp"><a href="mailadmin-264.html">Administering <tt>.forward</tt> Files (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Administering <tt>.forward</tt> Files</a></p>
<p class="toc level4"><a href="#mailadmin-161">How to Disable <tt>.forward</tt> Files</a></p>
<p class="toc level4"><a href="#mailadmin-167">How to Change the <tt>.forward</tt>-File Search Path</a></p>
<p class="toc level4"><a href="#mailadmin-173">How to Create and Populate <tt>/etc/shells</tt></a></p>
</div>
<p class="toc level3 tocsp"><a href="mailadmin-265.html">Troubleshooting Procedures and Tips for Mail Services (Task Map)</a></p>
<p class="toc level3"><a href="mailadmin-180.html">Troubleshooting Procedures and Tips for Mail Services</a></p>
<p class="toc level4"><a href="mailadmin-180.html#mailadmin-181">How to Test the Mail Configuration</a></p>
<p class="toc level4"><a href="mailadmin-180.html#mailadmin-195">How to Test the <tt>sendmail</tt> Rule Sets</a></p>
<p class="toc level3 tocsp"><a href="mailadmin-219.html">Resolving Error Messages</a></p>
<p class="toc level2 tocsp"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="mailadmin-160"></a><h3>Administering <tt>.forward</tt> Files</h3>
<p>This section contains several procedures that are related to <tt>.forward</tt> file administration. Because these
files can be edited by users, the files can cause problems. For more information,
refer to <a href="mailrefer-45.html#mailrefer-39"><tt>.forward</tt> Files</a> in <a href="mailrefer-1.html">Chapter&nbsp;14, Mail Services (Reference)</a>.</p><p>Refer to the following:</p>
<ul><li><p><a href="#mailadmin-161">How to Disable <tt>.forward</tt> Files</a></p></li>
<li><p><a href="#mailadmin-167">How to Change the <tt>.forward</tt>-File Search Path</a></p></li>
<li><p><a href="#mailadmin-173">How to Create and Populate <tt>/etc/shells</tt></a></p></li></ul>


<a name="mailadmin-161"></a><h4>How to Disable <tt>.forward</tt> Files</h4><p><a name="indexterm-1202"></a><a name="indexterm-1203"></a>This procedure, which prevents automated forwarding, disables the <tt>.forward</tt> file for a particular host.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="mailadmin-step-164"></a><b>Make a copy of <tt>/etc/mail/cf/domain/solaris-generic.m4</tt> or your site-specific domain m4 file.</b><pre># <tt><b>cd /etc/mail/cf/domain</b></tt>
# <tt><b>cp solaris-generic.m4</b></tt> <i>mydomain</i><tt><b>.m4</b></tt></pre><dl><dt><i>mydomain</i></dt>
<dd><p><a name="indexterm-1204"></a>Use the file name of your choice.</p></dd>
</dl>
</li>
<li><a name="mailadmin-step-165"></a><b><a name="indexterm-1205"></a>Add the following line to the file that you just created.</b><pre><tt><b>define(`confFORWARD_PATH',`')dnl</b></tt></pre><p>If a value for <tt>confFORWARD_PATH</tt> already exists in the <tt>m4</tt> file, replace the value
with this null value.</p></li>
<li><a name="mailadmin-step-166"></a><b>Build and install a new configuration file.</b><p>If you need help with this step, refer to <a href="mailadmin-43.html#mailadmin-44">How to Build a New <tt>sendmail.cf</tt> File</a>.</p>
<hr><p><b>Note - </b>When you edit the <tt>.mc</tt> file, remember to change <tt>DOMAIN(`solaris-generic')</tt> to <tt>DOMAIN(`</tt><i>mydomain</i><tt>')</tt>.</p>
<hr>
</li></ol>

<a name="mailadmin-167"></a><h4>How to Change the <tt>.forward</tt>&ndash;File Search Path</h4><p><a name="indexterm-1206"></a><a name="indexterm-1207"></a>If, for example, you want to put all <tt>.forward</tt> files in a common directory,
follow these instructions.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="mailadmin-step-170"></a><b>Make a copy of <tt>/etc/mail/cf/domain/solaris-generic.m4</tt> or your site-specific domain m4 file.</b><pre># <tt><b>cd /etc/mail/cf/domain</b></tt>
# <tt><b>cp solaris-generic.m4</b></tt> <i>mydomain</i><tt><b>.m4</b></tt></pre><dl><dt><i>mydomain</i></dt>
<dd><p><a name="indexterm-1208"></a>Use the file name of your choice.</p></dd>
</dl>
</li>
<li><a name="mailadmin-step-171"></a><b>Add the following line to the file that you just created.</b><pre>define(`confFORWARD_PATH',`$z/.forward:/var/forward/$u')dnl</pre><p><a name="indexterm-1209"></a>If a value for <tt>confFORWARD_PATH</tt> already exists in the <tt>m4</tt> file, replace the value
with this new value.</p></li>
<li><a name="mailadmin-step-172"></a><b>Build and install a new configuration file.</b><p>If you need help with this step, refer to <a href="mailadmin-43.html#mailadmin-44">How to Build a New <tt>sendmail.cf</tt> File</a>.</p>
<hr><p><b>Note - </b>When you edit the <tt>.mc</tt> file, remember to change <tt>DOMAIN(`solaris-generic')</tt> to <tt>DOMAIN(`</tt><i>mydomain</i><tt>')</tt>.</p>
<hr>
</li></ol>

<a name="mailadmin-173"></a><h4>How to Create and Populate <tt>/etc/shells</tt></h4><p><a name="indexterm-1210"></a><a name="indexterm-1211"></a><a name="indexterm-1212"></a><a name="indexterm-1213"></a>This file is not included in the standard release. You must add the file
 if users are to be allowed to use <tt>.forward</tt> files to forward mail
to a program or to a file. You can create the file manually by
using <tt>grep</tt> to identify all of the shells that are listed in your password
file. You can then type the shells into the file. However, the following procedure, which
employs a script that can be downloaded, is easier to use.</p><ol>
<li><a name="mailadmin-step-175"></a><b>Download the script.</b><p><a href="http://www.sendmail.org/vendor/sun/gen-etc-shells.html">http://www.sendmail.org/vendor/sun/gen-etc-shells.html</a></p></li>
<li><a name="mailadmin-step-176"></a><b>Become <tt>root</tt> or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure
a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="mailadmin-step-177"></a><b>To generate a list of shells, run the <tt>gen-etc-shells</tt> script.</b><pre># <tt><b>./gen-etc-shells.sh > /tmp/shells</b></tt></pre><p>This script uses the <tt>getent</tt> command to collect the names of shells that
are included in the password file sources that are listed in <tt>/etc/nsswitch.conf</tt>.</p></li>
<li><a name="mailadmin-step-178"></a><b>Inspect and edit the list of shells in <tt>/tmp/shells</tt>.</b><p>With the editor of your choice, remove any shells that you are not including.</p></li>
<li><a name="mailadmin-step-179"></a><b>Move the file to <tt>/etc/shells</tt>.</b><pre># <tt><b>mv /tmp/shells /etc/shells</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mailadmin-264.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mailadmin-265.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

