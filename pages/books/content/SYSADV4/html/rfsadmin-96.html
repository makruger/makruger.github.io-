<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Administering the Secure NFS System - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rfsadmin-68.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rfsadmin-110.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level3"><a href="rfsadmin-56.html">Automatic File-System Sharing</a></p>
<p class="toc level4"><a href="rfsadmin-56.html#rfsadmin-57">How to Set Up Automatic File-System Sharing</a></p>
<p class="toc level4"><a href="rfsadmin-56.html#rfsadmin-112">How to Enable WebNFS Access</a></p>
<p class="toc level4"><a href="rfsadmin-56.html#rfsadmin-101">How to Enable NFS Server Logging</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-61.html">Mounting File Systems</a></p>
<p class="toc level4"><a href="rfsadmin-61.html#rfsadmin-62">How to Mount a File System at Boot Time</a></p>
<p class="toc level4"><a href="rfsadmin-61.html#rfsadmin-66">How to Mount a File System From the Command Line</a></p>
<p class="toc level4"><a href="rfsadmin-61.html#rfsadmin-75">How to Disable Large Files on an NFS Server</a></p>
<p class="toc level4"><a href="rfsadmin-61.html#rfsadmin-81">How to Use Client-Side Failover</a></p>
<p class="toc level4"><a href="rfsadmin-61.html#rfsadmin-84">How to Disable Mount Access for One Client</a></p>
<p class="toc level4"><a href="rfsadmin-61.html#rfsadmin-88">How to Mount an NFS File System Through a Firewall</a></p>
<p class="toc level4"><a href="rfsadmin-61.html#rfsadmin-92">How to Mount an NFS File System Using an NFS URL</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-68.html">Setting Up NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-69">How to Start the NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-72">How to Stop the NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-121">How to Start the Automounter</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-124">How to Stop the Automounter</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-965">How to Select Different Versions of NFS on a Server</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-966">How to Select Different Versions of NFS on a Client by Modifying the <tt>/etc/default/nfs</tt> File</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#ekqwg">How to Use the Command Line to Select Different Versions of NFS on a Client</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Administering the Secure NFS System</a></p>
<p class="toc level4"><a href="#rfsadmin-97">How to Set Up a Secure NFS Environment With DH Authentication</a></p>
</div>
<p class="toc level3 tocsp"><a href="rfsadmin-110.html">WebNFS Administration Tasks</a></p>
<p class="toc level3"><a href="rfsadmin-127.html">Task Overview for Autofs Administration</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-250">How to Use the <tt>/etc/default/autofs</tt> File</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-133">How to Modify the Master Map</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-139">How to Modify Indirect Maps</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-142">How to Modify Direct Maps</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-149">How to Access CD-ROM Applications With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-152">How to Access PC-DOS Data Diskettes With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-156">How to Access NFS File Systems by Using CacheFS</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-162">How to Set Up <tt>/home</tt> With Multiple Home Directory File Systems</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-166">How to Consolidate Project-Related Files Under <tt>/ws</tt></a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-171">How to Set Up Different Architectures to Access a Shared Namespace</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-179">How to Support Incompatible Client Operating System Versions</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-183">How to Replicate Shared Files Across Several Servers</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-186">How to Apply Autofs Security Restrictions</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-189">How to Use a Public File Handle With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-192">How to Use NFS URLs With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-196">How to Completely Disable Autofs Browsability on a Single NFS Client</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-200">How to Disable Autofs Browsability for All Clients</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-204">How to Disable Autofs Browsability on a Selected File System</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-214.html">Strategies for NFS Troubleshooting</a></p>
<p class="toc level3"><a href="rfsadmin-215.html">NFS Troubleshooting Procedures</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-216">How to Check Connectivity on an NFS Client</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-224">How to Check the NFS Server Remotely</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-231">How to Verify the NFS Service on the Server</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-240">How to Restart NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-243">How to Warm-Start <tt>rpcbind</tt></a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-251">How to Verify Options Used With the <tt>mount</tt> Command</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-210.html">Troubleshooting Autofs</a></p>
<p class="toc level3"><a href="rfsadmin-255.html">NFS Error Messages</a></p>
<p class="toc level2 tocsp"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rfsadmin-96"></a><h3>Administering the Secure NFS System</h3>
<p><a name="indexterm-239"></a><a name="indexterm-240"></a><a name="indexterm-241"></a><a name="indexterm-242"></a><a name="indexterm-243"></a>To use the Secure NFS system, all the computers that you are
responsible for must have a domain name. Typically, a domain is an administrative
entity of several computers that is part of a larger network. If you
are running a name service, you should also establish the name service for
the domain. See <a href="http://docs.sun.com/doc/819-3195"><i>System Administration Guide: Naming and Directory Services (NIS+)</i></a>.     </p><p>Kerberos V5 authentication is supported by the NFS service. <a href="http://docs.sun.com/doc/819-3321/intro-1?a=view">Chapter 20, Introduction to the Kerberos Service, in <i>System Administration Guide: Security Services</i></a> discusses the
Kerberos service.</p><p><a name="indexterm-244"></a><a name="indexterm-245"></a>You can also configure the Secure NFS environment to use Diffie-Hellman authentication. <a href="http://docs.sun.com/doc/819-3321/auth-1?a=view">Chapter 15, Using Authentication Services (Tasks), in <i>System Administration Guide: Security Services</i></a>
discusses this authentication service. </p><p>The following procedure shows you how to use the <tt>sharemgr</tt> utility to
set up a secure NFS environment with DH authentication. The example that follows
the procedure shows you how to use the <tt>share</tt> command to complete the
same task.</p>

<a name="rfsadmin-97"></a><h4>How to Set Up a Secure NFS Environment With DH Authentication</h4><p>Starting with the Solaris Express, Developer Edition 2/07 release, you can do the
following:</p>
<ul><li><p>Use the <tt>sharemgr</tt> utility to share file systems, set property values for the shared file systems, and perform related tasks. For information about <tt>sharemgr</tt>, including descriptions of subcommands and properties, see the <tt>sharemgr</tt>(1M) man page and <a href="rfsrefer-13.html#gcrvu"><tt>sharemgr</tt> Command</a>.</p></li>
<li><p>Use the <tt>sharectl</tt> utility to configure file-sharing protocols, such as NFS. See the <tt>sharectl</tt>(1M) man page and <a href="rfsrefer-13.html#gecpc"><tt>sharectl</tt> Command</a>.</p></li></ul>

<hr><p><b>Note - </b>When you use <tt>sharemgr</tt>, you do not need to use the <tt>share</tt>, <tt>shareall</tt>,
 and <tt>unshare</tt> commands. Also, you do not need to edit the <tt>/etc/dfs/dfstab</tt>
file.</p>
<hr>
<p>The following procedure uses the <tt>sharemgr</tt> utility. If you prefer to use the
<tt>share</tt> utility, see the example that follows this procedure.</p><ol>
<li><a name="rfsadmin-step-99"></a><b>Assign your domain a domain name, and make the domain name known to
each computer in the domain.</b><p>See the <a href="http://docs.sun.com/doc/819-3195"><i>System Administration Guide: Naming and Directory Services (NIS+)</i></a> if you are using NIS+ as your name service.</p></li>
<li><a name="rfsadmin-step-100"></a><b>Establish public keys and secret keys for your clients' users by using the
<tt>newkey</tt> or <tt>nisaddcred</tt> command. Have each user establish his or her own
secure RPC password by using the <tt>chkey</tt> command.</b>
<hr><p><b>Note - </b>For information about these commands, see the <a href="http://docs.sun.com/doc/819-2240/newkey-1m?a=view"><tt>newkey</tt>(1M)</a>, the <a href="http://docs.sun.com/doc/819-2240/nisaddcred-1m?a=view"><tt>nisaddcred</tt>(1M)</a>, and the
<a href="http://docs.sun.com/doc/819-2239/chkey-1?a=view"><tt>chkey</tt>(1)</a> man pages. </p>
<hr>
<p>When public keys and secret keys have been generated, the public keys and
encrypted secret keys are stored in the <tt>publickey</tt> database. </p></li>
<li><a name="rfsadmin-step-101"></a><b>Verify that the name service is responding.</b><p>For example:</p>
<ul><li><p>If you are running NIS+, type the following:</p><pre># <tt><b>nisping -u</b></tt>
Last updates for directory eng.acme.com. :
Master server is eng-master.acme.com.
        Last update occurred at Mon Jun  5 11:16:10 2006

Replica server is eng1-replica-replica-58.acme.com.
        Last Update seen was Mon Jun  5 11:16:10 2006</pre></li>
<li><p>If you are running NIS, verify that the <tt>ypbind</tt> daemon is running.</p></li></ul>
</li>
<li><a name="rfsadmin-step-102"></a><b>Verify that the <tt>keyserv</tt> daemon of the key server is running. </b><p>Type the following command.</p><pre># <tt><b>ps -ef | grep keyserv</b></tt>
root    100      1  16    Apr 11 ?        0:00 /usr/sbin/keyserv
root   2215   2211   5  09:57:28 pts/0    0:00 grep keyserv</pre><p>If the daemon is not running, start the key server by typing
the following: </p><pre># <tt><b>/usr/sbin/keyserv</b></tt></pre></li>
<li><a name="rfsadmin-step-103"></a><b>Decrypt and store the secret key. </b><p>Usually, the login password is identical to the network password. In this situation,
<tt>keylogin</tt> is not required. If the passwords are different, the users have to
log in, and then run <tt>keylogin</tt>. You still need to use the <tt>keylogin -r</tt>
command as <tt>root</tt> to store the decrypted secret key in <tt>/etc/.rootkey</tt>.</p>
<hr><p><b>Note - </b>You need to run <tt>keylogin -r</tt> if the root secret key changes or if
<tt>/etc/.rootkey</tt> is lost.</p>
<hr>
</li>
<li><a name="rfsadmin-step-104"></a><b>Use the <tt>sharemgr</tt> utility to set the security mode for the file system
to be shared.</b><p>For example:</p><pre># <tt><b>sharemgr set -P nfs -S dh MyShareGroup</b></tt></pre><dl><dt><tt>-P</tt></dt>
<dd><p>Use this option to specify a file-system type, such as <tt>nfs</tt>.</p></dd>
<dt><tt>-S</tt></dt>
<dd><p>Use this option to specify a security mode, such as <tt>sys</tt>, <tt>dh</tt>, or <tt>krb5</tt>. For more information about security modes, see the <a href="http://docs.sun.com/doc/819-2252/nfssec-5?a=view"><tt>nfssec</tt>(5)</a> man page.</p></dd>
<dt><tt>MyShareGroup</tt></dt>
<dd><p>Use the name of the share group that you created. For more information, see the <tt>sharemgr</tt>(1M) man page or <a href="rfsrefer-13.html#gcrvu"><tt>sharemgr</tt> Command</a></p></dd>
</dl>

<hr><p><b>Note - </b>You do not need to edit the <tt>etc/dfs/dfstab</tt> file.</p>
<hr>
</li>
<li><a name="rfsadmin-step-105"></a><b>Update the automounter maps for the file system.</b><p>Edit the <tt>auto_master</tt> data to include <tt>sec=dh</tt> as a mount option in
the appropriate entries for Diffie-Hellman authentication:</p><pre>/home    auto_home    -nosuid,sec=dh</pre>
<hr><p><b>Note - </b>Releases through Solaris 2.5 have a limitation. If a client does not securely
mount a shared file system that is secure, users have access as <tt>nobody</tt>
rather than as themselves. For subsequent releases that use version 2, the NFS
server refuses access if the security modes do not match, unless <tt>sec=none</tt> is
included on the <tt>share</tt> command line. With version 3, the mode is
inherited from the NFS server, so clients do not need to specify <tt>sec=dh</tt>. The
users have access to the files as themselves.</p>
<hr>
<p>When you reinstall, move, or upgrade a computer, remember to save <tt>/etc/.rootkey</tt>
if you do not establish new keys or change the keys for <tt>root</tt>.
If you do delete <tt>/etc/.rootkey</tt>, you can always type the following:  </p><pre># <tt><b>keylogin -r</b></tt></pre></li></ol><a name="gedhm"></a>Example&nbsp;5-6 How to Use the <tt>share</tt> Command to Set Up a Secure NFS Environment With DH Authentication
<ol><li><p><a name="indexterm-246"></a><a name="indexterm-247"></a>Assign your domain a domain name, and make the domain name known to each computer in the domain.</p><p>See the <a href="http://docs.sun.com/doc/819-3195"><i>System Administration Guide: Naming and Directory Services (NIS+)</i></a> if you are using NIS+ as your name service.</p></li>
<li><p><a name="indexterm-248"></a><a name="indexterm-249"></a><a name="indexterm-250"></a><a name="indexterm-251"></a>Establish public keys and secret keys for your clients' users by using the <tt>newkey</tt> or <tt>nisaddcred</tt> command. Have each user establish his or her own secure RPC password by using the <tt>chkey</tt> command.</p>
<hr><p><b>Note - </b>For information about these commands, see the <a href="http://docs.sun.com/doc/819-2240/newkey-1m?a=view"><tt>newkey</tt>(1M)</a>, the <a href="http://docs.sun.com/doc/819-2240/nisaddcred-1m?a=view"><tt>nisaddcred</tt>(1M)</a>, and the <a href="http://docs.sun.com/doc/819-2239/chkey-1?a=view"><tt>chkey</tt>(1)</a> man pages. </p>
<hr>
<p><a name="indexterm-252"></a>When public keys and secret keys have been generated, the public keys and encrypted secret keys are stored in the <tt>publickey</tt> database. </p></li>
<li><p>Verify that the name service is responding. </p><p>For example:</p>
<ul><li><p>If you are running NIS+, type the following:</p><pre># <tt><b>nisping -u</b></tt>
Last updates for directory eng.acme.com. :
Master server is eng-master.acme.com.
        Last update occurred at Mon Jun  5 11:16:10 2006

Replica server is eng1-replica-replica-58.acme.com.
        Last Update seen was Mon Jun  5 11:16:10 2006</pre></li>
<li><p>If you are running NIS, verify that the <tt>ypbind</tt> daemon is running.</p></li></ul>
</li>
<li><p>Verify that the <tt>keyserv</tt> daemon of the key server is running. </p><p>Type the following command.</p><pre># <tt><b>ps -ef | grep keyserv</b></tt>
root    100      1  16    Apr 11 ?        0:00 /usr/sbin/keyserv
root   2215   2211   5  09:57:28 pts/0    0:00 grep keyserv</pre><p><a name="indexterm-253"></a>If the daemon is not running, start the key server by typing the following: </p><pre># <tt><b>/usr/sbin/keyserv</b></tt></pre></li>
<li><p><a name="indexterm-254"></a><a name="indexterm-255"></a>Decrypt and store the secret key. </p><p>Usually, the login password is identical to the network password. In this situation, <tt>keylogin</tt> is not required. If the passwords are different, the users have to log in, and then run <tt>keylogin</tt>. You still need to use the <tt>keylogin -r</tt> command as <tt>root</tt> to store the decrypted secret key in <tt>/etc/.rootkey</tt>.</p>
<hr><p><b>Note - </b>You need to run <tt>keylogin -r</tt> if the root secret key changes or if <tt>/etc/.rootkey</tt> is lost.</p>
<hr>
</li>
<li><p>Update mount options for the file system.</p><p><a name="indexterm-256"></a><a name="indexterm-257"></a><a name="indexterm-258"></a><a name="indexterm-259"></a><a name="indexterm-260"></a><a name="indexterm-261"></a><a name="indexterm-262"></a><a name="indexterm-263"></a>For Diffie-Hellman authentication, edit the <tt>/etc/dfs/dfstab</tt> file and add the <tt>sec=dh</tt> option to the appropriate entries.</p><pre><tt><b>share -F nfs -o sec=dh /export/home</b></tt></pre><p>See the <a href="http://docs.sun.com/doc/819-2251/dfstab-4?a=view"><tt>dfstab</tt>(4)</a> man page for a description of <tt>/etc/dfs/dfstab</tt>.</p></li>
<li><p>Update the automounter maps for the file system.</p><p><a name="indexterm-264"></a><a name="indexterm-265"></a><a name="indexterm-266"></a>Edit the <tt>auto_master</tt> data to include <tt>sec=dh</tt> as a mount option in the appropriate entries for Diffie-Hellman authentication: </p><pre>/home    auto_home    -nosuid,sec=dh</pre>
<hr><p><b>Note - </b>Releases through Solaris 2.5 have a limitation. If a client does not securely mount a shared file system that is secure, users have access as <tt>nobody</tt> rather than as themselves. For subsequent releases that use version 2, the NFS server refuses access if the security modes do not match, unless <tt>-sec=none</tt> is included on the <tt>share</tt> command line. With version 3, the mode is inherited from the NFS server, so clients do not need to specify <tt>sec=dh</tt>. The users have access to the files as themselves.</p>
<hr>
<p><a name="indexterm-267"></a>When you reinstall, move, or upgrade a computer, remember to save <tt>/etc/.rootkey</tt> if you do not establish new keys or change the keys for <tt>root</tt>. If you do delete <tt>/etc/.rootkey</tt>, you can always type the following: </p><pre># <tt><b>keylogin -r</b></tt></pre></li></ol>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rfsadmin-68.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rfsadmin-110.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

