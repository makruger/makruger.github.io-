<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Virtual Hosting - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wuftp-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wuftp-189.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level3"><a href="wuftp-231.html">Administering the FTP Server (Task Map)</a></p>
<p class="toc level3"><a href="wuftp-43.html">Controlling FTP Server Access</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-45">How to Define FTP Server Classes</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-162">How to Set User Login Limits</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-167">How to Control the Number of Invalid Login Attempts</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-44a">How to Disallow FTP Server Access to Particular Users</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-51">How to Restrict Access to the Default FTP Server</a></p>
<p class="toc level3 tocsp"><a href="wuftp-10.html">Setting Up FTP Server Logins</a></p>
<p class="toc level4"><a href="wuftp-10.html#wuftp-153">How to Set Up Real FTP Users</a></p>
<p class="toc level4"><a href="wuftp-10.html#wuftp-18">How to Set Up Guest FTP Users</a></p>
<p class="toc level4"><a href="wuftp-10.html#wuftp-18g">How to Set Up Anonymous FTP Users</a></p>
<p class="toc level4"><a href="wuftp-10.html#wuftp-18-a">How to Create the <tt>/etc/shells</tt> file</a></p>
<p class="toc level3 tocsp"><a href="wuftp-29.html">Customizing Message Files</a></p>
<p class="toc level4"><a href="wuftp-29.html#wuftp-31">How to Customize Message Files</a></p>
<p class="toc level4"><a href="wuftp-29.html#wuftp-37">How to Create Messages to Be Sent to Users</a></p>
<p class="toc level4"><a href="wuftp-29.html#wuftp-79">How to Configure the README Option</a></p>
<p class="toc level3 tocsp"><a href="wuftp-14.html">Controlling Access to Files on the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-14.html#wuftp-63a">How to Control File Access Commands</a></p>
<p class="toc level3 tocsp"><a href="wuftp-15.html">Controlling Uploads and Downloads on the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-15.html#wuftp-85">How to Control Uploads to the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-15.html#wuftp-173">How to Control Downloads to the FTP Server</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Virtual Hosting</a></p>
<p class="toc level4"><a href="#wuftp-179">How to Enable Limited Virtual Hosting</a></p>
<p class="toc level4"><a href="#wuftp-184">How to Enable Complete Virtual Hosting</a></p>
</div>
<p class="toc level3 tocsp"><a href="wuftp-189.html">Starting the FTP Server Automatically</a></p>
<p class="toc level4"><a href="wuftp-189.html#wuftp-191">How to Start an FTP Server Using SMF</a></p>
<p class="toc level4"><a href="wuftp-189.html#wuftp-197">How to Start a Standalone FTP Server in the Background</a></p>
<p class="toc level4"><a href="wuftp-189.html#egcoo">How to Start a Standalone FTP Server in the Foreground</a></p>
<p class="toc level3 tocsp"><a href="wuftp-203.html">Shutting Down the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-203.html#wuftp-204">How to Shut Down the FTP Server</a></p>
<p class="toc level3 tocsp"><a href="wuftp-210.html">Debugging the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-210.html#wuftp-proc-221">How to Check <tt>syslogd</tt> for FTP Server Messages</a></p>
<p class="toc level4"><a href="wuftp-210.html#wuftp-proc-211">How to Use <tt>greeting text</tt> to Verify <tt>ftpaccess</tt></a></p>
<p class="toc level4"><a href="wuftp-210.html#wuftp-proc-217">How to Check the Commands Executed by FTP Users</a></p>
<p class="toc level3 tocsp"><a href="egcom.html">Configuration Help for Busy Sites</a></p>
<p class="toc level2 tocsp"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="wuftp-15a2"></a><h3>Virtual Hosting</h3>
<p>Virtual hosting allows the FTP server to support multiple domains on the same
machine. Each virtual host requires a separate logical interface and IP address.</p><p>The FTP server supports two types of virtual hosting: <b>limited</b> and <b>complete</b>.
With limited virtual hosting, the same configuration files are used for all virtual
hosts. With complete virtual hosting, separate configuration files can be used for each
virtual host.</p>
<hr><p><b>Note - </b>By default, real and guest users are not allowed to log in
to virtual hosts. You can set the following <tt>ftpaccess</tt> directives to override the default.</p><pre>To allow access to specific users:
virtual <i>address</i> allow <i>username</i>
To deny access to anonymous users:
virtual <i>address</i> private <i>username</i></pre>
<hr>
<p>See <a href="http://docs.sun.com/doc/819-2251/ftpaccess-4?a=view"><tt>ftpaccess</tt>(4)</a> for further information.</p>

<a name="wuftp-179"></a><h4>How to Enable Limited Virtual Hosting</h4><p>Limited virtual hosting provides partial support for virtual FTP servers. You can enable
support for limited virtual hosting by specifying the virtual root directory. If required,
you can also set the following parameters for the virtual host in the
<tt>ftpaccess</tt> file:</p>
<ul><li><p><tt>banner</tt></p></li>
<li><p><tt>logfile</tt></p></li>
<li><p><tt>email</tt></p></li>
<li><p><tt>hostname</tt></p></li></ul>
<p>All directives in the <tt>ftpaccess</tt> file are shared globally across all virtual servers.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="wuftp-step-182"></a><b>Add the following entries to the <tt>ftpaccess</tt> file.</b><pre>virtual <i>address</i> root|banner|logfile <i>path</i>
virtual <i>address</i> hostname|email <i>string</i></pre><dl><dt><tt>virtual</tt></dt>
<dd><p>Keyword that is used to enable virtual server capabilities</p></dd>
<dt><i>address</i></dt>
<dd><p>IP address of the virtual server</p></dd>
<dt><tt>root</tt></dt>
<dd><p>The root directory of the virtual server</p></dd>
<dt><tt>banner</tt></dt>
<dd><p>Banner file that is displayed when a connection is made to the virtual server</p></dd>
<dt><tt>logfile</tt></dt>
<dd><p>Record of file transfers that are made to and from the virtual server</p></dd>
<dt><i>path</i></dt>
<dd><p>Variable that is used to specify the location of directories and files on the virtual server</p></dd>
<dt><tt>email</tt></dt>
<dd><p>Email address that is used in message files and in the <tt>HELP</tt> command</p></dd>
<dt><tt>hostname</tt></dt>
<dd><p>Name of the host that is shown in the greeting message or status command</p></dd>
<dt><i>string</i></dt>
<dd><p>Variable that is used to specify <tt>email</tt> or <tt>hostname</tt> parameters</p></dd>
</dl>

<hr><p><b>Note - </b>While it is possible to use <tt>hostname</tt> as the <i>address</i> of the
virtual server, you are strongly encouraged to use the IPv4 address instead. DNS
must be available when the FTP connection is received in order for <tt>hostname</tt>
to be matched. For an IPv6 host, use the host name rather than
the IPv6 address.</p>
<hr>
</li></ol>Example&nbsp;28-15 Enabling Limited Virtual Hosting in the <tt>ftpaccess</tt> File<pre>virtual 10.1.2.3 root    /var/ftp/virtual/ftp-serv
virtual 10.1.2.3 banner  /var/ftp/virtual/ftp-serv/banner.msg
virtual 10.1.2.3 logfile /var/log/ftp/virtual/ftp-serv/xferlog</pre><p>The preceding example sets the location of the <tt>root</tt> directory, <tt>banner</tt>, and
<tt>logfile</tt> on a virtual FTP server.</p><a name="egkcd"></a>Example&nbsp;28-16 Enabling Limited Virtual Hosting on the Command Line<p>The <a href="http://docs.sun.com/doc/819-2240/ftpaddhost-1m?a=view"><tt>ftpaddhost</tt>(1M)</a> script with the <tt>-l</tt> option is provided to configure limited virtual
hosts.</p><p>In the following example, <tt>ftpaddhost</tt> is run with <tt>-l</tt> <tt>-b</tt> <tt>-x</tt> options
to configure limited virtual hosting with a test banner and the logfile <tt>/var/ftp/virtual/10.1.2.3/xferlog</tt>
under a virtual root <tt>/var/ftp/virtual/10.1.2.3</tt>.</p><pre># <tt><b>ftpaddhost -l -b -x /var/ftp/virtual/10.1.2.3/xferlog</b></tt> \
<tt><b>/var/ftp/virtual/10.1.2.3</b></tt></pre>

<a name="wuftp-184"></a><h4>How to Enable Complete Virtual Hosting</h4><p>Complete virtual hosting allows separate configuration files for each virtual domain. To enable
complete support for virtual hosting on the FTP server, you can create or
modify the following FTP configuration files for specific domains: </p>
<ul><li><p><tt>ftpaccess</tt></p></li>
<li><p><tt>ftpusers</tt></p></li>
<li><p><tt>ftpgroups</tt></p></li>
<li><p><tt>ftphosts</tt></p></li>
<li><p><tt>ftpconversions</tt></p></li></ul>
<p>For further information, see <a href="http://docs.sun.com/doc/819-2251/ftpaccess-4?a=view"><tt>ftpaccess</tt>(4)</a>, <a href="http://docs.sun.com/doc/819-2251/ftpusers-4?a=view"><tt>ftpusers</tt>(4)</a>, <a href="http://docs.sun.com/doc/819-2251/ftpgroups-4?a=view"><tt>ftpgroups</tt>(4)</a>, <a href="http://docs.sun.com/doc/819-2251/ftphosts-4?a=view"><tt>ftphosts</tt>(4)</a>, and <a href="http://docs.sun.com/doc/819-2251/ftpconversions-4?a=view"><tt>ftpconversions</tt>(4)</a>.</p>
<hr><p><b>Note - </b>If separate versions of the configuration files are unavailable, master versions of the
files in the <tt>/etc/ftpd</tt> directory are used.</p>
<hr>
<ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="wuftp-step-187"></a><b>Add the following entry to the <tt>/etc/ftpd/ftpservers</tt> file.</b><pre><i>address</i> /<i>config-file-dir</i></pre><dl><dt><i>address</i></dt>
<dd><p>IP address of the virtual server</p></dd>
<dt><i>config-file-dir</i></dt>
<dd><p>Directory that contains the configuration files that are customized for the virtual host</p></dd>
</dl>

<hr><p><b>Note - </b>While it is possible to use <tt>hostname</tt> as the <i>address</i> of the
virtual server, you are strongly encouraged to use the IPv4 address instead. DNS
must be available when the FTP connection is received in order for <tt>hostname</tt>
to be matched. For an IPv6 host, use the host name rather than
the IPv6 address.</p>
<hr>
</li>
<li><a name="wuftp-step-230"></a><b>To create a customized version of an FTP server configuration file for the
virtual host, copy the master version of the file from <tt>/etc/ftpd</tt> to the
<tt>/config-file-dir</tt> directory.</b><p>For further information, see <a href="http://docs.sun.com/doc/819-2251/ftpservers-4?a=view"><tt>ftpservers</tt>(4)</a>.</p></li></ol>Example&nbsp;28-17 Enabling Complete Virtual Hosting in the <tt>ftpservers</tt> file<pre>#
# FTP Server virtual hosting configuration file
#

10.1.2.3 /net/inet/virtual/somedomain/
10.1.2.4 /net/inet/virtual/anotherdomain/</pre><p>The preceding example specifies the IP addresses for two different domains on the
virtual server.</p><a name="egkax"></a>Example&nbsp;28-18 Enabling Complete Virtual Hosting from the Command Line<p>The <a href="http://docs.sun.com/doc/819-2240/ftpaddhost-1m?a=view"><tt>ftpaddhost</tt>(1M)</a> script with the <tt>-c</tt> option is provided to configure complete virtual
hosts.</p><p>In the following example, <tt>ftpaddhost</tt> is run with <tt>-c</tt> <tt>-b</tt> <tt>-x</tt> options
to configure complete virtual hosting with a test banner and the logfile <tt>/var/ftp/virtual/10.1.2.3/xferlog</tt>
under a virtual root <tt>/var/ftp/virtual/10.1.2.3</tt>.</p><pre># <tt><b>ftpaddhost -c -b -x /var/ftp/virtual/10.1.2.3/xferlog</b></tt> \
<tt><b>/var/ftp/virtual/10.1.2.3</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wuftp-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wuftp-189.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

