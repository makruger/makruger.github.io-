<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Defining the Conversation on the Dial-up Link - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ppp.reference-65.html">Previous</a>
             </td>
             <td align="right">
                 <a href="pppsvrconfig.reference-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level3"><a href="pppsvrconfig.reference-65.html">Using PPP Options in Files and on the Command Line</a></p>
<p class="toc level3"><a href="enmzz.html">Configuring User-Specific Options</a></p>
<p class="toc level3"><a href="pppsvrconfig.reference-45.html">Specifying Information for Communicating With the Dial-in Server</a></p>
<p class="toc level3"><a href="ppp.reference-65.html">Configuring Modem Speed for a Dial-up Link</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Defining the Conversation on the Dial-up Link</a></p>
<p class="toc level4"><a href="#ppp.reference-2">How to Invoke a Chat Script (Task)</a></p>
<p class="toc level4"><a href="#ppp.reference-3">How to Create an Executable Chat Program</a></p>
</div>
<p class="toc level3 tocsp"><a href="pppsvrconfig.reference-17.html">Authenticating Callers on a Link</a></p>
<p class="toc level3"><a href="ppp.reference-39.html">Creating an IP Addressing Scheme for Callers</a></p>
<p class="toc level3"><a href="ppp.reference-45.html">Creating PPPoE Tunnels for DSL Support</a></p>
<p class="toc level2 tocsp"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="pppsvrconfig.reference-66"></a><h3>Defining the Conversation on the Dial-up Link</h3>
<p><a name="indexterm-2001"></a><a name="indexterm-2002"></a>The dial-out machine and its remote peer communicate across the PPP link by negotiating
and exchanging various instructions. When configuring a dial-out machine, you need to determine what instructions
are required by the local and remote modems. Then you create a file that
is called a chat script that contains these instructions. This section discusses information about configuring
modems and creating chat scripts.</p>

<a name="pppsvrconfig.reference-11"></a><h4>Contents of the Chat Script</h4>
<p><a name="indexterm-2003"></a>Each remote peer that the dial-out machine needs to connect to probably requires its
own chat script.</p>
<hr><p><b>Note - </b>Chat scripts are typically used only on dial-up links. Leased-line links do not use
chat scripts unless the link includes an asynchronous interface  that requires startup configuration.</p>
<hr>
<p>The contents of the chat script are determined by the requirements of your modem
model or ISDN TA, and the remote peer. These contents appear as a set
of expect-send strings.   The dial-out machine and its remote peers exchange the
strings as part of the communications initiation process. </p><p>An <b>expect</b> string contains characters that the dial-out host machine expects to receive from the
remote peer to initiate conversation. A <b>send</b> string contains characters that the dial-out machine sends
to the remote peer after receiving the expect string.</p><p>Information in the chat script usually includes the following:</p>
<ul><li><p>Modem commands, often referred to as <b>AT commands</b>, which enable the modem to transmit data over the telephone</p></li>
<li><p>Phone number of the target peer</p><p>This phone number might be the number that is required by your ISP, or a dial-in server at a corporate site, or an individual machine.</p></li>
<li><p>Time-out value, if required</p></li>
<li><p>Login sequence that is expected from the remote peer</p></li>
<li><p>Login sequence that is sent by the dial-out machine</p></li></ul>


<a name="pppsvrconfig.reference-12"></a><h4>Chat Script Examples</h4>
<p>This section contains chat scripts that you can use as a reference for creating
your own chat scripts. The modem manufacturer's guide and information from your ISP and
other target hosts contain chat requirements for the modem and your target peers. In
addition, numerous PPP web sites have sample chat scripts. </p>

<a name="pppsvrconfig.reference-67"></a><h5>Basic Modem Chat Script</h5>
<a name="indexterm-2004"></a><a name="indexterm-2005"></a><a name="indexterm-2006"></a><p>The following is a basic chat script that you can use as a
template for creating your own chat scripts.</p><pre>ABORT   BUSY
ABORT   'NO CARRIER'
REPORT  CONNECT
TIMEOUT 10
"" AT&amp;F1M0&amp;M5S2=255
SAY     "Calling myserver\n"
TIMEOUT 60
OK      "ATDT1-123-555-1212"
ogin: pppuser
ssword: \q\U
% pppd</pre><p>The next table describes the contents of the chat script.</p><table><col width="38.66*"><col width="61.34*"><tr><th align="left" valign="top" scope="column"><p>Script Contents</p></th>
<th align="left" valign="top" scope="column"><p>Explanation</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT BUSY</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if
the modem receives this message from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT 'NO CARRIER'</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem reports <tt>ABORT 'NO CARRIER'</tt>
when dialing. The cause for this message is usually a dialing or modem negotiation failure.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>REPORT CONNECT</tt></p></td>
<td align="left" valign="top" scope="row"><p>Gather
the <tt>CONNECT</tt> string from the modem. Print the string.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 10</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set initial timeout to 10
seconds. The modem's response should be immediate.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>"" AT&amp;F1M0&amp;M5S2=255</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>M0</tt> &ndash; Turn off the speaker during connect.</p><p><tt>&amp;M5</tt>
&ndash; Make the modem require error control. </p><p><tt>S2=255</tt> &ndash; Disable the TIES &ldquo;+++&rdquo; break sequence.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SAY "Calling myserver\n"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display
the message <tt>Calling myserver</tt> on the local machine.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 60</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reset the timeout to 60 seconds to
allow more time for link negotiation.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>OK "ATDT1-123-555-1212"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Call the remote peer by using the phone
number 123-555-1212.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ogin: pppuser</tt></p></td>
<td align="left" valign="top" scope="row"><p>Log in to the peer by using UNIX-style login. Supply the user name
<tt>pppuser</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ssword: \q\U</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>\q</tt> &ndash; Do not log if debugging with the <tt>-v</tt> option.</p><p><tt>\U</tt> &ndash; Insert in
this location the contents of the string that follows <tt>-U</tt>, which is specified on
the command line.   Usually, the string contains the password.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>% pppd</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for the %
shell prompt, and run the <tt>pppd</tt> command.</p></td>
</tr>
</table>

<a name="ppp.reference-20"></a><h5><tt>/etc/ppp/myisp-chat.tmpl</tt> Chat Script Template</h5>
<a name="indexterm-2007"></a><a name="indexterm-2008"></a><a name="indexterm-2009"></a><a name="indexterm-2010"></a><p>Solaris PPP 4.0 includes the <tt>/etc/ppp/myisp-chat.tmpl</tt>, which you can modify for use at
your site. <tt>/etc/ppp/myisp-chat.tmpl</tt> is similar to the basic modem chat script except that the template
does not include a login sequence.</p><pre>ABORT   BUSY
ABORT   'NO CARRIER'
REPORT  CONNECT
TIMEOUT 10
""      "AT&amp;F1"
OK      "AT&amp;C1&amp;D2"
SAY     "Calling myisp\n"
TIMEOUT 60
OK      "ATDT1-123-555-1212"
CONNECT \c</pre><table><col width="38.91*"><col width="61.09*"><tr><th align="left" valign="top" scope="column"><p>Script Contents</p></th>
<th align="left" valign="top" scope="column"><p>Explanation</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT BUSY</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem receives this message
from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT 'NO CARRIER</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem reports <tt>ABORT 'NO CARRIER'</tt> when dialing. The cause for
this message is usually a dialing or modem negotiation failure.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>REPORT CONNECT</tt></p></td>
<td align="left" valign="top" scope="row"><p>Gather the <tt>CONNECT</tt> string from the
modem. Print the string.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 10</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set initial timeout to 10 seconds. The modem's response should
be immediate.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>"" "AT&amp;F1"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reset the modem to factory defaults.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>OK "AT&amp;C1&amp;D2"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reset the modem so that, for &amp;C1,
DCD from the modem follows carrier. If the remote side hangs up the phone
for some reason, then the DCD drops.  </p><p>For &amp;D2, DTR high-to-low transition causes
the modem to go &ldquo;on-hook&rdquo; or  hang up.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SAY "Calling myisp\n"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display the message &ldquo;Calling myisp&rdquo; on
the local machine.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 60</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reset the timeout to 60 seconds to allow more time for
link negotiation.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>OK "ATDT1-123-555-1212"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Call the remote peer by using the phone number 123-555-1212.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>CONNECT \c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for the
<tt>CONNECT</tt> message from the opposite peer's modem.</p></td>
</tr>
</table>

<a name="pppsvrconfig.reference-13"></a><h5>Modem Chat Script for Calling an ISP</h5>
<a name="indexterm-2011"></a><a name="indexterm-2012"></a><a name="indexterm-2013"></a><p>Use the next chat script as a template for calling an ISP from a
dial-out machine with a U.S. Robotics Courier modem.</p><pre>ABORT   BUSY
ABORT   'NO CARRIER'
REPORT  CONNECT
TIMEOUT 10
"" AT&amp;F1M0&amp;M5S2=255
SAY     "Calling myisp\n"
TIMEOUT 60
OK      "ATDT1-123-555-1212"
CONNECT \c
\r \d\c
SAY "Connected; running PPP\n"</pre><p>The following table describes the contents of the chat script.</p><table><col width="38.66*"><col width="61.34*"><tr><th align="left" valign="top" scope="column"><p>Script Contents</p></th>
<th align="left" valign="top" scope="column"><p>Explanation</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT BUSY</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if
the modem receives this message from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT 'NO CARRIER'</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem receives this
message from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>REPORT CONNECT</tt></p></td>
<td align="left" valign="top" scope="row"><p>Gather the <tt>CONNECT</tt> string from the modem.  Print the
string.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 10</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set initial timeout to 10 seconds. The modem's response should be immediate.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>"" AT&amp;F1M0M0M0M0&amp;M5S2=255</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>M0</tt> &ndash; Turn
off the speaker during connect.</p><p><tt>&amp;M5</tt> &ndash; Make the modem require error control. </p><p><tt>S2=255</tt>
&ndash; Disable the TIES &ldquo;+++&rdquo; break sequence.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SAY "Calling myisp\n"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display the message <tt>Calling myisp</tt> on the local machine.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 60</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reset
the timeout to 60 seconds to allow more time for link negotiation.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>OK "ATDT1-123-555-1212"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Call the
remote peer by using the phone number 123-555-1212.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>CONNECT \c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for the <tt>CONNECT</tt> message from the
opposite peer's modem.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>\r \d\c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait until the end of the <tt>CONNECT</tt> message.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>SAY &ldquo;Connected; running PPP\n&rdquo;</p></td>
<td align="left" valign="top" scope="row"><p>Display
the informative message <tt>Connected; running PPP</tt> on the local machine.</p></td>
</tr>
</table>

<a name="pppsvrconfig.reference-14"></a><h5>Basic Chat Script Enhanced for a UNIX-Style Login</h5>
<a name="indexterm-2014"></a><a name="indexterm-2015"></a><a name="indexterm-2016"></a><p>The next chat script is a basic script that is enhanced for calling a
remote Solaris peer or other UNIX-type peer. This chat script is used in
<a href="pppsvrconfig.dialin-52.html#pppsvrconfig.dialin-50">How to Create the Instructions for Calling a Peer</a>.</p><pre>        SAY "Calling the peer\n"
        TIMEOUT 10
        ABORT BUSY
        ABORT 'NO CARRIER'
        ABORT ERROR
        REPORT CONNECT
        "" AT&amp;F1&amp;M5S2=255
        TIMEOUT 60
        OK ATDT1-123-555-1234
        CONNECT \c
        SAY "Connected; logging in.\n"
        TIMEOUT 5
        ogin:--ogin: pppuser
        TIMEOUT 20
        ABORT 'ogin incorrect'
        ssword: \qmypassword
        "% " \c
        SAY "Logged in.  Starting PPP on peer system.\n" 
        ABORT 'not found'
        "" "exec pppd"
        ~ \c</pre><p>The following table explains the parameters of the chat script.</p><table><col width="48.92*"><col width="51.08*"><tr><th align="left" valign="top" scope="column"><p>Script Contents</p></th>
<th align="left" valign="top" scope="column"><p>Explanation</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 10</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set initial timeout
to 10 seconds. The modem's response should be immediate.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT BUSY</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem receives
this message from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT 'NO CARRIER'</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem receives this message from
the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT ERROR</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem receives this message from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>REPORT CONNECT</tt></p></td>
<td align="left" valign="top" scope="row"><p>Gather the
<tt>CONNECT</tt> string from the modem. Print the string.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>"" AT&amp;F1&amp;M5S2=255</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>&amp;M5</tt> &ndash; Make the modem require error
control. </p><p><tt>S2=255</tt> &ndash; Disable the TIES &ldquo;+++&rdquo; break sequence.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 60</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reset the timeout to 60 seconds to
allow more time for link negotiation.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>OK ATDT1-123-555-1234</tt></p></td>
<td align="left" valign="top" scope="row"><p>Call the remote peer by using the phone
number 123-555-1212.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>CONNECT \c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for the <tt>CONNECT</tt> message from the opposite peer's modem.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SAY "Connected; logging in.\n"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display the informative
message <tt>Connected; logging in</tt> to give the user status.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 5</tt></p></td>
<td align="left" valign="top" scope="row"><p>Change the timeout to enable quick display of
the login prompt.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ogin:--ogin: pppuser</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for the login prompt. If the prompt is not received,
send a RETURN and wait. Then, send the user name <tt>pppuser</tt> to the peer. The
sequence that follows is referred to by most ISPs as the PAP login. 
However, the PAP login is not related in any way to PAP authentication.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 20</tt></p></td>
<td align="left" valign="top" scope="row"><p>Change
the timeout to 20 seconds to allow for slow password verification.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ssword: \qmysecrethere</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for the
password prompt from the peer. When the prompt is received, send the password <tt>\qmysecrethere</tt>.
The <tt>\q</tt> prevents the password from being written to the system log files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>"% " \c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for
a shell prompt from the peer. The chat script uses the C shell. Change
this value if the user prefers to log in with a different shell.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SAY "Logged in. Starting PPP on peer system.\n"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display the
informative message <tt>Logged in. Starting PPP on peer system</tt> to give the user status.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT 'not found'</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort the transmission if the shell encounters
errors.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>"" "exec pppd"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Start <tt>pppd</tt> on the peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>~ \c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait for PPP to start on the peer.</p></td>
</tr>
</table><p>Starting PPP right after the <tt>CONNECT \c</tt> is often called a <b>PAP login</b> by ISPs, though
the PAP login is actually not part of PAP authentication.</p><p>The phrase <tt>ogin:--ogin: pppuser</tt> instructs the modem to send the user name <tt>pppuser</tt> in response
to the login prompt  from the dial-in server. <tt>pppuser</tt> is a special PPP
user account name that was created for remote <tt>user1</tt> on the dial-in server. For
instructions about creating PPP user accounts on a dial-in server, refer to <a href="pppsvrconfig.dialin-54.html#ppp.dialin-10">How to Configure Users of the Dial-in Server</a>.</p>

<a name="pppsvrconfig.reference-15"></a><h5>Chat Script for External ISDN TA</h5>
<a name="indexterm-2017"></a><a name="indexterm-2018"></a><a name="indexterm-2019"></a><a name="indexterm-2020"></a><p>The following chat script is for calling from a dial-out machine with a ZyXEL
omni.net. ISDN TA.</p><pre>        SAY "Calling the peer\n"
        TIMEOUT 10
        ABORT BUSY
        ABORT 'NO CARRIER'
        ABORT ERROR
        REPORT CONNECT
        "" AT&amp;FB40S83.7=1&amp;K44&amp;J3X7S61.3=1S0=0S2=255
        OK ATDI18882638234
        CONNECT \c
        \r \d\c
        SAY "Connected; running PPP\n"</pre><p>The following table explains the parameters of the chat script.</p><table><col width="53.04*"><col width="46.96*"><tr><th align="left" valign="top" scope="column"><p>Script Contents</p></th>
<th align="left" valign="top" scope="column"><p>Explanation</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SAY "Calling the peer"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display this message
on the screen of the dial-out machine.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>TIMEOUT 10</tt></p></td>
<td align="left" valign="top" scope="row"><p>Set the initial timeout to 10 seconds.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT BUSY</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission
if the modem receives this message from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT 'NO CARRIER'</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem receives
this message from the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ABORT ERROR</tt></p></td>
<td align="left" valign="top" scope="row"><p>Abort transmission if the modem receives this message from
the opposite peer.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>REPORT CONNECT</tt> </p></td>
<td align="left" valign="top" scope="row"><p>Gather the <tt>CONNECT</tt> string from the modem. Print the string.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>"" AT&amp;FB40S83.7=1&amp;K44&amp;J3X7S61.3=1S0=0S2=255</tt></p></td>
<td align="left" valign="top" scope="row"><p>The letters
in this line have the following meaning:</p>
<ul><li><p><tt>&amp;F</tt> &ndash; Use factory default</p></li>
<li><p><tt>B40</tt> &ndash; Do asynchronous PPP conversion</p></li>
<li><p><tt>S83.7=1</tt> &ndash; Use data over speech bearer</p></li>
<li><p><tt>&amp;K44</tt> &ndash; Enable CCP compression</p></li>
<li><p><tt>&amp;J3</tt> &ndash; Enable MP</p></li>
<li><p><tt>X7</tt> &ndash; Report DCE side rates</p></li>
<li><p><tt>S61.3=1</tt> &ndash; Use packet fragmentation</p></li>
<li><p><tt>S0=0</tt> &ndash; No auto answer</p></li>
<li><p><tt>S2=255</tt> &ndash; Disable TIES escape</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>OK ATDI18882638234</tt></p></td>
<td align="left" valign="top" scope="row"><p>Make an ISDN call. For multilink, the second
call is placed to the same telephone number, which is normally what is required
by most ISPs. If the remote peer requires a different second phone number, append
&ldquo;+<i>nnnn</i>.&rdquo;. <i>nnnn</i> represents the second phone number.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>CONNECT \c</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-2021"></a><a name="indexterm-2022"></a>Wait for the <tt>CONNECT</tt> message from the
opposite peer's modem.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>\r \d\c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Wait until the end of the <tt>CONNECT</tt> message.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>SAY "Connected; running PPP\n"</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display this message on
the screen of the dial-out machine.</p></td>
</tr>
</table><p>Refer to the <a href="http://docs.sun.com/doc/819-2240/chat-1m?a=view"><tt>chat</tt>(1M)</a> man page for descriptions of options and other detailed information
about the chat script. For an explanation of expect-send strings, refer to <a href="uucpov-13.html#uucpov-25">Chat-Script Field in <tt>/etc/uucp/Systems</tt> File</a>. </p>

<a name="pppsvrconfig.reference-54"></a><h5>For More Chat Script Examples</h5>
<a name="indexterm-2023"></a><a name="indexterm-2024"></a><p>A number of web sites offer sample chat scripts and assistance in creating the
chat scripts. For example, see <a href="http://ppp.samba.org/ppp/index.html">http://ppp.samba.org/ppp/index.html</a>.</p>

<a name="pppsvrconfig.reference-68"></a><h4>Invoking the Chat Script</h4>
<p><a name="indexterm-2025"></a><a name="indexterm-2026"></a>You call chat scripts by using the <tt>connect</tt> option. You can use <tt>connect "chat ..."</tt> in
any PPP configuration file or on the command line. </p><p>Chat scripts are not executable, but the program that is invoked by <tt>connect</tt>
must be executable. You might use the chat utility as the program to be
invoked by <tt>connect</tt>. In this instance, if you store the chat script in
an external file through the <tt>-f</tt> option, then your chat script file is not executable.</p><p><a name="indexterm-2027"></a>The <tt>chat</tt> program that is described in <tt>chat</tt>(1m) executes the actual chat script. The
<tt>pppd</tt> daemon invokes the <tt>chat</tt> program whenever <tt>pppd</tt> encounters the <tt>connect "chat ..."</tt> option.</p>
<hr><p><b>Note - </b>You can use any external program, such as <tt>Perl</tt> or <tt>Tcl</tt>, to create
advanced chat scripts. Solaris PPP 4.0 provides the <tt>chat</tt> utility as a convenience.</p>
<hr>


<a name="ppp.reference-2"></a><h4>How to Invoke a Chat Script (Task)</h4><a name="indexterm-2028"></a><ol>
<li><a name="pppsvrconfig.reference-step-41"></a><b>Create the chat script as an ASCII file. </b></li>
<li><a name="pppsvrconfig.reference-step-40"></a><b>Invoke the chat script in any PPP configuration file by using the following syntax:</b><pre>connect 'chat  -f <i>/etc/ppp/chatfile</i>'</pre><p>The <tt>-f</tt> flag indicates that a file name is to follow. <i>/etc/ppp/chatfile</i> represents the
name of the chat file.</p></li>
<li><a name="pppsvrconfig.reference-step-15"></a><b>Give read permission for the external chat file to the user who  runs
the <tt>pppd</tt> command.</b>
<hr><p><b>Caution - </b>The chat program always runs with the user's privileges, even if the <tt>connect 'chat ...'</tt> option is
invoked from a privileged source. Thus, a separate chat file that is read with
the <tt>-f</tt> option must be readable by the invoking user. This privilege can be
a security problem if the chat script contains passwords or other sensitive information.</p>
<hr>
</li></ol>Example&nbsp;22-1 Inline Chat Script<p>You can place the entire chat script conversation on a single line, similar to
the following:</p><pre>connect 'chat "" "AT&amp;F1" OK ATDT5551212 CONNECT "\c"'</pre><p>The complete chat script  follows the <tt>chat</tt> keyword. The script terminates with <tt>"\c"'</tt>.
You use this form in any PPP configuration file or on the command line
as an argument to <tt>pppd</tt>.</p><h6><h6>More Information</h6>Chat Script in an External File<p>If the chat script that is needed for a particular peer is long
or complicated, consider creating the script as a separate file. External chat files are easy
to maintain and to document. You can add comments to the chat file by
preceding the comments  with the hash (#) sign.</p><p>The procedure <a href="pppsvrconfig.dialin-52.html#pppsvrconfig.dialin-50">How to Create the Instructions for Calling a Peer</a> shows the use of a chat script that is contained
in an external file.</p></h6>

<a name="ppp.reference-43"></a><h4>Creating a Chat File That Is Executable</h4>
<p><a name="indexterm-2029"></a>You can create a chat file that is an executable script to be run
automatically when the dial-up link is initiated. Thus, you can run additional commands during
link initiation, such as <tt>stty</tt> for parity settings, besides the commands that are contained in
a traditional chat script.</p><p>This executable chat script logs in to an old-style UNIX system that requires 7
bits with even parity.  The system then changes to 8 bits with no
parity when running PPP.</p><pre>#!/bin/sh
chat "" "AT&amp;F1" OK "ATDT555-1212" CONNECT "\c"
stty evenp
chat ogin: pppuser ssword: "\q\U" % "exec pppd"
stty -evenp</pre>

<a name="ppp.reference-3"></a><h4>How to Create an Executable Chat Program</h4><ol>
<li><a name="ppp.reference-step-34"></a><b>Use your text editor to create an executable chat program, such as the previous example.</b></li>
<li><a name="ppp.reference-step-35"></a><b>Make the chat program executable.</b><pre># chmod +x /etc/ppp/<i>chatprogram</i></pre></li>
<li><a name="ppp.reference-step-36"></a><b>Invoke the chat program.</b><pre>connect /etc/ppp/<i>chatprogram</i></pre><p>Chat programs do not have to be located within the <tt>/etc/ppp</tt> file system. You
can store chat programs in any location.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ppp.reference-65.html">Previous</a>
             </td>
             <td align="right">
                 <a href="pppsvrconfig.reference-17.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

