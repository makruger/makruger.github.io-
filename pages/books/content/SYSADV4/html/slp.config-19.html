<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Modifying Timeouts on SLP Discovery Requests - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="slp.config-14.html">Previous</a>
             </td>
             <td align="right">
                 <a href="slp.config-22.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level3"><a href="slp.config-1a.html">Configuring SLP Properties</a></p>
<p class="toc level4"><a href="slp.config-1a.html#ch.configuration-155">How to Change Your SLP Configuration</a></p>
<p class="toc level3 tocsp"><a href="slp.config-8.html">Modifying DA Advertising and Discovery Frequency</a></p>
<p class="toc level4"><a href="slp.config-8.html#slp.config-4">How to Limit UAs and SAs to Statically Configured DAs</a></p>
<p class="toc level4"><a href="slp.config-8.html#wuftp-63">How to Configure DA Discovery for Dial-up Networks</a></p>
<p class="toc level4"><a href="slp.config-8.html#slp.config-3">How to Configure DA Heartbeat for Frequent Partitions</a></p>
<p class="toc level3 tocsp"><a href="slp.config-14.html">Accommodating Different Network Media, Topologies, or Configurations</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-rsar">How to Reduce SA Reregistrations</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-htcmttlp">How to Configure the Multicast Time-to-Live Property</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-28">How to Configure the Packet Size</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-36">How to Configure Broadcast-Only Routing</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Modifying Timeouts on SLP Discovery Requests</a></p>
<p class="toc level4"><a href="#slp.config-44">How to Change Default Timeouts</a></p>
<p class="toc level4"><a href="#slp.config-53">How to Configure the Random-Wait Bound</a></p>
</div>
<p class="toc level3 tocsp"><a href="slp.config-22.html">Deploying Scopes</a></p>
<p class="toc level4"><a href="slp.config-22.html#slp.config-62">How to Configure Scopes</a></p>
<p class="toc level3 tocsp"><a href="slp.config-dda.html">Deploying DAs</a></p>
<p class="toc level4"><a href="slp.config-dda.html#slp.config-70">How to Deploy DAs</a></p>
<p class="toc level3 tocsp"><a href="slp.config-6.html">SLP and Multihoming</a></p>
<p class="toc level2 tocsp"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="slp.config-19"></a><h3>Modifying Timeouts on SLP Discovery Requests</h3>
<p><a name="indexterm-1017"></a><a name="indexterm-1018"></a><a name="indexterm-1019"></a>Two situations might require that you change the timeouts for SLP discovery requests:</p>
<ul><li><p>If the SLP agents are separated by multiple subnets, dial-up lines, or other WANs, the network latency can be high enough that the default timeouts are insufficient for a request or registration to be completed. Conversely, if your network is low latency, you can improve performance by decreasing the timeouts.</p></li>
<li><p>If the network is subject to heavy traffic or a high collision rates, the maximum period that SAs and UAs need to wait before sending a message might be insufficient to assure collision-free transactions.</p></li></ul>


<a name="slp.config-20"></a><h4>Changing Default Timeouts</h4>
<p><a name="indexterm-1020"></a><a name="indexterm-1021"></a>High network latency can cause UAs and SAs to time out before a
response returns for requests and registrations. Latency can be a problem if a
UA is separated from an SA, or if both a UA and
an SA are separated from a DA;either by multiple subnets, a dial-up line,
or a WAN. You can determine if latency is a problem by checking
whether SLP requests are failing because of timeouts on UA and SA requests
and registrations. You can also use the <tt>ping</tt> command to measure the
actual latency.</p><p>The following table lists configuration properties that control timeouts. You can use the
procedures in this section to modify these properties.</p><a name="slp.config-tbl-cdto"></a><h6>Table&nbsp;9-4 Time-out Properties</h6><table><col width="89.39*"><col width="94.97*"><tr><th align="left" valign="top" scope="column"><p>Property</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>net.slp.multicastTimeouts</tt></p><p><tt>net.slp.DADiscoveryTimeouts</tt></p><p><tt>net.slp.datagramTimeouts</tt></p></td>
<td align="left" valign="top" scope="row"><p>The properties that control timeouts
for repeated multicast and unicast UDP message transmissions before the transmission is abandoned.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>net.slp.multicastMaximumWait</tt></p></td>
<td align="left" valign="top" scope="row"><p>The
property that controls the maximum amount of time a multicast message is transmitted
before it is abandoned.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>net.slp.datagramTimeouts</tt></p></td>
<td align="left" valign="top" scope="row"><p>The upper bound of a DA timeout that is
specified by the sum of values that are listed for this property. A
UDP datagram is repeatedly sent to a DA until a response is received
or the time-out bound is reached.</p></td>
</tr>
</table><p><a name="indexterm-1022"></a><a name="indexterm-1023"></a>If frequent timeouts are occurring during multicast service discovery or DA discovery, increase
the <tt>net.slp.multicastMaximumWait</tt> property from the default value of 15000 milliseconds (15 seconds). Increasing
the maximum wait period allows more time for requests on high latency networks to
be completed. After you change the <tt>net.slp.multicastMaximumWait</tt>, you should also modify the <tt>net.slp.multicastTimeouts</tt>
and <tt>net.slp.DADiscoveryTimeouts</tt>. The sum of the timeout values for these properties equals the
<tt>net.slp.multicastMaximumWait</tt> value.</p>

<a name="slp.config-44"></a><h4>How to Change Default Timeouts</h4><p>Use the following procedure to change the SLP properties that control timeouts.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="slp.config-step-47"></a><b>Stop <tt>slpd</tt> and all SLP activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li>
<li><a name="slp.config-step-48"></a><b><a name="indexterm-1024"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file before you change the configuration settings.</b></li>
<li><a name="slp.config-step-49"></a><b>Change the <tt>net.slp.multicastMaximumWait</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.multicastMaximumWait</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>A 32&ndash;bit integer that lists the sum of the values that are set for <tt>net.slp.multicastTimeouts</tt> and <tt>net.slp.DADiscoveryTimeouts</tt></p><p>Default Value=15000 milliseconds (15 seconds)</p><p>Range of Values=1000 to 60000 milliseconds</p></dd>
</dl>
<p>For example, if you determine that multicast requests require 20 seconds (20000 milliseconds),
you would adjust the values that are listed for <tt>net.slp.multicastTimeouts</tt> and the
<tt>net.slp.DADiscoveryTimeouts</tt> properties to equal 20000 milliseconds.</p><pre>net.slp.multicastMaximumWait=20000
net.slp.multicastTimeouts=2000,5000,6000,7000
net.slp.DADiscoveryTimeouts=3000,3000,6000,8000</pre></li>
<li><a name="slp.config-step-50"></a><b>If necessary, change the <tt>net.slp.datagramTimeouts</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.datagramTimeouts</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>A list of 32&ndash;bit integers that specify timeouts, in milliseconds, to implement unicast datagram transmission to DAs</p><p>Default=3000,3000,3000</p></dd>
</dl>
<p>For example, you can increase the datagram timeout to 20000 milliseconds to avoid
frequent timeouts.</p><pre>net.slp.datagramTimeouts=2000,5000,6000,7000</pre><p>In high-performance networks, you can reduce the time-out bound for multicast and unicast
UDP datagram transmission. When you reduce the time-out bound, you decrease latency that
is required to satisfy SLP requests.</p></li>
<li><a name="slp.config-step-51"></a><b>Save your changes and close the file.</b></li>
<li><a name="slp.config-step-52"></a><b>Restart <tt>slpd</tt> to activate your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol>

<a name="slp.config-21"></a><h4>Configuring the Random-Wait Bound</h4>
<p><a name="indexterm-1025"></a><a name="indexterm-1026"></a><a name="indexterm-1027"></a><a name="indexterm-1028"></a>In networks with heavy traffic or a high collision rate, communication with a
DA might be affected. When collision rates are high, the sending agent must
retransmit the UDP datagram. You can determine if retransmission is occurring by using
<tt>snoop</tt> to monitor traffic on a network of hosts that are running <tt>slpd</tt>
as an SA server and a host that is running <tt>slpd</tt> as a
DA. If multiple service registration messages  for the same service appear in
the <tt>snoop</tt> trace from the host that is running <tt>slpd</tt> as an SA
server, you might have notice collisions.</p><p><a name="indexterm-1029"></a>Collisions can be particularly troubling at boot time. When a DA first starts,
it sends unsolicited advertisements and the SAs respond with registrations. SLP requires the
SAs to wait for a random amount of time after receiving a DA
advertisement before responding. The random-wait bound is uniformly distributed with a maximum value
that is controlled by the <tt>net.slp.randomWaitBound</tt>. The default random-wait bound is 1000
milliseconds (1 second).</p>

<a name="slp.config-53"></a><h4>How to Configure the Random-Wait Bound</h4><p>Use the following procedure to change the <tt>net.slp.RandomWaitBound</tt> property in the <tt>slp.conf</tt> file.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="slp.config-step-56"></a><b>Stop <tt>slpd</tt> and all SLP activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li>
<li><a name="slp.config-step-57"></a><b><a name="indexterm-1030"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file before you change the configuration settings.</b></li>
<li><a name="slp.config-step-58z"></a><b>Change the <tt>net.slp.RandomWaitBound</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.RandomWaitBound</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>The upper bound for calculating the random-wait time before attempting to contact a DA</p><p>Default Value=1000 milliseconds (1 second)</p><p>Range of Values=1000 to 3000 milliseconds</p></dd>
</dl>
<p>For example, you can lengthen the maximum wait to 2000 milliseconds (2 seconds).</p><pre>net.slp.randomWaitBound=2000</pre><p>When you lengthen the random-wait bound, a longer delay in registration occurs. SAs
can complete registrations with newly discovered DAs more slowly to avoid collisions and
timeouts.</p></li>
<li><a name="slp.config-step-59"></a><b>If necessary, change the <tt>net.slp.datagramTimeouts</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.datgramTimeouts</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>A list of 32&ndash;bit integers that specify timeouts, in milliseconds, to implement unicast datagram transmission to DAs</p><p>Default=3000,3000,3000</p></dd>
</dl>
<p>For example, you can increase the datagram timeout to 20000 milliseconds to avoid
frequent timeouts.</p><pre>net.slp.datagramTimeouts=2000,5000,6000,7000</pre><p>In high-performance networks, you can reduce the time-out bound for multicast and unicast
UDP datagram transmission. This setting reduces the amount of latency in satisfying SLP
requests.</p></li>
<li><a name="slp.config-step-60"></a><b>Save your changes and close the file.</b></li>
<li><a name="slp.config-step-61"></a><b>Restart <tt>slpd</tt> to activate your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="slp.config-14.html">Previous</a>
             </td>
             <td align="right">
                 <a href="slp.config-22.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

