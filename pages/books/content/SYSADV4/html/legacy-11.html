<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Advertising Legacy Services - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="legacy-8.html">Previous</a>
             </td>
             <td align="right">
                 <a href="legacy-16.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level3"><a href="legacy-8.html">When to Advertise Legacy Services</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Advertising Legacy Services</a></p>
<p class="toc level4"><a href="#slp.setupprproc">How to Enable SLP Proxy Registration</a></p>
</div>
<p class="toc level3 tocsp"><a href="legacy-16.html">Considerations When Advertising Legacy Services</a></p>
<p class="toc level2 tocsp"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="legacy-11"></a><h3>Advertising Legacy Services</h3>
<a name="indexterm-1099"></a><p>You use any of the following methods to advertise legacy services.</p>
<ul><li><p>Modify the service to incorporate an SLP SA.</p></li>
<li><p>Write a small program that advertises on behalf of a service that is not SLP enabled.</p></li>
<li><p><a name="indexterm-1100"></a><a name="indexterm-1101"></a>Use proxy advertising to have <tt>slpd</tt> advertise the service.</p></li></ul>


<a name="legacy-12"></a><h4>Modifying the Service</h4>
<p>If the source code for the software server is available, you can
incorporate a SLP SA. The C and Java APIs for SLP are relatively
straightforward to use. See the man pages for information on the C API
and documentation on the Java API. If the service is a hardware device,
the manufacturer might have an updated PROM that incorporates SLP. Contact the device
manufacturer for more information.</p>

<a name="legacy-13"></a><h4>Advertising a Service That Is Not SLP Enabled</h4>
<a name="indexterm-1102"></a><p>If the source code or an updated PROM that contains SLP is
not available, you can write a small application that uses the SLP client
library to advertise the service. This application could function as a small daemon
that you start or stop from the same shell script you use to
start and stop the service.</p>

<a name="legacy-14"></a><h4>SLP Proxy Registration</h4>
<p><a name="indexterm-1103"></a><a name="indexterm-1104"></a><a name="indexterm-1105"></a><a name="indexterm-1106"></a>Solaris <tt>slpd</tt> supports legacy service advertising with a proxy registration file. The proxy
registration file is a list of service advertisements in a portable format.</p>

<a name="slp.setupprproc"></a><h4>How to Enable SLP Proxy Registration</h4><ol>
<li><a name="slp.legacy-step-6"></a><b>Create a proxy registration file on the host file system or in any
network directory that is accessible by HTTP. </b></li>
<li><a name="slp.legacy-step-7"></a><b>Determine if a service type template exists for the service. </b><p>The template is a description of the service URL and attributes of a
service type. A template is used to define the components of an advertisement
for a particular service type:</p>
<ul><li><p>If a service type template exists, use the template to construct the proxy registration. See RFC 2609 for more information on service-type templates.</p></li>
<li><p>If a service type template is not available for the service, select a collection of attributes that precisely describe the service. Use a naming authority other than the default for the advertisement. The default naming authority is allowed only for service types that have been standardized. See RFC 2609 for more information on naming authorities.</p><p>For example, suppose a company that is called <b>BizApp</b> has a local database that is used to track software defects. To advertise the database, the company might use a URL with the service type <tt>service:bugdb.bizapp</tt>. The naming authority would then be <tt>bizapp</tt>.</p></li></ul>
</li>
<li><a name="slp.setup-step-pr1"></a><b><a name="indexterm-1107"></a>Follow the next steps to configure the <tt>net.slp.serializedRegURL</tt> property in the <tt>/etc/inet/slp.conf</tt>
file with the location of the registration file that was created in the
previous steps.</b></li>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="slp.setup-step-pr2"></a><b>Stop <tt>slpd</tt> and all SLP activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li>
<li><a name="slp.setup-step-pr3"></a><b><a name="indexterm-1108"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file before you change the configuration settings.</b></li>
<li><a name="slp.setup-step-pr4"></a><b>Specify the location of the proxy registration file in the <tt>net.slp.serializedRegURL</tt> property of
the <tt>/etc/inet/slp.conf</tt> file.</b><pre>net.slp.net.slp.serializedRegURL=<i>proxy registration file URL</i></pre><p>For example, if the serialized registration file is <tt>/net/inet/slp.reg</tt>, you configure the
property as shown in the following:</p><pre>net.slp.serializedRegURL=file:/etc/inet/slp.reg</pre></li>
<li><a name="slp.setup-step-pr5"></a><b>Save your changes and close the file.</b></li>
<li><a name="slp.setup-step-pr6"></a><b><a name="indexterm-1109"></a>Restart <tt>slpd</tt> to activate your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol>

<a name="slp.legacy-1"></a><h4>Using SLP Proxy Registration to Advertise</h4>
<p><a name="indexterm-1110"></a><a name="indexterm-1111"></a><tt></tt> A service advertisement consists of lines that identify the service URL, an optional
scope, and a series of attribute definitions. The SLP daemon reads, registers, and
maintains proxy advertisements exactly as an SA client would. The following is an
example of an advertisement from a proxy registration file. </p><p>In the example, a legacy printer that supports LPR protocol and an FTP
server are advertised. Line numbers have been added for description purposes and are
not part of the file.</p><pre> (1) #Advertise legacy printer. 
 (2) 
 (3) service:lpr://bizserver/mainspool,en,65535
 (4) scope=eng,corp
 (5) make-model=Laserwriter II
 (6) location-description=B16-2345
 (7) color-supported=monochromatic
 (8) fonts-supported=Courier,Times,Helvetica 9 10
 (9) 
 (10) #Advertise FTP server
 (11) 
 (12) ftp://archive/usr/src/public,en,65535,src-server
 (13) content=Source code for projects
 (14) </pre>
<hr><p><b>Note - </b><a name="indexterm-1112"></a><a name="indexterm-1113"></a>The proxy registration file supports the same convention for escaping non-ASCII characters as
the configuration file does. For more information about the format of the proxy
registration file, see RFC 2614.</p>
<hr>
<a name="slp.legacy-tbl-5"></a><h6>Table&nbsp;10-1 SLP Proxy Registration File Description</h6><table><col width="17*"><col width="83*"><tr><th align="left" valign="top" scope="column"><p>Line Numbers</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1 and 10</p></td>
<td align="left" valign="top" scope="row"><p>Comment lines begin with a
cross-hatch symbol (#) and do not affect the file's operation. All characters through
the end of a comment line are ignored.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>2, 9, and 14</p></td>
<td align="left" valign="top" scope="row"><p>Blank lines that
delimit the advertisements.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>3, 12</p></td>
<td align="left" valign="top" scope="row"><p>Service URLs that each have three required fields and
one optional field that are separated by commas:</p>
<ul><li><p>Generic or <tt>service: URL</tt> advertised. See RFC 2609 for the specification of how to form a service: URL.</p></li>
<li><p>Language of the advertisement. In the previous example, the field is designated English, <b>en</b>. Language is an RFC 1766 language tag.</p></li>
<li><p>Lifetime of the registration, measured in seconds. The lifetime is restricted to an unsigned 16 bit-integer. If the lifetime is less than the maximum, 65535, <tt>slpd</tt> times out the advertisement. If the lifetime is 65535, <tt>slpd</tt> refreshes the advertisement periodically, and the lifetime is considered permanent, until <tt>slpd</tt> exits. </p></li>
<li><p>(Optional) Service type field &ndash; If used, this field defines the service type. If the service URL is defined, you can change the service type under which the URL is advertised. In the previous example of a proxy registration file, line 12 contains a generic FTP URL. The optional type field causes the URL to be advertised under the service type name <b>src-server</b>. The <tt>service</tt> prefix is not added by default to the type name.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>4</p></td>
<td align="left" valign="top" scope="row"><p>Scope designation.</p><p><a name="indexterm-1114"></a>Optional line consists of the token
<tt>scope</tt>, followed by an equal sign and a comma-separated list of scope names.
Scope names are defined by the <tt>net.slp.useScopes</tt> configuration property. <tt></tt>Only scopes that are configured
for the host should be included in the list. When a scope line
is not added, the registration is made in all scopes with which <tt>slpd</tt>
is configured. The scope line must appear immediately after the URL line. Otherwise,
scope names are recognized as attributes.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>5&ndash;8</p></td>
<td align="left" valign="top" scope="row"><p>Attribute definitions.</p><p>After the optional scope line, the bulk
of the service advertisement contains attribute/value list pair lines. Each pair consists of
the attribute tag, followed by an equal sign, and an attribute value or
a comma-separated list of values. In the previous example of a proxy registration
file, line 8 illustrates an attribute list with multiple values. All other lists
have single values. The format for the attribute names and values is the
same as on-the-wire SLP messages.</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="legacy-8.html">Previous</a>
             </td>
             <td align="right">
                 <a href="legacy-16.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

