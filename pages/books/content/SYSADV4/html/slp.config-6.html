<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>SLP and Multihoming - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="slp.config-dda.html">Previous</a>
             </td>
             <td align="right">
                 <a href="legacy-7.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level3"><a href="slp.config-1a.html">Configuring SLP Properties</a></p>
<p class="toc level4"><a href="slp.config-1a.html#ch.configuration-155">How to Change Your SLP Configuration</a></p>
<p class="toc level3 tocsp"><a href="slp.config-8.html">Modifying DA Advertising and Discovery Frequency</a></p>
<p class="toc level4"><a href="slp.config-8.html#slp.config-4">How to Limit UAs and SAs to Statically Configured DAs</a></p>
<p class="toc level4"><a href="slp.config-8.html#wuftp-63">How to Configure DA Discovery for Dial-up Networks</a></p>
<p class="toc level4"><a href="slp.config-8.html#slp.config-3">How to Configure DA Heartbeat for Frequent Partitions</a></p>
<p class="toc level3 tocsp"><a href="slp.config-14.html">Accommodating Different Network Media, Topologies, or Configurations</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-rsar">How to Reduce SA Reregistrations</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-htcmttlp">How to Configure the Multicast Time-to-Live Property</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-28">How to Configure the Packet Size</a></p>
<p class="toc level4"><a href="slp.config-14.html#slp.config-36">How to Configure Broadcast-Only Routing</a></p>
<p class="toc level3 tocsp"><a href="slp.config-19.html">Modifying Timeouts on SLP Discovery Requests</a></p>
<p class="toc level4"><a href="slp.config-19.html#slp.config-44">How to Change Default Timeouts</a></p>
<p class="toc level4"><a href="slp.config-19.html#slp.config-53">How to Configure the Random-Wait Bound</a></p>
<p class="toc level3 tocsp"><a href="slp.config-22.html">Deploying Scopes</a></p>
<p class="toc level4"><a href="slp.config-22.html#slp.config-62">How to Configure Scopes</a></p>
<p class="toc level3 tocsp"><a href="slp.config-dda.html">Deploying DAs</a></p>
<p class="toc level4"><a href="slp.config-dda.html#slp.config-70">How to Deploy DAs</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">SLP and Multihoming</a></p>
</div>
<p class="toc level2 tocsp"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="slp.config-6"></a><h3>SLP and Multihoming</h3>
<p>A multihomed server acts as a host on multiple IP subnets. The
server can sometimes have more than one network interface card and can act
as a router. IP packets, including multicast packets, are routed between the interfaces. In
some situations, routing between interfaces is disabled. The following sections describe how to
configure SLP for such situations.</p>

<a name="slp.config-42"></a><h4>Multihoming Configuration for SLP</h4>
<a name="indexterm-1069"></a><p><a name="indexterm-1070"></a><a name="indexterm-1071"></a><a name="indexterm-1072"></a><a name="indexterm-1073"></a>Without configuration, <tt>slpd</tt> listens for multicast and for UDP/TCP unicast on the default
network interface. If unicast and multicast routing is enabled between interfaces on a
multihomed machine, no additional configuration is needed. This is because multicast packets that
arrive at another interface are properly routed to the default. As a result,
multicast requests for DA or other service advertisements arrive at <tt>slpd</tt>. If routing is
not turned on for some reason, configuration is required.</p>

<a name="slp.config-43"></a><h4>When to Configure for Nonrouted, Multiple Network Interfaces</h4>
<p>If one of the following conditions exist, you might need to configure multihomed
machines.</p>
<ul><li><p>Unicast routing is enabled between the interfaces and multicast routing is disabled.</p></li>
<li><p>Unicast routing and multicast routing are both disabled between the interfaces.</p></li></ul>
<p><a name="indexterm-1074"></a><a name="indexterm-1075"></a><a name="indexterm-1076"></a><a name="indexterm-1077"></a>When multicast routing is disabled between interfaces, it is usually because multicast has
not been deployed in the network. In that situation, broadcast is normally used
for  service discovery  that is not DA-based and for DA discovery
on the individual subnets. Broadcast is configured by setting the <tt>net.slp.isBroadcastOnly</tt> property to
<tt>True</tt>.</p>

<a name="slp.config-tcnmi"></a><h4>Configuring Nonrouted, Multiple Network Interfaces (Task Map)</h4>
<a name="slp.config-tbl-2"></a><h6>Table&nbsp;9-5 Configuring Nonrouted, Multiple Network Interfaces</h6><table><col width="117.93*"><col width="155.77*"><col width="113.31*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Configure the <tt>net.slp.interfaces</tt> property</p></td>
<td align="left" valign="top" scope="row"><p>Set this property to enable <tt>slpd</tt> to listen
for unicast and multicast/broadcast SLP requests on the specified interfaces.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#slp.config-45">Configuring the <tt>net.slp.interfaces</tt> Property</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Arrange proxy service advertisements
so that UAs on subnets get service URLs with reachable addresses</p></td>
<td align="left" valign="top" scope="row"><p>Restrict proxy advertisement
to a machine that is running <tt>slpd</tt> connected to a single subnet rather
than a multihomed host.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#slp.config-46">Proxy Advertising on Multihomed Hosts</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Place the DAs and configure scopes to assure reachability
between UAs and SAs</p></td>
<td align="left" valign="top" scope="row"><p>Configure the <tt>net.slp.interfaces</tt> property on multihomed hosts with a single interface
host name or address.</p><p>Run a DA on a multihomed host, but configure
scopes so that SAs and UAs on each subnet use different hosts.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#slp.config-47">DA Placement and Scope Name Assignment</a></p></td>
</tr>
</table>

<a name="slp.config-45"></a><h4>Configuring the <tt>net.slp.interfaces</tt> Property</h4>
<p><a name="indexterm-1078"></a><a name="indexterm-1079"></a>If the <tt>net.slp.interfaces</tt> property is set, <tt>slpd</tt> listens for unicast and multicast/broadcast
SLP requests on the interfaces that are listed in the property, rather than
on the default interface. </p><p><a name="indexterm-1080"></a><a name="indexterm-1081"></a><a name="indexterm-1082"></a>Usually, you set the <tt>net.slp.interfaces</tt> property in conjunction with enabling broadcast by setting
the <tt>net.slp.isBroadcastOnly</tt> property, because multicast has not been deployed in the network. However,
if  multicast has been deployed, but is not being routed on
this particular multihomed host, a multicast request can arrive at <tt>slpd</tt> from more than
one interface. This situation can occur when the routing of packets is handled
by another multihomed host or router that connects the subnets that are served
by the interfaces.</p><p><a name="indexterm-1083"></a>When such a situation occurs, the SA server or the UA that
is sending the request receives two responses from <tt>slpd</tt> on the multihomed host. The
responses are then filtered by the client libraries and the client does not
see them. The responses are, however, visible in the <tt>snoop</tt> trace.</p>
<hr><p><b>Note - </b><p>If unicast routing is turned off, services that are advertised by SA clients
on multihomed hosts might not be reachable from all the subnets. If services
are unreachable, SA clients can do the following:</p>
<ul><li><p>Advertise one service URL for each individual subnet.</p></li>
<li><p>Assure that requests from a particular subnet are answered with a reachable URL.</p></li></ul>

<hr>
<p><a name="indexterm-1084"></a>The SA client library makes no effort to assure that reachable URLs are
advertised. The service program, which might or might not handle a multihomed host
with no routing, is then responsible for assuring that reachable URLs are advertised.
</p><p><a name="indexterm-1085"></a><a name="indexterm-1086"></a>Before you deploy a service on a multihomed host with  unicast routing
disabled, use <tt>snoop</tt> to determine whether the service handles requests from multiple subnets
correctly. Furthermore, if you plan to deploy a DA on the multihomed host,
see <a href="#slp.config-47">DA Placement and Scope Name Assignment</a>.</p>

<a name="slp.config-htcnsi"></a><h5>How to Configure the <tt>net.slp.interfaces</tt> Property</h5>
<p>Use the following procedure to change the <tt>net.slp.interfaces</tt> property in the <tt>slp.conf</tt> file.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="slp.config-step-56z"></a><b>Stop <tt>slpd</tt> and all SLP activity on the host.</b><pre># <tt><b>svcadm disable network/slp</b></tt></pre></li>
<li><a name="slp.config-step-57z"></a><b><a name="indexterm-1087"></a>Back up the default <tt>/etc/inet/slp.conf</tt> file before you change the configuration settings.</b></li>
<li><a name="slp.config-step-58"></a><b>Change the <tt>net.slp.interfaces</tt> property in the <tt>slpd.conf</tt> file:</b><pre><tt>net.slp.interfaces</tt>=<i>value</i></pre><dl><dt><i>value</i></dt>
<dd><p>List of IPv4 addresses or host names of the network interface cards on which the DA or SA should listen for multicast, unicast UDP, and TCP messages on port 427</p></dd>
</dl>
<p>For example, a server with three network cards and multicast routing that is
 turned off is connected to three subnets. The IP addresses of
the three network interfaces are <tt>192.147.142.42</tt>, <tt>192.147.143.42</tt>, and <tt>192.147.144.42</tt>. The subnet mask is
<tt>255.255.255.0</tt>. The following property setting causes <tt>slpd</tt> to listen on all three interfaces
for unicast and  multicast/broadcast messaging:</p><pre>net.slp.interfaces=192.147.142.42,192.147.143.42,192.147.144.42</pre>
<hr><p><b>Note - </b><a name="indexterm-1088"></a>You can specify IP addresses or resolvable host names for the <tt>net.slp.interfaces</tt>
property.</p>
<hr>
</li>
<li><a name="slp.config-step-60z"></a><b>Save your changes and close the file.</b></li>
<li><a name="slp.config-step-61z"></a><b>Restart <tt>slpd</tt> to activate your changes.</b><pre># <tt><b>svcadm enable network/slp</b></tt></pre></li></ol>

<a name="slp.config-46"></a><h4>Proxy Advertising on Multihomed Hosts</h4>
<a name="indexterm-1089"></a><a name="indexterm-1090"></a><a name="indexterm-1091"></a><p>If a host with multiple interfaces advertises services by using <tt>slpd</tt> and
proxy registration, the service URLs that are advertised by <tt>slpd</tt> must contain
reachable host names or addresses. If unicast routing is enabled between the interfaces,
hosts on all subnets can reach hosts on other subnets. Proxy registrations can
also be made for a service on any subnet. If, however, unicast routing
is disabled, service clients on one subnet cannot reach services on another subnet
through the multihomed host. However, those clients might be able to reach the
services through another router.</p><p>For example, suppose the host with default host name <tt>bigguy</tt> has three 
interface cards on three different unrouted subnets. The host names on these subnets
are <tt>bigguy</tt>, with IP address <tt>192.147.142.42</tt>, <tt>bigguy1</tt>, with IP address <tt>192.147.143.42</tt>, and <tt>bigguy2</tt>,
with IP address <tt>192.147.144.42</tt>. Now suppose that a legacy printer, <tt>oldprinter</tt>, is connected to
the <tt>143</tt> subnet and that the URL <tt>service:printing:lpr://oldprinter/queue1</tt> is configured with the
<tt>net.slp.interfaces</tt> to listen on all interfaces. The <tt>oldprinter</tt> URL is proxy-advertised on all interfaces.
The machines on the <tt>142</tt> and <tt>144</tt> subnets receive the URL in response
to service requests, but are unable to access the <tt>oldprinter</tt> service.</p><p>The solution to this problem is to perform the proxy advertisement with
<tt>slpd</tt> running on a machine that is connected to the <tt>143</tt> subnet only,
rather than on the multihomed host. Only hosts on the <tt>143</tt> subnet can
obtain the advertisement in response to a service request.</p>

<a name="slp.config-47"></a><h4>DA Placement and Scope Name Assignment</h4>
<p><a name="indexterm-1092"></a><a name="indexterm-1093"></a>The placement of DAs and assignment of scope names on a network with
a multihomed host must be done carefully to assure that clients obtain accessible
services. Be particularly cautious when routing is disabled and the <tt>net.slp.interfaces</tt> property is
configured. Again, if unicast routing is enabled between the interfaces on a multihomed
machine, no special DA and scope configuration is necessary. The advertisements are cached with
the DA identify services that are accessible from any of the subnets. However,
if unicast routing is disabled, poor placement of DAs can result in problems.</p><p>To see what problems can result in the previous example, consider what would
happen if <tt>bigguy</tt> runs a DA, and clients on all subnets have the
same scopes. SAs on the <tt>143</tt> subnet register their service advertisements with the
DA. UAs on the <tt>144</tt> subnet can obtain those service advertisements, even though
hosts on the <tt>143</tt> subnet are unreachable.</p><p><a name="indexterm-1094"></a>One solution to this problem is to run a DA on each
subnet and not on the multihomed host. In this situation, the <tt>net.slp.interfaces</tt> property on
the multihomed hosts should be configured with a single interface host name or
address, or it should be left unconfigured, forcing the default interface to be
used. A disadvantage of this solution is that multihomed hosts are often large
machines that could better handle the computational load of a DA.</p><p>Another solution is to run a DA on the multihomed host, but
configure scopes so that the SAs and UAs on each subnet have a
different scope. For example, in the previous situation, UAs and SAs on the
<tt>142</tt> subnet might have a scope that is called <tt>scope142</tt>. UAs and SAs on
the <tt>143</tt> subnet might have another scope that is called <tt>scope143</tt> and
UAs and SAs on the <tt>144</tt> subnet could have third scope that is
called <tt>scope144</tt>. You can configure the <tt>net.slp.interfaces</tt> property on <tt>bigguy</tt> with the three interfaces
so that the DA serves three scopes on the three subnets.</p>

<a name="slp.config-48"></a><h4>Considerations When Configuring for Nonrouted, Multiple Network Interfaces</h4>
<a name="indexterm-1095"></a><p><a name="indexterm-1096"></a>Configuring the <tt>net.slp.interfaces</tt> property enables a DA on the multihomed host to bridge
service advertisements between the subnets. Such configuration is useful if multicast routing is
turned off in the network, but unicast routing between interfaces on a multihomed
host is enabled.  Because unicast is routed between the interfaces, hosts on
a subnet different from the subnet on which the service is located can
contact the service when they receive the service URL. Without the DA, SA
servers on a particular subnet receive only broadcasts that were made on the
same subnet, so they cannot locate services off of their subnet.</p><p>The most common situation that necessitates configuration of the <tt>net.slp.interfaces</tt> property occurs
when multicast is not deployed on the network and broadcast is used instead.
Other situations require careful thought and planning to avoid unnecessary duplicate responses or
unreachable services.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="slp.config-dda.html">Previous</a>
             </td>
             <td align="right">
                 <a href="legacy-7.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

