<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mail Service Programs and Files - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mailrefer-53.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mailrefer-14.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level3"><a href="mailrefer-75.html">Solaris Version of <tt>sendmail</tt></a></p>
<p class="toc level3"><a href="mailrefer-53.html">Software and Hardware Components of Mail Services</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Mail Service Programs and Files</a></p>
</div>
<p class="toc level3"><a href="mailrefer-14.html">Mail Addresses and Mail Routing</a></p>
<p class="toc level3"><a href="mailrefer-24.html">Interactions of <tt>sendmail</tt> With Name Services</a></p>
<p class="toc level3"><a href="evemx.html">Changes in Version 8.13 of <tt>sendmail</tt></a></p>
<p class="toc level3"><a href="mailrefer-105.html">Changes From Version 8.12 of <tt>sendmail</tt></a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="mailrefer-45"></a><h3>Mail Service Programs and Files</h3>
<p>Mail services include many programs and daemons that interact with each other. This section
introduces the files, programs, terms, and concepts that are related to administering electronic mail.</p>
<ul><li><p><a href="#ewpqz">Enhancement for <tt>vacation</tt> Utility</a></p></li>
<li><p><a href="#mailrefer-77">Contents of the <tt>/usr/bin</tt> Directory</a></p></li>
<li><p><a href="#mailrefer-81">Contents of the <tt>/etc/mail</tt> Directory</a></p></li>
<li><p><a href="#mailrefer-82">Contents of the <tt>/usr/lib</tt> Directory</a></p></li>
<li><p><a href="#mailrefer-83">Other Files Used for Mail Services</a></p></li>
<li><p><a href="#mailrefer-84">Interactions of Mail Programs</a></p></li>
<li><p><a href="#mailrefer-46"><tt>sendmail</tt> Program</a></p></li>
<li><p><a href="#mailrefer-33">Mail Alias Files</a></p></li>
<li><p><a href="#mailrefer-39"><tt>.forward</tt> Files</a></p></li>
<li><p><a href="#mailrefer-44"><tt>/etc/default/sendmail</tt> File</a></p></li></ul>


<a name="ewpqz"></a><h4>Enhancement for <tt>vacation</tt> Utility</h4>
<a name="indexterm-1324"></a><p>Starting in the Solaris 10 release, the <tt>vacation</tt> utility has been enhanced to enable
a user to specify which incoming messages receive autogenerated replies. With this enhancement the user
can avoid sharing confidential or contact information with unknown people. Messages from spammers or unknown
people would not receive a reply.</p><p>This enhancement works by matching an incoming sender's email address to a list of
domains or email addresses in a <tt>.vacation.filter</tt> file.  This file is created by
the user and is in the user's home directory. If a domain or email
address match is found, a reply is sent. If no match is found, no
reply is sent.</p><p>The <tt>.vacation.filter</tt> might contain entries such as these:</p><pre>company.com
mydomain.com
onefriend@hisisp.com
anotherfriend@herisp.com</pre><p>Note that each line contains one domain or one email address. Each entry must
be on a separate line. For a sender's email address to match with an
email address entry, the match must be exact, except for case. Whether the letters
in the sender's address are lowercase or uppercase is ignored. For a sender's email
address to match with a domain entry, the sender's address must contain the listed
domain. For example, both <tt>somebody@dept.company.com</tt> and <tt>someone@company.com</tt> would be a match for a domain
entry of <tt>company.com</tt>.</p><p>For more information, see the <a href="http://docs.sun.com/doc/819-2239/vacation-1?a=view"><tt>vacation</tt>(1)</a> man page.</p>

<a name="mailrefer-77"></a><h4>Contents of the <tt>/usr/bin</tt> Directory</h4>
<p><a name="indexterm-1325"></a>The following table shows the contents of the <tt>/usr/bin</tt> directory, which is used for
mail services.</p><table><col width="88*"><col width="44*"><col width="264*"><tr><th align="left" valign="top" scope="column"><p>Name</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1326"></a><a name="indexterm-1327"></a><tt>aliasadm</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A program to manipulate the NIS+ aliases map.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1328"></a><a name="indexterm-1329"></a><tt>mail</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A
user agent.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1330"></a><a name="indexterm-1331"></a><tt>mailcompat</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A filter to store mail in SunOS 4.1 mailbox format.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1332"></a><a name="indexterm-1333"></a><tt>mailq</tt>
  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A program that lists the content of the mail queue.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1334"></a><a name="indexterm-1335"></a><tt>mailstats</tt>   </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A
program that is used to read mail statistics that are stored in the <tt>/etc/mail/statistics</tt>
file (if present).</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1336"></a><a name="indexterm-1337"></a><tt>mailx</tt> </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A user agent.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1338"></a><a name="indexterm-1339"></a><tt>mconnect</tt>   </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A program that connects to the mailer
for address verification and debugging.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1340"></a><a name="indexterm-1341"></a><tt>praliases</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A command to &ldquo;uncompile&rdquo; the alias database. Refer
to the uncompile information that is provided in the man page for <a href="http://docs.sun.com/doc/819-2239/praliases-1?a=view"><tt>praliases</tt>(1)</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1342"></a><a name="indexterm-1343"></a><tt>rmail</tt> 
</p></td>
<td align="left" valign="top" scope="row"><p>Symbolic Link</p></td>
<td align="left" valign="top" scope="row"><p>A symbolic link to <tt>/usr/bin/mail</tt>. Command that is often used to permit
only the sending of mail.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1344"></a><a name="indexterm-1345"></a><tt>vacation</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>A command to set up an automatic reply
to mail.</p></td>
</tr>
</table>

<a name="mailrefer-81"></a><h4>Contents of the <tt>/etc/mail</tt> Directory</h4>
<p><a name="indexterm-1346"></a>The following table shows the contents of the <tt>/etc/mail</tt> directory.</p><table><col width="111.82*"><col width="44.46*"><col width="239.73*"><tr><th align="left" valign="top" scope="column"><p>Name</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1347"></a><a name="indexterm-1348"></a><tt>Mail.rc</tt>   </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Default settings
for the <tt>mailx</tt> user agent.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1349"></a><a name="indexterm-1350"></a><tt>aliases</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Mail-forwarding information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1351"></a><a name="indexterm-1352"></a><tt>aliases.db</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Default binary form of mail-forwarding information
that is created by running <tt>newaliases</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1353"></a><a name="indexterm-1354"></a><tt>aliases.dir</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Binary form of mail-forwarding information that
is created by running <tt>newaliases</tt>. Can still be used, but is no longer
used by default starting with the Solaris 9 release.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1355"></a><a name="indexterm-1356"></a><tt>aliases.pag</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Binary form of
mail-forwarding information that is created by running <tt>newaliases</tt>. Can still be used, but is
no longer used by default starting with the Solaris 9 release.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1357"></a><a name="indexterm-1358"></a><tt>mailx.rc</tt>   </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Default
settings for the <tt>mailx</tt> user agent.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1359"></a><a name="indexterm-1360"></a><tt>main.cf</tt> </p></td>
<td align="left" valign="top" scope="row"><p>Symbolic link</p></td>
<td align="left" valign="top" scope="row"><p>A symbolic link from this
sample configuration file for main systems to <tt>sendmail.cf</tt> is provided for backwards compatibility. This file is
not needed in version 8.13 of <tt>sendmail</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1361"></a><a name="indexterm-1362"></a><tt>relay-domains</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>List of all domains for which relaying is
allowed. By default, only the local domain is allowed.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1363"></a><a name="indexterm-1364"></a><tt>sendmail.cf</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Configuration file for
mail routing.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1365"></a><a name="indexterm-1366"></a><tt>submit.cf</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>New configuration file for the mail submission program (MSP). For more information, refer to
<a href="mailrefer-105.html#mailrefer-106"><tt>submit.cf</tt> Configuration File From Version 8.12 of <tt>sendmail</tt></a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1367"></a><a name="indexterm-1368"></a><tt>local-host-names</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Optional file that you can create if the number of aliases for the
mail host is too long.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1369"></a><a name="indexterm-1370"></a><tt>helpfile</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Help file that is used by the SMTP
<tt>HELP</tt> command.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1371"></a><a name="indexterm-1372"></a><tt>sendmail.pid</tt>   </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>File that lists the PID of the listening daemon and
is now in <tt>/var/run</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1373"></a><a name="indexterm-1374"></a><a name="indexterm-1375"></a><tt>statistics</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p><tt>sendmail</tt> statistics file. If this file is present,
<tt>sendmail</tt> logs the amount of traffic through each mailer. Previously, this file was called
<tt>sendmail.st</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1376"></a><a name="indexterm-1377"></a><tt>subsidiary.cf</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>Symbolic link</p></td>
<td align="left" valign="top" scope="row"><p>A symbolic link from this sample configuration file for subsidiary systems
to <tt>sendmail.cf</tt> is provided for backwards compatibility. This file is not needed in version 8.13
of <tt>sendmail</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1378"></a><a name="indexterm-1379"></a><tt>trusted-users</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>File that lists the users (one user per line) who can be
trusted to perform certain mail operations. By default, only <tt>root</tt> is in this file. Certain
mail operations, when performed by untrusted users, result in the following warning, <tt>X-Authentication-Warning: header being added to a message</tt>.</p></td>
</tr>
</table>

<a name="mailrefer-126"></a><h4>Contents of the <tt>/etc/mail/cf</tt> Directory</h4>
<p><a name="indexterm-1380"></a>Within the <tt>/etc/mail</tt> directory is a subdirectory, <tt>cf</tt>, that contains all of the
necessary files to build a <tt>sendmail.cf</tt> file. The content of <tt>cf</tt> is shown in
<a href="#mailintro-tbl-30">Table&nbsp;14-9</a>. </p><p>Starting in the Solaris 10 release, to support a read-only <tt>/usr</tt> file system, the
content of the <tt>/usr/lib/mail</tt> directory has been moved to the <tt>/etc/mail/cf</tt> directory. Note, however,
these exceptions. The shell scripts <tt>/usr/lib/mail/sh/check-hostname</tt> and <tt>/usr/lib/mail/sh/check-permissions</tt> are now in the <tt>/usr/sbin</tt>
directory. See <a href="#mailrefer-83">Other Files Used for Mail Services</a>. For backward compatibility, symbolic links point to each file's new location.</p><a name="mailintro-tbl-30"></a><h6>Table&nbsp;14-9 Contents of the <tt>/etc/mail/cf</tt> Directory Used for Mail Services</h6><table><col width="167.24*"><col width="58.69*"><col width="172.07*"><tr><th align="left" valign="top" scope="column"><p>Name</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1381"></a><tt>README</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Describes
the configuration files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1382"></a><a name="indexterm-1383"></a><tt>cf/main.mc</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Previously named <tt>cf/main-v7sun.mc</tt>. Is the main configuration file. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1384"></a><a name="indexterm-1385"></a><tt>cf/Makefile</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Provides rules for building new
configuration files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1386"></a><a name="indexterm-1387"></a><tt>cf/submit.mc</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Is the configuration file for the mail submission program (MSP), which is used
to submit messages.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1388"></a><a name="indexterm-1389"></a><tt>cf/subsidiary.mc</tt> </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Previously named <tt>cf/subsidiary-v7sun.mc</tt>. Is the configuration file for hosts that
NFS-mount <tt>/var/mail</tt> from another host.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1390"></a><a name="indexterm-1391"></a><tt>domain</tt> </p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Provides site-dependent subdomain descriptions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1392"></a><a name="indexterm-1393"></a><tt>domain/generic.m4</tt> </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Is the generic domain
file from Berkeley Software Distribution.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1394"></a><a name="indexterm-1395"></a><tt>domain/solaris-antispam.m4</tt> </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Is the domain file with changes that make <tt>sendmail</tt>
function like the previous Solaris versions of <tt>sendmail</tt>. However, relaying is disabled completely, sender addresses with
no host name are rejected, and unresolvable domains are rejected.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1396"></a><a name="indexterm-1397"></a><tt>domain/solaris-generic.m4</tt> </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Is the default
domain file with changes that make <tt>sendmail</tt> function like the previous Solaris versions of <tt>sendmail</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1398"></a><a name="indexterm-1399"></a><tt>feature</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Contains
definitions of specific features for particular hosts. See <tt>README</tt> for a full description of
the features.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1400"></a><a name="indexterm-1401"></a><tt>m4</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Contains site-independent include files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1402"></a><a name="indexterm-1403"></a><tt>mailer</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Contains definitions of mailers, which include <tt>local</tt>, <tt>smtp</tt>, and <tt>uucp</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1404"></a><a name="indexterm-1405"></a><tt>ostype</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Describes
various operating system environments.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1406"></a><a name="indexterm-1407"></a><tt>ostype/solaris2.m4</tt> </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Defines default local mailer as <tt>mail.local</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1408"></a><a name="indexterm-1409"></a><tt>ostype/solaris2.ml.m4</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Defines default local mailer as <tt>mail.local</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1410"></a><a name="indexterm-1411"></a><tt>ostype/solaris2.pre5.m4</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Defines
local mailer as <tt>mail</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1412"></a><a name="indexterm-1413"></a><tt>ostype/solaris8.m4</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Defines local mailer as <tt>mail.local</tt> (in LMTP mode), enables IPv6,
specifies <tt>/var/run</tt> as the directory for the <tt>sendmail.pid</tt> file.</p></td>
</tr>
</table>

<a name="mailrefer-82"></a><h4>Contents of the <tt>/usr/lib</tt> Directory</h4>
<p><a name="indexterm-1414"></a>The following table shows the contents of the <tt>/usr/lib</tt> directory, which is used for
mail services. </p><a name="ekyfr"></a><h6>Table&nbsp;14-10 Contents of the <tt>/usr/lib</tt> Directory</h6><table><col width="16.64*"><col width="10.64*"><col width="47.71*"><tr><th align="left" valign="top" scope="column"><p>Name</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>mail.local</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Mailer that delivers mail to mailboxes.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>sendmail</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Routing program, also known as the mail
transfer agent.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>smrsh</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Shell program (sendmail restricted shell) that uses the <tt>&ldquo;|program&rdquo;</tt> syntax of <tt>sendmail</tt>
to restrict programs that <tt>sendmail</tt> can run to those programs listed in the <tt>/var/adm/sm.bin</tt>
directory. Refer to the <a href="http://docs.sun.com/doc/819-2240/smrsh-1m?a=view"><tt>smrsh</tt>(1M)</a> man page for recommendations about what to include in <tt>/var/adm/sm.bin</tt>. To
enable, include this <tt>m4</tt> command, <tt>FEATURE(`smrsh'</tt>), in your <tt>mc</tt> file.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>mail</tt></p></td>
<td align="left" valign="top" scope="row"><p>symbolic link</p></td>
<td align="left" valign="top" scope="row"><p>A symbolic
link points to the<tt>/etc/mail/cf</tt> directory. For more information, refer to <a href="#mailrefer-126">Contents of the <tt>/etc/mail/cf</tt> Directory</a>.</p></td>
</tr>
</table>

<a name="mailrefer-83"></a><h4>Other Files Used for Mail Services</h4>
<p>Several other files and directories are used for mail services, as shown in <a href="#mailintro-tbl-31">Table&nbsp;14-11</a>.</p><a name="mailintro-tbl-31"></a><h6>Table&nbsp;14-11 Other Files Used for Mail Services</h6><table><col width="176*"><col width="54*"><col width="166*"><tr><th align="left" valign="top" scope="column"><p>Name</p></th>
<th align="left" valign="top" scope="column"><p>Type</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/etc/default/sendmail</tt>
</p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Lists the environment variables for the startup script for <tt>sendmail</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/etc/shells</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Lists the valid login
shells.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/etc/mail/cf/sh</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Contains shell scripts that are used by the <tt>m4</tt> build process and migration aids.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1415"></a><a name="indexterm-1416"></a><tt>/usr/sbin/check-permissions</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Checks
permissions of <tt>:include:</tt> aliases and <tt>.forward</tt> files and their parent directory path for
correct permissions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1417"></a><a name="indexterm-1418"></a><tt>/usr/sbin/check-hostname</tt> </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Verifies that <tt>sendmail</tt> is able to determine the fully qualified host name.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1419"></a><a name="indexterm-1420"></a><tt>/usr/sbin/editmap</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Queries
and edits single records in database maps for <tt>sendmail</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1421"></a><a name="indexterm-1422"></a><tt>/usr/sbin/in.comsat</tt>  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Mail notification daemon.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1423"></a><a name="indexterm-1424"></a><tt>/usr/sbin/makemap</tt>
  </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Builds binary forms of keyed maps.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1425"></a><a name="indexterm-1426"></a><tt>/usr/sbin/newaliases</tt></p></td>
<td align="left" valign="top" scope="row"><p>Symbolic Link</p></td>
<td align="left" valign="top" scope="row"><p>A symbolic link to <tt>/usr/lib/sendmail</tt>. Used
to create the binary form of the alias database. Previously in <tt>/usr/bin</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1427"></a><a name="indexterm-1428"></a><tt>/usr/sbin/syslogd</tt>   </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Error
message logger, used by <tt>sendmail</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1429"></a><a name="indexterm-1430"></a><tt>/usr/sbin/etrn</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Perl script for starting the client-side remote mail queue.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1431"></a><a name="indexterm-1432"></a><tt>/usr/dt/bin/dtmail</tt>
 </p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>CDE mail user agent.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1433"></a><tt>/var/mail/</tt><i>mailbox1</i><tt></tt>, <tt>/var/mail/</tt><i>mailbox2</i><tt></tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>Mailboxes for delivered mail.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1434"></a><a name="indexterm-1435"></a><tt>/var/spool/clientmqueue</tt></p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Storage for mail that
is delivered by the client daemon.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1436"></a><a name="indexterm-1437"></a><tt>/var/spool/mqueue</tt> </p></td>
<td align="left" valign="top" scope="row"><p>Directory</p></td>
<td align="left" valign="top" scope="row"><p>Storage for mail that is delivered by the
master daemon.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="indexterm-1438"></a><a name="indexterm-1439"></a><tt>/var/run/sendmail.pid</tt></p></td>
<td align="left" valign="top" scope="row"><p>File</p></td>
<td align="left" valign="top" scope="row"><p>File that lists the PID of the listening daemon.</p></td>
</tr>
</table>

<a name="mailrefer-84"></a><h4>Interactions of Mail Programs</h4>
<p><a name="indexterm-1440"></a>Mail services are provided by a combination of the following programs, which interact as
shown in the simplified illustration in <a href="#mailintro-fig-32">Figure&nbsp;14-2</a>.</p><a name="mailintro-fig-32"></a><h6>Figure&nbsp;14-2 Interactions of Mail Programs</h6><img src="figures/7120.gif" alt="The context describes the graphic."></img><p>The following is a description of the interactions of mail programs.</p>
<ol><li><p>Users send messages by using programs such as <tt>mailx</tt>. See the man page for <a href="http://docs.sun.com/doc/819-2239/mailx-1?a=view"><tt>mailx</tt>(1)</a> for more information.</p></li>
<li><p>The message is collected by the program that generated the message, and the message is passed to the <tt>sendmail</tt> daemon.</p></li>
<li><p>The <tt>sendmail</tt> daemon <b>parses</b> the addresses (divides them into identifiable segments) in the message. The daemon uses information from the configuration file, <tt>/etc/mail/sendmail.cf</tt>, to determine network name syntax, aliases, forwarding information, and network topology. By using this information, <tt>sendmail</tt> determines which route a message must follow to get to a recipient.</p></li>
<li><p>The <tt>sendmail</tt> daemon passes the message to the appropriate system.</p></li>
<li><p>The <tt>/usr/lib/mail.local</tt> program on the local system delivers the mail to the mailbox in the <tt>/var/mail/</tt><i>username</i><tt></tt> directory of the recipient of the message.</p></li>
<li><p>The recipient is notified that mail has arrived and retrieves the mail by using <tt>mail</tt>, <tt>mailx</tt>, or a similar program.</p></li></ol>


<a name="mailrefer-46"></a><h4><tt>sendmail</tt> Program</h4>
<p><a name="indexterm-1441"></a>The following list describes some of the capabilities of the <tt>sendmail</tt> program.</p>
<ul><li><p><tt>sendmail</tt> can use different types of communications protocols, such as TCP/IP and UUCP.</p></li>
<li><p><tt>sendmail</tt> implements an SMTP server, message queuing, and mailing lists.</p></li>
<li><p><tt>sendmail</tt> controls name interpretation by using a pattern-matching system that can work with the following naming conventions.</p>
<ul><li><p>Domain-based naming convention. The domain technique separates the issue of physical from logical naming. For more information about domains, refer to <a href="mailrefer-53.html#mailrefer-59">Mail Addresses</a>.</p></li>
<li><p>Improvised techniques, such as providing network names that appear local to hosts on other networks.</p></li>
<li><p>Arbitrary (older) naming syntaxes.</p></li>
<li><p>Disparate naming schemes.</p></li></ul>
</li></ul>
<p>The Solaris operating system uses the <tt>sendmail</tt> program as a mail router. The following
list describes some of its functions.</p>
<ul><li><p><tt>sendmail</tt> is responsible for receiving and delivering email messages to a local delivery agent, such as <tt>mail.local</tt> or <tt>procmail</tt>.</p></li>
<li><p><tt>sendmail</tt> is a mail transfer agent that accepts messages from user agents, such as <tt>mailx</tt> and Mozilla Mail, and routes the messages through the Internet to their destination. </p></li>
<li><p><tt>sendmail</tt> controls email messages that users send.</p>
<ul><li><p>By evaluating the recipients' addresses</p></li>
<li><p>By choosing an appropriate delivery program</p></li>
<li><p>By rewriting the addresses in a format that the delivery agent can handle</p></li>
<li><p>By reformatting the mail headers as required</p></li>
<li><p>By finally passing the transformed message to the mail program for delivery</p></li></ul>
</li></ul>
<p>For more information about the <tt>sendmail</tt> program, refer to the following topics.</p>
<ul><li><p><a href="#mailrefer-89"><tt>sendmail</tt> and Its Rerouting Mechanisms</a></p></li>
<li><p><a href="#mailrefer-79"><tt>sendmail</tt> Features</a></p></li>
<li><p><a href="#mailrefer-80"><tt>sendmail</tt> Configuration File</a></p></li></ul>


<a name="mailrefer-89"></a><h5><tt>sendmail</tt> and Its Rerouting Mechanisms</h5>
<p>The <tt>sendmail</tt> program supports three mechanisms for mail rerouting. The mechanism that you choose depends
on the type of change that is involved.</p>
<ul><li><p>A server change</p></li>
<li><p>A domain-wide change</p></li>
<li><p>A change for one user</p></li></ul>
<p>Additionally, the rerouting mechanism that you choose can affect the level of administration that
is required. Consider the following options.</p>
<ol><li><p>One rerouting mechanism is <b>aliasing</b>.</p><p>Aliasing can map names to addresses on a server-wide basis or a name service-wide basis, depending on the type of file that you use.</p><p>Consider the following advantages and disadvantages of name service aliasing.</p>
<ul><li><p>The use of a name service alias file permits mail rerouting changes to be administered from a single source. However, name service aliasing can create lag time when the rerouting change is propagated.</p></li>
<li><p>Name service administration is usually restricted to a select group of system administrators. A normal user would not administer this file.</p></li></ul>
<p>Consider the following advantages and disadvantages of using a server alias file.</p>
<ul><li><p>By using a server alias file, rerouting can be managed by anyone who can become <tt>root</tt> on the designated server.</p></li>
<li><p>Server aliasing should create little or no lag time when the rerouting change is propagated.</p></li>
<li><p>The change only affects the local server, which might be acceptable if most of the mail is sent to one server. However, if you need to propagate this change to many mail servers, use a name service.</p></li>
<li><p>A normal user would not administer this change.</p></li></ul>
<p>For more information, refer to <a href="#mailrefer-33">Mail Alias Files</a> in this chapter. For a task map, refer to <a href="mailadmin-260.html">Administering Mail Alias Files (Task Map)</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p></li>
<li><p>The next mechanism is <b>forwarding</b>.</p><p>This mechanism permits users to administer mail rerouting. Local users can reroute their incoming mail to the following.</p>
<ul><li><p>Another mailbox</p></li>
<li><p>A different mailer</p></li>
<li><p>Another mail host</p></li></ul>
<p>This mechanism is supported through the use of <tt>.forward</tt> files. For more information about these files, refer to <a href="#mailrefer-39"><tt>.forward</tt> Files</a> in this chapter. For a task map, refer to <a href="mailadmin-264.html">Administering <tt>.forward</tt> Files (Task Map)</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p></li>
<li><p>The last rerouting mechanism is <b>inclusion</b>.</p><p>This mechanism allows users to maintain alias lists instead of requiring <tt>root</tt> access. To provide this feature, the <tt>root</tt> user must create an appropriate entry in the alias file on the server. After this entry is created, the user can reroute mail as necessary. For more information about inclusion, refer to <a href="#mailrefer-35"><tt>/etc/mail/aliases</tt> File</a> in this chapter. For a task map, refer to <a href="mailadmin-260.html">Administering Mail Alias Files (Task Map)</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>
<hr><p><b>Note - </b>Programs that read mail, such as <tt>/usr/bin/mailx</tt>, can have aliases of their own, which are expanded before the message reaches <tt>sendmail</tt>. The aliases for <tt>sendmail</tt> can originate from a number of name service sources, such as local files, NIS, or NIS+. The order of the lookup is determined by the <tt>nsswitch.conf</tt> file. Refer to the <a href="http://docs.sun.com/doc/819-2251/nsswitch.conf-4?a=view"><tt>nsswitch.conf</tt>(4)</a> man page.</p>
<hr>
</li></ol>


<a name="mailrefer-79"></a><h5><tt>sendmail</tt> Features</h5>
<p><a name="indexterm-1442"></a>The <tt>sendmail</tt> program provides the following features.</p>
<ul><li><p><tt>sendmail</tt> is reliable. The program is designed to correctly deliver every message. No message should ever become completely lost.</p></li>
<li><p><tt>sendmail</tt> uses existing software for delivery whenever possible. For example, the user interacts with a mail-generating and a mail-sending program. When mail is submitted, the mail-generating program calls <tt>sendmail</tt>, which routes the message to the correct mailers. Because some of the senders might be network servers and some of the mailers might be network clients, <tt>sendmail</tt> can be used as an Internet mail gateway. See <a href="#mailrefer-84">Interactions of Mail Programs</a> for a more detailed description of the process.</p></li>
<li><p><tt>sendmail</tt> can be configured to handle complex environments, including multiple networks. <tt>sendmail</tt> checks the contents of an address as well as its syntax to determine which mailer to use.</p></li>
<li><p><tt>sendmail</tt> uses configuration files to control mail configuration instead of requiring that configuration information be compiled into the code.</p></li>
<li><p>Users can maintain their own mailing lists. Additionally, individuals can specify their own forwarding mechanism without modifying the domain-wide alias file, typically located in the domain-wide aliases that are maintained by NIS or NIS+.</p></li>
<li><p><a name="indexterm-1443"></a><a name="indexterm-1444"></a>Each user can specify a custom mailer to process incoming mail. The custom mailer can provide functions such as returning a message that reads: &ldquo;I am on vacation.&rdquo; See the <a href="http://docs.sun.com/doc/819-2239/vacation-1?a=view"><tt>vacation</tt>(1)</a> man page for more information. </p></li>
<li><p><tt>sendmail</tt> batches addresses to a single host to reduce network traffic.</p></li></ul>


<a name="mailrefer-80"></a><h5><tt>sendmail</tt> Configuration File</h5>
<a name="indexterm-1445"></a><p>A <b>configuration file</b> controls the way that <tt>sendmail</tt> performs its functions. The configuration file determines the
choice of delivery agents, address rewriting rules, and the format of the mail header.
The <tt>sendmail</tt> program uses the information from the <tt>/etc/mail/sendmail.cf</tt> file to perform its
functions. </p><p>The Solaris operating system provides two default configuration files in the <tt>/etc/mail</tt> directory.</p>
<ol><li><p><a name="indexterm-1446"></a><tt>sendmail.cf</tt>, a configuration file that is used to run <tt>sendmail</tt> in daemon mode.</p></li>
<li><p><tt>submit.cf</tt>, a configuration file that is used to run <tt>sendmail</tt> in mail-submission program mode, instead of daemon mode. For more information, refer to <a href="mailrefer-105.html#mailrefer-106"><tt>submit.cf</tt> Configuration File From Version 8.12 of <tt>sendmail</tt></a>.</p></li></ol>
<p><a name="indexterm-1447"></a>When setting up mail clients, mail servers, mail hosts, or mail gateways, consider the
following:</p>
<ul><li><p><a name="indexterm-1448"></a>For mail clients or mail servers, you do not need to do anything to set up or edit the default configuration file. </p></li>
<li><p><a name="indexterm-1449"></a>To set up a mail host or mail gateway, you need to set the relay mailer and relay host parameters that are needed for your mail configuration. For task information, refer to <a href="mailadmin-263.html">Setting Up Mail Services (Task Map)</a> or <a href="mailadmin-43.html">Building the <tt>sendmail.cf</tt> Configuration File</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>. Note that with <tt>sendmail</tt> version 8.13, you no longer need the <tt>main.cf</tt> file. </p></li></ul>
<p>The following list describes some configuration parameters that you can change, depending on the
requirements of your site.</p>
<ul><li><p>Time values, which specify the following information.</p>
<ul><li><p>Read timeouts.</p></li>
<li><p>Length of time a message remains undelivered in the queue before the message is returned to the sender. Refer to <a href="mailrefer-105.html#mailrefer-119">Additional Queue Features From Version 8.12 of <tt>sendmail</tt></a>. For a task map, refer to <a href="mailadmin-262.html">Administering the Queue Directories (Task Map)</a>.</p></li></ul>
</li>
<li><p>Delivery modes, which specify how quickly mail is delivered.</p></li>
<li><p>Load limits, which increase efficiency during busy periods. These parameters prevent <tt>sendmail</tt> from attempting to deliver large messages, messages to many recipients, and messages to sites that have been down for a long time.</p></li>
<li><p><a name="indexterm-1450"></a><a name="indexterm-1451"></a>Log level, which specifies the kinds of problems that are logged. </p></li></ul>


<a name="mailrefer-33"></a><h4>Mail Alias Files</h4>
<p><a name="indexterm-1452"></a>You can use any of the following files, maps, or tables to maintain aliases.
</p>
<ul><li><p><a href="#mailrefer-34"><tt>.mailrc</tt> Aliases</a></p></li>
<li><p><a href="#mailrefer-35"><tt>/etc/mail/aliases</tt> File</a></p></li>
<li><p><a href="#mailrefer-36">NIS <tt>aliases</tt> Map</a></p></li>
<li><p><a href="#mailrefer-37">NIS+ <tt>mail_aliases</tt> Table</a></p></li></ul>
<p>Your method of maintaining aliases depends on who uses the alias and who needs
to be able to change the alias. Each type of alias has unique format
requirements.</p><p>If you are looking for task information, refer to <a href="mailadmin-260.html">Administering Mail Alias Files (Task Map)</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>

<a name="mailrefer-34"></a><h5><tt>.mailrc</tt> Aliases</h5>
<p><a name="indexterm-1453"></a><a name="indexterm-1454"></a>Aliases that are listed in a <tt>.mailrc</tt> file are accessible only by the user
who owns the file. This restriction enables users to establish an alias file that they
control and that is usable only by its owner. Aliases in a <tt>.mailrc</tt>
file adhere to the following format.</p><pre>alias <i>aliasname value value value</i> ...</pre><p><i>aliasname</i> is the name that the user uses when sending mail, and <i>value</i> is a
valid email address.</p><p>If a user establishes a personal alias for <tt>scott</tt> that does not match the
email address for <tt>scott</tt> in the name service, an error occurs. Mail is
routed to the wrong person when people try to reply to mail that is
generated by this user. The only workaround is to use any of the other
aliasing mechanisms.</p>

<a name="mailrefer-35"></a><h5><tt>/etc/mail/aliases</tt> File</h5>
<p><a name="indexterm-1455"></a><a name="indexterm-1456"></a>Any alias that is established in the <tt>/etc/mail/aliases</tt> file can be used by any
user who knows the name of the alias and the host name of the
system that contains the file. Distribution list formats in a local <tt>/etc/mail/aliases</tt> file adhere to
the following format.</p><pre><i>aliasname</i>: <i>value,value,value</i> ...</pre><p><b>aliasname</b> is the name that the user uses when sending mail to this alias,
and <b>value</b> is a valid email address.</p><p>If your network is not running a name service, the <tt>/etc/mail/aliases</tt> file of
each system should contain entries for all mail clients. You can either edit the
file on each system or edit the file on one system and copy the
file to each of the other systems.</p><p>The aliases in the <tt>/etc/mail/aliases</tt> file are stored in text form. When you
edit the <tt>/etc/mail/aliases</tt> file, you need to run the <tt>newaliases</tt> program. This program recompiles
the database and makes the aliases available in binary form to the <tt>sendmail</tt> program. For
task information, refer to <a href="mailadmin-52.html#mailadmin-106">How to Set Up a Local Mail Alias File</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>. Otherwise, you can use the Mailing
List feature in the Solaris Management Console to administer the mail aliases that are stored
in the local <tt>/etc</tt> files.</p><p>You can create aliases for only local names, such as a current host name
or no host name. For example, an alias entry for user <tt>ignatz</tt> who has
a mailbox on the system <tt>saturn</tt> would have the following entry in the
<tt>/etc/mail/aliases</tt> file.</p><pre>ignatz: ignatz@saturn</pre><p><a name="indexterm-1457"></a>You should create an administrative account for each mail server.  You create such
an account by assigning a mailbox on the mail server to <tt>root</tt> and
by adding an entry for <tt>root</tt> to the <tt>/etc/mail/aliases</tt> file. For example, if the
system <tt>saturn</tt> is a mailbox server, add the entry <tt>root:</tt> <tt>sysadmin@saturn</tt> to the
<tt>/etc/mail/aliases</tt> file.  </p><p><a name="indexterm-1458"></a><a name="indexterm-1459"></a>Normally, only the <tt>root</tt> user can edit this file. However, when you use
the Solaris Management Console, all users in group 14, which is the sysadmin group,
can change the local file. Another option is to create the following entry.</p><pre><i>aliasname</i>: :include:<b>/</b><i>path</i><b>/</b><i>aliasfile</i></pre><p><b>aliasname</b> is the name that the user uses when sending mail, and <b>/path/aliasfile</b> is the
full path to the file that contains the alias list. The alias file
should include email entries, one entry on each line, and no other notations.</p><pre><i>user1@host1</i>
<i>user2@host2</i></pre><p>You can define additional mail files in <tt>/etc/mail/aliases</tt> to keep a log or a
backup copy.  The following entry stores all mail that is sent to <i>aliasname</i>
in <i>filename</i>.</p><pre><i>aliasname</i>: /home/backup/<i>filename</i></pre><p>You can also route the mail to another process. The following example stores a
copy of the mail message in <i>filename</i> and prints a copy.</p><pre><i>aliasname</i>: "|tee -a /home/backup/<i>filename</i> |lp"</pre><p>For a task map, refer to <a href="mailadmin-260.html">Administering Mail Alias Files (Task Map)</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>

<a name="mailrefer-36"></a><h5>NIS <tt>aliases</tt> Map</h5>
<p><a name="indexterm-1460"></a><a name="indexterm-1461"></a><a name="indexterm-1462"></a>All users in a local domain can use the entries that are in
the NIS <tt>aliases</tt> map. The reason is that the <tt>sendmail</tt> program can use the NIS
<tt>aliases</tt> map instead of the local <tt>/etc/mail/aliases</tt> files to determine mailing addresses. For more
information, refer to the <a href="http://docs.sun.com/doc/819-2251/nsswitch.conf-4?a=view"><tt>nsswitch.conf</tt>(4)</a> man page.</p><p>Aliases in the NIS <tt>aliases</tt> map adhere to the following format.</p><pre><i>aliasname</i>: <i>value,value,value</i> ...</pre><p><b>aliasname</b> is the name that the user uses when sending mail, and <b>value</b> is a
valid email address.</p><p>The NIS <tt>aliases</tt> map should contain entries for all mail clients. In general, only
the root user on the NIS master can change these entries. This type of
alias might not be a good choice for aliases that are constantly changing. However, such
aliases can be useful if the aliases point to another alias file, as in
the following syntax example.</p><pre><i>aliasname</i>: <i>aliasname@host</i></pre><p><i>aliasname</i> is the name that the user uses when sending mail, and <i>host</i> is the
host name for the server that contains an <tt>/etc/mail/alias</tt> file.</p><p>For task information, refer to <a href="mailadmin-52.html#mailadmin-93">How to Set Up an NIS <tt>mail.aliases</tt> Map</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>

<a name="mailrefer-37"></a><h5>NIS+ <tt>mail_aliases</tt> Table</h5>
<p><a name="indexterm-1463"></a><a name="indexterm-1464"></a><a name="indexterm-1465"></a>The NIS+ <tt>mail_aliases</tt> table contains the names by which a system or person
is known in the local domain. The <tt>sendmail</tt> program can use the NIS+
<tt>mail_aliases</tt> table, instead of the local <tt>/etc/mail/aliases</tt> files, to determine mailing addresses. Refer to the
<a href="http://docs.sun.com/doc/819-2240/aliasadm-1m?a=view"><tt>aliasadm</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2251/nsswitch.conf-4?a=view"><tt>nsswitch.conf</tt>(4)</a> man pages for more information.</p><p>Aliases in the NIS+ <tt>mail_aliases</tt> table adhere to the following format:</p><pre><i>alias</i>: <i>expansion</i> # ["<i>options</i>" # "<i>comments</i>"]</pre><p><a href="#mailrefer-tbl-38">Table&nbsp;14-12</a> describes the four columns that are in an NIS+ <tt>mail_aliases</tt> table.</p><a name="mailrefer-tbl-38"></a><h6>Table&nbsp;14-12 Columns in the NIS+ <tt>mail_aliases</tt> Table</h6><table><col width="2*"><col width="7*"><tr><th align="left" valign="top" scope="column"><p>Column</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>alias</tt></p></td>
<td align="left" valign="top" scope="row"><p>The name
of the alias</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>expansion</tt></p></td>
<td align="left" valign="top" scope="row"><p>The value of the alias or a list of aliases as
it would appear in a <tt>sendmail</tt> <tt>/etc/mail/aliases</tt> file</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>options</tt></p></td>
<td align="left" valign="top" scope="row"><p>The column that is reserved for future
use</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>comments</tt></p></td>
<td align="left" valign="top" scope="row"><p>The column for comments about an individual alias</p></td>
</tr>
</table><p>The NIS+ <tt>mail_aliases</tt> table should contain entries for all mail clients. You can list,
create, modify, and delete entries in the NIS+ <tt>aliases</tt> table with the <tt>aliasadm</tt>
command. To use the <tt>aliasadm</tt> command, you must be a member of the
NIS+ group that owns the <tt>aliases</tt> table. For task information, refer to <a href="mailadmin-260.html">Administering Mail Alias Files (Task Map)</a> in
<a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>. Alternately, you can use the Solaris Management Console to administer the NIS+ mail aliases.</p>
<hr><p><b>Note - </b>If you are creating a new NIS+ <tt>aliases</tt> table, you must initialize the table
before you create the entries. If the table exists, no initialization is needed.</p>
<hr>


<a name="mailrefer-39"></a><h4><tt>.forward</tt> Files</h4>
<p><a name="indexterm-1466"></a><a name="indexterm-1467"></a>Users can create a <tt>.forward</tt> file in their home directories that <tt>sendmail</tt>, along with
other programs, can use to redirect mail or send mail. Refer to the following
topics.</p>
<ul><li><p><a href="#mailrefer-97">Situations to Avoid</a></p></li>
<li><p><a href="#mailrefer-98">Controls for <tt>.forward</tt> files</a></p></li>
<li><p><a href="#mailrefer-99"><tt>.forward.</tt><i>hostname</i> File</a></p></li>
<li><p><a href="#mailrefer-100"><tt>.forward+</tt><i>detail</i> File</a></p></li></ul>
<p>For a task map, refer to <a href="mailadmin-264.html">Administering <tt>.forward</tt> Files (Task Map)</a> in <a href="mailadmin-1.html">Chapter&nbsp;13, Mail Services (Tasks)</a>.</p>

<a name="mailrefer-97"></a><h5>Situations to Avoid</h5>
<p>The following list describes some situations that you can avoid or easily fix.</p>
<ul><li><p>If mail is not being delivered to the expected address, check the user's <tt>.forward</tt> file. The user might have put the <tt>.forward</tt> file in the home directory of <tt>host1</tt>, which forwards mail to <tt>user@host2</tt>. When the mail arrives at <tt>host2</tt>, <tt>sendmail</tt> checks for <tt>user</tt> in the NIS or NIS+ aliases and sends the message back to <tt>user@host1</tt>. This routing results in a loop and more bounced mail.</p></li>
<li><p>To avoid security problems, never put <tt>.forward</tt> files in the <tt>root</tt> and <tt>bin</tt> accounts. If necessary, forward the mail by using the <tt>aliases</tt> file instead.</p></li></ul>


<a name="mailrefer-98"></a><h5>Controls for <tt>.forward</tt> files</h5>
<p>For the <tt>.forward</tt> files to be an effective part of mail delivery, ensure that
the following controls (mostly permissions settings) are correctly applied.</p>
<ul><li><p>The <tt>.forward</tt> file must be writable only by the owner of the file. This restriction prevents other users from breaking security.</p></li>
<li><p>The paths that lead to the home directory must be owned and writable by <tt>root</tt> only. For example, if a <tt>.forward</tt> file is in <tt>/export/home/terry</tt>, <tt>/export</tt> and <tt>/export/home</tt> must be owned and writable by <tt>root</tt> only.</p></li>
<li><p>The actual home directory should be writable only by the user.</p></li>
<li><p>The <tt>.forward</tt> file cannot be a symbolic link, and this file cannot have more than one hard link.</p></li></ul>


<a name="mailrefer-99"></a><h5><tt>.forward.</tt><i>hostname</i> File</h5>
<p><a name="indexterm-1468"></a>You can create a <tt>.forward.</tt><i>hostname</i> file to redirect mail that is sent to
a specific host. For example, if a user's alias has changed from <tt>sandy@phoenix.example.com</tt> to
<tt>sandy@example.com</tt>, place a <tt>.forward.phoenix</tt> file in the home directory for <tt>sandy</tt>.</p><pre>% <tt><b>cat .forward.phoenix</b></tt>
sandy@example.com
"|/usr/bin/vacation sandy"
% <tt><b>cat .vacation.msg</b></tt>
From: sandy@example.com (via the vacation program)
Subject: my alias has changed

My alias has changed to sandy@example.com.
Please use this alias in the future.
The mail that I just received from you
has been forwarded to my new address.

Sandy</pre><p>In this example, mail can be forwarded to the correct place while the sender
is notified of the alias change. Because the <tt>vacation</tt> program permits only one message
file, you can forward only one message at a time. However, if the message
is not host specific, one vacation message file can be used by <tt>.forward</tt> files for
many hosts.</p>

<a name="mailrefer-100"></a><h5><tt>.forward+</tt><i>detail</i> File</h5>
<p><a name="indexterm-1469"></a>Another extension to the forwarding mechanism is the <tt>.forward+</tt><i>detail</i> file. The <i>detail</i> string can be
any sequence of characters except operator characters. The operator characters are <tt>.:%&amp;!^[]+</tt>. By using this
type of file, you can determine if someone else is using your email address
without your knowledge. For instance, if a user tells someone to use the email
address <tt>sandy+test1@example.com</tt>, the user would be able to identify any future mail that
was delivered to this alias. By default, any mail that is sent to the
<tt>sandy+test1@example.com</tt> alias is checked against the alias and the <tt>.forward+</tt><i>detail</i> files. If no matches
are made, the mail falls back to delivery to <tt>sandy@example.com</tt>, but the user
is able to see a change in the <tt>To:</tt> mail header.</p>

<a name="mailrefer-44"></a><h4><tt>/etc/default/sendmail</tt> File</h4>
<p><a name="indexterm-1470"></a>This file is used to store startup options for <tt>sendmail</tt> so that the options
are not removed when a host is upgraded. The following variables can be used.</p><dl><dt>CLIENTOPTIONS=&ldquo;<i>string</i>&rdquo;</dt>
<dd><p>Selects additional options to be used with the client daemon, which looks in the client-only queue (<tt>/var/spool/clientmqueue</tt>) and acts as a client queue runner. No syntax checking is done, so be careful when making changes to this variable.</p></dd>
<dt>CLIENTQUEUEINTERVAL=<i>#</i></dt>
<dd><p>Similar to the <tt>QUEUEINTERVAL</tt> option, <tt>CLIENTQUEUEINTERVAL</tt> sets the time interval for mail queue runs. However, the <tt>CLIENTQUEUEINTERVAL</tt> option controls the functions of the client daemon, rather than the functions of the master daemon. Typically, the master daemon is able to deliver all messages to the SMTP port. However, if the message load is too high or the master daemon is not running, then messages go into the client-only queue, <tt>/var/spool/clientmqueue</tt>. The client daemon, which checks in the client-only queue, then acts as a client queue processor.</p></dd>
<dt>ETRN_HOSTS=&ldquo;<i>string</i>&rdquo;</dt>
<dd><p>Enables an SMTP client and server to interact immediately without waiting for the queue run intervals, which are periodic. The server can immediately deliver the portion of its queue that goes to the specified hosts. For more information, refer to the <a href="http://docs.sun.com/doc/819-2240/etrn-1m?a=view"><tt>etrn</tt>(1M)</a> man page.</p></dd>
<dt>MODE=-bd</dt>
<dd><p>Selects the mode to start <tt>sendmail</tt> with. Use the <tt>-bd</tt> option or leave it undefined.</p></dd>
<dt>OPTIONS=<i>string</i></dt>
<dd><p>Selects additional options to be used with the master daemon. No syntax checking is done, so be careful when making changes to this variable.</p></dd>
<dt>QUEUEINTERVAL=<i>#</i></dt>
<dd><p>Sets the interval for mail queue runs on the master daemon. <i>#</i> can be a positive integer that is followed by either <tt>s</tt> for seconds, <tt>m</tt> for minutes, <tt>h</tt> for hours, <tt>d</tt> for days, or <tt>w</tt> for weeks. The syntax is checked before <tt>sendmail</tt> is started. If the interval is negative or if the entry does not end with an appropriate letter, the interval is ignored and <tt>sendmail</tt> starts with a queue interval of 15 minutes.</p></dd>
<dt>QUEUEOPTIONS=p</dt>
<dd><p>Enables one persistent queue runner that sleeps between queue run intervals, instead of a new queue runner for each queue run interval. You can set this option to <tt>p</tt>, which is the only setting available. Otherwise, this option is not set.</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="mailrefer-53.html">Previous</a>
             </td>
             <td align="right">
                 <a href="mailrefer-14.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

