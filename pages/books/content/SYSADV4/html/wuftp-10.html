<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Up FTP Server Logins - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wuftp-43.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wuftp-29.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level3"><a href="wuftp-231.html">Administering the FTP Server (Task Map)</a></p>
<p class="toc level3"><a href="wuftp-43.html">Controlling FTP Server Access</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-45">How to Define FTP Server Classes</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-162">How to Set User Login Limits</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-167">How to Control the Number of Invalid Login Attempts</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-44a">How to Disallow FTP Server Access to Particular Users</a></p>
<p class="toc level4"><a href="wuftp-43.html#wuftp-51">How to Restrict Access to the Default FTP Server</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Setting Up FTP Server Logins</a></p>
<p class="toc level4"><a href="#wuftp-153">How to Set Up Real FTP Users</a></p>
<p class="toc level4"><a href="#wuftp-18">How to Set Up Guest FTP Users</a></p>
<p class="toc level4"><a href="#wuftp-18g">How to Set Up Anonymous FTP Users</a></p>
<p class="toc level4"><a href="#wuftp-18-a">How to Create the <tt>/etc/shells</tt> file</a></p>
</div>
<p class="toc level3 tocsp"><a href="wuftp-29.html">Customizing Message Files</a></p>
<p class="toc level4"><a href="wuftp-29.html#wuftp-31">How to Customize Message Files</a></p>
<p class="toc level4"><a href="wuftp-29.html#wuftp-37">How to Create Messages to Be Sent to Users</a></p>
<p class="toc level4"><a href="wuftp-29.html#wuftp-79">How to Configure the README Option</a></p>
<p class="toc level3 tocsp"><a href="wuftp-14.html">Controlling Access to Files on the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-14.html#wuftp-63a">How to Control File Access Commands</a></p>
<p class="toc level3 tocsp"><a href="wuftp-15.html">Controlling Uploads and Downloads on the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-15.html#wuftp-85">How to Control Uploads to the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-15.html#wuftp-173">How to Control Downloads to the FTP Server</a></p>
<p class="toc level3 tocsp"><a href="wuftp-15a2.html">Virtual Hosting</a></p>
<p class="toc level4"><a href="wuftp-15a2.html#wuftp-179">How to Enable Limited Virtual Hosting</a></p>
<p class="toc level4"><a href="wuftp-15a2.html#wuftp-184">How to Enable Complete Virtual Hosting</a></p>
<p class="toc level3 tocsp"><a href="wuftp-189.html">Starting the FTP Server Automatically</a></p>
<p class="toc level4"><a href="wuftp-189.html#wuftp-191">How to Start an FTP Server Using SMF</a></p>
<p class="toc level4"><a href="wuftp-189.html#wuftp-197">How to Start a Standalone FTP Server in the Background</a></p>
<p class="toc level4"><a href="wuftp-189.html#egcoo">How to Start a Standalone FTP Server in the Foreground</a></p>
<p class="toc level3 tocsp"><a href="wuftp-203.html">Shutting Down the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-203.html#wuftp-204">How to Shut Down the FTP Server</a></p>
<p class="toc level3 tocsp"><a href="wuftp-210.html">Debugging the FTP Server</a></p>
<p class="toc level4"><a href="wuftp-210.html#wuftp-proc-221">How to Check <tt>syslogd</tt> for FTP Server Messages</a></p>
<p class="toc level4"><a href="wuftp-210.html#wuftp-proc-211">How to Use <tt>greeting text</tt> to Verify <tt>ftpaccess</tt></a></p>
<p class="toc level4"><a href="wuftp-210.html#wuftp-proc-217">How to Check the Commands Executed by FTP Users</a></p>
<p class="toc level3 tocsp"><a href="egcom.html">Configuration Help for Busy Sites</a></p>
<p class="toc level2 tocsp"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="wuftp-10"></a><h3>Setting Up FTP Server Logins</h3>
<p>To access an FTP server, you must first log in. The FTP
server supports three types of user login accounts for <b>real</b>, <b>guests</b>, and <b>anonymous</b>
users.</p>
<ul><li><p><b>Real</b> users have accounts that allow them to establish terminal sessions on systems that run the FTP server. Subject to directory and file access permissions, the entire disk structure is visible to real users.</p></li>
<li><p><b>Guest</b> users also need accounts to log in to the FTP server. Each guest account is set up with a user name and password. Functioning login shells are not assigned to guests to prevent users from establishing terminal sessions. At login, the FTP server performs a <a href="http://docs.sun.com/doc/819-2241/chroot-2?a=view"><tt>chroot</tt>(2)</a> operation to restrict a guest's view of the server's disk structure.</p>
<hr><p><b>Note - </b>Login shells for real and guest users must be listed in the <tt>/etc/shells</tt> file to allow access to the FTP server.</p>
<hr>
</li>
<li><p><b>Anonymous</b> users log in to the FTP server by using the either <tt>ftp</tt> or <tt>anonymous</tt> as a user name. By convention, anonymous users supply an email address when prompted for a password.</p><p>At login, the FTP server performs a <a href="http://docs.sun.com/doc/819-2241/chroot-2?a=view"><tt>chroot</tt>(2)</a> operation that restricts the anonymous user's view of the server's disk structure. A single file area is shared by all anonymous users, unlike the separate areas that can be created for each guest user.</p><p>Real and guest users log in by using individual accounts with passwords that are known only to one person. Anonymous users log in to a well-known account that is potentially available to anyone. Most large-scale file distribution is created by using the anonymous account.</p></li></ul>


<a name="wuftp-153"></a><h4>How to Set Up Real FTP Users</h4><p><a name="indexterm-2931"></a>To enable access for real users to the FTP server, follow these instructions:</p><ol>
<li><a name="wuftp-step-150"></a><b>Verify that the user has an account that is set up with a
user name and password that can be used to establish a terminal session.</b><p>For more information, see <a href="http://docs.sun.com/doc/819-2379/userconcept-97366?a=view">Chapter 4, Managing User Accounts and Groups (Overview), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="wuftp-step-151"></a><b>Confirm that the real user is a member of a class in the
<tt>ftpaccess</tt> file.</b><p>For information on the user classes that are defined in the <tt>ftpaccess</tt> file, see
<a href="wuftp-43.html#wuftp-45">How to Define FTP Server Classes</a>.</p></li>
<li><a name="wuftp-step-152"></a><b>Verify that the user's login shell is listed in the <tt>/etc/shells</tt> file.</b></li></ol>

<a name="wuftp-18"></a><h4>How to Set Up Guest FTP Users</h4><p><a name="indexterm-2932"></a>The <tt>ftpconfig</tt> script is used to copy all necessary system files to the
home directory. When the guest user and the guest's home directory already exist,
the <tt>ftpconfig</tt> script updates the area with the current system files.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2240/ftpconfig-1m?a=view"><tt>ftpconfig</tt>(1M)</a></p>
<hr><p><b>Note - </b>Unlike the user name (<tt>anonymous</tt> or <tt>ftp</tt>) that is set for anonymous users,
user names for FTP guests are not fixed. Any name that would work
as a real user name can be selected.</p>
<hr>
<p>To enable access by a guest user to the FTP server, do
the following:</p><ol>
<li><a name="wuftp-step-153"></a><b>Use the <tt>useradd</tt> script to create a guest user account with a login
shell of <tt>/bin/true</tt> and a home directory of <tt></tt><i>/root-dir/./home-dir</i><tt></tt>. </b><p>For more information, see <a href="http://docs.sun.com/doc/819-2240/useradd-1m?a=view"><tt>useradd</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2379/userconcept-97366?a=view">Chapter 4, Managing User Accounts and Groups (Overview), in <i>System Administration Guide: Basic Administration</i></a>.</p>
<hr><p><b>Note - </b>In this procedure, <tt><b>/home/guests/./guest1</b></tt> is used as the home directory name for a
user who is called <tt>guest1</tt>.</p>
<hr>
<pre># <tt><b>/usr/sbin/useradd -m -c "Guest FTP" -d \</b></tt>
  <tt><b>/home/guests/./guest1 -s /bin/true guest1</b></tt></pre></li>
<li><a name="wuftp-step-155"></a><b>Assign a password to the guest account.</b></li>
<li><a name="wuftp-step-156"></a><b>Add a <tt>guestuser</tt> entry to the <tt>ftpaccess</tt> file.</b><pre>guestuser guest1</pre>
<hr><p><b>Note - </b>You can also use the <tt>guestgroup</tt> capability in the <tt>ftpaccess</tt> file to specify
guest users. The <tt>guest-root</tt> capability in <tt>ftpaccess</tt> eliminates the need for the <tt>/./</tt>
in the guest user's home directory path.</p>
<hr>
</li>
<li><a name="wuftp-step-155gg"></a><b>Confirm that the guest user is a member of a <tt>class</tt> in the
<tt>ftpaccess</tt> file. See <a href="wuftp-43.html#wuftp-45">How to Define FTP Server Classes</a> for further information.</b></li>
<li><a name="wuftp-step-157"></a><b>Use the <tt>ftpconfig</tt> script to create the required files in the <tt>chroot</tt> area.</b><pre><tt><b>/usr/sbin/ftpconfig -d /home/guests</b></tt></pre></li>
<li><a name="wuftp-step-156g"></a><b>Confirm that <tt>/bin/true</tt> is listed in the <tt>/etc/shells</tt> file. See <a href="#wuftp-18-a">How to Create the <tt>/etc/shells</tt> file</a>.</b></li></ol>Example&nbsp;28-6 Setting Up a Guest FTP Server<p>In this example, the FTP area is set up in the <tt>/home/guests</tt>
directory.</p><pre># <tt><b>/usr/sbin/ftpconfig -d /home/guests</b></tt>
Updating directory /home/guests</pre>

<a name="wuftp-18g"></a><h4>How to Set Up Anonymous FTP Users</h4><p><a name="indexterm-2933"></a>The <tt>ftpconfig</tt> script creates the <tt>anonymous</tt> user account and populates the home
directory with the required files.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2240/ftpconfig-1m?a=view"><tt>ftpconfig</tt>(1M)</a>.</p><p>To enable access by an anonymous user to the FTP server, follow
these instructions:</p><ol>
<li><a name="wuftp-step-153a"></a><b>Use the <tt>ftpconfig</tt> script to create the anonymous user account. </b><pre>/usr/sbin/ftpconfig <i>anonymous-ftp-directory</i></pre></li>
<li><a name="wuftp-step-154a"></a><b>Confirm that the anonymous user is assigned to a <tt>class</tt> in the <tt>ftpaccess</tt>
file. </b><p>See <a href="wuftp-43.html#wuftp-45">How to Define FTP Server Classes</a> for further information.</p></li></ol>Example&nbsp;28-7 Setting Up Anonymous FTP Users<p>In this example, the FTP area is set up in the <tt>/home/ftp</tt>
directory.</p><pre># <tt><b>/usr/sbin/ftpconfig /home/ftp</b></tt>
Creating user ftp
Updating directory /home/ftp</pre>

<a name="wuftp-18-a"></a><h4>How to Create the <tt>/etc/shells</tt> file</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="wuftp-step-18a2"></a><b>Create the <tt>/etc/shells</tt> file.</b></li>
<li><a name="wuftp-step-18a2a"></a><b>Edit <tt>/etc/shells</tt>. Add the full path to each shell on a single line.</b></li></ol>Example&nbsp;28-8 Creating the /etc/shells file<p>The following is an example of an <tt>/etc/shells</tt> file with a <tt>/bin/true</tt> listed
for FTP guest users:</p><pre>/sbin/sh 
/bin/csh 
/bin/jsh 
/bin/ksh 
/bin/remsh 
/bin/rksh 
/bin/rsh 
/bin/sh 
/usr/bin/csh 
/usr/bin/ksh 
/usr/bin/bash 
/usr/bin/tcsh
/usr/bin/zsh 
/bin/true</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wuftp-43.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wuftp-29.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

