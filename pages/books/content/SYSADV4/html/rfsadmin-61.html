<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mounting File Systems - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rfsadmin-56.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rfsadmin-68.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level2"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level3"><a href="rfsadmin-56.html">Automatic File-System Sharing</a></p>
<p class="toc level4"><a href="rfsadmin-56.html#rfsadmin-57">How to Set Up Automatic File-System Sharing</a></p>
<p class="toc level4"><a href="rfsadmin-56.html#rfsadmin-112">How to Enable WebNFS Access</a></p>
<p class="toc level4"><a href="rfsadmin-56.html#rfsadmin-101">How to Enable NFS Server Logging</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Mounting File Systems</a></p>
<p class="toc level4"><a href="#rfsadmin-62">How to Mount a File System at Boot Time</a></p>
<p class="toc level4"><a href="#rfsadmin-66">How to Mount a File System From the Command Line</a></p>
<p class="toc level4"><a href="#rfsadmin-75">How to Disable Large Files on an NFS Server</a></p>
<p class="toc level4"><a href="#rfsadmin-81">How to Use Client-Side Failover</a></p>
<p class="toc level4"><a href="#rfsadmin-84">How to Disable Mount Access for One Client</a></p>
<p class="toc level4"><a href="#rfsadmin-88">How to Mount an NFS File System Through a Firewall</a></p>
<p class="toc level4"><a href="#rfsadmin-92">How to Mount an NFS File System Using an NFS URL</a></p>
</div>
<p class="toc level3 tocsp"><a href="rfsadmin-68.html">Setting Up NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-69">How to Start the NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-72">How to Stop the NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-121">How to Start the Automounter</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-124">How to Stop the Automounter</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-965">How to Select Different Versions of NFS on a Server</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#rfsadmin-966">How to Select Different Versions of NFS on a Client by Modifying the <tt>/etc/default/nfs</tt> File</a></p>
<p class="toc level4"><a href="rfsadmin-68.html#ekqwg">How to Use the Command Line to Select Different Versions of NFS on a Client</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-96.html">Administering the Secure NFS System</a></p>
<p class="toc level4"><a href="rfsadmin-96.html#rfsadmin-97">How to Set Up a Secure NFS Environment With DH Authentication</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-110.html">WebNFS Administration Tasks</a></p>
<p class="toc level3"><a href="rfsadmin-127.html">Task Overview for Autofs Administration</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-250">How to Use the <tt>/etc/default/autofs</tt> File</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-133">How to Modify the Master Map</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-139">How to Modify Indirect Maps</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-142">How to Modify Direct Maps</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-149">How to Access CD-ROM Applications With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-152">How to Access PC-DOS Data Diskettes With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-156">How to Access NFS File Systems by Using CacheFS</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-162">How to Set Up <tt>/home</tt> With Multiple Home Directory File Systems</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-166">How to Consolidate Project-Related Files Under <tt>/ws</tt></a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-171">How to Set Up Different Architectures to Access a Shared Namespace</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-179">How to Support Incompatible Client Operating System Versions</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-183">How to Replicate Shared Files Across Several Servers</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-186">How to Apply Autofs Security Restrictions</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-189">How to Use a Public File Handle With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-192">How to Use NFS URLs With Autofs</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-196">How to Completely Disable Autofs Browsability on a Single NFS Client</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-200">How to Disable Autofs Browsability for All Clients</a></p>
<p class="toc level4"><a href="rfsadmin-127.html#rfsadmin-204">How to Disable Autofs Browsability on a Selected File System</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-214.html">Strategies for NFS Troubleshooting</a></p>
<p class="toc level3"><a href="rfsadmin-215.html">NFS Troubleshooting Procedures</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-216">How to Check Connectivity on an NFS Client</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-224">How to Check the NFS Server Remotely</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-231">How to Verify the NFS Service on the Server</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-240">How to Restart NFS Services</a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-243">How to Warm-Start <tt>rpcbind</tt></a></p>
<p class="toc level4"><a href="rfsadmin-215.html#rfsadmin-251">How to Verify Options Used With the <tt>mount</tt> Command</a></p>
<p class="toc level3 tocsp"><a href="rfsadmin-210.html">Troubleshooting Autofs</a></p>
<p class="toc level3"><a href="rfsadmin-255.html">NFS Error Messages</a></p>
<p class="toc level2 tocsp"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rfsadmin-61"></a><h3>Mounting File Systems</h3>
<p><a name="indexterm-189"></a><a name="indexterm-190"></a>You can mount file systems in several ways. File systems can be mounted
automatically when the system is booted, on demand from the command line, or
through the automounter. The automounter provides many advantages to mounting at boot time
or mounting from the command line. However, many situations require a combination of
all three methods. Additionally,  several ways of enabling or disabling processes exist,
depending on the options you use when mounting the file system. See the
following table for a complete list of the tasks that are associated with
file-system mounting.</p><a name="rfsadmin-tbl-171"></a><h6>Table&nbsp;5-2 Task Map for Mounting File Systems</h6><table><col width="110*"><col width="167*"><col width="119*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount a file system at boot time</p></td>
<td align="left" valign="top" scope="row"><p>Steps so that a
file system is mounted whenever a system is rebooted.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-62">How to Mount a File System at Boot Time</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount a file system
by using a command</p></td>
<td align="left" valign="top" scope="row"><p>Steps to mount a file system when a system
is running. This procedure is useful when testing.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-66">How to Mount a File System From the Command Line</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount with the automounter</p></td>
<td align="left" valign="top" scope="row"><p>Steps to access
a file system on demand without using the command line.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-67">Mounting With the Automounter</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Prevent large files</p></td>
<td align="left" valign="top" scope="row"><p>Steps
to prevent large files from being created on a file system.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-75">How to Disable Large Files on an NFS Server</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Start client-side
failover</p></td>
<td align="left" valign="top" scope="row"><p>Steps to enable the automatic switchover to a working file system if a
server fails.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-81">How to Use Client-Side Failover</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Disable mount access for a client</p></td>
<td align="left" valign="top" scope="row"><p>Steps to disable the ability of
one client to access a remote file system.</p>
<hr><p><b>Note - </b>The procedure shows you how to
use the <tt>sharemgr</tt> command. The example that follows the procedure uses the <tt>share</tt>
and <tt>shareall</tt> commands to complete the same task.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-84">How to Disable Mount Access for One Client</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Provide access to a file system
through a firewall</p></td>
<td align="left" valign="top" scope="row"><p>Steps to allow access to a file system through a
firewall by using the WebNFS protocol.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-88">How to Mount an NFS File System Through a Firewall</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount a file system by using an NFS
URL</p></td>
<td align="left" valign="top" scope="row"><p>Steps to allow access to a file system by using an NFS
URL. This process allows for file-system access without using the MOUNT protocol.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#rfsadmin-92">How to Mount an NFS File System Using an NFS URL</a>.</p></td>
</tr>
</table>

<a name="rfsadmin-62"></a><h4>How to Mount a File System at Boot Time</h4><p><a name="indexterm-191"></a><a name="indexterm-192"></a>If you want to mount file systems at boot time instead of
using autofs maps, follow this procedure. This procedure must be completed on every client
that should have access to remote file systems.   </p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rfsadmin-step-64"></a><b>Add an entry for the file system to <tt>/etc/vfstab</tt>.</b><p><a name="indexterm-193"></a><a name="indexterm-194"></a>Entries in the <tt>/etc/vfstab</tt> file have the following syntax:</p><pre>special  fsckdev  mountp  fstype  fsckpass  mount-at-boot  mntopts</pre><p>See the <a href="http://docs.sun.com/doc/819-2251/vfstab-4?a=view"><tt>vfstab</tt>(4)</a> man page for more information.</p>
<hr><p><b>Caution - </b><a name="indexterm-195"></a><a name="indexterm-196"></a><a name="indexterm-197"></a>NFS servers that also have NFS client <tt>vfstab</tt> entries must always specify the
<tt>bg</tt> option to avoid a system hang during reboot. For more information, see
<a href="rfsrefer-13.html#rfsrefer-16"><tt>mount</tt> Options for NFS File Systems</a>.</p>
<hr>
</li></ol><a name="rfsadmin-ex-233"></a>Example&nbsp;5-4 Entry in the Client's <tt>vfstab</tt> File<p>You want a client machine to mount the <tt>/var/mail</tt> directory from the server
<tt>wasp</tt>. You want the file system to be mounted as <tt>/var/mail</tt> on the
client and you want the client to have read-write access. Add the following
entry to the client's <tt>vfstab</tt> file.</p><pre>wasp:/var/mail - /var/mail nfs - yes rw</pre>

<a name="rfsadmin-66"></a><h4>How to Mount a File System From the Command Line</h4><p><a name="indexterm-198"></a>Mounting a file system from the command line is often performed to test
a new mount point. This type of mount allows for temporary access to
a file system that is not available through the automounter.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rfsadmin-step-192"></a><b>Mount the file system.</b><p><a name="indexterm-199"></a><a name="indexterm-200"></a>Type the following command:</p><pre># <tt><b>mount -F nfs -o ro bee:/export/share/local /mnt</b></tt></pre><p>In this instance, the <tt>/export/share/local</tt> file system from the server <tt>bee</tt> is mounted
on read-only <tt>/mnt</tt> on the local system. Mounting from the command line
allows for temporary viewing of the file system. You can unmount the file
system with <tt>umount</tt> or by rebooting the local host.</p>
<hr><p><b>Caution - </b>Starting with the Solaris 2.6 release, all versions of the <tt>mount</tt> command
do not warn about invalid options. The command silently ignores any options that
cannot be interpreted. To prevent unexpected behavior, ensure that you verify all of
the options that were used.</p>
<hr>
</li></ol>

<a name="rfsadmin-67"></a><h4>Mounting With the Automounter</h4>
<p><a name="indexterm-201"></a><a name="indexterm-202"></a><a href="rfsadmin-127.html">Task Overview for Autofs Administration</a> includes the specific instructions for establishing and supporting mounts with the automounter.
Without any changes to the generic system, clients should be able to access
remote file systems through the <tt>/net</tt> mount point. To mount the <tt>/export/share/local</tt> file
system from the previous example,  type the following:  </p><pre>% <tt><b>cd /net/bee/export/share/local</b></tt></pre><p>Because the automounter allows all users to mount file systems, <tt>root</tt> access
is not required. The automounter also provides for automatic unmounting of file systems,
so you do not need to unmount file systems after you are finished.</p>

<a name="rfsadmin-75"></a><h4>How to Disable Large Files on an NFS Server</h4><p><a name="indexterm-203"></a><a name="indexterm-204"></a>For servers that are supporting clients that cannot handle a file over 2
GBytes, you might need to disable the ability to create large files.</p>
<hr><p><b>Note - </b>Versions prior to the 2.6 release of the Solaris release cannot use large
files. If the clients need to access large files, check that the clients
of the NFS server are running, at minimum, the 2.6 release.</p>
<hr>
<ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rfsadmin-step-77"></a><b>Check that no large files exist on the file system.</b><p>For example:</p><pre># <tt><b>cd /export/home1</b></tt>
# <tt><b>find . -xdev -size +2000000 -exec ls -l {} \;</b></tt></pre><p>If large files are on the file system, you must remove or
move these files  to another file system.</p></li>
<li><a name="rfsadmin-step-78"></a><b>Unmount the file system.</b><pre># <tt><b>umount /export/home1</b></tt></pre></li>
<li><a name="rfsadmin-step-79"></a><b>Reset the file system state if the file system has been mounted by
using <tt>largefiles</tt>.</b><p><tt>fsck</tt> resets the file system state if no large files exist on the
file system:</p><pre># <tt><b>fsck /export/home1</b></tt></pre></li>
<li><a name="rfsadmin-step-80"></a><b><a name="indexterm-205"></a><a name="indexterm-206"></a><a name="indexterm-207"></a>Mount the file system by using <tt>nolargefiles</tt>.</b><pre># <tt><b>mount -F ufs -o nolargefiles /export/home1</b></tt></pre><p><a name="indexterm-208"></a><a name="indexterm-209"></a><a name="indexterm-210"></a>You can mount from the command line, but to make the option
more permanent, add an entry that resembles the following into <tt>/etc/vfstab</tt>:</p><pre>/dev/dsk/c0t3d0s1 /dev/rdsk/c0t3d0s1 /export/home1  ufs  2  yes  nolargefiles</pre></li></ol>

<a name="rfsadmin-81"></a><h4>How to Use Client-Side Failover</h4><a name="indexterm-211"></a><a name="indexterm-212"></a><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rfsadmin-step-83"></a><b>On the NFS client, mount the file system by using the <tt>ro</tt> option.</b><p><a name="indexterm-213"></a><a name="indexterm-214"></a>You can mount from the command line, through the automounter, or by adding
an entry to <tt>/etc/vfstab</tt> that resembles the following: </p><pre>bee,wasp:/export/share/local  -  /usr/local  nfs  -  no  ro</pre><p>This syntax has been allowed by the automounter. However, the failover was not
available while file systems were mounted, only when a server was being selected.</p>
<hr><p><b>Note - </b>Servers that are running different versions of the NFS protocol cannot be mixed
by using a command line or in a <tt>vfstab</tt> entry. Mixing servers that
support NFS version 2, version 3, or version 4 protocols can only be
performed with autofs. In autofs, the best subset of version 2, version 3,
or version 4 servers is used.</p>
<hr>
</li></ol>

<a name="rfsadmin-84"></a><h4>How to Disable Mount Access for One Client</h4><p>Starting with the Solaris Express, Developer Edition 2/07 release, you can do the
following:</p>
<ul><li><p>Use the <tt>sharemgr</tt> utility to share file systems, set property values for the shared file systems, and perform related tasks. For information about <tt>sharemgr</tt>, including descriptions of subcommands and properties, see the <tt>sharemgr</tt>(1M) man page and <a href="rfsrefer-13.html#gcrvu"><tt>sharemgr</tt> Command</a>.</p></li>
<li><p>Use the <tt>sharectl</tt> utility to configure file-sharing protocols, such as NFS. See the <tt>sharectl</tt>(1M) man page and <a href="rfsrefer-13.html#gecpc"><tt>sharectl</tt> Command</a>.</p></li></ul>

<hr><p><b>Note - </b>When you use <tt>sharemgr</tt>, you do not need to use the <tt>share</tt>, <tt>shareall</tt>,
 and <tt>unshare</tt> commands. Also, you do not need to edit the <tt>/etc/dfs/dfstab</tt>
file.</p>
<hr>
<p>The following procedure uses the <tt>sharemgr</tt> utility. If you prefer to use the
<tt>share</tt> and <tt>shareall</tt> utilities, see the example that follows this procedure.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rfsadmin-step-86"></a><b>Disable mount access for one client.</b><p>For example:</p><pre># sharemgr set ro=-rose:eng my-group</pre><dl><dt><tt>-rose:eng</tt></dt>
<dd><p>The access-list that allows mount access to all clients in the <tt>eng</tt> netgroup except the host, <tt>rose</tt></p></dd>
<dt><tt>my-group</tt></dt>
<dd><p>The share group</p></dd>
</dl>
</li></ol><a name="gedmr"></a>Example&nbsp;5-5 How to Use the <tt>share</tt> and <tt>shareall</tt> Commands to Disable Mount Access for One Client<a name="indexterm-215"></a><a name="indexterm-216"></a>
<ol><li><p>Become superuser or assume an equivalent role.</p><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><p>Add an entry in <tt>/etc/dfs/dfstab</tt>.</p><p><a name="indexterm-217"></a><a name="indexterm-218"></a>The first example allows mount access to all clients in the <tt>eng</tt> netgroup except the host that is named <tt>rose</tt>. The second example allows mount access to all clients in the <tt>eng.example.com</tt> DNS domain except for <tt>rose</tt>.</p><pre>share -F nfs -o ro=-rose:eng /export/share/man
share -F nfs -o ro=-rose:.eng.example.com /export/share/man</pre><p>For additional information about access lists, see <a href="rfsrefer-13.html#rfsrefer-27">Setting Access Lists With the <tt>share</tt> Command</a>. For a description of <tt>/etc/dfs/dfstab</tt>, see <a href="http://docs.sun.com/doc/819-2251/dfstab-4?a=view"><tt>dfstab</tt>(4)</a>.</p></li>
<li><p>Share the file system.</p><p><a name="indexterm-219"></a>The NFS server does not use changes to <tt>/etc/dfs/dfstab</tt> until the file systems are shared again or until the server is rebooted.</p><pre># shareall</pre></li></ol>


<a name="rfsadmin-88"></a><h4>How to Mount an NFS File System Through a Firewall</h4><p><a name="indexterm-220"></a><a name="indexterm-221"></a>To access file systems through a firewall, use the following procedure.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rfsadmin-step-91"></a><b>Manually mount the file system by using a command such as the following:</b><pre># <tt><b>mount -F nfs bee:/export/share/local /mnt</b></tt></pre><p><a name="indexterm-222"></a><a name="indexterm-223"></a>In this example, the file system <tt>/export/share/local</tt> is mounted on the local client
by using the public file handle. An NFS URL can be used instead
of the standard path name. If the public file handle is not supported
by the server <tt>bee</tt>, the mount operation fails.</p>
<hr><p><b>Note - </b>This procedure requires that the file system on the NFS server be shared
by using the <tt>public</tt> option. Additionally, any firewalls between the client and the
server must allow TCP connections on port <tt>2049</tt>. Starting with the Solaris 2.6
release, all file systems that are shared allow for public file handle access,
so the <tt>public</tt> option is applied by default.</p>
<hr>
</li></ol>

<a name="rfsadmin-92"></a><h4>How to Mount an NFS File System Using an NFS URL</h4><a name="indexterm-224"></a><a name="indexterm-225"></a><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.
To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><a name="rfsadmin-step-95"></a>(Optional) <b>If you are using NFS version 2 or version 3, manually mount the
file system by using a command such as the following:</b><pre># <tt><b>mount -F nfs nfs://bee:3000/export/share/local /mnt</b></tt></pre><p><a name="indexterm-226"></a>In this example, the <tt>/export/share/local</tt> file system is being mounted from the server
<tt>bee</tt> by using NFS port number <tt>3000</tt>. The port number is not required
and by default the standard NFS port number of <tt>2049</tt> is used. You can
choose to include the <tt>public</tt> option with an NFS URL. Without the <tt>public</tt>
option, the MOUNT protocol is used if the public file handle is not
supported by the server. The <tt>public</tt> option forces the use of the public file
handle, and the mount fails if the public file handle is not
supported.</p></li>
<li><a name="rfsadmin-step-227"></a>(Optional) <b>If you are using NFS version 4, manually mount the file system by
using a command such as the following:</b><pre># <tt><b>mount -F nfs -o vers=4 nfs://bee:3000/export/share/local /mnt</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rfsadmin-56.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rfsadmin-68.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

