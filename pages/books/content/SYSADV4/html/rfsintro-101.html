<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Features of the NFS Service - System Administration Guide: Network Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-02-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Network Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rfsintro-19.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rfsadmin-8.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="netservices-1.html">Part&nbsp;I&nbsp;Network Services Topics</a></p>
<p class="toc level2"><a href="nsov-1.html">1.&nbsp;&nbsp;Network Service (Overview)</a></p>
<p class="toc level2"><a href="nca-1.html">2.&nbsp;&nbsp;Managing Web Cache Servers</a></p>
<p class="toc level2"><a href="time-1.html">3.&nbsp;&nbsp;Time-Related Services</a></p>
<p class="toc level1 tocsp"><a href="rfstm-1.html">Part&nbsp;II&nbsp;Accessing Network File Systems Topics</a></p>
<p class="toc level2"><a href="rfsintro-2.html">4.&nbsp;&nbsp;Managing Network File Systems (Overview)</a></p>
<p class="toc level3"><a href="ewbds.html">What's New With the NFS Service</a></p>
<p class="toc level3"><a href="rfsintro-27.html">NFS Terminology</a></p>
<p class="toc level3"><a href="rfsintro-7.html">About the NFS Service</a></p>
<p class="toc level3"><a href="rfsintro-19.html">About Autofs</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Features of the NFS Service</a></p>
</div>
<p class="toc level2 tocsp"><a href="rfsadmin-8.html">5.&nbsp;&nbsp;Network File System Administration (Tasks)</a></p>
<p class="toc level2"><a href="rfsrefer-1.html">6.&nbsp;&nbsp;Accessing Network File Systems (Reference)</a></p>
<p class="toc level1 tocsp"><a href="slptm.html">Part&nbsp;III&nbsp;SLP Topics</a></p>
<p class="toc level2"><a href="slparch-16.html">7.&nbsp;&nbsp;SLP (Overview)</a></p>
<p class="toc level2"><a href="slp.setup-10.html">8.&nbsp;&nbsp;Planning and Enabling SLP (Tasks)</a></p>
<p class="toc level2"><a href="ch.configuration-6.html">9.&nbsp;&nbsp;Administering SLP (Tasks)</a></p>
<p class="toc level2"><a href="legacy-7.html">10.&nbsp;&nbsp;Incorporating Legacy Services</a></p>
<p class="toc level2"><a href="slpreference.html">11.&nbsp;&nbsp;SLP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="mailtm-1.html">Part&nbsp;IV&nbsp;Mail Services Topics</a></p>
<p class="toc level2"><a href="mailintro-1.html">12.&nbsp;&nbsp;Mail Services (Overview)</a></p>
<p class="toc level2"><a href="mailadmin-1.html">13.&nbsp;&nbsp;Mail Services (Tasks)</a></p>
<p class="toc level2"><a href="mailrefer-1.html">14.&nbsp;&nbsp;Mail Services (Reference)</a></p>
<p class="toc level1 tocsp"><a href="modemtm-1.html">Part&nbsp;V&nbsp;Serial Networking Topics</a></p>
<p class="toc level2"><a href="pppsvrconfig.intro-1.html">15.&nbsp;&nbsp;Solaris PPP 4.0 (Overview)</a></p>
<p class="toc level2"><a href="pppsvrconfig.p2plink-1.html">16.&nbsp;&nbsp;Planning for the PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.dialin-1.html">17.&nbsp;&nbsp;Setting Up a Dial-up PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.leased-1.html">18.&nbsp;&nbsp;Setting Up a Leased-Line PPP Link (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.auth-1.html">19.&nbsp;&nbsp;Setting Up PPP Authentication (Tasks)</a></p>
<p class="toc level2"><a href="ppp.pppoe-1.html">20.&nbsp;&nbsp;Setting Up a PPPoE Tunnel (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.troubleshoot-1.html">21.&nbsp;&nbsp;Fixing Common PPP Problems (Tasks)</a></p>
<p class="toc level2"><a href="pppsvrconfig.reference-1.html">22.&nbsp;&nbsp;Solaris PPP 4.0 (Reference)</a></p>
<p class="toc level2"><a href="pppsvrconfig.convert.app-1.html">23.&nbsp;&nbsp;Migrating From Asynchronous Solaris PPP to Solaris PPP 4.0 (Tasks)</a></p>
<p class="toc level2"><a href="uucpov-1.html">24.&nbsp;&nbsp;UUCP (Overview)</a></p>
<p class="toc level2"><a href="uucptasks-1.html">25.&nbsp;&nbsp;Administering UUCP (Tasks)</a></p>
<p class="toc level2"><a href="uucpref-1.html">26.&nbsp;&nbsp;UUCP (Reference)</a></p>
<p class="toc level1 tocsp"><a href="wwrstm.html">Part&nbsp;VI&nbsp;Working With Remote Systems Topics</a></p>
<p class="toc level2"><a href="wwrsov.html">27.&nbsp;&nbsp;Working With Remote Systems (Overview)</a></p>
<p class="toc level2"><a href="wuftp-17.html">28.&nbsp;&nbsp;Administering the FTP Server (Tasks)</a></p>
<p class="toc level2"><a href="remotehowtoaccess-99941.html">29.&nbsp;&nbsp;Accessing Remote Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="netmonitortm-1.html">Part&nbsp;VII&nbsp;Monitoring Network Services Topics</a></p>
<p class="toc level2"><a href="netmonitor-1.html">30.&nbsp;&nbsp;Monitoring Network Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rfsintro-101"></a><h3>Features of the NFS Service</h3>
<p>This section describes the important features that are included in the NFS service.
</p>

<a name="rfsintro-8"></a><h4>NFS Version 2 Protocol</h4>
<p>Version 2 was the first version of the NFS protocol in wide
use. Version 2 continues to be available on a large variety of platforms.
All Solaris releases support version 2 of the NFS protocol, but Solaris releases
prior to Solaris 2.5 support version 2 only. </p>

<a name="rfsintro-9"></a><h4>NFS Version 3 Protocol</h4>
<p>An implementation of NFS version 3 protocol was a new feature of
the Solaris 2.5 release. Several changes have been made to improve interoperability and performance.
For optimal use, the version 3 protocol must be running on both the
NFS servers and clients. </p><p>Unlike the NFS version 2 protocol, the NFS version 3 protocol can
handle files that are larger than 2 Gbytes. The previous limitation has been
removed. See <a href="#rfsintro-13">NFS Large File Support</a>.</p><p>The NFS version 3 protocol enables safe asynchronous writes on the server, which
improve performance by allowing the server to cache client write requests in memory.
The client does not need to wait for the server to commit
the changes to disk, so the response time is faster. Also, the server
can batch the requests, which improves the response time on the server.</p><p><a name="indexterm-116"></a><a name="indexterm-117"></a><a name="indexterm-118"></a>Many Solaris NFS version 3 operations return the file attributes, which are stored
in the local cache. Because the cache is updated more often, the need
to do a separate operation to update this data arises less often. Therefore,
the number of RPC calls to the server is reduced, improving performance.
</p><p><a name="indexterm-119"></a><a name="indexterm-120"></a><a name="indexterm-121"></a><a name="indexterm-122"></a><a name="indexterm-123"></a><a name="indexterm-124"></a><a name="indexterm-125"></a><a name="indexterm-126"></a>The process for verifying file access permissions has been improved. Version 2 generated
a &ldquo;write error&rdquo; message  or a &ldquo;read error&rdquo; message if users tried
to copy a remote file without the appropriate permissions. In version 3, the
permissions are checked before the file is opened, so the error is reported
as an &ldquo;open error.&rdquo; </p><p>The NFS version 3 protocol removed the 8-Kbyte transfer size limit. Clients and
servers could negotiate whatever transfer size the clients and servers support, rather than
conform to the 8-Kbyte limit that version 2 imposed. Note that in the
Solaris 2.5 implementation, the protocol defaulted to a 32-Kbyte transfer size. Starting in
the Solaris 10 release, restrictions on wire transfer sizes are relaxed. The transfer
size is based on the capabilities of the underlying transport.</p>

<a name="rfsintro-23"></a><h4>NFS Version 4 Protocol</h4>
<p>NFS version 4 has features that are not available in the previous
versions:</p><p><a name="indexterm-127"></a>The NFS version 4 protocol represents the user ID and the group ID
as strings. <tt>nfsmapid</tt> is used by the client and the server to do
the following: </p>
<ul><li><p>To map these version 4 ID strings to a local numeric ID</p></li>
<li><p>To map the local numeric IDs to version 4 ID strings</p></li></ul>
<p>For more information, refer to <a href="rfsrefer-8.html#rfsrefer-118"><tt>nfsmapid</tt> Daemon</a>.</p><p>Note that in NFS version 4, the ID mapper, <tt>nfsmapid</tt>, is used to
map user or group IDs in ACL entries on a server to
user or group IDs in ACL entries on a client. The reverse is
also true. For more information, see <a href="rfsrefer-45.html#gande">ACLs and <tt>nfsmapid</tt> in NFS Version 4</a>.</p><p>With NFS version 4, when you unshare a file system, all the
state for any open files or file locks in that file system is
destroyed. In NFS version 3 the server maintained any locks that the clients
had obtained before the file system was unshared. For more information, refer to
<a href="rfsrefer-45.html#rfsrefer-148">Unsharing and Resharing a File System in NFS Version 4</a>.</p><p>NFS version 4 servers use a pseudo file system to provide clients
with access to exported objects on the server. Prior to NFS version 4
a pseudo file system did not exist. For more information, refer to <a href="rfsrefer-45.html#rfsrefer-136">File-System Namespace in NFS Version 4</a>.</p><p>In NFS version 2 and version 3 the server returned persistent file
handles. NFS version 4 supports volatile file handles. For more information, refer to <a href="rfsrefer-45.html#rfsrefer-137">Volatile File Handles in NFS Version 4</a>.</p><p>Delegation, a technique by which the server delegates the management of a file
to a client, is supported on both the client and the server.
For example, the server could grant either a read delegation or a write
delegation to a client. For more information, refer to <a href="rfsrefer-45.html#rfsrefer-140">Delegation in NFS Version 4</a>.</p><p>Starting in the Solaris 10 release, NFS version 4 does not support
the LIPKEY/SPKM security flavor.</p><p>Also, NFS version 4 does not use the following daemons:</p>
<ul><li><p><tt>mountd</tt></p></li>
<li><p><tt>nfslogd</tt></p></li>
<li><p><tt>statd</tt></p></li></ul>
<p>For a complete list of the features in NFS version 4, refer
to <a href="rfsrefer-45.html#rfsrefer-134">Features in NFS Version 4</a>.</p><p>For procedural information that is related to using NFS version 4, refer to
<a href="rfsadmin-68.html">Setting Up NFS Services</a>.</p>

<a name="etezd"></a><h4>Controlling NFS Versions</h4>
<p><a name="indexterm-128"></a>The <tt>/etc/default/nfs</tt> file has keywords to control the NFS protocols that are used
by both the client and the server. For example, you can use keywords
to manage version negotiation. For more information, refer to <a href="rfsrefer-6.html#rfsrefer-133">Keywords for the <tt>/etc/default/nfs</tt> File</a> or the <a href="http://docs.sun.com/doc/819-2251/nfs-4?a=view"><tt>nfs</tt>(4)</a>
man page.</p>

<a name="rfsintro-10"></a><h4>NFS ACL Support</h4>
<p><a name="indexterm-129"></a><a name="indexterm-130"></a><a name="indexterm-131"></a>Access control list (ACL) support was added in the Solaris 2.5 release. ACLs
provide a finer-grained mechanism to set file access permissions than is available through
standard UNIX file permissions. NFS ACL support provides a method of changing and
viewing ACL entries from a Solaris NFS client to a Solaris NFS server.
See <a href="http://docs.sun.com/doc/819-3321/secfile-37?a=view">Using Access Control Lists to Protect Files in <i>System Administration Guide: Security Services</i></a> for more information about ACLs.</p><p>For information about support for ACLs in NFS version 4, see <a href="rfsrefer-45.html#gande">ACLs and <tt>nfsmapid</tt> in NFS Version 4</a>.</p>

<a name="rfsintro-11"></a><h4>NFS Over TCP</h4>
<p><a name="indexterm-132"></a>The default transport protocol for the NFS protocol was changed to the Transport
Control Protocol (TCP) in the Solaris 2.5 release. TCP helps performance on slow
networks and wide area networks. TCP also provides congestion control and error recovery.
NFS over TCP works with version 2, version 3, and version 4. Prior
to the Solaris 2.5 release, the default NFS protocol was User Datagram Protocol
(UDP).</p>
<hr><p><b>Note - </b>Starting in the Solaris 10 release, if RDMA for InfiniBand is available, RDMA
is the default transport protocol for NFS. For more information, see <a href="rfsrefer-154.html">NFS Over RDMA</a>. Note,
however, that if you use the <tt>proto=tcp</tt> mount option, NFS mounts are forced to
use TCP only.</p>
<hr>


<a name="rfsintro-30"></a><h4>NFS Over UDP</h4>
<a name="indexterm-133"></a><p>Starting in the Solaris 10 release, the NFS client no longer uses
an excessive number of UDP ports.  Previously, NFS transfers over UDP used
a separate UDP port for each outstanding request.  Now, by default, the
NFS client uses only one UDP reserved port.  However, this support is
configurable.  If the use of more simultaneous ports would increase system performance
through increased scalability, then the system can be configured to use more ports. This
capability also mirrors the NFS over TCP support, which has had this kind
of configurability since its inception. For more information, refer to the <a href="http://docs.sun.com/doc/819-2724"><i>Solaris Tunable Parameters Reference Manual</i></a>.</p>
<hr><p><b>Note - </b>NFS version 4 does not use UDP. If you mount a file
system with the <tt>proto=udp</tt> option, then NFS version 3 is used instead of version
4.</p>
<hr>


<a name="rfsintro-130"></a><h4>Overview of NFS Over RDMA</h4>
<p>Starting in the Solaris 10 release, the default transport for NFS is the
Remote Direct Memory Access (RDMA) protocol, which is a technology for memory-to-memory transfer
of data over high speed networks. Specifically, RDMA provides remote data transfer directly
to and from memory without CPU intervention. To provide this capability, RDMA combines
the interconnect I/O technology of InfiniBand-on-SPARC platforms with the Solaris Operating System. For more
information, refer to <a href="rfsrefer-154.html">NFS Over RDMA</a>.</p>

<a name="rfsintro-12"></a><h4>Network Lock Manager and NFS</h4>
<p><a name="indexterm-134"></a><a name="indexterm-135"></a><a name="indexterm-136"></a>The Solaris 2.5 release also included an improved version of the network lock
manager. The network lock manager provided UNIX record locking and PC file sharing
for NFS files. The locking mechanism is now more reliable for NFS files,
so commands that use locking are less likely to hang.</p>
<hr><p><b>Note - </b>The Network Lock Manager is used only for NFS version 2 and
version 3 mounts. File locking is built into the NFS version 4 protocol.</p>
<hr>


<a name="rfsintro-13"></a><h4>NFS Large File Support</h4>
<p><a name="indexterm-137"></a>The Solaris 2.6 implementation of the NFS version 3 protocol was changed to
correctly manipulate files that were larger than 2 Gbytes. The NFS version 2
protocol and the Solaris 2.5 implementation of the version 3 protocol could not
handle files that were larger than 2 Gbytes. </p>

<a name="rfsintro-14"></a><h4>NFS Client Failover</h4>
<p><a name="indexterm-138"></a><a name="indexterm-139"></a>Dynamic failover of read-only file systems was added in the Solaris 2.6 release.
Failover provides a high level of availability for read-only resources that are already
replicated, such as man pages, other documentation, and shared binaries. Failover can occur
anytime after the file system is mounted. Manual mounts can now list multiple
replicas, much like the automounter in previous releases. The automounter has not changed,
except that failover need not wait until the file system is remounted. See
<a href="rfsadmin-61.html#rfsadmin-81">How to Use Client-Side Failover</a> and <a href="rfsrefer-45.html#rfsrefer-51">Client-Side Failover</a> for more information.  </p>

<a name="rfsintro-15"></a><h4>Kerberos Support for the NFS Service</h4>
<p><a name="indexterm-140"></a>Support for Kerberos V4 clients was included in the Solaris 2.0 release. In
the 2.6 release, the <tt>mount</tt> and <tt>share</tt> commands were altered to support NFS
version 3 mounts that use Kerberos V5 authentication. Also, the <tt>share</tt> command was
changed to enable multiple authentication flavors for different clients. See <a href="#rfsintro-17">RPCSEC_GSS Security Flavor</a> for more
information about changes that involve security flavors. See <a href="http://docs.sun.com/doc/819-3321/setup-97?a=view">Configuring Kerberos NFS Servers in <i>System Administration Guide: Security Services</i></a> for information about Kerberos V5
authentication.</p>

<a name="rfsintro-16"></a><h4>WebNFS Support</h4>
<p><a name="indexterm-141"></a>The Solaris 2.6 release also included the ability to make a file system
on the Internet accessible through firewalls. This capability was provided by using an
extension to the NFS protocol. One of the advantages to using the WebNFS<sup>TM</sup>
protocol for Internet access is its reliability. The service is built as an
extension of the NFS version 3 and version 2 protocol. Additionally, the WebNFS
implementation provides the ability to share these files without the administrative overhead of
an anonymous <tt>ftp</tt> site. See <a href="#rfsintro-21">Security Negotiation for the WebNFS Service</a> for a description of more changes that are
related to the WebNFS service. See <a href="rfsadmin-110.html">WebNFS Administration Tasks</a> for more task information.</p>
<hr><p><b>Note - </b>The NFS version 4 protocol is preferred over the WebNFS service. NFS version
4 fully integrates all the security negotiation that was added to the MOUNT
protocol and the WebNFS service.</p>
<hr>


<a name="rfsintro-17"></a><h4>RPCSEC_GSS Security Flavor</h4>
<p><a name="indexterm-142"></a><a name="indexterm-143"></a><a name="indexterm-144"></a>A security flavor, called RPCSEC_GSS, is supported in the Solaris 7 release. This
flavor uses the standard GSS-API interfaces to provide authentication, integrity, and privacy, as
well as enabling support of multiple security mechanisms. See <a href="#rfsintro-15">Kerberos Support for the NFS Service</a> for more information about
support of Kerberos V5 authentication. See <a href="http://docs.sun.com/doc/819-2145"><i>Solaris Security for Developers Guide</i></a> for more information about GSS-API.</p>

<a name="rfsintro-18"></a><h4>Solaris 7 Extensions for NFS Mounting</h4>
<p><a name="indexterm-145"></a><a name="indexterm-146"></a>The Solaris 7 release includes extensions to the <tt>mount</tt> command and <tt>automountd</tt> command.
The extensions  enable the mount request to use the public file handle
instead of the MOUNT protocol. The MOUNT protocol is the same access method
that the WebNFS service uses. By circumventing the MOUNT protocol, the mount can
occur through a firewall. Additionally, because fewer transactions need to occur between the
server and the client, the mount should occur faster. </p><p><a name="indexterm-147"></a>The extensions also enable NFS URLs to be used instead of the standard
path name. Also, you can use the <tt>public</tt> option with the <tt>mount</tt> command
and the automounter maps to force the use of the public file handle.
See <a href="#rfsintro-16">WebNFS Support</a> for more information about changes to the WebNFS service.</p>

<a name="rfsintro-21"></a><h4>Security Negotiation for the WebNFS Service</h4>
<p><a name="indexterm-148"></a><a name="indexterm-149"></a>A new protocol has been added to enable a WebNFS client to
negotiate a security mechanism with an NFS server in the Solaris 8 release.
This protocol provides the ability to use secure transactions when using the WebNFS
service. See <a href="rfsrefer-45.html#egcod">How WebNFS Security Negotiation Works</a> for more information.</p>

<a name="rfsintro-22"></a><h4>NFS Server Logging</h4>
<p><a name="indexterm-150"></a>In the Solaris 8 release, NFS server logging enables an NFS server to
provide a record of  file operations that have been performed on
its file systems. The record includes information about which file was accessed, when the
file was accessed, and who accessed the file. You can specify the
location of the logs that contain this information through a set of configuration
options. You can also use these options to select the operations that should
be logged. This feature is particularly useful for sites that make anonymous FTP
archives available to NFS and WebNFS clients. See <a href="rfsadmin-56.html#rfsadmin-101">How to Enable NFS Server Logging</a> for more information.</p>
<hr><p><b>Note - </b>NFS version 4 does not support server logging.</p>
<hr>


<a name="rfsintro-20"></a><h4>Autofs Features</h4>
<p><a name="indexterm-151"></a><a name="indexterm-152"></a><a name="indexterm-153"></a>Autofs works with file systems that are specified in the local namespace. This
information can be maintained in NIS, NIS+, or local files.  </p><p><a name="indexterm-154"></a>A fully multithreaded version of <tt>automountd</tt> was included in the Solaris 2.6 release.
This enhancement makes autofs more reliable and enables concurrent servicing of multiple mounts,
which prevents the service from hanging if a server is unavailable.</p><p><a name="indexterm-155"></a>The new <tt>automountd</tt> also provides better on-demand mounting. Previous releases would mount an
entire set of file systems if the file systems  were hierarchically related.
Now, only the top file system is mounted. Other file systems that are
related to this mount point are mounted when needed.</p><p><a name="indexterm-156"></a><a name="indexterm-157"></a><a name="indexterm-158"></a>The autofs service supports browsability of indirect maps. This support enables a user
to see which directories could be mounted, without having to actually mount each
file system. A <tt>-nobrowse</tt> option has been added to the autofs maps so
that large file systems, such as <tt>/net</tt> and <tt>/home</tt>, are not automatically
browsable. Also, you can turn off autofs browsability on each client by using
the <tt>-n</tt> option with <tt>automount</tt>. See <a href="rfsadmin-127.html#rfsadmin-195">Disabling Autofs Browsability</a> for more information. </p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rfsintro-19.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rfsadmin-8.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

