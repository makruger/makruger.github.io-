<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Solaris Flash Introduction - Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="flash-24.html">Previous</a>
             </td>
             <td align="right">
                 <a href="flash-240.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="flash-24.html">1.&nbsp;&nbsp;Solaris Flash (Overview)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Solaris Flash Introduction</a></p>
</div>
<p class="toc level1 tocsp"><a href="flash-240.html">2.&nbsp;&nbsp;Solaris Flash (Planning)</a></p>
<p class="toc level1 tocsp"><a href="flashcreate-1.html">3.&nbsp;&nbsp;Creating Solaris Flash Archives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="flashinstall-10.html">4.&nbsp;&nbsp;Installing and Administering Solaris Flash Archives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="flashref-1.html">5.&nbsp;&nbsp;Solaris Flash (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="flashoverview-2"></a><h3>Solaris Flash Introduction</h3>
<a name="indexterm-1"></a><a name="indexterm-2"></a><a name="indexterm-3"></a><a name="indexterm-4"></a><a name="indexterm-5"></a><a name="indexterm-6"></a><a name="indexterm-7"></a><p><a name="indexterm-8"></a>The Solaris Flash installation feature enables you to use a single reference installation
of the Solaris OS on a system, which is called the master system.
Then, you can replicate that installation on a number of systems, which are
called clone systems. You can replicate clone systems with a Solaris Flash initial
installation that overwrites all files on the system or with a Solaris Flash
update that only includes the differences between two system images. A differential update changes
only the files that are specified and is restricted to systems that contain
software consistent with the old master image.</p>

<a name="flashoverview-36"></a><h4>Installing Clone Systems With an Initial Installation</h4>
<p><a name="indexterm-9"></a>You can install a master system with a Solaris Flash archive for an
initial installation by using any installation method: Solaris installation program, custom JumpStart, Solaris
Live Upgrade, or WAN boot. All files are overwritten. The Solaris Flash installation
is a five-part process.</p>
<ol><li><p>Install the master system. You select a system and use any of the Solaris installation methods to install the Solaris OS and any other software.</p></li>
<li><p>(Optional) Prepare customization scripts to reconfigure or customize the clone system before or after installation.</p></li>
<li><p>Create the Solaris Flash archive. The Solaris Flash archive contains a copy of all of the files on the master system, unless you excluded some nonessential files.</p></li>
<li><p>Install the Solaris Flash archive on clone systems. The master system and the clone system must have the same kernel architecture.</p><p>When you install the Solaris Flash archive on a system, all of the files in the archive are copied to that system. The newly installed system now has the same installation configuration as the original master system, thus the system is called a clone system. Some customization is possible:</p>
<ul><li><p>Scripts can be used for customization.</p></li>
<li><p>You can install extra packages with a Solaris Flash archive by using the custom JumpStart installation method. The packages must be from outside the software group being installed or a third-party package.</p></li></ul>
</li>
<li><p>(Optional) Save a copy of the master image. If you plan to create a differential archive, the master image must be available and identical to the image installed on the clone systems.</p></li></ol>
<p>For step-by-step instructions, see <a href="flashcreate-3.html">Installing the Master System</a>.</p><p><a href="#flashoverview-fig-49">Figure&nbsp;1-1</a> shows an installation of clone systems with an initial installation. All files
are overwritten.</p><a name="flashoverview-fig-49"></a><h6>Figure&nbsp;1-1 Solaris Flash Initial Installation</h6><img src="figures/flash-initial.gif" alt="The context describes the illustration."></img>

<a name="flashoverview-37"></a><h4>Updating Clone Systems With a Solaris Flash Differential Archive</h4>
<p><a name="indexterm-10"></a><a name="indexterm-11"></a><a name="indexterm-12"></a><a name="indexterm-13"></a>If you have a clone system and want to update that system,
you can create a differential archive that contains only the differences between two images,
the unchanged master image and an updated master image. When you update a
clone system with a differential archive, only the files that are in the
differential archive are changed. You can choose to install a Solaris Flash
differential archive with the custom JumpStart installation method or Solaris Live Upgrade. An update
is a five-part process.</p>
<ol><li><p>Prepare the master system with changes. Before changes are made, the master system should be running a duplicate of the original archive.</p>
<hr><p><b>Note - </b>If the master system is not running a duplicate of the original archive, the differences between the two system images might result in a large differential archive. Consequently, installing the differential archive could be time consuming. Use an initial installation with a full archive in this case.</p>
<hr>
</li>
<li><p>(Optional) Prepare customization scripts to reconfigure or customize the clone system before or after installation.</p></li>
<li><p>Mount the directory of a copy of the saved-unchanged master image. This second image is to be used to compare the two system images. Access the image by the following methods.</p>
<ul><li><p>Mounted from a Solaris Live Upgrade boot environment</p></li>
<li><p>Mounted from a clone system over NFS</p></li>
<li><p>Restored from backup by using the <tt>ufsrestore</tt> command</p></li></ul>
</li>
<li><p>Create the differential archive with the <tt>-A</tt> option of the <tt>flarcreate</tt> command.</p></li>
<li><p>Install the differential archive on clone systems with custom JumpStart. Or, you can use Solaris Live Upgrade to install the differential archive on an inactive boot environment.</p></li></ol>
<p><a href="#flashoverview-fig-50">Figure&nbsp;1-2</a> shows the creation and installation of a differential archive. A master image
is updated with some modifications. These modifications could be as simple as the addition,
reconfiguration, or deletion of a few files, or as complex as propagating patches.
The updated master image is compared to the unchanged master image. The differences
between the two images become the differential archive. The archive can be used
to update other clone systems that are currently using the unchanged master image.
If the clone system has already been modified or is not running the
unchanged master image, the update fails. If you have many changes to make
on the clone systems, you can do an initial installation at any time.</p><a name="flashoverview-fig-50"></a><h6>Figure&nbsp;1-2 Solaris Flash Update</h6><img src="figures/flash-diff.gif" alt="The context describes the illustration."></img>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="flash-24.html">Previous</a>
             </td>
             <td align="right">
                 <a href="flash-240.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

