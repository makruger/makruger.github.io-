<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Solaris Flash <tt>flar</tt> Command - Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="flash-51.html">Previous</a>
             </td>
             <td align="right">
                 <a href="glossary-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="flash-24.html">1.&nbsp;&nbsp;Solaris Flash (Overview)</a></p>
<p class="toc level1 tocsp"><a href="flash-240.html">2.&nbsp;&nbsp;Solaris Flash (Planning)</a></p>
<p class="toc level1 tocsp"><a href="flashcreate-1.html">3.&nbsp;&nbsp;Creating Solaris Flash Archives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="flashinstall-10.html">4.&nbsp;&nbsp;Installing and Administering Solaris Flash Archives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="flashref-1.html">5.&nbsp;&nbsp;Solaris Flash (Reference)</a></p>
<p class="toc level2"><a href="flashref-62.html">Solaris Flash Archive Section Descriptions</a></p>
<p class="toc level2"><a href="flash-51.html">Solaris Flash Keywords</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Solaris Flash <tt>flar</tt> Command</a></p>
</div>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="flash-52"></a><h3>Solaris Flash <tt>flar</tt> Command</h3>
<p>Use the Solaris Flash <tt>flar</tt> command to create a Solaris Flash archive and
administer the archive.</p>

<a name="flash-53"></a><h4><tt>flar</tt> Command</h4>
<a name="indexterm-87"></a><a name="indexterm-88"></a><p>You can use the <tt>flar</tt> command with the following options: </p>
<ul><li><p><tt>flarcreate</tt> creates an archive</p></li>
<li><p><tt>flar combine</tt> merges two archives</p></li>
<li><p><tt>flar split</tt> breaks an archive into sections</p></li>
<li><p><tt>flar info</tt> checks the structure of an archive</p></li></ul>
<p>Use the <tt>flarcreate</tt> command to create a Solaris Flash archive from a master
system. You can use this command when the master system is running in
multiuser mode or single-user mode.  You can also use <tt>flarcreate</tt> when the
master system is booted from the following media.</p>
<ul><li><p>Solaris Operating System DVD</p></li>
<li><p>Solaris Software - 1 CD</p></li>
<li><p>A Solaris network installation image of the DVD or CDs.</p></li></ul>
<p>The master system should be in as stable a state as possible
when you create a Solaris Flash archive. </p>
<hr><p><b>Note - </b>You can create a Solaris Flash archive by using either of these command
options:</p>
<ul><li><p>As two words: <tt>flar</tt> with the <tt>create</tt> subcommand</p></li>
<li><p>As one word: <tt>flarcreate</tt></p></li></ul>

<hr>
<p>The syntax of the command is as follows:</p><p><tt>flarcreate <tt>-n</tt> <i>archive_name</i> [<tt>-R</tt> <i>root</i>] [<tt>-A</tt> <i>unchanged_master_image_dir</i>] [<tt>-H</tt>][<tt>-I</tt>][<tt>-M</tt>][[<tt>-S</tt>]<tt>-c</tt>][<tt>-t</tt> [<tt>-p</tt> <i>posn</i>] [<tt>-b</tt> <i>blocksize</i>]][<tt>-i</tt> <i>date</i>][<tt>-u</tt> <i>section</i> ...][<tt>-m</tt> <i>master</i>][<tt>-f</tt> [<i>list_filename</i>| -] [<tt>-F</tt>][<tt>-a</tt> <i>author</i>][<tt>-e</tt> <i>descr</i>|<tt>-E</tt> <i>descr_file</i>][<tt>-L</tt> cpio] [<tt>-T</tt> <i>type</i>][<tt>-U</tt> <i>key=val</i> ...][<tt>-x</tt> <i>exclude_dir/filename</i>] [<tt>-y</tt> <i>include_dir/filename</i>] [<tt>-z</tt> <i>list_filename</i>] [<tt>-X</tt> <i>list_filename</i>]<i>path/filename</i></tt></p><p><tt>flar combine [<tt>-d</tt> <i>dir</i>] [<tt>-u</tt> <i>section...</i>] [<tt>-t</tt> [<tt>-p</tt> <i>posn</i>] <i>path/filename</i></tt></p><p><tt>flar split [<tt>-d</tt> <i>dir</i>] [<tt>-u</tt> <i>section...</i>] [<tt>-f</tt>]  [<tt>-S</tt> <i>section</i>] [<tt>-t</tt> [<tt>-p</tt> <i>posn</i>] <i>path/filename</i></tt>     </p><p><tt>flar info [<tt>-l</tt>] [<tt>-k</tt> <i>keyword</i>] [<tt>-t</tt> [<tt>-p</tt> <i>posn</i>] <i>path/filename</i></tt></p><p>In the previous command lines, <i>path</i> is the directory in which you want
the archive file to be saved. <i>filename</i> is the name of the archive
file. If you do not specify a path, <tt>flarcreate</tt> saves the archive file
in the current directory.</p><a name="flash-tbl-54"></a><h6>Table&nbsp;5-7 Command-Line Options for the <tt>flar</tt> Command</h6><table><col width="28.14*"><col width="71.86*"><tr><th align="left" valign="top" scope="column"><p>Option</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Required Options</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-n</tt> <i>archive_name</i></p></td>
<td align="left" valign="top" scope="row"><p>The value of this flag is the
name of the archive.  The <i>archive_name</i> you specify is the value
of the <tt>content_name</tt> keyword.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Option for Compression</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-c</tt></p></td>
<td align="left" valign="top" scope="row"><p>Compresses the archive by using <tt>compress(1)</tt>.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Options for
Directories and Sizes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-R</tt> <i>root</i></p></td>
<td align="left" valign="top" scope="row"><p>Creates the archive from the file system tree that
begins at the file system specified by <i>root</i>.  If you do not
specify this option, <tt>flarcreate</tt> creates an archive from a file system that begins at
the root <tt>(/)</tt> file system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-S</tt></p></td>
<td align="left" valign="top" scope="row"><p>Omits sizing information in the archive.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-H</tt></p></td>
<td align="left" valign="top" scope="row"><p>Does not generate
the hash identifier.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Options for Creating a Differential Archive</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-A</tt> <i>unchanged_master_image_dir</i></p></td>
<td align="left" valign="top" scope="row"><p>Creates a differential archive
by comparing a new system image with the image that is specified by
the <i>unchanged_master_image_dir</i> argument. By default, the new system image is root (<tt>/</tt>). You
can change the default with the <tt>-R</tt> option. <i>unchanged_master_image_dir</i> is a directory where
the unchanged master system image is stored or mounted through UFS, NFS, or
<tt>lumount</tt>.</p><p>You can modify the effects of file selection for a differential archive by
using the options for contents selection described in the next section of the
table.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-M</tt></p></td>
<td align="left" valign="top" scope="row"><p>Excludes the manifest file. When you use this option, no validation occurs on
the differential archive. When creating a differential archive, <tt>flarcreate</tt> creates a long
list of the files in the system that are unchanged, are changed, and
are to be deleted from the archive. This list is stored in the
manifest section of the archive. When the differential archive is deployed, the software
uses this list to perform a file-by-file check, ensuring the integrity of the
clone system. Use of this option avoids such a check and saves the
space that is used by the manifest section in a differential archive. However,
you must consider the savings in time and disk space against the loss
of an integrity check upon installation. Because no validation occurs, avoid using this
option.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Options for Contents Selection</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row">
<hr><p><b>Caution - </b>Use the <tt>flarcreate</tt> file-exclusion options with caution. If you exclude
some directories, others that you were unaware of might be left in the
archive, such as system configuration files. The system would then be inconsistent and
the installation would not work. Excluding directories and files is best used with
data that can easily be removed without disrupting the system, such as large
data files.</p>
<hr>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-y</tt> <i>include_dir/filename</i> </p></td>
<td align="left" valign="top" scope="row"><p>Adds to the archive those files and directories that
are specified on the command line. This option is used when you have
excluded a directory, but want to restore individual subdirectories or files.</p><p><i>include_dir/filename</i> is the
name of the subdirectory or file to be included. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-f</tt> <i>list_filename</i> </p></td>
<td align="left" valign="top" scope="row"><p>Adds files
and directories from a list to the archive. </p><p><i>list_filename</i> is the full
path to a file that contains a list. The contents of the file
are added to the file list unless <tt>-F</tt> is specified. </p>
<ul><li><p>The <i>list_filename</i> file must contain one file per line. </p></li>
<li><p>If you specify a file system with <tt>-R</tt> <i>root</i>, the path to each file must be relative to the alternate <tt>root</tt> directory or an absolute path.</p></li>
<li><p>If <i>filename</i> is &ldquo;-&rdquo;, <tt>flarcreate</tt> reads standard input as the list of files. When you use the value &ldquo;-&rdquo;, the archive size is not calculated.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-F</tt> </p></td>
<td align="left" valign="top" scope="row"><p>Uses only
the files in <tt>-f</tt> <i>list_filename</i> to create the archive. This option makes the
<tt>-f</tt> <i>list_filename</i> the absolute list, rather than a list that is appended
to the normal file list.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-x</tt> <i>exclude_dir/filename</i> </p></td>
<td align="left" valign="top" scope="row"><p>Excludes  files and directories from the
archive. These files and directories are specified at the command line. You can
use multiple instances of this option to exclude more than one file or
directory.</p><p><i>exclude_dir/filename</i> is the name of the directory or file to be excluded. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-X</tt>
<i>list_filename</i> </p></td>
<td align="left" valign="top" scope="row"><p>Excludes a list of files or directories from the archive. </p><p><i>list_filename</i>
is the full path to a file that contains the list. </p>
<ul><li><p>The <i>list_filename</i> file must contain one file per line. </p></li>
<li><p>If you specify a file system with <tt>-R</tt> <i>root</i>, the path to each file must be relative to the alternate <tt>root</tt> directory or an absolute path.</p></li>
<li><p>If <i>list_filename</i> is &ldquo;-&rdquo;, <tt>flarcreate</tt> reads standard input as the list of files. When you use the value &ldquo;-&rdquo;, the archive size is not calculated.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-z</tt> <i>list_filename</i>
</p></td>
<td align="left" valign="top" scope="row"><p>Excludes or includes a list of files or directories from the archive. Each
file or directory in the list is noted with a plus &ldquo;+&rdquo;
or minus &ldquo;-&rdquo;. A plus indicates an included file or directory and the minus
indicates an excluded file or directory.</p><p><i>list_filename</i> is the full path to a
file that contains the list. </p>
<ul><li><p>The <i>list_filename</i> file must contain one file per line. </p></li>
<li><p>If you specify a file system with <tt>-R</tt> <i>root</i>, the path to each file must be relative to the alternate <tt>root</tt> directory or an absolute path.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-I</tt></p></td>
<td align="left" valign="top" scope="row"><p>Override the integrity check. To prevent you from
excluding important system files from an archive, <tt>flarcreate</tt> runs an integrity check. This check
examines all files that are registered in a system package database and stops
archive creation if any of them are excluded. Use of this option overrides
this integrity check. Therefore, avoid the use of the <tt>-I</tt> option.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Options for
Splitting and Merging Archives</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-d</tt> <i>dir</i></p></td>
<td align="left" valign="top" scope="row"><p>Retrieves the sections to copy from <i>dir</i>, rather than
from the current directory.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-u</tt> <i>section</i></p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>If you use this option, <tt>flar</tt> copies the cookie, identification, archive, and <i>section</i> sections.  You can specify a single section name or a space-separated list of section names.</p></li>
<li><p>If you do <b>not</b> use this option, <tt>flar</tt> copies the cookie, ldentification, and archive sections only.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-f</tt> archive</p></td>
<td align="left" valign="top" scope="row"><p>Extracts the archive section into a directory
that is named <tt>archive</tt>, rather than placing it in a file with
the name <tt>archive</tt>. Used for splitting an archive.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-S</tt> <i>section</i></p></td>
<td align="left" valign="top" scope="row"><p>Only copies the section that
is named <i>section</i> from the archive. This section is user defined. Used for
splitting an archive.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Option Used to Copy Files (Archive)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-L cpio</tt> </p></td>
<td align="left" valign="top" scope="row"><p>The <tt>pax</tt> utility is
the default copy method. For backward compatibility issues, you can create a <tt>cpio</tt>
archive with the <tt>-L cpio</tt> option. A <tt>cpio</tt> archive cannot contain individual file sizes greater
than 4 GB.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Options Used With User-Defined Sections</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-u</tt> <i>section</i></p></td>
<td align="left" valign="top" scope="row"><p>Includes <i>section</i> as a user-defined
section.  To include more than one user-defined section, <i>section</i> must be a space-separated
list of section names.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-d</tt> <i>dir</i></p></td>
<td align="left" valign="top" scope="row"><p>Retrieves the section file that is specified with
<tt>-u</tt> from <i>dir</i>.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Options Used With Tape Archives</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-t</tt> </p></td>
<td align="left" valign="top" scope="row"><p>Creates an archive on a
tape device.  The <i>filename</i> argument is the name of the tape device.
</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-p</tt> <i>posn</i></p></td>
<td align="left" valign="top" scope="row"><p>Use only with the <tt>-t</tt> option. Specifies the position on the tape
device for <tt>flarcreate</tt> to store the archive.  If you do not use
this option, <tt>flarcreate</tt> places the archive at the current position of the tape.
</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-b</tt> <i>blocksize</i></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the block size <tt>flarcreate</tt> uses when creating the archive.  If
you do not specify a block size, <tt>flarcreate</tt> uses the default block size
of 64 KB.</p></td>
</tr>
<tr><td colspan="2" align="left" valign="top" scope="row"><p>Options for Archive Identification</p><p>These keywords and values appear in the
archive identification section of the archive.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-U</tt> <i>key=val</i></p></td>
<td align="left" valign="top" scope="row"><p>Includes user-defined keywords and values in the
archive identification section.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-i</tt> <i>date</i></p></td>
<td align="left" valign="top" scope="row"><p>Uses <i>date</i> as the value for the <tt>creation_date</tt> keyword. If
you do not specify a date, <tt>flarcreate</tt> uses the current system time and
date.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-m</tt> <i>master</i></p></td>
<td align="left" valign="top" scope="row"><p>Uses <i>master</i> as the name of the master system on which you
created the archive. <i>master</i> is the value for the <tt>creation_master</tt> keyword. If you
do not specify <i>master</i>, <tt>flarcreate</tt> uses the system name that is reported by <tt>uname -n</tt>.
</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-e</tt> <i>descr</i></p></td>
<td align="left" valign="top" scope="row"><p>Uses <i>descr</i> for the value of the <tt>content_description</tt> keyword.  You
cannot use this option when you use the <tt>-E</tt> option.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-E</tt> <i>descr_file</i></p></td>
<td align="left" valign="top" scope="row"><p>Retrieves the
value for the <tt>content_description</tt> keyword from the <i>descr_file</i> file.   You cannot
use this option when you use the <tt>-e</tt> option.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-a</tt> <i>author</i></p></td>
<td align="left" valign="top" scope="row"><p>Uses <i>author</i> as the
author name in the archive identification section. <i>author</i> is the value for the <tt>content_author</tt>
keyword.  If you do not specify an author, <tt>flarcreate</tt> does not
include the <tt>content_author</tt> keyword in the archive identification section.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-T</tt> <i>type</i></p></td>
<td align="left" valign="top" scope="row"><p>Uses <i>type</i> as the
value for the <tt>content_type</tt> keyword. <i>type</i> is user defined. If you do not
specify a type, <tt>flarcreate</tt> does not include the <tt>content_type</tt> keyword.</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="flash-51.html">Previous</a>
             </td>
             <td align="right">
                 <a href="glossary-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

