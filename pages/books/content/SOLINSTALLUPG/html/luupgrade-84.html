<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Activating a Boot Environment - Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="luupgrade-83.html">Previous</a>
             </td>
             <td align="right">
                 <a href="luupgrade-85.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="esqbt.html">Part&nbsp;I&nbsp;Upgrading With Solaris Live Upgrade</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="luoverview-1.html">2.&nbsp;&nbsp;Solaris Live Upgrade (Overview)</a></p>
<p class="toc level2"><a href="luplanning-1.html">3.&nbsp;&nbsp;Solaris Live Upgrade (Planning)</a></p>
<p class="toc level2"><a href="lucreate-1.html">4.&nbsp;&nbsp;Using Solaris Live Upgrade to Create a Boot Environment (Tasks)</a></p>
<p class="toc level2"><a href="liveupgrade-1.html">5.&nbsp;&nbsp;Upgrading With Solaris Live Upgrade (Tasks)</a></p>
<p class="toc level3"><a href="luupgrade-333.html">Task Map: Upgrading a Boot Environment</a></p>
<p class="toc level3"><a href="luupgrade-82.html">Upgrading a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#luupgrade-86">To Upgrade a Network Installation Image on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#luupgrade-87">To Upgrade a Network Installation Image From Multiple CDs</a></p>
<p class="toc level4"><a href="luupgrade-82.html#frcbp">To Add Packages to a Network Installation Image on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#frcbs">To Add Patches to a Network Installation Image on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#frcfi">To Obtain Information on Packages Installed on a Boot Environment</a></p>
<p class="toc level3 tocsp"><a href="luupgrade-83.html">Installing Solaris Flash Archives on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-83.html#luupgrade-88">To Install a Solaris Flash Archive on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-83.html#luupgrade1-8800">To Install a Solaris Flash Archive With a Profile</a></p>
<p class="toc level4"><a href="luupgrade-83.html#luupgrade-880">To Install a Solaris Flash Archive With a Profile Keyword</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Activating a Boot Environment</a></p>
<p class="toc level4"><a href="#luupgrade-89">To Activate a Boot Environment</a></p>
<p class="toc level4"><a href="#luupgrade-890">To Activate a Boot Environment and Synchronize Files</a></p>
<p class="toc level4"><a href="#gacps">x86: To Activate a Boot Environment With the GRUB Menu</a></p>
</div>
<p class="toc level2 tocsp"><a href="luupgrade-85.html">6.&nbsp;&nbsp;Failure Recovery: Falling Back to the Original Boot Environment (Tasks)</a></p>
<p class="toc level2"><a href="lumaintainence-1.html">7.&nbsp;&nbsp;Maintaining Solaris Live Upgrade Boot Environments (Tasks)</a></p>
<p class="toc level2"><a href="grub-101.html">8.&nbsp;&nbsp;x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks)</a></p>
<p class="toc level2"><a href="gdzlc.html">9.&nbsp;&nbsp;Upgrading the Solaris OS on a System With Non-Global  Zones Installed</a></p>
<p class="toc level2"><a href="luexample-1.html">10.&nbsp;&nbsp;Solaris Live Upgrade (Examples)</a></p>
<p class="toc level2"><a href="lureference-1.html">11.&nbsp;&nbsp;Solaris Live Upgrade (Command Reference)</a></p>
<p class="toc level1 tocsp"><a href="esqcb.html">Part&nbsp;II&nbsp;Appendices</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="luupgrade-84"></a><h3>Activating a Boot Environment</h3>
<p><a name="indexterm-79"></a>Activating a boot environment makes it bootable on the next reboot of the
system. You can also switch back quickly to the original boot environment if
a failure occurs on booting the newly active boot environment. See <a href="luupgrade-85.html">Chapter&nbsp;6, Failure Recovery: Falling Back to the Original Boot Environment (Tasks)</a>.</p><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For More
Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Use this procedure to activate a boot environment with the <tt>luactivate</tt> command.
</p>
<hr><p><b>Note - </b>The first time you activate a boot environment, the <tt>luactivate</tt> command must
be used.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"><p><a href="#luupgrade-89">To Activate a Boot Environment</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Use this procedure to activate a boot environment and force a
synchronization of files. </p>
<hr><p><b>Note - </b>Files are synchronized with the first activation. If you switch boot
environments after the first activation, files are not synchronized.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"><p><a href="#luupgrade-890">To Activate a Boot Environment and Synchronize Files</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><b>x86</b>: Use this procedure
to activate a boot environment with the GRUB menu.</p>
<hr><p><b>Note - </b>A GRUB menu can facilitate
switching from one boot environment to another. A boot environment appears in the
GRUB menu after the first activation.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"><p><a href="#gacps">x86: To Activate a Boot Environment With the GRUB Menu</a></p></td>
</tr>
</table>

<a name="gentextid-4363"></a><h4>Requirements and Limitations for Activating a Boot Environment</h4>
<p>To successfully activate a boot environment, that boot environment must meet the following
conditions:</p><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For More Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>The boot environment must have a status of &ldquo;complete.&rdquo; </p></td>
<td align="left" valign="top" scope="row"><p>To
check status, see <a href="lumaintenance-33.html">Displaying the Status of All Boot Environments</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>If the boot environment is not the current boot
environment, you cannot have mounted the partitions of that boot environment by using
the <tt>luumount</tt> or <tt>mount</tt> commands.</p></td>
<td align="left" valign="top" scope="row"><p>To view man pages, see <a href="http://docs.sun.com/doc/819-2240/lumount-1m?a=view"><tt>lumount</tt>(1M)</a> or <a href="http://docs.sun.com/doc/819-2240/mount-1m?a=view"><tt>mount</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>The
boot environment that you want to activate cannot be involved in a comparison
operation. </p></td>
<td align="left" valign="top" scope="row"><p>For procedures, see <a href="lumaintenance-27.html">Comparing Boot Environments</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>If you want to reconfigure swap, make this
change prior to booting the inactive boot environment. By default, all boot environments
share the same swap devices. </p></td>
<td align="left" valign="top" scope="row"><p>To reconfigure swap, see <a href="chapter-33.html#lucreate-13">To Create a Boot Environment and Reconfiguring Swap</a></p></td>
</tr>
</table>
<hr><p><b>x86 only - </b>If you have an x86 based system, you can also activate with the
GRUB menu. Note the following exceptions:</p>
<ul><li><p>If a boot environment was created with the <b>Solaris 8, 9, or 10 3/05 release</b>, the boot environment must always be activated with the <tt>luactivate</tt> command. These older boot environments do not display on the GRUB menu.</p></li>
<li><p>The first time you activate a boot environment, you must use the <tt>luactivate</tt> command. The next time you boot, that boot environment's name is displayed in the GRUB main menu. You can thereafter switch to this boot environment by selecting the appropriate entry in the GRUB menu.</p></li></ul>
<p>See <a href="#gamog">x86: Activating a Boot Environment With the GRUB Menu</a>.</p>
<hr>


<a name="luupgrade-89"></a><h4>To Activate a Boot Environment</h4><p>The following procedure switches a new boot environment to become the currently running
boot environment.</p>
<hr><p><b>x86 only - </b>If you have an x86 based system, you can also activate with the
GRUB menu. Note the following exceptions:</p>
<ul><li><p>If a boot environment was created with the <b>Solaris 8, 9, or 10 3/05 release</b>, the boot environment must always be activated with the <tt>luactivate</tt> command. These older boot environments do not display on the GRUB menu.</p></li>
<li><p>The first time you activate a boot environment, you must use the <tt>luactivate</tt> command. The next time you boot, that boot environment's name is displayed in the GRUB main menu. You can thereafter switch to this boot environment by selecting the appropriate entry in the GRUB menu.</p></li></ul>
<p>See <a href="#gamog">x86: Activating a Boot Environment With the GRUB Menu</a>.</p>
<hr>
<ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="luupgrade-step-110"></a><b>To activate the boot environment, type:</b><pre># <tt><b>/sbin/luactivate </tt><i>BE_name</i><tt></b></tt></pre><dl><dt><i>BE_name</i></dt>
<dd><p>Specifies the name of the boot environment that is to be activated</p></dd>
</dl>
</li>
<li><a name="luupgrade-step-50"></a><b>Reboot.</b><pre># <tt><b>init 6</b></tt></pre>
<hr><p><b>Caution - </b>Use only the <tt>init</tt> or <tt>shutdown</tt> commands to reboot. If you use the
<tt>reboot</tt>, <tt>halt</tt>, or <tt>uadmin</tt> commands, the system does not switch boot environments. The last-active
boot environment is booted again.</p>
<hr>
</li></ol><a name="luupgrade-ex-95"></a>Example&nbsp;5-14 Activating a Boot Environment<p>In this example, the <tt>second_disk</tt> boot environment is activated at the next reboot.</p><pre># <tt><b>/sbin/luactivate second_disk</b></tt>
# <tt><b>init 6</b></tt></pre>

<a name="luupgrade-890"></a><h4>To Activate a Boot Environment and Synchronize Files</h4><p>The first time you boot from a newly created boot environment, Solaris Live
Upgrade software synchronizes the new boot environment with the boot environment that was
last active. &ldquo;Synchronize&rdquo; means that certain critical system files and directories are copied
from the last-active boot environment to the boot environment being booted. Solaris Live
Upgrade does not perform this synchronization after the initial boot, unless you force synchronization
with the <tt>luactivate</tt> command and the <tt>-s</tt> option.</p>
<hr><p><b>x86 only - </b>When you switch between boot environments with the GRUB menu, files also are
not synchronized. You must use the following procedure to synchronize files.</p>
<hr>
<p>For more information about synchronization, see <a href="luplanning-10.html">Synchronizing Files Between Boot Environments</a>.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="luupgrade-step-111"></a><b>To activate the boot environment, type:</b><pre># <tt><b>/sbin/luactivate -s </tt><i>BE_name</i><tt></b></tt></pre><dl><dt><tt>-s</tt></dt>
<dd><p>Forces a synchronization of files between the last-active boot environment and the new boot environment. The first time that a boot environment is activated, the files between the boot environment are synchronized With subsequent activations, the files are not synchronized unless you use the <tt>-s</tt> option.</p>
<hr><p><b>Caution - </b>Use this option with great care, because you might not be aware of or in control of changes that might have occurred in the last-active  boot environment. For example, if you were running Solaris Express 5/07 software on your current boot environment and booted back to a Solaris 9 release with a forced synchronization, files could be changed on the Solaris 9 release. Because files are dependent on the release of the OS, the boot to the Solaris 9 release could fail because the Solaris Express 5/07 files might not be compatible with the Solaris 9 files.</p>
<hr>
</dd>
<dt><i>BE_name</i></dt>
<dd><p>Specifies the name of the boot environment that is to be activated.</p></dd>
</dl>
</li>
<li><a name="luupgrade-step-500"></a><b>Reboot.</b><pre># <tt><b>init 6</b></tt></pre></li></ol><a name="luupgrade-ex-950"></a>Example&nbsp;5-15 Activating a Boot Environment<p>In this example, the <tt>second_disk</tt> boot environment is activated at the next reboot
and the files are synchronized.</p><pre># <tt><b>/sbin/luactivate -s second_disk</b></tt>
# <tt><b>init 6</b></tt></pre>

<a name="gamog"></a><h4>x86: Activating a Boot Environment With the GRUB Menu</h4>
<p>A GRUB menu provides an optional method of switching between boot environments. The
GRUB menu is an alternative to activating (booting) with the <tt>luactivate</tt> command.
The table below notes cautions and limitations when using the GRUB menu.</p><a name="gabrl"></a><h6>Table&nbsp;5-3 x86: Activating With the GRUB Menu Summary</h6><table><col width="18.95*"><col width="48.98*"><col width="31.07*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For More
Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><b>Caution</b></p></td>
<td align="left" valign="top" scope="row"><p>After you have activated a boot environment, do not change the disk order
in the BIOS. Changing the order might cause the GRUB menu to
become invalid. If this problem occurs, changing the disk order back to the
original state fixes the GRUB menu.</p></td>
<td align="left" valign="top" scope="row"></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Activating a boot environment for the first time</p></td>
<td align="left" valign="top" scope="row"><p>The
first time you activate a boot environment, you must use the <tt>luactivate</tt>
command. The next time you boot, that boot environment's name is displayed in
the GRUB main menu. You can thereafter switch to this boot environment by
selecting the appropriate entry in the GRUB menu.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#luupgrade-89">To Activate a Boot Environment</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Synchronizing files</p></td>
<td align="left" valign="top" scope="row"><p>The first time you
activate a boot environment, files are synchronized between the current boot environment and
the new boot environment. With subsequent activations, files are not synchronized. When you
switch between boot environments with the GRUB menu, files also are not synchronized.
You can force a synchronization when using the <tt>luactivate</tt> command with the <tt>-s</tt>
option.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#luupgrade-890">To Activate a Boot Environment and Synchronize Files</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Boot environments created before the <b>Solaris 10 1/06 release</b></p></td>
<td align="left" valign="top" scope="row"><p>If a boot environment was created with
the <b>Solaris 8, 9, or 10 3/05 release</b>, the boot environment must always be activated with the <tt>luactivate</tt> command.
These older boot environments do not display on the GRUB menu.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#luupgrade-89">To Activate a Boot Environment</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Editing or customizing
the GRUB menu entries</p></td>
<td align="left" valign="top" scope="row"><p>The <tt>menu.lst</tt> file contains the information that is displayed in
the GRUB menu. You can revise this file for the following reasons:</p>
<ul><li><p>To add to the GRUB menu entries for operating systems other than the Solaris OS. </p></li>
<li><p>To customize booting behavior. For example, you could change booting to verbose mode or change the default time that automatically boots the OS.</p></li></ul>

<hr><p><b>Note - </b>If you
want to change the GRUB menu, you need to locate the <tt>menu.lst</tt>
file. For step-by-step instructions, see <a href="gbdfr.html">x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks)</a>.</p>
<hr>

<hr><p><b>Caution - </b>Do not use the GRUB <tt>menu.lst</tt> file
to modify Solaris Live Upgrade entries. Modifications could cause Solaris Live Upgrade to fail.
Although you can use the <tt>menu.lst</tt> file to customize booting behavior, the preferred
method for customization is to use the <tt>eeprom</tt> command. If you use
the <tt>menu.lst</tt> file to customize, the Solaris OS entries might be modified during
a software upgrade. Changes to the file could be lost.</p>
<hr>
</td>
<td align="left" valign="top" scope="row">
<ul><li><p><a href="http://docs.sun.com/doc/820-0157/fxivs?a=view">GRUB Based Booting (Overview) in <i>Solaris Express Installation Guide: Planning for Installation and Upgrade</i></a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2379/hbx86boot-68676?a=view">Chapter 12, Booting a Solaris System With GRUB (Tasks), in <i>System Administration Guide: Basic Administration</i></a></p></li></ul>
</td>
</tr>
</table>

<a name="gacps"></a><h4>x86: To Activate a Boot Environment With the GRUB Menu</h4><p>You can switch between two boot environments with the GRUB menu. Note the
following limitations:</p>
<ul><li><p>The first activation of a boot environment must be done with the <tt>luactivate</tt> command. After the initial activation, the boot environment is displayed on the GRUB menu. The boot environment can then be booted from the GRUB menu.</p></li>
<li><p><b>Caution</b> - Switching to a boot environment with the GRUB menu bypasses synchronization. For more information about synchronizing files, see link <a href="luplanning-10.html#luplanning-1110">Forcing a Synchronization Between Boot Environments</a>.</p></li>
<li><p>If a boot environment was created with the <b>Solaris 8, 9, or 10 3/05 release</b>, the boot environment must always be activated with the <tt>luactivate</tt> command. These older boot environments are not displayed on the GRUB menu.</p></li></ul>
<ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Reboot the system.</b><pre># <tt><b>init 6</b></tt></pre><p>The GRUB main menu is displayed. The two operating systems are listed, Solaris
and <tt>second_disk</tt>, which is a Solaris Live Upgrade boot environment. The <tt>failsafe</tt> entries
are for recovery, if for some reason the primary OS does not boot.</p><pre>GNU GRUB version 0.95 (616K lower / 4127168K upper memory)
+-------------------------------------------------------------------+
|Solaris                                                            |
|Solaris  failsafe                                                  |
|second_disk                                                        |
|second_disk failsafe                                               |
+-------------------------------------------------------------------+
Use the ^ and v keys to select which entry is highlighted. Press
enter to boot the selected OS, 'e' to edit the commands before
booting, or 'c' for a command-line.</pre></li>
<li><b>To activate a boot environment, use the arrow key to select the desired
boot environment and press Return.</b><p>The selected boot environment is booted and becomes the active boot environment.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="luupgrade-83.html">Previous</a>
             </td>
             <td align="right">
                 <a href="luupgrade-85.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

