<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>SPARC: Falling Back to the Original Boot Environment - Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="luupgrade-85.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gampc.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="esqbt.html">Part&nbsp;I&nbsp;Upgrading With Solaris Live Upgrade</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="luoverview-1.html">2.&nbsp;&nbsp;Solaris Live Upgrade (Overview)</a></p>
<p class="toc level2"><a href="luplanning-1.html">3.&nbsp;&nbsp;Solaris Live Upgrade (Planning)</a></p>
<p class="toc level2"><a href="lucreate-1.html">4.&nbsp;&nbsp;Using Solaris Live Upgrade to Create a Boot Environment (Tasks)</a></p>
<p class="toc level2"><a href="liveupgrade-1.html">5.&nbsp;&nbsp;Upgrading With Solaris Live Upgrade (Tasks)</a></p>
<p class="toc level2"><a href="luupgrade-85.html">6.&nbsp;&nbsp;Failure Recovery: Falling Back to the Original Boot Environment (Tasks)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">SPARC: Falling Back to the Original Boot Environment</a></p>
<p class="toc level4"><a href="#luupgrade-112">SPARC: To Fall Back Despite Successful New Boot Environment Activation</a></p>
<p class="toc level4"><a href="#upgrade-64">SPARC: To Fall Back From a Failed Boot Environment Activation</a></p>
<p class="toc level4"><a href="#luupgrade-98">SPARC: To Fall Back to the Original Boot Environment by Using a DVD, CD, or Net Installation Image</a></p>
</div>
<p class="toc level3 tocsp"><a href="gampc.html">x86: Falling Back to the Original Boot Environment</a></p>
<p class="toc level4"><a href="gampc.html#gaciv">x86: To Fall Back Despite Successful New Boot Environment Activation With the GRUB Menu</a></p>
<p class="toc level4"><a href="gampc.html#luupgrade-199">x86: To Fall Back From a Failed Boot Environment Activation With the GRUB Menu</a></p>
<p class="toc level4"><a href="gampc.html#gbdew">x86: To Fall Back From a Failed Boot Environment Activation With the GRUB Menu and the DVD or CD</a></p>
<p class="toc level2 tocsp"><a href="lumaintainence-1.html">7.&nbsp;&nbsp;Maintaining Solaris Live Upgrade Boot Environments (Tasks)</a></p>
<p class="toc level2"><a href="grub-101.html">8.&nbsp;&nbsp;x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks)</a></p>
<p class="toc level2"><a href="gdzlc.html">9.&nbsp;&nbsp;Upgrading the Solaris OS on a System With Non-Global  Zones Installed</a></p>
<p class="toc level2"><a href="luexample-1.html">10.&nbsp;&nbsp;Solaris Live Upgrade (Examples)</a></p>
<p class="toc level2"><a href="lureference-1.html">11.&nbsp;&nbsp;Solaris Live Upgrade (Command Reference)</a></p>
<p class="toc level1 tocsp"><a href="esqcb.html">Part&nbsp;II&nbsp;Appendices</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gampw"></a><h3>SPARC: Falling Back to the Original Boot Environment</h3>
<p>You can fallback to the original boot environment by using three methods:</p>
<ul><li><p><a href="#luupgrade-112">SPARC: To Fall Back Despite Successful New Boot Environment Activation</a></p></li>
<li><p><a href="#upgrade-64">SPARC: To Fall Back From a Failed Boot Environment Activation</a></p></li>
<li><p><a href="#luupgrade-98">SPARC: To Fall Back to the Original Boot Environment by Using a DVD, CD, or Net Installation Image</a></p></li></ul>


<a name="luupgrade-112"></a><h4>SPARC: To Fall Back Despite Successful New Boot Environment Activation</h4><p>Use this procedure when you have successfully activated your new boot environment, but
are unhappy with the results. </p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="luupgrade-step-60"></a><b>Type:</b><pre># <tt><b>/sbin/luactivate</b></tt> <i>BE_name</i></pre><dl><dt><i>BE_name</i></dt>
<dd><p>Specifies the name of the boot environment to be activated</p></dd>
</dl>
</li>
<li><a name="upgrade-step-111"></a><b>Reboot. </b><pre># <tt><b>init 6</b></tt></pre><p>The previous working boot environment becomes the active boot environment.</p></li></ol>

<a name="upgrade-64"></a><h4>SPARC: To Fall Back From a Failed Boot Environment Activation</h4>
<ul><li><p>If you experience a failure while booting the new boot environment and can boot the original boot environment in single-user mode, use this procedure to fall back to the original boot environment.</p></li>
<li><p>If you need to boot from media or a net installation image, see <a href="#luupgrade-98">SPARC: To Fall Back to the Original Boot Environment by Using a DVD, CD, or Net Installation Image</a>.</p></li></ul>
<ol>
<li><a name="upgrade-step-1139"></a><b>At the OK prompt, boot the machine to single-user state from the Solaris
Operating System DVD, Solaris Software - 1 CD, the network, or a
local disk.</b><pre>OK <tt><b>boot </tt><i>device_name</i><tt> -s</b></tt></pre><dl><dt><i>device_name</i></dt>
<dd><p>Specifies the name of devices from where the system can boot, for example <tt>/dev/dsk/c0t0d0s0</tt></p></dd>
</dl>
</li>
<li><a name="luupgrade-step-601"></a><b>Type:</b><pre># <tt><b>/sbin/luactivate</b></tt> <i>BE_name</i></pre><dl><dt><i>BE_name</i></dt>
<dd><p>Specifies the name of the boot environment to be activated </p></dd>
</dl>

<ul><li><p>If this command fails to display a prompt, proceed to <a href="#luupgrade-98">SPARC: To Fall Back to the Original Boot Environment by Using a DVD, CD, or Net Installation Image</a>.</p></li>
<li><p>If the prompt is displayed, continue.</p></li></ul>
</li>
<li><a name="luupgrade-step-62"></a><b>At the prompt, type:</b><pre>Do you want to fallback to activate boot environment &lt;disk name> 
(yes or no)? <tt><b>yes</b></tt></pre><p>A message displays that the fallback activation is successful.</p></li>
<li><a name="upgrade-step-1111"></a><b>Reboot. </b><pre># <tt><b>init 6</b></tt></pre><p>The previous working boot environment becomes the active boot environment.</p></li></ol>

<a name="luupgrade-98"></a><h4>SPARC: To Fall Back to the Original Boot Environment by Using a DVD, CD, or Net Installation Image</h4><p>Use this procedure to boot from a DVD, CD, a net installation
image or another disk that can be booted. You need to mount the
root (<tt>/</tt>) slice from the last-active boot environment. Then run the <tt>luactivate</tt> command, which
makes the switch. When you reboot, the last-active boot environment is up and
running again.</p><ol>
<li><a name="upgrade-step-139"></a><b>At the OK prompt, boot the machine to single-user state from the Solaris
Operating System DVD, Solaris Software - 1 CD, the network, or a
local disk:</b><pre>OK <tt><b>boot cdrom -s</b></tt> </pre><p>or</p><pre>OK <tt><b>boot net -s</b></tt></pre><p>or</p><pre>OK <tt><b>boot </tt><i>device_name</i><tt> -s</b></tt></pre><dl><dt><i>device_name</i></dt>
<dd><p>Specifies the name of the disk and the slice where a copy of the operating system resides, for example <tt>/dev/dsk/c0t0d0s0</tt></p></dd>
</dl>
</li>
<li><a name="upgrade-step-138"></a><b>If necessary, check the integrity of the root (<tt>/</tt>) file system for the
fallback boot environment.</b><pre># <tt><b>fsck</b></tt> <i>device_name</i></pre><dl><dt><i>device_name</i></dt>
<dd><p>Specifies the location of the root (<tt>/</tt>) file system on the disk device of the boot environment you want to fall back to. The device name is entered in the form of <tt>/dev/dsk/c</tt><i>w</i><tt>t</tt><i>x</i><tt>d</tt><i>y</i><tt>s</tt><i>z</i>.</p></dd>
</dl>
</li>
<li><a name="upgrade-step-267"></a><b>Mount the active boot environment root (<tt>/</tt>) slice to some directory, such
as <tt>/mnt</tt>:  </b><pre># <tt><b>mount</b></tt> <i>device_name</i> <tt><b>/mnt</b></tt></pre><dl><dt><i>device_name</i></dt>
<dd><p>Specifies the location of the root (<tt>/</tt>) file system on the disk device of the boot environment you want to fall back to. The device name is entered in the form of <tt>/dev/dsk/c</tt><i>w</i><tt>t</tt><i>x</i><tt>d</tt><i>y</i><tt>s</tt><i>z</i>.</p></dd>
</dl>
</li>
<li><a name="upgrade-step-109"></a><b>From the active boot environment root (<tt>/</tt>) slice, type:</b><pre># <tt><b>/mnt/sbin/luactivate</b></tt></pre><p><tt>luactivate</tt> activates the previous working boot environment and indicates the result.</p></li>
<li><a name="upgrade-step-137"></a><b>Unmount <tt>/mnt</tt></b><pre># <tt><b>umount</b></tt>  <tt><b>/mnt</b></tt></pre></li>
<li><a name="upgrade-step-1110"></a><b>Reboot. </b><pre># <tt><b>init 6</b></tt></pre><p>The previous working boot environment becomes the active boot environment.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="luupgrade-85.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gampc.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

