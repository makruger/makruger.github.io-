<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Installing Solaris Flash Archives on a Boot Environment - Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="luupgrade-82.html">Previous</a>
             </td>
             <td align="right">
                 <a href="luupgrade-84.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="esqbt.html">Part&nbsp;I&nbsp;Upgrading With Solaris Live Upgrade</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="luoverview-1.html">2.&nbsp;&nbsp;Solaris Live Upgrade (Overview)</a></p>
<p class="toc level2"><a href="luplanning-1.html">3.&nbsp;&nbsp;Solaris Live Upgrade (Planning)</a></p>
<p class="toc level2"><a href="lucreate-1.html">4.&nbsp;&nbsp;Using Solaris Live Upgrade to Create a Boot Environment (Tasks)</a></p>
<p class="toc level2"><a href="liveupgrade-1.html">5.&nbsp;&nbsp;Upgrading With Solaris Live Upgrade (Tasks)</a></p>
<p class="toc level3"><a href="luupgrade-333.html">Task Map: Upgrading a Boot Environment</a></p>
<p class="toc level3"><a href="luupgrade-82.html">Upgrading a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#luupgrade-86">To Upgrade a Network Installation Image on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#luupgrade-87">To Upgrade a Network Installation Image From Multiple CDs</a></p>
<p class="toc level4"><a href="luupgrade-82.html#frcbp">To Add Packages to a Network Installation Image on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#frcbs">To Add Patches to a Network Installation Image on a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-82.html#frcfi">To Obtain Information on Packages Installed on a Boot Environment</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Installing Solaris Flash Archives on a Boot Environment</a></p>
<p class="toc level4"><a href="#luupgrade-88">To Install a Solaris Flash Archive on a Boot Environment</a></p>
<p class="toc level4"><a href="#luupgrade1-8800">To Install a Solaris Flash Archive With a Profile</a></p>
<p class="toc level4"><a href="#luupgrade-880">To Install a Solaris Flash Archive With a Profile Keyword</a></p>
</div>
<p class="toc level3 tocsp"><a href="luupgrade-84.html">Activating a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-84.html#luupgrade-89">To Activate a Boot Environment</a></p>
<p class="toc level4"><a href="luupgrade-84.html#luupgrade-890">To Activate a Boot Environment and Synchronize Files</a></p>
<p class="toc level4"><a href="luupgrade-84.html#gacps">x86: To Activate a Boot Environment With the GRUB Menu</a></p>
<p class="toc level2 tocsp"><a href="luupgrade-85.html">6.&nbsp;&nbsp;Failure Recovery: Falling Back to the Original Boot Environment (Tasks)</a></p>
<p class="toc level2"><a href="lumaintainence-1.html">7.&nbsp;&nbsp;Maintaining Solaris Live Upgrade Boot Environments (Tasks)</a></p>
<p class="toc level2"><a href="grub-101.html">8.&nbsp;&nbsp;x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks)</a></p>
<p class="toc level2"><a href="gdzlc.html">9.&nbsp;&nbsp;Upgrading the Solaris OS on a System With Non-Global  Zones Installed</a></p>
<p class="toc level2"><a href="luexample-1.html">10.&nbsp;&nbsp;Solaris Live Upgrade (Examples)</a></p>
<p class="toc level2"><a href="lureference-1.html">11.&nbsp;&nbsp;Solaris Live Upgrade (Command Reference)</a></p>
<p class="toc level1 tocsp"><a href="esqcb.html">Part&nbsp;II&nbsp;Appendices</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="luupgrade-83"></a><h3>Installing Solaris Flash Archives on a Boot Environment</h3>
<p><a name="indexterm-75"></a><a name="indexterm-76"></a><a name="indexterm-77"></a>This section provides the procedure for using Solaris Live Upgrade to install Solaris
Flash archives. Installing a Solaris Flash archive overwrites all files on the new
boot environment except for shared files. Archives are stored on the following media:</p>
<ul><li><p>HTTP server</p></li>
<li><p>FTP server &ndash; Use this path from the command line only</p></li>
<li><p>NFS server</p></li>
<li><p>Local file</p></li>
<li><p>Local tape</p></li>
<li><p>Local device, including DVD or CD</p></li></ul>
<p>Note the following issues with installing and creating a Solaris Flash archive.</p><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Example</p></th>
</tr>
<tr><td align="left" valign="top" scope="row">
<hr><p><b>Caution - </b>When
you install the Solaris OS with a Solaris Flash archive, the archive and
the installation media must contain identical OS versions.  If the OS versions
do not match, the installation on the target system fails. Identical operating systems
are necessary when you use the following keyword or command: </p>
<ul><li><p><tt>archive_location</tt> keyword in a profile</p></li>
<li><p><tt>luupgrade</tt> command with <tt>-s</tt>, <tt>-a</tt>, <tt>-j</tt>, and <tt>-J</tt> options</p></li></ul>

<hr>
</td>
<td align="left" valign="top" scope="row"><p>For example, if
the archive is the Solaris 10 operating system and you are using DVD
media, then you must use Solaris 10 DVD media to install the archive.
</p></td>
</tr>
<tr><td align="left" valign="top" scope="row">
<hr><p><b>Caution - </b>A Solaris Flash archive cannot be properly created when a non-global zone is
installed. The Solaris Flash feature is not compatible  with the Solaris Zones
feature. If you create a Solaris Flash archive in a non-global zone or
create an archive  in a global zone that has non-global zones installed,
the resulting  archive does not install properly when the archive is deployed.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"></td>
</tr>
</table><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For
More Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>For examples of the correct syntax for paths that are associated
with archive storage.</p></td>
<td align="left" valign="top" scope="row"><p>See <a href="http://docs.sun.com/doc/819-2396/preparecustom-2?a=view">archive_location Keyword in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>To use the Solaris Flash installation feature,  you install
a master system and create the Solaris Flash archive. </p></td>
<td align="left" valign="top" scope="row"><p>For more information about
creating an archive, see <a href="http://docs.sun.com/doc/819-2397/flashcreate-1?a=view">Chapter 3, Creating Solaris Flash Archives (Tasks), in <i>Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</i></a>.</p></td>
</tr>
</table>

<a name="luupgrade-88"></a><h4>To Install a Solaris Flash Archive on a Boot Environment</h4><ol>
<li><b>Install the Solaris Live Upgrade <tt>SUNWlucfg</tt>, <tt>SUNWlur</tt>, and <tt>SUNWluu</tt> packages on your
system. These packages must be from the release you are upgrading to. For
step-by-step procedures, see <a href="lucreate-8.html#lucreate-3">To Install Solaris Live Upgrade With the <tt>pkgadd</tt> Command</a>.</b></li>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="luupgrade-step-108"></a><b>Type:</b><pre># <tt><b>luupgrade -f -n </tt><i>BE_name</i><tt> -s </tt><i>os_image_path</i><tt> -a </tt><i>archive</i><tt></b></tt></pre><dl><dt><tt>-f</tt></dt>
<dd><p>Indicates to install an operating system from a Solaris Flash archive.</p></dd>
<dt><tt>-n</tt> <i>BE_name</i></dt>
<dd><p>Specifies the name of the boot environment that is to be installed with an archive.</p></dd>
<dt><tt>-s</tt> <i>os_image_path</i></dt>
<dd><p>Specifies the path name of a directory that contains an operating system image. This directory can be on an installation medium, such as a DVD-ROM, CD-ROM, or it can be an NFS or UFS directory.</p></dd>
<dt><tt>-a</tt> <i>archive</i></dt>
<dd><p>Path to the Solaris Flash archive when the archive is available on the local file system. The operating system image versions that are specified with the <tt>-s</tt> option and the <tt>-a</tt> option must be identical.</p></dd>
</dl>
</li></ol><a name="luupgrade-ex-97"></a>Example&nbsp;5-11 Installing Solaris Flash Archives on a Boot Environment<p>In this example, an archive is installed on the <tt>second_disk</tt> boot environment. The
archive is located on the local system. The operating system versions for the
<tt>-s</tt> and <tt>-a</tt> options are both Solaris Express 5/07 releases. All files are
overwritten on <tt>second_disk</tt> except shareable files. The <tt>pkgadd</tt> command adds the Solaris Live
upgrade packages from the release you are upgrading to.</p><pre># <tt><b>pkgadd -d /server/packages SUNWlucfg SUNWlur SUNWluu</b></tt>
# <tt><b>luupgrade -f -n second_disk \ -s /net/installmachine/export/Solaris_11/OS_image \ -a /net/server/archive/11</b></tt> </pre><p>The boot environment is ready to be activated. See <a href="luupgrade-84.html">Activating a Boot Environment</a>.</p>

<a name="luupgrade1-8800"></a><h4>To Install a Solaris Flash Archive With a Profile</h4><p>This procedure provides the steps to install a Solaris Flash archive or differential
archive by using a profile. </p><p>If you added locales to the profile, make sure that you have
created a boot environment with additional disk space.</p><ol>
<li><b>Install the Solaris Live Upgrade <tt>SUNWlucfg</tt>, <tt>SUNWlur</tt>, and <tt>SUNWluu</tt> packages on your
system. These packages must be from the release you are upgrading to. For
step-by-step procedures, see <a href="lucreate-8.html#lucreate-3">To Install Solaris Live Upgrade With the <tt>pkgadd</tt> Command</a>.</b></li>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="luupgrade2-step-1161"></a><b>Create a profile. </b><p>See <a href="luupgrade-82.html#preparecustom-9700">To Create a Profile to be Used by Solaris Live Upgrade</a> for a list of keywords that can be used in
a Solaris Live Upgrade profile. </p></li>
<li><a name="luupgrade3-step-1080"></a><b>Type:</b><pre># <tt><b>luupgrade -f -n </tt><i>BE_name</i><tt> -s </tt><i>os_image_path</i><tt> -j </tt><i>profile_path</i><tt></b></tt></pre><dl><dt><tt>-f</tt></dt>
<dd><p>Indicates to install an operating system from a Solaris Flash archive.</p></dd>
<dt><tt>-n</tt> <i>BE_name</i></dt>
<dd><p>Specifies the name of the boot environment that is to be upgraded.</p></dd>
<dt><tt>-s</tt> <i>os_image_path</i></dt>
<dd><p>Specifies the path name of a directory that contains an operating system image. This directory can be on an installation medium, such as a DVD-ROM, CD-ROM, or it can be an NFS or UFS directory.</p></dd>
<dt><tt>-j</tt> <i>profile_path</i></dt>
<dd><p>Path to a JumpStart profile that is configured for a flash installation. The profile must be in a directory on the local machine. The <tt>-s</tt> option's operating system version and the Solaris Flash archive operating system version must be identical. </p></dd>
</dl>
<p>The boot environment is ready to be activated.  See <a href="luupgrade-84.html">Activating a Boot Environment</a>.</p></li></ol><a name="luupgrade3-ex-970"></a>Example&nbsp;5-12 Install a Solaris Flash archive on a Boot Environment With a Profile<p>In this example, a profile provides the location of the archive to
be installed. </p><pre># profile keywords         profile values
# ----------------         -------------------
 install_type              flash_install
 archive_location          nfs installserver:/export/solaris/flasharchive/solarisarchive
 </pre><p>After creating the profile, you can run the <tt>luupgrade</tt> command and install the
archive. The <tt>-j</tt> option is used to access the profile. The <tt>pkgadd</tt> command
adds the Solaris Live Upgrade packages from the release you are upgrading to.</p><pre># <tt><b>pkgadd -d /server/packages SUNWlucfg SUNWlur SUNWluu</b></tt>
# <tt><b>luupgrade -f -n second_disk \ -s /net/installmachine/export/solarisX/OS_image \ -j /var/tmp/profile</b></tt> </pre><p>The boot environment is then ready to be activated.  See <a href="luupgrade-84.html">Activating a Boot Environment</a>.</p><p>To create a profile, see <a href="luupgrade-82.html#preparecustom-9700">To Create a Profile to be Used by Solaris Live Upgrade</a>.</p>

<a name="luupgrade-880"></a><h4>To Install a Solaris Flash Archive With a Profile Keyword</h4><p><a name="indexterm-78"></a>This procedure enables you to install a Solaris Flash archive and use the
<tt>archive_location</tt> keyword at the command line rather than from a profile file. You
can quickly retrieve an archive without the use of a profile file. </p><ol>
<li><b>Install the Solaris Live Upgrade <tt>SUNWlucfg</tt>, <tt>SUNWlur</tt>, and <tt>SUNWluu</tt> packages on your
system. These packages must be from the release you are upgrading to. For
step-by-step procedures, see <a href="lucreate-8.html#lucreate-3">To Install Solaris Live Upgrade With the <tt>pkgadd</tt> Command</a>.</b></li>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="luupgrade-step-1080"></a><b>Type:</b><pre># <tt><b>luupgrade -f -n </tt><i>BE_name</i><tt> -s </tt><i>os_image_path</i><tt> -J 'archive_location </tt><i>path-to-profile'</i><tt></b></tt></pre><dl><dt><tt>-f</tt></dt>
<dd><p>Specifies to upgrade an operating system from a Solaris Flash archive.</p></dd>
<dt><tt>-n</tt> <i>BE_name</i></dt>
<dd><p>Specifies the name of the boot environment that is to be upgraded.</p></dd>
<dt><tt>-s</tt> <i>os_image_path</i></dt>
<dd><p>Specifies the path name of a directory that contains an operating system image. This directory can be on an installation medium, such as a DVD-ROM, CD-ROM, or it can be an NFS or UFS directory.</p></dd>
<dt><tt>-J</tt> 'archive_location <i>path-to-profile'</i></dt>
<dd><p>Specifies the <tt>archive_location</tt> profile keyword and the path to the JumpStart profile. The <tt>-s</tt> option's operating system version and the Solaris Flash archive operating system version must be identical. For the keyword values, see <a href="http://docs.sun.com/doc/819-2396/preparecustom-2?a=view">archive_location Keyword in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a>. </p></dd>
</dl>
<p>The boot environment is ready to be activated.  See <a href="luupgrade-84.html">Activating a Boot Environment</a>.</p></li></ol><a name="luupgrade-ex-970"></a>Example&nbsp;5-13 Installing a Solaris Flash Archive By Using a Profile Keyword<p>In this example, an archive is installed on the <tt>second_disk</tt> boot environment. The
<tt>-J</tt> option and the <tt>archive_location</tt> keywords are used to retrieve the archive. All
files are overwritten on <tt>second_disk</tt> except shareable files. The <tt>pkgadd</tt> command adds the
Solaris Live Upgrade packages from the release you are upgrading to.</p><pre># <tt><b>pkgadd -d /server/packages SUNWlucfg SUNWlur SUNWluu</b></tt>
# <tt><b>luupgrade -f -n second_disk \ -s /net/installmachine/export/solarisX/OS_image \ -J 'archive_location http://example.com/myflash.flar'</b></tt> </pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="luupgrade-82.html">Previous</a>
             </td>
             <td align="right">
                 <a href="luupgrade-84.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

