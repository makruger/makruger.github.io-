<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks) - Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide:  Solaris Live Upgrade and Upgrade Planning</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="grub-101.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gdzlc.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="esqbt.html">Part&nbsp;I&nbsp;Upgrading With Solaris Live Upgrade</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="luoverview-1.html">2.&nbsp;&nbsp;Solaris Live Upgrade (Overview)</a></p>
<p class="toc level2"><a href="luplanning-1.html">3.&nbsp;&nbsp;Solaris Live Upgrade (Planning)</a></p>
<p class="toc level2"><a href="lucreate-1.html">4.&nbsp;&nbsp;Using Solaris Live Upgrade to Create a Boot Environment (Tasks)</a></p>
<p class="toc level2"><a href="liveupgrade-1.html">5.&nbsp;&nbsp;Upgrading With Solaris Live Upgrade (Tasks)</a></p>
<p class="toc level2"><a href="luupgrade-85.html">6.&nbsp;&nbsp;Failure Recovery: Falling Back to the Original Boot Environment (Tasks)</a></p>
<p class="toc level2"><a href="lumaintainence-1.html">7.&nbsp;&nbsp;Maintaining Solaris Live Upgrade Boot Environments (Tasks)</a></p>
<p class="toc level2"><a href="grub-101.html">8.&nbsp;&nbsp;x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks)</a></p>
<p class="toc level4"><a href="#gbdei">Locating the GRUB Menu's <tt>menu.lst</tt> file</a></p>
<p class="toc level4"><a href="#gbdfm">Locating the GRUB Menu's <tt>menu.lst</tt> File When the active <tt>menu.lst</tt> file is in Another Boot Environment</a></p>
<p class="toc level4"><a href="#gbdhv">Locating the GRUB Menu's <tt>menu.lst</tt> File When a Solaris Live Upgrade Boot Environment is Mounted</a></p>
<p class="toc level4"><a href="#gbdgd">Locating the GRUB Menu's <tt>menu.lst</tt> File When Your System Has an x86 Boot Partition</a></p>
</div>
<p class="toc level2 tocsp"><a href="gdzlc.html">9.&nbsp;&nbsp;Upgrading the Solaris OS on a System With Non-Global  Zones Installed</a></p>
<p class="toc level2"><a href="luexample-1.html">10.&nbsp;&nbsp;Solaris Live Upgrade (Examples)</a></p>
<p class="toc level2"><a href="lureference-1.html">11.&nbsp;&nbsp;Solaris Live Upgrade (Command Reference)</a></p>
<p class="toc level1 tocsp"><a href="esqcb.html">Part&nbsp;II&nbsp;Appendices</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gbdfr"></a><h3>x86: Locating the GRUB Menu's <tt>menu.lst</tt> File (Tasks)</h3>
<p>You must always use the <tt>bootadm</tt> command to locate the GRUB menu's <tt>menu.lst</tt>
file. The <tt>list-menu</tt> subcommand finds the active GRUB menu. The <tt>menu.lst</tt> file lists
all the operating systems that are installed on a  system.  The
contents of this file dictate the list of operating systems  that is
displayed on the GRUB menu.</p><p><a name="indexterm-90"></a><a name="indexterm-91"></a>Typically, the active GRUB menu's <tt>menu.lst</tt> file is located at <tt>/boot/grub/menu.lst</tt>. In some
situations, the GRUB <tt>menu.lst</tt> file resides elsewhere. For example, in a system that uses
Solaris Live Upgrade, the GRUB  <tt>menu.lst</tt> file might be on a boot
environment that is not the currently running boot environment. Or if you have
upgraded a system with an x86 boot partition, the <tt>menu.lst</tt> file might
reside in the <tt>/stubboot</tt> directory.  Only the active GRUB <tt>menu.lst</tt> file 
is used to boot the system.  In order to modify the GRUB
menu that is displayed when you boot the system, the active GRUB 
<tt>menu.lst</tt> file must be modified. Changing any other GRUB <tt>menu.lst</tt> file has no
effect on the menu that is displayed when you boot the system. 
To determine the location of the active GRUB <tt>menu.lst</tt> file, use the <tt>bootadm</tt>
command.  The <tt>list-menu</tt> subcommand displays the location of the active GRUB menu. The
following procedures determine the location of the GRUB menu's <tt>menu.lst</tt> file.</p><p>For more information about the <tt>bootadm</tt> command, see <a href="http://docs.sun.com/doc/819-2240/bootadm-1m?a=view"><tt>bootadm</tt>(1M)</a> man page.</p>

<a name="gbdei"></a><h4>Locating the GRUB Menu's <tt>menu.lst</tt> file</h4><p>In the following procedure, the system contains two operating systems: Solaris and a
Solaris Live Upgrade boot environment, <tt>second_disk</tt>. The Solaris OS has been booted and
contains the GRUB menu.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>To locate the <tt>menu.lst</tt> file, type:</b><pre># <tt><b>/sbin/bootadm list-menu</b></tt></pre><p>The location and contents of the file are displayed.</p><pre>The location for the active GRUB menu is: /boot/grub/menu.lst
default 0
timeout 10
0 Solaris
1 Solaris failsafe
2 second_disk
3 second_disk failsafe</pre></li></ol>

<a name="gbdfm"></a><h4>Locating the GRUB Menu's <tt>menu.lst</tt> File When the active <tt>menu.lst</tt> file is in Another Boot Environment</h4><p>In the following procedure, the system contains two operating systems: <tt>Solaris</tt> and
a Solaris Live Upgrade boot environment, <tt>second_disk</tt>. In this example, the <tt>menu.lst</tt>
file does not exist in the currently running boot environment. The <tt>second_disk</tt> boot environment
has been booted. The <tt>Solaris</tt> boot environment contains the GRUB menu. The <tt>Solaris</tt>
boot environment is not mounted. </p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>To locate the <tt>menu.lst</tt> file, type:</b><pre># <tt><b>/sbin/bootadm list-menu</b></tt></pre><p>The location and contents of the file are displayed.</p><pre>The location for the active GRUB menu is: /dev/dsk/<i>device_name</i>(not mounted)
The filesystem type of the menu device is &lt;ufs>
default 0
timeout 10
0 Solaris
1 Solaris failsafe
2 second_disk
3 second_disk failsafe</pre></li>
<li><b>Because the file system containing the <tt>menu.lst</tt> file is not mounted, mount the
file system. Specify the UFS file system and the device name.</b><pre># <tt><b>/usr/sbin/mount -F ufs /dev/dsk/</b></tt><i>device_name</i> <tt><b>/mnt</b></tt></pre><p>Where <i>device_name</i> specifies the location of the root (<tt>/</tt>) file system on the
disk device of the boot environment that you want to mount. The device
name is entered in the form of <tt>/dev/dsk/c</tt><i>w</i><tt>t</tt><i>x</i><tt>d</tt><i>y</i><tt>s</tt><i>z</i>. For example:</p><pre># <tt><b>/usr/sbin/mount -F ufs /dev/dsk/c0t1d0s0</b></tt> <tt><b>/mnt</b></tt></pre><p>You can access the GRUB menu at <tt>/mnt/boot/grub/menu.lst</tt></p></li>
<li><b>Unmount the filesystem</b><pre># <tt><b>/usr/sbin/umount /mnt</b></tt></pre>
<hr><p><b>Note - </b>If you mount a boot environment or a file system of a
boot environment, ensure that the file system or file systems are unmounted after
use. If these file systems are not unmounted, future Solaris Live Upgrade operations
on that boot environment might fail.</p>
<hr>
</li></ol>

<a name="gbdhv"></a><h4>Locating the GRUB Menu's <tt>menu.lst</tt> File When a Solaris Live Upgrade Boot Environment is Mounted</h4><p>In the following procedure, the system contains two operating systems: <tt>Solaris</tt> and
a Solaris Live Upgrade boot environment, <tt>second_disk</tt>. The <tt>second_disk</tt> boot environment has
been booted. The  <tt>Solaris</tt> boot environment contains the GRUB menu. The <tt>Solaris</tt>
boot environment is mounted at <tt>/.alt.Solaris</tt>.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>To locate the <tt>menu.lst</tt> file, type:</b><pre># <tt><b>/sbin/bootadm list-menu</b></tt></pre><p>The location and contents of the file are displayed.</p><pre>The location for the active GRUB menu is:
/.alt.Solaris/boot/grub/menu.lst
default 0
timeout 10
0 Solaris
1 Solaris failsafe
2 second_disk
3 second_disk failsafe</pre><p>Since the boot environment containing the GRUB menu is already mounted, then you
can access the <tt>menu.lst</tt> file  at <tt>/.alt.Solaris/boot/grub/menu.lst.</tt></p></li></ol>

<a name="gbdgd"></a><h4>Locating the GRUB Menu's <tt>menu.lst</tt> File When Your System Has an x86 Boot Partition</h4><p>In the following procedure, the system contains two operating systems: Solaris and a
Solaris Live Upgrade boot environment, <tt>second_disk</tt>. The <tt>second_disk</tt> boot environment has been booted.
Your system has been upgraded and an x86 boot partition remains. The boot
partition is mounted at <tt>/stubboot</tt> and contains the GRUB menu. For an explanation of
x86 boot partitions, see <a href="http://docs.sun.com/doc/820-0157/diskspace-101?a=view">Partitioning Recommendations in <i>Solaris Express Installation Guide: Planning for Installation and Upgrade</i></a>.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>To locate the <tt>menu.lst</tt> file, type:</b><pre># <tt><b>/sbin/bootadm list-menu</b></tt></pre><p>The location and contents of the file are displayed.</p><pre>The location for the active GRUB menu is:
/stubboot/boot/grub/menu.lst
default 0
timeout 10
0 Solaris
1 Solaris failsafe
2 second_disk
3 second_disk failsafe</pre><p>You can access the <tt>menu.lst</tt> file at <tt>/stubboot/boot/grub/menu.lst.</tt></p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="grub-101.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gdzlc.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

