<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Managing Directory-Based Identity Mapping for Users and Groups (Task Map) - Solaris CIFS Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris CIFS Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="createidmappingstrategy.html">Previous</a>
             </td>
             <td align="right">
                 <a href="manageusergroupmapstm.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="smboverview.html">1.&nbsp;&nbsp;Windows Interoperability (Overview)</a></p>
<p class="toc level1 tocsp"><a href="idmappingtasks.html">2.&nbsp;&nbsp;Identity Mapping Administration (Tasks)</a></p>
<p class="toc level2"><a href="mapusergroupidentities.html">Mapping User and Group Identities</a></p>
<p class="toc level2"><a href="createidmappingstrategy.html">Creating Your Identity Mapping Strategy</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Managing Directory-Based Identity Mapping for Users and Groups (Task Map)</a></p>
</div>
<p class="toc level2"><a href="manageusergroupmapstm.html">Managing Rule-Based Identity Mapping for Users and Groups (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="smbservertasks.html">3.&nbsp;&nbsp;Solaris CIFS Service Administration (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="smbclienttasks.html">4.&nbsp;&nbsp;Solaris CIFS Client Administration (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshooting.html">5.&nbsp;&nbsp;Solaris CIFS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="glossary.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="managedirbasedusergroupmapstm"></a><h3>Managing Directory-Based Identity Mapping for Users and Groups (Task Map)</h3>
<a name="indexterm-60"></a><a name="indexterm-61"></a><a name="indexterm-62"></a><a name="indexterm-63"></a><p>The following table points to the tasks that you can use to
manage directory-based identity mapping for the Solaris CIFS service in a Windows
environment.</p><p>These tasks use the <a href="http://docs.sun.com/doc/819-2240/idmap-1m?a=view"><tt>idmap</tt>(1M)</a> command to manage identity mapping.</p><table><col width="33%"><col width="33%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Extend the
Active Directory (AD) schema with user and group name attributes.</p></td>
<td align="left" valign="top" scope="row"><p>This procedure describes
how to extend the AD schema and populate the user and group
objects with UNIX user and group name information.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyaddirbasedmapping">How to Extend the Active Directory Schema, and User and Group Entries</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Extend the native LDAP schema
with user and group name attributes.</p></td>
<td align="left" valign="top" scope="row"><p>This procedure describes how to extend the
native LDAP schema and populate the user and group objects with Windows
user and group name information.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifynldapdirbasedmapping">How to Extend the Native LDAP Schema, and User and Group Entries</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Configure directory-based name mapping.</p></td>
<td align="left" valign="top" scope="row"><p>Use this procedure to enable
directory-based mapping. This procedure also informs the <tt>idmap</tt> service about the new
AD schema attributes that are used by the user and group objects.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#configuredirbasedmapping">How to Configure Directory-Based Mapping</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add
a directory-based name mapping to a user object.</p></td>
<td align="left" valign="top" scope="row"><p>Use this procedure to add
a directory-based name mapping to a user object in AD or native
LDAP.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#adddirmappingusertask">How to Add a Directory-Based Name Mapping to a User Object</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a directory-based name mapping to a group object.</p></td>
<td align="left" valign="top" scope="row"><p>Use this procedure to
add a directory-based name mapping to a group object in AD or
native LDAP.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#adddirmappinggrouptask">How to Add a Directory-Based Name Mapping to a Group Object</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Remove a directory-based name mapping from a user object.</p></td>
<td align="left" valign="top" scope="row"><p>Use this procedure
to remove a directory-based name mapping from a user object in AD
or native LDAP.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#removedirmappingusertask">How to Remove a Directory-Based Name Mapping From a User Object</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Remove a directory-based name mapping from a group object.</p></td>
<td align="left" valign="top" scope="row"><p>Use this
procedure to remove a directory-based name mapping from a group object in
AD or native LDAP.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#removedirmappinggrouptask">How to Remove a Directory-Based Name Mapping From a Group Object</a></p></td>
</tr>
</table><p>For more information about user and group identities, see <a href="mapusergroupidentities.html">Mapping User and Group Identities</a>.</p>
<hr><p><b>Note - </b>In a cluster configuration, changes made to user maps and to group
maps on one server are immediately propagated to the other server.</p>
<hr>


<a name="modifyaddirbasedmapping"></a><h4>How to Extend the Active Directory Schema, and User and Group Entries</h4><a name="indexterm-64"></a><a name="indexterm-65"></a><a name="indexterm-66"></a><a name="indexterm-67"></a><p>This procedure shows how to extend the AD schema and populate the
user and group objects with the associated Solaris names.</p>
<hr><p><b>Note - </b>Perform this task before enabling directory-based mapping on your Solaris system.</p>
<hr>
<ol>
<li><b>(Optional) Extend the AD schema to add the new UNIX user and
group attributes.</b>
<hr><p><b>Note - </b>If you do not want to extend the AD schema, you can
use an existing AD schema attribute to store UNIX user and group
name information. For instance, if you already have schema that is comparable
to what is described in <a href="#modifyadschemaex">Example&nbsp;2-1</a>, you can use your attributes instead
of creating new ones.</p>
<hr>
<ol style="list-style-type: lower-alpha">
				 
<li><b>Create an LDAP Data Interchange Format (LDIF) file to describe the AD
schema changes.</b><p>For sample LDIF file contents, see <a href="#modifyadschemaex">Example&nbsp;2-1</a>. Also see <i>Extending Your Active Directory Schema in Windows Server 2003 R2</i> and <i>Step-by-Step Guide to Using Active Directory Schema and Display Specifiers</i>
on the <a href="http://technet.microsoft.com/">Microsoft technet web site</a>.</p></li>
<li><b>Use the <tt>ldifde</tt> tool to load the schema changes into AD from
the Windows server.</b><pre>C:\> <tt><b>ldifde -v -i -f </tt><i>input-file</i><tt></b></tt></pre></li></ol></li>
<li><b>Use the <tt>ldapmodify</tt> command to populate the AD user and group objects
with the new attributes and their values.</b><p>You can use the <tt>idmap set-namemap</tt> command to populate user and group objects.
See <a href="#adddirmappingusertask">How to Add a Directory-Based Name Mapping to a User Object</a> and <a href="#adddirmappinggrouptask">How to Add a Directory-Based Name Mapping to a Group Object</a>.</p><p>You can also use any of the Windows AD utilities to populate
these objects.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>Create an LDIF file to record the updates to the AD user
and group objects.</b><p>See a sample LDIF file in <a href="#populateadusergroupobjectsex">Example&nbsp;2-2</a>. For more information about the
LDIF file format, see <a href="http://www.faqs.org/rfcs/rfc2849.html">RFC 2849</a>.</p></li>
<li><b>Use the <tt>kinit</tt> command to obtain a Kerberos ticket-granting ticket (TGT) for
a privileged AD principal.</b><p>This principal will be used by the <tt>ldapmodify</tt> command to update the
AD objects described in the file you created in the previous substep.</p><p>For example:</p><pre>$ <tt><b>kinit Administrator</b></tt>
Password for Administrator@EXAMPLE.COM: </pre></li>
<li><b>Use the <tt>ldapmodify</tt> command to update the user objects on the AD
server.</b><pre>$ <tt><b>ldapmodify -h </tt><i>AD-server-name</i><tt> -o mech=gssapi -o authzid='' -f </tt><i>input-file</i><tt></b></tt></pre></li></ol></li></ol><a name="modifyadschemaex"></a>Example&nbsp;2-1 Extending the AD Schema<p>The following LDIF example file, <tt>ad_namemap_schema.ldif</tt>, describes the AD schema changes:</p><pre>dn: CN=unixUserName, CN=Schema, CN=Configuration, DC=example, DC=com
changetype: add
attributeID: 1.3.6.1.4.1.42.2.27.5.1.60
attributeSyntax: 2.5.5.3
isSingleValued: TRUE
searchFlags: 1
lDAPDisplayName: unixUserName
adminDescription: This attribute contains the object's UNIX username
objectClass: attributeSchema
oMSyntax: 27

dn: CN=unixGroupName, CN=Schema, CN=Configuration, DC=example, DC=com
changetype: add
attributeID: 1.3.6.1.4.1.42.2.27.5.1.61
attributeSyntax: 2.5.5.3
isSingleValued: TRUE
searchFlags: 1
lDAPDisplayName: unixGroupName
adminDescription: This attribute contains the object's UNIX groupname
objectClass: attributeSchema
oMSyntax: 27

dn:
changetype: modify
add: schemaUpdateNow
schemaUpdateNow: 1
-

dn: CN=unixNameInfo, CN=Schema, CN=Configuration, DC=example, DC=com
changetype: add
governsID: 1.3.6.1.4.1.42.2.27.5.2.15
lDAPDisplayName: unixNameInfo
adminDescription: Auxiliary class to store UNIX name info in AD
mayContain: unixUserName
mayContain: unixGroupName
objectClass: classSchema
objectClassCategory: 3
subClassOf: top</pre><p>Use the <tt>ldifde</tt> tool to load the schema changes into AD from
the Windows server:</p><pre>C:\> <tt><b>ldifde -v -i -f ad_namemap_schema.ldif</b></tt></pre><a name="populateadusergroupobjectsex"></a>Example&nbsp;2-2 Populating AD User and Group Objects<p>The following example has Windows users <tt>terry</tt>, <tt>cal</tt>, and <tt>dana</tt> stored in
Active Directory. These Windows users are associated with the Solaris users <tt>tmw</tt>,
<tt>crj</tt>, and <tt>dab</tt>, respectively.</p><p>This example shows how to add the Solaris user names to the
appropriate user objects in AD by using the <tt>ldapmodify</tt> command.</p><p>First, create an input file, <tt>updateUsers</tt>, that associates the Windows names with
the Solaris names:</p><pre>$ <tt><b>cat updateUsers</b></tt>
dn: CN=Terry Walters,CN=Users,DC=example,DC=com
changetype: modify
add: unixUserName
unixUserName: tmw

dn: CN=Cal Jamieson,CN=Users,DC=example,DC=com
changetype: modify
add: unixUserName
unixUserName: crj

dn: CN=Dana Bloom,CN=Users,DC=example,DC=com
changetype: modify
add: unixUserName
unixUserName: dab
$</pre><p>Next, use the <tt>kinit</tt> command to obtain a TGT for a privileged
principal:</p><pre>$ <tt><b>kinit Administrator</b></tt>
Password for Administrator@EXAMPLE.COM: </pre><p>Finally, run the <tt>ldapmodify</tt> command to update the user objects on the
AD server, <tt>saturn</tt>:</p><pre>$ <tt><b>ldapmodify -h saturn -o mech=gssapi -o authzid='' -f updateUsers</b></tt></pre>

<a name="modifynldapdirbasedmapping"></a><h4>How to Extend the Native LDAP Schema, and User and Group Entries</h4><a name="indexterm-68"></a><a name="indexterm-69"></a><a name="indexterm-70"></a><a name="indexterm-71"></a><p>This procedure shows how to extend the native LDAP schema and populate
the user and group objects with the associated Windows names.</p>
<hr><p><b>Note - </b>Perform this task before enabling directory-based mapping on your Solaris system.</p>
<hr>
<ol>
<li><b>(Optional) Extend the native LDAP schema to add the new Windows user
and group attributes.</b>
<hr><p><b>Note - </b>If you do not want to extend the native LDAP schema, you
can use an existing native LDAP schema attribute to store Windows user
and group name information. For instance, if you already have schema that
is comparable to what is described in <a href="#modifynldapschemaex">Example&nbsp;2-3</a>, you can use your
attributes instead of creating new ones.</p>
<hr>
<ol style="list-style-type: lower-alpha">
				 
<li><b>Create an LDAP Data Interchange Format (LDIF) file to describe the native
LDAP schema changes.</b><p>For sample LDIF file contents, see <a href="#modifynldapschemaex">Example&nbsp;2-3</a>.</p></li>
<li><b>Use the <tt>ldapmodify</tt> tool to load the schema changes into native LDAP.</b><pre>$ <tt><b>ldapmodify -D cn=admin -w p -f </tt><i>input-file</i><tt></b></tt></pre></li></ol></li>
<li><b>Use the <tt>ldapmodify</tt> command to populate the native LDAP user and group
objects with the new attributes and their values.</b><p>You can use the <tt>idmap set-namemap</tt> command to populate user and group objects.
See <a href="#adddirmappingusertask">How to Add a Directory-Based Name Mapping to a User Object</a> and <a href="#adddirmappinggrouptask">How to Add a Directory-Based Name Mapping to a Group Object</a>.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>Create an LDIF file to record the updates to the native LDAP
user and group objects.</b><p>See a sample LDIF file in <a href="#populatenldapusergroupobjectsex">Example&nbsp;2-4</a>. For more information about the
LDIF file format, see <a href="http://www.faqs.org/rfcs/rfc2849.html">RFC 2849</a>.</p></li>
<li><b>Use the <tt>ldapmodify</tt> command to update the user objects on the native
LDAP server.</b><pre>$ <tt><b>ldapmodify -h </tt><i>LDAP-server-name</i><tt> -o mech=gssapi -o authzid='' -f </tt><i>input-file</i><tt></b></tt></pre></li></ol></li></ol><a name="modifynldapschemaex"></a>Example&nbsp;2-3 Extending the Native LDAP Schema<p>The following LDIF example file, <tt>nldap_namemap_schema.ldif</tt>, describes the native LDAP schema changes:</p><pre>dn: cn=schema
changetype: modify
add: attributeTypes
attributeTypes: ( 1.3.6.1.4.1.42.2.27.5.1.62
   NAME 'winAccountName'
   DESC 'Windows user or group name corresponding to a Unix user or group'
   EQUALITY caseIgnoreMatch
   SUBSTRINGS caseIgnoreSubstringsMatch
   ORDERING caseIgnoreOrderingMatch
   SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )
-
add: objectClasses
objectClasses: ( 1.3.6.1.4.1.42.2.27.5.2.16
   NAME 'winAccount'
   DESC 'Auxiliary class to store Windows name mappings in Unix user/group objects'
   SUP top
   AUXILIARY
   MAY winAccountName )</pre><p>Use the <tt>ldapmodify</tt> tool to load the schema changes into native LDAP:</p><pre>$ <tt><b>ldapmodify -D cn=admin -w - -f f nldap_namemap_schema.ldif</b></tt>
Enter bind password:
modifying entry cn=schema</pre><a name="populatenldapusergroupobjectsex"></a>Example&nbsp;2-4 Populating Native LDAP User and Group Objects<p>The following example has Solaris users <tt>tmw</tt>, <tt>crj</tt>, and <tt>dab</tt> stored in
native LDAP. These Solaris users are associated with the Windows users <tt>terry</tt>,
<tt>cal</tt>, and <tt>dana</tt>, respectively.</p><p>This example shows how to add the Windows user names to the
appropriate user objects in native LDAP by using the <tt>ldapmodify</tt> command.</p><p>First, create an input file, <tt>updateUsers</tt>, that associates the Solaris names with
the Windows names:</p><pre>$ <tt><b>cat updateUsers</b></tt>
dn: uid=tmw,ou=passwd,dc=example,dc=com
changetype: modify
add: winAccountName
winAccountName: terry@example.com

dn: uid=crj,ou=passwd,dc=example,dc=com
changetype: modify
add: winAccountame
winAccountame: cal@example.com

dn: uid=dab,ou=passwd,dc=example,dc=com
changetype: modify
add: winAccountame
winAccountame: dana@example.com
$</pre><p>Then, run the <tt>ldapmodify</tt> command to update the user objects on the
native LDAP server, <tt>neptune</tt>:</p><pre>$ <tt><b>ldapmodify -h neptune -o mech=gssapi -o authzid='' -f updateUsers</b></tt></pre>

<a name="configuredirbasedmapping"></a><h4>How to Configure Directory-Based Mapping</h4><a name="indexterm-72"></a><a name="indexterm-73"></a><h6>Before You Begin</h6><p>Before you can enable directory-based mapping on your Solaris system, you must
extend the AD schema, the native LDAP schema, or both, and populate
the user and group objects with the associated Solaris names. See <a href="#modifyaddirbasedmapping">How to Extend the Active Directory Schema, and User and Group Entries</a>
and <a href="#modifynldapdirbasedmapping">How to Extend the Native LDAP Schema, and User and Group Entries</a>.</p><ol>
<li><b>Enable directory-based mapping.</b><pre># <tt><b>svccfg -s svc:/system/idmap setprop config/ds_name_mapping_enabled=boolean: true</b></tt></pre></li>
<li><b>Inform the <tt>idmap</tt> service about the new user and group attributes.</b>
<hr><p><b>Note - </b>To fully enable directory-based mapping, you <b>must</b> specify values for the following
properties depending on the directory service or services you plan to use:</p>
<ul><li><p><tt>config/ad_unixuser_attr</tt></p></li>
<li><p><tt>config/ad_unixgroup_attr</tt></p></li>
<li><p><tt>config/nldap_winname_attr</tt></p></li></ul>
<p>These properties do not have default values. If the properties are not
set, directory-based mapping is effectively disabled for the corresponding naming service.</p>
<hr>
<p>In an environment that stores user and group name information in both
Active Directory and native LDAP, perform the steps for each naming service.</p><ul>
<li><b>For Active Directory, inform the <tt>idmap</tt> service about the new Active Directory
UNIX user and group attributes.</b><pre># <tt><b>svccfg -s svc:/system/idmap setprop \ config/ad_unixuser_attr=astring: </tt><i>attribute-name</i><tt></b></tt>
# <tt><b>svccfg -s svc:/system/idmap setprop \ config/ad_unixgroup_attr=astring: </tt><i>attribute-name</i><tt></b></tt></pre><p><i>attribute-name</i> is the attribute name you choose for the UNIX user or
group name to be stored in AD.</p><p>For example, the following specifies the <tt>unixGroupName</tt> and <tt>unixUserName</tt> attribute names for
the UNIX group and user names, respectively:</p><pre># <tt><b>svccfg -s svc:/system/idmap setprop \ config/ad_unixgroup_attr=astring: unixGroupName</b></tt>
# <tt><b>svccfg -s svc:/system/idmap setprop \ config/ad_unixuser_attr=astring: unixUserName</b></tt></pre></li>
<li><b>For native LDAP, inform the <tt>idmap</tt> service about the new native LDAP
Windows name attribute.</b><pre># <tt><b>svccfg -s svc:/system/idmap setprop \ config/nldap_winname_attr=astring: </tt><i>attribute-name</i><tt></b></tt></pre><p><i>attribute-name</i> is the attribute name you choose for the Windows name to
be stored in native LDAP.</p><p>For example, the following specifies the <tt>winAccountName</tt> attribute name for the Windows
name:</p><pre># <tt><b>svccfg -s svc:/system/idmap setprop \ config/nldap_winname_attr=astring: winAccountName</b></tt></pre></li></ul></li></ol>

<a name="adddirmappingusertask"></a><h4>How to Add a Directory-Based Name Mapping to a User Object</h4><a name="indexterm-74"></a><a name="indexterm-75"></a><a name="indexterm-76"></a><p>This procedure shows how to perform the following directory-based name mapping:</p>
<ul><li><p>Map a Windows user to a Solaris user by adding the Solaris user name to the AD object for the specified Windows user.</p></li>
<li><p>Map a Solaris user to a Windows user by adding the Windows user name to the native LDAP object for the specified Solaris user.</p></li></ul>
<p>For more information about the <tt>idmap set-namemap</tt> command and its options, see the
<a href="http://docs.sun.com/doc/819-2240/idmap-1m?a=view"><tt>idmap</tt>(1M)</a> man page.</p><ol>
<li><b>Become superuser, assume an equivalent role, obtain the <tt>solaris.admin.idmap.rules</tt> RBAC authorization, or
use the &ldquo;Idmap Service Management&rdquo; RBAC profile.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Determine whether to augment a user object in AD or in the
native LDAP service.</b><ul>
<li><b>To augment the Windows user object in AD, type:</b><pre># <tt><b>idmap set-namemap winuser:</tt><i>username</i><tt>@</tt><i>domain-name</i><tt> unixuser:</tt><i>username</i><tt></b></tt></pre><p>For example, the following command maps Windows user <tt>danab@example.com</tt> to Solaris user
<tt>dana</tt> by adding the Solaris name to the AD object for <tt>danab@example.com</tt>:</p><pre># <tt><b>idmap set-namemap winuser:danab@example.com unixuser:dana</b></tt></pre></li>
<li><b>To augment the Solaris user object in native LDAP, type:</b><pre># <tt><b>idmap set-namemap unixuser:</tt><i>username</i><tt> winuser:</tt><i>username</i><tt>@</tt><i>domain-name</i><tt></b></tt></pre><p>For example, the following command maps Solaris user <tt>dana</tt> to Windows user
<tt>danab@example.com</tt> by adding the Windows name to the native LDAP object for
<tt>dana</tt>:</p><pre># <tt><b>idmap set-namemap unixuser:dana winuser:danab@example.com</b></tt></pre></li></ul></li></ol>

<a name="adddirmappinggrouptask"></a><h4>How to Add a Directory-Based Name Mapping to a Group Object</h4><a name="indexterm-77"></a><a name="indexterm-78"></a><a name="indexterm-79"></a><p>This procedure shows how to perform the following directory-based name mapping:</p>
<ul><li><p>Map a Windows group to a Solaris group by adding the Solaris group name to the AD object for the specified Windows group.</p></li>
<li><p>Map a Solaris group to a Windows group by adding the Windows group name to the native LDAP object for the specified Solaris group.</p></li></ul>
<ol>
<li><b>Become superuser, assume an equivalent role, obtain the <tt>solaris.admin.idmap.rules</tt> RBAC authorization, or
use the &ldquo;Idmap Service Management&rdquo; RBAC profile.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Determine whether to augment a group object in AD or in the
native LDAP service.</b><ul>
<li><b>To augment the Windows group object in AD, type:</b><pre># <tt><b>idmap set-namemap wingroup:</tt><i>group-name</i><tt>@</tt><i>domain-name</i><tt> unixgroup:</tt><i>group-name</i><tt></b></tt></pre><p>For example, the following command maps Windows group <tt>salesgrp@example.com</tt> to Solaris group
<tt>sales</tt> by adding the Solaris name to the AD object for <tt>salesgrp@example.com</tt>:</p><pre># <tt><b>idmap set-namemap wingroup:salesgrp@example.com unixgroup:sales</b></tt></pre></li>
<li><b>To augment the Solaris group object in native LDAP, type:</b><pre># <tt><b>idmap set-namemap unixgroup:</tt><i>group-name</i><tt> wingroup:</tt><i>group-name</i><tt>@</tt><i>domain-name</i><tt></b></tt></pre><p>For example, the following command maps Solaris group <tt>sales</tt> to Windows group
<tt>salesgrp@example.com</tt> by adding the Windows name to the native LDAP object for
<tt>sales</tt>:</p><pre># <tt><b>idmap set-namemap unixgroup:sales wingroup:salesgrp@example.com</b></tt></pre></li></ul></li></ol>

<a name="removedirmappingusertask"></a><h4>How to Remove a Directory-Based Name Mapping From a User Object</h4><a name="indexterm-80"></a><a name="indexterm-81"></a><ol>
<li><b>Become superuser, assume an equivalent role, obtain the <tt>solaris.admin.idmap.rules</tt> RBAC authorization, or
use the &ldquo;Idmap Service Management&rdquo; RBAC profile.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>View the directory-based name mapping information for the specified user.</b><pre># <tt><b>idmap get-namemap </tt><i>username</i><tt></b></tt></pre></li>
<li><b>Remove the user name stored in the user object of AD or
native LDAP.</b><ul>
<li><b>Remove the Solaris name from the AD object for the specified user.</b><pre># <tt><b>idmap unset-namemap winuser:</tt><i>username</i><tt>@</tt><i>domain-name</i><tt></b></tt></pre><p>For example, the following command removes the Solaris name from the AD
object for Windows user <tt>danab@example.com</tt>:</p><pre># <tt><b>idmap unset-namemap winuser:danab@example.com</b></tt></pre></li>
<li><b>Remove the Windows name from the native LDAP object for the specified
user.</b><pre># <tt><b>idmap unset-namemap unixuser:</tt><i>username</i><tt></b></tt></pre><p>For example, the following command removes the Windows name from the native
LDAP object for Solaris user <tt>dana</tt>:</p><pre># <tt><b>idmap unset-namemap unixuser:dana</b></tt></pre></li></ul></li></ol>

<a name="removedirmappinggrouptask"></a><h4>How to Remove a Directory-Based Name Mapping From a Group Object</h4><a name="indexterm-82"></a><a name="indexterm-83"></a><ol>
<li><b>Become superuser, assume an equivalent role, obtain the <tt>solaris.admin.idmap.rules</tt> RBAC authorization, or
use the &ldquo;Idmap Service Management&rdquo; RBAC profile.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>View the directory-based name mapping information for the specified group.</b><pre># <tt><b>idmap get-namemap </tt><i>group-name</i><tt></b></tt></pre></li>
<li><b>Remove the group name stored in the group object of AD or
native LDAP.</b><ul>
<li><b>Remove the Solaris name from the AD object for the specified group.</b><pre># <tt><b>idmap unset-namemap wingroup:</tt><i>group-name</i><tt>@</tt><i>domain-name</i><tt></b></tt></pre><p>For example, the following command removes the Solaris name from the AD
object for Windows group <tt>salesgrp@example.com</tt>:</p><pre># <tt><b>idmap unset-namemap wingroup:salesgrp@example.com</b></tt></pre></li>
<li><b>Remove the Windows name from the native LDAP object for the specified
group.</b><pre># <tt><b>idmap unset-namemap unixgroup:</tt><i>group-name</i><tt></b></tt></pre><p>For example, the following command removes the Windows name from the native
LDAP object for Solaris group <tt>sales</tt>:</p><pre># <tt><b>idmap unset-namemap unixgroup:sales</b></tt></pre></li></ul></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="createidmappingstrategy.html">Previous</a>
             </td>
             <td align="right">
                 <a href="manageusergroupmapstm.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

