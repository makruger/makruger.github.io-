<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Managing CIFS Mounts in the Global Environment (Task Map) - Solaris CIFS Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris CIFS Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="smbclientusertaskstm.html">Previous</a>
             </td>
             <td align="right">
                 <a href="troubleshooting.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="smboverview.html">1.&nbsp;&nbsp;Windows Interoperability (Overview)</a></p>
<p class="toc level1 tocsp"><a href="idmappingtasks.html">2.&nbsp;&nbsp;Identity Mapping Administration (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="smbservertasks.html">3.&nbsp;&nbsp;Solaris CIFS Service Administration (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="smbclienttasks.html">4.&nbsp;&nbsp;Solaris CIFS Client Administration (Tasks)</a></p>
<p class="toc level2"><a href="smbclientusertaskstm.html">Managing CIFS Mounts in Your Local Environment (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Managing CIFS Mounts in the Global Environment (Task Map)</a></p>
</div>
<p class="toc level1 tocsp"><a href="troubleshooting.html">5.&nbsp;&nbsp;Solaris CIFS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="glossary.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="smbclientadmintaskstm"></a><h3>Managing CIFS Mounts in the Global Environment (Task Map)</h3>
<a name="indexterm-162"></a><p>The following table points to the tasks that superuser can perform to
manage CIFS mounts.</p><table><col width="33%"><col width="33%"><col width="33%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount a share on a public mount point, such
as one in the root file system, so that many users can
access the share.</p></td>
<td align="left" valign="top" scope="row"><p>Some shares include files and directories that many people on
a system might want to access, such as a global set of
files or programs. In such cases, instead of each user mounting the
share in his own directory, the system administrator can mount the share
in a public place so that all users can access the share
from the same location.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#setupmultiusersharetask">How to Mount a Multiuser Share</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Customize the global environment by using the <tt>sharectl</tt> command
to set Solaris CIFS properties.</p></td>
<td align="left" valign="top" scope="row"><p>User-specified properties override global properties with the exception
of security settings.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#customizeglobalenvtask">How to Customize the Global Solaris CIFS Environment</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>View the global Solaris CIFS property settings by using the
<tt>sharectl</tt> command.</p></td>
<td align="left" valign="top" scope="row"><p>If one property is set with different values in each section,
all values are shown.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#viewglobalenvtask">How to View the Global Solaris CIFS Environment Property Settings</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a CIFS share to an automounter map.</p></td>
<td align="left" valign="top" scope="row"><p>Use this
procedure if you want a CIFS share to be automatically mounted at
boot time.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#automountsharetask">How to Add a Direct Automounter Entry for a CIFS Share</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Delete all persistent passwords.</p></td>
<td align="left" valign="top" scope="row"><p>Use this procedure if you want to clear
all persistent passwords.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#deleteallpasswordstask">How to Delete All Persistent Passwords</a></p></td>
</tr>
</table>

<a name="setupmultiusersharetask"></a><h4>How to Mount a Multiuser Share</h4><a name="indexterm-163"></a><a name="indexterm-164"></a><p>If you want to make a share available to one or more
users on a system, you can mount the share on a mount
point anywhere on the system. When you mount a share as superuser,
you do not need to own the mount point.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Find the share that you want to mount from a server.</b><pre># <tt><b>smbutil view //</tt><i>server</i><tt></b></tt></pre></li>
<li><b>Specify the password at the prompt.</b></li>
<li><b>Determine the mount point that you want to use.</b><p>For example, you decide to mount shares on the <tt>/sales-tools</tt> mount point.</p></li>
<li><b>Perform the mount.</b><pre># <tt><b>mount -F smbfs //[</tt><i>workgroup</i><tt>;][</tt><i>user</i><tt>[:</tt><i>password</i><tt>]@]</tt><i>server</i><tt>/</tt><i>share</i><tt> </tt><i>mount-point</i><tt></b></tt></pre><p>For example, to mount the <tt>/tmp</tt> share from the <tt>solarsystem</tt> server on
the <tt>/sales-tools</tt> mount point, type:</p><pre># <tt><b>mount -F smbfs //solarsystem/tmp /sales-tools</b></tt></pre></li></ol>

<a name="customizeglobalenvtask"></a><h4>How to Customize the Global Solaris CIFS Environment</h4><a name="indexterm-165"></a><a name="indexterm-166"></a><p>You can customize the global Solaris CIFS environment by using the <tt>sharectl</tt>(1M)
command. With the exception of the <tt>minauth</tt> property, globally set properties can
be overridden by a value set in user's <tt>.nsmbrc</tt> file. The most
secure value of the <tt>minauth</tt> property takes precedence over a less secure
value set by the user or set in the global environment.</p><ol>
<li><b>Become superuser, assume an equivalent role, or use the &ldquo;SMBFS Management&rdquo; RBAC
profile, which is part of the &ldquo;File System Management&rdquo; profile.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Determine which properties you want to set.</b><p>For a description of the properties, see the <a href="http://docs.sun.com/doc/819-2251/nsmbrc-4?a=view"><tt>nsmbrc</tt>(4)</a> man page.</p></li>
<li><b>Set a property value for the global Solaris CIFS environment.</b><pre># <tt><b>sharectl set [-h] [-p </tt><i>property</i><tt>=</tt><i>value</i><tt>] &hellip; smbfs</b></tt></pre><p>For example, to specify a default workgroup name of <tt>SALES</tt> for the
default section, type:</p><pre># <tt><b>sharectl set -p section=default -p workgroup=SALES smbfs</b></tt></pre></li></ol>

<a name="viewglobalenvtask"></a><h4>How to View the Global Solaris CIFS Environment Property Settings</h4><a name="indexterm-167"></a><a name="indexterm-168"></a><p>You can view the global Solaris CIFS environment property settings by using
the <tt>sharectl</tt>(1M) command.</p><p>If you set a value for the same property in more than
one section, the <tt>sharectl get</tt> output includes the section name, property name, and
value.</p><ul>
<li><b>Determine which properties you want to view.</b><p>For a description of the properties, see the <a href="http://docs.sun.com/doc/819-2251/nsmbrc-4?a=view"><tt>nsmbrc</tt>(4)</a> man page.</p><ul>
<li><b>To view the value for a specific property, type:</b><pre>$ <tt><b>sharectl get [-p </tt><i>property</i><tt>] &hellip; smbfs</b></tt></pre><p>For example, to view the values for the <tt>timeout</tt> property, type:</p><pre>$ <tt><b>sharectl get -p timeout smbfs</b></tt>
[SALES] timeout=5
[default] timeout=10</pre></li>
<li><b>To view all of the property settings, type:</b><pre>$ <tt><b>sharectl get smbfs</b></tt>
[SALES]
password=$$178465324253e0c07
timeout=5

[default]
timeout=10</pre></li></ul></li></ul>

<a name="automountsharetask"></a><h4>How to Add a Direct Automounter Entry for a CIFS Share</h4><a name="indexterm-169"></a><a name="indexterm-170"></a><p>You can add a CIFS share <tt>/etc/auto_direct</tt> file so that the share
will be automatically mounted when a user accesses the mount point. See
<a href="smbclientusertaskstm.html#storepasswordtask">How to Store a Persistent Password</a>.</p><p>To successfully use the automount feature, you must store a persistent password
for authentication to mount the share.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Edit the <tt>/etc/auto_direct</tt> file to add the mapping.</b><p>The following examples show the changes to the <tt>/etc/auto_direct</tt> file to configure
automount maps.</p>
<ul><li><p>To configure an automount of the <tt>//solarsystem/public</tt> share on the <tt>/PUBLIC</tt> mount point, create the following entry in the <tt>/etc/auto_direct</tt> file:</p><pre>/PUBLIC -fstype=smbfs //solarsystem/public</pre></li>
<li><p>To configure an automount of a share and to specify the password to be used for authentication, create the following entry in the <tt>/etc/auto_direct</tt> file:</p><pre>/PUBLIC -fstype=smbfs //guest:guest@solarsystem/public</pre><p>This entry specifies that all access to the <tt>//solarsystem/public</tt> share is done as the user <tt>guest</tt> and uses the specified password, which in this example is <tt>guest</tt>.</p></li>
<li><p>To configure an automount of a share that can be accessed anonymously, which does not require a password, specify the <tt>noprompt</tt> option:</p><pre>/PUBLIC -noprompt,fstype=smbfs //solarsystem/public</pre></li></ul>
<p>When a user accesses the <tt>/PUBLIC</tt> directory, such as by using the
<tt>ls</tt> or <tt>cd</tt> command, the share is automounted.</p><pre>$ <tt><b>ls /PUBLIC</b></tt>
bin docs</pre><p>After the CIFS share is mounted, a user can use regular Solaris
commands to access the files. Automounted shares are automatically unmounted after a
period of inactivity.</p></li></ol>

<a name="deleteallpasswordstask"></a><h4>How to Delete All Persistent Passwords</h4><a name="indexterm-171"></a><a name="indexterm-172"></a><p>Use this procedure to delete all of the persistent passwords that are
used to authenticate CIFS transactions.</p><p>If you only want to delete the persistent passwords for a particular
user, see <a href="smbclientusertaskstm.html#deletepasswordtask">How to Delete a Persistent Password</a>.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see
<a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>. To configure a role with the Primary Administrator profile, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Delete all of the persistent passwords.</b><pre># <tt><b>smbutil logoutall</b></tt></pre><p>After the persistent passwords are deleted, each time a user performs a
transaction with a CIFS server, he is prompted for his password.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="smbclientusertaskstm.html">Previous</a>
             </td>
             <td align="right">
                 <a href="troubleshooting.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

