<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Utilities and Files Associated With the Solaris CIFS Server and Client - Solaris CIFS Administration Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Solaris CIFS Administration Guide</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="processoverview.html">Previous</a>
             </td>
             <td align="right">
                 <a href="namingdirectoryservices.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="smboverview.html">1.&nbsp;&nbsp;Windows Interoperability (Overview)</a></p>
<p class="toc level2"><a href="smbenvironmentoverview.html">The Solaris CIFS Service</a></p>
<p class="toc level2"><a href="processoverview.html">Configuring the Solaris CIFS Service - Process Overview</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Utilities and Files Associated With the Solaris CIFS Server and Client</a></p>
</div>
<p class="toc level2"><a href="namingdirectoryservices.html">Authentication, Directory, Naming, and Time Services</a></p>
<p class="toc level2"><a href="smbshares.html">CIFS Shares</a></p>
<p class="toc level2"><a href="localsmbgroupsusers.html">Local CIFS Groups</a></p>
<p class="toc level1 tocsp"><a href="idmappingtasks.html">2.&nbsp;&nbsp;Identity Mapping Administration (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="smbservertasks.html">3.&nbsp;&nbsp;Solaris CIFS Service Administration (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="smbclienttasks.html">4.&nbsp;&nbsp;Solaris CIFS Client Administration (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="troubleshooting.html">5.&nbsp;&nbsp;Solaris CIFS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="glossary.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="smbcmdsdaemonsfiles"></a><h3>Utilities and Files Associated With the Solaris CIFS Server and Client</h3>
<p>This section describes the CIFS utilities and files that are used by
the CIFS service and client.</p>
<ul><li><p><a href="#smbcommands">Solaris CIFS Utilities</a></p></li>
<li><p><a href="#smbdaemons">Solaris CIFS Service Daemon</a></p></li>
<li><p><a href="#smbfiles">Solaris CIFS Files</a></p></li></ul>

<hr><p><b>Note - </b>The Solaris CIFS service is only supported in the global zone.</p>
<hr>


<a name="smbcommands"></a><h4>Solaris CIFS Utilities</h4>
<p><a name="indexterm-10"></a>These utilities must be run as superuser or with specific privileges to
be fully effective, but requests for information can be made by all
users:</p>
<ul><li><p><a href="#mountsmbfscommand"><tt>mount_smbfs</tt> Command</a></p></li>
<li><p><a href="#sharectlcommand"><tt>sharectl</tt> Command</a></p></li>
<li><p><a href="#sharemgrcommand"><tt>sharemgr</tt> Command</a></p></li>
<li><p><a href="#smbadmcommand"><tt>smbadm</tt> Command</a></p></li>
<li><p><a href="#smbstatcommand"><tt>smbstat</tt> Command</a></p></li>
<li><p><a href="#smbutilcommand"><tt>smbutil</tt> Command</a></p></li>
<li><p><a href="#umountsmbfscommand"><tt>umount_smbfs</tt> Command</a></p></li></ul>


<a name="mountsmbfscommand"></a><h5><tt>mount_smbfs</tt> Command</h5>
<a name="indexterm-11"></a><p>With this command, you can attach a named CIFS share to a
specified mount point. The <tt>mount_smbfs</tt> command enables you to mount a CIFS
share to a directory you own without having to become superuser.</p><p>For more information, see the following:</p>
<ul><li><p><a href="smbclientusertaskstm.html#mountsharetask">How to Mount a Share on a Directory You Own</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#setupmultiusersharetask">How to Mount a Multiuser Share</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#automountsharetask">How to Add a Direct Automounter Entry for a CIFS Share</a></p></li></ul>
<p>Also, see the <a href="http://docs.sun.com/doc/819-2240/mount-smbfs-1m?a=view"><tt>mount_smbfs</tt>(1M)</a> man page.</p>

<a name="sharectlcommand"></a><h5><tt>sharectl</tt> Command</h5>
<p>The <tt>sharectl</tt> utility is an administrative tool that enables you to configure
and manage file-sharing protocols, such as CIFS and NFS. You can use
this command to do the following:</p>
<ul><li><p>Set client and server operational properties</p></li>
<li><p>Display property values for a specific protocol</p></li>
<li><p>Obtain the status of a protocol</p></li></ul>
<p>For procedures that use the <tt>sharectl</tt> utility, see the following:</p>
<ul><li><p><a href="configuringservicestm.html#settingupwinstask">How to Configure WINS</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#customizeglobalenvtask">How to Customize the Global Solaris CIFS Environment</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#viewglobalenvtask">How to View the Global Solaris CIFS Environment Property Settings</a></p></li></ul>
<p>Also, see the <a href="http://docs.sun.com/doc/819-2240/sharectl-1m?a=view"><tt>sharectl</tt>(1M)</a> man page.</p>

<a name="sharemgrcommand"></a><h5><tt>sharemgr</tt> Command</h5>
<p>The <tt>sharemgr</tt> utility is an administrative tool that provides an enhanced method
of sharing files and performing related tasks. The <tt>sharemgr</tt> utility introduces the
following concepts:</p>
<ul><li><p><b>Share.</b> One or more files or directories in a share group.</p></li>
<li><p><b>Share group.</b> A container of one or more shared files or directories.</p><p>Note the following:</p>
<ul><li><p>Options for <tt>sharemgr</tt> are set to a share group, not to a specific file or directory. All options apply to each file and directory in the group.</p></li>
<li><p>A file or directory can only be assigned to one share group. However, you can move a file or directory from one group to another.</p></li>
<li><p>A share group can be used by multiple file system types. For example, the share group <tt>my_group</tt> could be used by NFS and ZFS and be assigned one set of options for NFS and another set of options for ZFS.</p>
<hr><p><b>Note - </b>When a share is managed by ZFS, <tt>sharemgr</tt> identifies the share and lists it in a <tt>zfs</tt> share group.</p>
<hr>
</li></ul>
</li></ul>

<hr><p><b>Note - </b>The <tt>sharemgr</tt> utility provides a unique way of checking the validity of
a desired configuration. The <tt>-n</tt> option allows you to test the validity
of the options and properties you want to use with a specific
subcommand. The test does not change your configuration. For example, if you
use the <tt>-n</tt> option with the subcommand <tt>create</tt>, no share group is
created.</p>
<hr>
<p>You can also use the ZFS <tt>sharesmb</tt> property to configure SMB sharing.
For more information, see <a href="managingsmbsharestm.html#createstaticsmbsharezfstask">How to Create a CIFS Share (<tt>zfs</tt>)</a> and the <a href="http://docs.sun.com/doc/819-2240/zfs-1m?a=view"><tt>zfs</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2240/zpool-1m?a=view"><tt>zpool</tt>(1M)</a> man pages.</p><p>For procedures that use the <tt>sharemgr</tt> utility, see the following:</p>
<ul><li><p><a href="managingsmbsharestm.html#createstaticsmbsharetask">How to Create a CIFS Share (<tt>sharemgr</tt>)</a></p></li>
<li><p><a href="managingsmbsharestm.html#modifysmbsharetask">How to Modify CIFS Share Properties (<tt>sharemgr</tt>)</a></p></li>
<li><p><a href="managingsmbsharestm.html#removesmbsharetask">How to Remove a CIFS Share (<tt>sharemgr</tt>)</a></p></li></ul>
<p>Also, see the <a href="http://docs.sun.com/doc/819-2240/sharemgr-1m?a=view"><tt>sharemgr</tt>(1M)</a> man page.</p>

<a name="smbadmcommand"></a><h5><tt>smbadm</tt> Command</h5>
<p>You can use the <tt>smbadm</tt> command to manage domain membership of the
Solaris CIFS service. For instance, you can have the Solaris CIFS service
use domain mode or workgroup mode. The <tt>smbadm</tt> command also enables you
to configure CIFS local groups. CIFS local groups can be used when
Windows accounts must be members of some local groups and when Windows-style
privileges must be granted. Solaris local groups cannot provide these functionalities.</p><p>For procedures that use the <tt>smbadm</tt> utility, see the following:</p>
<ul><li><p><a href="configuringoperationmodetm.html#configuredomainmodetask">How to Configure the Solaris CIFS Service in Domain Mode</a></p></li>
<li><p><a href="configuringoperationmodetm.html#configureworkgroupmodetask">How to Configure the Solaris CIFS Service in Workgroup Mode</a></p></li>
<li><p><a href="managingsmbgroupsuserstm.html#createsmbgrouptask">How to Create a CIFS Group</a></p></li>
<li><p><a href="managingsmbgroupsuserstm.html#addmembertosmbgrouptask">How to Add a Member to a CIFS Group</a></p></li>
<li><p><a href="managingsmbgroupsuserstm.html#removememberfromsmbgrouptask">How to Remove a Member From a CIFS Group</a></p></li>
<li><p><a href="managingsmbgroupsuserstm.html#modifysmbgroupprivstask">How to Modify CIFS Group Properties</a></p></li></ul>
<p>Also, see the <a href="http://docs.sun.com/doc/819-2240/smbadm-1m?a=view"><tt>smbadm</tt>(1M)</a> man page.</p>

<a name="smbstatcommand"></a><h5><tt>smbstat</tt> Command</h5>
<p>You can use the <tt>smbstat</tt> command to show statistical information about the
<tt>smbd</tt> server. By default, the <tt>smbstat</tt> command shows general information about the
CIFS service as well as dispatched CIFS request counters. For more information,
see the <a href="http://docs.sun.com/doc/819-2240/smbstat-1m?a=view"><tt>smbstat</tt>(1M)</a> man page.</p><p>The <tt>kstat</tt> command can be used to report on kernel CIFS statistics
on a periodic basis and also to specify information about individual CIFS
statistics. For more information, see the <a href="http://docs.sun.com/doc/819-2240/kstat-1m?a=view"><tt>kstat</tt>(1M)</a> man page.</p>

<a name="smbutilcommand"></a><h5><tt>smbutil</tt> Command</h5>
<p>Use the <tt>smbutil</tt> command to perform the following CIFS client tasks:</p>
<ul><li><p>View the shares available for mounting from a particular CIFS server</p></li>
<li><p>Generate a hash of a password for storing in a file such as <tt>$HOME/.nsmbrc</tt></p></li>
<li><p>Create or remove persistent passwords used to authenticate to CIFS servers</p></li>
<li><p>Resolve a name to an IP address for a server that uses CIFS over NetBIOS, not TCP</p></li>
<li><p>Resolve the specified server to the NetBIOS workgroup and system name</p></li></ul>
<p>For procedures that use the <tt>smbutil</tt> utility, see the following:</p>
<ul><li><p><a href="smbclientusertaskstm.html#findsharestask">How to Find Available Shares on a Known File Server</a></p></li>
<li><p><a href="smbclientusertaskstm.html#mountsharetask">How to Mount a Share on a Directory You Own</a></p></li>
<li><p><a href="smbclientusertaskstm.html#storepasswordtask">How to Store a Persistent Password</a></p></li>
<li><p><a href="smbclientusertaskstm.html#pammoduletask">How to Configure the PAM Module to Store a Persistent Password</a></p></li>
<li><p><a href="smbclientusertaskstm.html#deletepasswordtask">How to Delete a Persistent Password</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#setupmultiusersharetask">How to Mount a Multiuser Share</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#deleteallpasswordstask">How to Delete All Persistent Passwords</a></p></li></ul>
<p>Also, see the <a href="http://docs.sun.com/doc/819-2239/smbutil-1?a=view"><tt>smbutil</tt>(1)</a> man page.</p>

<a name="umountsmbfscommand"></a><h5><tt>umount_smbfs</tt> Command</h5>
<a name="indexterm-12"></a><p>With this command, you can remove a named CIFS share from a
mount point.</p><p>For more information, see <a href="smbclientusertaskstm.html#unmountsharetask">How to Unmount a Share From a Directory You Own</a>, and the <a href="http://docs.sun.com/doc/819-2240/mount-smbfs-1m?a=view"><tt>mount_smbfs</tt>(1M)</a> man page.</p>

<a name="smbdaemons"></a><h4>Solaris CIFS Service Daemon</h4>
<a name="indexterm-13"></a><a name="indexterm-14"></a><a name="indexterm-15"></a><p>The <tt>smbd</tt> daemon supports CIFS activities on Solaris systems. The <tt>smbd</tt> daemon
provides the gateway to the various user space components that support non-file
I/O CIFS services. Similar to the NFS kernel service, the SMB kernel
module provides SMB file I/O services directly between the network interface and
the virtual file system (VFS) within the kernel. Whenever a non-file I/O
request is received, such as a user authentication or an MS-RPC named
pipe request, it is passed to <tt>smbd</tt> for processing in user space.
Requests that require interaction with a domain controller are passed to the
SMB Redirector, which provides a simple user space SMB client for IPC
communication.</p><p>The <tt>smbd</tt> daemon depends on the <tt>idmapd</tt> daemon. For more information about
the identity mapping service, see <a href="idmappingtasks.html">Chapter&nbsp;2, Identity Mapping Administration (Tasks)</a>, and the <a href="http://docs.sun.com/doc/819-2240/idmap-1m?a=view"><tt>idmap</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2240/idmapd-1m?a=view"><tt>idmapd</tt>(1M)</a> man
pages.</p><p><tt>smbd</tt> is part of the <tt>svc:/network/smb/server:default</tt> service.</p><p>For more information, see the <a href="http://docs.sun.com/doc/819-2240/smbd-1m?a=view"><tt>smbd</tt>(1M)</a> man page.</p>

<a name="smbfiles"></a><h4>Solaris CIFS Files</h4>
<p><a name="indexterm-16"></a><a name="indexterm-17"></a><a name="indexterm-18"></a>The following files support CIFS activities on any computer:</p>
<ul><li><p><tt>/etc/auto_direct</tt></p></li>
<li><p><tt>/etc/smbautohome</tt></p></li>
<li><p><tt>$HOME/.nsmbrc</tt></p></li></ul>


<a name="autodirectfile"></a><h5><tt>/etc/auto_direct</tt> File</h5>
<p>Use the <tt>/etc/auto_direct</tt> file to automatically mount a CIFS share when a
user accesses the mount point. To use the automount feature, you must
store a persistent password for authentication to mount the share. See <a href="smbclientusertaskstm.html#storepasswordtask">How to Store a Persistent Password</a>.</p><p>For instructions and examples, see <a href="smbclientadmintaskstm.html#automountsharetask">How to Add a Direct Automounter Entry for a CIFS Share</a>.</p>

<a name="smbautohomefile"></a><h5><tt>/etc/smbautohome</tt> File</h5>
<p>The <tt>/etc/smbautohome</tt> file is used to define the automatic sharing rules to
be applied when a user connects to the Solaris CIFS service. For
more information, see <a href="smbshares.html#autohomeshares">Autohome Shares</a> and the <a href="http://docs.sun.com/doc/819-2251/smbautohome-4?a=view"><tt>smbautohome</tt>(4)</a> man page.</p>

<a name="nsmbrcfile"></a><h5><tt>$HOME/.nsmbrc</tt> File</h5>
<p>You can use the <tt>$HOME/.nsmbrc</tt> file to override global behavior of the
Solaris CIFS client. Global values are set in the Service Management Facility
(SMF). The <tt>.nsmbrc</tt> file is used to customize the behavior of the
Solaris CIFS client on a per-user basis.</p><p>By default, settings in the <tt>$HOME/.nsmbrc</tt> file are used unless they have
security implications, in which case the stronger security setting is used.</p><p>For procedures that refer to the <tt>$HOME/.nsmbrc</tt> file, see the following:</p>
<ul><li><p><a href="smbclientusertaskstm.html#customizeenvtask">How to Customize Your Solaris CIFS Environment</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#customizeglobalenvtask">How to Customize the Global Solaris CIFS Environment</a></p></li>
<li><p><a href="smbclientadmintaskstm.html#viewglobalenvtask">How to View the Global Solaris CIFS Environment Property Settings</a></p></li></ul>
<p>Also, see the <a href="http://docs.sun.com/doc/819-2251/nsmbrc-4?a=view"><tt>nsmbrc</tt>(4)</a> man page.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="processoverview.html">Previous</a>
             </td>
             <td align="right">
                 <a href="namingdirectoryservices.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

