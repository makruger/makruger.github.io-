<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">

<!--   The contents of this Documentation are subject to the Public Documentation
License Version 1.01 (the "License"); you may only use this Documentation if
you comply with the terms of this License. A copy of the License is
available at http://www.opensolaris.org/os/community/documentation/license.
  -->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Slim CD Manifest File - OpenSolaris Distribution Constructor Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-06-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/opensol.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.com"><img border="0" src="graphics/opensolaris_logo_trans.png"></img></a>
   </div>
   <div class="Title">OpenSolaris Distribution Constructor Guide</div>
</div>
<div class="headerbar"></div>


<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="appendix.html">Previous</a>
             </td>
             <td align="right">
                 
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="index.html">1.&nbsp;&nbsp;Introduction to the Distribution Constructor</a></p>
<p class="toc level1 tocsp"><a href="setup.html">2.&nbsp;&nbsp;Setup for the Distribution Constructor</a></p>
<p class="toc level1 tocsp"><a href="using.html">3.&nbsp;&nbsp;Using the Distribution Constructor</a></p>
<p class="toc level1 tocsp"><a href="appendix.html">4.&nbsp;&nbsp;Appendix: Sample Manifest File</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Slim CD Manifest File</a></p>
</div>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="manifestfile"></a><h3>Slim CD Manifest File</h3>
<pre>&lt;!--
    CDDL HEADER START

    The contents of this file are subject to the terms of the
    Common Development and Distribution License (the "License").
    You may not use this file except in compliance with the License.

    You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
    or http://www.opensolaris.org/os/licensing.
    See the License for the specific language governing permissions
    and limitations under the License.

    When distributing Covered Code, include this CDDL HEADER in each
    file and include the License file at usr/src/OPENSOLARIS.LICENSE.
    If applicable, add the following below this CDDL HEADER, with the
    fields enclosed by brackets "[]" replaced with your own identifying
    information: Portions Copyright [yyyy] [name of copyright owner]

    CDDL HEADER END

    Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
    Use is subject to license terms.

    XML specification for building the all languages OpenSolaris
    live CD iso and usb image
-->

&lt;distribution name="OpenSolaris">
        &lt;distro_constr_params>
                &lt;distro_constr_flags>
                        &lt;!--
                             Controls whether the DC should stop
                             if there is an error when the DC is running
                        -->
                        &lt;stop_on_error>true&lt;/stop_on_error>
                        &lt;!--
                             You can specify the step to resume the
                             build from here with the resume_from
                             attribute field of checkpoint_enable.
                             This value will be overridden by
                             the command line if the -r flag is used.
                             Valid values are step
                             numbers or name
                        -->
                        &lt;checkpoint_enable>
                                &lt;!--
                                     true implies Checkpointing is enabled
                                -->
                                true
                        &lt;/checkpoint_enable>
                &lt;/distro_constr_flags>
                &lt;!--
                     The preferred authority to install packages into the
                     pkg_image area from.
                     The default url is: http://pkg.opensolaris.org/release
                     The default authname is opensolaris.org
                -->
                &lt;pkg_repo_default_authority>
                        &lt;main
                                url="http://pkg.opensolaris.org/release"
                                authname="opensolaris.org"/>
                        &lt;!--
                             If you want to use one or more  mirrors that are
                             setup for the authority, specify the urls here.
                        -->
                        &lt;!--
                             Uncomment before using
                        &lt;mirror url="" />
                        -->
                &lt;/pkg_repo_default_authority>
                &lt;!--
                     Any additional non-preferred authorities to pull packages
                     from should be specified here. Multiple additional
                     authorities may be specified.
                     If you want to use one or more  mirrors that are
                     setup for the authority, specify the urls here.
                -->
                &lt;!--
                     Uncomment before using.
                &lt;pkg_repo_addl_authority>
                        &lt;main
                                url=""
                                authname=""/>
                        &lt;mirror url="" />
                &lt;/pkg_repo_addl_authority>
                -->
                &lt;!--
                     The default preferred authority to be used by the system
                     after it has been installed.
                     The default url is: http://pkg.opensolaris.org/release
                     The default authname is opensolaris.org
                     If you want to use one or more  mirrors that are
                     setup for the authority, specify the urls here.
                -->
                &lt;post_install_repo_default_authority>
                        &lt;main
                                url="http://pkg.opensolaris.org/release"
                                authname="opensolaris.org"/>
                        &lt;!--
                             Uncomment before using.
                        &lt;mirror url="" />
                        -->
                &lt;/post_install_repo_default_authority>
                &lt;!--
                     Any additional non-preferred authorities to use after the
                     system has been installed. Multiple additional authorities
                     may be specified.
                     If you want to use one or more  mirrors that are
                     setup for the authority, specify the urls here.
                -->
                &lt;!--
                     Uncomment before using.
                &lt;post_install_repo_addl_authority>
                        &lt;main
                                url=""
                                authname=""/>
                        &lt;mirror url="" />
                &lt;/post_install_repo_addl_authority>
                -->
        &lt;/distro_constr_params>
        &lt;img_params>
                &lt;!--
                     Where to build. This can be a zfs dataset or a mountpoint.
                     The area will be created if it doesn't exist. If the build_area
                     is not a zfs dataset or mountpoint, checkpointing will not
                     be enabled.
                -->
                &lt;build_area>rpool/dc&lt;/build_area>
                &lt;!--
                     list of packages used to form the installed image
                -->
                &lt;packages>
                        &lt;!--
                             Due to dependency issues, SUNWcsd and SUNWcs
                             must be listed first in the package list,
                             and SUNWcsd must precede SUNWcs
                        -->
                        &lt;!--
                            By default the latest build available, in the
                            specified IPS repository, is installed.
                            If another build is required, the build number has
                            to be appended to the 'entire' package in following
                            form:

                            &lt;pkg_name="entire@0.5.11-0.build#/>
                        -->
                        &lt;pkg name="entire"/>
                        &lt;pkg name="SUNWcsd"/>
                        &lt;pkg name="SUNWcs"/>
                        &lt;pkg name="babel_install"/>
                        &lt;pkg name="SUNWslim-utils"/>
                &lt;/packages>
&lt;!--
     Items below this line are rarely configured
-->
                &lt;!--
                     Packages to be removed from the pkg_image area before
                     bootroot construction
                -->
                &lt;post_install_remove_packages>
                        &lt;!--
                            babel_install must be listed before slim_install
                            because babel_install depends on slim_install,
                            so, slim_install can't be uninstall first
                        -->
                        &lt;pkg name="babel_install"/>
                        &lt;pkg name="slim_install"/>
                &lt;/post_install_remove_packages>
                &lt;!--
                     If/how to compress the live image.
                     type = compression algorithm to use for pkg.zlib and misc.zlib.
                     Valid types are lzma, gzip, and none.
                -->
                &lt;live_img_compression type="lzma"/>
                &lt;!--
                     Grub menu modifications. Will use menu.lst if not specified
                -->
                &lt;grub_menu_modifications>
                        &lt;!--
                            Specify a title for the grub menu.
                            If a title for the grub menu is not specified,
                            the first line of /etc/release will be used as
                            the title for the grub menu
                        -->
                        &lt;!--
                            Uncomment before using
                        &lt;title>Special Grub Title Text&lt;/title>
                        -->
                        &lt;entry>
                                &lt;title_suffix>with magnifier&lt;/title_suffix>
                                &lt;line>kernel$ /platform/i86pc/kernel/$ISADIR/unix \
-B assistive_tech=magnifier&lt;/line>
                                &lt;line>module /boot/$ISADIR/x86.microroot&lt;/line>
                        &lt;/entry>

                       &lt;entry>
                                &lt;title_suffix>with screen reader&lt;/title_suffix>
                                &lt;line>kernel$ /platform/i86pc/kernel/$ISADIR/unix \
-B assistive_tech=reader&lt;/line>
                                &lt;line>module /boot/$ISADIR/x86.microroot&lt;/line>
                        &lt;/entry>
                        &lt;entry>
                                &lt;title_suffix>Enable SSH&lt;/title_suffix>
                                &lt;line>kernel$ /platform/i86pc/kernel/$ISADIR/unix -B livessh=enable&lt;/line>
                                &lt;line>module /boot/$ISADIR/x86.microroot&lt;/line>
                        &lt;/entry>
                &lt;/grub_menu_modifications>
                &lt;!--
                     Indicate whether the IPS index should be generated for
                     pkg install and uninstall.  The default is to not
                     generate the IPS search index
                -->
                &lt;generate_ips_search_index>
                        false
                &lt;/generate_ips_search_index>
                &lt;!--
                     Files and dirs to be included in the bootroot of all media
                     delivered by this distribution. Bootroot contains the
                     minimal list of contents in order to be able to
                     boot and setup a running system. These files and dirs
                     must exist in the pkg_image area.
                -->
                &lt;bootroot_contents>
                        &lt;base_include type="file">usr/sbin/pmadm&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/lofiadm&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/devfsadm&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/modload&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/i86/modload&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/mount&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/hostconfig&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/chroot&lt;/base_include>
                        &lt;base_include type="file">usr/sbin/syslogd&lt;/base_include>
                        &lt;base_include type="file">usr/bin/coreadm&lt;/base_include>
                        &lt;base_include type="file">usr/bin/bash&lt;/base_include>
                        &lt;base_include type="file">usr/bin/ksh&lt;/base_include>
                        &lt;base_include type="file">usr/bin/cat&lt;/base_include>
                        &lt;base_include type="file">usr/bin/echo&lt;/base_include>
                        &lt;base_include type="file">usr/bin/false&lt;/base_include>
                        &lt;base_include type="file">usr/bin/grep&lt;/base_include>
                        &lt;base_include type="file">usr/bin/ls&lt;/base_include>
                        &lt;base_include type="file">usr/bin/rm&lt;/base_include>
                        &lt;base_include type="file">usr/bin/svcprop&lt;/base_include>
                        &lt;base_include type="file">usr/bin/true&lt;/base_include>
                        &lt;base_include type="file">usr/bin/cd&lt;/base_include>
                        &lt;base_include type="file">usr/bin/test&lt;/base_include>
                        &lt;base_include type="file">usr/bin/sleep&lt;/base_include>
                        &lt;base_include type="file">usr/bin/expr&lt;/base_include>
                        &lt;base_include type="file">usr/lib/fs/hsfs/fstyp&lt;/base_include>
                        &lt;base_include type="file">usr/lib/fs/hsfs/fstyp.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/lib/fs/hsfs/mount&lt;/base_include>
                        &lt;base_include type="file">usr/lib/fs/ufs/fstyp&lt;/base_include>
                        &lt;base_include type="file">usr/lib/fs/ufs/fstyp.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/lib/fs/ufs/mount&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libfstyp.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/lib/platexec&lt;/base_include>
                        &lt;base_include type="file">usr/lib/devfsadm/devfsadmd&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libm.so.2&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libm.so&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libfstyp.so&lt;/base_include>

                    &lt;base_include type="file">usr/lib/libz.so&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libz.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/bin/i86/ksh93&lt;/base_include>
                        &lt;base_include type="file">usr/lib/isaexec&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libast.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libcmd.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libdll.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/lib/libshell.so.1&lt;/base_include>
                        &lt;base_include type="file">usr/share/lib/xml/dtd/service_bundle.dtd.1&lt;/base_include>
                        &lt;base_include type="file">var/sadm/install/admin/default&lt;/base_include>
                        &lt;base_include type="file">var/sadm/system/admin/default_java&lt;/base_include>
                        &lt;base_include type="file">var/sadm/install/contents&lt;/base_include>
                        &lt;base_include type="file">var/adm/utmpx&lt;/base_include>
                        &lt;base_include type="file">var/adm/wtmpx&lt;/base_include>
                        &lt;base_include type="file">var/adm/aculog&lt;/base_include>
                        &lt;base_include type="file">var/lib/postrun/postrun-runq&lt;/base_include>
                        &lt;base_include type="file">var/lib/postrun/postrun&lt;/base_include>
                        &lt;base_include type="file">var/log/postrun.log&lt;/base_include>
                        &lt;base_include type="file">var/log/authlog&lt;/base_include>
                        &lt;base_include type="file">var/log/syslog&lt;/base_include>
                        &lt;base_include type="file">var/saf/zsmon/log&lt;/base_include>
                        &lt;base_include type="file">var/spool/cron/crontabs/adm&lt;/base_include>
                        &lt;base_include type="file">var/spool/cron/crontabs/root&lt;/base_include>
                        &lt;base_include type="file">var/nis/NIS+LDAPmapping.template&lt;/base_include>
                        &lt;base_include type="file">var/yp/aliases&lt;/base_include>
                        &lt;base_include type="file">var/yp/nicknames&lt;/base_include>
                        &lt;base_include type="dir">kernel&lt;/base_include>
                        &lt;base_include type="dir">boot&lt;/base_include>
                        &lt;base_include type="dir">platform&lt;/base_include>
                        &lt;base_include type="dir">system&lt;/base_include>
                        &lt;base_include type="dir">lib&lt;/base_include>
                        &lt;base_include type="dir">sbin&lt;/base_include>
                        &lt;base_include type="dir">dev&lt;/base_include>
                        &lt;base_include type="dir">devices&lt;/base_include>
                        &lt;base_include type="dir">usr/lib/devfsadm/linkmod&lt;/base_include>
                        &lt;base_include type="dir">root&lt;/base_include>
                        &lt;base_include type="dir">jack&lt;/base_include>
                        &lt;base_include type="dir">var/svc/manifest&lt;/base_include>
                        &lt;base_include type="dir">var/svc/profile&lt;/base_include>
                        &lt;base_include type="dir">var/pkg/catalog&lt;/base_include>
                        &lt;base_include type="file">var/pkg/cfg_cache&lt;/base_include>
                        &lt;base_include type="dir">etc&lt;/base_include>
                        &lt;base_exclude type="dir">etc/gconf&lt;/base_exclude>
                        &lt;base_exclude type="dir">etc/brltty&lt;/base_exclude>
                        &lt;base_exclude type="dir">etc/gtk-2.0&lt;/base_exclude>
                        &lt;base_exclude type="dir">etc/notices&lt;/base_exclude>
                &lt;/bootroot_contents>
                &lt;output_image>
                        &lt;!--
                             List of finalizer scripts to be run. They are used
                             to customize the image and will be run in the
                             order listed. The name of the checkpoint to
                             be created when this script is run is required.
                             The checkpoint message is displayed when the
                             step is run and is optional.
                             There are 5 standard arguments that are passed to
                             every finalizer script (manifest socket, pkg_image path,
                             tmp dir, bootroot build area, media dir). You may also
                             specify additional arguments (arg6+) in the argslist.
                             This argslist is a whitespace-separated list of double
                             quoted strings.
                        -->
                        &lt;finalizer>
                                &lt;script name="/usr/share/distro_const/pre_bootroot_pkg_image_mod">
                                        &lt;checkpoint

                                               name="im-mod"
                                                message="Image area modifications"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/slim_cd/
                                slimcd_pre_bootroot_pkg_image_mod">
                                        &lt;checkpoint
                                                name="slim-im-mod"
                                                message="Slim CD Image area Modifications"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/bootroot_initialize.py">
                                        &lt;checkpoint
                                                name="br-init"
                                                message="Boot root initialization"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/slim_cd/slimcd_bootroot_configure">
                                        &lt;checkpoint
                                                name="slim-br-config"
                                                message="Slim CD boot root configuration"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/bootroot_configure">
                                        &lt;checkpoint
                                                name="br-config"
                                                message="Boot root configuration"/>
                                        &lt;argslist>
                                                "/usr/share/distro_const/slim_cd/slimcd_generic_live.xml"
                                                ".livecd"
                                        &lt;/argslist>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/bootroot_archive.py">
                                        &lt;checkpoint
                                                name="br-arch"
                                                message="Boot root archiving (64-bit)"/>
                                        &lt;argslist>"amd64"&lt;/argslist>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/bootroot_archive_32">
                                        &lt;checkpoint
                                                name="br-arch-32"
                                                message="Boot root archiving (32-bit)"/>
                                        &lt;argslist>"x86"&lt;/argslist>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/slim_cd/
                                 slimcd_post_bootroot_pkg_image_mod">
                                        &lt;checkpoint
                                                name="slim-post-mod"
                                                message="Slim CD post bootroot image area modification"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/grub_setup.py">
                                        &lt;checkpoint
                                                name="grub-setup"
                                                message="Grub menu setup"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/post_bootroot_pkg_image_mod">
                                        &lt;checkpoint
                                                name="post-mod"
                                                message="Post bootroot image area modification"/>
                                        &lt;argslist>
                                                "usr_zlib_compression=lzma"
                                        &lt;/argslist>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/slim_cd/slimcd_gen_cd_content">
                                        &lt;checkpoint
                                                name="gen-slim-cont"
                                                message="Generate Slim CD image content list"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/create_iso">
                                        &lt;checkpoint
                                               name="iso"
                                                message="ISO image creation"/>
                                &lt;/script>
                                &lt;script name="/usr/share/distro_const/create_usb">
                                        &lt;checkpoint
                                                name="usb"
                                                message="USB image creation"/>
                                &lt;/script>
                        &lt;/finalizer>
                        &lt;bootroot>
                                &lt;!--
                                     If/how to compress the bootroot. Valid
                                     types are gzip and none
                                -->
                                &lt;compression type="gzip" level="9"/>
                        &lt;/bootroot>
                &lt;/output_image>
        &lt;/img_params>
        &lt;key_value_pairs>
                &lt;pair key="iso_sort"
                    value="/usr/share/distro_const/slim_cd/slimcd_iso.sort"/>
        &lt;/key_value_pairs>
&lt;/distribution></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="appendix.html">Previous</a>
             </td>
             <td align="right">
                 
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

