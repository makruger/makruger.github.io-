<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Managing Label Encodings (Task Map) - Solaris Trusted Extensions Label Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Trusted Extensions Label Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="modifyenc-35.html">Previous</a>
             </td>
             <td align="right">
                 <a href="printl-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-13250.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="overview-1.html">1.&nbsp;&nbsp;Labels in Trusted Extensions Software</a></p>
<p class="toc level1 tocsp"><a href="planl-1.html">2.&nbsp;&nbsp;Planning Labels (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="modifyenc-1.html">3.&nbsp;&nbsp;Making a Label Encodings File (Tasks)</a></p>
<p class="toc level2"><a href="modifyenc-35.html">Encodings File Syntax</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Managing Label Encodings (Task Map)</a></p>
<p class="toc level3"><a href="#modifyenc-22">How to Create a <tt>label_encodings</tt> File</a></p>
<p class="toc level3"><a href="#modifyenc-24">How to Analyze and Verify the <tt>label_encodings</tt> File</a></p>
<p class="toc level3"><a href="#modifyenc-48">How to Distribute the <tt>label_encodings</tt> File</a></p>
<p class="toc level3"><a href="#modifyenc-71">How to Add or Rename a Classification</a></p>
<p class="toc level3"><a href="#modifyenc-26">How to Specify Default and Inverse Words</a></p>
<p class="toc level3"><a href="#modifyenc-16">How to Create a Single-Label Encodings File</a></p>
<p class="toc level3"><a href="#modifyenc-38">How to Add Sun Extensions to an Encodings File</a></p>
<p class="toc level3"><a href="#modifyenc-12">How to Debug a <tt>label_encodings</tt> File</a></p>
</div>
<p class="toc level1 tocsp"><a href="printl-1.html">4.&nbsp;&nbsp;Labeling Printer Output (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="localdef-1.html">5.&nbsp;&nbsp;Customizing <tt>LOCAL DEFINITIONS</tt></a></p>
<p class="toc level1 tocsp"><a href="planex-1.html">6.&nbsp;&nbsp;Example: Planning an Organization's Labels</a></p>
<p class="toc level1 tocsp"><a href="appendixa-1.html">A.&nbsp;&nbsp;Sample Label Encodings File</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="modifyenc-30"></a><h3>Managing Label Encodings (Task Map)</h3>
<a name="indexterm-188"></a><a name="indexterm-189"></a>
<hr><p><b>Caution - </b>The safest time to modify a <tt>label_encodings</tt> file is when the first host
is installed. Proceed with caution when modifying a file that is in use.
For details, see the <a href="http://docs.sun.com/doc/819-7307/label-encodings-4?a=view"><tt>label_encodings</tt>(4)</a> man page.</p>
<hr>
<table><col width="44.07*"><col width="55.93*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create or change the <tt>label_encodings</tt>
file</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-22">How to Create a <tt>label_encodings</tt> File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Test the <tt>label_encodings</tt> file</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-24">How to Analyze and Verify the <tt>label_encodings</tt> File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Distribute the <tt>label_encodings</tt> file</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-48">How to Distribute the <tt>label_encodings</tt> File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Debug a <tt>label_encodings</tt> file</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-12">How to Debug a <tt>label_encodings</tt> File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Change a classification
definition</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-71">How to Add or Rename a Classification</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create default or inverse words</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-26">How to Specify Default and Inverse Words</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Customize a single-label file</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-16">How to Create a Single-Label Encodings File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Specify a label name</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-41">Example&nbsp;3-9</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a
<tt>LOCAL DEFINITIONS</tt> section</p></td>
<td align="left" valign="top" scope="row"><p><a href="#modifyenc-38">How to Add Sun Extensions to an Encodings File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Prevent specific users from seeing labels</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-7309/modifyenc-18?a=view">How to Hide Labels From a User in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Prevent all users of a particular
system from seeing labels</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-7309/manageusers-26?a=view">How to Modify policy.conf Defaults in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a></p></td>
</tr>
</table>

<a name="modifyenc-22"></a><h4>How to Create a <tt>label_encodings</tt> File</h4><p>For sample files, see the <tt>/etc/security/tsol</tt> directory on an installed system. The files
are described in.<a href="planl-2.html#planl-4">Labels Files in Solaris Trusted Extensions Packages</a>.</p><h6>Before You Begin</h6><p>You can create this file before you install Trusted Extensions on your
first system. On that first system, you check the file. You can also
create this file on the first system that you install with Trusted Extensions.
This procedure must be completed before a second computer is configured with Trusted
Extensions.</p><p>On a system that is configured with Trusted Extensions, you must be
in the global zone in the Security Administrator role. On other systems, you
can create and edit the file in any editor.</p><ol>
<li><b>Create a backup copy of the original file.</b></li>
<li><b>Open a new or existing version of the file.</b><ul>
<li><b>On a system that is not configured with Trusted Extensions, use any editor
to create the file.</b></li>
<li><b>On a system that is configured with Trusted Extensions, use the Edit Encodings
action to create the file.</b><p>In CDE, the Trusted_Extensions folder in the Application Manager contains two actions for
the encodings file.</p><dl><dt>Edit Encodings</dt>
<dd><p>Edits and checks the syntax of the specified <tt>label_encodings</tt> file.</p></dd>
<dt>Check Encodings</dt>
<dd><p>Checks the syntax of a specified <tt>label_encodings</tt> file.</p></dd>
</dl>
</li></ul></li>
<li><b>Modify the file.</b><p>For details, see <a href="planl-5.html#planl-7">How to Plan the Encodings File</a>.</p></li>
<li><b>Continue with <a href="#modifyenc-24">How to Analyze and Verify the <tt>label_encodings</tt> File</a>.</b></li></ol>

<a name="modifyenc-24"></a><h4>How to Analyze and Verify the <tt>label_encodings</tt> File</h4><h6>Before You Begin</h6><p>You must be in the global zone in the Security Administrator role.</p><ol>
<li><b>Check the syntax and relationships of the labels.</b><p>In a terminal, use the <tt>chk_encodings -a</tt> command to analyze and report on label relationships.</p><pre>$ chk_encodings -a <i>encodings-file</i></pre></li>
<li><b>Verify the file.</b><p>The Check Encodings action runs the <tt>chk_encodings</tt> command on the specified file.</p><ul>
<li><b>If the file passes, install it.</b><pre>Do you want to install this label_encodings file? <tt><b>yes</b></tt></pre></li>
<li><b>If the file does not pass, see <a href="#modifyenc-12">How to Debug a <tt>label_encodings</tt> File</a> for assistance.</b></li></ul></li>
<li><b>Test the encodings file.</b><p>Where possible, test the file on a few systems before approving the file
for all systems at your site.</p></li>
<li><b>Create a master copy.</b><p>For copying instructions, see <a href="http://docs.sun.com/doc/819-7309/basic-52?a=view">How to Copy Files to Portable Media in Trusted Extensions in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p></li>
<li><b>Save a labeled copy of the file in a protected location.</b></li></ol>

<a name="modifyenc-48"></a><h4>How to Distribute the <tt>label_encodings</tt> File</h4><ol>
<li><b>Create a master copy.</b><p>For copying instructions, see <a href="http://docs.sun.com/doc/819-7309/basic-52?a=view">How to Copy Files to Portable Media in Trusted Extensions in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p></li>
<li><b>Immediately after installing a system with Trusted Extensions, copy the master file onto
the system.</b><p>For copying instructions, see <a href="http://docs.sun.com/doc/819-7309/basic-25?a=view">How to Copy Files From Portable Media in Trusted Extensions in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p></li></ol>

<a name="modifyenc-71"></a><h4>How to Add or Rename a Classification</h4><h6>Before You Begin</h6><p>You must be in the Security Administrator role in the global zone.</p><ol>
<li><b>Edit the <tt>label_encodings</tt> file.</b><p>Use the Edit Encodings action. For details, see <a href="#modifyenc-22">How to Create a <tt>label_encodings</tt> File</a>.</p></li>
<li><b>Specify a version number.</b><p>In the <tt>VERSION=</tt> section put your site's name, a title for the file,
a version number and the date.</p><pre>VERSION= Sun Microsystems, Inc. Example Version - 5.10 04/05/28</pre><p>Sun uses SCCS keywords for the version number and the date. For
details, see the <a href="http://docs.sun.com/doc/819-2239/sccs-1?a=view"><tt>sccs</tt>(1)</a> man page.</p><pre>VERSION= Sun Microsystems, Inc. Example Version - %I% %E%</pre></li>
<li><b>Specify the classification.</b><p>In the <tt>CLASSIFICATIONS</tt> section, supply the long name, short name, and numeric
value for the new classification.</p><pre>name= NEW_CLASS; sname= N; value= 2; </pre></li>
<li><b>Include the new classification in the accreditation range.</b><p>Add the new classification to the <tt>ACCREDITATION RANGE</tt> section.</p><p>The following example shows three new classifications added to the <tt>ACCREDITATION RANGE</tt> section.
Each classification is specified with <tt>all compartment combinations valid</tt>.</p><pre>ACCREDITATION RANGE:

classification= UNCLASSIFIED;        all compartment combinations valid;

* i is new in this file
classification= INTERNAL_USE_ONLY;   all compartment combinations valid;

* n is new in this file
classification= NEED_TO_KNOW;        all compartment combinations valid;

classification= CONFIDENTIAL;        all compartment combinations valid except:
c
c a
c b

classification= SECRET;               only valid compartment combinations:
. . .
* r is new in this file
classification= REGISTERED;           all compartment combinations valid;</pre></li>
<li><b><a name="indexterm-190"></a>Adjust the  <tt>ACCREDITATION RANGE</tt> section if necessary.</b><p>You might need to make the new classification a minimum classification.</p><pre>minimum clearance= u; 
minimum sensitivity label= u; 
minimum protect as classification= u;</pre>
<hr><p><b>Note - </b>Make sure that you set a minimum clearance that is dominated by all
the clearances that you plan to assign to users. Similarly, make sure that
the minimum sensitivity label is dominated by all the minimum labels that you
plan to assign to users.</p>
<hr>
</li>
<li><b>Save your changes.</b></li></ol>

<a name="modifyenc-26"></a><h4>How to Specify Default and Inverse Words</h4><h6>Before You Begin</h6><p>You must be in the Security Administrator role in the global zone.</p><ol>
<li><b>Edit the <tt>label_encodings</tt> file.</b><p>Use the Edit Encodings action. For details, see <a href="#modifyenc-22">How to Create a <tt>label_encodings</tt> File</a>.</p></li>
<li><b>Specify initial compartments.</b><p>In the <tt>CLASSIFICATIONS</tt> section, specify compartments as part of the classification definition.</p><pre>CLASSIFICATIONS:
name= PUBLIC;  sname= P;  value= 1;
name= WEB COMPANY;  sname= WEBCO;  value= 2; initial compartments= 4-5 ;</pre></li>
<li><b>Specify a default word.</b><p>Assign an initial compartment bit to the word.</p><pre>name= DIVISION ONLY;  sname= DO;  minclass=  IUO; compartments= 4-5;
name= WEBC AMERICA;  sname= WEBCA; minclass= IUO; compartments= 4;
name= WEBC WORLD;  sname= WEBCW; minclass= IUO; compartments= 5;</pre></li>
<li><b>Specify an inverse word.</b><p>Inverse words are created by preceding an initial compartment with a tilde (~).</p><pre>name= DIVISION ONLY;  sname= DO;  minclass=  IUO; compartments= 4-5;
name= WEBC AMERICA;  sname= WEBCA; minclass= IUO; compartments= <tt><b>~4</b></tt>;
name= WEBC WORLD;  sname= WEBCW; minclass= IUO; compartments= <tt><b>~5</b></tt>;</pre></li>
<li><b>Save your changes.</b></li></ol><h6>Troubleshooting</h6><p>For any compartment bits that are not reserved for later assignment, you need
to assign a word to the bit in the following sections:</p>
<ul><li><p><tt>SENSITIVITY LABELS: WORDS:</tt></p></li>
<li><p><tt>INFORMATION LABELS: WORDS:</tt></p></li>
<li><p><tt>COMPARTMENTS: WORDS:</tt></p></li></ul>


<a name="modifyenc-16"></a><h4>How to Create a Single-Label Encodings File</h4><p>Certain labels must always be present in a <tt>label_encodings</tt> file:</p>
<ul><li><p>One sensitivity label in the user accreditation range must be defined</p></li>
<li><p>One clearance in the user accreditation range must be defined</p></li>
<li><p>One information label in the user accreditation range must be defined</p></li></ul>
<h6>Before You Begin</h6><p>You must be in the Security Administrator role in the global zone.</p><ol>
<li><b>Edit an encodings file.</b><p>Use the Edit Encodings action. For details, see <a href="#modifyenc-22">How to Create a <tt>label_encodings</tt> File</a>. Provide a name that
is different from the installed <tt>label_encodings</tt> file.</p></li>
<li><b>Create an encodings file with only one classification and only the desired compartments.</b><p>For example, you could set up an encodings file with the <tt>INTERNAL_USE_ONLY</tt> classification,
and specify no words.</p><pre>VERSION= Single-Label Encodings

. . .
CLASSIFICATIONS:

name= INTERNAL_USE_ONLY;       sname= INTERNAL;  value= 5;

INFORMATION LABELS:

WORDS:

SENSITIVITY LABELS:

WORDS:

CLEARANCES:

WORDS:

CHANNELS:

WORDS:

PRINTER BANNERS:

WORDS:</pre></li>
<li><b>In the <tt>ACCREDITATION RANGE</tt>  section, include only one classification and one valid compartment
combination.</b><p>The following example encodes the <tt>INTERNAL</tt> classification.</p><pre>ACCREDITATION RANGE:

classification= INTERNAL;
only valid compartment combinations:

INTERNAL

minimum clearance= INTERNAL;
minimum sensitivity label= INTERNAL;
minimum protect as classification= INTERNAL;</pre></li>
<li><b>Encode the <tt>LOCAL DEFINITIONS</tt> section. </b><p>For details, see <a href="localdef-1.html">Chapter&nbsp;5, Customizing <tt>LOCAL DEFINITIONS</tt></a>.</p></li>
<li><b>Ensure that the file is syntactically correct.</b><ul>
<li><b>If the file does not pass <tt>chk_encodings</tt>, see <a href="#modifyenc-12">How to Debug a <tt>label_encodings</tt> File</a></b></li>
<li><b>Otherwise, continue with <a href="#modifyenc-24">How to Analyze and Verify the <tt>label_encodings</tt> File</a>.</b></li></ul></li>
<li>(Optional) <b>Configure labels so that they are not visible to users.</b><p>For the steps, see <a href="http://docs.sun.com/doc/819-7309/modifyenc-18?a=view">How to Hide Labels From a User in <i>Solaris Trusted Extensions Administrator&rsquo;s Procedures</i></a>.</p></li></ol><a name="modifyenc-37"></a>Example&nbsp;3-8 Defining the Accreditation Range in a Single-Label Encodings File<p><a name="indexterm-191"></a>The following example shows the settings in the <tt>ACCREDITATION RANGE:</tt> section. A single
<tt>ANY_CLASS</tt> classification is defined. Compartments words <tt>A</tt>, <tt>B</tt>, and <tt>REL CNTRY 1</tt> are specified for all
types of labels.</p><pre>ACCREDITATION RANGE:

classification= ANY_CLASS;      only valid compartment combinations:

ANY_CLASS A B REL CNTRY1

minimum clearance= ANY_CLASS A B REL CNTRY1;
minimum sensitivity label= ANY_CLASS A B REL CNTRY1;
minimum protect as classification= ANY_CLASS;</pre><a name="modifyenc-41"></a>Example&nbsp;3-9 Changing the Single Label Name<p>In this example, the <tt>label_encodings.example</tt> file is changed to handle a single-label company.
The <tt>name=</tt> value is changed from <tt>SECRET</tt> to <tt>INTERNAL_USE_ONLY</tt>. The <tt>sname=</tt> value is changed
from <tt>s</tt> to <tt>INTERNAL</tt>. Neither the <tt>value=</tt> nor the <tt>initial compartments=</tt> definition is
changed.</p><pre>CLASSIFICATIONS:
name= INTERNAL_USE_ONLY;  sname= INTERNAL;  value= 5; initial compartments= 4-5
190-239;</pre><p>In the <tt>ACCREDITATION RANGE</tt> section, the short name of the classification is replaced. Also,
the minimums are replaced with the new <tt>sname</tt>.</p><pre>ACCREDITATION RANGE:

classification= INTERNAL;      only valid compartment combinations:

INTERNAL

minimum clearance= INTERNAL;
minimum sensitivity label= INTERNAL;
minimum protect as classification= INTERNAL;</pre>

<a name="modifyenc-38"></a><h4>How to Add Sun Extensions to an Encodings File</h4><h6>Before You Begin</h6><p>You must be in the Security Administrator role in the global zone.
You must have an encodings file that does not have a <tt>LOCAL DEFINITIONS</tt> section.</p><ol>
<li><b>Add the <tt>LOCAL DEFINITIONS</tt> section to your file.</b><p>Append the section from a Sun-supplied <tt>label_encodings</tt> file. Sun-supplied files are in the
<tt>/etc/security/tsol</tt> directory.</p></li>
<li><b>Customize the extensions for your site.</b><p>For details, see <a href="localdef-11.html">Modifying Sun Extensions (Task Map)</a>.</p></li></ol>

<a name="modifyenc-12"></a><h4>How to Debug a <tt>label_encodings</tt> File</h4><a name="indexterm-192"></a><a name="indexterm-193"></a><h6>Before You Begin</h6><p>You must be in the Security Administrator role in the global zone.</p><ol>
<li><b>Edit the <tt>label_encodings</tt> file.</b><p>Use the Edit Encodings action. For details, see <a href="#modifyenc-22">How to Create a <tt>label_encodings</tt> File</a>.</p></li>
<li><b>Check the entries in the <tt>INFORMATION LABELS: WORDS:</tt> section.</b><p>The entries must exactly match the entries in the <tt>SENSITIVITY LABELS: WORDS:</tt> section.</p>
<hr><p><b>Tip - </b>Encode the sensitivity label words, then copy the words to the <tt>INFORMATION LABELS</tt>
section.</p>
<hr>
</li>
<li><b>Check that no label in the user accreditation range has a value of
0 with no compartment bits.</b><p>This step ensures that no label is indistinguishable from the label <tt>ADMIN_HIGH</tt>.</p></li>
<li><b>Check that no label in the user accreditation range has a value of
255 with all compartment bits from 0 to 239.</b><p>This step ensures that no label is indistinguishable from the label <tt>ADMIN_HIGH</tt>.</p></li>
<li><b><a name="indexterm-194"></a>Check that no compartment has a value higher than 239.</b><p>This step ensures that all labels can be mapped to CIPSO labels.</p></li>
<li><b>For labels that cannot be resolved, do the following:</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Reset any objects with the new labels to a low system label,
<tt>ADMIN_LOW</tt>.</b></li>
<li><b>Restore a known, usable <tt>label_encodings</tt> file from the backup.</b></li>
<li><b>Use the <tt>chk_encodings -a</tt> command to analyze the label problems in the faulty file.</b></li></ol></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="modifyenc-35.html">Previous</a>
             </td>
             <td align="right">
                 <a href="printl-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

