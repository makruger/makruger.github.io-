<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Up Quotas - System Administration Guide: Advanced Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Advanced Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysresquotas-11993.html">Previous</a>
             </td>
             <td align="right">
                 <a href="sysresquotas-67.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="modconcepts-20809.html">1.&nbsp;&nbsp;Managing Terminals and Modems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="modsetup-43877.html">2.&nbsp;&nbsp;Setting Up Terminals and Modems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="modsafapp-84569.html">3.&nbsp;&nbsp;Managing Serial Ports With the Service Access Facility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresconcepts-23051.html">4.&nbsp;&nbsp;Managing System Resources (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sysressysinfo-75169.html">5.&nbsp;&nbsp;Displaying and Changing System Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresdiskuse-61891.html">6.&nbsp;&nbsp;Managing Disk Use (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresquotas-97946.html">7.&nbsp;&nbsp;Managing Quotas (Tasks)</a></p>
<p class="toc level2"><a href="sysresquotas-4.html">What Are Quotas?</a></p>
<p class="toc level2"><a href="sysresquotas-11993.html">Using Quotas</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Setting Up Quotas</a></p>
</div>
<p class="toc level2"><a href="sysresquotas-67.html">Setting Up Quotas (Task Map)</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-61340">How to Configure File Systems for Quotas</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-28657">How to Set Up Quotas for a User</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-63864">How to Set Up Quotas for Multiple Users</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-82495">How to Check Quota Consistency</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-89063">How to Turn On Quotas</a></p>
<p class="toc level2 tocsp"><a href="enmuy.html">Maintaining Quotas (Task Map)</a></p>
<p class="toc level2"><a href="sysresquotas-36102.html">Checking Quotas</a></p>
<p class="toc level3"><a href="sysresquotas-36102.html#sysresquotas-81117">How to Check for Exceeded Quotas</a></p>
<p class="toc level3"><a href="sysresquotas-36102.html#sysresquotas-13508">How to Check Quotas on a File System</a></p>
<p class="toc level2 tocsp"><a href="sysresquotas-10332.html">Changing and Removing Quotas</a></p>
<p class="toc level3"><a href="sysresquotas-10332.html#sysresquotas-53952">How to Change the Soft Limit Default</a></p>
<p class="toc level3"><a href="sysresquotas-10332.html#sysresquotas-85417">How to Change Quotas for a User</a></p>
<p class="toc level3"><a href="sysresquotas-10332.html#sysresquotas-22999">How to Disable Quotas for a User</a></p>
<p class="toc level3"><a href="sysresquotas-10332.html#sysresquotas-45549">How to Turn Off Quotas</a></p>
<p class="toc level1 tocsp"><a href="sysrescron-18108.html">8.&nbsp;&nbsp;Scheduling System Tasks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctsetup-78801.html">9.&nbsp;&nbsp;Managing System Accounting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctref-14910.html">10.&nbsp;&nbsp;System Accounting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="spconcepts-21354.html">11.&nbsp;&nbsp;Managing System Performance (Overview)</a></p>
<p class="toc level1 tocsp"><a href="spprocess-59633.html">12.&nbsp;&nbsp;Managing System Processes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="spmonitor-24844.html">13.&nbsp;&nbsp;Monitoring System Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsoverview-10750.html">14.&nbsp;&nbsp;Troubleshooting Software Problems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="eekee.html">15.&nbsp;&nbsp;Managing System Messages</a></p>
<p class="toc level1 tocsp"><a href="tscore-7.html">16.&nbsp;&nbsp;Managing Core Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tscrashdumps-40145.html">17.&nbsp;&nbsp;Managing System Crash Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsgeneral-32935.html">18.&nbsp;&nbsp;Troubleshooting Miscellaneous Software Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfileaccess-28392.html">19.&nbsp;&nbsp;Troubleshooting File Access Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfsck-26279.html">20.&nbsp;&nbsp;Resolving UFS File System Inconsistencies (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsswmgr-40462.html">21.&nbsp;&nbsp;Troubleshooting Software Package Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="sysresquotas-26007"></a><h3>Setting Up Quotas</h3>
<p><a name="sysresquotas-ix2329"></a>Setting up quotas involves these general steps: </p>
<ol><li><p><a name="sysresquotas-ix2330"></a><a name="sysresquotas-ix2331"></a><a name="sysresquotas-ix2332"></a>Ensuring that quotas are enforced each time the system is rebooted by adding a quota option to the <tt>/etc/vfstab</tt> file entries. Also, creating a <tt>quotas</tt> file in the top-level directory of the file system.</p></li>
<li><p>After you create a quota for one use, copying the quota as a prototype to set up other user quotas.</p></li>
<li><p>Before you turn quotas on, checking the consistency of the proposed quotas with the current disk usage to make sure that there are no conflicts.</p></li>
<li><p>Turning on the quotas on for one or more file systems.</p></li></ol>
<p>For specific information about these procedures, see <a href="sysresquotas-67.html">Setting Up Quotas (Task Map)</a>.</p><p><a name="sysresquotas-ix2334"></a><a name="indexterm-40"></a><a name="sysresquotas-ix2336"></a><a name="sysresquotas-ix2339"></a>The following table describes the commands that you use to set up disk
quotas.  </p><a name="sysresquotas-16517"></a><h6>Table&nbsp;7-1 Commands for Setting Up Quotas</h6><table><col width="132*"><col width="230*"><col width="230.00*"><tr><th align="left" valign="top" scope="column"><p>Command</p></th>
<th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Man Page</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p> <tt>edquota</tt></p></td>
<td align="left" valign="top" scope="row"><p>Sets the hard limits and soft limits on
the number of inodes and the amount of disk space for each user.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/edquota-1m?a=view"><tt>edquota</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>quotacheck</tt>
</p></td>
<td align="left" valign="top" scope="row"><p>Examines each mounted UFS file system, comparing the file system's current disk usage
against information stored in the file system's disk quota file. Then, resolves inconsistencies</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/quotacheck-1m?a=view"><tt>quotacheck</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="sysresquotas-ix2335"></a>
<tt>quotaon</tt></p></td>
<td align="left" valign="top" scope="row"><p>Activates the quotas for the specified file systems.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/quotaon-1m?a=view"><tt>quotaon</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>quota</tt> </p></td>
<td align="left" valign="top" scope="row"><p>Displays users' disk quotas
on mounted file systems to verify that the quotas have been correctly set
up.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/quota-1m?a=view"><tt>quota</tt>(1M)</a></p></td>
</tr>
</table>

<a name="sysresquotas-2"></a><h4>Guidelines for Setting Up Quotas</h4>
<p>Before you set up quotas, you need to determine how much disk
space and how many inodes to allocate to each user. If you want
to ensure that the total file system space is never exceeded, you can
divide the total size of the file system between the number of users.
For example, if three users share a 100-Mbyte slice and have equal disk
space needs, you could allocate 33 Mbytes to each user.</p><p><a name="sysresquotas-ix2342"></a><a name="indexterm-41"></a>In environments where not all users are likely to push their limits, you
might want to set individual quotas so that they add up to more
than the total size of the file system. For example, if three
users share a 100-Mbyte slice, you could allocate 40 Mbytes to each user.
</p><p>When you have established a quota for one user by using the
<tt>edquota</tt> command, you can use this quota as a prototype to set
the same quota for other users on the same file system.</p><p><a name="sysresquotas-ix2343"></a><a name="sysresquotas-ix2344"></a><a name="sysresquotas-ix2345"></a>Before you turn on the quotas, do the following:</p>
<ul><li><p>First, configure the UFS file systems for the quotas.</p></li>
<li><p>Establish quotas for each user, and run the <tt>quotacheck</tt> command to check for consistency between current disk usage and quota files.</p></li>
<li><p>Run the <tt>quotacheck</tt> command periodically if systems are rebooted infrequently.</p></li></ul>
<p><a name="sysresquotas-ix2346"></a><a name="sysresquotas-ix2347"></a><a name="sysresquotas-ix2349"></a><a name="sysresquotas-ix2350"></a>The quotas you set up with the <tt>edquota</tt> command are not enforced until
you turn them on by using the <tt>quotaon</tt> command. If you have properly
configured the quota files, the quotas are turned on automatically each time a
system is rebooted and the file system is mounted.    
</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysresquotas-11993.html">Previous</a>
             </td>
             <td align="right">
                 <a href="sysresquotas-67.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

