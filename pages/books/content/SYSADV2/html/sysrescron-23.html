<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Controlling Access to the <tt>crontab</tt> Command - System Administration Guide: Advanced Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Advanced Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysrescron-17.html">Previous</a>
             </td>
             <td align="right">
                 <a href="enmww.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="modconcepts-20809.html">1.&nbsp;&nbsp;Managing Terminals and Modems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="modsetup-43877.html">2.&nbsp;&nbsp;Setting Up Terminals and Modems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="modsafapp-84569.html">3.&nbsp;&nbsp;Managing Serial Ports With the Service Access Facility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresconcepts-23051.html">4.&nbsp;&nbsp;Managing System Resources (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sysressysinfo-75169.html">5.&nbsp;&nbsp;Displaying and Changing System Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresdiskuse-61891.html">6.&nbsp;&nbsp;Managing Disk Use (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresquotas-97946.html">7.&nbsp;&nbsp;Managing Quotas (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysrescron-18108.html">8.&nbsp;&nbsp;Scheduling System Tasks (Tasks)</a></p>
<p class="toc level2"><a href="enmwx.html">Creating and Editing <tt>crontab</tt> Files (Task Map)</a></p>
<p class="toc level2"><a href="sysrescron-68.html">Ways to Automatically Execute System Tasks</a></p>
<p class="toc level2"><a href="sysrescron-1.html">Scheduling a Repetitive System Task (<tt>cron</tt>)</a></p>
<p class="toc level2"><a href="sysrescron-24589.html">Creating and Editing <tt>crontab</tt> Files</a></p>
<p class="toc level3"><a href="sysrescron-24589.html#sysrescron-72169">How to Create or Edit a <tt>crontab</tt> File</a></p>
<p class="toc level3"><a href="sysrescron-24589.html#enmxc">How to Verify That a <tt>crontab</tt> File Exists</a></p>
<p class="toc level2 tocsp"><a href="sysrescron-12.html">Displaying <tt>crontab</tt> Files</a></p>
<p class="toc level3"><a href="sysrescron-12.html#sysrescron-60540">How to Display a <tt>crontab</tt> File</a></p>
<p class="toc level2 tocsp"><a href="sysrescron-17.html">Removing <tt>crontab</tt> Files</a></p>
<p class="toc level3"><a href="sysrescron-17.html#sysrescron-31048">How to Remove a <tt>crontab</tt> File</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Controlling Access to the <tt>crontab</tt> Command</a></p>
<p class="toc level3"><a href="#sysrescron-88294">How to Deny <tt>crontab</tt> Command Access</a></p>
<p class="toc level3"><a href="#sysrescron-36206">How to Limit <tt>crontab</tt> Command Access to Specified Users</a></p>
</div>
<p class="toc level2 tocsp"><a href="enmww.html">Using the <tt>at</tt> Command (Task Map)</a></p>
<p class="toc level2"><a href="sysrescron-35.html">Scheduling a Single System Task (<tt>at</tt>)</a></p>
<p class="toc level3"><a href="sysrescron-35.html#sysrescron-26337">How to Create an <tt>at</tt> Job</a></p>
<p class="toc level3"><a href="sysrescron-35.html#enmxg">How to Display the <tt>at</tt> Queue</a></p>
<p class="toc level3"><a href="sysrescron-35.html#enmxi">How to Verify an <tt>at</tt> Job</a></p>
<p class="toc level3"><a href="sysrescron-35.html#enmxh">How to Display <tt>at</tt> Jobs</a></p>
<p class="toc level3"><a href="sysrescron-35.html#sysrescron-62698">How to Remove <tt>at</tt> Jobs</a></p>
<p class="toc level3"><a href="sysrescron-35.html#sysrescron-94711">How to Deny Access to the <tt>at</tt> Command</a></p>
<p class="toc level3"><a href="sysrescron-35.html#enmxk">How to Verify That <tt>at</tt> Command Access Is Denied</a></p>
<p class="toc level1 tocsp"><a href="sysresacctsetup-78801.html">9.&nbsp;&nbsp;Managing System Accounting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctref-14910.html">10.&nbsp;&nbsp;System Accounting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="spconcepts-21354.html">11.&nbsp;&nbsp;Managing System Performance (Overview)</a></p>
<p class="toc level1 tocsp"><a href="spprocess-59633.html">12.&nbsp;&nbsp;Managing System Processes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="spmonitor-24844.html">13.&nbsp;&nbsp;Monitoring System Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsoverview-10750.html">14.&nbsp;&nbsp;Troubleshooting Software Problems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="eekee.html">15.&nbsp;&nbsp;Managing System Messages</a></p>
<p class="toc level1 tocsp"><a href="tscore-7.html">16.&nbsp;&nbsp;Managing Core Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tscrashdumps-40145.html">17.&nbsp;&nbsp;Managing System Crash Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsgeneral-32935.html">18.&nbsp;&nbsp;Troubleshooting Miscellaneous Software Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfileaccess-28392.html">19.&nbsp;&nbsp;Troubleshooting File Access Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfsck-26279.html">20.&nbsp;&nbsp;Resolving UFS File System Inconsistencies (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsswmgr-40462.html">21.&nbsp;&nbsp;Troubleshooting Software Package Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="sysrescron-23"></a><h3>Controlling Access to the <tt>crontab</tt> Command</h3>
<p><a name="sysrescron-ix2565"></a><a name="sysrescron-ix2566"></a><a name="sysrescron-ix2567"></a><a name="sysrescron-ix2569"></a><a name="sysrescron-ix2570"></a><a name="sysrescron-ix2571"></a><a name="sysrescron-ix2572"></a>You can control access to the <tt>crontab</tt> command by using two files in
the <tt>/etc/cron.d</tt> directory: <tt>cron.deny</tt> and <tt>cron.allow</tt>. These files permit only specified users to
perform <tt>crontab</tt> command tasks such as creating, editing, displaying, or removing their own
<tt>crontab</tt> files.       </p><p>The <tt>cron.deny</tt> and <tt>cron.allow</tt> files consist of a list of user names, one
user name per line. </p><p>These access control files work together as follows:</p>
<ul><li><p><a name="sysrescron-ix2573"></a>If <tt>cron.allow</tt> exists, only the users who are listed in this file can create, edit, display, or remove <tt>crontab</tt> files. </p></li>
<li><p>If <tt>cron.allow</tt> does not exist, all users can submit <tt>crontab</tt> files, except for users who are listed in <tt>cron.deny</tt>. </p></li>
<li><p>If neither <tt>cron.allow</tt> nor <tt>cron.deny</tt> exists, superuser privileges are required to run the <tt>crontab</tt> command.</p></li></ul>
<p>Superuser privileges are required to edit or create the <tt>cron.deny</tt> and <tt>cron.allow</tt>
files.</p><p><a name="sysrescron-ix2574"></a>The <tt>cron.deny</tt> file, which is created during SunOS software installation, contains the following user
names: </p><pre>$ <tt><b>cat /etc/cron.d/cron.deny</b></tt>
daemon
bin
smtp
nuucp
listen
nobody
noaccess</pre><p>None of the user names in the default <tt>cron.deny</tt> file can access the
<tt>crontab</tt> command. You can edit this file to add other user names that
will be denied access to the <tt>crontab</tt> command.</p><p><a name="sysrescron-ix2575"></a><a name="sysrescron-ix2576"></a><a name="sysrescron-ix2577"></a><a name="sysrescron-ix2578"></a><a name="sysrescron-ix2579"></a><a name="sysrescron-ix2580"></a><a name="sysrescron-ix2581"></a><a name="sysrescron-ix2582"></a><a name="sysrescron-ix2584"></a><a name="sysrescron-ix2586"></a>No default <tt>cron.allow</tt> file is supplied. So, after Solaris software installation, all users (except
users who are listed in the default <tt>cron.deny</tt> file) can access the
<tt>crontab</tt> command. If you create a <tt>cron.allow</tt> file, only these users can access the
<tt>crontab</tt> command.          </p>

<a name="sysrescron-88294"></a><h4>How to Deny <tt>crontab</tt> Command Access</h4><a name="indexterm-69"></a><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysrescron-step-26"></a><b><a name="sysrescron-ix2587"></a><a name="sysrescron-ix2588"></a><a name="sysrescron-ix2589"></a>Edit the <tt>/etc/cron.d/cron.deny</tt> file and add user names, one user per line. Include
users who will be denied access to the <tt>crontab</tt> commands.</b><pre>daemon
bin
smtp
nuucp
listen
nobody
noaccess
<i>username1</i>
<i>username2</i>
<i>username3</i>
.
.
.</pre></li>
<li><a name="sysrescron-step-64"></a><b>Verify that the <tt>/etc/cron.d/cron.deny</tt> file contains the new entries.</b><pre># <tt><b>cat /etc/cron.d/cron.deny</b></tt>
daemon
bin
nuucp
listen
nobody
noaccess</pre></li></ol>

<a name="sysrescron-36206"></a><h4>How to Limit <tt>crontab</tt> Command Access to Specified Users</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysrescron-step-30"></a><b>Create the <tt>/etc/cron.d/cron.allow</tt> file.</b></li>
<li><a name="sysrescron-step-31"></a><b>Add the <tt>root</tt> user name into the <tt>cron.allow</tt> file.</b><p>If you do not add <tt>root</tt> to the file, superuser access to
<tt>crontab</tt> commands will be denied. </p></li>
<li><a name="sysrescron-step-66"></a><b>Add the user names, one user name per line. Include users that will
be allowed to use the <tt>crontab</tt> command.</b><pre><tt><b>root</b></tt>
<i>username1</i>
<i>username2</i>
<i>username3</i>
<i>.</i>
<i>.</i>
<i>.</i></pre></li></ol><a name="emjgb"></a>Example&nbsp;8-6 Limiting <tt>crontab</tt> Command Access to Specified Users<p>The following example shows a <tt>cron.deny</tt> file that prevents user names <tt>jones</tt>, <tt>temp</tt>, and
<tt>visitor</tt> from accessing the <tt>crontab</tt> command.</p><pre>$ <tt><b>cat /etc/cron.d/cron.deny</b></tt>
daemon
bin
smtp
nuucp
listen
nobody
noaccess
jones
temp
visitor</pre><p><a name="sysrescron-ix2595"></a><a name="sysrescron-ix2596"></a><a name="sysrescron-ix2597"></a><a name="sysrescron-ix2598"></a><a name="sysrescron-ix2602"></a><a name="sysrescron-ix2603"></a>The following example shows a <tt>cron.allow</tt> file. The users <tt>root</tt>, <tt>jones</tt>, <tt>lp</tt>, and
<tt>smith</tt> are the only users who can access the <tt>crontab</tt> command.  
    </p><pre>$ <tt><b>cat /etc/cron.d/cron.allow</b></tt>
root
jones
lp
smith</pre>

<a name="sysrescron-60"></a><h4>How to Verify Limited <tt>crontab</tt> Command Access</h4>
<p>To verify if a specific user can access the <tt>crontab</tt> command, use the
 <tt>crontab -l</tt> command while you are logged into the user account.  </p><pre>$ <tt><b>crontab -l</b></tt></pre><p><a name="sysrescron-ix2593"></a><a name="sysrescron-ix2594"></a>If the user can access the <tt>crontab</tt> command, and already has created
a <tt>crontab</tt> file, the file is displayed. Otherwise, if the user can access
the <tt>crontab</tt> command but no <tt>crontab</tt> file exists, a message similar to the following
message is displayed:</p><pre>crontab: can't open your crontab file</pre><p>Either this user either is listed in the <tt>cron.allow</tt> file (if the file
exists), or the user is not listed in the <tt>cron.deny</tt> file. </p><p>If the user cannot access the <tt>crontab</tt> command, the following message is displayed
whether or not a previous <tt>crontab</tt> file exists:  </p><pre>crontab: you are not authorized to use cron. Sorry.</pre><p>This message means that either the user is not listed in the
<tt>cron.allow</tt> file (if the file exists), or the user is listed in
the <tt>cron.deny</tt> file.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysrescron-17.html">Previous</a>
             </td>
             <td align="right">
                 <a href="enmww.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

