<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Administering <tt>ttymon</tt> Port Monitors - System Administration Guide: Advanced Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Advanced Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="modsafapp-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eoqln.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="modconcepts-20809.html">1.&nbsp;&nbsp;Managing Terminals and Modems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="modsetup-43877.html">2.&nbsp;&nbsp;Setting Up Terminals and Modems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="modsafapp-84569.html">3.&nbsp;&nbsp;Managing Serial Ports With the Service Access Facility (Tasks)</a></p>
<p class="toc level2"><a href="emrab.html">Managing Serial Ports (Task Map)</a></p>
<p class="toc level2"><a href="modsafapp-20081.html">Using the Service Access Facility</a></p>
<p class="toc level2"><a href="modsafapp-33566.html">Overall SAF Administration (<tt>sacadm</tt>)</a></p>
<p class="toc level2"><a href="modsafapp-10269.html">Port Monitor Service Administration (<tt>pmadm</tt>)</a></p>
<p class="toc level2"><a href="modsafapp-7.html">TTY Monitor and Network Listener Port Monitors</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Administering <tt>ttymon</tt> Port Monitors</a></p>
<p class="toc level3"><a href="#fdzue">How to Set the <tt>ttymon</tt> Console Terminal Type</a></p>
<p class="toc level3"><a href="#fxcgt">How to Set the Baud Rate Speed on the <tt>ttymon</tt> Console Terminal</a></p>
<p class="toc level3"><a href="#modsafapp-10">How to Add a <tt>ttymon</tt> Port Monitor</a></p>
<p class="toc level3"><a href="#modsafapp-11">How to View <tt>ttymon</tt> Port Monitor Status</a></p>
<p class="toc level3"><a href="#modsafapp-12">How to Stop a <tt>ttymon</tt> Port Monitor</a></p>
<p class="toc level3"><a href="#modsafapp-13">How to Start a <tt>ttymon</tt> Port Monitor</a></p>
<p class="toc level3"><a href="#modsafapp-14">How to Disable a <tt>ttymon</tt> Port Monitor</a></p>
<p class="toc level3"><a href="#modsafapp-15">How to Enable a <tt>ttymon</tt> Port Monitor</a></p>
<p class="toc level3"><a href="#modsafapp-16">How to Remove a <tt>ttymon</tt> Port Monitor</a></p>
</div>
<p class="toc level2 tocsp"><a href="eoqln.html">Administering <tt>ttymon</tt> services (Task Map)</a></p>
<p class="toc level2"><a href="modsafapp-15412.html">Administering <tt>ttymon</tt> Services</a></p>
<p class="toc level3"><a href="modsafapp-15412.html#modsafapp-17">How to Add a Service</a></p>
<p class="toc level3"><a href="modsafapp-15412.html#modsafapp-18">How to View the Status of a TTY Port Service</a></p>
<p class="toc level3"><a href="modsafapp-15412.html#modsafapp-22">How to Enable a Port Monitor Service</a></p>
<p class="toc level3"><a href="modsafapp-15412.html#modsafapp-23">How to Disable a Port Monitor Service</a></p>
<p class="toc level2 tocsp"><a href="modsafapp-92630.html">Service Access Facility Administration (Reference)</a></p>
<p class="toc level1 tocsp"><a href="sysresconcepts-23051.html">4.&nbsp;&nbsp;Managing System Resources (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sysressysinfo-75169.html">5.&nbsp;&nbsp;Displaying and Changing System Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresdiskuse-61891.html">6.&nbsp;&nbsp;Managing Disk Use (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresquotas-97946.html">7.&nbsp;&nbsp;Managing Quotas (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysrescron-18108.html">8.&nbsp;&nbsp;Scheduling System Tasks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctsetup-78801.html">9.&nbsp;&nbsp;Managing System Accounting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctref-14910.html">10.&nbsp;&nbsp;System Accounting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="spconcepts-21354.html">11.&nbsp;&nbsp;Managing System Performance (Overview)</a></p>
<p class="toc level1 tocsp"><a href="spprocess-59633.html">12.&nbsp;&nbsp;Managing System Processes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="spmonitor-24844.html">13.&nbsp;&nbsp;Monitoring System Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsoverview-10750.html">14.&nbsp;&nbsp;Troubleshooting Software Problems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="eekee.html">15.&nbsp;&nbsp;Managing System Messages</a></p>
<p class="toc level1 tocsp"><a href="tscore-7.html">16.&nbsp;&nbsp;Managing Core Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tscrashdumps-40145.html">17.&nbsp;&nbsp;Managing System Crash Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsgeneral-32935.html">18.&nbsp;&nbsp;Troubleshooting Miscellaneous Software Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfileaccess-28392.html">19.&nbsp;&nbsp;Troubleshooting File Access Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfsck-26279.html">20.&nbsp;&nbsp;Resolving UFS File System Inconsistencies (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsswmgr-40462.html">21.&nbsp;&nbsp;Troubleshooting Software Package Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="modsafapp-81679"></a><h3>Administering <tt>ttymon</tt> Port Monitors</h3>
<p>Console administration for <tt>ttymon</tt> is now managed by SMF. Use the <tt>svccfg</tt> command
to set <tt>ttymon</tt> system console properties. Continue to use the SAF command, <tt>sacadm</tt>, to
add, list, remove, kill, start, enable, disable, enable, and remove <tt>ttymon</tt> port
monitors.</p>

<a name="fdzue"></a><h4>How to Set the <tt>ttymon</tt> Console Terminal Type</h4><p>This procedure shows how to change the console terminal type by using the
<tt>svccfg</tt> command.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Run the <tt>svccfg</tt> command to set the property for the service instance that
you want to change.</b><pre># <tt><b>svccfg -s console-login setprop ttymon/terminal_type = "xterm"</b></tt></pre><p>where &ldquo;<tt>xterm</tt>&rdquo; is an example of a terminal type that you might want
to use.</p></li>
<li><b>(Optional) Restart the service instance.</b><pre># <tt><b>svcadm restart svc:/system/console-login:default</b></tt></pre>
<hr><p><b>Caution - </b>If you choose to restart the service instance immediately, you are logged out
of the console. If you do not restart the service instance immediately, the
property changes apply at the next login prompt on the console.</p>
<hr>
</li></ol>

<a name="fxcgt"></a><h4>How to Set the Baud Rate Speed on the <tt>ttymon</tt> Console Terminal</h4><a name="indexterm-6"></a><a name="indexterm-7"></a><a name="indexterm-8"></a><p>This procedure shows how to set the baud rate speed on the
<tt>ttymon</tt> console terminal. Support for console speeds on x86 based systems are dependent
on the specific platform. </p><p>The following are supported console speeds for SPARC based systems:</p>
<ul><li><p><tt>9600 bps</tt></p></li>
<li><p><tt>19200 bps</tt></p></li>
<li><p><tt>38400 bps</tt></p></li></ul>
<ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Use the <tt>eeprom</tt> command to set a baud rate speed that is appropriate
for your system type.<a name="indexterm-9"></a><a name="indexterm-10"></a><a name="indexterm-11"></a></b><pre># <tt><b>eeprom ttya-mode=</tt><i>baud-rate</i><tt>,8,n,1,-</b></tt></pre><p>For example, to change the baud rate on an x86 based system's
console to <tt>38400</tt>, type:</p><pre># <tt><b>eeprom ttya-mode=38400,8,n,1,-</b></tt></pre></li>
<li><b>Change the console line in the <tt>/etc/ttydefs</tt> file as follows.</b><pre>console <i>baud-rate</i> hupcl opost onlcr:<i>baud-rate</i>::console</pre></li>
<li><b>Make the following additional changes for your system type.</b><p>Note that these changes are platform-dependent.</p>
<ul><li><p><b>On SPARC based systems:</b> Change the baud rate speed in the <tt>/kernel/drv/options.conf</tt> file.</p><p>Use the following command to change the baud rate to <tt>9600</tt>.</p><pre># <tt><b>9600 :bd: ttymodes="2502:1805:bd:8a3b:3:1c:7f:15:4:0:0:0:11:13:1a:19:12:f:17:16";</b></tt></pre><p>Use the following command to change the baud rate speed to <tt>19200</tt>.</p><pre># <tt><b>19200 :be: ttymodes="2502:1805:be:8a3b:3:1c:7f:15:4:0:0:0:11:13:1a:19:12:f:17:16";</b></tt></pre><p>Use the following command to change the baud rate speed to <tt>38400</tt>.</p><pre># <tt><b>38400 :bf: ttymodes="2502:1805:bf:8a3b:3:1c:7f:15:4:0:0:0:11:13:1a:19:12:f:17:16";</b></tt></pre></li>
<li><p><b>On x86 based systems:</b> Change the console speed if the BIOS serial redirection is enabled. The method that you use to change the console speed is platform-dependent.</p></li></ul>
</li></ol>

<a name="modsafapp-10"></a><h4>How to Add a <tt>ttymon</tt> Port Monitor</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="modsafapp-step-42"></a><b><a name="modsafapp-ix1111"></a><a name="modsafapp-ix1112"></a>Add a <tt>ttymon</tt> port monitor.</b><pre># <tt><b>sacadm -a -p mbmon -t ttymon -c /usr/lib/saf/ttymon -v `ttyadm</b></tt>
<tt><b>-V` -y "TTY Ports a &amp; b"</b></tt></pre><dl><dt><tt>-a</tt></dt>
<dd><p>Specifies the <b>add</b> port monitor option.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies the <i>pmtag</i> <tt>mbmon</tt> as the port monitor tag.</p></dd>
<dt><tt>-t</tt></dt>
<dd><p>Specifies the port monitor <i>type</i> as <tt>ttymon</tt>.</p></dd>
<dt><tt>-c</tt></dt>
<dd><p>Defines the <i>command</i> string used to start the port monitor.</p></dd>
<dt><tt>-v</tt></dt>
<dd><p>Specifies the <i>version</i> number of the port monitor.</p></dd>
<dt><tt>-y</tt></dt>
<dd><p>Defines a comment to describe this instance of the port monitor.</p></dd>
</dl>
</li></ol>

<a name="modsafapp-11"></a><h4>How to View <tt>ttymon</tt> Port Monitor Status</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="modsafapp-step-44"></a><b>View the status of a <tt>ttymon</tt> port monitor.</b><pre># <tt><b>sacadm -l -p mbmon</b></tt></pre><dl><dt><tt>-l</tt></dt>
<dd><p>Specifies the <b>list</b> port monitor status flag.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies the <i>pmtag</i> <tt>mbmon</tt> as the port monitor tag.</p></dd>
</dl>
</li></ol><a name="emjfo"></a>Example&nbsp;3-1 Viewing <tt>ttymon</tt> Port Monitor Status<p>This example shows how to view a port monitor named, <tt>mbmon</tt>.</p><pre># <tt><b>sacadm -l -p mbmon</b></tt>
PMTAG  PMTYPE  FLGS RCNT STATUS    COMMAND
mbmon  ttymon  -    0    STARTING  /usr/lib/saf/ttymon #TTY Ports a &amp; b</pre><dl><dt><tt>PMTAG</tt></dt>
<dd><p>Identifies the port monitor name, <tt>mbmon</tt>.</p></dd>
<dt><tt>PMTYPE</tt></dt>
<dd><p>Identifies the port monitor type, <tt>ttymon</tt>.</p></dd>
<dt><tt>FLGS</tt></dt>
<dd><p>Indicates whether the following flags are set:</p>
<ul><li><p>d &mdash; Do not enable the new port monitor.</p></li>
<li><p>x &mdash; Do not start the new port monitor.</p></li>
<li><p>dash (-) &mdash; No flags are set.</p></li></ul>
</dd>
<dt><tt>RCNT</tt></dt>
<dd><p>Indicates the return count value. A return count of <tt>0</tt> indicates that the port monitor is not to be restarted if it fails.</p></dd>
<dt><tt>STATUS</tt></dt>
<dd><p>Indicates the current status of the port monitor.</p></dd>
<dt><tt>COMMAND</tt></dt>
<dd><p>Identifies the command used to start the port monitor.</p></dd>
<dt><tt>#TTY Ports a &amp; b</tt></dt>
<dd><p>Identifies any comment used to describe the port monitor.</p></dd>
</dl>


<a name="modsafapp-12"></a><h4>How to Stop a <tt>ttymon</tt> Port Monitor</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="modsafapp-step-46"></a><b><a name="modsafapp-ix1115"></a><a name="modsafapp-ix1116"></a>Stop a <tt>ttymon</tt> port monitor.</b><pre># <tt><b>sacadm -k -p mbmon</b></tt></pre><dl><dt><tt>-k</tt></dt>
<dd><p>Specifies the <b>kill</b> port monitor status flag.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies the <i>pmtag</i> <tt>mbmon</tt> as the port monitor tag.</p></dd>
</dl>
</li></ol>

<a name="modsafapp-13"></a><h4>How to Start a <tt>ttymon</tt> Port Monitor</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="modsafapp-step-48"></a><b><a name="modsafapp-ix1117"></a><a name="modsafapp-ix1118"></a>Start a killed <tt>ttymon</tt> port monitor.</b><pre># <tt><b>sacadm -s -p mbmon</b></tt></pre><dl><dt><tt>-s</tt></dt>
<dd><p>Specifies the <b>start</b> port monitor status flag.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies the <i>pmtag</i> <tt>mbmon</tt> as the port monitor tag.</p></dd>
</dl>
</li></ol>

<a name="modsafapp-14"></a><h4>How to Disable a <tt>ttymon</tt> Port Monitor</h4><p>Disabling a port monitor prevents new services from starting, without affecting existing services.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="modsafapp-step-50"></a><b>Disable a <tt>ttymon</tt> port monitor.</b><pre># <tt><b>sacadm -d -p mbmon</b></tt></pre><dl><dt><tt>-d</tt></dt>
<dd><p>Specifies the <b>disable</b> port monitor status flag.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies the <i>pmtag</i> <tt>mbmon</tt> as the port monitor tag.</p></dd>
</dl>
</li></ol>

<a name="modsafapp-15"></a><h4>How to Enable a <tt>ttymon</tt> Port Monitor</h4><a name="indexterm-12"></a><a name="indexterm-13"></a><p>Enabling a <tt>ttymon</tt> port monitor allows it to service new requests. </p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="modsafapp-step-52"></a><b>Enable a <tt>ttymon</tt> port monitor.</b><pre># <tt><b>sacadm -e -p mbmon</b></tt></pre><dl><dt><tt>-e</tt></dt>
<dd><p>Specifies the <b>enable</b> port monitor status flag.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies the <i>pmtag</i> <tt>mbmon</tt> as the port monitor tag.</p></dd>
</dl>
</li></ol>

<a name="modsafapp-16"></a><h4>How to Remove a <tt>ttymon</tt> Port Monitor</h4><p>Removing a port monitor deletes all the configuration files associated with it.</p>
<hr><p><b>Note - </b>Port monitor configuration files cannot be updated or changed by using the <tt>sacadm</tt>
command. To reconfigure a port monitor, <b>remove</b> it and then <b>add</b> a
new one.</p>
<hr>
<ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="modsafapp-step-54"></a><b>Remove a <tt>ttymon</tt> port monitor.</b><pre># <tt><b>sacadm -r -p mbmon</b></tt></pre><dl><dt><tt>-r</tt></dt>
<dd><p>Specifies the <b>remove</b> port monitor status flag.</p></dd>
<dt><tt>-p</tt></dt>
<dd><p>Specifies the <i>pmtag</i> <tt>mbmon</tt> as the port monitor tag.</p></dd>
</dl>
</li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="modsafapp-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eoqln.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

