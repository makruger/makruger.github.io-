<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Changing and Removing Quotas - System Administration Guide: Advanced Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Advanced Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysresquotas-36102.html">Previous</a>
             </td>
             <td align="right">
                 <a href="sysrescron-18108.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="modconcepts-20809.html">1.&nbsp;&nbsp;Managing Terminals and Modems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="modsetup-43877.html">2.&nbsp;&nbsp;Setting Up Terminals and Modems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="modsafapp-84569.html">3.&nbsp;&nbsp;Managing Serial Ports With the Service Access Facility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresconcepts-23051.html">4.&nbsp;&nbsp;Managing System Resources (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sysressysinfo-75169.html">5.&nbsp;&nbsp;Displaying and Changing System Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresdiskuse-61891.html">6.&nbsp;&nbsp;Managing Disk Use (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresquotas-97946.html">7.&nbsp;&nbsp;Managing Quotas (Tasks)</a></p>
<p class="toc level2"><a href="sysresquotas-4.html">What Are Quotas?</a></p>
<p class="toc level2"><a href="sysresquotas-11993.html">Using Quotas</a></p>
<p class="toc level2"><a href="sysresquotas-26007.html">Setting Up Quotas</a></p>
<p class="toc level2"><a href="sysresquotas-67.html">Setting Up Quotas (Task Map)</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-61340">How to Configure File Systems for Quotas</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-28657">How to Set Up Quotas for a User</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-63864">How to Set Up Quotas for Multiple Users</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-82495">How to Check Quota Consistency</a></p>
<p class="toc level3"><a href="sysresquotas-67.html#sysresquotas-89063">How to Turn On Quotas</a></p>
<p class="toc level2 tocsp"><a href="enmuy.html">Maintaining Quotas (Task Map)</a></p>
<p class="toc level2"><a href="sysresquotas-36102.html">Checking Quotas</a></p>
<p class="toc level3"><a href="sysresquotas-36102.html#sysresquotas-81117">How to Check for Exceeded Quotas</a></p>
<p class="toc level3"><a href="sysresquotas-36102.html#sysresquotas-13508">How to Check Quotas on a File System</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Changing and Removing Quotas</a></p>
<p class="toc level3"><a href="#sysresquotas-53952">How to Change the Soft Limit Default</a></p>
<p class="toc level3"><a href="#sysresquotas-85417">How to Change Quotas for a User</a></p>
<p class="toc level3"><a href="#sysresquotas-22999">How to Disable Quotas for a User</a></p>
<p class="toc level3"><a href="#sysresquotas-45549">How to Turn Off Quotas</a></p>
</div>
<p class="toc level1 tocsp"><a href="sysrescron-18108.html">8.&nbsp;&nbsp;Scheduling System Tasks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctsetup-78801.html">9.&nbsp;&nbsp;Managing System Accounting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctref-14910.html">10.&nbsp;&nbsp;System Accounting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="spconcepts-21354.html">11.&nbsp;&nbsp;Managing System Performance (Overview)</a></p>
<p class="toc level1 tocsp"><a href="spprocess-59633.html">12.&nbsp;&nbsp;Managing System Processes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="spmonitor-24844.html">13.&nbsp;&nbsp;Monitoring System Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsoverview-10750.html">14.&nbsp;&nbsp;Troubleshooting Software Problems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="eekee.html">15.&nbsp;&nbsp;Managing System Messages</a></p>
<p class="toc level1 tocsp"><a href="tscore-7.html">16.&nbsp;&nbsp;Managing Core Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tscrashdumps-40145.html">17.&nbsp;&nbsp;Managing System Crash Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsgeneral-32935.html">18.&nbsp;&nbsp;Troubleshooting Miscellaneous Software Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfileaccess-28392.html">19.&nbsp;&nbsp;Troubleshooting File Access Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfsck-26279.html">20.&nbsp;&nbsp;Resolving UFS File System Inconsistencies (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsswmgr-40462.html">21.&nbsp;&nbsp;Troubleshooting Software Package Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="sysresquotas-10332"></a><h3>Changing and Removing Quotas</h3>
<p><a name="sysresquotas-ix2416"></a><a name="sysresquotas-ix2417"></a>You can change quotas to adjust the amount of disk space or the
number of inodes that users can consume. You can also remove quotas, for
individual users or from entire file systems, as needed.</p><p><a name="indexterm-49"></a>The following table describes the commands that you use to change quotas or
to remove quotas.</p><a name="sysresquotas-30881"></a><h6>Table&nbsp;7-3 Commands for Changing Quotas and Removing Quotas</h6><table><col width="117.53*"><col width="117.53*"><col width="248.94*"><tr><th align="left" valign="top" scope="column"><p>Command</p></th>
<th align="left" valign="top" scope="column"><p>Man Page</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>edquota</tt> </p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/edquota-1m?a=view"><tt>edquota</tt>(1M)</a></p></td>
<td align="left" valign="top" scope="row"><p>Changes the hard limits and soft limits on
the number of inodes or amount of disk space for each user. Also,
changes the soft limit for each file system with a quota. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>quotaoff</tt></p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/quotaon-1m?a=view"><tt>quotaon</tt>(1M)</a></p></td>
<td align="left" valign="top" scope="row"><p>Turns off
quotas for specified file systems.</p></td>
</tr>
</table>

<a name="sysresquotas-53952"></a><h4>How to Change the Soft Limit Default</h4><a name="indexterm-50"></a><a name="indexterm-51"></a><a name="indexterm-52"></a><a name="indexterm-53"></a><p>By default, users can exceed the soft time limits for their quotas
for one week. So, after a week of repeated violations of the soft
time limits of either disk space quotas or inode quotas, the system prevents
users from using any more inodes or disk blocks.    
 </p><p>You can change the length of time that users can exceed their
disk space quotas or inode quotas by using the <tt>edquota</tt> command. </p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresquotas-step-43"></a><b>Use the quota editor to create a temporary file that contains soft time
limits.</b><pre># <tt><b>edquota -t</b></tt></pre><p>where the <tt>-t</tt> option specifies the editing of the soft time limits for
each file system.</p></li>
<li><a name="sysresquotas-step-44"></a><b>Change the time limits from 0 (the default) to the time limits that
you specify. So, use numbers and the keywords <tt>month</tt>, <tt>week</tt>, <tt>day</tt>, <tt>hour</tt>,
<tt>min</tt>, or <tt>sec</tt>. </b>
<hr><p><b>Note - </b>This procedure does not affect current quota violators.</p>
<hr>
</li></ol><a name="emjfa"></a>Example&nbsp;7-8 Changing the Soft Limit Default<p>The following example shows the contents of the temporary file opened by the
<tt>edquota</tt> command on a system where <tt>/export/home</tt> is the only mounted file
system with quotas. The default value, <tt>0</tt>, means that the default time
limit of one week is used.  </p><pre>fs /export/home blocks time limit = 0 (default), files time limit = 0 (default)</pre><p><a name="sysresquotas-ix2429"></a><a name="sysresquotas-ix2430"></a><a name="sysresquotas-ix2431"></a><a name="sysresquotas-ix2432"></a>The following example shows the same temporary file after the time limit for
exceeding the blocks quota has been changed to 2 weeks. Also, the time
limit for exceeding the number of files has been changed to 16 days.
       </p><pre>fs /export/home blocks time limit = 2 weeks, files time limit = 16 days</pre>

<a name="sysresquotas-85417"></a><h4>How to Change Quotas for a User</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresquotas-step-50"></a><b>Use the quota editor to open a temporary file that contains one line
for each mounted file system that has a <tt>quotas</tt> file in the
file system's root directory.</b><pre># <tt><b>edquota</b></tt> <i>username</i></pre><p>where <i>username</i> specifies the user name whose quota you want to change.</p>
<hr><p><b>Caution - </b>You can specify multiple users as arguments to the <tt>edquota</tt> command. However,
the user that this information belongs to, is not displayed. To avoid confusion,
specify only one user name.</p>
<hr>
</li>
<li><a name="sysresquotas-step-51"></a><b>Specify the number of 1-Kbyte disk blocks, both soft and hard, and the
number of inodes, both soft and hard.</b></li>
<li><a name="sysresquotas-step-70"></a><b><a name="sysresquotas-ix2441"></a><a name="sysresquotas-ix2442"></a>Verify that a user's quota has been correctly changed.   </b><pre># <tt><b>quota</b></tt> <tt><b>-v</b></tt> <i>username</i></pre><dl><dt><tt>-v</tt></dt>
<dd><p>Displays user quota information on all mounted file systems with quotas enabled.</p></dd>
<dt><i>username</i></dt>
<dd><p>Specifies the user name whose quota you want to check.</p></dd>
</dl>
</li></ol><a name="emjfv"></a>Example&nbsp;7-9 Changing Quotas for a User<p>The following example shows the contents of the temporary file opened by the
<tt>edquota</tt> command. This temporary file is opened on a system where <tt>/files</tt> is
the only mounted file system containing a <tt>quotas</tt> file in the file system's
root directory.</p><pre>fs /files blocks (soft = 0, hard = 0) inodes (soft = 0, hard = 0)</pre><p>The following output shows the same temporary file after quotas have been changed.
</p><pre>fs /files blocks (soft = 0, hard = 500) inodes (soft = 0, hard = 100)</pre><a name="enfms"></a>Example&nbsp;7-10 Verifying That Hard Quotas Have Been Changed<p><a name="sysresquotas-ix2444"></a><a name="sysresquotas-ix2445"></a><a name="sysresquotas-ix2446"></a><a name="sysresquotas-ix2447"></a>The following example shows how to verify that the hard quotas for user
<tt>smith</tt> have been changed to 500 1-Kbyte blocks, and 100 inodes.  
    </p><pre># <tt><b>quota -v smith</b></tt>
Disk quotas for smith (uid 12):
Filesystem  usage  quota  limit  timeleft  files  quota  limit  timeleft
 
  /files     1       0     500              1       0     100</pre>

<a name="sysresquotas-22999"></a><h4>How to Disable Quotas for a User</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresquotas-step-57"></a><b>Use the quota editor to create a temporary file containing one line for
each mounted file system that has a <tt>quotas</tt> file in its top-level
directory.</b><pre># <tt><b>edquota</b></tt> <i>username</i></pre><p>Where <i>username</i> specifies the user name whose quota you want to disable.</p>
<hr><p><b>Caution - </b>You can specify multiple users as arguments to the <tt>edquota</tt> command. However,
the user that this information belongs to, is not displayed. To avoid confusion,
specify only one user name.</p>
<hr>
</li>
<li><a name="sysresquotas-step-58"></a><b>Change the number of 1-Kbyte disk blocks, both soft and hard, and the
number of inodes, both soft and hard, to 0.</b>
<hr><p><b>Note - </b>Ensure that you change the values to zero. Do <b>not</b> delete the line
from the text file.</p>
<hr>
</li>
<li><a name="sysresquotas-step-71"></a><b>Verify that you have disabled a user's quota.</b><pre># <tt><b>quota -v</b></tt> <i>username</i></pre><dl><dt><tt>-v</tt></dt>
<dd><p>Displays user quota information on all mounted file systems with quotas enabled.</p></dd>
<dt><i>username</i></dt>
<dd><p>Specifies the user name (UID) whose quota you want to check.</p></dd>
</dl>
</li></ol><a name="emjfz"></a>Example&nbsp;7-11 Disabling Quotas for a User<p>The following example shows the contents of the temporary file opened by the
<tt>edquota</tt> command on a system where <tt>/files</tt> is the only mounted file system
that contains a quotas file in the file system's root directory.</p><pre>fs /files blocks (soft = 50, hard = 60) inodes (soft = 90, hard = 100)</pre><p><a name="sysresquotas-ix2453"></a><a name="sysresquotas-ix2454"></a><a name="sysresquotas-ix2455"></a><a name="sysresquotas-ix2457"></a>The following example shows the same temporary file after quotas have been disabled.
      </p><pre>fs /files blocks (soft = 0, hard = 0) inodes (soft = 0, hard = 0)</pre>

<a name="sysresquotas-45549"></a><h4>How to Turn Off Quotas</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresquotas-step-64"></a><b>Turn off file system quotas.</b><pre># <tt><b>quotaoff</b></tt> [<tt><b>-v</b></tt>] <tt><b>-a</b></tt> <i>filesystem ...</i></pre><dl><dt><tt>-v</tt></dt>
<dd><p>Displays a message from each file system when quotas are turned off.</p></dd>
<dt><tt>-a</tt></dt>
<dd><p>Turns off quotas for all file systems.</p></dd>
<dt><i>filesystem</i></dt>
<dd><p>Turns off quotas for one or more file systems that you specify. More than one file system is specified by separating each file system name with a space.</p></dd>
</dl>
</li></ol><a name="emjfr"></a>Example&nbsp;7-12 Turning Off Quotas<p>The following example shows how to turn off the quotas for the
<tt>/export/home</tt> file system.</p><pre># <tt><b>quotaoff -v /export/home</b></tt>
/export/home: quotas turned off</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysresquotas-36102.html">Previous</a>
             </td>
             <td align="right">
                 <a href="sysrescron-18108.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

