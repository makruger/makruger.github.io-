<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Finding and Removing Old or Inactive Files - System Administration Guide: Advanced Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Advanced Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysresdiskuse-13.html">Previous</a>
             </td>
             <td align="right">
                 <a href="sysresquotas-97946.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="modconcepts-20809.html">1.&nbsp;&nbsp;Managing Terminals and Modems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="modsetup-43877.html">2.&nbsp;&nbsp;Setting Up Terminals and Modems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="modsafapp-84569.html">3.&nbsp;&nbsp;Managing Serial Ports With the Service Access Facility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresconcepts-23051.html">4.&nbsp;&nbsp;Managing System Resources (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sysressysinfo-75169.html">5.&nbsp;&nbsp;Displaying and Changing System Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresdiskuse-61891.html">6.&nbsp;&nbsp;Managing Disk Use (Tasks)</a></p>
<p class="toc level2"><a href="enfmy.html">Managing Disk Use (Task Map)</a></p>
<p class="toc level2"><a href="sysresdiskuse-1.html">Displaying Information About Files and Disk Space</a></p>
<p class="toc level3"><a href="sysresdiskuse-1.html#enfnc">How to Display Information About Files and Disk Space</a></p>
<p class="toc level2 tocsp"><a href="sysresdiskuse-3.html">Checking the Size of Files</a></p>
<p class="toc level3"><a href="sysresdiskuse-3.html#sysresdiskuse-40204">How to Display the Size of Files</a></p>
<p class="toc level3"><a href="sysresdiskuse-3.html#sysresdiskuse-24569">How to Find Large Files</a></p>
<p class="toc level3"><a href="sysresdiskuse-3.html#enmwy">How to Find Files That Exceed a Specified Size Limit</a></p>
<p class="toc level2 tocsp"><a href="sysresdiskuse-13.html">Checking the Size of Directories</a></p>
<p class="toc level3"><a href="sysresdiskuse-13.html#enmwv">How to Display the Size of Directories, Subdirectories, and Files</a></p>
<p class="toc level3"><a href="sysresdiskuse-13.html#sysresdiskuse-87953">How to Display the User Ownership of Local UFS File Systems</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Finding and Removing Old or Inactive Files</a></p>
<p class="toc level3"><a href="#enmxb">How to List the Newest Files</a></p>
<p class="toc level3"><a href="#sysresdiskuse-10372">How to Find and Remove Old or Inactive Files</a></p>
<p class="toc level3"><a href="#sysresdiskuse-83518">How to Clear Out Temporary Directories</a></p>
<p class="toc level3"><a href="#sysresdiskuse-85712">How to Find and Delete <tt>core</tt> Files</a></p>
<p class="toc level3"><a href="#sysresdiskuse-45392">How to Delete Crash Dump Files</a></p>
</div>
<p class="toc level1 tocsp"><a href="sysresquotas-97946.html">7.&nbsp;&nbsp;Managing Quotas (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysrescron-18108.html">8.&nbsp;&nbsp;Scheduling System Tasks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctsetup-78801.html">9.&nbsp;&nbsp;Managing System Accounting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctref-14910.html">10.&nbsp;&nbsp;System Accounting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="spconcepts-21354.html">11.&nbsp;&nbsp;Managing System Performance (Overview)</a></p>
<p class="toc level1 tocsp"><a href="spprocess-59633.html">12.&nbsp;&nbsp;Managing System Processes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="spmonitor-24844.html">13.&nbsp;&nbsp;Monitoring System Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsoverview-10750.html">14.&nbsp;&nbsp;Troubleshooting Software Problems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="eekee.html">15.&nbsp;&nbsp;Managing System Messages</a></p>
<p class="toc level1 tocsp"><a href="tscore-7.html">16.&nbsp;&nbsp;Managing Core Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tscrashdumps-40145.html">17.&nbsp;&nbsp;Managing System Crash Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsgeneral-32935.html">18.&nbsp;&nbsp;Troubleshooting Miscellaneous Software Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfileaccess-28392.html">19.&nbsp;&nbsp;Troubleshooting File Access Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfsck-26279.html">20.&nbsp;&nbsp;Resolving UFS File System Inconsistencies (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsswmgr-40462.html">21.&nbsp;&nbsp;Troubleshooting Software Package Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="sysresdiskuse-19"></a><h3>Finding and Removing Old or Inactive Files</h3>
<p><a name="sysresdiskuse-ix2269"></a><a name="sysresdiskuse-ix2271"></a><a name="sysresdiskuse-ix2272"></a><a name="sysresdiskuse-ix2273"></a><a name="indexterm-32"></a>Part of the job of cleaning up heavily loaded file systems involves locating
and removing files that have not been used recently. You can locate unused
files by using the <tt>ls</tt> or <tt>find</tt> commands. For more information, see the
<a href="http://docs.sun.com/doc/819-2239/ls-1?a=view"><tt>ls</tt>(1)</a> and <a href="http://docs.sun.com/doc/819-2239/find-1?a=view"><tt>find</tt>(1)</a> man pages.</p><p><a name="sysresdiskuse-ix2276"></a><a name="sysresdiskuse-ix2277"></a>Other ways to conserve disk space include emptying temporary directories such as the
directories located in <tt>/var/tmp</tt> or <tt>/var/spool</tt>, and deleting <tt>core</tt> and crash dump
files. For more information about crash dump files, refer to <a href="tscrashdumps-40145.html">Chapter&nbsp;17, Managing System Crash Information (Tasks)</a>.</p>

<a name="enmxb"></a><h4>How to List the Newest Files</h4><ul>
<li><b>List files, displaying the most recently created or changed files first, by using
the <tt>ls</tt> <tt>-t</tt> command. <a name="sysresdiskuse-ix2280"></a><a name="sysresdiskuse-ix2282"></a><a name="sysresdiskuse-ix2284"></a>     </b><pre>$ <tt><b>ls -t</b></tt> [<i>directory</i>]</pre><dl><dt><tt>-t</tt></dt>
<dd><p>Sorts files by latest time stamp first.</p></dd>
<dt><i>directory</i></dt>
<dd><p>Identifies the directory that you want to search.</p></dd>
</dl>
</li></ul><a name="sysresdiskuse-21"></a>Example&nbsp;6-10 Listing the Newest Files<p><a name="sysresdiskuse-ix2287"></a><a name="sysresdiskuse-ix2288"></a>The following example shows how to use the <tt>ls -tl</tt> command to locate the
most recently created or changed files within the <tt>/var/adm</tt> directory. The <tt>sulog</tt>
file was created or edited most recently.  </p><pre>$ <tt><b>ls -tl /var/adm</b></tt>
total 134
-rw-------   1 root     root         315 Sep 24 14:00 sulog
-r--r--r--   1 root     other     350700 Sep 22 11:04 lastlog
-rw-r--r--   1 root     bin         4464 Sep 22 11:04 utmpx
-rw-r--r--   1 adm      adm        20088 Sep 22 11:04 wtmpx
-rw-r--r--   1 root     other          0 Sep 19 03:10 messages
-rw-r--r--   1 root     other          0 Sep 12 03:10 messages.0
-rw-r--r--   1 root     root       11510 Sep 10 16:13 messages.1
-rw-r--r--   1 root     root           0 Sep 10 16:12 vold.log
drwxr-xr-x   2 root     sys          512 Sep 10 15:33 sm.bin
drwxrwxr-x   5 adm      adm          512 Sep 10 15:19 acct
drwxrwxr-x   2 adm      sys          512 Sep 10 15:19 sa
-rw-------   1 uucp     bin            0 Sep 10 15:17 aculog
-rw-rw-rw-   1 root     bin            0 Sep 10 15:17 spellhist
drwxr-xr-x   2 adm      adm          512 Sep 10 15:17 log
drwxr-xr-x   2 adm      adm          512 Sep 10 15:17 passwd</pre>

<a name="sysresdiskuse-10372"></a><h4>How to Find and Remove Old or Inactive Files</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresdiskuse-step-24"></a><b><a name="indexterm-33"></a>Find files that have not been accessed for a specified number of days
and list them in a file.</b><pre># <tt><b>find</b></tt> <i>directory</i> <tt><b>-type f</b></tt>[<tt><b>-atime +</b></tt><i>nnn</i>] [<tt><b>-mtime +</b></tt><i>nnn</i>] <tt><b>-print ></b></tt> <i>filename</i> &amp;</pre><dl><dt><i>directory</i></dt>
<dd><p>Identifies the directory you want to search. Directories below this directory are also searched.</p></dd>
<dt><tt>-atime +</tt><i>nnn</i></dt>
<dd><p>Finds files that have not been accessed within the number of days (nnn) that you specify.</p></dd>
<dt><tt>-mtime +</tt><i>nnn</i></dt>
<dd><p>Finds files that have not been modified within the number of days (nnn) that you specify.</p></dd>
<dt><i>filename</i></dt>
<dd><p>Identifies the file that contains the list of inactive files.</p></dd>
</dl>
</li>
<li><a name="sysresdiskuse-step-25"></a><b><a name="sysresdiskuse-ix2290"></a>Remove the inactive files found listed in the previous step.</b><pre># <tt><b>rm `cat</b></tt> <i>filename</i><tt><b>`</b></tt></pre><p>where <i>filename</i> identifies the file that was created in the previous step. This
file contains the list of inactive files.</p></li></ol><a name="emjeo"></a>Example&nbsp;6-11 Finding and Removing Old or Inactive Files<p><a name="sysresdiskuse-ix2292"></a>The following example shows files in the <tt>/var/adm</tt> directory and the subdirectories that
have not been accessed in the last 60 days. The <tt>/var/tmp/deadfiles</tt> file
contains the list of inactive files. The <tt>rm</tt> command removes these inactive
files. </p><pre># <tt><b>find /var/adm -type f -atime +60 -print > /var/tmp/deadfiles &amp;</b></tt>
# <tt><b>more /var/tmp/deadfiles</b></tt>
/var/adm/aculog
/var/adm/spellhist
/var/adm/wtmpx
/var/adm/sa/sa13
/var/adm/sa/sa27
/var/adm/sa/sa11
/var/adm/sa/sa23
/var/adm/sulog
/var/adm/vold.log
/var/adm/messages.1
/var/adm/messages.2
/var/adm/messages.3
# <tt><b>rm `cat /var/tmp/deadfiles`</b></tt>
#</pre>

<a name="sysresdiskuse-83518"></a><h4>How to Clear Out Temporary Directories</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresdiskuse-step-29"></a><b>Change to the directory that you want to clean out.</b><pre># <tt><b>cd</b></tt> <i>directory</i></pre>
<hr><p><b>Caution - </b>Ensure that you are in the correct directory before completing Step 3. Step
3 deletes all files in the current directory.</p>
<hr>
</li>
<li><a name="sysresdiskuse-step-30"></a><b>Delete the files and subdirectories in the current directory.</b><pre># <tt><b>rm -r *</b></tt></pre></li>
<li><a name="sysresdiskuse-step-31"></a><b>Change to other directories that contain unnecessary, temporary or obsolete subdirectories and files.
Delete these subdirectories and files by repeating Step 3.</b></li></ol><a name="emjeq"></a>Example&nbsp;6-12 Clearing Out Temporary Directories<p><a name="sysresdiskuse-ix2301"></a><a name="sysresdiskuse-ix2302"></a><a name="sysresdiskuse-ix2303"></a><a name="sysresdiskuse-ix2304"></a>The following example shows how to clear out the <tt>mywork</tt> directory, and how
to verify that all files and subdirectories were removed.</p><pre># <tt><b>cd mywork</b></tt>
# <tt><b>ls</b></tt>
filea.000
fileb.000
filec.001
# <tt><b>rm -r *</b></tt>
# <tt><b>ls</b></tt>
#</pre>

<a name="sysresdiskuse-85712"></a><h4>How to Find and Delete <tt>core</tt> Files</h4><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresdiskuse-step-36"></a><b>Change to the directory where you want to search for <tt>core</tt> files.</b></li>
<li><a name="sysresdiskuse-step-37"></a><b><a name="indexterm-34"></a>Find and remove any <tt>core</tt> files in this directory and its subdirectories.</b><pre># <tt><b>find . -name core -exec rm {} \;</b></tt></pre></li></ol><a name="emjes"></a>Example&nbsp;6-13 Finding and Deleting <tt>core</tt> Files<p><a name="sysresdiskuse-ix2311"></a><a name="sysresdiskuse-ix2312"></a>The following example shows how to find and remove <tt>core</tt> files from the
<tt>jones</tt> user account by using the <tt>find</tt> command. </p><pre># <tt><b>cd /home/jones</b></tt>
# <tt><b>find . -name core -exec rm {} \;</b></tt></pre>

<a name="sysresdiskuse-45392"></a><h4>How to Delete Crash Dump Files</h4><p>Crash dump files can be very large. If you have enabled your
system to store these files, do not retain them for longer than necessary.</p><ol>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="sysresdiskuse-step-41"></a><b>Change to the directory where crash dump files are stored. </b><pre># <tt><b>cd /var/crash/</b></tt><i>system</i></pre><p>where <i>system</i> identifies a system that created the crash dump files.</p>
<hr><p><b>Caution - </b>Ensure you are in the correct directory before completing Step 3. Step 3
deletes all files in the current directory.</p>
<hr>
</li>
<li><a name="sysresdiskuse-step-42"></a><b>Remove the crash dump files. </b><pre># <tt><b>rm *</b></tt></pre></li>
<li><a name="sysresdiskuse-step-45"></a><b>Verify that the crash dump files were removed. </b><pre># <tt><b>ls</b></tt></pre></li></ol><a name="emjev"></a>Example&nbsp;6-14 Deleting Crash Dump Files<p><a name="sysresdiskuse-ix2319"></a>The following example shows how to remove crash dump files from the system
<tt>venus</tt>, and how to verify that the crash dump files were removed. </p><pre># <tt><b>cd /var/crash/venus</b></tt>
# <tt><b>rm *</b></tt>
# <tt><b>ls</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="sysresdiskuse-13.html">Previous</a>
             </td>
             <td align="right">
                 <a href="sysresquotas-97946.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

