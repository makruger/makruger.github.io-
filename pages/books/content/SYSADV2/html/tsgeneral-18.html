<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>What to Do if You Forgot Root Password - System Administration Guide: Advanced Administration</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Advanced Administration</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tsgeneral-8.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fxcmh.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol2preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="modconcepts-20809.html">1.&nbsp;&nbsp;Managing Terminals and Modems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="modsetup-43877.html">2.&nbsp;&nbsp;Setting Up Terminals and Modems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="modsafapp-84569.html">3.&nbsp;&nbsp;Managing Serial Ports With the Service Access Facility (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresconcepts-23051.html">4.&nbsp;&nbsp;Managing System Resources (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sysressysinfo-75169.html">5.&nbsp;&nbsp;Displaying and Changing System Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresdiskuse-61891.html">6.&nbsp;&nbsp;Managing Disk Use (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresquotas-97946.html">7.&nbsp;&nbsp;Managing Quotas (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysrescron-18108.html">8.&nbsp;&nbsp;Scheduling System Tasks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctsetup-78801.html">9.&nbsp;&nbsp;Managing System Accounting (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="sysresacctref-14910.html">10.&nbsp;&nbsp;System Accounting (Reference)</a></p>
<p class="toc level1 tocsp"><a href="spconcepts-21354.html">11.&nbsp;&nbsp;Managing System Performance (Overview)</a></p>
<p class="toc level1 tocsp"><a href="spprocess-59633.html">12.&nbsp;&nbsp;Managing System Processes (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="spmonitor-24844.html">13.&nbsp;&nbsp;Monitoring System Performance (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsoverview-10750.html">14.&nbsp;&nbsp;Troubleshooting Software Problems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="eekee.html">15.&nbsp;&nbsp;Managing System Messages</a></p>
<p class="toc level1 tocsp"><a href="tscore-7.html">16.&nbsp;&nbsp;Managing Core Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tscrashdumps-40145.html">17.&nbsp;&nbsp;Managing System Crash Information (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsgeneral-32935.html">18.&nbsp;&nbsp;Troubleshooting Miscellaneous Software Problems (Tasks)</a></p>
<p class="toc level2"><a href="gewwy.html">x86: What to Do if the Multiboot Module From Previous GRUB Implementation Is Loaded at Boot Time</a></p>
<p class="toc level2"><a href="tsgeneral-8.html">What to Do if Rebooting Fails</a></p>
<div class="onpage">
<p class="toc level2"><a href="">What to Do if You Forgot Root Password</a></p>
</div>
<p class="toc level2"><a href="fxcmh.html">x86: What to Do if the SMF Boot Archive Service Fails During a System Reboot</a></p>
<p class="toc level2"><a href="tsgeneral-9.html">What to Do if a System Hangs</a></p>
<p class="toc level2"><a href="tsgeneral-10.html">What to Do if a File System Fills Up</a></p>
<p class="toc level2"><a href="tsgeneral-4.html">What to Do if File ACLs Are Lost After Copy or Restore</a></p>
<p class="toc level2"><a href="tsgeneral-12.html">Troubleshooting Backup Problems</a></p>
<p class="toc level2"><a href="gcbwx.html">Troubleshooting Common Agent Container Problems in the Solaris OS</a></p>
<p class="toc level3"><a href="gcbwx.html#gcbwu">How to Check Port Numbers</a></p>
<p class="toc level3"><a href="gcbwx.html#gcbwc">How to Generate Security Keys for the Solaris OS</a></p>
<p class="toc level1 tocsp"><a href="tsfileaccess-28392.html">19.&nbsp;&nbsp;Troubleshooting File Access Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsfsck-26279.html">20.&nbsp;&nbsp;Resolving UFS File System Inconsistencies (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="tsswmgr-40462.html">21.&nbsp;&nbsp;Troubleshooting Software Package Problems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="tsgeneral-18"></a><h3>What to Do if You Forgot Root Password</h3>
<p>If you forget the root password and you cannot log into the
system, you will have to do the following:</p>
<ul><li><p>Stop the system by using the keyboard stop sequence.</p></li>
<li><p><b>Solaris 10 1/06</b> On x86 based systems, boot the system in the Solaris failsafe archive.</p></li>
<li><p><b>Solaris 10:</b> Boot the system from a boot server or an install server, or from a local CD-ROM.</p></li>
<li><p>Mount the root (<tt>/</tt>) file system.</p></li>
<li><p>Remove the root password from the <tt>/etc/shadow</tt> file.</p></li>
<li><p>Reboot the system.</p></li>
<li><p>Log in and set root's password.</p></li></ul>
<p>These procedures are fully described in <a href="http://docs.sun.com/doc/819-2379/hbsparcboot-79782?a=view">Chapter 12, Booting a System (Tasks), in <i>System Administration Guide: Basic Administration</i></a></p>
<hr><p><b>Note - </b>GRUB based booting is not available on SPARC based systems in this Solaris
release.</p>
<hr>
<p>The following examples describe how to recover from a forgotten root password on
both SPARC and x86 based systems.</p><a name="tsgeneral-67"></a>Example&nbsp;18-1 SPARC: What to Do if You Forgot Root Password<p><a name="indexterm-154"></a><a name="indexterm-155"></a><a name="indexterm-156"></a><a name="indexterm-157"></a>The following example shows how to recover when you forget the root password
by booting from the network. This example assumes that the boot server is
already available. Be sure to apply a new root password after the system
has rebooted.</p><pre>(<b>Use keyboard abort sequence--Press Stop A keys to stop the system</b>)
ok <tt><b>boot net -s</b></tt>
# <tt><b>mount /dev/dsk/c0t3d0s0 /a</b></tt>
# <tt><b>cd /a/etc</b></tt>
# <tt><b>TERM=vt100</b></tt>
# <tt><b>export TERM</b></tt>
# <tt><b>vi shadow</b></tt>
(<b>Remove root's encrypted password string</b>)
# <tt><b>cd /</b></tt>
# <tt><b>umount /a</b></tt>
# <tt><b>init 6</b></tt></pre><a name="hbx86boot-71"></a>Example&nbsp;18-2 x86: Performing a GRUB Based Boot When You Have Forgotten the Root Password<a name="indexterm-158"></a><a name="indexterm-159"></a><a name="indexterm-160"></a><p><b>Solaris 10 1/06:</b><a name="indexterm-161"></a><a name="indexterm-162"></a><a name="indexterm-163"></a><a name="indexterm-164"></a> This example assumes that the boot server is already available. Be sure
to apply a new root password after the system has rebooted.</p><pre>Press any key to reboot.
Resetting...

 GNU GRUB  version 0.95  (631K lower / 2095488K upper memory)

 +-------------------------------------------------------------------------+
 | Solaris 10.1 nv_14 X86                                                  |
 | Solaris failsafe                                                        |
 |                                                                         |
 |                                                                         |
 |                                                                         |
 +-------------------------------------------------------------------------+
 

 GNU GRUB  version 0.95  (631K lower / 2095488K upper memory)

 +-------------------------------------------------------------------------+
 | root (hd0,2,a)                                                          |  
 | kernel /boot/multiboot -B console=ttya kernel/unix -s                   |
 | module /boot/x86.miniroot-safe                                          |
 |                                                                         |
 |                                                                         |
 |                                                                         | 
 +-------------------------------------------------------------------------+

 Booting command-list

root (hd0,2,a)
Filesystem type is ufs, partition type 0x000000bf
kernel /boot/multiboot -B console=ttya kernel/unix -s
[Multiboot-elf, &lt;0x1000000:0x13f3b:0x3941d>, shtab=0x104e258, entry=0x100000
0]...
module /boot/x86.miniroot-safe
SunOS Release 5.10.1 Version snv_14 32-bit
Copyright 1983-2005 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
Booting to milestone "milestone/single-user:default".
Configuring devices.
Searching for installed OS...
        /dev/dsk/c1t0d0s0 --       Solaris 10.1 nv_14 X86

Do you wish to automatically update boot archives? [y,n,?] <tt><b>n</b></tt>

#<tt><b>mount /dev/dsk/c0t0d0s0 /a</b></tt>
      .
      .
      .
# <tt><b>cd /a/etc</b></tt>
# <tt><b>vi shadow</b></tt>
(<b>Remove root's encrypted password string</b>)
# <tt><b>cd /</b></tt>
# <tt><b>umount /a</b></tt>
# <tt><b>init 6</b></tt></pre><a name="hbx86boot-71a"></a>Example&nbsp;18-3 x86: Booting a System When You Have Forgotten the Root Password<a name="indexterm-165"></a><p><a name="indexterm-166"></a><a name="indexterm-167"></a><a name="indexterm-168"></a><a name="indexterm-169"></a><b>Solaris 10:</b> The following example shows how to recover when you forget root's password
by booting from the network. This example assumes that the boot server is
already available. Be sure to apply a new root password after the system
has rebooted.</p><pre>Press any key to reboot.
Resetting...
.
.
.
Initializing system                                                             
Please wait...                                                                  
                                                                                
                                                                                
                     &lt;&lt;&lt; Current Boot Parameters >>>                            
Boot path: /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0:a                                
Boot args:                                                                      
                                                                                
Type    b [file-name] [boot-flags] &lt;ENTER>     to boot with options            
or      i &lt;ENTER>                              to enter boot interpreter       
or      &lt;ENTER>                                to boot with defaults           
                                                                               
                  &lt;&lt;&lt; timeout in 5 seconds >>>

Select (b)oot or (i)nterpreter: <tt><b>b -s</b></tt>
SunOS Release 5.10 Version amd64-gate-2004-09-30 32-bit
Copyright 1983-2004 Sun Microsystems, Inc.  All rights reserved.
Use is subject to license terms.
DEBUG enabled
Booting to milestone "milestone/single-user:default".
Hostname: venus
NIS domain name is example.com
Requesting System Maintenance Mode
SINGLE USER MODE

Root password for system maintenance (control-d to bypass): <tt><b>xxxxxx</b></tt>
Entering System Maintenance Mode
.
.
.
# <tt><b>mount /dev/dsk/c0t0d0s0 /a</b></tt>
      .
      .
      .
# <tt><b>cd /a/etc</b></tt>
# <tt><b>vi shadow</b></tt>
(<b>Remove root's encrypted password string</b>)
# <tt><b>cd /</b></tt>
# <tt><b>umount /a</b></tt>
# <tt><b>init 6</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="tsgeneral-8.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fxcmh.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

