<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Upgrade Planning - Solaris Express Installation Guide: Planning for Installation and Upgrade</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Planning for Installation and Upgrade</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="planning-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gdpgj.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="epucn.html">Part&nbsp;I&nbsp;Overall Planning of Any Solaris Installation or Upgrade</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="gaufd.html">2.&nbsp;&nbsp;What's New in Solaris Installation</a></p>
<p class="toc level2"><a href="planning-8.html">3.&nbsp;&nbsp;Solaris Installation and Upgrade (Roadmap)</a></p>
<p class="toc level2"><a href="diskspace-1.html">4.&nbsp;&nbsp;System Requirements, Guidelines, and Upgrade (Planning)</a></p>
<p class="toc level3"><a href="webstart-83.html">System Requirements and Recommendations</a></p>
<p class="toc level3"><a href="planning-15.html">Allocating Disk and Swap Space</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Upgrade Planning</a></p>
</div>
<p class="toc level3"><a href="gdpgj.html">Planning Network Security</a></p>
<p class="toc level3"><a href="egyqy.html">Locale Values</a></p>
<p class="toc level3"><a href="kernelarchs-34565.html">Platform Names and Groups</a></p>
<p class="toc level3"><a href="diskspace-101.html">x86: Partitioning Recommendations</a></p>
<p class="toc level3"><a href="planning-333.html">How to Find the Version of the Solaris OS That Your System Is Running</a></p>
<p class="toc level2 tocsp"><a href="gatherinfo-1.html">5.&nbsp;&nbsp;Gathering Information Before Installation or Upgrade (Planning)</a></p>
<p class="toc level1 tocsp"><a href="epucs.html">Part&nbsp;II&nbsp;Understanding Installations That Relate to GRUB, Solaris Zones, and RAID-1 Volumes</a></p>
<p class="toc level2"><a href="grub-1.html">6.&nbsp;&nbsp;x86: GRUB Based Booting for Solaris Installation</a></p>
<p class="toc level2"><a href="gdhbj.html">7.&nbsp;&nbsp;Upgrading When Solaris Zones Are Installed on a System (Planning)</a></p>
<p class="toc level2"><a href="mirroroverview-1.html">8.&nbsp;&nbsp;Creating RAID-1 Volumes (Mirrors) During Installation (Overview)</a></p>
<p class="toc level2"><a href="mirrorplanning-1.html">9.&nbsp;&nbsp;Creating RAID-1 Volumes (Mirrors) During Installation (Planning)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="emyaq"></a><h3>Upgrade Planning</h3>
<p>You can upgrade a system by using one of three different upgrade
methods: Solaris Live Upgrade, the Solaris installation program, and custom JumpStart. </p><a name="esimq"></a><h6>Table&nbsp;4-5 Solaris Upgrade Methods</h6><table><col width="37.09*"><col width="69.21*"><tr><th align="left" valign="top" scope="column"><p>Current Solaris
OS</p></th>
<th align="left" valign="top" scope="column"><p>Solaris Upgrade Methods</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p> Solaris 8, Solaris 9, Solaris 10</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Solaris Live Upgrade &ndash; Upgrades a system by creating and upgrading a copy of the running system</p></li>
<li><p>The Solaris installation program &ndash; Provides an interactive upgrade with a graphical user interface or command-line interface</p></li>
<li><p>Custom JumpStart method &ndash; Provides an automated upgrade</p></li></ul>
</td>
</tr>
</table>

<a name="esimr"></a><h4>Upgrade Limitations</h4>
<p>The following table lists limitations when you upgrade a system under some conditions.</p><table><col width="22.00*"><col width="78.00*"><tr><th align="left" valign="top" scope="column"><p>Issue</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Upgrading
to a different software group</p></td>
<td align="left" valign="top" scope="row"><p>You cannot upgrade your system to a software
group that is not installed on the system. For example, if you previously
installed the End User Solaris Software Group on your system, you cannot use
the upgrade option to upgrade to the Developer Solaris Software Group. However, during
the upgrade you can add software to the system that is not part
of the currently installed software group.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Upgrading when non-global zones are installed</p></td>
<td align="left" valign="top" scope="row"><p>You can upgrade
a system that has non-global zones installed with the Solaris installation program, Solaris
Live Upgrade or JumpStart. The following limitations apply:</p>
<ul><li><p>Solaris Live Upgrade is the recommend program to upgrade or patch a system. Other upgrade programs might require extensive upgrade time, because the time required to complete the upgrade increases linearly with the number of installed non-global zones. If you are patching a system with Solaris Live Upgrade, you do not have to take the system to single-user mode and you can maximize your system's uptime.</p></li>
<li><p>When you use a Solaris Flash archive to install, an archive that contains non-global zones is not properly installed on your system. </p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Upgrading with Veritas file systems</p></td>
<td align="left" valign="top" scope="row"><p>The Solaris
interactive installation and custom JumpStart programs do not  present you with the
opportunity to upgrade a system when you are using Veritas VxVM file systems
under these conditions:</p>
<ul><li><p>If the root file system to be upgraded is under Veritas control. For example, if the root (<tt>/</tt>) file system is mounted on a <tt>/dev/vx/...</tt> device.</p></li>
<li><p>If any Solaris software is installed on any file system that is under Veritas control. For example, if the <tt>/usr</tt> file system is mounted on a <tt>/dev/vx/...</tt> device.</p></li></ul>
<p>To upgrade when Veritas VxVM is configured, use one of
the following methods: </p>
<ul><li><p>Use Solaris Live Upgrade with this procedure, <a href="http://docs.sun.com/doc/819-2395/troubleshooting-48?a=view">System Panics When Upgrading With Solaris Live Upgrade Running Veritas VxVm in <i>Solaris Express Installation Guide: Solaris Live Upgrade and Upgrade Planning</i></a>.</p></li>
<li><p>If you have non-global zones installed, you must migrate the affected file systems from VxVM file systems to UFS file systems. You cannot use the Solaris Live Upgrade procedure in the previous procedure.</p></li></ul>
</td>
</tr>
</table>

<a name="esimu"></a><h4>Upgrade Programs</h4>
<p>You can perform a standard interactive upgrade with the Solaris installation program or
an unattended upgrade with the custom JumpStart installation method. Solaris Live Upgrade enables
you to upgrade a running system.</p><table><col width="24.85*"><col width="75.38*"><col width="49.77*"><tr><th align="left" valign="top" scope="column"><p>Upgrade Program</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For More Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Solaris Live Upgrade</p></td>
<td align="left" valign="top" scope="row"><p>Enables you
to create a copy of the currently running system. The copy can be
upgraded and then a reboot switches the upgraded copy to become the currently
running system. Using Solaris Live Upgrade reduces the downtime that is required to
upgrade the Solaris OS. Also, Solaris Live Upgrade can prevent problems with upgrading.
An example is the ability to recover from an upgrade if the power
fails, because the copy being upgraded is not the currently running system. </p></td>
<td align="left" valign="top" scope="row"><p>To
plan for disk space allocation when using Solaris Live Upgrade, see <a href="http://docs.sun.com/doc/819-2395/preconfig-17?a=view">Solaris Live Upgrade Requirements in <i>Solaris Express Installation Guide: Solaris Live Upgrade and Upgrade Planning</i></a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>The
Solaris installation program </p></td>
<td align="left" valign="top" scope="row"><p>Guides you through an upgrade with an interactive GUI.
</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2393/webstart-91?a=view">Chapter 2, Installing With the Solaris Installation Program (Tasks), in <i>Solaris Express Installation Guide: Basic Installations</i></a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Custom JumpStart program</p></td>
<td align="left" valign="top" scope="row"><p>Provides an automated upgrade. A profile file and optional preinstallation and
postinstallation scripts provide the information required. When creating a custom JumpStart profile for
an upgrade, specify <tt>install_type upgrade</tt>. You must test the custom JumpStart profile against the
system's disk configuration and currently installed software before you upgrade. Use the <tt>pfinstall <tt>-D</tt></tt>
command on the system that you are upgrading to test the profile. You
cannot test an upgrade profile by using a disk configuration file. </p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>For more information about testing the upgrade option, refer to <a href="http://docs.sun.com/doc/819-2396/preparecustom-25808?a=view">Testing a Profile in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a></p></li>
<li><p>For more information about creating a upgrade profile, see <a href="http://docs.sun.com/doc/819-2396/preparecustom-45277?a=view">Profile Examples in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a></p></li>
<li><p>For more information about performing an upgrade, see <a href="http://docs.sun.com/doc/819-2396/customjump-40000?a=view">Performing a Custom JumpStart Installation in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a></p></li></ul>
</td>
</tr>
</table>

<a name="geupf"></a><h4>Installing a Solaris Flash Archive Instead of Upgrading</h4>
<p><a name="indexterm-55"></a><a name="indexterm-56"></a><a name="indexterm-57"></a>The Solaris Flash installation feature provides a method of creating a copy of
the whole installation from a master system that can be replicated on many
clone systems. This copy is called a Solaris Flash archive. You can install
an archive by using any installation program.</p>
<hr><p><b>Caution - </b>A Solaris Flash archive cannot be properly created when a non-global zone is
installed. The Solaris Flash feature is not compatible  with Solaris Zones partitioning
technology. If you create a Solaris Flash archive, the resulting  archive is
not installed properly when the archive is deployed under these conditions:</p>
<ul><li><p>The archive is created in a non-global zone</p></li>
<li><p>The archive is created in a global zone that has non-global zones installed</p></li></ul>

<hr>


<a name="geuon"></a><h5>Creating an Archive That Contains Large Files</h5>
<p>The default copy method that is used when you create a Solaris
Flash archive is the <tt>pax</tt> utility. The <tt>flarcreate</tt> command uses the <tt>pax</tt> utility to
create an archive without size limitations on individual files. Individual file sizes can
be greater than 4 Gbytes. The <tt>flarcreate</tt> command with the <tt>-L cpio</tt> option creates a
<tt>cpio</tt> archive. This option is useful for backward compatibility.</p><p>For information about installing an archive, see the following table.</p><table><col width="50*"><col width="50*"><tr><td align="left" valign="top" scope="row"><p>Solaris Live Upgrade</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2395/luupgrade-83?a=view">Installing Solaris Flash Archives on a Boot Environment in <i>Solaris Express Installation Guide: Solaris Live Upgrade and Upgrade Planning</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Custom
JumpStart</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2396/flash-46?a=view">To Prepare to Install a Solaris Flash Archive With a Custom JumpStart Installation in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Solaris interactive installation</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2397/flashinstall-10?a=view">Chapter 4, Installing and Administering Solaris Flash Archives (Tasks), in <i>Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>WANboot</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2394/waninstalltasks-2?a=view">Chapter 12, Installing With WAN Boot (Tasks), in <i>Solaris Express Installation Guide: Network-Based Installations</i></a></p></td>
</tr>
</table>

<a name="esimx"></a><h4>Upgrading With Disk Space Reallocation</h4>
<p>The upgrade option in the Solaris installation program and the <tt>upgrade</tt> keyword
in the custom JumpStart program provide the ability  to reallocate disk space.
This reallocation automatically changes the sizes of the disk slices. You can reallocate
disk space if the current file systems do not have enough space for
the upgrade. For example, file systems might need more space for the upgrade
 for the following reasons: </p>
<ul><li><p>The Solaris software group that is currently installed on the system contains new software in the new release. Any new software that is included in a software group is automatically selected to be installed during the upgrade.</p></li>
<li><p>The size of the existing software on the system has increased in the new release.</p></li></ul>
<p>The auto-layout feature attempts to reallocate the disk space to accommodate the new
size requirements of the file system. Initially, auto-layout attempts to  reallocate space,
based on a set of default constraints.  If auto-layout  cannot reallocate
space, you must change the constraints on the file systems.  </p>
<hr><p><b>Note - </b>Auto-layout does not have the ability to &ldquo;grow&rdquo; file systems. Auto-layout reallocates space
by the following process:</p>
<ol><li><p>Backing up required files on the file systems that need to change.</p></li>
<li><p>Repartitioning the disks on the basis of the file system changes.</p></li>
<li><p>Restoring the backup files before the upgrade happens.</p></li></ol>

<hr>

<ul><li><p>If you are using the Solaris installation program, and auto-layout cannot determine how to reallocate the disk space, you must use the custom JumpStart program to upgrade.</p></li>
<li><p>If you are using the custom JumpStart method to upgrade and you create an upgrade profile, disk space might be a concern. If the current file systems do not contain enough disk space for the upgrade, you can use the <tt>backup_media</tt> and <tt>layout_constraint</tt> keywords to reallocate disk space. For an example of how to use the <tt>backup_media</tt> and <tt>layout_constraint</tt> keywords in a profile, refer to <a href="http://docs.sun.com/doc/819-2396/preparecustom-45277?a=view">Profile Examples in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a>.</p></li></ul>


<a name="esind"></a><h4>Backing Up And Restarting Systems For an Upgrade</h4>
<p>Backing up your existing file systems before you upgrade to the Solaris 
OS is highly recommended. If you copy file systems to removable media,
such as tape, you can safeguard against data loss, damage, or corruption.</p>
<ul><li><p>For detailed instructions to back up your system, refer to <a href="http://docs.sun.com/doc/819-2723/bkupconcepts-57422?a=view">Chapter 23, Backing Up and Restoring File Systems (Overview), in <i>System Administration Guide: Devices and File Systems</i></a>.</p></li>
<li><p>To backup your system when non-global zones are installed, see <a href="http://docs.sun.com/doc/819-2450/z.admin.ov-1?a=view">Chapter 26, Solaris Zones Administration (Overview), in <i>System Administration Guide: Solaris Containers-Resource Management and Solaris Zones</i></a>.</p></li></ul>
<p>In previous releases, the restart mechanism enabled you to continue an upgrade after
a loss of power or other similar problem. Starting with the Solaris Express
2/07  release, the restart mechanism is unreliable. If you have a
problem, your upgrade might not restart.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="planning-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gdpgj.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

