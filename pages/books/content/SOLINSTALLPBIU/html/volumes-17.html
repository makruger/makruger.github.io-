<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>RAID-1 and RAID-0 Volume Requirements and Guidelines - Solaris Express Installation Guide: Planning for Installation and Upgrade</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Planning for Installation and Upgrade</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="volumes-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="volumes-27.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="epucn.html">Part&nbsp;I&nbsp;Overall Planning of Any Solaris Installation or Upgrade</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="gaufd.html">2.&nbsp;&nbsp;What's New in Solaris Installation</a></p>
<p class="toc level2"><a href="planning-8.html">3.&nbsp;&nbsp;Solaris Installation and Upgrade (Roadmap)</a></p>
<p class="toc level2"><a href="diskspace-1.html">4.&nbsp;&nbsp;System Requirements, Guidelines, and Upgrade (Planning)</a></p>
<p class="toc level2"><a href="gatherinfo-1.html">5.&nbsp;&nbsp;Gathering Information Before Installation or Upgrade (Planning)</a></p>
<p class="toc level1 tocsp"><a href="epucs.html">Part&nbsp;II&nbsp;Understanding Installations That Relate to GRUB, Solaris Zones, and RAID-1 Volumes</a></p>
<p class="toc level2"><a href="grub-1.html">6.&nbsp;&nbsp;x86: GRUB Based Booting for Solaris Installation</a></p>
<p class="toc level2"><a href="gdhbj.html">7.&nbsp;&nbsp;Upgrading When Solaris Zones Are Installed on a System (Planning)</a></p>
<p class="toc level2"><a href="mirroroverview-1.html">8.&nbsp;&nbsp;Creating RAID-1 Volumes (Mirrors) During Installation (Overview)</a></p>
<p class="toc level2"><a href="mirrorplanning-1.html">9.&nbsp;&nbsp;Creating RAID-1 Volumes (Mirrors) During Installation (Planning)</a></p>
<p class="toc level3"><a href="volumes-28.html">System Requirement</a></p>
<p class="toc level3"><a href="volumes-10.html">State Database Replicas Guidelines and Requirements</a></p>
<div class="onpage">
<p class="toc level3"><a href="">RAID-1 and RAID-0 Volume Requirements and Guidelines</a></p>
</div>
<p class="toc level3"><a href="volumes-27.html">Booting Into Single-User Mode Causes Mirror to Appear to Need Maintenance</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="volumes-17"></a><h3>RAID-1 and RAID-0 Volume Requirements and Guidelines</h3>
<a name="indexterm-115"></a><a name="indexterm-116"></a><p><a name="indexterm-117"></a><a name="indexterm-118"></a>When you are working with RAID-1 volumes (mirrors) and RAID-0 volumes (single-slice concatenations), consider
the following guidelines.</p>

<a name="mirrorplanning-2"></a><h4>Custom JumpStart and Solaris Live Upgrade Guidelines</h4>
<p>The custom JumpStart installation method and Solaris Live Upgrade support a subset of
the features that are available in the Solaris Volume Manager software. When you
create mirrored file systems with these installation programs, consider the following guidelines.</p><table><col width="28.51*"><col width="60.54*"><col width="60.95*"><tr><th align="left" valign="top" scope="column"><p>Installation Program</p></th>
<th align="left" valign="top" scope="column"><p>Supported
Feature </p></th>
<th align="left" valign="top" scope="column"><p>Unsupported Feature</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Custom JumpStart and Solaris Live Upgrade</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Supports RAID-0 and RAID-1 volumes, but does not support other Solaris Volume Manager components, such as RAID-5 volumes.</p></li>
<li><p>RAID-0 volume is supported, but only as a single-slice concatenation.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>In Solaris Volume manager a
RAID-0 volume can refer to disk stripes or disk concatenations. You cannot create
RAID-0 stripe volumes during the installation or upgrade.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Custom JumpStart</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Supports the creation of RAID-1 volumes during an initial installation only.</p></li>
<li><p>You can create up to two RAID-0 volumes (submirrors) for each RAID-1 volume. Two submirrors usually provide sufficient data redundancy for most applications, and the disk drive costs are less expensive. </p></li></ul>
</td>
<td align="left" valign="top" scope="row">
<ul><li><p>Does not support an upgrade when RAID-1 volumes are configured.</p></li>
<li><p>More than two RAID-0 volumes are not supported.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Solaris Live Upgrade</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>You can create up to three RAID-0 volumes (submirrors) for each RAID-1 volume. Three submirrors enable you to take a submirror offline and perform a backup while maintaining the two remaining submirrors for continued data redundancy. </p></li>
<li><p>Supports the creation of RAID-1 volumes during an upgrade.</p></li></ul>
<p>For examples, see
<a href="http://docs.sun.com/doc/819-2395/lucreate-1000?a=view">To Create a Boot Environment With RAID-1 Volumes (Mirrors) in <i>Solaris Express Installation Guide: Solaris Live Upgrade and Upgrade Planning</i></a>.</p></td>
<td align="left" valign="top" scope="row"><p>More than three RAID-0 volumes are not supported.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Creating and Installing a Solaris
Flash with RAID-1 volumes</p></td>
<td align="left" valign="top" scope="row"><p>You can create a Solaris Flash archive created from
a master system that has Solaris Volume Manager RAID-1 volumes configured.  The
Solaris Flash creation software removes all RAID-1 volume information from the archive to
keep the integrity of the clone system.  With custom JumpStart you can
rebuild the RAID-1 volumes by using a JumpStart profile.  With Solaris Live
Upgrade, you create a boot environment with RAID-1 volumes configured and install the
archive.  The Solaris installation program cannot be used to install RAID-1 volumes with
a Solaris Flash archive.</p><p>For examples of RAID-1 volumes in JumpStart profiles, see
<a href="http://docs.sun.com/doc/819-2396/preparecustom-45277?a=view">Profile Examples in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a>.</p></td>
<td align="left" valign="top" scope="row"><p>Veritas VxVM stores configuration information in areas not available to Solaris Flash. 
If Veritas VxVm file systems have been configured, you should not create a
Solaris Flash archive.  Also, Solaris install, including JumpStart and Solaris Live Upgrade
do not support rebuilding VxVM volumes at installation time. Therefore, if you are
planning to deploy Veritas VxVM software using a Solaris Flash archive, the archive
must be created prior to configuring the VxVM file systems.  The clone
systems must be then configured individually after the archive has been applied and
the system rebooted.</p></td>
</tr>
</table>

<a name="epudh"></a><h5>RAID Volume Name Requirements and Guidelines for Custom JumpStart and Solaris Live Upgrade</h5>
<p><a name="indexterm-119"></a>Observe the following rules when assigning names for volumes.</p>
<ul><li><p>Use a naming method that maps the slice number and disk number  to volume numbers.</p></li>
<li><p>Volume names must begin with the letter <tt>d</tt> followed  by a number, for example, <tt>d0</tt>.</p></li>
<li><p>Solaris Volume Manager has 128 default volume names from 0&ndash;127.  The following list shows some example volume names.</p>
<ul><li><p>Device <tt>/dev/md/dsk/d0</tt> &ndash; block volume  <tt>d0</tt></p></li>
<li><p>Device <tt>/dev/md/dsk/d1</tt> &ndash; block volume <tt>d1</tt></p></li></ul>
</li>
<li><p>Use ranges for each particular type of volume. For example,  assign numbers 0&ndash;20 for RAID-1 volumes, and 21&ndash;40 for RAID-0 volumes.</p></li></ul>


<a name="epudi"></a><h5>RAID Volume Naming Conventions for Solaris Live Upgrade</h5>
<p>When you use the Solaris Live Upgrade to create RAID-1 volumes (mirrors) and
RAID-0 volumes (submirrors),  you can enable the software to detect and assign
volume names,  or you can assign the names. If you enable
the software  to detect the names, the software assigns the first mirror
or submirror name that  is available. If you assign mirror names, assign
names ending in zero so that the installation can use the names ending
in 1 and 2  for submirrors. If you assign submirror names, assign
names ending in 1 or 2. If you assign numbers incorrectly, the mirror
might not  be created. For example, if you specify a mirror name
with a number that  ends in 1 or 2 (<tt>d1</tt> or
<tt>d2</tt>), Solaris Live Upgrade fails to create the mirror if the 
mirror name duplicates a submirror's name. </p>
<hr><p><b>Note - </b>In previous releases, an abbreviated volume name could be entered. Starting with the
Solaris Express 2/07 release, only the full volume name can be entered. For example,
only the full volume name, such as <tt>/dev/md/dsk/d10</tt>, can be used to specify
a mirror.</p>
<hr>
<a name="gdleo"></a>Example&nbsp;9-1 Solaris Live Upgrade: Enable the Software to Detect and Name the Mirror and Submirror<p>In this example, Solaris Live Upgrade assigns the volume names. The RAID-1 volumes
<tt>d0</tt> and <tt>d1</tt> are the only volumes in use. For the mirror <tt>d10</tt>,
Solaris Live Upgrade chooses <tt>d2</tt> for the submirror for the device <tt>c0t0d0s0</tt> and
<tt>d3</tt> for the submirror for the device <tt>c1t0d0s0</tt>.</p><pre><tt><b>lucreate -n newbe -m /:/dev/md/dsk/d10:mirror,ufs -m /:/dev/dsk/c0t0d0s0:attach -m /:/dev/dsk/c1t0d0s0:attach</b></tt></pre><a name="gdleq"></a>Example&nbsp;9-2 Solaris Live Upgrade: Assign Mirror and Submirror Names<p>In this example, the volume names are assigned in the command. For
the mirror <tt>d10</tt>, <tt>d11</tt> is the name for the submirror for the device <tt>c0t0d0s0</tt>
and <tt>d12</tt> is the name for the submirror for the device <tt>c1t0d0s0</tt>.</p><pre><tt><b>lucreate -n newbe -m /:/dev/md/dsk/d10:mirror,ufs -m /:/dev/dsk/c0t0d0s0,/dev/md/dsk/d11:attach</b></tt>
<tt><b>-m /:/dev/dsk/c1t0d0s0,/dev/md/dsk/d12:attach</b></tt></pre><p>For detailed information about Solaris Volume Manager naming requirements, see <a href="http://docs.sun.com/doc/819-2789"><i>Solaris Volume Manager Administration Guide</i></a>.</p>

<a name="epudj"></a><h5>RAID-Volume Naming Conventions for Custom JumpStart</h5>
<p>When you use the custom JumpStart installation method to create RAID-1 volumes (mirrors)
and RAID-0 volumes (submirrors),  you can enable the software to detect and
assign volume names to mirrors,  or you can assign the names in
the profile.</p>
<ul><li><p>If you enable the software to detect the names, the software assigns the first volume number that is available.</p></li>
<li><p>If you assign names in the profile, assign mirror names ending in zero so that the installation can use the names ending in 1 and 2 for submirrors.</p>
<hr><p><b>Note - </b>If you assign numbers incorrectly, the mirror might not be created. For example, if you specify a mirror name with a number that ends in 1 or 2 (<tt>d1</tt> or <tt>d2</tt>), JumpStart fails to create the mirror if the mirror name duplicates a submirror's name. </p>
<hr>
</li></ul>

<hr><p><b>Note - </b>You can abbreviate the names of physical disk slices and Solaris Volume Manager
volumes. The abbreviation is the shortest name that uniquely identifies a device. Examples
follow.</p>
<ul><li><p>A Solaris Volume Manager volume can be identified by its <tt>d</tt><i>num</i><tt></tt> designation, so that, for example, <tt>/dev/md/dsk/d10</tt> becomes simply <tt>d10</tt>.</p></li>
<li><p>If a system has a single controller and multiple disks, you might use <tt>t0d0s0</tt>, but with multiple controllers use <tt>c0t0d0s0</tt>. </p></li></ul>

<hr>
<a name="gdkwy"></a>Example&nbsp;9-3 Enable the Software to Detect the Mirror and Submirror Names<p>In the following profile example, the mirror is assigned the first volume numbers
that are available.  If the next available mirror ending in zero
 is <tt>d10</tt>, then the names <tt>d11</tt> and <tt>d12</tt> are assigned to the
submirrors.</p><pre>filesys                 mirror c0t0d0s1  / </pre><a name="gdkxu"></a>Example&nbsp;9-4 Assigning Mirror and Submirror Names<p>In the following profile example, the mirror number is assigned in the profile
as d30. The submirror names are assigned by the software, based on the
mirror number and the first available submirrors. The submirrors are named d31 and
d32.</p><pre>filesys                 mirror:d30 c0t1d0s0 c0t0d0s0  /</pre><p>For detailed information about Solaris Volume Manager naming requirements, see <a href="http://docs.sun.com/doc/819-2789"><i>Solaris Volume Manager Administration Guide</i></a>.</p>

<a name="mirrorplanning-3"></a><h4>Guidelines for Selecting Disks and Controllers</h4>
<p>When you choose the disks and controllers that you want to use
to mirror a file system, consider the following guidelines.</p>
<ul><li><p>Use components that are on different controllers to increase the number of simultaneous reads and writes that can be performed.</p></li>
<li><p>Keep the slices of different submirrors on different disks and controllers. Data protection is diminished considerably if slices of two or more submirrors of the same mirror are on the same disk.</p></li>
<li><p>Organize submirrors across separate controllers, because controllers and associated cables tend to fail more often than disks. This practice also improves mirror performance.</p></li>
<li><p>Use the same type of disks and controllers in a single mirror.  Particularly in old SCSI storage devices, different models or brands of disk or controller can have widely varying performance. Mixing the different performance  levels in a single mirror can cause performance to degrade significantly.</p></li></ul>


<a name="mirrorplanning-4"></a><h4>Guidelines for Selecting Slices</h4>
<p>When you choose the slices that you want to use to mirror
a file system, consider the following guidelines.</p>
<ul><li><p>Any file system, including root (<tt>/</tt>),  <tt>swap</tt>, and <tt>/usr</tt>, can use a mirror. Any application, such as a database, also can use a mirror.</p></li>
<li><p>Make sure that your submirror slices are of equal size. Submirrors of different sizes result in unused disk space.</p></li>
<li><p>If you have a mirrored file system in which the first submirror  attached does not start on cylinder 0, all additional submirrors you attach  must also not start on cylinder 0. If you attempt to attach a submirror starting  on cylinder 0 to a mirror in which the original submirror does not start on cylinder 0, the following error message is displayed: </p><pre>can't attach 
labeled submirror to an unlabeled mirror </pre><p>You must ensure that all submirrors you plan to attach to a mirror either all start on cylinder 0, or that none of them start on cylinder 0. </p><p>Starting cylinders do not have to be identical across all submirrors, but all submirrors must either include or not include cylinder 0.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="volumes-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="volumes-27.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

