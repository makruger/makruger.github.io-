<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>NIS-to-LDAP Best Practices With Sun Java System Directory Server - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nis2ldap-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nis2ldap-24.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">Part&nbsp;I&nbsp;About Naming and Directory Services</a></p>
<p class="toc level2"><a href="intro2ns-2.html">1.&nbsp;&nbsp;Naming and Directory Services (Overview)</a></p>
<p class="toc level2"><a href="a12swit-86415.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a></p>
<p class="toc level1 tocsp"><a href="dnsadmin-1.html">Part&nbsp;II&nbsp;DNS Setup and Administration</a></p>
<p class="toc level2"><a href="dnsref-1.html">3.&nbsp;&nbsp;DNS Setup and Administration (Reference)</a></p>
<p class="toc level1 tocsp"><a href="nissetup-1.html">Part&nbsp;III&nbsp;NIS Setup and Administration</a></p>
<p class="toc level2"><a href="anis1-25461.html">4.&nbsp;&nbsp;Network Information Service (NIS) (Overview)</a></p>
<p class="toc level2"><a href="cnis1-25208.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a></p>
<p class="toc level2"><a href="anis2-22217.html">6.&nbsp;&nbsp;Administering NIS (Tasks)</a></p>
<p class="toc level2"><a href="abtrbl-18694.html">7.&nbsp;&nbsp;NIS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="ldapsetup-1.html">Part&nbsp;IV&nbsp;LDAP Naming Services Setup and Administration</a></p>
<p class="toc level2"><a href="overview-1.html">8.&nbsp;&nbsp;Introduction to LDAP Naming Services (Overview/Reference)</a></p>
<p class="toc level2"><a href="ldapsecure-1.html">9.&nbsp;&nbsp;LDAP Basic Components and Concepts (Overview)</a></p>
<p class="toc level2"><a href="planldap-1.html">10.&nbsp;&nbsp;Planning Requirements for LDAP Naming Services (Tasks)</a></p>
<p class="toc level2"><a href="sundssetup-13.html">11.&nbsp;&nbsp;Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="clientsetup-1.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="setupproblems-1.html">13.&nbsp;&nbsp;LDAP Troubleshooting (Reference)</a></p>
<p class="toc level2"><a href="schemas-1.html">14.&nbsp;&nbsp;LDAP General Reference (Reference)</a></p>
<p class="toc level2"><a href="nis2ldap-34.html">15.&nbsp;&nbsp;Transitioning From NIS to LDAP (Overview/Tasks)</a></p>
<p class="toc level3"><a href="nis2ldap-35.html">NIS-to-LDAP Service Overview</a></p>
<p class="toc level3"><a href="nis2ldap-6.html">Transitioning From NIS to LDAP (Task Map)</a></p>
<p class="toc level3"><a href="nis2ldap-15.html">Prerequisites for the NIS-to-LDAP Transition</a></p>
<p class="toc level3"><a href="nis2ldap-2.html">Setting Up the NIS-to-LDAP Service</a></p>
<div class="onpage">
<p class="toc level3"><a href="">NIS-to-LDAP Best Practices With Sun Java System Directory Server</a></p>
</div>
<p class="toc level3"><a href="nis2ldap-24.html">NIS-to-LDAP Restrictions</a></p>
<p class="toc level3"><a href="nis2ldap-58.html">NIS-to-LDAP Troubleshooting</a></p>
<p class="toc level3"><a href="nis2ldap-42.html">Reverting to NIS</a></p>
<p class="toc level2 tocsp"><a href="nisplus2ldap-1.html">16.&nbsp;&nbsp;Transitioning From NIS+ to LDAP</a></p>
<p class="toc level1 tocsp"><a href="ghnmu.html">Part&nbsp;V&nbsp;Active Directory Naming Service</a></p>
<p class="toc level2"><a href="ghnov.html">17.&nbsp;&nbsp;Setting Up Solaris Active Directory Clients</a></p>
<p class="toc level1 tocsp"><a href="whatsnew-1.html">A.&nbsp;&nbsp;Solaris 10 Software Updates to DNS, NIS, and LDAP</a></p>
<p class="toc level2"><a href="whatsnew-5.html">Service Management Facility Changes</a></p>
<p class="toc level2"><a href="whatsnew-2.html">DNS BIND</a></p>
<p class="toc level2"><a href="schemas-290.html"><tt>pam_ldap</tt> Changes</a></p>
<p class="toc level2"><a href="whatsnew-3.html">Documentation Errors</a></p>
<p class="toc level1 tocsp"><a href="aagloss-87604.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="nis2ldap-16"></a><h3>NIS-to-LDAP Best Practices With Sun Java System Directory Server</h3>
<a name="indexterm-570"></a><p>The N2L service supports Sun Java System Directory Server (formerly Sun ONE
Directory Server) and compatible versions of directory servers offered by Sun Microsystems, Inc.
Other (third party) LDAP servers might work with the N2L service, but they
are not supported by Sun. If you are using an LDAP server other
than the Sun Java System Directory Server or compatible Sun servers, you must
manually configure the server to support RFC 2307, or its successors', schemas.</p><p>If you are using the Sun Java System Directory Server, you can
enhance the directory server to improve performance. To make these enhancements, you must
have LDAP administrator privileges on the Sun Java System Directory Server. In addition,
the directory server might need to be rebooted, a task that must be
coordinated with the server's LDAP clients. The Sun Java System Directory Server (and
Sun ONE and iPlanet Directory Server) documentation is available on the <a href="http://docs.sun.com/coll/1224.3">Sun Java System Directory Server Enterprise Edition 6.2</a> web
site.</p>

<a name="nis2ldap-39"></a><h4>Creating Virtual List View Indexes With Sun Java System Directory Server</h4>
<a name="indexterm-571"></a><p>For large maps, LDAP virtual list view (VLV) indexes must be used
to ensure LDAP searches return complete results. For information about setting up VLV indexes
on the Sun Java System Directory Server, see the <a href="http://docs.sun.com/coll/1224.3">Sun Java System Directory Server Enterprise Edition 6.2</a> documentation.</p><p>VLV search results use a fixed page size of 50000. If VLVs
are used with Sun Java System Directory Server, both the LDAP server and
N2L server must be able to handle transfers of  this size. If
all of your maps are known to be smaller than this limit, you
do not need to use VLV indexes. However, if your maps are larger
than the size limit, or you are unsure of the size of
all maps, use VLV indexes to avoid incomplete returns.</p><p>If you are using VLV indexes, set up the appropriate size limits
as follows.</p>
<ul><li><p>On the Sun Java System Directory Server: <tt>nsslapd-sizelimit</tt> attribute must be set greater than or equal to 50000 or <tt>-1</tt>. See the <a href="http://docs.sun.com/doc/819-2240/idsconfig-1m?a=view"><tt>idsconfig</tt>(1M)</a> man page.</p></li>
<li><p>On the N2L server: <tt>nisLDAPsearchSizelimit</tt> attribute must be set greater than or equal to 50000 or zero. For more information, see the <a href="http://docs.sun.com/doc/819-2251/nisldapmapping-4?a=view"><tt>NISLDAPmapping</tt>(4)</a> man page.</p></li></ul>
<p>Once VLV indexes have been created, activate them by running <tt>directoryserver</tt> with
the <tt>vlvindex</tt> option on the Sun Java System Directory Server. See the <a href="http://docs.sun.com/doc/819-2240/directoryserver-1m?a=view"><tt>directoryserver</tt>(1M)</a>
man page for more information.</p>

<a name="nis2ldap-1"></a><h5>VLVs for Standard Maps</h5>
<p>Use the Sun Java System Directory Server <tt>idsconfig</tt> command to set up
VLVs if the following conditions apply:</p>
<ul><li><p>You are using the Sun Java System Directory Server.</p></li>
<li><p>You are mapping standard maps to RFC 2307 LDAP entries.</p></li></ul>
<p>VLVs are domain specific, so each time <tt>idsconfig</tt> is run, VLVs are created
for one NIS domain. Therefore, during the NIS&ndash;to&ndash;LDAP transition, you must run <tt>idsconfig</tt>
once for <b>each</b> <tt>nisLDAPdomainContext</tt> attribute included in the <tt>NISLDAPmapping</tt> file.</p>

<a name="nis2ldap-4"></a><h5>VLVs for Custom and Nonstandard Maps</h5>
<p>You must manually create new Sun Java System Directory Server VLVs for
maps, or copy and modify existing VLV indexes, if the following conditions apply:</p>
<ul><li><p>You are using the Sun Java System Directory Server.</p></li>
<li><p>You have large custom maps or have standard maps that are mapped to nonstandard DIT locations.</p></li></ul>
<p>To view existing VLV indexes, type the following:</p><pre># <tt><b>ldapsearch</b></tt> <tt>-h</tt> <tt><b></tt><i>hostname</i><tt></b></tt> <tt>-s</tt> <tt><b>sub</b></tt> <tt>-b</tt> <tt><b>"cn=ldbm database,cn=plugins,cn=config" \</b></tt>
<tt><b>"objectClass=vlvSearch"</b></tt></pre>

<a name="nis2ldap-43"></a><h4>Avoiding Server Timeouts With Sun Java System Directory Server</h4>
<a name="indexterm-572"></a><p>When the N2L server refreshes a map, the result might be a
large LDAP directory access. If the Sun Java System Directory Server is not
correctly configured, the refresh operation might time out before completion. To avoid directory
server timeouts, modify the following Sun Java System Directory Server attributes manually or
by running the <tt>idsconfig</tt> command.</p><p>For example, to increase the minimum amount of time in seconds that the
server should spend performing the search request, modify these attributes:</p><pre>dn: cn=config
nsslapd-timelimit: -1</pre><p>For testing purposes, you can use an attribute value of <tt>-1</tt>, which indicates
no limit. When you have determined the optimum limit value, change the attribute
value. Do <b>not</b> maintain any attribute settings at <tt>-1</tt> on a production server.
With no limits, the server might be vulnerable to Denial of Service attacks.</p><p>For more information about configuring Sun Java System Directory Server with LDAP,
see <a href="sundssetup-13.html">Chapter&nbsp;11, Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a> of this book.</p>

<a name="nis2ldap-40"></a><h4>Avoiding Buffer Overruns With Sun Java System Directory Server</h4>
<a name="indexterm-573"></a><p>To avoid buffer overruns, modify the Sun Java System Directory Server attributes
manually or by running the <tt>idsconfig</tt> command.</p>
<ol><li><p>For example, to increase the maximum number of entries that are returned for a client search query, modify these attributes:</p><pre>dn: cn=config
nsslapd-sizelimit: -1</pre></li>
<li><p>To increase the maximum number of entries that are verified for a client search query, modify these attributes:</p><pre>dn: cn=config, cn=ldbm database, cn=plugins, cn=config
nsslapd-lookthroughlimit: -1</pre></li></ol>
<p>For testing purposes, you can use an attribute value of <tt>-1</tt>, which indicates
no limit. When you have determined the optimum limit value, change the attribute
value. Do <b>not</b> maintain any attribute settings at <tt>-1</tt> on a production server.
With no limits, the server might be vulnerable to Denial of Service attacks.</p><p>If VLVs are being used, the <tt>sizelimit</tt> attribute values should be set as
defined in <a href="#nis2ldap-39">Creating Virtual List View Indexes With Sun Java System Directory Server</a>. If VLVs are not being used, the size limit should
be set large enough to accommodate the largest container.</p><p>For more information about configuring Sun Java System Directory Server with LDAP,
see <a href="sundssetup-13.html">Chapter&nbsp;11, Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nis2ldap-2.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nis2ldap-24.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

