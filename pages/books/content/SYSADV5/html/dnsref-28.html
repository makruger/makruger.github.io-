<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Multicast DNS and Service Discovery - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="dnsref-13.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nissetup-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">Part&nbsp;I&nbsp;About Naming and Directory Services</a></p>
<p class="toc level2"><a href="intro2ns-2.html">1.&nbsp;&nbsp;Naming and Directory Services (Overview)</a></p>
<p class="toc level2"><a href="a12swit-86415.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a></p>
<p class="toc level1 tocsp"><a href="dnsadmin-1.html">Part&nbsp;II&nbsp;DNS Setup and Administration</a></p>
<p class="toc level2"><a href="dnsref-1.html">3.&nbsp;&nbsp;DNS Setup and Administration (Reference)</a></p>
<p class="toc level3"><a href="dnsref-2.html">Related Materials</a></p>
<p class="toc level3"><a href="dnsref-25.html">Migrating From BIND 8 to BIND 9</a></p>
<p class="toc level3"><a href="dnsref-3.html">DNS and the Service Management Facility</a></p>
<p class="toc level3"><a href="dnsref-4.html">Implementing <tt>rndc</tt></a></p>
<p class="toc level3"><a href="dnsref-9.html">BIND 9 Commands, Files, Tools, and Options</a></p>
<p class="toc level3"><a href="dnsref-13.html">The <tt>named.conf</tt> Options</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Multicast DNS and Service Discovery</a></p>
</div>
<p class="toc level1 tocsp"><a href="nissetup-1.html">Part&nbsp;III&nbsp;NIS Setup and Administration</a></p>
<p class="toc level2"><a href="anis1-25461.html">4.&nbsp;&nbsp;Network Information Service (NIS) (Overview)</a></p>
<p class="toc level2"><a href="cnis1-25208.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a></p>
<p class="toc level2"><a href="anis2-22217.html">6.&nbsp;&nbsp;Administering NIS (Tasks)</a></p>
<p class="toc level2"><a href="abtrbl-18694.html">7.&nbsp;&nbsp;NIS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="ldapsetup-1.html">Part&nbsp;IV&nbsp;LDAP Naming Services Setup and Administration</a></p>
<p class="toc level2"><a href="overview-1.html">8.&nbsp;&nbsp;Introduction to LDAP Naming Services (Overview/Reference)</a></p>
<p class="toc level2"><a href="ldapsecure-1.html">9.&nbsp;&nbsp;LDAP Basic Components and Concepts (Overview)</a></p>
<p class="toc level2"><a href="planldap-1.html">10.&nbsp;&nbsp;Planning Requirements for LDAP Naming Services (Tasks)</a></p>
<p class="toc level2"><a href="sundssetup-13.html">11.&nbsp;&nbsp;Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="clientsetup-1.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="setupproblems-1.html">13.&nbsp;&nbsp;LDAP Troubleshooting (Reference)</a></p>
<p class="toc level2"><a href="schemas-1.html">14.&nbsp;&nbsp;LDAP General Reference (Reference)</a></p>
<p class="toc level2"><a href="nis2ldap-34.html">15.&nbsp;&nbsp;Transitioning From NIS to LDAP (Overview/Tasks)</a></p>
<p class="toc level2"><a href="nisplus2ldap-1.html">16.&nbsp;&nbsp;Transitioning From NIS+ to LDAP</a></p>
<p class="toc level1 tocsp"><a href="ghnmu.html">Part&nbsp;V&nbsp;Active Directory Naming Service</a></p>
<p class="toc level2"><a href="ghnov.html">17.&nbsp;&nbsp;Setting Up Solaris Active Directory Clients</a></p>
<p class="toc level1 tocsp"><a href="whatsnew-1.html">A.&nbsp;&nbsp;Solaris 10 Software Updates to DNS, NIS, and LDAP</a></p>
<p class="toc level2"><a href="whatsnew-5.html">Service Management Facility Changes</a></p>
<p class="toc level2"><a href="whatsnew-2.html">DNS BIND</a></p>
<p class="toc level2"><a href="schemas-290.html"><tt>pam_ldap</tt> Changes</a></p>
<p class="toc level2"><a href="whatsnew-3.html">Documentation Errors</a></p>
<p class="toc level1 tocsp"><a href="aagloss-87604.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="dnsref-28"></a><h3>Multicast DNS and Service Discovery</h3>
<p><a name="indexterm-105"></a><a name="indexterm-106"></a>Two extensions to the DNS protocol are multicast DNS (mDNS) and DNS Service
Discovery (DNS-SD). mDNS extends the Domain Name Service system to operate over link-local
multicast. DNS-SD adds support needed to discover network services over DNS. </p>

<a name="dnsref-29"></a><h4>Multicast DNS</h4>
<p>Multicast DNS (mDNS) provides a naming service system that is easy to set
up and maintain, for computers on a local link. All participating network devices
on the same local link perform standard DNS functions, using multicast DNS rather
than unicast, and do not need a unicast DNS server.  
For administrators, the primary advantage of mDNS is that no unicast DNS server
needs to be maintained on the local network. There is no need, for
example, to update and maintain host names in files to resolve hostname to
IP address for devices on the local link that are using mDNS.</p>

<a name="gfbih"></a><h4>Service Discovery</h4>
<p><a name="indexterm-107"></a><a name="indexterm-108"></a>Network services include printing, file transfer, music sharing, servers for photo, document and
other file sharing, and services provided by other local devices. DNS service discovery
support in the Solaris OS includes open source framework and tools from Apple
to enable applications to advertise and discover network services, using DNS on the Solaris
OS. </p><p>For users, network service discovery makes computing easier by enabling users to browse
for services on the network, rather than needing to find the service manually.
Existing standards, and work done by other companies and groups, assure that cross-platform
support is available. </p>

<a name="gfbgt"></a><h4>Administering mDNS</h4>
<p>Use the Service Management Facility (SMF) to administer the mDNS daemon.  You
can use SMF to start and stop the mDNS service. </p><p>For an overview of SMF, refer to <a href="http://docs.sun.com/doc/819-2379/hbrunlevels-25516?a=view">Chapter 16, Managing Services (Overview), in <i>System Administration Guide: Basic Administration</i></a>. Also refer to the
<a href="http://docs.sun.com/doc/819-2240/svcadm-1m?a=view"><tt>svcadm</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2239/svcs-1?a=view"><tt>svcs</tt>(1)</a> man pages for more details.</p>

<a name="gfbht"></a><h4>mDNS Deployment</h4>
<p><a name="indexterm-109"></a>For mDNS to function, it must be deployed on all peers that are
to participate in mDNS. It is used to advertise the availability of services
provided on the peer.</p><p>Multicast DNS and Service Discovery are both installed by default in the &ldquo;all&rdquo;
cluster, when installing the Solaris OS. For other types of devices, for example,
printers, music, video, and communication devices, many already have mDNS installed.</p><p>In addition to being installed, mDNS must be enabled, and must be
included in the <tt>/etc/nsswitch.conf</tt> file. See <a href="http://docs.sun.com/doc/819-2251/nsswitch.conf-4?a=view"><tt>nsswitch.conf</tt>(4)</a></p>

<a name="gfbhg"></a><h4>Enable mDNS</h4>
<p>For the Solaris OS, as root, or as a user with appropriate
privileges, enable mDNS on each computer that will participate in mDNS.</p><pre># <tt><b>svcadm enable svc:/network/dns/multicast:default</b></tt></pre><p>Enabling mDNS this way persists through upgrades and reboots. For more information, see
<a href="http://docs.sun.com/doc/819-2240/svcadm-1m?a=view"><tt>svcadm</tt>(1M)</a>.</p>

<a name="gfbhi"></a><h4>Edit <tt>nsswitch.conf</tt></h4>
<p><a name="indexterm-110"></a>To be able to resolve local hosts, edit the <i>nsswitch.conf</i> file and add
mdns to the list of name services. For example, the file might
look like the following:</p><pre># /etc/nsswitch.conf   
hosts: files dns mdns   
ipnodes: files dns mdns</pre><p>For an example of the form such a file should take, see
<tt>/etc/nswitch.conf.dns</tt>.</p>

<a name="gfbik"></a><h4>Review Errors or Messages</h4>
<p><a name="indexterm-111"></a>Check the multicast DNS service log for errors or messages.</p><p><tt>/var/svc/log/network-dns-multicast:default.log</tt></p>

<a name="gfbin"></a><h4>mDNS and dns-sd Tool</h4>
<p><a name="indexterm-112"></a><a name="indexterm-113"></a>Use the <tt>dns-sd</tt> command as a network diagnosis tool, to browse and
discover services, similar to how you would use <tt>ping (1M)</tt> or <tt>traceroute (1M)</tt>.</p><p>The <tt>dns-sd</tt> command is intended primarily for interactive use, mainly because its command
line arguments and its output format can change over time, which makes invoking
it from a shell script unpredictable and risky. Additionally, the asynchronous nature of
DNS Service Discovery does not easily lend itself to script-oriented programming.</p><p>For complete dns-sd information, see the man page for <tt>dns-sd (1M)</tt> and to
incorporate DNS service in applications, see the <tt>libdns_sd (3DNS_SD)</tt> man page.</p><p>EXAMPLES of the <tt>dns-sd</tt> command</p><p>Advertising a printing service</p><p>The following command advertises the existence of LPR printing service on port 515
on &ldquo;My Test&rdquo; machine, so that it will be available to DNS-SD compatible
printing clients:</p><pre>dns-sd -R "My Test" _printer._tcp. . 515 pdl=application/postscript</pre><p>For this registration to be useful, the LPR service should be available on
port 515.</p><p>Advertising a web page</p><p>The following command advertises a web page being served by an HTTP 
server on port 80 on "My Test" machine. The web page will
appear on the Bonjour list in Safari and other DNS-SD compatible Web clients:</p><pre>dns-sd -R "My Test" _http._tcp . 80 path=/path-to-page.html</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="dnsref-13.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nissetup-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

