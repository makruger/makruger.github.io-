<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Principal Names and Netnames (NIS+ to LDAP) - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nisplus2ldap-50.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nisplus2ldap-57.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">Part&nbsp;I&nbsp;About Naming and Directory Services</a></p>
<p class="toc level2"><a href="intro2ns-2.html">1.&nbsp;&nbsp;Naming and Directory Services (Overview)</a></p>
<p class="toc level2"><a href="a12swit-86415.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a></p>
<p class="toc level1 tocsp"><a href="dnsadmin-1.html">Part&nbsp;II&nbsp;DNS Setup and Administration</a></p>
<p class="toc level2"><a href="dnsref-1.html">3.&nbsp;&nbsp;DNS Setup and Administration (Reference)</a></p>
<p class="toc level1 tocsp"><a href="nissetup-1.html">Part&nbsp;III&nbsp;NIS Setup and Administration</a></p>
<p class="toc level2"><a href="anis1-25461.html">4.&nbsp;&nbsp;Network Information Service (NIS) (Overview)</a></p>
<p class="toc level2"><a href="cnis1-25208.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a></p>
<p class="toc level2"><a href="anis2-22217.html">6.&nbsp;&nbsp;Administering NIS (Tasks)</a></p>
<p class="toc level2"><a href="abtrbl-18694.html">7.&nbsp;&nbsp;NIS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="ldapsetup-1.html">Part&nbsp;IV&nbsp;LDAP Naming Services Setup and Administration</a></p>
<p class="toc level2"><a href="overview-1.html">8.&nbsp;&nbsp;Introduction to LDAP Naming Services (Overview/Reference)</a></p>
<p class="toc level2"><a href="ldapsecure-1.html">9.&nbsp;&nbsp;LDAP Basic Components and Concepts (Overview)</a></p>
<p class="toc level2"><a href="planldap-1.html">10.&nbsp;&nbsp;Planning Requirements for LDAP Naming Services (Tasks)</a></p>
<p class="toc level2"><a href="sundssetup-13.html">11.&nbsp;&nbsp;Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="clientsetup-1.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="setupproblems-1.html">13.&nbsp;&nbsp;LDAP Troubleshooting (Reference)</a></p>
<p class="toc level2"><a href="schemas-1.html">14.&nbsp;&nbsp;LDAP General Reference (Reference)</a></p>
<p class="toc level2"><a href="nis2ldap-34.html">15.&nbsp;&nbsp;Transitioning From NIS to LDAP (Overview/Tasks)</a></p>
<p class="toc level2"><a href="nisplus2ldap-1.html">16.&nbsp;&nbsp;Transitioning From NIS+ to LDAP</a></p>
<p class="toc level3"><a href="nisplus2ldap-2.html">NIS+ to LDAP Overview</a></p>
<p class="toc level3"><a href="nisplus2ldap-5.html">Getting Started With the NIS+ to LDAP Transition</a></p>
<p class="toc level3"><a href="nisplus2ldap-41.html">Masters and Replicas (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-43.html">The Directory Server (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-49.html">Mapping NIS+ Objects Other Than Table Entries</a></p>
<p class="toc level3"><a href="nisplus2ldap-50.html">NIS+ Entry Owner, Group, Access, and TTL</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Principal Names and Netnames (NIS+ to LDAP)</a></p>
</div>
<p class="toc level3"><a href="nisplus2ldap-57.html"><tt>client_info</tt> and <tt>timezone</tt> Tables (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-60.html">Adding New Object Mappings (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-70.html">Storing Configuration Information in LDAP</a></p>
<p class="toc level1 tocsp"><a href="ghnmu.html">Part&nbsp;V&nbsp;Active Directory Naming Service</a></p>
<p class="toc level2"><a href="ghnov.html">17.&nbsp;&nbsp;Setting Up Solaris Active Directory Clients</a></p>
<p class="toc level1 tocsp"><a href="whatsnew-1.html">A.&nbsp;&nbsp;Solaris 10 Software Updates to DNS, NIS, and LDAP</a></p>
<p class="toc level2"><a href="whatsnew-5.html">Service Management Facility Changes</a></p>
<p class="toc level2"><a href="whatsnew-2.html">DNS BIND</a></p>
<p class="toc level2"><a href="schemas-290.html"><tt>pam_ldap</tt> Changes</a></p>
<p class="toc level2"><a href="whatsnew-3.html">Documentation Errors</a></p>
<p class="toc level1 tocsp"><a href="aagloss-87604.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="nisplus2ldap-56"></a><h3>Principal Names and Netnames (NIS+ to LDAP)</h3>
<p><a name="indexterm-597"></a><a name="indexterm-598"></a>NIS+ authentication relies on principal names (a user or host name, qualified by
the domain name) and netnames (the secure RPC equivalent of principal names) to
uniquely identify an entity (principal) that can be authenticated. While RFC 2307 provides
for storing the Diffie-Hellman keys used for NIS+ authentication, there is no specified
place for the principal names or netnames.</p><p>The <tt>/var/nis/NIS+LDAPmapping.template</tt> file works around this problem by deriving the domain portion of
principal and netnames from the owner name (itself a principal name) of the
<tt>cred.org_dir</tt> table. Hence, if the NIS+ domain is <tt>x.y.z.</tt>, and the owner of
the <tt>cred.org_dir</tt> table is <tt>aaa.x.y.z.</tt>, all principal names for NIS+ entries created from
LDAP data will be of the following form.</p><pre><tt><b></tt><i>user or system</i><tt>.x.y.z.</b></tt></pre><p>Netnames are of the following form.</p><pre><tt><b>unix.</tt><i>uid</i><tt>@x.y.z.</b></tt></pre><pre><tt><b>unix.</tt><i>nodename</i><tt>@x.y.z.</b></tt></pre><p>While this method of constructing principal and netnames probably is sufficient for most
NIS+ installations, there are also some cases in which it fails, as shown
in the following.</p>
<ul><li><p>The owner name of the <tt>cred.org_dir</tt> table belongs to a different domain than the one shared by the principal and netnames in the <tt>cred.org_dir</tt> table. This could be the case for a <tt>cred.org_dir</tt> table in a subdomain, if the owner is a principal from the parent domain. You can fix this problem in one of the following ways.</p>
<ul><li><p><b>Change the owner of the</b> <tt>cred.org_dir</tt> <b>table to match the domain of the entries in the table.</b></p></li>
<li><p><b>Change the mapping rules for the</b> <tt>cred.org_dir</tt> <b>database IDs to use the owner of some other NIS+ object (which could be created especially for that purpose, if no suitable object already exists).</b></p><p>For example, if the <tt>cred.org_dir</tt> table in the domain <tt>sub.dom.ain.</tt> is owned by <tt>master.dom.ain.</tt>, but principal and netnames in <tt>cred.org_dir.sub.dom.ain.</tt> should belong to <tt>sub.dom.ain</tt>, you could create a link object as follows.</p><pre># <tt><b>nisln cred.org_dir.sub.dom.ain. \</b></tt>
<tt><b>credname.sub.dom.ain.</b></tt></pre><p>Set the owner of the link object to an appropriate principal in the <tt>sub.dom.ain.</tt> as follows.</p><pre># <tt><b>nischown trusted.sub.dom.ain. credname.sub.dom.ain.</b></tt></pre><p>Edit the mapping file. Change</p><pre>(nis+:zo_owner[]cred.org_dir, "*.%s")), \</pre><p>to</p><pre>(nis+:zo_owner[]credname.sub.dom.ain., "*.%s")), \</pre><p>Note that the use of a link object called <tt>credname</tt> is an example. Any valid object type (except an entry object) and object name will do. The important point is to set the owner of the object to have the correct domain name.</p></li>
<li><p>If you do not want to give ownership even of a special purpose object to a principal from the domain used for the principal and netnames, create <tt>nisplusPrincipalName</tt> and <tt>nisplusNetname</tt> attributes as detailed below.</p></li></ul>
</li>
<li><p><b>The</b> <tt>cred.org_dir</tt> <b>table contains principal and netnames belonging to more than one domain.</b></p><p>Consult the documentation for your LDAP server, and create the <tt>nisplusPrincipalName</tt> and <tt>nisplusNetname</tt> attributes, as well as the <tt>nisplusAuthName</tt> object class. (The following is LDIF data for <tt>ldapadd</tt>. Attribute and object class OIDs are for illustration only.)</p><pre>dn: cn=schema
changetype: modify
add: attributetypes
attributetypes:    ( 1.3.6.1.4.1.42.2.27.5.42.42.7.0 NAME 'nisplusPrincipalName' \
          DESC 'NIS+ principal name' \
          SINGLE-VALUE \
          SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )</pre><pre>attributetypes:    ( 1.3.6.1.4.1.42.2.27.5.42.42.9.0 NAME 'nisplusNetname' \
          DESC 'Secure RPC netname' \
          SINGLE-VALUE \
          SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )

dn: cn=schema
changetype: modify
add: objectclasses
objectclasses:    ( 1.3.6.1.4.1.42.2.27.5.42.42.10.0 NAME 'nisplusAuthName' \
          SUP top AUXILLIARY DESC 'NIS+ authentication identifiers' \
          MAY ( nisplusPrincipalName $ nisplusNetname ) )</pre><p>You now need to enable the <tt>cred.org_dir</tt> mapping to use the newly created <tt>nisplusNetname</tt> and <tt>nisplusPrincipalName</tt> attributes. The template mapping file, <tt>/var/nis/NIS+LDAPmapping.template</tt>, contains commented-out lines for this purpose. See the <tt>nisplusObjectDN</tt> and <tt>nisplusLDAPattributeFromColumn</tt>/ <tt>nisplusLDAPcolumnFromAttribute</tt> attribute values for the <tt>credlocal</tt>, <tt>creduser</tt>, and <tt>crednode</tt> database IDs. Once you have edited your mapping file to this effect, restart the NIS+ service. Do not forget to edit the <tt>/lib/svc/method/nisplus</tt> file to include the <tt>-m</tt> and <tt>-Y</tt> options, or use the <tt>svcprop</tt> command, as appropriate. See <a href="nisplus2ldap-2.html#nisplus2ldap-66">NIS+ to LDAP Tools and the Service Management Facility</a> for more information.Do not forget to add the <tt>-m</tt> option if your mapping file is not the default, and the <tt>-Y</tt> option if the <tt>rpc.nisd</tt> daemon should provide NIS (YP) emulation.</p><pre># <tt><b>svcadm restart network/rpc/nisplus:default</b></tt></pre><pre># <tt><b>pkill rpc.nisd</b></tt></pre></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nisplus2ldap-50.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nisplus2ldap-57.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

