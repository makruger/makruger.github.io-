<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>NIS-to-LDAP Service Overview - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nis2ldap-34.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nis2ldap-6.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">Part&nbsp;I&nbsp;About Naming and Directory Services</a></p>
<p class="toc level2"><a href="intro2ns-2.html">1.&nbsp;&nbsp;Naming and Directory Services (Overview)</a></p>
<p class="toc level2"><a href="a12swit-86415.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a></p>
<p class="toc level1 tocsp"><a href="dnsadmin-1.html">Part&nbsp;II&nbsp;DNS Setup and Administration</a></p>
<p class="toc level2"><a href="dnsref-1.html">3.&nbsp;&nbsp;DNS Setup and Administration (Reference)</a></p>
<p class="toc level1 tocsp"><a href="nissetup-1.html">Part&nbsp;III&nbsp;NIS Setup and Administration</a></p>
<p class="toc level2"><a href="anis1-25461.html">4.&nbsp;&nbsp;Network Information Service (NIS) (Overview)</a></p>
<p class="toc level2"><a href="cnis1-25208.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a></p>
<p class="toc level2"><a href="anis2-22217.html">6.&nbsp;&nbsp;Administering NIS (Tasks)</a></p>
<p class="toc level2"><a href="abtrbl-18694.html">7.&nbsp;&nbsp;NIS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="ldapsetup-1.html">Part&nbsp;IV&nbsp;LDAP Naming Services Setup and Administration</a></p>
<p class="toc level2"><a href="overview-1.html">8.&nbsp;&nbsp;Introduction to LDAP Naming Services (Overview/Reference)</a></p>
<p class="toc level2"><a href="ldapsecure-1.html">9.&nbsp;&nbsp;LDAP Basic Components and Concepts (Overview)</a></p>
<p class="toc level2"><a href="planldap-1.html">10.&nbsp;&nbsp;Planning Requirements for LDAP Naming Services (Tasks)</a></p>
<p class="toc level2"><a href="sundssetup-13.html">11.&nbsp;&nbsp;Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="clientsetup-1.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="setupproblems-1.html">13.&nbsp;&nbsp;LDAP Troubleshooting (Reference)</a></p>
<p class="toc level2"><a href="schemas-1.html">14.&nbsp;&nbsp;LDAP General Reference (Reference)</a></p>
<p class="toc level2"><a href="nis2ldap-34.html">15.&nbsp;&nbsp;Transitioning From NIS to LDAP (Overview/Tasks)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">NIS-to-LDAP Service Overview</a></p>
</div>
<p class="toc level3"><a href="nis2ldap-6.html">Transitioning From NIS to LDAP (Task Map)</a></p>
<p class="toc level3"><a href="nis2ldap-15.html">Prerequisites for the NIS-to-LDAP Transition</a></p>
<p class="toc level3"><a href="nis2ldap-2.html">Setting Up the NIS-to-LDAP Service</a></p>
<p class="toc level3"><a href="nis2ldap-16.html">NIS-to-LDAP Best Practices With Sun Java System Directory Server</a></p>
<p class="toc level3"><a href="nis2ldap-24.html">NIS-to-LDAP Restrictions</a></p>
<p class="toc level3"><a href="nis2ldap-58.html">NIS-to-LDAP Troubleshooting</a></p>
<p class="toc level3"><a href="nis2ldap-42.html">Reverting to NIS</a></p>
<p class="toc level2 tocsp"><a href="nisplus2ldap-1.html">16.&nbsp;&nbsp;Transitioning From NIS+ to LDAP</a></p>
<p class="toc level1 tocsp"><a href="ghnmu.html">Part&nbsp;V&nbsp;Active Directory Naming Service</a></p>
<p class="toc level2"><a href="ghnov.html">17.&nbsp;&nbsp;Setting Up Solaris Active Directory Clients</a></p>
<p class="toc level1 tocsp"><a href="whatsnew-1.html">A.&nbsp;&nbsp;Solaris 10 Software Updates to DNS, NIS, and LDAP</a></p>
<p class="toc level2"><a href="whatsnew-5.html">Service Management Facility Changes</a></p>
<p class="toc level2"><a href="whatsnew-2.html">DNS BIND</a></p>
<p class="toc level2"><a href="schemas-290.html"><tt>pam_ldap</tt> Changes</a></p>
<p class="toc level2"><a href="whatsnew-3.html">Documentation Errors</a></p>
<p class="toc level1 tocsp"><a href="aagloss-87604.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="nis2ldap-35"></a><h3>NIS-to-LDAP Service Overview</h3>
<p><a name="indexterm-544"></a><a name="indexterm-545"></a><a name="indexterm-546"></a><a name="indexterm-547"></a>The NIS&ndash;to&ndash;LDAP transition service (<b>N2L service</b>) replaces existing NIS daemons on the NIS master server
with NIS&ndash;to&ndash;LDAP transition daemons. The N2L service also creates an NIS&ndash;to&ndash;LDAP mapping file
on that server. The mapping file specifies the mapping between NIS map entries
and equivalent Directory Information Tree (DIT) entries in LDAP. An NIS master server
that has gone through this transition is referred to as an <b>N2L server</b>. The slave
servers do not have an <tt>NISLDAPmapping</tt> file, so they continue to function in
the usual manner. The slave servers periodically update their data from the N2L
server as if it were a regular NIS master.</p><p>The behavior of the N2L service is controlled by the <tt>ypserv</tt> and
<tt>NISLDAPmapping</tt> configuration files. A script, <tt>inityp2l</tt>, assists with the initial setup of these
configuration files. Once the N2L server has been established, you can maintain N2L
by directly editing the configuration files.</p><p>The N2L service supports the following:</p>
<ul><li><p>Import of NIS maps into the LDAP Directory Information Tree (DIT)</p></li>
<li><p>Client access to DIT information with the speed and extensibility of NIS</p></li></ul>
<p>In any naming system, only one source of information can be the
authoritative source. In traditional NIS, NIS sources are the authoritative information. When using the
N2L service, the source of authoritative data is the LDAP directory. The directory
is managed by using directory management tools, as described in <a href="ldapsecure-1.html">Chapter&nbsp;9, LDAP Basic Components and Concepts (Overview)</a>.</p><p>NIS sources are retained for emergency backup or backout only. After using the
N2L service, you can gradually phase out NIS clients. Eventually, all NIS clients
can be replaced by Solaris LDAP naming services clients.</p><p>Additional overview information is provided in the following subsections:</p>
<ul><li><p><a href="#nis2ldap-30">NIS-to-LDAP Audience Assumptions</a></p></li>
<li><p><a href="#nis2ldap-3">When Not to Use the NIS-to-LDAP Service</a></p></li>
<li><p><a href="#nis2ldap-36">Effects of the NIS-to-LDAP Service on Users</a></p></li>
<li><p><a href="#nis2ldap-12">NIS-to-LDAP Transition Terminology</a></p></li>
<li><p><a href="#nis2ldap-31">NIS-to-LDAP Commands, Files, and Maps</a></p></li>
<li><p><a href="#nis2ldap-5">Supported Standard Mappings</a></p></li></ul>


<a name="nis2ldap-48"></a><h4>NIS-to-LDAP Tools and the Service Management Facility</h4>
<a name="indexterm-548"></a><a name="indexterm-549"></a><a name="indexterm-550"></a><p>The NIS and LDAP services are managed by the Service Management Facility. Administrative
actions on these services, such as enabling, disabling, or restarting, can be performed
by using the <tt>svcadm</tt> command. You can query the status of services by
using the <tt>svcs</tt> command. For more information about using SMF with LDAP and
NIS, see <a href="clientsetup-95.html">LDAP and the Service Management Facility</a> and <a href="cnis1-55.html">NIS and the Service Management Facility</a>. For an overview of SMF, refer to <a href="http://docs.sun.com/doc/819-2379/hbrunlevels-25516?a=view">Chapter 16, Managing Services (Overview), in <i>System Administration Guide: Basic Administration</i></a>.
Also refer to the <a href="http://docs.sun.com/doc/819-2240/svcadm-1m?a=view"><tt>svcadm</tt>(1M)</a> and <a href="http://docs.sun.com/doc/819-2239/svcs-1?a=view"><tt>svcs</tt>(1)</a> man pages for more details.</p>

<a name="nis2ldap-30"></a><h4>NIS-to-LDAP Audience Assumptions</h4>
<p>You need to be familiar with NIS and LDAP concepts, terminology, and IDs
to perform the procedures in this chapter. For more information about the NIS
and LDAP naming services, see the following sections of this book.</p>
<ul><li><p><a href="anis1-25461.html">Chapter&nbsp;4, Network Information Service (NIS) (Overview)</a>, for an overview of NIS</p></li>
<li><p><a href="overview-1.html">Chapter&nbsp;8, Introduction to LDAP Naming Services (Overview/Reference)</a>, for an overview of LDAP</p></li></ul>


<a name="nis2ldap-3"></a><h4>When Not to Use the NIS-to-LDAP Service</h4>
<p><a name="indexterm-551"></a>Do not use the N2L service in these situations:</p>
<ul><li><p>In an environment where there is no plan to share data between NIS and LDAP naming services clients</p><p>In such an environment, an N2L server would serve as an excessively complex NIS master server.</p></li>
<li><p>In an environment where NIS maps are managed by tools that modify the NIS source files (other than <tt>yppasswd</tt>)</p><p>Regeneration of NIS sources from DIT maps is an imprecise task that requires manual checking of the resulting maps. Once the N2L service is used, regeneration of NIS sources is provided only for backout or reverting to NIS.</p></li>
<li><p>In an environment with no NIS clients</p><p>In such an environment, use Solaris LDAP naming services clients and their corresponding tools.</p></li></ul>


<a name="nis2ldap-36"></a><h4>Effects of the NIS-to-LDAP Service on Users</h4>
<p><a name="indexterm-552"></a><a name="indexterm-553"></a>Simply installing the files that are related to the N2L service does not
change the NIS server's default behavior. At installation, the administrator will see some
changes to NIS man pages and the addition of N2L helper scripts,
<tt>inityp2l</tt> and <tt>ypmap2src</tt>, on the servers. But as long as <tt>inityp2l</tt> is not
run or the N2L configuration files are not created manually on the NIS
server, the NIS components continue to start in traditional NIS mode and function
as usual.</p><p>After <tt>inityp2l</tt> is run, users see some changes in server and client behavior.
Following is a list of NIS and LDAP user types and a description
of what each type of user should notice after the N2L service is
deployed.</p><table><col width="26%"><col width="73%"><tr><th align="left" valign="top" scope="column"><p>User Type</p></th>
<th align="left" valign="top" scope="column"><p>Effect of N2L Service</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>NIS master server administrators</p></td>
<td align="left" valign="top" scope="row"><p>The NIS master server is
converted to an N2L server. The <tt>NISLDAPmapping</tt> and <tt>ypserv</tt> configuration files are
installed on the N2L server. After the N2L server is established, you can
use LDAP commands to administer your naming information. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>NIS slave server administrators</p></td>
<td align="left" valign="top" scope="row"><p>After the
N2L transition, an NIS slave server continues to run NIS in the usual
manner. The N2L server pushes updated NIS maps to the slave server when
<tt>yppush</tt> is called by <tt>ypmake</tt>. See the <a href="http://docs.sun.com/doc/819-2240/ypmake-1m?a=view"><tt>ypmake</tt>(1M)</a> man page.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>NIS clients</p></td>
<td align="left" valign="top" scope="row"><p>NIS read operations are
no different than traditional NIS. When a Solaris LDAP naming services client changes
information in the DIT, the information is copied into the NIS maps. The
copy operation is complete after a configurable timeout expires. Such behavior is similar
to the behavior of a normal NIS client when the client is connected
to an NIS slave server.</p><p>If an N2L server cannot bind to the
LDAP server for a read, the N2L server returns the information from its
own cached copy. Alternatively, the N2L server can return an internal server error.
You can configure the N2L server to respond either way. See the <a href="http://docs.sun.com/doc/819-2240/ypserv-1m?a=view"><tt>ypserv</tt>(1M)</a>
man page for more details.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>All users</p></td>
<td align="left" valign="top" scope="row"><p>When an NIS client makes a password
change request, the change is immediately visible on the N2L master server and
to native LDAP clients.</p><p>If you attempt to change a password on the
NIS client, and the LDAP server is unavailable, then the change is refused
and the N2L server returns an internal server error. This behavior prevents incorrect
information from being written into the cache.</p></td>
</tr>
</table>

<a name="nis2ldap-12"></a><h4>NIS-to-LDAP Transition Terminology</h4>
<a name="indexterm-554"></a><a name="indexterm-555"></a><p>The following terms are related to the implementation of the N2L service.</p><a name="nis2ldap-tbl-43"></a><h6>Table&nbsp;15-1 Terminology Related to the N2L Transition</h6><table><col width="19%"><col width="80%"><tr><th align="left" valign="top" scope="column"><p>Term</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>N2L
configuration files</p></td>
<td align="left" valign="top" scope="row"><p>The <tt>/var/yp/NISLDAPmapping</tt> and <tt>/var/yp/ypserv</tt> files that the <tt>ypserv</tt> daemon uses to
start the master server in N2L mode. See the <tt>NISLDAPmapping</tt>(4) and <tt>ypserv</tt>(4) man pages
for details.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>map</p></td>
<td align="left" valign="top" scope="row"><p>In the context of the N2L service, the term map is
used in two ways:</p>
<ul><li><p>To refer to a database file in which NIS stores a specific type of information</p></li>
<li><p>To describe the process of mapping NIS information to or from the LDAP DIT</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>mapping</p></td>
<td align="left" valign="top" scope="row"><p>The process of converting NIS entries to or from
LDAP DIT entries.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>mapping file</p></td>
<td align="left" valign="top" scope="row"><p>The <tt>NISLDAPmapping</tt> file that establishes how to map entries between
NIS and LDAP files.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>standard maps</p></td>
<td align="left" valign="top" scope="row"><p>Commonly used  NIS maps that are supported
by the N2L service without requiring manual modification to the mapping file. A
list of supported standard maps is provided in <a href="#nis2ldap-5">Supported Standard Mappings</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>nonstandard maps</p></td>
<td align="left" valign="top" scope="row"><p>Standard NIS maps that
are customized to use mappings between NIS and the LDAP DIT other than
the mappings identified in RFC 2307 or its successor.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>custom map</p></td>
<td align="left" valign="top" scope="row"><p>Any map that
is not a standard map and therefore requires manual modifications to the mapping
file when transitioning from NIS to LDAP.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>LDAP client</p></td>
<td align="left" valign="top" scope="row"><p>Any traditional LDAP client that
reads and writes to any LDAP server. A traditional LDAP client is a
system that reads and writes to any LDAP server. A Solaris LDAP naming
services client handles a customized subset of naming information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>LDAP naming services client</p></td>
<td align="left" valign="top" scope="row"><p>A Solaris
LDAP client that handles a customized subset of naming information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>N2L server</p></td>
<td align="left" valign="top" scope="row"><p>An NIS
master server that has been reconfigured as an N2L server by using the
N2L service. Reconfiguration includes replacing NIS daemons and adding new configuration files.</p></td>
</tr>
</table>

<a name="nis2ldap-31"></a><h4>NIS-to-LDAP Commands, Files, and Maps</h4>
<a name="indexterm-556"></a><a name="indexterm-557"></a><p>There are two utilities, two configuration files, and a mapping that are associated
with the N2L transition.</p><a name="nis2ldap-tbl-33"></a><h6>Table&nbsp;15-2 Descriptions of N2L Commands, Files, and Maps</h6><table><col width="28%"><col width="71%"><tr><th align="left" valign="top" scope="column"><p>Command/File/Map</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/lib/netsvc/yp/inityp2l</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-558"></a>A utility that assists with the creation of the
<tt>NISLDAPmapping</tt> and <tt>ypserv</tt> configuration files. This utility is not a general-purpose tool for
the management of these files. An advanced user can maintain the N2L configuration
files or create custom mappings by using a text editor to examine and
customize the <tt>inityp2l</tt> output. See the <a href="http://docs.sun.com/doc/819-2240/inityp2l-1m?a=view"><tt>inityp2l</tt>(1M)</a> man page.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/lib/netsvc/yp/ypmap2src</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-559"></a>A utility that converts standard NIS
maps to approximations of the equivalent NIS source files. The primary use for
<tt>ypmap2src</tt> is to convert from an N2L transition server to  traditional NIS.
See the <a href="http://docs.sun.com/doc/819-2240/ypmap2src-1m?a=view"><tt>ypmap2src</tt>(1M)</a> man page.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/var/yp/NISLDAPmapping</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-560"></a>A configuration file that specifies the mapping between
NIS map entries and equivalent Directory Information Tree (DIT) entries in LDAP. See the
<a href="http://docs.sun.com/doc/819-2251/nisldapmapping-4?a=view"><tt>NISLDAPmapping</tt>(4)</a> man page.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/var/yp/ypserv</tt></p></td>
<td align="left" valign="top" scope="row"><p><a name="indexterm-561"></a>A file that specifies configuration information for the NIS&ndash;to&ndash;LDAP transition daemons. See
the <a href="http://docs.sun.com/doc/819-2251/ypserv-4?a=view"><tt>ypserv</tt>(4)</a> man page.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ageing.byname</tt></p></td>
<td align="left" valign="top" scope="row"><p>A mapping used by <tt>yppasswdd</tt> to read and write password aging
information to the DIT when the NIS-to-LDAP transition is implemented.</p></td>
</tr>
</table>

<a name="nis2ldap-5"></a><h4>Supported Standard Mappings</h4>
<p><a name="indexterm-562"></a>By default, the N2L service supports mappings between the following list of maps
and RFC 2307, or its successors', LDAP entries. These standard maps do not
require manual modification to the mapping file. Any maps on your system that
are not in the following list are considered custom maps and require manual
modification.</p><p>The N2L service also supports automatic mapping of the <tt>auto.*</tt> maps. However, since
most <tt>auto.*</tt> file names and contents are specific to each network configuration, those
files are not specified in this list. The exceptions to this are the
<tt>auto.home</tt> and <tt>auto.master</tt> maps, which are supported as standard maps.</p><pre>audit_user
auth_attr
auto.home
auto.master
bootparams
ethers.byaddr ethers.byname
exec_attr
group.bygid group.byname group.adjunct.byname
hosts.byaddr hosts.byname
ipnodes.byaddr ipnodes.byname
mail.byaddr mail.aliases
netgroup netgroup.byprojid netgroup.byuser netgroup.byhost
netid.byname
netmasks.byaddr
networks.byaddr networks.byname
passwd.byname passwd.byuid passwd.adjunct.byname
printers.conf.byname
prof_attr
project.byname project.byprojectid
protocols.byname protocols.bynumber
publickey.byname
rpc.bynumber
services.byname services.byservicename
timezone.byname
user_attr</pre><p>During the NIS-to-LDAP transition, the <tt>yppasswdd</tt> daemon uses the N2L-specific map, <tt>ageing.byname</tt>, to
read and write password aging information to the DIT. If you are not
using password aging, then the <tt>ageing.byname</tt> mapping is ignored.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nis2ldap-34.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nis2ldap-6.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

