<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>NIS+ Entry Owner, Group, Access, and TTL - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nisplus2ldap-49.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nisplus2ldap-56.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">Part&nbsp;I&nbsp;About Naming and Directory Services</a></p>
<p class="toc level2"><a href="intro2ns-2.html">1.&nbsp;&nbsp;Naming and Directory Services (Overview)</a></p>
<p class="toc level2"><a href="a12swit-86415.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a></p>
<p class="toc level1 tocsp"><a href="dnsadmin-1.html">Part&nbsp;II&nbsp;DNS Setup and Administration</a></p>
<p class="toc level2"><a href="dnsref-1.html">3.&nbsp;&nbsp;DNS Setup and Administration (Reference)</a></p>
<p class="toc level1 tocsp"><a href="nissetup-1.html">Part&nbsp;III&nbsp;NIS Setup and Administration</a></p>
<p class="toc level2"><a href="anis1-25461.html">4.&nbsp;&nbsp;Network Information Service (NIS) (Overview)</a></p>
<p class="toc level2"><a href="cnis1-25208.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a></p>
<p class="toc level2"><a href="anis2-22217.html">6.&nbsp;&nbsp;Administering NIS (Tasks)</a></p>
<p class="toc level2"><a href="abtrbl-18694.html">7.&nbsp;&nbsp;NIS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="ldapsetup-1.html">Part&nbsp;IV&nbsp;LDAP Naming Services Setup and Administration</a></p>
<p class="toc level2"><a href="overview-1.html">8.&nbsp;&nbsp;Introduction to LDAP Naming Services (Overview/Reference)</a></p>
<p class="toc level2"><a href="ldapsecure-1.html">9.&nbsp;&nbsp;LDAP Basic Components and Concepts (Overview)</a></p>
<p class="toc level2"><a href="planldap-1.html">10.&nbsp;&nbsp;Planning Requirements for LDAP Naming Services (Tasks)</a></p>
<p class="toc level2"><a href="sundssetup-13.html">11.&nbsp;&nbsp;Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="clientsetup-1.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="setupproblems-1.html">13.&nbsp;&nbsp;LDAP Troubleshooting (Reference)</a></p>
<p class="toc level2"><a href="schemas-1.html">14.&nbsp;&nbsp;LDAP General Reference (Reference)</a></p>
<p class="toc level2"><a href="nis2ldap-34.html">15.&nbsp;&nbsp;Transitioning From NIS to LDAP (Overview/Tasks)</a></p>
<p class="toc level2"><a href="nisplus2ldap-1.html">16.&nbsp;&nbsp;Transitioning From NIS+ to LDAP</a></p>
<p class="toc level3"><a href="nisplus2ldap-2.html">NIS+ to LDAP Overview</a></p>
<p class="toc level3"><a href="nisplus2ldap-5.html">Getting Started With the NIS+ to LDAP Transition</a></p>
<p class="toc level3"><a href="nisplus2ldap-41.html">Masters and Replicas (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-43.html">The Directory Server (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-49.html">Mapping NIS+ Objects Other Than Table Entries</a></p>
<div class="onpage">
<p class="toc level3"><a href="">NIS+ Entry Owner, Group, Access, and TTL</a></p>
</div>
<p class="toc level3"><a href="nisplus2ldap-56.html">Principal Names and Netnames (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-57.html"><tt>client_info</tt> and <tt>timezone</tt> Tables (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-60.html">Adding New Object Mappings (NIS+ to LDAP)</a></p>
<p class="toc level3"><a href="nisplus2ldap-70.html">Storing Configuration Information in LDAP</a></p>
<p class="toc level1 tocsp"><a href="ghnmu.html">Part&nbsp;V&nbsp;Active Directory Naming Service</a></p>
<p class="toc level2"><a href="ghnov.html">17.&nbsp;&nbsp;Setting Up Solaris Active Directory Clients</a></p>
<p class="toc level1 tocsp"><a href="whatsnew-1.html">A.&nbsp;&nbsp;Solaris 10 Software Updates to DNS, NIS, and LDAP</a></p>
<p class="toc level2"><a href="whatsnew-5.html">Service Management Facility Changes</a></p>
<p class="toc level2"><a href="whatsnew-2.html">DNS BIND</a></p>
<p class="toc level2"><a href="schemas-290.html"><tt>pam_ldap</tt> Changes</a></p>
<p class="toc level2"><a href="whatsnew-3.html">Documentation Errors</a></p>
<p class="toc level1 tocsp"><a href="aagloss-87604.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="nisplus2ldap-50"></a><h3>NIS+ Entry Owner, Group, Access, and TTL</h3>
<p>When NIS+ table entries are created from LDAP data, the default behavior is
to initialize the entry object owner, group, access rights, and TTL using the
corresponding values from the table object in which the entry object lives. This
is normally sufficient, but there might be cases where these NIS+ entry attributes
must be established individually. An example of this would be a site that
did not use the <a href="http://docs.sun.com/doc/819-2240/rpc.nispasswdd-1m?a=view"><tt>rpc.nispasswdd</tt>(1M)</a> daemon. In order to allow individual users to
change their NIS+ passwords (and re-encrypt their Diffie-Hellman keys stored in the <tt>cred.org_dir</tt>
table), <tt>passwd.org_dir</tt> and <tt>cred.org_dir</tt> entries for the user should be owned by the
user, and have modify rights for the entry owner.</p><p>If you need to store table entry owner, group, access, or TTL
in LDAP for one or more NIS+ tables, you need to do the
following.</p>

<a name="nisplus2ldap-proc-51"></a><h4>How to Store Additional Entry Attributes in LDAP</h4><ol>
<li><a name="nisplus2ldap-step-52"></a><b>Consult your LDAP server documentation, and create the following new attributes and object
class. (LDIF data is suitable for <tt>ldapadd</tt>. Attribute and object class OIDs are
for illustration only.)</b><pre>dn: cn=schema
changetype: modify
add: attributetypes
attributetypes: ( 1.3.6.1.4.1.42.2.27.5.42.42.4.0 NAME 'nisplusEntryOwner' \
                DESC 'Opaque representation of NIS+ entry owner' \
                SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )
attributetypes:    ( 1.3.6.1.4.1.42.2.27.5.42.42.4.1 NAME 'nisplusEntryGroup' \
                DESC 'Opaque representation of NIS+ entry group' \
                SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )
attributetypes:    ( 1.3.6.1.4.1.42.2.27.5.42.42.4.2 NAME 'nisplusEntryAccess' \
                DESC 'Opaque representation of NIS+ entry access' \
                SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )
attributetypes:    ( 1.3.6.1.4.1.42.2.27.5.42.42.4.3 NAME 'nisplusEntryTtl' \
                DESC 'Opaque representation of NIS+ entry TTL' \
                SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )</pre><pre>dn: cn=schema
changetype: modify
add: objectclasses</pre><pre>objectclasses:(1.3.6.1.4.1.42.2.27.5.42.42.5.0 NAME 'nisplusEntryData'\
SUP top STRUCTURAL DESC 'NIS+ entry object non-column data'\</pre><pre>MUST ( cn ) MAY ( nisplusEntryOwner $ nisplusEntryGroup $\
nisplusEntryAccess $ nisplusEntryTtl ) )</pre></li>
<li><a name="nisplus2ldap-step-53"></a><b>Modify the <tt>nisplusLDAPobjectDN</tt> attribute value for the relevant table(s) so that the write
portion includes the newly created <tt>nisplusEntryData</tt> object class.</b><p>For example, for the <tt>passwd.org_dir</tt> table, assuming that you are using a mapping file
based on <tt>/var/nis/NIS+LDAPmapping.template</tt>, edit as follows.</p><pre>nisplusLDAPobjectDN    passwd:ou=People,?one?objectClass=shadowAccount,\

                objectClass=posixAccount:\
                ou=People,?one?objectClass=shadowAccount,\
                objectClass=posixAccount,\
                objectClass=account,objectClass=top</pre><p>Edit the attribute value as follows.</p><pre>nisplusLDAPobjectDN    passwd:ou=People,?one?objectClass=shadowAccount,\

                objectClass=posixAccount:\
                ou=People,?one?objectClass=shadowAccount,\
                objectClass=posixAccount,\
                objectClass=nisplusEntryData,\
                objectClass=account,objectClass=top</pre></li>
<li><a name="nisplus2ldap-step-54"></a><b>Edit the <tt>nisplusLDAPattributeFromColumn</tt> and <tt>nisplusLDAPcolumnFromAttribute</tt> attribute values to specify any desired subset of
owner, group, access, or TTL.</b><p>In Step 2, you created the LDAP attributes used to store these
values. For NIS+, there are predefined pseudo-column names called <tt>zo_owner</tt>, <tt>zo_group</tt>, <tt>zo_access</tt>, and
<tt>zo_ttl</tt>, respectively. For example, in order to store owner, group, and access for
<tt>passwd.org_dir</tt> entries in LDAP, modify the <tt>nisplusLDAPattributeFromColumn</tt> value from the following.</p><pre>nisplusLDAPattributeFromColumn \
        passwd:        dn=("uid=%s,", name), \
                cn=name, \
                uid=name, \
                userPassword=("{crypt$}%s", passwd), \
                uidNumber=uid, \
                gidNumber=gid, \
                gecos=gcos, \
                homeDirectory=home, \
                loginShell=shell, \
                (shadowLastChange,shadowMin,shadowMax, \
                 shadowWarning, shadowInactive,shadowExpire)=\
                    (shadow, ":")</pre><p>Edit to read as follows.</p><pre>nisplusLDAPattributeFromColumn \
        passwd:        dn=("uid=%s,", name), \
                cn=name, \
                uid=name, \
                userPassword=("{crypt$}%s", passwd), \
                uidNumber=uid, \
                gidNumber=gid, \
                gecos=gcos, \
                homeDirectory=home, \
                loginShell=shell, \
                (shadowLastChange,shadowMin,shadowMax, \
                 shadowWarning, shadowInactive,shadowExpire)=\
                    (shadow, ":"), \
                nisplusEntryOwner=zo_owner, \
                nisplusEntryGroup=zo_group, \
                nisplusEntryAccess=zo_access</pre><p>Similarly, to set NIS+ entry owner, group, and access from LDAP data for
the <tt>passwd.org_dir</tt> table, modify the following.</p><pre>nisplusLDAPcolumnFromAttribute \
        passwd:        name=uid, \
                ("{crypt$}%s", passwd)=userPassword, \
                uid=uidNumber, \
                gid=gidNumber, \
                gcos=gecos, \
                home=homeDirectory, \
                shell=loginShell, \
                shadow=("%s:%s:%s:%s:%s:%s", \
                    shadowLastChange, \
                    shadowMin, \
                    shadowMax, \
                    shadowWarning, \
                    shadowInactive, \
                    shadowExpire)</pre><p>Edit to read as follows.</p><pre>nisplusLDAPcolumnFromAttribute \
        passwd:        name=uid, \
                ("crypt$%s", passwd)=authPassword, \
                uid=uidNumber, \
                gid=gidNumber, \
                gcos=gecos, \
                home=homeDirectory, \
                shell=loginShell, \
                shadow=("%s:%s:%s:%s:%s:%s", \
                    shadowLastChange, \
                    shadowMin, \
                    shadowMax, \
                    shadowWarning, \
                    shadowInactive, \
                    shadowExpire), \
                zo_owner=nisplusEntryOwner, \
                zo_group=nisplusEntryGroup, \
                zo_access=nisplusEntryAccess</pre></li>
<li><a name="nisplus2ldap-step-5"></a><b>Upload owner, group, access, and/or TTL entry data to LDAP.</b><p>See <a href="nisplus2ldap-5.html#nisplus2ldap-proc-22">How to Convert All NIS+ Data to LDAP in One Operation</a> for more information.</p></li>
<li><a name="nisplus2ldap-step-55"></a><b>Restart the NIS+ service in order to make the mapping change take effect.</b><pre># <tt><b>svcadm restart network/rpc/nisplus:default</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="nisplus2ldap-49.html">Previous</a>
             </td>
             <td align="right">
                 <a href="nisplus2ldap-56.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

