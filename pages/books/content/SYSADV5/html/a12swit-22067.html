<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>The nsswitch.conf Template Files - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="a12swit-89620.html">Previous</a>
             </td>
             <td align="right">
                 <a href="c8switch-18904.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">Part&nbsp;I&nbsp;About Naming and Directory Services</a></p>
<p class="toc level2"><a href="intro2ns-2.html">1.&nbsp;&nbsp;Naming and Directory Services (Overview)</a></p>
<p class="toc level2"><a href="a12swit-86415.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a></p>
<p class="toc level3"><a href="a12swit-89620.html">About the Name Service Switch</a></p>
<div class="onpage">
<p class="toc level3"><a href="">The <tt>nsswitch.conf</tt> Template Files</a></p>
</div>
<p class="toc level3"><a href="c8switch-18904.html">Selecting a Different Configuration File</a></p>
<p class="toc level3"><a href="a12swit-66520.html">DNS and Internet Access</a></p>
<p class="toc level3"><a href="a12swit-7.html">IPv6 and Solaris Naming Services</a></p>
<p class="toc level3"><a href="a12swit-11308.html">Ensuring Compatibility With +/- Syntax</a></p>
<p class="toc level3"><a href="a12swit-27155.html">The Switch File and Password Information</a></p>
<p class="toc level1 tocsp"><a href="dnsadmin-1.html">Part&nbsp;II&nbsp;DNS Setup and Administration</a></p>
<p class="toc level2"><a href="dnsref-1.html">3.&nbsp;&nbsp;DNS Setup and Administration (Reference)</a></p>
<p class="toc level1 tocsp"><a href="nissetup-1.html">Part&nbsp;III&nbsp;NIS Setup and Administration</a></p>
<p class="toc level2"><a href="anis1-25461.html">4.&nbsp;&nbsp;Network Information Service (NIS) (Overview)</a></p>
<p class="toc level2"><a href="cnis1-25208.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a></p>
<p class="toc level2"><a href="anis2-22217.html">6.&nbsp;&nbsp;Administering NIS (Tasks)</a></p>
<p class="toc level2"><a href="abtrbl-18694.html">7.&nbsp;&nbsp;NIS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="ldapsetup-1.html">Part&nbsp;IV&nbsp;LDAP Naming Services Setup and Administration</a></p>
<p class="toc level2"><a href="overview-1.html">8.&nbsp;&nbsp;Introduction to LDAP Naming Services (Overview/Reference)</a></p>
<p class="toc level2"><a href="ldapsecure-1.html">9.&nbsp;&nbsp;LDAP Basic Components and Concepts (Overview)</a></p>
<p class="toc level2"><a href="planldap-1.html">10.&nbsp;&nbsp;Planning Requirements for LDAP Naming Services (Tasks)</a></p>
<p class="toc level2"><a href="sundssetup-13.html">11.&nbsp;&nbsp;Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="clientsetup-1.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="setupproblems-1.html">13.&nbsp;&nbsp;LDAP Troubleshooting (Reference)</a></p>
<p class="toc level2"><a href="schemas-1.html">14.&nbsp;&nbsp;LDAP General Reference (Reference)</a></p>
<p class="toc level2"><a href="nis2ldap-34.html">15.&nbsp;&nbsp;Transitioning From NIS to LDAP (Overview/Tasks)</a></p>
<p class="toc level2"><a href="nisplus2ldap-1.html">16.&nbsp;&nbsp;Transitioning From NIS+ to LDAP</a></p>
<p class="toc level1 tocsp"><a href="ghnmu.html">Part&nbsp;V&nbsp;Active Directory Naming Service</a></p>
<p class="toc level2"><a href="ghnov.html">17.&nbsp;&nbsp;Setting Up Solaris Active Directory Clients</a></p>
<p class="toc level1 tocsp"><a href="whatsnew-1.html">A.&nbsp;&nbsp;Solaris 10 Software Updates to DNS, NIS, and LDAP</a></p>
<p class="toc level2"><a href="whatsnew-5.html">Service Management Facility Changes</a></p>
<p class="toc level2"><a href="whatsnew-2.html">DNS BIND</a></p>
<p class="toc level2"><a href="schemas-290.html"><tt>pam_ldap</tt> Changes</a></p>
<p class="toc level2"><a href="whatsnew-3.html">Documentation Errors</a></p>
<p class="toc level1 tocsp"><a href="aagloss-87604.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="a12swit-22067"></a><h3>The <tt>nsswitch.conf</tt> Template Files</h3>
<a name="indexterm-54"></a><p>Four switch template files are provided with the Solaris system to accommodate different
naming services. Each file provides a different default set of information sources.</p><p>The four template files are the following.</p>
<ul><li><p><a name="indexterm-55"></a><b>LDAP template file</b>. The <tt>nsswitch.ldap</tt> configuration file specifies the LDAP directory as the primary source of information for the machine.</p>
<hr><p><b>Note - </b>In order to use LDAP naming services, you must also properly configure all LDAP client machines, in addition to modifying the <tt>nsswitch.conf</tt>. See <a href="clientsetup-1.html">Chapter&nbsp;12, Setting Up LDAP Clients (Tasks)</a> for more information.</p>
<hr>
</li>
<li><p><a name="indexterm-56"></a><b>NIS+ template file</b>. The <tt>nsswitch.nisplus</tt> configuration file specifies NIS+ as the primary source for all information except <tt>passwd</tt>, <tt>group</tt>, <tt>automount</tt>, and <tt>aliases</tt>. For those four files, the primary source is local <tt>/etc</tt> files. The secondary source is an NIS+ table. The <tt>[NOTFOUND=return]</tt> search criterion instructs the switch to stop searching the NIS+ tables if the switch gets a &ldquo;No such entry&rdquo; message. The switch searches through local files only if the NIS+ server is unavailable.</p></li>
<li><p><a name="indexterm-57"></a><b>NIS template file</b>. The <tt>nsswitch.nis</tt> configuration file is almost identical to the NIS+ configuration file, except that NIS file specifies NIS maps in place of NIS+ tables. Because the search order for passwd and group is <tt>files nis</tt>, you don't need to place the + entry in the <tt>/etc/passwd</tt> and <tt>/etc/group</tt> files.</p></li>
<li><p><a name="indexterm-58"></a><b>Files template file</b>. The <tt>nsswitch.files</tt> configuration file specifies local <tt>/etc</tt> files as the only source of information for the machine. There is no &ldquo;files&rdquo; source for <tt>netgroup</tt>, so the client does not use that entry in the switch file.</p></li></ul>
<p>Copy the template file that most closely meets your requirements to the <tt>nsswitch.conf</tt>
configuration file and then modify the file as needed.</p><p>For example, to use the LDAP template file, you would type the
following command.</p><pre>mymachine# <tt><b>cp /etc/nsswitch.ldap /etc/nsswitch.conf</b></tt></pre>

<a name="a12swit-11"></a><h4>The Default Switch Template Files</h4>
<a name="indexterm-59"></a><p>The following four switch files are supplied with the Solaris product.</p><a name="a12swit-ex-7"></a><h6>Example&nbsp;2-1 NIS+ Switch File Template: <tt>nsswitch.nisplus</tt></h6><pre>#
#
# /etc/nsswitch.nisplus:
#
#
# An example file that could be copied over to /etc/nsswitch.conf;
# it uses NIS+ (NIS Version 3) in conjunction with files.
#
# "hosts:" and "services:" in this file are used only if the
# /etc/netconfig file has a "-" for nametoaddr_libs of "inet"
# transports.
 
# the following two lines obviate the "+" entry in /etc/passwd 
# and /etc/group.
passwd: files nisplus
group: files nisplus
# consult /etc "files" only if nisplus is down. 
hosts: nisplus [NOTFOUND=return] files
# Uncomment the following line, and comment out the above, to use 
# both DNS and NIS+. You must also set up the /etc/resolv.conf 
# file for DNS name server lookup. See resolv.conf(4).
# hosts: nisplus dns [NOTFOUND=return] files
services: nisplus [NOTFOUND=return] files
networks: nisplus [NOTFOUND=return] files
protocols: nisplus [NOTFOUND=return] files
rpc: nisplus [NOTFOUND=return] files
ethers: nisplus [NOTFOUND=return] files
netmasks: nisplus [NOTFOUND=return] files    
bootparams: nisplus [NOTFOUND=return] files
publickey: nisplus
netgroup: nisplus
automount: files nisplus
aliases: files nisplus
sendmailvars: files nisplus</pre>
<hr><p><b>Note - </b>For the <tt>publickey</tt> entry, the <tt>nisplus</tt> value must be first in the list
of values. For example, <tt>publickey: nisplus files</tt> is the correct entry for an <tt>nsswitch.conf</tt>
file that multiple NIS+ domains consult.</p>
<hr>
<a name="a12swit-ex-8"></a><h6>Example&nbsp;2-2 NIS Switch File Template</h6><pre>#
# /etc/nsswitch.nis:
#
# An example file that could be copied over to /etc/nsswitch.conf;
# it uses NIS (YP) in conjunction with files.
#
# "hosts:" and "services:" in this file are used only if the
# /etc/netconfig file has a "-" for nametoaddr_libs of "inet"
# transports.
#
# the following two lines obviate the "+" entry in /etc/passwd
# and /etc/group.
passwd: files nis
group: files nis
# consult /etc "files" only if nis is down. 
hosts: nis [NOTFOUND=return] files
networks: nis [NOTFOUND=return] files
protocols: nis [NOTFOUND=return] files
rpc: nis [NOTFOUND=return] files
ethers: nis [NOTFOUND=return] files
netmasks: nis [NOTFOUND=return] files    
bootparams: nis [NOTFOUND=return] files
publickey: nis [NOTFOUND=return] files
netgroup: nis
automount: files nis
aliases: files nis
# for efficient getservbyname() avoid nis
services: files nis
sendmailvars: files</pre><a name="a12swit-ex-2"></a><h6>Example&nbsp;2-3 Files Switch File Template</h6><pre>#
# /etc/nsswitch.files:
#
# An example file that could be copied over to /etc/nsswitch.conf;
# it does not use any naming service.
#
# "hosts:" and "services:" in this file are used only if the
# /etc/netconfig file has a "-" for nametoaddr_libs of "inet"
# transports.
passwd: files
group: files
hosts: files
networks: files
protocols: files
rpc: files
ethers: files
netmasks: files    
bootparams: files
publickey: files
# At present there isn't a 'files' back end for netgroup;
# the system will figure it out pretty quickly, and will notuse
# netgroups at all.
netgroup: files
automount: files
aliases: files
services: files
sendmailvars: files</pre><a name="a12swit-ex-10"></a><h6>Example&nbsp;2-4 LDAP Switch File Template</h6><pre>#
# /etc/nsswitch.ldap:
#
# An example file that could be copied over to /etc/nsswitch.conf; it
# uses LDAP in conjunction with files.
#
# "hosts:" and "services:" in this file are used only if the
# /etc/netconfig file has a "-" for nametoaddr_libs of "inet" transports.

# the following two lines obviate the "+" entry in /etc/passwd 
and /etc/group.
passwd:     files ldap
group:      files ldap

hosts:      ldap [NOTFOUND=return] files

networks:   ldap [NOTFOUND=return] files
protocols:  ldap [NOTFOUND=return] files
rpc:        ldap [NOTFOUND=return] files
ethers:     ldap [NOTFOUND=return] files
netmasks:   ldap [NOTFOUND=return] files
bootparams: ldap [NOTFOUND=return] files
publickey:  ldap [NOTFOUND=return] files

netgroup:   ldap

automount:  files ldap
aliases:    files ldap

# for efficient getservbyname() avoid ldap
services:   files ldap
sendmailvars:   files</pre>

<a name="a12swit-12"></a><h4>The <tt>nsswitch.conf</tt> File</h4>
<a name="indexterm-60"></a><p>The default <tt>nsswitch.conf</tt> file that is installed with the Solaris software is determined
by which naming service you select during the installation process. Each line identifies
a particular type of network information, such as host, password, and group, along
with the information source, such as NIS+ tables, NIS maps, the DNS hosts
table, or local  <tt>/etc</tt>. When you chose a naming service, the
switch template file for that service is copied to create the new <tt>nsswitch.conf</tt>
file. For example, if you choose NIS+, the <tt>nsswitch.nisplus</tt> file is copied to create
a new <tt>nsswitch.conf</tt> file.</p><p><a name="indexterm-61"></a><a name="indexterm-62"></a>An <tt>nsswitch.conf</tt> file is automatically loaded into every machine's <tt>/etc</tt> directory by
the Solaris 9 release software, along with the following alternate (template) versions.</p>
<ul><li><p><a name="indexterm-63"></a><a name="indexterm-64"></a><tt>/etc/nsswitch.nisplus</tt></p></li>
<li><p><a name="indexterm-65"></a><a name="indexterm-66"></a><tt>/etc/nsswitch.nis</tt></p></li>
<li><p><a name="indexterm-67"></a><a name="indexterm-68"></a><tt>/etc/nsswitch.files</tt></p></li>
<li><p><a name="indexterm-69"></a><a name="indexterm-70"></a><tt>/etc/nsswitch.ldap</tt></p></li></ul>
<p><a name="indexterm-71"></a>These alternate template files contain the default switch configurations used by the NIS+
and NIS services, local files, and LDAP. No default file is provided for
DNS, but you can edit any of these files to use DNS.
When the Solaris software is first installed on a machine, the installer selects the
machine's default naming service. During installation, the corresponding template file is copied to
<tt>/etc/nsswitch.conf</tt>. For example, for a machine client using  NIS+, the installation process
copies <tt>nsswitch.nisplus</tt>  to <tt>nsswitch.conf</tt>.</p><p>If your network is connected to the Internet and users must access
Internet hosts using DNS, you must enable DNS forwarding.</p><p>Unless you have an unusual namespace, the default template file as copied to
<tt>nsswitch.conf</tt> should be sufficient for normal operation.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="a12swit-89620.html">Previous</a>
             </td>
             <td align="right">
                 <a href="c8switch-18904.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

