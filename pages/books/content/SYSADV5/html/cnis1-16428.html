<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Setting Up NIS Slave Servers - System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2009-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="cnis1-37475.html">Previous</a>
             </td>
             <td align="right">
                 <a href="cnis1-19866.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="intro-1.html">Part&nbsp;I&nbsp;About Naming and Directory Services</a></p>
<p class="toc level2"><a href="intro2ns-2.html">1.&nbsp;&nbsp;Naming and Directory Services (Overview)</a></p>
<p class="toc level2"><a href="a12swit-86415.html">2.&nbsp;&nbsp;The Name Service Switch (Overview)</a></p>
<p class="toc level1 tocsp"><a href="dnsadmin-1.html">Part&nbsp;II&nbsp;DNS Setup and Administration</a></p>
<p class="toc level2"><a href="dnsref-1.html">3.&nbsp;&nbsp;DNS Setup and Administration (Reference)</a></p>
<p class="toc level1 tocsp"><a href="nissetup-1.html">Part&nbsp;III&nbsp;NIS Setup and Administration</a></p>
<p class="toc level2"><a href="anis1-25461.html">4.&nbsp;&nbsp;Network Information Service (NIS) (Overview)</a></p>
<p class="toc level2"><a href="cnis1-25208.html">5.&nbsp;&nbsp;Setting Up and Configuring NIS Service</a></p>
<p class="toc level3"><a href="cnis1-49.html">Configuring NIS Task Map</a></p>
<p class="toc level3"><a href="cnis1-35918.html">Before You Begin Configuring NIS</a></p>
<p class="toc level3"><a href="cnis1-55.html">NIS and the Service Management Facility</a></p>
<p class="toc level3"><a href="cnis1-32365.html">Planning Your NIS Domain</a></p>
<p class="toc level3"><a href="cnis1-21774.html">Preparing the Master Server</a></p>
<p class="toc level3"><a href="cnis1-37475.html">Starting and Stopping NIS Service on the Master Server</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Setting Up NIS Slave Servers</a></p>
</div>
<p class="toc level3"><a href="cnis1-19866.html">Setting Up NIS Clients</a></p>
<p class="toc level2 tocsp"><a href="anis2-22217.html">6.&nbsp;&nbsp;Administering NIS (Tasks)</a></p>
<p class="toc level2"><a href="abtrbl-18694.html">7.&nbsp;&nbsp;NIS Troubleshooting</a></p>
<p class="toc level1 tocsp"><a href="ldapsetup-1.html">Part&nbsp;IV&nbsp;LDAP Naming Services Setup and Administration</a></p>
<p class="toc level2"><a href="overview-1.html">8.&nbsp;&nbsp;Introduction to LDAP Naming Services (Overview/Reference)</a></p>
<p class="toc level2"><a href="ldapsecure-1.html">9.&nbsp;&nbsp;LDAP Basic Components and Concepts (Overview)</a></p>
<p class="toc level2"><a href="planldap-1.html">10.&nbsp;&nbsp;Planning Requirements for LDAP Naming Services (Tasks)</a></p>
<p class="toc level2"><a href="sundssetup-13.html">11.&nbsp;&nbsp;Setting Up Sun Java System Directory Server With LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="clientsetup-1.html">12.&nbsp;&nbsp;Setting Up LDAP Clients (Tasks)</a></p>
<p class="toc level2"><a href="setupproblems-1.html">13.&nbsp;&nbsp;LDAP Troubleshooting (Reference)</a></p>
<p class="toc level2"><a href="schemas-1.html">14.&nbsp;&nbsp;LDAP General Reference (Reference)</a></p>
<p class="toc level2"><a href="nis2ldap-34.html">15.&nbsp;&nbsp;Transitioning From NIS to LDAP (Overview/Tasks)</a></p>
<p class="toc level2"><a href="nisplus2ldap-1.html">16.&nbsp;&nbsp;Transitioning From NIS+ to LDAP</a></p>
<p class="toc level1 tocsp"><a href="ghnmu.html">Part&nbsp;V&nbsp;Active Directory Naming Service</a></p>
<p class="toc level2"><a href="ghnov.html">17.&nbsp;&nbsp;Setting Up Solaris Active Directory Clients</a></p>
<p class="toc level1 tocsp"><a href="whatsnew-1.html">A.&nbsp;&nbsp;Solaris 10 Software Updates to DNS, NIS, and LDAP</a></p>
<p class="toc level2"><a href="whatsnew-5.html">Service Management Facility Changes</a></p>
<p class="toc level2"><a href="whatsnew-2.html">DNS BIND</a></p>
<p class="toc level2"><a href="schemas-290.html"><tt>pam_ldap</tt> Changes</a></p>
<p class="toc level2"><a href="whatsnew-3.html">Documentation Errors</a></p>
<p class="toc level1 tocsp"><a href="aagloss-87604.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="cnis1-16428"></a><h3>Setting Up NIS Slave Servers</h3>
<a name="indexterm-286"></a><a name="indexterm-287"></a><a name="indexterm-288"></a><p>Your network can have one or more slave servers. Having slave servers ensures
the continuity of NIS services when the master server is not available.</p>

<a name="cnis1-27"></a><h4>Preparing a Slave Server</h4>
<p><a name="indexterm-289"></a><a name="indexterm-290"></a>Before actually running <tt>ypinit</tt> to create the slave servers, you should run the
<tt>domainname</tt> command on each NIS slave to make sure the domain name is
consistent with the master server.</p>
<hr><p><b>Note - </b>Domain names are case-sensitive.</p>
<hr>
<p><a name="indexterm-291"></a>Make sure that the network is working properly before you configure an NIS
slave server. In particular, check to be sure you can use <tt>rcp</tt> to send
files from the master NIS server to NIS slaves. </p>

<a name="cnis1-28"></a><h4>Setting Up a Slave Server</h4>
<a name="indexterm-292"></a><a name="indexterm-293"></a><a name="indexterm-294"></a><a name="indexterm-295"></a><p>The following procedure shows how to set up a slave server.</p>

<a name="cnis1-proc-29"></a><h5>How to Set Up a Slave Server</h5>
<ol>
<li><a name="cnis1-step-2"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-1?a=view">Chapter 9, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="cnis1-step-30"></a><b><a name="indexterm-296"></a><a name="indexterm-297"></a>Edit the <tt>/etc/hosts</tt> or <tt>/etc/inet/ipnodes</tt> file on the slave server to add
the name and IP addresses of all the other NIS servers.</b></li>
<li><a name="cnis1-step-31"></a><b><a name="indexterm-298"></a>Change directory to <tt>/var/yp</tt> on the slave server.</b>
<hr><p><b>Note - </b>You must first configure the new slave server as an NIS client so
that it can get the NIS maps from the master for the
first time. See <a href="cnis1-19866.html">Setting Up NIS Clients</a> for details.</p>
<hr>
</li>
<li><a name="cnis1-step-32"></a><b>Initialize the slave server as a client.</b><pre># <tt><b>/usr/sbin/ypinit -c</b></tt></pre><p>The <tt>ypinit</tt> command prompts you for a list of NIS servers. Enter the
name of the local slave you are working on first, then the master
server, followed by the other NIS slave servers in your domain in order
from the physically closest to the furthest in network terms. </p></li>
<li><a name="cnis1-step-33"></a><b>Determine if the NIS client is running, then start the client service as
needed.</b><pre># <tt><b>svcs network/nis/client</b></tt>
STATE          STIME     FMRI
online         20:32:56  svc:/network/nis/client:default</pre><p>If <tt>svc:/network/nis/client</tt> is displayed with an <tt>online</tt> state, then NIS is running.
If the service state is disabled, then NIS is not running.</p><ol style="list-style-type: lower-alpha">
				 
<li><b>If the NIS client is running, restart the client service.</b><pre># <tt><b>svcadm restart network/nis/client</b></tt></pre></li>
<li><b>If the NIS client is not running, start the client service.</b><pre># <tt><b>svcadm enable network/nis/client</b></tt></pre></li></ol></li>
<li><a name="cnis1-step-34"></a><b>If NIS is running, stop and restart the service.</b><pre># <tt><b>/usr/lib/netsvc/yp/ypstop</b></tt></pre></li>
<li><a name="cnis1-step-35"></a><b>Type the following to restart <tt>ypbind</tt>.</b><pre># <tt><b>/usr/lib/netsvc/yp/ypstart</b></tt></pre></li>
<li><a name="cnis1-step-36"></a><b>Initialize this machine as a slave.</b><pre># <tt><b>/usr/sbin/ypinit</b></tt> <tt>-s</tt> <tt><b></tt><i>master</i><tt></b></tt></pre><p>Where <i>master</i> is the machine name of the existing NIS master server.</p><p>Repeat the procedures described in this section for each machine you want configured
as an NIS slave server.</p></li></ol>

<a name="cnis1-proc-51"></a><h5>How to Start NIS on a Slave Server</h5>
<p>The following procedure shows how to start NIS on a slave server.</p><ol>
<li><a name="cnis1-step-54"></a><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-1?a=view">Chapter 9, Using Role-Based Access Control (Tasks), in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="cnis1-step-52"></a><b>Stop the client service and start all NIS server processes.</b><pre># <tt><b>svcadm disable network/nis/client</b></tt>
# <tt><b>svcadm enable network/nis/server</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="cnis1-37475.html">Previous</a>
             </td>
             <td align="right">
                 <a href="cnis1-19866.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

