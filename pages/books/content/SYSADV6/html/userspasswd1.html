<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Kerberos Password Management - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="user-8.html">Previous</a>
             </td>
             <td align="right">
                 <a href="userseamsapp1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level3"><a href="user-8.html">Kerberos Ticket Management</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Kerberos Password Management</a></p>
</div>
<p class="toc level3"><a href="userseamsapp1.html">Kerberos User Commands</a></p>
<p class="toc level2 tocsp"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="userspasswd1"></a><h3>Kerberos Password Management</h3>
<a name="indexterm-2825"></a><a name="indexterm-2826"></a><a name="indexterm-2827"></a><a name="indexterm-2828"></a><p>With the Kerberos service configured, you now have two passwords: your regular Solaris
password and a Kerberos password. You can make both passwords the same, or
they can be different.  </p>

<a name="userspasswdadvice1"></a><h4>Advice on Choosing a Password</h4>
<a name="indexterm-2829"></a><a name="indexterm-2830"></a><p>Your password can include almost any character that you can type. The main
exceptions are the Control keys and the Return key. A good password
is a password that you can remember readily, but no one else can
easily guess. Examples of bad passwords include the following:</p>
<ul><li><p>Words that can be found in a dictionary</p></li>
<li><p>Any common or popular name</p></li>
<li><p>The name of a famous person or character</p></li>
<li><p>Your name or user name in any form (for example: your name spelled backward, repeated twice, and so forth)</p></li>
<li><p>A spouse's name, child's name, or pet's name</p></li>
<li><p>Your birth date or a relative's birth date</p></li>
<li><p>Your social security number, driver's license number, passport number, or other similar identifying number</p></li>
<li><p>Any sample password that appears in this manual or any other manual</p></li></ul>
<p>A good password is at least eight characters long. Moreover, a password should
include a mix of characters, such as uppercase and lowercase letters, numbers, and
punctuation marks. Examples of passwords that would be good if they didn't appear
in this manual include the following:  </p>
<ul><li><p>Acronyms, such as &ldquo;I2LMHinSF&rdquo; (which is recalled as &ldquo;I too left my heart in San Francisco&rdquo;) </p></li>
<li><p>Easy-to-pronounce nonsense words, such as &ldquo;WumpaBun&rdquo; or &ldquo;WangDangdoodle!&rdquo;</p></li>
<li><p>Deliberately misspelled phrases, such as &ldquo;6o'cluck&rdquo; or &ldquo;RrriotGrrrlsRrrule!&rdquo;</p></li></ul>

<hr><p><b>Caution - </b>Don't use these examples. Passwords that appear in manuals are the first passwords
that an intruder will try. </p>
<hr>


<a name="userschangepasswd1"></a><h4>Changing Your Password</h4>
<p>If PAM is properly configured, you can change your Kerberos password in two
ways:</p>
<ul><li><p><a name="indexterm-2831"></a><a name="indexterm-2832"></a><a name="indexterm-2833"></a>With the usual UNIX <tt>passwd</tt> command. With the Kerberos service configured, the Solaris <tt>passwd</tt> command also automatically prompts for a new Kerberos password.</p><p>The advantage of using <tt>passwd</tt> instead of <tt>kpasswd</tt> is that you can set both UNIX and Kerberos passwords at the same time. However, you generally do not <b>have</b> to change both passwords with <tt>passwd</tt>. Often, you can change only your UNIX password and leave the Kerberos password untouched, or vice-versa.</p>
<hr><p><b>Note - </b>The behavior of <tt>passwd</tt> depends on how the PAM module is configured. You might be required to change both passwords in some configurations. For some sites, the UNIX password must be changed, while other sites require the Kerberos password to change.</p>
<hr>
</li>
<li><p><a name="indexterm-2834"></a><a name="indexterm-2835"></a><a name="indexterm-2836"></a>With the <tt>kpasswd</tt> command. <tt>kpasswd</tt> is very similar to <tt>passwd</tt>. One difference is that <tt>kpasswd</tt> changes only Kerberos passwords. You must use <tt>passwd</tt> if you want to change your UNIX password. </p><p>Another difference is that <tt>kpasswd</tt> can change a password for a Kerberos principal that is not a valid UNIX user. For example, <tt>david/admin</tt> is a Kerberos principal, but not an actual UNIX user, so you must use <tt>kpasswd</tt> instead of <tt>passwd</tt>.</p></li></ul>
<p>After you change your password, it takes some time for the change
to propagate through a system (especially over a large network). Depending on how your
system is set up, this delay might take anywhere from a few
minutes to an hour or more. If you need to get new Kerberos
tickets shortly after you change your password, try the new password first. If
the new password doesn't work, try again using the old password.  
</p><p><a name="indexterm-2837"></a><a name="indexterm-2838"></a>Kerberos V5 protocol enables system administrators to set criteria about allowable passwords for
each user. Such criteria is defined by the <b>policy</b> set for each
user (or by a default policy). See <a href="aadmin-68.html">Administering Kerberos Policies</a> for more on policies.</p><p><a name="indexterm-2839"></a><a name="indexterm-2840"></a>For example, suppose that user <tt>jennifer</tt>'s policy (call it <tt>jenpol</tt>) mandates that passwords
be at least eight letters long and include a mix of at least
two types of characters. <tt>kpasswd</tt> will therefore reject an attempt to use
&ldquo;sloth&rdquo; as a password.</p><pre>% <tt><b>kpasswd</b></tt>
kpasswd: Changing password for jennifer@ENG.EXAMPLE.COM.
Old password:   &lt;Jennifer types her existing password&gt;
kpasswd: jennifer@ENG.EXAMPLE.COM's password is controlled by
the policy jenpol
which requires a minimum of 8 characters from at least 2 classes 
(the five classes are lowercase, uppercase, numbers, punctuation,
and all other characters).
New password: &lt;Jennifer types 'sloth'&gt;
New password (again):  &lt;Jennifer re-types 'sloth'&gt;
kpasswd: New password is too short.
Please choose a password which is at least 4 characters long.</pre><p>Here, <tt>jennifer</tt> uses &ldquo;slothrop49&rdquo; as a password. &ldquo;slothrop49&rdquo; meets the criteria, because it
is over eight letters long and contains two different types of characters (numbers and
lowercase letters).</p><pre>% <tt><b>kpasswd</b></tt>
kpasswd: Changing password for jennifer@ENG.EXAMPLE.COM.
Old password:  &lt;Jennifer types her existing password&gt;
kpasswd: jennifer@ENG.EXAMPLE.COM's password is controlled by
the policy jenpol
which requires a minimum of 8 characters from at least 2 classes 
(the five classes are lowercase, uppercase, numbers, punctuation,
and all other characters).
New password:  &lt;Jennifer types 'slothrop49'&gt;
New password (again):  &lt;Jennifer re-types 'slothrop49'&gt;
Kerberos password changed.</pre><a name="user-67"></a><h6>Example&nbsp;26-3 Changing Your Password</h6><p>In the following example, user <tt>david</tt> changes both his UNIX password and Kerberos
password with <tt>passwd</tt>. </p><pre>% <tt><b>passwd</b></tt>
    passwd:  Changing password for david
    Enter login (NIS+) password:         &lt;Type the current UNIX password&gt;
    New password:                        &lt;Type the new UNIX password&gt;
    Re-enter password:                   &lt;Confirm the new UNIX password&gt;
    Old KRB5 password:                   &lt;Type the current Kerberos password&gt;
    New KRB5 password:                   &lt;Type the new Kerberos password&gt;
    Re-enter new KRB5 password:          &lt;Confirm the new Kerberos password&gt;</pre><p>Note that <tt>passwd</tt> asks for both the UNIX password and the Kerberos password.
This behavior is established by the default configuration. In that case, user <tt>david</tt>
must use <tt>kpasswd</tt> to set his Kerberos password to something else, as shown
next.</p><p><a name="indexterm-2841"></a>This example shows user <tt>david</tt> changing only his Kerberos password with <tt>kpasswd</tt>.</p><pre>% <tt><b>kpasswd</b></tt>
kpasswd: Changing password for david@ENG.EXAMPLE.COM.
Old password:           &lt;Type the current Kerberos password&gt;
New password:           &lt;Type the new Kerberos password&gt;
New password (again):   &lt;Confirm the new Kerberos password&gt;
Kerberos password changed.
 </pre><p>In this example, user <tt>david</tt> changes the password for the Kerberos principal <tt>david/admin</tt>
(which is not a valid UNIX user). He must use <tt>kpasswd</tt>.</p><pre>% <tt><b>kpasswd david/admin</b></tt>
kpasswd:  Changing password for david/admin.
Old password:           &lt;Type the current Kerberos password&gt;
New password:           &lt;Type the new Kerberos password&gt;
New password (again):   &lt;Type the new Kerberos password&gt;
Kerberos password changed. 
 </pre>

<a name="userk5login1"></a><h4>Granting Access to Your Account</h4>
<a name="indexterm-2842"></a><a name="indexterm-2843"></a><a name="indexterm-2844"></a><a name="indexterm-2845"></a><a name="indexterm-2846"></a><a name="indexterm-2847"></a><a name="indexterm-2848"></a><p>If you need to give someone access to log in to your
account (as you), you can do so through Kerberos, without revealing your password,
by putting a <tt>.k5login</tt> file in your home directory. A <tt>.k5login</tt> file is
a list of one or more Kerberos principals corresponding to each person for
whom you want to grant access. Each principal must be on a separate
line.</p><p>Suppose that the user <tt>david</tt> keeps a <tt>.k5login</tt> file in his home directory
that looks like the following:</p><pre>jennifer@ENG.EXAMPLE.COM
joe@EXAMPLE.ORG  </pre><p>This file allows the users <tt>jennifer</tt> and <tt>joe</tt> to assume <tt>david</tt>'s identity, provided
that they already have Kerberos tickets in their respective realms. For example, jennifer
can remotely log in to <tt>david</tt>'s machine (<tt>boston</tt>), as him, without having to give
his password.</p><a name="user-fig-39"></a><h6>Figure&nbsp;26-1 Using the <tt>.k5login</tt> File to Grant Access to Your Account</h6><img src="figures/K5Login.gif" alt="The preceding context describes the graphic."></img><p>In the case where <tt>david</tt>'s home directory is NFS-mounted, using Kerberos V5 protocols,
from another (third) machine, <tt>jennifer</tt> must have a forwardable ticket in order to
access his home directory. See <a href="user-8.html#user-9">Creating a Kerberos Ticket</a> for an example of using a forwardable
ticket.</p><p>If you will be logging in to other machines across a network,
you'll want to include your own Kerberos principal in <tt>.k5login</tt> files on those machines.
</p><p><a name="indexterm-2849"></a>Using a <tt>.k5login</tt> file is much safer than giving out your password
for these reasons:</p>
<ul><li><p>You can take access away any time by removing the principal from your <tt>.k5login</tt> file.</p></li>
<li><p>Although users principals named in the <tt>.k5login</tt> file in your home directory have full access to your account on that machine (or sets of machines, if the <tt>.k5login</tt> file is shared, for example, over NFS). However, any Kerberized services will authorize access based on that user's identity, not yours. So <tt>jennifer</tt> can log in to <tt>joe</tt>'s machine and perform tasks there. However, if she uses a Kerberized program such as <tt>ftp</tt> or <tt>rlogin</tt>, she does so as herself.</p></li>
<li><p>Kerberos keeps a log of who obtains tickets, so a system administrator can find out, if necessary, who is capable of using your user identity at a particular time.</p></li></ul>
<p>One common way to use the <tt>.k5login</tt> file is to put it in
<tt>root</tt>'s home directory, giving <tt>root</tt> access for that machine to the Kerberos principals
listed. This configuration allows system administrators to become <tt>root</tt> locally, or to log in
remotely as <tt>root</tt>, without having to give out the <tt>root</tt> password, and
without requiring anyone to type the <tt>root</tt> password over the network.</p><a name="user-49"></a><h6>Example&nbsp;26-4 Using the <tt>.k5login</tt> File to Grant Access to Your Account</h6><p>Suppose <tt>jennifer</tt> decides to log in to the machine <tt>boston.example.com</tt> as <tt>root</tt>.
Because she has an entry for her principal name in the <tt>.k5login</tt> file
in <tt>root</tt>'s home directory on <tt>boston.example.com</tt>, she again does not have to type
in her password.</p><pre>% <tt><b>rlogin boston.example.com -l root -x</b></tt>
This rlogin session is using DES encryption for all data transmissions.
Last login: Thu Jun 20 16:20:50 from daffodil
SunOS Release 5.7 (GENERIC) #2: Tue Nov 14 18:09:31 EST 1998
boston[root]% </pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="user-8.html">Previous</a>
             </td>
             <td align="right">
                 <a href="userseamsapp1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

