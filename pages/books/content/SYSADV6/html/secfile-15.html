<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Protecting Files With UNIX Permissions (Task Map) - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="secfile-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="secfile-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level3"><a href="secfile-60.html">Using UNIX Permissions to Protect Files</a></p>
<p class="toc level3"><a href="secfile-37.html">Using Access Control Lists to Protect Files</a></p>
<p class="toc level3"><a href="secfile-68.html">Preventing Executable Files From Compromising Security</a></p>
<p class="toc level3"><a href="secfile-10.html">Protecting Files (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Protecting Files With UNIX Permissions (Task Map)</a></p>
</div>
<p class="toc level3"><a href="secfile-30.html">Protecting Files With ACLs (Task Map)</a></p>
<p class="toc level3"><a href="secfile-40.html">Protecting Against Programs With Security Risk (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="secfile-15"></a><h3>Protecting Files With UNIX Permissions (Task Map)</h3>
<a name="indexterm-875"></a><a name="indexterm-876"></a><a name="indexterm-877"></a><a name="indexterm-878"></a><a name="indexterm-879"></a><p><a name="indexterm-880"></a><a name="indexterm-881"></a>The following task map points to procedures that list file permissions, change file
permissions, and protect files with special file permissions.</p><table><col width="27%"><col width="72%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Display file information</p></td>
<td align="left" valign="top" scope="row"><p><a href="#secfile-43">How to Display File Information</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Change file
ownership</p></td>
<td align="left" valign="top" scope="row"><p><a href="#secfile-20">How to Change the Owner of a File</a></p><p><a href="#secfile-54">How to Change Group Ownership of a File</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Change file permissions</p></td>
<td align="left" valign="top" scope="row"><p><a href="#secfile-11">How to Change File Permissions in Symbolic Mode</a></p><p><a href="#secfile-46">How to Change File Permissions in Absolute Mode</a></p><p><a href="#secfile-45">How to Change Special File Permissions in Absolute Mode</a></p></td>
</tr>
</table>

<a name="secfile-43"></a><h4>How to Display File Information</h4><a name="indexterm-882"></a><a name="indexterm-883"></a><a name="indexterm-884"></a><a name="indexterm-885"></a><p>Display information about all the files in a directory by using the
<tt>ls</tt> command.</p><ul>
<li><b><a name="indexterm-886"></a><a name="indexterm-887"></a><a name="indexterm-888"></a>Type the following command to display a long listing of all files in
the current directory.</b><pre>% <tt><b>ls -la</b></tt></pre><dl><dt><tt>-l</tt></dt>
<dd><p>Displays the long format that includes user ownership, group ownership, and file permissions.</p></dd>
<dt><tt>-a</tt></dt>
<dd><p>Displays all files, including hidden files that begin with a dot (<tt>.</tt>).</p></dd>
</dl>
</li></ul><a name="secfile-56"></a><h6>Example&nbsp;7-1 Displaying File Information</h6><a name="indexterm-889"></a><p>In the following example, a partial list of the files in the
<tt>/sbin</tt> directory is displayed.</p><pre>% <tt><b>cd /sbin</b></tt>
% <tt><b>ls -la</b></tt>
total 13456
drwxr-xr-x   2 root     sys          512 Sep  1 14:11 .
drwxr-xr-x  29 root     root        1024 Sep  1 15:40 ..
-r-xr-xr-x   1 root     bin       218188 Aug 18 15:17 autopush
lrwxrwxrwx   1 root     root          21 Sep  1 14:11 bpgetfile -&gt; ...
-r-xr-xr-x   1 root     bin       505556 Aug 20 13:24 dhcpagent
-r-xr-xr-x   1 root     bin       456064 Aug 20 13:25 dhcpinfo
-r-xr-xr-x   1 root     bin       272360 Aug 18 15:19 fdisk
-r-xr-xr-x   1 root     bin       824728 Aug 20 13:29 hostconfig
-r-xr-xr-x   1 root     bin       603528 Aug 20 13:21 ifconfig
-r-xr-xr-x   1 root     sys       556008 Aug 20 13:21 init
-r-xr-xr-x   2 root     root      274020 Aug 18 15:28 jsh
-r-xr-xr-x   1 root     bin       238736 Aug 21 19:46 mount
-r-xr-xr-x   1 root     sys         7696 Aug 18 15:20 mountall
   .
   .
   .</pre><p>Each line displays information about a file in the following order:</p>
<ul><li><p>Type of file &ndash; For example, <tt>d</tt>. For list of file types, see <a href="secfile-60.html#secfile-16">File and Directory Ownership</a>.</p></li>
<li><p>Permissions &ndash; For example, <tt>r-xr-xr-x</tt>. For description, see <a href="secfile-60.html#secfile-16">File and Directory Ownership</a>.</p></li>
<li><p>Number of hard links &ndash; For example, <tt>2</tt>.</p></li>
<li><p>Owner of the file &ndash; For example, <tt>root</tt>.</p></li>
<li><p>Group of the file &ndash; For example, <tt>bin</tt>.</p></li>
<li><p>Size of the file, in bytes &ndash; For example, <tt>7696</tt>.</p></li>
<li><p>Date the file was created or the last date that the file was changed &ndash; For example, <tt>Aug 18 15:20</tt>.</p></li>
<li><p>Name of the file &ndash; For example, <tt>mountall</tt>.</p></li></ul>


<a name="secfile-20"></a><h4>How to Change the Owner of a File</h4><a name="indexterm-890"></a><a name="indexterm-891"></a><a name="indexterm-892"></a><a name="indexterm-893"></a><p>The file owner, the Primary Administrator role, or superuser can change any file's
ownership.</p><ol>
<li><b>Display the permissions on a file.</b><pre>% <tt><b>ls -l example-file</b></tt>
-rw-r--r--   1 janedoe   staff   112640 May 24 10:49 example-file</pre></li>
<li><b>Assume the Primary Administrator role, or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Change the owner of the file.</b><pre># <tt><b>chown stacey example-file</b></tt></pre></li>
<li><b>Verify that the owner of the file has changed.</b><pre># <tt><b>ls -l example-file</b></tt>
-rw-r--r--   1 stacey   staff   112640 May 26 08:50 example-file </pre></li></ol><a name="secfile-3"></a><h6>Example&nbsp;7-2 Enabling Users to Change the Ownership of Files That Others Own</h6><p><b>Security Consideration &ndash;</b> You should have good reason to override system security policy by changing
the setting of the <tt>rstchown</tt> variable to zero. Any user who accesses the system
can change the ownership of any file on the system.</p><p><a name="indexterm-894"></a><a name="indexterm-895"></a><a name="indexterm-896"></a>In this example, the value of the <tt>rstchown</tt> variable is set to zero
in the <tt>/etc/system</tt> file. This setting enables the owner of a file to
use the <tt>chown</tt> command to change the file's ownership to another user. This
setting also enables the owner to use the <tt>chgrp</tt> command to set the
group ownership of a file to a group that the owner does not
belong to. The change goes into effect when the system is rebooted.</p><pre>set rstchown = 0</pre><p>For more information, see the <a href="http://docs.sun.com/doc/819-2239/chown-1?a=view"><tt>chown</tt>(1)</a> and <a href="http://docs.sun.com/doc/819-2239/chgrp-1?a=view"><tt>chgrp</tt>(1)</a> man pages.</p><p>Also, be aware that NFS-mounted file systems have further restrictions on changing ownership
and groups. For more information on restricting access to NFS-mounted systems, see <a href="http://docs.sun.com/doc/819-1634/rfsrefer-1?a=view">Chapter 6, Accessing Network File Systems (Reference), in <i>System Administration Guide: Network Services</i></a>.</p>

<a name="secfile-54"></a><h4>How to Change Group Ownership of a File</h4><a name="indexterm-897"></a><a name="indexterm-898"></a><a name="indexterm-899"></a><a name="indexterm-900"></a><ol>
<li><b>Assume the Primary Administrator role, or become superuser.</b><p>The Primary Administrator role includes the Primary Administrator profile. To create the role
and assign the role to a user, see <a href="http://docs.sun.com/doc/819-2379/smcover-1?a=view">Chapter 2, Working With the Solaris Management Console (Tasks), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b><a name="indexterm-901"></a>Change the group ownership of a file.</b><pre>$ <tt><b>chgrp scifi example-file</b></tt></pre><p>For information on setting up groups, see <a href="http://docs.sun.com/doc/819-2379/userconcept-97366?a=view">Chapter 4, Managing User Accounts and Groups (Overview), in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Verify that the group ownership of the file has changed.</b><pre>$ <tt><b>ls -l example-file</b></tt>
 -rw-r--r--   1 stacey   scifi   112640 June 20 08:55  example-file</pre><p>Also see <a href="#secfile-3">Example&nbsp;7-2</a>.</p></li></ol>

<a name="secfile-11"></a><h4>How to Change File Permissions in Symbolic Mode</h4><a name="indexterm-902"></a><a name="indexterm-903"></a><a name="indexterm-904"></a><a name="indexterm-905"></a><a name="indexterm-906"></a><ol>
<li><b>If you are not the owner of the file or directory, become
superuser or assume an equivalent role.</b><p>Only the current owner or superuser can use the <tt>chmod</tt> command to change
file permissions on a file or directory.</p></li>
<li><b>Change permissions in symbolic mode.</b><pre>% chmod <i>who operator permissions filename</i></pre><dl><dt><i>who</i></dt>
<dd><p>Specifies whose permissions are to be changed.</p></dd>
<dt><i>operator</i></dt>
<dd><p>Specifies the operation to be performed.</p></dd>
<dt><i>permissions</i></dt>
<dd><p>Specifies what permissions are to be changed. For the list of valid symbols, see <a href="secfile-60.html#secfile-53">Table&nbsp;7-5</a>.</p></dd>
<dt><i>filename</i></dt>
<dd><p>Specifies the file or directory.</p></dd>
</dl>
</li>
<li><b>Verify that the permissions of the file have changed.</b><pre>% ls -l <i>filename</i></pre></li></ol><a name="secfile-47"></a><h6>Example&nbsp;7-3 Changing Permissions in Symbolic Mode</h6><a name="indexterm-907"></a><a name="indexterm-908"></a><a name="indexterm-909"></a><a name="indexterm-910"></a><a name="indexterm-911"></a><a name="indexterm-912"></a><a name="indexterm-913"></a><p>In the following example, read permission is taken away from others.</p><pre>% <tt><b>chmod o-r example-file1</b></tt></pre><p>In the following example, read and execute permissions are added for user, group,
and others.</p><pre>$ <tt><b>chmod a+rx example-file2</b></tt></pre><p>In the following example, read, write, and execute permissions are assigned to group.</p><pre>$ <tt><b>chmod g=rwx example-file3</b></tt></pre>

<a name="secfile-46"></a><h4>How to Change File Permissions in Absolute Mode</h4><a name="indexterm-914"></a><a name="indexterm-915"></a><a name="indexterm-916"></a><a name="indexterm-917"></a><a name="indexterm-918"></a><ol>
<li><b>If you are not the owner of the file or directory, become
superuser or assume an equivalent role.</b><p>Only the current owner or superuser can use the <tt>chmod</tt> command to change
file permissions on a file or directory.</p></li>
<li><b>Change permissions in absolute mode.</b><pre>% chmod <i>nnn</i> <i>filename</i></pre><dl><dt><i>nnn</i></dt>
<dd><p>Specifies the octal values that represent the permissions for the file owner, file group, and others, in that order. For the list of valid octal values, see <a href="secfile-60.html#secfile-26">Table&nbsp;7-4</a>.</p></dd>
<dt><i>filename</i></dt>
<dd><p>Specifies the file or directory.</p></dd>
</dl>

<hr><p><b>Note - </b>When you use the <tt>chmod</tt> command to change the file group permissions on
a file with ACL entries, both the file group permissions and the ACL
mask are changed to the new permissions. Be aware that the new ACL
mask permissions can change the permissions for other users and groups who have
ACL entries on the file. Use the <tt>getfacl</tt> command to make sure that
the appropriate permissions are set for all ACL entries. For more information, see
the <a href="http://docs.sun.com/doc/819-2239/getfacl-1?a=view"><tt>getfacl</tt>(1)</a> man page.</p>
<hr>
</li>
<li><b>Verify that the permissions of the file have changed.</b><pre>% ls -l <i>filename</i></pre></li></ol><a name="secfile-44"></a><h6>Example&nbsp;7-4 Changing Permissions in Absolute Mode</h6><p>In the following example, the permissions of a public directory are changed from
<tt>744</tt> (read, write, execute; read-only; and read-only) to <tt>755</tt> (read, write, execute; read
and execute; and read and execute).</p><pre># <tt><b>ls -ld public_dir</b></tt>
drwxr--r--  1 ignatz   staff    6023 Aug  5 12:06 public_dir
# <tt><b>chmod 755 public_dir</b></tt>
# <tt><b>ls -ld public_dir</b></tt>
drwxr-xr-x  1 ignatz   staff    6023 Aug  5 12:06 public_dir</pre><p>In the following example, the permissions of an executable shell script are changed
from read and write to read, write, and execute.</p><pre>% <tt><b>ls -l my_script</b></tt>
-rw------- 1 ignatz   staff    6023 Aug  5 12:06 my_script
% <tt><b>chmod 700 my_script</b></tt>
% <tt><b>ls -l my_script</b></tt>
-rwx------ 1 ignatz   staff    6023 Aug  5 12:06 my_script</pre>

<a name="secfile-45"></a><h4>How to Change Special File Permissions in Absolute Mode</h4><a name="indexterm-919"></a><a name="indexterm-920"></a><a name="indexterm-921"></a><a name="indexterm-922"></a><a name="indexterm-923"></a><ol>
<li><b>If you are not the owner of the file or directory, become
superuser or assume an equivalent role.</b><p>Only the current owner or a user with superuser capabilities can use the
<tt>chmod</tt> command to change the special permissions on a file or directory.</p></li>
<li><b><a name="indexterm-924"></a>Change special permissions in absolute mode.</b><pre>% chmod <i>nnnn</i> <i>filename</i></pre><dl><dt><i>nnnn</i></dt>
<dd><p>Specifies the octal values that change the permissions on the file or directory. The leftmost octal value sets the special permissions on the file. For the list of valid octal values for special permissions, see <a href="secfile-60.html#secfile-tbl-2">Table&nbsp;7-6</a>.</p></dd>
<dt><i>filename</i></dt>
<dd><p>Specifies the file or directory.</p></dd>
</dl>

<hr><p><b>Note - </b>When you use the <tt>chmod</tt> command to change the file group permissions on
a file with ACL entries, both the file group permissions and the ACL
mask are changed to the new permissions. Be aware that the new ACL
mask permissions can change the permissions for additional users and groups who have
ACL entries on the file. Use the <tt>getfacl</tt> command to make sure that
the appropriate permissions are set for all ACL entries. For more information, see
the <a href="http://docs.sun.com/doc/819-2239/getfacl-1?a=view"><tt>getfacl</tt>(1)</a> man page.</p>
<hr>
</li>
<li><b>Verify that the permissions of the file have changed.</b><pre>% ls -l <i>filename</i></pre></li></ol><a name="secfile-21"></a><h6>Example&nbsp;7-5 Setting Special File Permissions in Absolute Mode</h6><p>In the following example, the <tt>setuid</tt> permission is set on the <tt>dbprog</tt> file.</p><pre># <tt><b>chmod 4555 dbprog</b></tt>
# <tt><b>ls -l dbprog</b></tt>
-r-sr-xr-x   1 db     staff        12095 May  6 09:29 dbprog</pre><p>In the following example, the <tt>setgid</tt> permission is set on the <tt>dbprog2</tt> file.</p><pre># <tt><b>chmod 2551 dbprog2</b></tt>
# <tt><b>ls -l dbprog2</b></tt>
-r-xr-s--x   1 db     staff       24576 May  6 09:30 dbprog2</pre><p><a name="indexterm-925"></a><a name="indexterm-926"></a><a name="indexterm-927"></a><a name="indexterm-928"></a><a name="indexterm-929"></a><a name="indexterm-930"></a>In the following example, the sticky bit permission is set on the <tt>public_dir</tt>
directory.</p><pre># <tt><b>chmod 1777 public_dir</b></tt>
# <tt><b>ls -ld public_dir</b></tt>
drwxrwxrwt   2 ignatz   staff          512 May 15 15:27 public_dir</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="secfile-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="secfile-30.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

