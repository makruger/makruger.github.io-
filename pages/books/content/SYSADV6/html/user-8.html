<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Kerberos Ticket Management - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="user-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="userspasswd1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Kerberos Ticket Management</a></p>
</div>
<p class="toc level3"><a href="userspasswd1.html">Kerberos Password Management</a></p>
<p class="toc level3"><a href="userseamsapp1.html">Kerberos User Commands</a></p>
<p class="toc level2 tocsp"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="user-8"></a><h3>Kerberos Ticket Management</h3>
<p>This section explains how to obtain, view, and destroy tickets. For an introduction
to tickets, see <a href="intro-25.html">How the Kerberos Service Works</a>.</p>

<a name="user-19"></a><h4>Do You Need to Worry About Tickets?</h4>
<a name="indexterm-2807"></a><a name="indexterm-2808"></a><p>With any of the SEAM releases or the Solaris 10 release installed,
Kerberos is built into the <tt>login</tt> command, and you will obtain tickets automatically when
you log in. The Kerberized commands <tt>rsh</tt>, <tt>rcp</tt>, <tt>rdist</tt>, <tt>telnet</tt>, and <tt>rlogin</tt>
are usually set up to forward copies of your tickets to the other
machines, so you don't have to explicitly ask for tickets to get
access to those machines. Your configuration might not include this automatic forwarding, but it
is the default behavior. See <a href="userseamsapp1.html#userkerbopts1">Overview of Kerberized Commands</a> and <a href="userseamsapp1.html#user-68">Forwarding Kerberos Tickets</a> for more information on
forwarding tickets.</p><p>For information on ticket lifetimes, see <a href="refer-11.html#refer-502">Ticket Lifetimes</a>.</p>

<a name="user-9"></a><h4>Creating a Kerberos Ticket</h4>
<a name="indexterm-2809"></a><a name="indexterm-2810"></a><a name="indexterm-2811"></a><a name="indexterm-2812"></a><p>Normally, if PAM is configured properly, a ticket is created automatically when you
log in, and you need not do anything special to obtain a
ticket. However, you might need to create a ticket if your ticket expires.
Also, you might need to use a different principal besides your default principal,
for example, if you use <tt>rlogin</tt> <tt>-l</tt> to log in to a machine as
someone else.</p><p>To create a ticket, use the <tt>kinit</tt> command.</p><pre>% <tt><b>/usr/bin/kinit</b></tt>
 </pre><p>The <tt>kinit</tt> command prompts you for your password. For the full syntax of
the <tt>kinit</tt> command, see the <a href="http://docs.sun.com/doc/819-2239/kinit-1?a=view"><tt>kinit</tt>(1)</a> man page. </p><a name="user-21"></a><h6>Example&nbsp;26-1 Creating a Kerberos Ticket</h6><p>This example shows a user, <tt>jennifer</tt>, creating a ticket on her own system.</p><pre>% <tt><b>kinit</b></tt>
Password for jennifer@ENG.EXAMPLE.COM:  &lt;Type password&gt;
 </pre><p>Here, the user <tt>david</tt> creates a ticket that is valid for three hours
with the <tt>-l</tt> option.</p><pre>% <tt><b>kinit -l 3h david@EXAMPLE.ORG</b></tt>
Password for david@EXAMPLE.ORG:  &lt;Type password&gt;
 </pre><p><a name="indexterm-2813"></a><a name="indexterm-2814"></a><a name="indexterm-2815"></a><a name="indexterm-2816"></a>This example shows the user <tt>david</tt> creating a forwardable ticket (with the <tt>-f</tt> option)
for himself. With this forwardable ticket, he can, for example, log in to
a second system, and then <tt>telnet</tt> to a third system.</p><pre>% <tt><b>kinit -f david@EXAMPLE.ORG</b></tt>
Password for david@EXAMPLE.ORG:     &lt;Type password&gt;
 </pre><p>For more information on how forwarding tickets works, see <a href="userseamsapp1.html#user-68">Forwarding Kerberos Tickets</a> and <a href="refer-11.html#refer-123456">Types of Tickets</a>.</p>

<a name="user-1"></a><h4>Viewing Kerberos Tickets</h4>
<a name="indexterm-2817"></a><a name="indexterm-2818"></a><a name="indexterm-2819"></a><a name="indexterm-2820"></a><a name="indexterm-2821"></a><p>Not all tickets are alike. One ticket might, for example, be <i>forwardable</i>.
Another ticket might be <i>postdated</i>. While a third ticket might be both forwardable
and postdated. You can see which tickets you have, and what their attributes
are, by using the <tt>klist</tt> command with the <tt>-f</tt> option:</p><pre>% <tt><b>/usr/bin/klist -f</b></tt></pre><p>The following symbols indicate the attributes that are associated with each ticket, as
displayed by <tt>klist</tt>:</p><dl><dt>A</dt>
<dd><p>Preauthenticated</p></dd>
<dt>D</dt>
<dd><p>Postdatable</p></dd>
<dt>d</dt>
<dd><p>Postdated</p></dd>
<dt>F</dt>
<dd><p>Forwardable</p></dd>
<dt>f</dt>
<dd><p>Forwarded</p></dd>
<dt>I</dt>
<dd><p>Initial</p></dd>
<dt>i</dt>
<dd><p>Invalid</p></dd>
<dt>P</dt>
<dd><p>Proxiable</p></dd>
<dt>p</dt>
<dd><p>Proxy</p></dd>
<dt>R</dt>
<dd><p>Renewable</p></dd>
</dl>
<p><a href="refer-11.html#refer-123456">Types of Tickets</a> describes the various attributes that a ticket can have.</p><a name="user-66"></a><h6>Example&nbsp;26-2 Viewing Kerberos Tickets</h6><p>This example shows that the user <tt>jennifer</tt> has an <i>initial</i> ticket, which
is <i>forwardable</i> (F) and <i>postdated</i> (d), but not yet validated (i).</p><pre>% <tt><b>/usr/bin/klist -f</b></tt>
Ticket cache: /tmp/krb5cc_74287
Default principal: jennifer@ENG.EXAMPLE.COM
 
Valid starting                 Expires                 Service principal
09 Mar 04 15:09:51  09 Mar 04 21:09:51  nfs/EXAMPLE.SUN.COM@EXAMPLE.SUN.COM
        renew until 10 Mar 04 15:12:51, Flags: Fdi
 </pre><p>The following example shows that the user <tt>david</tt> has two tickets that were
<i>forwarded</i> (f) to his host from another host. The tickets are also <i>forwardable</i>
(F).</p><pre>% <tt><b>klist -f</b></tt>
Ticket cache: /tmp/krb5cc_74287
Default principal: david@EXAMPLE.SUN.COM
 
Valid starting                 Expires                 Service principal
07 Mar 04 06:09:51  09 Mar 04 23:33:51  host/EXAMPLE.COM@EXAMPLE.COM
        renew until 10 Mar 04 17:09:51, Flags: fF
 
Valid starting                 Expires                 Service principal
08 Mar 04 08:09:51  09 Mar 04 12:54:51  nfs/EXAMPLE.COM@EXAMPLE.COM
        renew until 10 Mar 04 15:22:51, Flags: fF</pre><p>The following example shows how to display the encryption types of the session
 key and the ticket by using the <tt>-e</tt> option. The <tt>-a</tt>
option is used to map the host address to a host name
if the name service can do the conversion.</p><pre>% <tt><b>klist -fea</b></tt>
Ticket cache: /tmp/krb5cc_74287
Default principal: david@EXAMPLE.SUN.COM
 
Valid starting                 Expires                 Service principal
07 Mar 04 06:09:51  09 Mar 04 23:33:51  krbtgt/EXAMPLE.COM@EXAMPLE.COM
        renew until 10 Mar 04 17:09:51, Flags: FRIA
        Etype(skey, tkt): DES cbc mode with RSA-MD5, DES cbc mode with CRC-32
        Addresses: client.example.com</pre>

<a name="user-2"></a><h4>Destroying Kerberos Tickets</h4>
<a name="indexterm-2822"></a><a name="indexterm-2823"></a><a name="indexterm-2824"></a><p>If you want to destroy all Kerberos tickets acquired during your current session,
use the <tt>kdestroy</tt> command. The command destroys you credential cache, which destroys all
your credentials and tickets. While this is not usually necessary, running <tt>kdestroy</tt> reduces the
chance of the credential cache being compromised during times that you are not
logged in.</p><p>To destroy your tickets, use the <tt>kdestroy</tt> command.</p><pre>% <tt><b>/usr/bin/kdestroy</b></tt></pre><p>The <tt>kdestroy</tt> command destroys <b>all</b> your tickets. You cannot use this command to
selectively destroy a particular ticket.</p><p>If you are going to be away from your system and are
concerned about an intruder using your permissions, you should use either <tt>kdestroy</tt> or a
screen saver that locks the screen.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="user-7.html">Previous</a>
             </td>
             <td align="right">
                 <a href="userspasswd1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

