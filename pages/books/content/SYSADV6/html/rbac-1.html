<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Role-Based Access Control (Overview) - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="prbac-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="prbac-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Role-Based Access Control (Overview)</a></p>
</div>
<p class="toc level3"><a href="prbac-2.html">Privileges (Overview)</a></p>
<p class="toc level2 tocsp"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rbac-1"></a><h3>Role-Based Access Control (Overview)</h3>
<a name="indexterm-1006"></a><p>Role-based access control (RBAC) is a security feature for controlling user access to
tasks that would normally be restricted to superuser. By applying security attributes to
processes and to users, RBAC can divide up superuser capabilities among several administrators.
Process rights management is implemented through <b>privileges</b>. User rights management is implemented through RBAC.</p>
<ul><li><p>For a discussion of process rights management, see <a href="prbac-2.html">Privileges (Overview)</a>.</p></li>
<li><p>For information on RBAC tasks, see <a href="rbactask-1.html">Chapter&nbsp;9, Using Role-Based Access Control (Tasks)</a>.</p></li>
<li><p>For reference information, see <a href="rbacref-1.html">Chapter&nbsp;10, Role-Based Access Control (Reference)</a>.</p></li></ul>


<a name="rbac-28"></a><h4>RBAC: An Alternative to the Superuser Model</h4>
<a name="indexterm-1007"></a><a name="indexterm-1008"></a><a name="indexterm-1009"></a><a name="indexterm-1010"></a><p>In conventional UNIX systems, the <tt>root</tt> user, also referred to as superuser, is
all-powerful. Programs that run as <tt>root</tt>, or <tt>setuid</tt> programs, are all-powerful. The <tt>root</tt>
user has the ability to read and write to any file, run all
programs, and send kill signals to any process. Effectively, anyone who can become
superuser can modify a site's firewall, alter the audit trail, read confidential records, and
shut down the entire network. A <tt>setuid</tt> program that is hijacked can do
anything on the system.</p><p><a name="indexterm-1011"></a><a name="indexterm-1012"></a>Role-based access control (RBAC) provides a more secure alternative to the all-or-nothing superuser
model. With RBAC, you can enforce security policy at a more fine-grained level.
RBAC uses the security principle of <b>least privilege</b>. Least privilege means that a
user has precisely the amount of privilege that is necessary to perform a
job. Ordinary users have enough privilege to use their applications, check the status
of their jobs, print files, create new files, and so on. Capabilities beyond
ordinary user capabilities are grouped into rights profiles. Users who are expected to do
jobs that require some of the capabilities of superuser assume a role that
includes the appropriate rights profile.</p><p>RBAC collects superuser capabilities into <b>rights profiles</b>. These rights profiles are assigned to special
user accounts that are called <b>roles</b>. A user can then assume a
role to do a job that requires some of superuser's capabilities. Predefined rights
profiles are supplied with Solaris software. You create the roles and assign the
profiles.</p><p>Rights profiles can provide broad capabilities. For example, the Primary Administrator rights profile
is equivalent to superuser. Rights profiles can also be narrowly defined. For example,
the Cron Management rights profile manages <tt>at</tt> and <tt>cron</tt> jobs. When you create roles,
you can decide to create roles with broad capabilities, or roles with narrow
capabilities, or both.</p><p>In the RBAC model, superuser creates one or more roles. The roles
are based on rights profiles. Superuser then assigns the roles to users who
are trusted to perform the tasks of the role. Users log in with
their user name. After login, users assume roles that can run restricted administrative
commands and graphical user interface (GUI) tools. </p><p>The flexibility in setting up roles enables a variety of security policies. Although
no roles are shipped with the Solaris Operating System (Solaris OS), three
recommended roles can easily be configured. The roles are based on rights profiles
of the same name:</p>
<ul><li><p><a name="indexterm-1013"></a><b>Primary Administrator &ndash;</b> A powerful role that is equivalent to the <tt>root</tt> user, or superuser.</p></li>
<li><p><a name="indexterm-1014"></a><b>System Administrator &ndash;</b> A less powerful role for administration that is not related to security. This role can manage file systems, mail, and software installation. However, this role cannot set passwords.</p></li>
<li><p><a name="indexterm-1015"></a><b>Operator &ndash;</b> A junior administrator role for operations such as backups and printer management.</p></li></ul>
<p>These three roles do not have to be implemented. Roles are a
function of an organization's security needs. Roles can be set up for special-purpose administrators
in areas such as security, networking, or firewall administration. Another strategy is to
create a single powerful administrator role along with an advanced user role. The
advanced user role would be for users who are permitted to fix portions
of their own systems.</p><p>The superuser model and the RBAC model can co-exist. The following table summarizes
the gradations from superuser to restricted ordinary user that are possible in the
RBAC model. The table includes the administrative actions that can be tracked in
both models. For a summary of the effect of privileges alone on a
system, see <a href="prbac-2.html#prbac-tbl-1">Table&nbsp;8-2</a>.</p><a name="rbac-tbl-7"></a><h6>Table&nbsp;8-1 Superuser Model Versus RBAC With Privileges Model</h6><table><col width="40%"><col width="24%"><col width="34%"><tr><th align="left" valign="top" scope="column"><p>User Capabilities on a System</p></th>
<th align="left" valign="top" scope="column"><p>Superuser Model</p></th>
<th align="left" valign="top" scope="column"><p>RBAC Model</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Can become superuser with
full superuser capability</p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Can log in as a user with full user capabilities</p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Can
become superuser with limited capabilities</p></td>
<td align="left" valign="top" scope="row"><p>No</p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Can log in as a user, and have
superuser capabilities, sporadically</p></td>
<td align="left" valign="top" scope="row"><p>Yes, with <tt>setuid</tt> programs only</p></td>
<td align="left" valign="top" scope="row"><p>Yes, with <tt>setuid</tt> programs and with
RBAC</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Can log in as a user with administrative capabilities, but without full superuser
capability</p></td>
<td align="left" valign="top" scope="row"><p>No</p></td>
<td align="left" valign="top" scope="row"><p>Yes, with RBAC and with directly-assigned privileges and authorizations</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Can log in as
a user with fewer capabilities than an ordinary user</p></td>
<td align="left" valign="top" scope="row"><p>No</p></td>
<td align="left" valign="top" scope="row"><p>Yes, with RBAC and
with removed privileges</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Can track superuser actions</p></td>
<td align="left" valign="top" scope="row"><p>Yes, by auditing the <tt>su</tt> command</p></td>
<td align="left" valign="top" scope="row"><p>Yes, by
auditing profile shell commands</p><p>Also, if <tt>root</tt> user is disabled, the name of
the user who has assumed the <tt>root</tt> role is in the audit trail</p></td>
</tr>
</table>

<a name="rbac-29"></a><h4>Solaris RBAC Elements and Basic Concepts</h4>
<a name="indexterm-1016"></a><a name="indexterm-1017"></a><a name="indexterm-1018"></a><a name="indexterm-1019"></a><p>The RBAC model in the Solaris OS introduces the following elements:</p>
<ul><li><p><a name="indexterm-1020"></a><b>Authorization &ndash;</b> A permission that enables a user or role to perform a class of actions that could affect security. For example, security policy at installation gives ordinary users the <tt>solaris.device.cdrw</tt> authorization. This authorization enables users to read and write to a CD-ROM device. For a list of authorizations, see the <tt>/etc/security/auth_attr</tt> file.</p></li>
<li><p><a name="indexterm-1021"></a><b>Privilege &ndash;</b> A discrete right that can be granted to a command, a user, a role, or a system. Privileges enable a process to succeed. For example, the <tt>proc_exec</tt> privilege allows a process to call <tt>execve()</tt>. Ordinary users have basic privileges. To see your basic privileges, run the <tt>ppriv -vl basic</tt> command.</p></li>
<li><p><a name="indexterm-1022"></a><b>Security attributes &ndash;</b> An attribute that enables a process to perform an operation. In a typical UNIX environment, a security attribute enables a process to perform an operation that is otherwise forbidden to ordinary users. For example, <tt>setuid</tt> and <tt>setgid</tt> programs have security attributes. In the RBAC model, operations that ordinary users perform might require security attributes. In addition to <tt>setuid</tt> and <tt>setgid</tt> programs, authorizations and privileges are also security attributes in the RBAC model. For example, a user with the <tt>solaris.device.allocate</tt> authorization can allocate a device for exclusive use. A process with the <tt>sys_time</tt> privilege can manipulate system time.</p></li>
<li><p><a name="indexterm-1023"></a><b>Privileged application &ndash;</b> An application or command that can override system controls by checking for <b>security attributes</b>. In a typical UNIX environment and in the RBAC model, programs that use <tt>setuid</tt> and <tt>setgid</tt> are privileged applications. In the RBAC model, programs that require privileges or authorizations to succeed are also privileged applications. For more information, see <a href="#rbac-30">Privileged Applications and RBAC</a>.</p></li>
<li><p><a name="indexterm-1024"></a><a name="indexterm-1025"></a><b>Rights profile &ndash;</b> A collection of administrative capabilities that can be assigned to a role or to a user. A rights profile can consist of authorizations, of commands with security attributes, and of other rights profiles. Rights profiles offer a convenient way to group security attributes.</p></li>
<li><p><a name="indexterm-1026"></a><b>Role &ndash;</b> A special identity for running privileged applications. The special identity can be assumed by assigned users only. In a system that is run by roles, superuser is unnecessary. Superuser capabilities are distributed to different roles. For example, in a two-role system, security tasks would be handled by a security role. The second role would handle system administration tasks that are not security-related. Roles can be more fine-grained. For example, a system could include separate administrative roles for handling the cryptographic framework, printers, system time, file systems, and auditing.</p></li></ul>
<p>The following figure shows how the RBAC elements work together.</p><a name="rbac-fig-2"></a><h6>Figure&nbsp;8-1 Solaris RBAC Element Relationships</h6><img src="figures/rbac.elems.gif" alt="The following context describes the graphic."></img><p>In RBAC, roles are assigned to users. When a user assumes a
role, the capabilities of the role are available. Roles get their capabilities from rights
profiles. Rights profiles can contain authorizations, privileged commands, and other supplementary rights profiles.
Privileged commands are commands that execute with security attributes.</p><p>The following figure uses the Operator role, the Operator rights profile, and the
Printer Management rights profile to demonstrate RBAC relationships.</p><a name="rbac-fig-1"></a><h6>Figure&nbsp;8-2 Example of Solaris RBAC Element Relationships</h6><img src="figures/rbac.ex.gif" alt="The following context describes the graphic."></img><p>The Operator role is used to maintain printers and to perform media backup.
The role is assigned to the user <tt>jdoe</tt>. <tt>jdoe</tt> can assume the role
by switching to the role, and then supplying the role password.</p><p>The Operator rights profile has been assigned to the Operator role. The Operator
rights profile contains two supplementary profiles, Printer Management and Media Backup. The supplementary
profiles reflect the role's primary tasks.</p><p><a name="indexterm-1027"></a>The Printer Management rights profile is for managing printers, print daemons, and spoolers.
Three authorizations are included in the Printer Management rights profile: <tt>solaris.admin.printer.read</tt>, <tt>solaris.admin.printer.delete</tt>, and
<tt>solaris.admin.printer.modify</tt>. These authorizations enable roles and users to manipulate information in the printer
queue. The Printer Management rights profile also includes a number of commands with
security attributes, such as <tt>/usr/sbin/lpshut</tt> with <tt>euid=lp</tt> and <tt>/usr/ucb/lpq</tt> with <tt>euid=0</tt>.</p>

<a name="rbac-32"></a><h4>RBAC Authorizations</h4>
<a name="indexterm-1028"></a><a name="indexterm-1029"></a><p>An <b>authorization</b> is a discrete right that can be granted to a role
or to a user. Authorizations enforce policy at the user application level. Authorizations
can be assigned directly to a role or to a user. Typically, authorizations
are included in a rights profile. The rights profile is then included in
a role, and the role is assigned to a user. For an example,
see <a href="#rbac-fig-1">Figure&nbsp;8-2</a>.</p><p>RBAC-compliant applications can check a user's authorizations prior to granting access to the
application or specific operations within the application. This check replaces the check in
conventional UNIX applications for <tt>UID=0</tt>. For more information on authorizations, see the
following sections:</p>
<ul><li><p><a href="rbacref-28.html">Authorization Naming and Delegation</a></p></li>
<li><p><a href="rbacref-6.html#rbacref-11"><tt>auth_attr</tt> Database</a></p></li>
<li><p><a href="rbacref-22.html#rbacref-4">Commands That Require Authorizations</a></p></li></ul>


<a name="rbac-38"></a><h4>Authorizations and Privileges</h4>
<p>Privileges enforce security policy in the kernel. The difference between authorizations and privileges
concerns the level at which the security policy is enforced. Without the proper
privilege, a process can be prevented from performing privileged operations by the kernel.
Without the proper authorizations, a user might be prevented from using a privileged
application or from performing security-sensitive operations within a privileged application. For a fuller discussion
of privileges, see <a href="prbac-2.html">Privileges (Overview)</a>.</p>

<a name="rbac-30"></a><h4>Privileged Applications and RBAC</h4>
<p>Applications and commands that can override system controls are considered privileged applications. Security
attributes such as <tt>UID=0</tt>, privileges, and authorizations make an application privileged.</p>

<a name="rbac-35"></a><h5>Applications That Check UIDs and GIDs</h5>
<p><a name="indexterm-1030"></a><a name="indexterm-1031"></a>Privileged applications that check for <tt>root</tt> (<tt>UID=0</tt>) or some other special UID
or GID have long existed in the UNIX environment. The  rights profile
mechanism enables you to isolate commands that require a specific ID. Instead of
changing the ID on a command that anyone can access, you can place
the command with execution security attributes in a rights profile. A user or
role with that rights profile can then run the program without having to
become superuser.</p><p><a name="indexterm-1032"></a>IDs can be specified as real or effective. Assigning effective IDs is preferred
over assigning real IDs. Effective IDs are equivalent to the <tt>setuid</tt> feature in
the file permission bits. Effective IDs also identify the UID for auditing. However,
because some shell scripts and programs require a real UID of <tt>root</tt>, real UIDs
can be set as well. For example, the <tt>pkgadd</tt> command requires a real
rather than an effective UID. If an effective ID is not sufficient to
run a command, you need to change the ID to a real
ID. For the procedure,  see <a href="rbactask-4.html#rbactask-24">How to Create or Change a Rights Profile</a>.</p>

<a name="rbac-21"></a><h5>Applications That Check for Privileges</h5>
<p><a name="indexterm-1033"></a><a name="indexterm-1034"></a><a name="indexterm-1035"></a>Privileged applications can check for the use of privileges. The RBAC rights profile mechanism
enables you to specify the privileges for specific commands. Instead of requiring superuser
capabilities to use an application or command, you can isolate the command with
execution security attributes in a rights profile. A user or role with that
rights profile can then run the command with just the privileges that the
command requires to succeed.</p><p><a name="indexterm-1036"></a>Commands that check for privileges include the following:</p>
<ul><li><p>Kerberos commands, such as <tt>kadmin</tt>, <tt>kprop</tt>, and <tt>kdb5_util</tt></p></li>
<li><p>Network commands, such as <tt>ifconfig</tt>, <tt>routeadm</tt>, and <tt>snoop</tt></p></li>
<li><p>File and file system commands, such as <tt>chmod</tt>, <tt>chgrp</tt>, and <tt>mount</tt></p></li>
<li><p>Commands that control processes, such as <tt>kill</tt>, <tt>pcred</tt>, and <tt>rcapadm</tt></p></li></ul>
<p>To add commands with privileges to a rights profile, see <a href="rbactask-4.html#rbactask-24">How to Create or Change a Rights Profile</a>. To determine
what commands check for privileges in a particular profile, see <a href="privtask-20.html">Determining Your Assigned Privileges</a>.</p>

<a name="rbac-36"></a><h5>Applications That Check Authorizations</h5>
<p><a name="indexterm-1037"></a><a name="indexterm-1038"></a>The Solaris OS additionally provides commands that check authorizations. By definition, the <tt>root</tt>
user has all authorizations. Therefore, the <tt>root</tt> user can run any application. Applications that
check for authorizations include the following:</p>
<ul><li><p>The entire Solaris Management Console suite of tools</p></li>
<li><p>Audit administration commands, such as <tt>auditconfig</tt> and <tt>auditreduce</tt></p></li>
<li><p>Printer administration commands, such as <tt>lpadmin</tt> and <tt>lpfilter</tt></p></li>
<li><p>The batch job-related commands, such as <tt>at</tt>, <tt>atq</tt>, <tt>batch</tt>, and <tt>crontab</tt></p></li>
<li><p>Device-oriented commands, such as <tt>allocate</tt>, <tt>deallocate</tt>, <tt>list_devices</tt>, and <tt>cdrw</tt>.</p></li></ul>
<p>To test a script or program for authorizations, see <a href="rbactask-4.html#rbactask-12">Example&nbsp;9-25</a>. To write
a program that requires authorizations, see <a href="http://docs.sun.com/doc/819-2145/priv-14?a=view">About Authorizations in <i>Solaris Security for Developers Guide</i></a>.</p>

<a name="rbac-33"></a><h4>RBAC Rights Profiles</h4>
<a name="indexterm-1039"></a><a name="indexterm-1040"></a><p>A <b>rights profile</b> is a collection of system overrides that can be assigned to
a role or user. A rights profile can include authorizations, commands with assigned
security attributes, and other rights profiles. Rights profile information is split between the
<tt>prof_attr</tt> and <tt>exec_attr</tt> databases. The rights profile name and authorizations are in the
<tt>prof_attr</tt> database. The rights profile name and the commands with assigned security attributes
are in the <tt>exec_attr</tt> database.</p><p>For more information on rights profiles, see the following sections:</p>
<ul><li><p><a href="rbacref-26.html">Contents of Rights Profiles</a></p></li>
<li><p><a href="rbacref-6.html#rbacref-12"><tt>prof_attr</tt> Database</a></p></li>
<li><p><a href="rbacref-6.html#rbacref-13"><tt>exec_attr</tt> Database</a></p></li></ul>


<a name="rbac-31"></a><h4>RBAC Roles</h4>
<a name="indexterm-1041"></a><p>A <b>role</b> is a special type of user account from which you can
run privileged applications. Roles are created in the same general manner as user
accounts. Roles have a home directory, a group assignment, a password, and so
on. Rights profiles and authorizations give the role administrative capabilities. Roles cannot inherit
capabilities from other roles or other users. Discrete roles parcel out superuser capabilities,
and thus enable more secure administrative practices.</p><p>When a user assumes a role, the role's attributes replace all user
attributes. Role information is stored in the <tt>passwd</tt>, <tt>shadow</tt>, and <tt>user_attr</tt> databases. Role information
can be added to the <tt>audit_user</tt> database. For detailed information on setting up roles,
see the following sections:</p>
<ul><li><p><a href="rbactask-30.html#rbactask-16">How to Plan Your RBAC Implementation</a></p></li>
<li><p><a href="rbactask-30.html#rbactask-22">How to Create a Role From the Command Line</a></p></li>
<li><p><a href="rbactask-4.html#rbactask-23">How to Change the Properties of a Role</a></p></li></ul>
<p>A role can be assigned to more than one user. All users
who can assume the same role have the same role home directory, operate
in the same environment, and have access to the same files. Users can
assume roles from the command line by running the <tt>su</tt> command and supplying
the role name and password. Users can also assume a role in the
Solaris Management Console tool.</p><p><a name="indexterm-1042"></a><a name="indexterm-1043"></a><a name="indexterm-1044"></a>A role cannot log in directly. A user logs in, and then assumes
a role. Having assumed a role, the user cannot assume another role without
first exiting their current role. Having exited the role, the user can then
assume another role.</p><p>You can prevent anonymous <tt>root</tt> login by changing the <tt>root</tt> user into a
role, as shown in  <a href="rbactask-30.html#rbactask-20">How to Make <tt>root</tt> User Into a Role</a>.  If the profile shell command, <tt>pfexec</tt>,
is being audited, the audit trail contains the login user's real UID, the
roles that the user has assumed, and the actions that the role performed.
To audit the system or a particular user for role operations, see <a href="rbactask-30.html#rbactask-34">How to Audit Roles</a>.</p><p>No predefined roles are shipped with Solaris software. However, the rights profiles that
ship with the software are designed to map to roles. For example, the
Primary Administrator rights profile can be used to create the Primary Administrator role.</p>
<ul><li><p>To configure the Primary Administrator role, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><p>To configure other roles, see <a href="rbactask-30.html#rbactask-32">How to Create and Assign a Role by Using the GUI</a>.</p></li>
<li><p>To create roles on the command line, see <a href="rbactask-10.html">Managing RBAC (Task Map)</a>.</p></li></ul>


<a name="rbac-37"></a><h4>Profile Shell in RBAC</h4>
<a name="indexterm-1045"></a><a name="indexterm-1046"></a><a name="indexterm-1047"></a><a name="indexterm-1048"></a><a name="indexterm-1049"></a><a name="indexterm-1050"></a><a name="indexterm-1051"></a><a name="indexterm-1052"></a><a name="indexterm-1053"></a><a name="indexterm-1054"></a><a name="indexterm-1055"></a><a name="indexterm-1056"></a><a name="indexterm-1057"></a><p>Roles can run privileged applications from the Solaris Management Console launcher or from
a <b>profile shell</b>. A profile shell is a special shell that recognizes the security
attributes that are included in a rights profile. Profile shells are launched when
the user runs the <tt>su</tt> command to assume a role. The profile
shells are <tt>pfsh</tt>, <tt>pfcsh</tt>, and <tt>pfksh</tt>. The shells  correspond to Bourne shell
(<tt>sh</tt>), C shell (<tt>csh</tt>), and Korn shell (<tt>ksh</tt>), respectively.</p><p>Users who have been directly assigned a rights profile must invoke a profile
shell to run the commands with security attributes. For usability and security considerations,
see <a href="#rbac-10">Security Considerations When Directly Assigning Security Attributes</a>.</p><p>All commands that are executed in a profile shell can be audited.
For more information, see <a href="rbactask-30.html#rbactask-34">How to Audit Roles</a>.</p>

<a name="rbac-34"></a><h4>Name Service Scope and RBAC</h4>
<p><a name="indexterm-1058"></a><a name="indexterm-1059"></a>Name service scope is an important concept for understanding RBAC. The scope of
a role might be limited to an individual host. Alternatively, the scope might
include all hosts that are served by a name service such as NIS,
NIS+, or LDAP. The name service scope for a system is specified
in the file <tt>/etc/nsswitch.conf</tt>. A lookup stops at the first match. For example, if
a rights profile exists in two name service scopes, only the entries in
the first name service scope are used. If <tt>files</tt> is the first match,
then the scope of the role is limited to the local host.</p>

<a name="rbac-10"></a><h4>Security Considerations When Directly Assigning Security Attributes</h4>
<a name="indexterm-1060"></a><p>Typically, a user obtains administrative capabilities through a role. Authorizations and privileged commands
are grouped into a rights profile. The rights profile is included in a
role, and the role is assigned to a user.</p><p>Direct assignment of rights profiles and security attributes is also possible:</p>
<ul><li><p>Rights profiles, privileges, and authorizations can be assigned directly to users.</p></li>
<li><p>Privileges and authorizations can be assigned directly to roles.</p></li></ul>
<p>However, direct assignment is not a secure practice. Users and roles with a
directly assigned privilege could override security policy wherever this privilege is required by
the kernel. When a privilege is a security attribute of a command in
a  rights profile, that privilege is available only for that command by
someone who has that rights profile. The privilege is not available for other
commands that the user or role might run.</p><p>Since authorizations act at the user level, direct assignment of authorizations can be
less dangerous than direct assignment of privileges. However, authorizations can enable a user
to perform highly secure tasks, such as delegate device administration.</p><p>A rights profile that is assigned directly to a user presents usability problems
more than security problems. The commands with security attributes in the rights profile
can only succeed in a profile shell. The user must open a profile
shell, then type the commands. A role that is assigned a rights profile
gets a profile shell automatically. Therefore, the commands succeed in the role's shell.</p><p>Rights profiles provide an extensible, clean way to group security characteristics for particular
administrative tasks.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="prbac-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="prbac-2.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

