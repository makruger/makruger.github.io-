<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using Kerberos Encryption Types - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="refer-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="refer-19.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level3"><a href="refer-2.html">Kerberos Files</a></p>
<p class="toc level3"><a href="refer-5.html">Kerberos Commands</a></p>
<p class="toc level3"><a href="refer-9.html">Kerberos Daemons</a></p>
<p class="toc level3"><a href="refer-11.html">Kerberos Terminology</a></p>
<p class="toc level3"><a href="refer-14.html">How the Kerberos Authentication System Works</a></p>
<p class="toc level3"><a href="refer-15.html">Gaining Access to a Service Using Kerberos</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Using Kerberos Encryption Types</a></p>
</div>
<p class="toc level3"><a href="refer-19.html">Using the <tt>gsscred</tt> Table</a></p>
<p class="toc level3"><a href="works-11.html">Notable Differences Between Solaris Kerberos and MIT Kerberos</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="egric"></a><h3>Using Kerberos Encryption Types</h3>
<a name="indexterm-3083"></a><a name="indexterm-3084"></a><p>Encryption types identify which cryptographic algorithms and mode to use when cryptographic operations
are performed. The <tt>aes</tt>, <tt>des3-cbc-sha1</tt> and <tt>rc4&ndash;hmac</tt> encryption types enable the creation of
keys that can be used for higher strength cryptographic operations. These higher strength
operations enhance the overall security of the Kerberos service.</p>
<hr><p><b>Note - </b>In releases prior to Solaris 10 8/07 release, the <tt>aes256-cts-hmac-sha1-96</tt> encryption type
can be used with the Kerberos service if the unbundled Strong Cryptographic packages
are  installed.</p>
<hr>
<p>When a client requests a ticket from the KDC, the KDC must
use keys whose encryption type is compatible with both the client and the
server.  While the Kerberos protocol allows the client to request that the
KDC use particular encryption types for the client's part of the ticket reply,
the protocol does not allow the server to specify encryption types to the
KDC.</p>
<hr><p><b>Note - </b>If you have a master KDC installed that is not running the
Solaris 10 release, the slave KDCs must be upgraded to the Solaris 10
release before you upgrade the master KDC. A Solaris 10 master KDC will
use the new encryption types, which an older slave will not be able
to handle.</p>
<hr>
<p>The following lists some of the issues that must be considered before you
change the encryption types.</p>
<ul><li><p>The KDC assumes that the first key/enctype associated with the server principal entry in the principal database is supported by the server.</p></li>
<li><p>On the KDC, you should make sure that the keys generated for the principal are compatible with the systems on which the principal will be authenticated. By default, the <tt>kadmin</tt> command creates keys for all supported encryption types. If the systems that the principal is used on do not support this default set of encryption types, then you should restrict the encryption types when creating a principal. You can restrict the encryption types through use of the <tt>-e</tt> flag in <tt>kadmin</tt> <tt>addprinc</tt> or by setting the <tt>supported_enctypes</tt> parameter in the <tt>kdc.conf</tt> file to this subset.  The <tt>supported_enctypes</tt> parameter should be used when most of the systems in a Kerberos realm support a subset of the default set of encryption types. Setting <tt>supported_enctypes</tt> specifies the default set of encryption types <tt>kadmin</tt> <tt>addprinc</tt> uses when it creates a principal for a particular realm. As a general rule, it is best to control the encryption types used by Kerberos using one of these two methods.</p></li>
<li><p>When determining the encryption types a system supports, consider both the version of Kerberos running on the system as well as the cryptographic algorithms supported by the server application for which a server principal is being created. For example, when creating an <tt>nfs/hostname</tt> service principal, you should restrict the encryption types to the types supported by the NFS server on that host. Note that in the Solaris 10 release, all supported Kerberos encryption types are also supported by the NFS server.</p></li>
<li><p>The <tt>master_key_enctype</tt> parameter in the <tt>kdc.conf</tt> file can be used to control the encryption type of the master key that encrypts the entries in the principal database. Do not use this parameter if the KDC principal database has already been created. The <tt>master_key_enctype</tt> parameter can be used at database creation time  to change the default master key encryption type from <tt>des-cbc-crc</tt> to a stronger encryption type. Make sure that all slave KDCs support the chosen encryption type and that they have an identical <tt>master_key_enctype</tt> entry in their <tt>kdc.conf</tt> when configuring the slave KDCs. Also, make sure that the <tt>master_key_enctype</tt> is set to one of the encryption types in <tt>supported_enctypes</tt>, if <tt>supported_enctypes</tt> is set in <tt>kdc.conf</tt>. If either of these issues are not handled properly, then the master KDC might not be able to work with the slave KDCs.</p></li>
<li><p>On the client, you can control which encryption types the client requests when getting tickets from the KDC through a couple of parameters in <tt>krb5.conf</tt>. The <tt>default_tkt_enctypes</tt> parameter specifies the encryption types the client is willing to use when the client requests a ticket-granting ticket (TGT) from the KDC. The TGT is used by the client to acquire other server tickets in a more efficient manner. The effect of setting <tt>default_tkt_enctypes</tt> is to give the client some control over the encryption types used to protect the communication between the client and KDC when the client requests a server ticket using the TGT (this is called a TGS request). Note, that the encryption types specified in <tt>default_tkt_enctypes</tt> must match at least one of the principal key encryption types in the principal database stored on the KDC. Otherwise, the TGT request will fail. In most situations, it is best not to set <tt>default_tkt_enctypes</tt> because this parameter can be a source of interoperability problems. By default, the client code requests that all supported encryption types and the KDC choose the encryption types based on the keys the KDC finds in the principal database.</p></li>
<li><p>The <tt>default_tgs_enctypes</tt> parameter restricts the encryption types the client requests in its TGS requests, which are used to acquire server tickets. This parameter also restricts the encryption types the KDC uses when creating the session key that the client and server share.  For example, if a client wants to only use 3DES encryption when doing secure NFS, you should set <tt>default_tgs_enctypes</tt> = <tt>des3-cbc-sha1</tt>. Make sure that the client and server principals have a <tt>des-3-cbc-sha1</tt> key in the principal database. As with <tt>default_tkt_enctype</tt>, it is probably best in most cases not to set this because it can cause interoperability problems if the credentials are not setup properly both on the KDC and the server.</p></li>
<li><p>On the server, you can control the encryption types accepted by the server with the <tt>permitted_enctypes</tt> in <tt>kdc.conf</tt>. In addition, you can specify the encryption types used when creating <tt>keytab</tt> entries. Again, it is generally best not to use either of these methods to control encryption types and instead let the KDC determine the encryption types to use because the KDC does not communicate with the server application to determine which key or encryption type to use.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="refer-15.html">Previous</a>
             </td>
             <td align="right">
                 <a href="refer-19.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

