<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Managing a KDC on an LDAP Directory Server - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="aadmin-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="setup-280.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level3"><a href="setup-306.html">Configuring the Kerberos Service (Task Map)</a></p>
<p class="toc level3"><a href="ezecs.html">Configuring Additional Kerberos Services (Task Map)</a></p>
<p class="toc level3"><a href="setup-9.html">Configuring KDC Servers</a></p>
<p class="toc level3"><a href="setup-87.html">Configuring Cross-Realm Authentication</a></p>
<p class="toc level3"><a href="setup-119.html">Configuring Kerberos Network Application Servers</a></p>
<p class="toc level3"><a href="setup-97.html">Configuring Kerberos NFS Servers</a></p>
<p class="toc level3"><a href="setup-148.html">Configuring Kerberos Clients</a></p>
<p class="toc level3"><a href="setup-192.html">Synchronizing Clocks Between KDCs and Kerberos Clients</a></p>
<p class="toc level3"><a href="aadmin-2.html">Swapping a Master KDC and a Slave KDC</a></p>
<p class="toc level3"><a href="aadmin-3.html">Administering the Kerberos Database</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Managing a KDC on an LDAP Directory Server</a></p>
</div>
<p class="toc level3"><a href="setup-280.html">Increasing Security on Kerberos Servers</a></p>
<p class="toc level2 tocsp"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ggklp"></a><h3>Managing a KDC on an LDAP Directory Server</h3>
<p>Most of the KDC administration tasks using an LDAP Directory Server are the
same as those for the DB2 server. There are some new tasks
that are specific to working with LDAP.</p><a name="ggmnc"></a><h6>Table&nbsp;23-3 Configuring KDC Servers (Task Map)</h6><table><col width="27%"><col width="42%"><col width="30%"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Configuring a Master KDC</p></td>
<td align="left" valign="top" scope="row"><p>Configures and builds
the master KDC server and database for a realm using a manual process
and using LDAP for the KDC..</p></td>
<td align="left" valign="top" scope="row"><p><a href="setup-9.html#ggdqi">How to Configure a KDC to Use an LDAP Data Server</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mix Kerberos principal attributes with non-Kerberos object
class types.</p></td>
<td align="left" valign="top" scope="row"><p>Allows information stored with the Kerberos records to be shared with other
LDAP databases.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#ggkod">How to Mix Kerberos Principal Attributes in a Non-Kerberos Object Class Type</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Destroy a Realm</p></td>
<td align="left" valign="top" scope="row"><p>Removes all of the data associated with a realm</p></td>
<td align="left" valign="top" scope="row"><p><a href="#ggknu">How to Destroy a Realm on an LDAP Directory Server</a></p></td>
</tr>
</table>

<a name="ggkod"></a><h4>How to Mix Kerberos Principal Attributes in a Non-Kerberos Object Class Type</h4><p>This procedure allows for Kerberos principal attributes to be associated with non-Kerberos object
class types. In this procedure the <tt>krbprincipalaux</tt>, and <tt>krbTicketPolicyAux</tt> and <tt>krbPrincipalName</tt> attributes
are associated with the people object class.</p><p>In this procedure, the following configuration parameters are used: </p>
<ul><li><p>Directory Server = <tt>dsserver.example.com</tt></p></li>
<li><p>user principal = <tt>willf@EXAMPLE.COM</tt></p></li></ul>
<ol>
<li><b>Become superuser.</b></li>
<li><b>Prepare each entry in the people object class.</b><p>Repeat this step for each entry.</p><pre>cat &lt;&lt; EOF | ldapmodify -h dsserver.example.com -D "cn=directory manager"
dn: uid=willf,ou=people,dc=example,dc=com
changetype: modify
objectClass: krbprincipalaux
objectClass: krbTicketPolicyAux
krbPrincipalName: willf@EXAMPLE.COM
EOF</pre></li>
<li><b>Add a subtree attribute to the realm container.</b><p>This step allows for searching of principal entries in the <tt>ou=people,dc=example,dc=com</tt> container, as
well as in the default EXAMPLE.COM container.</p><pre># <tt><b>kdb5_ldap_util -D "cn=directory manager" modify</b></tt> \
            <tt><b>-subtrees 'ou=people,dc=example,dc=com' -r EXAMPLE.COM</b></tt></pre></li>
<li>(Optional) <b>If the KDC records are stored in DB2, migrate DB2 entries.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Dump the DB2 entries.</b><pre># <tt><b>kdb5_util dump &gt; dumpfile</b></tt></pre></li>
<li><b>Load the database into the LDAP server.</b><pre># <tt><b>kdb5_util load -update dumpfile</b></tt></pre></li></ol></li>
<li>(Optional) <b>Add the principal attributes to the KDC.</b><pre># kadmin.local -q 'addprinc willf'</pre></li></ol>

<a name="ggknu"></a><h4>How to Destroy a Realm on an LDAP Directory Server</h4><p>This procedure can be used if a different LDAP Directory Server has been
configured to handle a realm.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Destroy the realm.</b><pre># <tt><b>kdb5_ldap_util -D "cn=directory manager" destroy</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="aadmin-3.html">Previous</a>
             </td>
             <td align="right">
                 <a href="setup-280.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

