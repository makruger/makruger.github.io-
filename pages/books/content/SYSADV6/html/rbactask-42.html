<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using Roles - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rbactask-40.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rbactask-10.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level3"><a href="rbactask-14.html">Using RBAC (Task Map)</a></p>
<p class="toc level3"><a href="rbactask-15.html">Configuring RBAC (Task Map)</a></p>
<p class="toc level3"><a href="rbactask-30.html">Configuring RBAC</a></p>
<p class="toc level3"><a href="rbactask-40.html">Using Roles (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Using Roles</a></p>
</div>
<p class="toc level3"><a href="rbactask-10.html">Managing RBAC (Task Map)</a></p>
<p class="toc level3"><a href="rbactask-4.html">Managing RBAC</a></p>
<p class="toc level2 tocsp"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rbactask-42"></a><h3>Using Roles</h3>
<p><a name="indexterm-1226"></a>After you have set up roles with default Solaris rights profiles, and assigned
the roles to users, the roles can be used. A role can
be assumed on the command line. In the Solaris Management Console, a role
can also be used for administering the system locally and over the network.</p>

<a name="rbactask-2"></a><h4>How to Assume a Role in a Terminal Window</h4><a name="indexterm-1227"></a><a name="indexterm-1228"></a><a name="indexterm-1229"></a><a name="indexterm-1230"></a><a name="indexterm-1231"></a><h6>Before You Begin</h6><p>The role must already be assigned to you. The name service must
be updated with that information.</p><ol>
<li><b><a name="indexterm-1232"></a><a name="indexterm-1233"></a><a name="indexterm-1234"></a><a name="indexterm-1235"></a>In a terminal window, determine which roles you can assume.</b><pre>% roles
<i>Comma-separated list of role names is displayed</i></pre></li>
<li><b>Use the <tt>su</tt> command to assume a role.</b><pre>% su - <i>rolename</i>
Password: &lt;Type rolename password&gt;
$</pre><p>The <tt>su -</tt> <i>rolename</i> command changes the shell to a profile shell for the
role. A profile shell recognizes security attributes (authorizations, privileges, and set ID bits).</p></li>
<li><b>Verify that you are now in a role.</b><pre>$ /usr/ucb/whoami
<i>rolename</i></pre><p>You can now perform role tasks in this terminal window.</p></li>
<li>(Optional) <b>View the capabilities of your role.</b><p>For the procedure, see <a href="privtask-20.html#privtask-24">How to Determine the Privileged Commands That a Role Can Run</a>.</p></li></ol><a name="rbactask-11"></a><h6>Example&nbsp;9-10 Assuming the Primary Administrator Role</h6><a name="indexterm-1236"></a><a name="indexterm-1237"></a><a name="indexterm-1238"></a><p>In the following example, the user assumes the role of Primary Administrator. In
the default configuration, this role is equivalent to superuser. The role then checks
to see which privileges are available to any command that is typed in
the profile shell for the role.</p><pre>% <tt><b>roles</b></tt>
sysadmin,oper,primaryadm
% <tt><b>su - primaryadm</b></tt>
Password: &lt;Type primaryadm password&gt;
$ <tt><b>/usr/ucb/whoami</b></tt> Prompt has changed to role prompt
primaryadm
$ <tt><b>ppriv $$</b></tt>
1200:   pfksh
flags = &lt;none&gt;
        E (Effective): all
        I (Inheritable): basic
        P (Permitted): all
        L (Limit): all</pre><p>For information about privileges, see <a href="prbac-2.html">Privileges (Overview)</a>.</p><a name="rbactask-57"></a><h6>Example&nbsp;9-11 Assuming the <tt>root</tt> Role</h6><a name="indexterm-1239"></a><a name="indexterm-1240"></a><a name="indexterm-1241"></a><p>In the following example, the user assumes the <tt>root</tt> role. The role was
created in <a href="rbactask-30.html#rbactask-20">How to Make <tt>root</tt> User Into a Role</a></p><pre>% <tt><b>roles</b></tt>
root
% <tt><b>su - root</b></tt>
Password: &lt;Type root password&gt;
# <tt><b>/usr/ucb/whoami</b></tt> Prompt has changed to role prompt
root
$ <tt><b>ppriv $$</b></tt>
1200:   pfksh
flags = &lt;none&gt;
        E: all
        I: basic
        P: all
        L: all</pre><p>For information about privileges, see <a href="prbac-2.html">Privileges (Overview)</a>.</p><a name="rbactask-13"></a><h6>Example&nbsp;9-12 Assuming the System Administrator Role</h6><a name="indexterm-1242"></a><a name="indexterm-1243"></a><a name="indexterm-1244"></a><p>In the following example, the user assumes the role of System Administrator. In
contrast to the Primary Administrator role, the System Administrator has the basic set
of privileges in its effective set.</p><pre>% <tt><b>roles</b></tt>
sysadmin,oper,primaryadm
% <tt><b>su - sysadmin</b></tt>
Password: &lt;Type sysadmin password&gt;
$ <tt><b>/usr/ucb/whoami</b></tt> Prompt has changed to role prompt
sysadmin
$ <tt><b>ppriv $$</b></tt>
1200:   pfksh
flags = &lt;none&gt;
        E: basic
        I: basic
        P: basic
        L: all</pre><p>For information about privileges, see <a href="prbac-2.html">Privileges (Overview)</a>. For a short description of the
capabilities of the role, see <a href="rbacref-26.html#rbacref-23">System Administrator Rights Profile</a>.</p>

<a name="rbactask-21"></a><h4>How to Assume a Role in the Solaris Management Console</h4><a name="indexterm-1245"></a><a name="indexterm-1246"></a><a name="indexterm-1247"></a><a name="indexterm-1248"></a><a name="indexterm-1249"></a><a name="indexterm-1250"></a><p>To change information in the Solaris Management Console GUI requires administrative capabilities. A
role gives you administrative capabilities. If you want to view information, you must
have the <tt>solaris.admin.usermgr.read</tt> authorization. The Basic Solaris User rights profile includes this authorization.</p><h6>Before You Begin</h6><p>An administrative role that can change the properties of users or roles must
have already been assigned to you. For example, the Primary Administrator role can
change the properties of users or roles.</p><ol>
<li><b>Start the Solaris Management Console.</b><pre>% <tt><b>/usr/sbin/smc &amp;</b></tt></pre><p>For detailed instructions, see <a href="http://docs.sun.com/doc/819-2379/smcover-95?a=view">Using the Solaris Management Tools With RBAC (Task Map) in <i>System Administration Guide: Basic Administration</i></a>.</p></li>
<li><b>Select the toolbox for your task.</b><p>Navigate to the toolbox that contains the tool or collection in the appropriate
name service scope and click the icon. The scopes are files (local), NIS,
NIS+, and LDAP. If the appropriate toolbox is not displayed in the navigation
pane, choose Open Toolbox from the Console menu and load the relevant toolbox.</p></li>
<li><b>Select the tool that you want to use.</b><p>Navigate to the tool or collection and click the icon. The tools for
managing the RBAC elements are in the Users tool, as shown in the
following figure.</p><br><img src="figures/usercoll.gif" alt="Window titled Management Tools shows the Navigation pane on the left, the Tools pane on the right, and the Information pane with Context Help below." width="556" height="494"></img></li>
<li><b>Type your user name and password in the Login: User Name dialog box.</b></li>
<li><b>Authenticate yourself in the Login: Role dialog box.</b><p>The Role option menu in the dialog box displays the roles that are
assigned to you. Choose a role and type the role password.</p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rbactask-40.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rbactask-10.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

