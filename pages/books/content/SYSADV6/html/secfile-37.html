<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using Access Control Lists to Protect Files - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="secfile-60.html">Previous</a>
             </td>
             <td align="right">
                 <a href="secfile-68.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level3"><a href="secfile-60.html">Using UNIX Permissions to Protect Files</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Using Access Control Lists to Protect Files</a></p>
</div>
<p class="toc level3"><a href="secfile-68.html">Preventing Executable Files From Compromising Security</a></p>
<p class="toc level3"><a href="secfile-10.html">Protecting Files (Task Map)</a></p>
<p class="toc level3"><a href="secfile-15.html">Protecting Files With UNIX Permissions (Task Map)</a></p>
<p class="toc level3"><a href="secfile-30.html">Protecting Files With ACLs (Task Map)</a></p>
<p class="toc level3"><a href="secfile-40.html">Protecting Against Programs With Security Risk (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="secfile-37"></a><h3>Using Access Control Lists to Protect Files</h3>
<a name="indexterm-820"></a><a name="indexterm-821"></a><a name="indexterm-822"></a><a name="indexterm-823"></a><a name="indexterm-824"></a><a name="indexterm-825"></a><a name="indexterm-826"></a><a name="indexterm-827"></a><p>Traditional UNIX file protection provides read, write, and execute permissions for the three
user classes: file owner, file group, and other. An access control list (ACL)
provides better file security by enabling you to do the following:</p>
<ul><li><p>Define file permissions for the file owner, the group, other, specific users and groups</p></li>
<li><p>Define default permissions for each of the preceding categories</p></li></ul>
<p>For example, if you want everyone in a group to be able
to read a file, you can simply grant group read permissions on that
file. Now, assume that you want only one person in the group to
be able to write to that file. Standard UNIX does not provide that
level of file security. However, an ACL provides this level of file security.</p><p>ACL entries define an ACL on a file. The entries are set
through the <tt>setfacl</tt> command. ACL entries consist of the following fields separated by
colons:</p><pre><i>entry-type:</i>[<i>uid</i>|<i>gid</i>]<i>:perms</i></pre><dl><dt><i>entry-type</i></dt>
<dd><p>Is the type of ACL entry on which to set file permissions. For example, <i>entry-type</i> can be <tt>user</tt> (the owner of a file) or <tt>mask</tt> (the ACL mask). For a listing of ACL entries, see <a href="#secfile-35">Table&nbsp;7-7</a> and <a href="#secfile-52">Table&nbsp;7-8</a>.</p></dd>
<dt><i>uid</i></dt>
<dd><p>Is the user name or user ID (UID).</p></dd>
<dt><i>gid</i></dt>
<dd><p>Is the group name or group ID (GID).</p></dd>
<dt><i>perms</i></dt>
<dd><p>Represents the permissions that are set on <i>entry-type</i>. <i>perms</i> can be indicated by the symbolic characters <tt>rwx</tt> or an octal number. These are the same numbers that are used with the <tt>chmod</tt> command.</p></dd>
</dl>
<p>In the following example, an ACL entry sets read and write permissions for
the user <tt>stacey</tt>.</p><pre>user:stacey:rw-</pre>
<hr><p><b>Caution - </b><a name="indexterm-828"></a>UFS file system attributes such as ACLs are supported in UFS file systems
only. Thus, if you restore or copy files with ACL entries into
the <tt>/tmp</tt> directory, which is usually mounted as a TMPFS file system, the
ACL entries will be lost. Use the <tt>/var/tmp</tt> directory for temporary storage of
UFS files.</p>
<hr>


<a name="secfile-38"></a><h4>ACL Entries for Files</h4>
<a name="indexterm-829"></a><a name="indexterm-830"></a><a name="indexterm-831"></a><a name="indexterm-832"></a><a name="indexterm-833"></a><a name="indexterm-834"></a><p>The following table lists the valid ACL entries that you might use
when setting ACLs on files. The first three ACL entries provide the basic
UNIX file protection.</p><a name="secfile-35"></a><h6>Table&nbsp;7-7 ACL Entries for Files</h6><table><col width="21%"><col width="78%"><tr><th align="left" valign="top" scope="column"><p>ACL Entry</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>u[ser]::</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>File owner permissions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>g[roup]::</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>File group permissions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>o[ther]:</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Permissions for users other than the
file owner or members of the file group.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>m[ask]:</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>The ACL mask. The mask entry
indicates the maximum permissions that are allowed for users (other than the owner)
and for groups. The mask is a quick way to change permissions on
all the users and groups.</p><p>For example, the <tt>mask:r--</tt> mask entry indicates that users
and groups cannot have more than read permissions, even though they might have
write and execute permissions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>u[ser]:</tt><i>uid:perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Permissions for a specific user. For <i>uid</i>, you can specify
either a user name or a numeric UID.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>g[roup]:</tt><i>gid:perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Permissions for a specific group.
For <i>gid</i>, you can specify either a group name or a numeric GID.</p></td>
</tr>
</table>

<a name="secfile-39"></a><h4>ACL Entries for Directories</h4>
<a name="indexterm-835"></a><a name="indexterm-836"></a><a name="indexterm-837"></a><a name="indexterm-838"></a><a name="indexterm-839"></a><a name="indexterm-840"></a><a name="indexterm-841"></a><a name="indexterm-842"></a><a name="indexterm-843"></a><a name="indexterm-844"></a><a name="indexterm-845"></a><p>In addition to the ACL entries that are described in <a href="#secfile-35">Table&nbsp;7-7</a>, you
can set default ACL entries on a directory. Files or directories created in
a directory that has default ACL entries will have the same ACL entries
as the default ACL entries. <a href="#secfile-52">Table&nbsp;7-8</a> lists the default ACL entries for directories.</p><p>When you set default ACL entries for specific users and groups on
a directory for the first time, you must also set default ACL entries
for the file owner, file group, others, and the ACL mask. These entries
are required. They are the first four default ACL entries in the following
table.</p><a name="secfile-52"></a><h6>Table&nbsp;7-8 Default ACL Entries for Directories</h6><table><col width="35%"><col width="64%"><tr><th align="left" valign="top" scope="column"><p>Default ACL Entry</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>d[efault]:u[ser]::</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Default file owner permissions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>d[efault]:g[roup]::</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Default file group permissions.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>d[efault]:o[ther]:</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Default permissions for users
other than the file owner or members of the file group.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>d[efault]:m[ask]:</tt><i>perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Default ACL mask.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>d[efault]:u[ser]:</tt><i>uid:perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Default
permissions for a specific user. For <i>uid</i>, you can specify either a user
name or a numeric UID.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>d[efault]:g[roup]:</tt><i>gid:perms</i></p></td>
<td align="left" valign="top" scope="row"><p>Default permissions for a specific group. For <i>gid</i>, you
can specify either a group name or a numeric GID.</p></td>
</tr>
</table>

<a name="secfile-24"></a><h4>Commands for Administering ACLs</h4>
<a name="indexterm-846"></a><a name="indexterm-847"></a><a name="indexterm-848"></a><a name="indexterm-849"></a><a name="indexterm-850"></a><a name="indexterm-851"></a><a name="indexterm-852"></a><a name="indexterm-853"></a><a name="indexterm-854"></a><a name="indexterm-855"></a><p>The following commands administer ACLs on files or directories.</p><dl><dt><tt>setfacl</tt> command</dt>
<dd><p>Sets, adds, modifies, and deletes ACL entries. For more information, see the <a href="http://docs.sun.com/doc/819-2239/setfacl-1?a=view"><tt>setfacl</tt>(1)</a> man page.</p></dd>
<dt><tt>getfacl</tt> command</dt>
<dd><p>Displays ACL entries. For more information, see the <a href="http://docs.sun.com/doc/819-2239/getfacl-1?a=view"><tt>getfacl</tt>(1)</a> man page.</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="secfile-60.html">Previous</a>
             </td>
             <td align="right">
                 <a href="secfile-68.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

