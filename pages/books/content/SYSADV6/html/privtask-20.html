<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Determining Your Assigned Privileges - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="privtask-16.html">Previous</a>
             </td>
             <td align="right">
                 <a href="privref-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level2"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level3"><a href="privtask-3.html">Managing and Using Privileges (Task Map)</a></p>
<p class="toc level3"><a href="privtask-14.html">Managing Privileges (Task Map)</a></p>
<p class="toc level3"><a href="privtask-10.html">Managing Privileges</a></p>
<p class="toc level3"><a href="privtask-16.html">Determining Your Privileges (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Determining Your Assigned Privileges</a></p>
</div>
<p class="toc level2 tocsp"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="privtask-20"></a><h3>Determining Your Assigned Privileges</h3>
<p><a name="indexterm-1473"></a>When a user is directly assigned privileges, the privileges are in effect in
every shell. When a user is not directly assigned privileges, then the user
must open a profile shell. For example, when commands with assigned privileges are
in a rights profile that is in the user's list of rights
profiles, then the user must execute the command in a profile shell.</p>

<a name="privtask-9"></a><h4>How to Determine the Privileges That You Have Been Directly Assigned</h4><a name="indexterm-1474"></a><a name="indexterm-1475"></a><p>The following procedure shows how to determine if you have been directly assigned
privileges.</p>
<hr><p><b>Caution - </b>Inappropriate use of directly assigned privileges can result in unintentional breaches of security.
For a discussion, see <a href="rbac-1.html#rbac-10">Security Considerations When Directly Assigning Security Attributes</a>.</p>
<hr>
<ol>
<li><b>List the privileges that your processes can use.</b><p>See <a href="privtask-10.html#privtask-5">How to Determine the Privileges on a Process</a> for the procedure.</p></li>
<li><b>Invoke actions and run commands in any shell.</b><p>The privileges that are listed in the effective set are in effect throughout
your session. If you have been directly assigned privileges in addition to the basic
set, the privileges are listed in the effective set.</p></li></ol><a name="privtask-23"></a><h6>Example&nbsp;11-9 Determining Your Directly-Assigned Privileges</h6><a name="indexterm-1476"></a><p>If you have been directly assigned privileges, then your basic set contains more
than the default basic set. In this example, the user always has
access to the <tt>proc_clock_highres</tt> privilege.</p><pre>% <tt><b>/usr/ucb/whoami</b></tt>
jdoe
% <tt><b>ppriv -v $$</b></tt>
1800:   pfksh
flags = &lt;none&gt;
        E: file_link_any,&hellip;,<tt><b>proc_clock_highres</b></tt>,proc_session
        I: file_link_any,&hellip;,<tt><b>proc_clock_highres</b></tt>,proc_session
        P: file_link_any,&hellip;,<tt><b>proc_clock_highres</b></tt>,proc_session
        L: cpc_cpu,dtrace_kernel,dtrace_proc,dtrace_user,&hellip;,sys_time
% <tt><b>ppriv -vl proc_clock_highres</b></tt>
        Allows a process to use high resolution timers.</pre><a name="privtask-27"></a><h6>Example&nbsp;11-10 Determining a Role's Directly-Assigned Privileges</h6><a name="indexterm-1477"></a><a name="indexterm-1478"></a><p>Roles use an administrative shell, or profile shell. Users who assume a role
can use the role's shell to list the privileges that have been
directly assigned to the role. In the following example, the role <tt>realtime</tt> has been
directly assigned privileges to handle date and time programs.</p><pre>% <tt><b>su - realtime</b></tt>
Password: &lt;Type realtime password&gt;
$ <tt><b>/usr/ucb/whoami</b></tt>
realtime
$ <tt><b>ppriv -v $$</b></tt>
1600:   pfksh
flags = &lt;none&gt;
        E: file_link_any,&hellip;,proc_clock_highres,proc_session,sys_time
        I: file_link_any,&hellip;,proc_clock_highres,proc_session,sys_time
        P: file_link_any,&hellip;,proc_clock_highres,proc_session,sys_time
        L: cpc_cpu,dtrace_kernel,dtrace_proc,dtrace_user,&hellip;,sys_time</pre>

<a name="privtask-22"></a><h4>How to Determine the Privileged Commands That You Can Run</h4><a name="indexterm-1479"></a><a name="indexterm-1480"></a><p>When a user is not directly assigned privileges, then the user gets access
to privileged commands through a rights profile. Commands in a rights profile must
be executed in a profile shell.</p><h6>Before You Begin</h6><p>The user or role who authenticates to the Solaris Management Console must have
the <tt>solaris.admin.usermgr.read</tt> authorization. The Basic Solaris User rights profile includes this authorization.</p><ol>
<li><b>Determine the rights profiles that you have been assigned.</b><pre>$ <tt><b>/usr/sadm/bin/smuser list -- -n </tt><i>username</i><tt> -l</b></tt>
Authenticating as user: admin
&hellip; Please enter a string value for: password :: 
&hellip;
User name:      <i>username</i>
User ID (UID):  130
Primary group:  staff
Secondary groups: 
Comment: object mgt jobs
Login Shell: /bin/sh
Home dir server: <i>system</i>
Home directory: /export/home/<i>username</i>
AutoHome setup: True
Mail server: <i>system</i>
<tt><b>Rights: Object Access Management</b></tt>
Assigned Roles:</pre></li>
<li><b>Locate the line that begins with &ldquo;Rights:&rdquo;.</b><p>The &ldquo;Rights&rdquo; line lists the names of the rights profiles that have been
directly assigned to you.</p></li>
<li><b>Find the names of the rights profiles in the <tt>exec_attr</tt> database.</b><pre>$ <tt><b>cd /etc/security</b></tt>
$ <tt><b>grep "Object Access Management" exec_attr</b></tt> 
Object Access Management:solaris:cmd:::/usr/bin/chgrp:privs=file_chown
Object Access Management:solaris:cmd:::/usr/bin/chown:privs=file_chown
Object Access Management:suser:cmd:::/usr/bin/chgrp:euid=0
Object Access Management:suser:cmd:::/usr/bin/chmod:euid=0
&hellip;</pre><p>The commands with added privileges are listed at the end of <tt>solaris</tt>
policy entries.</p></li>
<li><b>Type the commands that require privileges in a profile shell.</b><p>When the commands are typed in a regular shell, the commands do
not run with privilege, and do not succeed.</p><pre>% <tt><b>pfsh</b></tt>
$</pre></li></ol><a name="privtask-34"></a><h6>Example&nbsp;11-11 Running Privileged Commands in a Profile Shell</h6><p>In the following example, the user <tt>jdoe</tt> cannot change the group permissions on
a file from his regular shell. However, <tt>jdoe</tt> can change the permissions when
typing the command in a profile shell.</p><pre>% <tt><b>whoami</b></tt>
jdoe
% <tt><b>ls -l useful.script</b></tt>
-rwxr-xr-- 1 nodoe eng 262 Apr 2 10:52 useful.script
<tt><b>chgrp staff useful.script</b></tt>
chgrp: useful.script: Not owner
% <tt><b>pfksh</b></tt>
$ <tt><b>/usr/ucb/whoami</b></tt>
jdoe
$ <tt><b>chgrp staff useful.script</b></tt>
$ <tt><b>chown jdoe useful.script</b></tt>
$ <tt><b>ls -l useful.script</b></tt>
-rwxr-xr-- 1 jdoe staff 262 Apr 2 10:53 useful.script</pre>

<a name="privtask-24"></a><h4>How to Determine the Privileged Commands That a Role Can Run</h4><a name="indexterm-1481"></a><p>A role gets access to privileged commands through a rights profile that contains
commands with assigned privileges. The most secure way to provide a user with
access to privileged commands is to assign a role to them. After assuming
the role, the user can execute all the privileged commands that are included
in the rights profiles for that role.</p><h6>Before You Begin</h6><p>The user or role who authenticates to the Solaris Management Console must have
the <tt>solaris.admin.usermgr.read</tt> authorization. The Basic Solaris User rights profile includes this authorization.</p><ol>
<li><b>Determine the roles that you can assume.</b><pre>$ <tt><b>/usr/sadm/bin/smuser list -- -n </tt><i>username</i><tt> -l</b></tt>
Authenticating as user: primadmin
&hellip;
User name:      <i>username</i>
User ID (UID):  110
Primary group:  staff
Secondary groups: 
Comment: Has admin roles
Login Shell: /bin/sh
&hellip;
Rights: 
Assigned Roles: primadmin, admin</pre></li>
<li><b>Locate the line that begins with &ldquo;Assigned Roles:&rdquo;.</b><p>The &ldquo;Assigned Roles&rdquo; line lists the roles that you can assume.</p></li>
<li><b>Determine the rights profiles that are included in one of your roles.</b><pre>$ <tt><b>/usr/sadm/bin/smuser list -- -n admin -l</b></tt>
Authenticating as user: primadmin
&hellip;
User name:      admin
User ID (UID):  101
Primary group:  sysadmin
Secondary groups:
Comment: system administrator
Login Shell: /bin/pfksh
&hellip;
Rights: System Administrator
Assigned Roles:</pre></li>
<li><b>Locate the names of the rights profiles for the role in the
&ldquo;Rights:&rdquo; line.</b></li>
<li><b>Find the rights profiles in the <tt>prof_attr</tt> database.</b><p>Because the System Administrator profile is a collection of profiles, you need to
list the profiles in the System Administrator profile.</p><pre>$ <tt><b>cd /etc/security</b></tt>
$ <tt><b>grep "System Administrator" prof_attr</b></tt> 
System Administrator:::Can perform most non-security administrative
tasks:profiles=Audit Review,Printer Management,Cron Management,
Device Management,File System Management,Mail Management,Maintenance
and Repair,Media Backup,Media Restore,Name Service Management,Network
Management,Object Access Management,Process Management,Software
Installation,User Management,All;help=RtSysAdmin.html</pre></li>
<li><b>For each rights profile, find the rights profiles in the <tt>exec_attr</tt> database.</b><p>For example, the Network Management profile is a supplementary profile of the System
Administrator profile. The Network Management profile includes a number of privileged commands.</p><pre>$ <tt><b>cd /etc/security</b></tt>
$ <tt><b>grep "Network Management" exec_attr</b></tt> 
Network Management:<tt><b>solaris</b></tt>:cmd:::/usr/sbin/ifconfig:<tt><b>privs=sys_net_config</b></tt>
Network Management:<tt><b>solaris</b></tt>:cmd:::/usr/sbin/route:<tt><b>privs=sys_net_config</b></tt>
&hellip;</pre><p>The commands and their assigned privileges are the final two fields of <tt>solaris</tt>
policy entries. You can run these commands in the profile shell of your
role.</p></li></ol><a name="privtask-36"></a><h6>Example&nbsp;11-12 Running the Privileged Commands in Your Role</h6><p>When a user assumes a role, the shell becomes a profile shell.
Therefore, the commands are executed with the privileges that were assigned to the
commands. In the following example, the <tt>admin</tt> role can change the permissions on the
<tt>useful.script</tt> file.</p><pre>% <tt><b>whoami</b></tt>
jdoe
% <tt><b>ls -l useful.script</b></tt>
-rwxr-xr-- 1 elsee eng 262 Apr 2 10:52 useful.script
<tt><b>chgrp admin useful.script</b></tt>
chgrp: useful.script: Not owner
% <tt><b>su - admin</b></tt>
Password: &lt;Type admin password&gt;
$ <tt><b>/usr/ucb/whoami</b></tt>
admin
$ <tt><b>chgrp admin useful.script</b></tt>
$ <tt><b>chown admin useful.script</b></tt>
$ <tt><b>ls -l useful.script</b></tt>
-rwxr-xr-- 1 admin admin 262 Apr 2 10:53 useful.script</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="privtask-16.html">Previous</a>
             </td>
             <td align="right">
                 <a href="privref-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

