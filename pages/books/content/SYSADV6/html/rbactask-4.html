<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Managing RBAC - System Administration Guide: Security Services</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">System Administration Guide: Security Services</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rbactask-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rbacref-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="oview-1.html">Part&nbsp;I&nbsp;Security Overview</a></p>
<p class="toc level2"><a href="secov-1.html">1.&nbsp;&nbsp;Security Services (Overview)</a></p>
<p class="toc level1 tocsp"><a href="sectm-1.html">Part&nbsp;II&nbsp;System, File, and Device Security</a></p>
<p class="toc level2"><a href="concept-1.html">2.&nbsp;&nbsp;Managing Machine Security (Overview)</a></p>
<p class="toc level2"><a href="secsys-1.html">3.&nbsp;&nbsp;Controlling Access to Systems (Tasks)</a></p>
<p class="toc level2"><a href="vscan-1.html">4.&nbsp;&nbsp;Virus Scanning Service (Tasks)</a></p>
<p class="toc level2"><a href="devtask-1.html">5.&nbsp;&nbsp;Controlling Access to Devices (Tasks)</a></p>
<p class="toc level2"><a href="bart-1.html">6.&nbsp;&nbsp;Using the Basic Audit Reporting Tool (Tasks)</a></p>
<p class="toc level2"><a href="secfile-1.html">7.&nbsp;&nbsp;Controlling Access to Files (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="prbactm-1.html">Part&nbsp;III&nbsp;Roles, Rights Profiles, and Privileges</a></p>
<p class="toc level2"><a href="prbac-1.html">8.&nbsp;&nbsp;Using Roles and Privileges (Overview)</a></p>
<p class="toc level2"><a href="rbactask-1.html">9.&nbsp;&nbsp;Using Role-Based Access Control (Tasks)</a></p>
<p class="toc level3"><a href="rbactask-14.html">Using RBAC (Task Map)</a></p>
<p class="toc level3"><a href="rbactask-15.html">Configuring RBAC (Task Map)</a></p>
<p class="toc level3"><a href="rbactask-30.html">Configuring RBAC</a></p>
<p class="toc level3"><a href="rbactask-40.html">Using Roles (Task Map)</a></p>
<p class="toc level3"><a href="rbactask-42.html">Using Roles</a></p>
<p class="toc level3"><a href="rbactask-10.html">Managing RBAC (Task Map)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Managing RBAC</a></p>
</div>
<p class="toc level2 tocsp"><a href="rbacref-1.html">10.&nbsp;&nbsp;Role-Based Access Control (Reference)</a></p>
<p class="toc level2"><a href="privtask-1.html">11.&nbsp;&nbsp;Privileges (Tasks)</a></p>
<p class="toc level2"><a href="privref-1.html">12.&nbsp;&nbsp;Privileges (Reference)</a></p>
<p class="toc level1 tocsp"><a href="scftm-1.html">Part&nbsp;IV&nbsp;Solaris Cryptographic Services</a></p>
<p class="toc level2"><a href="scf-1.html">13.&nbsp;&nbsp;Solaris Cryptographic Framework (Overview)</a></p>
<p class="toc level2"><a href="scftask-1.html">14.&nbsp;&nbsp;Solaris Cryptographic Framework (Tasks)</a></p>
<p class="toc level2"><a href="kmf-1.html">15.&nbsp;&nbsp;Solaris Key Management Framework</a></p>
<p class="toc level1 tocsp"><a href="authtm-1.html">Part&nbsp;V&nbsp;Authentication Services and Secure Communication</a></p>
<p class="toc level2"><a href="auth-1.html">16.&nbsp;&nbsp;Using Authentication Services (Tasks)</a></p>
<p class="toc level2"><a href="pam-1.html">17.&nbsp;&nbsp;Using PAM</a></p>
<p class="toc level2"><a href="sasl-1.html">18.&nbsp;&nbsp;Using SASL</a></p>
<p class="toc level2"><a href="sshuser-1.html">19.&nbsp;&nbsp;Using Solaris Secure Shell (Tasks)</a></p>
<p class="toc level2"><a href="sshref-1.html">20.&nbsp;&nbsp;Solaris Secure Shell (Reference)</a></p>
<p class="toc level1 tocsp"><a href="seamtm-1.html">Part&nbsp;VI&nbsp;Kerberos Service</a></p>
<p class="toc level2"><a href="intro-1.html">21.&nbsp;&nbsp;Introduction to the Kerberos Service</a></p>
<p class="toc level2"><a href="seamplan-1.html">22.&nbsp;&nbsp;Planning for the Kerberos Service</a></p>
<p class="toc level2"><a href="setup-8.html">23.&nbsp;&nbsp;Configuring the Kerberos Service (Tasks)</a></p>
<p class="toc level2"><a href="trouble-1.html">24.&nbsp;&nbsp;Kerberos Error Messages and Troubleshooting</a></p>
<p class="toc level2"><a href="aadmin-1.html">25.&nbsp;&nbsp;Administering Kerberos Principals and Policies (Tasks)</a></p>
<p class="toc level2"><a href="user-7.html">26.&nbsp;&nbsp;Using Kerberos Applications (Tasks)</a></p>
<p class="toc level2"><a href="refer-1.html">27.&nbsp;&nbsp;The Kerberos Service (Reference)</a></p>
<p class="toc level1 tocsp"><a href="audittm-1.html">Part&nbsp;VII&nbsp;Solaris Auditing</a></p>
<p class="toc level2"><a href="auditov-1.html">28.&nbsp;&nbsp;Solaris Auditing (Overview)</a></p>
<p class="toc level2"><a href="auditplan-1.html">29.&nbsp;&nbsp;Planning for Solaris Auditing</a></p>
<p class="toc level2"><a href="audittask-1.html">30.&nbsp;&nbsp;Managing Solaris Auditing (Tasks)</a></p>
<p class="toc level2"><a href="auditref-1.html">31.&nbsp;&nbsp;Solaris Auditing (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-2.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="rbactask-4"></a><h3>Managing RBAC</h3>
<p>The Solaris Management Console GUI is the preferred method for managing RBAC.</p>
<hr><p><b>Note - </b>Do not attempt to administer RBAC with the command line and the graphical
user interface at the same time. Conflicting changes could be made to the
configuration, and the behavior would be unpredictable. Both tools can administer RBAC, but
you cannot use both tools concurrently.</p>
<hr>


<a name="rbactask-56"></a><h4>How to Change the Password of a Role</h4><a name="indexterm-1253"></a><a name="indexterm-1254"></a><a name="indexterm-1255"></a><a name="indexterm-1256"></a><a name="indexterm-1257"></a><a name="indexterm-1258"></a><h6>Before You Begin</h6><p>You must have assumed a role that includes the User Security profile or
have switched to superuser. You cannot be in the role whose password
you want to change. A role cannot change its own password.</p><ul>
<li><b>Use one of the following methods to change a role's password.</b><ul>
<li><b>As superuser or in a role that includes the User Security rights profile,
run the <tt>passwd</tt> command.</b><pre>$ passwd  -r <i>naming-service</i> <i>target-rolename</i></pre><dl><dt><tt>-r</tt> <i>naming-service</i></dt>
<dd><p>Applies the password change to one of the following repositories <tt>files</tt>, <tt>nis</tt>, <tt>nisplus</tt>, or <tt>ldap</tt>. If a repository is not specified, the password is changed in <tt>files</tt>.</p></dd>
<dt><i>target-rolename</i></dt>
<dd><p>Is the name of an existing role that you want to modify.</p></dd>
</dl>
<p>For more command options, see the <a href="http://docs.sun.com/doc/819-2239/passwd-1?a=view"><tt>passwd</tt>(1)</a> man page.</p></li>
<li><b>Change the password in the Solaris Management Console.</b><p>To start the console, see <a href="rbactask-42.html#rbactask-21">How to Assume a Role in the Solaris Management Console</a>. </p><ol style="list-style-type: lower-alpha">
				 
<li><b>Log in to the console as superuser or in a role that
includes the User Security rights profile.</b><p>The login role cannot be the target role.</p></li>
<li><b>Choose the appropriate scope.</b><p>The <tt>Files</tt> scope modifies the role password on the local system. The <tt>LDAP</tt>
scope modifies the role password in the LDAP naming service.</p></li>
<li><b>Navigate to Administrative Roles and follow the instructions in the left-hand pane.</b><p>For more extensive information, see the online help.</p></li></ol></li>
<li><b>As superuser or in a role  that includes the User Security
rights profile, run the <tt>smrole</tt> command with the <tt>modify</tt> subcommand.</b><p><a name="indexterm-1259"></a>This command runs as a client of the Solaris Management Console server.</p><pre>$ /usr/sadm/bin/smrole -D <i>domain-name</i> -r <i>admin-role</i> -l <i>&lt;Type admin-role password&gt;</i> \
modify -- -n <i>target-rolename</i>  -P <i>password</i></pre><dl><dt><tt>-D</tt> <i>domain-name</i></dt>
<dd><p>Is the name of the domain that you want to manage.</p></dd>
<dt><tt>-r</tt> <i>admin-role</i></dt>
<dd><p>Is the name of the administrative role that can modify the target role. The administrative role must have the <tt>solaris.admin.usermgr.pswd</tt> authorization. The administrative role and the target role cannot be the same role.</p></dd>
<dt><tt>-l</tt></dt>
<dd><p>Is the prompt for the password of <i>admin-role</i>.</p></dd>
<dt><tt>--</tt></dt>
<dd><p>Is the required separator between authentication options and subcommand options.</p></dd>
<dt><tt>-n</tt> <i>target-rolename</i></dt>
<dd><p>Is the name of the target role.</p></dd>
<dt><tt>-P</tt> <i>password</i></dt>
<dd><p>Is the new password for <i>target-rolename</i>.</p></dd>
</dl>
<p>For the full list of command options, see the <a href="http://docs.sun.com/doc/819-2240/smrole-1m?a=view"><tt>smrole</tt>(1M)</a> man page.</p></li></ul></li></ul><a name="rbactask-48"></a><h6>Example&nbsp;9-13 Changing a Local Role's Password With the <tt>passwd</tt> Command</h6><p>In this example, superuser changes the password of the local <tt>operadm</tt> role.</p><pre># <tt><b>passwd -r files operadm</b></tt>
New password: Type new password
Re-enter new password: Retype new password</pre><a name="rbactask-52"></a><h6>Example&nbsp;9-14 Changing a Role's Password in an LDAP Repository</h6><p>In this example, the Primary Admin role changes the password of the
<tt>operadm</tt> role in the LDAP directory service.</p><pre>$ <tt><b>passwd -r ldap operadm</b></tt>
New password: Type new password
Re-enter new password: Retype new password</pre><a name="rbactask-54"></a><h6>Example&nbsp;9-15 Changing a Role's Password With the <tt>smrole modify</tt> Command</h6><p>In this example, the administrator contacts the Solaris Management Console server to change
the <tt>operadm</tt> password in the NIS domain. When the administrator does not provide
the password before pressing the Return key, the <tt>New Password:</tt> prompt appears.</p><pre>$ <tt><b>/usr/sadm/bin/smrole -D nis:/examplehost/example.domain \</b></tt>
<tt><b>-r primaryadm -l</b></tt> <i>&lt;Type primaryadm password&gt;</i> <tt><b>\</b></tt>
<tt><b>modify -- -n operadm -P</b></tt> Press the Return key
New Password: a!2@3#4$5%6*7
$</pre>

<a name="rbactask-23"></a><h4>How to Change the Properties of a Role</h4><a name="indexterm-1260"></a><a name="indexterm-1261"></a><a name="indexterm-1262"></a><a name="indexterm-1263"></a><a name="indexterm-1264"></a><a name="indexterm-1265"></a><a name="indexterm-1266"></a><a name="indexterm-1267"></a><h6>Before You Begin</h6><p>You must have assumed the role of Primary Administrator or have switched to
superuser to change the properties of a role. Role properties include password, rights
profiles, and authorizations.</p>
<hr><p><b>Note - </b>To change a role's password property, see <a href="#rbactask-56">How to Change the Password of a Role</a>.</p>
<hr>
<ul>
<li><b>Use one of the following methods to change the properties of a role.</b><ul>
<li><b>Use the Users tool in the Solaris Management Console.</b><p>To start the console, see <a href="rbactask-42.html#rbactask-21">How to Assume a Role in the Solaris Management Console</a>. Follow the instructions in the left-hand pane to
modify a role in Administrative Roles. For more extensive information, see the online
help.</p></li>
<li><b>Use the <tt>rolemod</tt> command.</b><p><a name="indexterm-1268"></a>This command modifies the attributes of a role that is defined in the
local name service.</p><pre>$ rolemod -c <i>comment</i> -P <i>profile-list</i> <i>rolename</i></pre><dl><dt><tt>-c</tt> <i>comment</i></dt>
<dd><p>Is the new comment that describes the capabilities of the role.</p></dd>
<dt><tt>-P</tt> <i>profile-list</i></dt>
<dd><p>Is the list of the profiles that are included in the role. This list replaces the current list of profiles.</p></dd>
<dt><i>rolename</i></dt>
<dd><p>Is the name of an existing, local role that you want to modify.</p></dd>
</dl>
<p>For more command options, see the <a href="http://docs.sun.com/doc/819-2240/rolemod-1m?a=view"><tt>rolemod</tt>(1M)</a> man page.</p></li>
<li><b>Use the <tt>smrole</tt> command with the <tt>modify</tt> subcommand.</b><p><a name="indexterm-1269"></a>This command modifies the attributes of a role in a distributed name service,
such as NIS, NIS+, or LDAP. This command runs as a client of
the Solaris Management Console server.</p><pre>$ /usr/sadm/bin/smrole -D <i>domain-name</i> \ 
-r <i>admin-role</i> -l <i>&lt;Type admin-role password&gt;</i> \
modify -- -n <i>rolename</i>  -r <i>username</i> -u <i>username</i></pre><dl><dt><tt>-D</tt> <i>domain-name</i></dt>
<dd><p>Is the name of the domain that you want to manage.</p></dd>
<dt><tt>-r</tt> <i>admin-role</i></dt>
<dd><p>Is the name of the administrative role that can modify the role. The administrative role must have the <tt>solaris.role.assign</tt> authorization. If you are modifying a role that you have assumed, the role must have the <tt>solaris.role.delegate</tt> authorization.</p></dd>
<dt><tt>-l</tt></dt>
<dd><p>Is the prompt for the password of <i>admin-role</i>.</p></dd>
<dt><tt>--</tt></dt>
<dd><p>Is the required separator between authentication options and subcommand options.</p></dd>
<dt><tt>-n</tt> <i>rolename</i></dt>
<dd><p>Is the name of the new role.</p></dd>
<dt><tt>-r</tt> <i>username</i></dt>
<dd><p>Is the name of the user who can no longer assume <i>rolename</i>.</p></dd>
<dt><tt>-u</tt> <i>username</i></dt>
<dd><p>Is the name of the user who can now assume <i>rolename</i>.</p></dd>
</dl>
<p>For more command options, see the <a href="http://docs.sun.com/doc/819-2240/smrole-1m?a=view"><tt>smrole</tt>(1M)</a> man page.</p></li></ul></li></ul><a name="rbactask-33"></a><h6>Example&nbsp;9-16 Changing a Local Role's Properties With the <tt>rolemod</tt> Command</h6><p>In this example, the <tt>operadm</tt> role is modified to include the Media Restore
rights profile.</p><pre>$ <tt><b>rolemod -c "Handles printers, backup, AND restore" \</b></tt>
<tt><b>-P "Printer Management,Media Backup,Media Restore,All" operadm</b></tt></pre><a name="rbactask-45"></a><h6>Example&nbsp;9-17 Changing a Local Role's Properties With the <tt>smrole modify</tt> Command</h6><p>In the following example, the <tt>operadm</tt> role is modified to add the Media
Restore rights profile.</p><pre>$ <tt><b>/usr/sadm/bin/smrole -r primaryadm -l</b></tt> <i>&lt;Type primaryadm password&gt;</i> <tt><b>\</b></tt>
<tt><b>modify -- -n operadm -c "Handles printers, backup, AND restore" \</b></tt>
<tt><b>-p "Media Restore"</b></tt></pre><a name="rbactask-43"></a><h6>Example&nbsp;9-18 Changing a Role in a Domain With the <tt>smrole modify</tt> Command</h6><p>In the following example, the <tt>clockmgr</tt> role is changed. The NIS user whose
ID is <tt>108</tt> can no longer assume the role. The NIS user whose
ID is <tt>110</tt> can assume the role <tt>clockmgr</tt>.</p><pre>$ <tt><b>/usr/sadm/bin/smrole -D nis:/examplehost/example.domain \</b></tt>
<tt><b>-r primaryadm -l</b></tt> <i>&lt;Type primaryadm password&gt;</i> <tt><b>\</b></tt>
<tt><b>modify -- -n clockmgr -r 108 -u 110</b></tt></pre>

<a name="rbactask-24"></a><h4>How to Create or Change a Rights Profile</h4><a name="indexterm-1270"></a><a name="indexterm-1271"></a><a name="indexterm-1272"></a><a name="indexterm-1273"></a><a name="indexterm-1274"></a><a name="indexterm-1275"></a><a name="indexterm-1276"></a><a name="indexterm-1277"></a><a name="indexterm-1278"></a><a name="indexterm-1279"></a><a name="indexterm-1280"></a><a name="indexterm-1281"></a><p>A rights profile is a property of a role. You should create
or change a rights profile when the <tt>prof_attr</tt> database does not contain a rights
profile that fulfills your needs. To learn more about rights profiles, see <a href="rbac-1.html#rbac-33">RBAC Rights Profiles</a>.</p><h6>Before You Begin</h6><p>To create or change a rights profile, you must have assumed the
role of Primary Administrator or have switched to superuser.</p><ul>
<li><b>Use one of the following methods to create or change a rights profile.</b><ul>
<li><b><a name="indexterm-1282"></a>Use the Users tool in the Solaris Management Console.</b><p>To start the console, see <a href="rbactask-42.html#rbactask-21">How to Assume a Role in the Solaris Management Console</a>. Follow the instructions in the left-hand pane to
create or change a rights profile in Rights. For more extensive information, see
the online help.</p></li>
<li><b><a name="indexterm-1283"></a>Use the <tt>smprofile</tt> command.</b><p><a name="indexterm-1284"></a><a name="indexterm-1285"></a>This command enables you to add, modify, list, or delete a rights profile.
The command works on files, and in a distributed name service, such as
NIS, NIS+, or LDAP. The <tt>smprofile</tt> command runs as a client of the
Solaris Management Console server.</p><pre>$ /usr/sadm/bin/smprofile -D <i>domain-name</i> \ 
-r <i>admin-role</i> -l <i>&lt;Type admin-role password&gt;</i> \
add | modify -- -n <i>profile-name</i> \
-d <i>description</i>  -m <i>help-file</i> -p <i>supplementary-profile</i></pre><dl><dt><tt>-D</tt> <i>domain-name</i></dt>
<dd><p>Is the name of the domain that you want to manage.</p></dd>
<dt><tt>-r</tt> <i>admin-role</i></dt>
<dd><p>Is the name of the administrative role that can modify the role. The administrative role must have the <tt>solaris.role.assign</tt> authorization. If you are modifying a role that you have assumed, the role must have the <tt>solaris.role.delegate</tt> authorization.</p></dd>
<dt><tt>-l</tt></dt>
<dd><p>Is the prompt for the password of <i>admin-role</i>.</p></dd>
<dt><tt>--</tt></dt>
<dd><p>Is the required separator between authentication options and subcommand options.</p></dd>
<dt><tt>-n</tt> <i>profile-name</i></dt>
<dd><p>Is the name of the new profile.</p></dd>
<dt><tt>-d</tt> <i>description</i></dt>
<dd><p>Is a short description of the profile.</p></dd>
<dt><tt>-m</tt> <i>help-file</i></dt>
<dd><p>Is the name of the HTML help file that you have created and placed in the <tt>/usr/lib/help/profiles/locale/C</tt> directory.</p></dd>
<dt><tt>-p</tt> <i>supplementary-profile</i></dt>
<dd><p>Is the name of an existing rights profile that is included in this rights profile. You can specify multiple <tt>-p</tt> <i>supplementary-profile</i> options.</p></dd>
</dl>
<p>For more command options, see the <a href="http://docs.sun.com/doc/819-2240/smprofile-1m?a=view"><tt>smprofile</tt>(1M)</a> man page.</p></li></ul></li></ul><a name="rbactask-47"></a><h6>Example&nbsp;9-19 Modifying a Rights Profile From the Command Line</h6><p><a name="indexterm-1286"></a><a name="indexterm-1287"></a><a name="indexterm-1288"></a>In the following example, the Network Management rights profile is made a supplementary
profile of the Network Security rights profile. The role that contains the Network
Security profile can now configure the network and hosts, as well has run
security-relevant commands.</p><pre>$ <tt><b>/usr/sadm/bin/smprofile -D nisplus:/example.host/example.domain \</b></tt>
<tt><b>-r primaryadm -l</b></tt> <i>&lt;Type primaryadm password&gt;</i> <tt><b>\</b></tt>
<tt><b>modify -- -n "Network Security" \</b></tt>
<tt><b>-d "Manage network and host configuration and security" \</b></tt>
<tt><b>-m RtNetConfSec.html -p "Network Management"</b></tt></pre><p>The administrator created a new help file, <tt>RtNetConfSec.html</tt>, and placed it in the
<tt>/usr/lib/help/profiles/locale/C</tt> directory, before running this command.</p><a name="rbactask-38"></a><h6>Example&nbsp;9-20 Modifying an Existing Rights Profile</h6><p>In the following example, the security administrator of MyCompany customizes the Console User
rights profile. Another goal is to retain the customized rights profile when the
Solaris OS is updated to a later version.</p><p>First, the administrator closes the Solaris Management Console.</p><p>Then, the administrator opens the <tt>prof_attr</tt> file, copies the Console User rights profile
to the next line, and renames the second entry. The administrator uses the
existing help file, <tt>RtConsUser.html</tt>.</p><pre># <tt><b>vi /etc/security/prof_attr</b></tt>
Console User:::Manage System as the Console User:help=RtConsUser.html
<tt><b>MyCompany</b></tt> Console User:::Manage System as the Console User:help=RtConsUser.html</pre><p>The administrator assumes the secadmin role. The secadmin role can modify the security
features of a system. The secadmin role opens the Solaris Management Console, clicks
the System Configuration and the Users tool, types the role password, and double-clicks
the Rights tool.</p><p>The administrator double-clicks the MyCompany Console User rights profile. Under the Authorizations tab,
the administrator adds two authorizations to the Authorizations Included list and saves the
changes. When the system is patched or updated to a later version of
the Solaris OS, the Console User rights profile is updated and the MyCompany
Console User rights profile is not changed.</p><a name="rbactask-49"></a><h6>Example&nbsp;9-21 Creating a New Rights Profile With the Rights Tool</h6><p><a name="indexterm-1289"></a><a name="indexterm-1290"></a><a name="indexterm-1291"></a><a name="indexterm-1292"></a>The following table shows sample data for a hypothetical rights profile that is
called &ldquo;Build Administrator&rdquo;. This rights profile includes the commands in the subdirectory <tt>/usr/local/swctrl/bin</tt>.
These commands have an effective UID of <tt>0</tt>. The Build Administrator rights profile would
be useful for administrators who manage the builds and versioning for software development.</p><table><col width="19%"><col width="25%"><col width="54%"><tr><th align="left" valign="top" scope="column"><p>Tab</p></th>
<th align="left" valign="top" scope="column"><p>Field</p></th>
<th align="left" valign="top" scope="column"><p>Example</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>General</p></td>
<td align="left" valign="top" scope="row"><p>Name</p></td>
<td align="left" valign="top" scope="row"><p>Build
Administrator</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>Description</p></td>
<td align="left" valign="top" scope="row"><p>For managing software builds and versioning.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>Help File Name</p></td>
<td align="left" valign="top" scope="row"><p><tt>BuildAdmin.html</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Commands</p></td>
<td align="left" valign="top" scope="row"><p>Add Directory</p></td>
<td align="left" valign="top" scope="row"><p>Click Add Directory, type
<tt>/usr/local/swctrl/bin</tt> in the dialog box, and click OK.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>Commands Denied / Commands Permitted</p></td>
<td align="left" valign="top" scope="row"><p>Move
<tt>/usr/local/swctrl/bin</tt> to the Commands Permitted column.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>Set Security Attributes</p></td>
<td align="left" valign="top" scope="row"><p>Select <tt>/usr/local/swctrl/bin</tt>, click Set Security Attributes, and
set Effective UID = <tt>root</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Authorizations</p></td>
<td align="left" valign="top" scope="row"><p>Authorizations Excluded / Authorizations Included</p></td>
<td align="left" valign="top" scope="row"><p><b>No authorizations.</b></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Supplementary Rights</p></td>
<td align="left" valign="top" scope="row"><p>Rights Excluded /
Rights Included</p></td>
<td align="left" valign="top" scope="row"><p><b>No supplementary rights profiles.</b></p></td>
</tr>
</table><h6>Troubleshooting</h6><p><a name="indexterm-1293"></a><a name="indexterm-1294"></a>Check the following if the rights profile does not provide the role with
the capabilities that you expect:</p>
<ul><li><p>Are the rights profiles for the role listed in the GUI from most to least powerful?</p><p>For example, if the <tt>All</tt> rights profile is at the top of the list, then no commands are run with security attributes. A profile that contains commands with security attributes must precede the <tt>All</tt> rights profile in the list.</p></li>
<li><p>Is a command listed more than once in the role's rights profiles? If so, does the first instance of the command have all the security attributes that are required?</p><p>For example, a command can require privileges for particular options to the command. For the options that require privileges to succeed, the first instance of the command in the highest rights profile in the list must have the assigned privileges.</p></li>
<li><p>Do the commands in the role's rights profiles have the appropriate security attributes?</p><p>For example, when the policy is <tt>suser</tt>, some commands require <tt>uid=0</tt> rather than <tt>euid=0</tt> to succeed.</p></li>
<li><p>Has the name service cache, <tt>svc:/system/name-service-cache</tt>, been restarted?</p><p>The <tt>nscd</tt> daemon can have a lengthy time-to-live interval. By restarting the daemon, you update the name service with current data.</p></li></ul>


<a name="rbactask-25"></a><h4>How to Change the RBAC Properties of a User</h4><a name="indexterm-1295"></a><a name="indexterm-1296"></a><a name="indexterm-1297"></a><a name="indexterm-1298"></a><p>User properties include password, rights profiles, and authorizations. The most secure method of
giving a user administrative capabilities is to assign a role to the user.
For a discussion, see <a href="rbac-1.html#rbac-10">Security Considerations When Directly Assigning Security Attributes</a>.</p><h6>Before You Begin</h6><p>You must have assumed the role of Primary Administrator or have switched to
superuser to change the properties of a user.</p><ul>
<li><b>Use one of the following methods to change the RBAC properties of a
user.</b><ul>
<li><b>Use the Users tool in the Solaris Management Console.</b><p>To start the console, see <a href="rbactask-42.html#rbactask-21">How to Assume a Role in the Solaris Management Console</a>. Follow the instructions in the left-hand pane to
modify a user in User Accounts. For more extensive information, see the online
help.</p>
<hr><p><b>Tip - </b>It is not good practice to assign authorizations, privileges, or rights profiles directly
to users. The preferred approach is to assign a role to users. Users
then  assume a role to perform privileged operations.</p>
<hr>
</li>
<li><b><a name="indexterm-1299"></a>Use the <tt>usermod</tt> command.</b><p>This command modifies the attributes of a user that is defined in the
local name service.</p><pre>$ usermod -R <i>rolename</i> <i>username</i></pre><dl><dt><tt>-R</tt> <i>rolename</i></dt>
<dd><p>Is the name of an existing local role.</p></dd>
<dt><i>username</i></dt>
<dd><p>Is the name of an existing, local user that you want to modify.</p></dd>
</dl>
<p>For more command options, see the <a href="http://docs.sun.com/doc/819-2240/usermod-1m?a=view"><tt>usermod</tt>(1M)</a> man page.</p></li>
<li><b><a name="indexterm-1300"></a>Use the <tt>smuser</tt> command with the <tt>modify</tt> subcommand.</b><p>This command modifies the attributes of a user in a distributed name service,
such as NIS, NIS+, or LDAP. This command runs as a client
of the Solaris Management Console server.</p><pre>$ /usr/sadm/bin/smuser -D <i>domain-name</i> \ 
-r <i>admin-role</i> -l <i>&lt;Type admin-role password&gt;</i> \
modify -- -n <i>username</i> -a <i>rolename</i></pre><dl><dt><tt>-D</tt> <i>domain-name</i></dt>
<dd><p>Is the name of the domain that you want to manage.</p></dd>
<dt><tt>-r</tt> <i>admin-role</i></dt>
<dd><p>Is the name of the administrative role that can modify the role. The administrative role must have the <tt>solaris.role.assign</tt> authorization. If you are modifying a role that you have assumed, the role must have the <tt>solaris.role.delegate</tt> authorization.</p></dd>
<dt><tt>-l</tt></dt>
<dd><p>Is the prompt for the password of <i>admin-role</i>.</p></dd>
<dt><tt>--</tt></dt>
<dd><p>Is the required separator between authentication options and subcommand options.</p></dd>
<dt><tt>-n</tt> <i>username</i></dt>
<dd><p>Is the name of the user who is being assigned <i>rolename</i>.</p></dd>
<dt><tt>-a</tt> <i>rolename</i></dt>
<dd><p>Is the name of the role that you are assigning to <i>username</i>. You can specify multiple <tt>-a</tt> <i>rolename</i>options.</p></dd>
</dl>
<p>For more command options, see the <a href="http://docs.sun.com/doc/819-2240/smuser-1m?a=view"><tt>smuser</tt>(1M)</a> man page.</p></li></ul></li></ul><a name="rbactask-53"></a><h6>Example&nbsp;9-22 Modifying a Local User's RBAC Properties From the Command Line</h6><p>In this example, the user <tt>jdoe</tt> can now assume the role of System
Administrator.</p><pre>$ <tt><b>usermod -R sysadmin jdoe</b></tt></pre><a name="rbactask-51"></a><h6>Example&nbsp;9-23 Modifying a User's RBAC Properties With the <tt>smuser</tt> Command</h6><a name="indexterm-1301"></a><a name="indexterm-1302"></a><a name="indexterm-1303"></a><p>In this example, the user <tt>jdoe</tt> is assigned two roles, System Administrator and
Operator. Because the user and the roles are defined locally, the <tt>-D</tt> option
is not necessary.</p><pre>$ <tt><b>/usr/sadm/bin/smuser -r primaryadm -l</b></tt> <i>&lt;Type primaryadm password&gt;</i> <tt><b>\</b></tt>
<tt><b>modify -- -n jdoe -a sysadmin -a operadm</b></tt></pre><p>In the following example, the user is defined in the NIS name
service. Therefore, the <tt>-D</tt> option is required. Two roles are defined in the name
service. One role, <tt>root</tt>, is defined locally.</p><pre>$ <tt><b>/usr/sadm/bin/smuser -D nis:/examplehost/example.domain \</b></tt>
<tt><b>-r primaryadm -l</b></tt> <i>&lt;Type primaryadm password&gt;</i> <tt><b>\</b></tt>
<tt><b>modify -- -n jdoe -a sysadmin -a operadm -a root</b></tt></pre>

<a name="rbactask-26"></a><h4>How to Add RBAC Properties to Legacy Applications</h4><a name="indexterm-1304"></a><a name="indexterm-1305"></a><p>A legacy application is a command or set of commands. The security
attributes are set for each command in a rights profile. The rights profile
is then included in a role. A user who assumes the role can
run the legacy application with the security attributes.</p><p>To add legacy applications to the Solaris Management Console, see <a href="http://docs.sun.com/doc/819-2379/smcover-118?a=view">Adding Tools to the Solaris Management Console in <i>System Administration Guide: Basic Administration</i></a>.</p><h6>Before You Begin</h6><p>You must have assumed the role of Primary Administrator or have switched to
superuser to change the security attributes of a command in a rights
profile.</p><ol>
<li><b>Use the Users tool in the Solaris Management Console.</b><p>To start the console, see <a href="rbactask-42.html#rbactask-21">How to Assume a Role in the Solaris Management Console</a>. Follow the instructions in the left-hand pane to
modify a rights profile in Rights. For more extensive information, see the online
help.</p></li>
<li><b>Add security attributes to the commands that implement the legacy application.</b><p>You add security attributes to a legacy application in the same way that
you would for any command. You must add the command with security attributes
to a rights profile. For a legacy command, give the command <tt>euid=0</tt>
or <tt>uid=0</tt> security attributes. For details of the procedure, see <a href="#rbactask-24">How to Create or Change a Rights Profile</a>.</p></li>
<li><b>After adding the legacy application to a rights profile, include the rights profile
in a role's list of profiles.</b><p>To add a rights profile to a role, see <a href="#rbactask-23">How to Change the Properties of a Role</a>.</p></li></ol><a name="rbactask-55"></a><h6>Example&nbsp;9-24 Adding Security Attributes to Commands in a Script</h6><p><a name="indexterm-1306"></a><a name="indexterm-1307"></a><a name="indexterm-1308"></a>If a command in a script needs to have the <tt>setuid</tt> bit or
<tt>setgid</tt> bit set to succeed, the script executable <b>and</b> the command must
have the security attributes added in a rights profile. Then, the rights profile
is included in a role, and the role is assigned to a user.
When the user assumes the role and executes the script, the command runs
with the security attributes.</p><p>To add security attributes to a command or shell script, see <a href="#rbactask-24">How to Create or Change a Rights Profile</a>.</p><a name="rbactask-12"></a><h6>Example&nbsp;9-25 Checking for Authorizations in a Script or Program</h6><p><a name="indexterm-1309"></a><a name="indexterm-1310"></a><a name="indexterm-1311"></a>To have a script for authorizations, you need to add a test
that is based on the <tt>auths</tt> command. For detailed information about this command, see
the <a href="http://docs.sun.com/doc/819-2239/auths-1?a=view"><tt>auths</tt>(1)</a> man page.</p><p>For example, the following line tests if the user has the authorization that
is supplied as the <tt>$1</tt> argument:</p><pre>if [ `/usr/bin/auths|/usr/xpg4/bin/grep $1` ]; then
        echo Auth granted
else
        echo Auth denied
fi</pre><p><a name="indexterm-1312"></a><a name="indexterm-1313"></a><a name="indexterm-1314"></a>To be more complete, the test should include logic that checks for other
authorizations that use wildcards. For example, to test if the user has the
<tt>solaris.admin.usermgr.write</tt> authorization, you would need to check for the following strings:</p>
<ul><li><p><tt>solaris.admin.usermgr.write</tt></p></li>
<li><p><tt>solaris.admin.usermgr.*</tt></p></li>
<li><p><tt>solaris.admin.*</tt></p></li>
<li><p><tt>solaris.*</tt></p></li></ul>
<p>If you are writing a program, use the function <tt>getauthattr()</tt> to test for
the authorization.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="rbactask-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="rbacref-1.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

