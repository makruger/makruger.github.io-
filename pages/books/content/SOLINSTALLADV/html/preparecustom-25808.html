<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Testing a Profile - Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preparecustom-53442.html">Previous</a>
             </td>
             <td align="right">
                 <a href="preparecustom-50536.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="epucy.html">Part&nbsp;I&nbsp;Using Custom JumpStart</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="jumpstartoverview-4.html">2.&nbsp;&nbsp;Custom JumpStart (Overview)</a></p>
<p class="toc level2"><a href="preparecustom-56440.html">3.&nbsp;&nbsp;Preparing Custom JumpStart Installations (Tasks)</a></p>
<p class="toc level3"><a href="preparecustom-21142.html">Task Map: Preparing Custom JumpStart Installations</a></p>
<p class="toc level3"><a href="preparecustom-88630.html">Creating a Profile Server for Networked Systems</a></p>
<p class="toc level4"><a href="preparecustom-88630.html#preparecustom-29356">To Create a JumpStart Directory on a Server</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-53074.html">Creating a Profile Diskette for Standalone Systems</a></p>
<p class="toc level4"><a href="preparecustom-53074.html#preparecustom-55190">SPARC: To Create a Profile Diskette</a></p>
<p class="toc level4"><a href="preparecustom-53074.html#preparecustom-19234">x86: To Create a Profile Diskette With GRUB</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-56059.html">Creating the <tt>rules</tt> File</a></p>
<p class="toc level4"><a href="preparecustom-56059.html#preparecustom-32674">To Create a <tt>rules</tt> File</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-53442.html">Creating a Profile</a></p>
<p class="toc level4"><a href="preparecustom-53442.html#preparecustom-26130">To Create a Profile</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Testing a Profile</a></p>
<p class="toc level4"><a href="#preparecustom-25">To Create a Temporary Solaris Environment to Test a Profile</a></p>
<p class="toc level4"><a href="#preparecustom-11884">To Test a Profile</a></p>
</div>
<p class="toc level3 tocsp"><a href="preparecustom-50536.html">Validating the <tt>rules</tt> File</a></p>
<p class="toc level4"><a href="preparecustom-50536.html#preparecustom-91711">To Validate the <tt>rules</tt> File</a></p>
<p class="toc level2 tocsp"><a href="optionalcustom-29530.html">4.&nbsp;&nbsp;Using Optional Custom JumpStart Features (Tasks)</a></p>
<p class="toc level2"><a href="customprobes-1.html">5.&nbsp;&nbsp;Creating Custom Rule and Probe Keywords (Tasks)</a></p>
<p class="toc level2"><a href="customjump-88491.html">6.&nbsp;&nbsp;Performing a Custom JumpStart Installation (Tasks)</a></p>
<p class="toc level2"><a href="customjumpsample-1.html">7.&nbsp;&nbsp;Installing With Custom JumpStart (Examples)</a></p>
<p class="toc level2"><a href="jumpstartreference-1.html">8.&nbsp;&nbsp;Custom JumpStart (Reference)</a></p>
<p class="toc level1 tocsp"><a href="epucz.html">Part&nbsp;II&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="preparecustom-25808"></a><h3>Testing a Profile</h3>
<p><a name="indexterm-41"></a>After you create a profile, use the <a href="http://docs.sun.com/doc/819-2240/pfinstall-1m?a=view"><tt>pfinstall</tt>(1M)</a> command to test the profile. 
Test the profile before you use the profile to install or upgrade a
system. Testing a profile is especially useful when you are creating upgrade profiles
that reallocate disk space.</p><p><a name="indexterm-42"></a>By looking at the installation output that is generated by <tt>pfinstall</tt>, you
can quickly determine if a profile works as you intended. For example, use
the profile to determine if a system has enough disk space to upgrade
to a new release of the Solaris software before you perform the upgrade
on that system.</p><p><tt>pfinstall</tt> enables you to test a profile against the following:</p>
<ul><li><p>The system's disk configuration where <tt>pfinstall</tt> is being run.</p></li>
<li><p><a name="preparecustom-ix607"></a>Other disk configurations. You use a disk configuration file that represents a structure of a disk, for example, a disk's bytes/sector, flags, and slices. Creating disk configuration files is described in <a href="optionalcustom-77225.html">Creating Disk Configuration Files</a> and <a href="optionalcustom-77225.html#optionalcustom-35662">x86: To Create a Disk Configuration File</a>. </p>
<hr><p><b>Note - </b>You cannot use a disk configuration file to test a profile you intend to use to upgrade a system. Instead, you must test the profile against the system's actual disk configuration and the software that is currently installed on that system.</p>
<hr>
</li></ul>


<a name="preparecustom-25"></a><h4>To Create a Temporary Solaris Environment to Test a Profile</h4><p>To test a profile for a particular Solaris release successfully and accurately, you
must test a profile within the Solaris environment of the same release. For
example, if you want to test a Solaris initial installation profile, run the
<tt>pfinstall</tt> command on a system that is running the Solaris OS.</p><p>You need to create a temporary installation environment if you are testing a
profile under one of the following conditions:</p>
<ul><li><p>You want to test a Solaris Express 5/07 upgrade profile on a system that is running a previous version of the Solaris software.</p></li>
<li><p>You do not have a Solaris Express 5/07 system installed yet to test Solaris Express 5/07 initial installation profiles.</p></li></ul>
<ol>
<li><a name="preparecustom-step-22"></a><b>Boot a system from an image of one of the following: </b><p>For SPARC based systems:</p>
<ul><li><p>Solaris Operating System for SPARC Platforms DVD</p></li>
<li><p>Solaris Software for SPARC Platforms - 1 CD </p></li></ul>
<p>For x86 based systems:</p>
<ul><li><p>Solaris Operating System for x86 Platforms DVD</p></li>
<li><p>Solaris Software for x86 Platforms - 1 CD</p></li></ul>

<hr><p><b>Note - </b>If you want to test an upgrade profile, boot the system that
you are upgrading.</p>
<hr>
</li>
<li><a name="preparecustom-step-17a"></a><b>Respond to the system identification questions.</b></li>
<li><a name="preparecustom-step-18a"></a><b>To exit from the installation program, type ! at the following prompt.</b><pre>The Solaris installation program  will assist you in installing software for Solaris.
&lt;Press ENTER to continue> {"!" exits}</pre></li>
<li><a name="preparecustom-step-20a"></a><b>Execute the <tt>pfinstall</tt> command from the shell. For details about using the <tt>pfinstall</tt>
command, see <a href="#preparecustom-step-63">Step&nbsp;7</a> in <a href="#preparecustom-11884">To Test a Profile</a>.</b></li></ol>

<a name="preparecustom-11884"></a><h4>To Test a Profile</h4>
<hr><p><b>x86 only - </b>If you are using the <tt>locale</tt> keyword, the <tt>pfinstall</tt> <tt>-D</tt> command fails to
test the profile. For a workaround, see the error message &ldquo;could not select locale,&rdquo;
in the section, <a href="troubleshooting-16510.html">Upgrading the Solaris OS</a>.</p>
<hr>
<ol>
<li><a name="preparecustom-step-59"></a><b>Locate a system on which to test the profile that is the same
type of platform, SPARC or x86, for which the profile was created.</b><p>If you are testing an upgrade profile, you must test the profile on
the actual system that you intend to upgrade.</p></li>
<li><a name="preparecustom-step-87"></a><b>Use the following decision table to determine what to do next.</b><table><col width="198*"><col width="198*"><tr><th align="left" valign="top" scope="column"><p>Test Scenario</p></th>
<th align="left" valign="top" scope="column"><p>Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Test an
initial installation profile and have a system that is running the Solaris Express
5/07 software.</p></td>
<td align="left" valign="top" scope="row"><p>Become superuser on the system and go to <a href="#preparecustom-step-61">Step&nbsp;5</a>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Test an upgrade
profile, or you do not have a system that is running Solaris Express
5/07 to test an initial installation profile.</p></td>
<td align="left" valign="top" scope="row"><p>Create a temporary Solaris Express 5/07
environment to test the profile. For details, see <a href="#preparecustom-25">To Create a Temporary Solaris Environment to Test a Profile</a>. Then, go to <a href="#preparecustom-step-93">Step&nbsp;3</a>.</p></td>
</tr>
</table></li>
<li><a name="preparecustom-step-93"></a><b>Create a temporary mount point.</b><pre># <tt><b>mkdir /tmp/mnt</b></tt></pre></li>
<li><a name="preparecustom-step-88"></a><b>Mount the directory that contains the profile or profiles that you want to
test.</b><table><col width="158*"><col width="238*"><tr><th align="left" valign="top" scope="column"><p>Mount Scenario</p></th>
<th align="left" valign="top" scope="column"><p>Typing Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount a remote NFS file system for systems on the
network.</p></td>
<td align="left" valign="top" scope="row"><pre><tt><b>mount -F nfs </tt><i>server_name</i><tt>:</tt><i>path</i><tt> /tmp/mnt</b></tt></pre></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>SPARC: Mount a UFS-formatted diskette.</p></td>
<td align="left" valign="top" scope="row"><pre><tt><b>mount -F ufs /dev/diskette /tmp/mnt</b></tt></pre></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Mount a PCFS-formatted diskette.</p></td>
<td align="left" valign="top" scope="row"><pre><tt><b>mount -F pcfs /dev/diskette /tmp/mnt</b></tt></pre></td>
</tr>
</table></li>
<li><a name="preparecustom-step-61"></a><b><a name="preparecustom-ix612"></a>To test the profile with a specific system memory size, set <tt>SYS_MEMSIZE</tt>
to the specific memory size in Mbytes.</b><pre># <tt><b>SYS_MEMSIZE=</tt><i>memory_size</i><tt></b></tt>
# <tt><b>export SYS_MEMSIZE</b></tt></pre></li>
<li><a name="preparecustom-step-62"></a><b>Did you mount a directory in <a href="#preparecustom-step-88">Step&nbsp;4</a>? </b>
<ul><li><p>If yes, change the directory to <tt>/tmp/mnt</tt>.</p><pre># <tt><b>cd /tmp/mnt</b></tt></pre></li>
<li><p>If no, change the directory to where the profile is located, which is usually the JumpStart directory.</p><pre># <tt><b>cd </tt><i>jumpstart_dir_path</i><tt></b></tt></pre></li></ul>
</li>
<li><a name="preparecustom-step-63"></a><b>Test the profile with the <a href="http://docs.sun.com/doc/819-2240/pfinstall-1m?a=view"><tt>pfinstall</tt>(1M)</a> command.</b><pre># <tt><b>/usr/sbin/install.d/pfinstall</b></tt> <tt>-D</tt>:<tt>-d</tt> <i>disk_config_file</i> <tt>-c</tt><tt><b></b></tt> <i>path</i> <i>profile</i></pre>
<hr><p><b>Caution - </b>You <b>must</b> include the <tt>-d</tt> or <tt>-D</tt> option. If you do not
include one of these options, <tt>pfinstall</tt> uses the profile you specify to
install the Solaris software. All of the data on the system is overwritten.</p>
<hr>
<dl><dt><tt>-D</tt></dt>
<dd><p><tt>pfinstall</tt> uses the current system's disk configuration to test the profile. You must use the <tt>-D</tt> option to test an upgrade profile.</p></dd>
<dt><tt>-d</tt> <i>disk_config_file</i></dt>
<dd><p><tt>pfinstall</tt> uses the disk configuration file, <i>disk_config_file</i>, to test the profile. If <i>disk_config_file</i> is not located in the directory where <tt>pfinstall</tt> is run, you must specify the path.</p><p>For instructions about how to create a disk configuration file, see <a href="optionalcustom-77225.html">Creating Disk Configuration Files</a>.</p>
<hr><p><b>Note - </b><a name="indexterm-43"></a>You cannot use the <tt>-d</tt> <i>disk_config_file</i> option with an upgrade profile, <tt>install_type upgrade</tt>. You must always test an upgrade profile against a system's disk configuration, that is, you must use the <tt>-D</tt> option.</p>
<hr>
</dd>
<dt><tt>-c</tt> <i>path</i></dt>
<dd><p>The path to the Solaris software image. You use this option, for example, if the system is using removable media services to mount the Solaris Software - 1 CD for your platform.</p>
<hr><p><b>Note - </b>The <tt>-c</tt> option is not required if you booted from a Solaris Operating System DVD or a Solaris Software - 1 CD image for your platform. The DVD or CD image is mounted on <tt>/media/cdrom</tt> as part of the booting process.</p>
<hr>
</dd>
<dt><i>profile</i></dt>
<dd><p>The name of the profile to test. If <i>profile</i> is not in the directory where <tt>pfinstall</tt> is being run, you must specify the path.</p></dd>
</dl>
</li></ol>

<a name="preparecustom-66"></a><h4>Profile Test Examples</h4>
<a name="preparecustom-ix619"></a><a name="preparecustom-ix620"></a><a name="preparecustom-ix621"></a><p>The following example shows how to use <tt>pfinstall</tt> to test a profile that
is named <tt>basic_prof</tt>. The profile is tested against the disk configuration on a
system on which the Solaris Express 5/07 software is installed. The <tt>basic_prof</tt> profile
is located in the <tt>/jumpstart</tt> directory, and the path to the Solaris
Operating System DVD image is specified because removable media services are being used.</p><a name="preparecustom-ex-25"></a>Example&nbsp;3-16 Profile Test Using a Solaris Express 5/07 System<pre># <tt><b>cd /jumpstart</b></tt>
# <tt><b>/usr/sbin/install.d/pfinstall -D -c /media/cdrom/</tt><i>pathname</i><tt> basic_prof</b></tt></pre><p>The following example shows how to use <tt>pfinstall</tt> to test the profile that
is named <tt>basic_prof</tt> on a Solaris Express 5/07 system. The test is performed
against the <tt>535_test</tt> disk configuration file. The test checks for 64 Mbytes of
system memory. This example uses a Solaris Software for SPARC Platforms -
1 CD or Solaris Software for x86 Platforms - 1 CD image that
is located in the <tt>/export/install</tt> directory.</p><a name="preparecustom-ex-26"></a>Example&nbsp;3-17 Profile Test Using a Disk Configuration File<pre># <tt><b>SYS_MEMSIZE=64</b></tt>
# <tt><b>export SYS_MEMSIZE</b></tt>
# <tt><b>/usr/sbin/install.d/pfinstall -d 535_test -c /export/install basic_prof</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preparecustom-53442.html">Previous</a>
             </td>
             <td align="right">
                 <a href="preparecustom-50536.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

