<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Creating a Profile Server for Networked Systems - Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preparecustom-21142.html">Previous</a>
             </td>
             <td align="right">
                 <a href="preparecustom-53074.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="epucy.html">Part&nbsp;I&nbsp;Using Custom JumpStart</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="jumpstartoverview-4.html">2.&nbsp;&nbsp;Custom JumpStart (Overview)</a></p>
<p class="toc level2"><a href="preparecustom-56440.html">3.&nbsp;&nbsp;Preparing Custom JumpStart Installations (Tasks)</a></p>
<p class="toc level3"><a href="preparecustom-21142.html">Task Map: Preparing Custom JumpStart Installations</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Creating a Profile Server for Networked Systems</a></p>
<p class="toc level4"><a href="#preparecustom-29356">To Create a JumpStart Directory on a Server</a></p>
</div>
<p class="toc level3 tocsp"><a href="preparecustom-53074.html">Creating a Profile Diskette for Standalone Systems</a></p>
<p class="toc level4"><a href="preparecustom-53074.html#preparecustom-55190">SPARC: To Create a Profile Diskette</a></p>
<p class="toc level4"><a href="preparecustom-53074.html#preparecustom-19234">x86: To Create a Profile Diskette With GRUB</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-56059.html">Creating the <tt>rules</tt> File</a></p>
<p class="toc level4"><a href="preparecustom-56059.html#preparecustom-32674">To Create a <tt>rules</tt> File</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-53442.html">Creating a Profile</a></p>
<p class="toc level4"><a href="preparecustom-53442.html#preparecustom-26130">To Create a Profile</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-25808.html">Testing a Profile</a></p>
<p class="toc level4"><a href="preparecustom-25808.html#preparecustom-25">To Create a Temporary Solaris Environment to Test a Profile</a></p>
<p class="toc level4"><a href="preparecustom-25808.html#preparecustom-11884">To Test a Profile</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-50536.html">Validating the <tt>rules</tt> File</a></p>
<p class="toc level4"><a href="preparecustom-50536.html#preparecustom-91711">To Validate the <tt>rules</tt> File</a></p>
<p class="toc level2 tocsp"><a href="optionalcustom-29530.html">4.&nbsp;&nbsp;Using Optional Custom JumpStart Features (Tasks)</a></p>
<p class="toc level2"><a href="customprobes-1.html">5.&nbsp;&nbsp;Creating Custom Rule and Probe Keywords (Tasks)</a></p>
<p class="toc level2"><a href="customjump-88491.html">6.&nbsp;&nbsp;Performing a Custom JumpStart Installation (Tasks)</a></p>
<p class="toc level2"><a href="customjumpsample-1.html">7.&nbsp;&nbsp;Installing With Custom JumpStart (Examples)</a></p>
<p class="toc level2"><a href="jumpstartreference-1.html">8.&nbsp;&nbsp;Custom JumpStart (Reference)</a></p>
<p class="toc level1 tocsp"><a href="epucz.html">Part&nbsp;II&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="preparecustom-88630"></a><h3>Creating a Profile Server for Networked Systems</h3>
<p>When setting up custom JumpStart installations for systems on the network, you need
to create a directory on a server that is called a JumpStart
directory. The JumpStart directory contains all of the essential custom JumpStart files, for example,
the <tt>rules</tt> file, <tt>rules.ok</tt> file, and profiles. You must save the JumpStart directory
in the root (<tt>/</tt>) directory of the profile server.</p><p><a name="preparecustom-ix344"></a><a name="preparecustom-ix345"></a><a name="preparecustom-ix346"></a><a name="preparecustom-ix347"></a><a name="preparecustom-ix348"></a><a name="preparecustom-ix349"></a><a name="preparecustom-ix350"></a>The server that contains a JumpStart directory is called a profile server. A
profile server can be the same system as an install server or
a boot server, or the server can be a completely different server. A
profile server can provide custom JumpStart files for different platforms. For example, an x86
server can provide custom JumpStart files for both SPARC based systems and x86
based systems. </p>
<hr><p><b>Note - </b>After you create a profile server, you must allow systems to access the
server. For detailed instructions, see <a href="#preparecustom-12">To Allow All Systems Access to the Profile Server</a>.</p>
<hr>


<a name="preparecustom-29356"></a><h4>To Create a JumpStart Directory on a Server</h4>
<hr><p><b>Note - </b>This procedure assumes that the system is running removable media services. If you
have questions about removable media services that manage discs, refer to <a href="http://docs.sun.com/doc/819-2723"><i>System Administration Guide: Devices and File Systems</i></a> for
detailed information.</p>
<hr>
<ol>
<li><b>Locate the server on which you want to create the JumpStart directory.</b></li>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="preparecustom-step-37"></a><b>Create the JumpStart directory anywhere on the server.</b><pre># <tt><b>mkdir -m 755 </tt><i>jumpstart_dir_path</i><tt></b></tt></pre><p>In the command, <i>jumpstart_dir_path</i> is the absolute path of the JumpStart directory.</p><p>For example, the following command creates a directory that is called <tt>jumpstart</tt> in the
root (<tt>/</tt>) directory and sets the permissions to 755:</p><pre># <tt><b>mkdir -m 755 /jumpstart</b></tt></pre></li>
<li><a name="preparecustom-step-38a"></a><b><a name="preparecustom-ix351a"></a><a name="preparecustom-ix352a"></a><a name="preparecustom-ix353a"></a><a name="preparecustom-ix354a"></a><a name="preparecustom-ix357a"></a><a name="preparecustom-ix357b"></a><a name="preparecustom-ix355a"></a>Use either the <tt>sharemgr</tt> utility or the <tt>share</tt> command as follows:</b>
<hr><p><b>Note - </b><b>Starting with the 5/07 Developer release,</b> the <tt>sharemgr</tt> utility introduces the concept of share groups. See <a href="http://docs.sun.com/doc/819-1634/gcrvu?a=view">sharemgr Command in <i>System Administration Guide: Network Services</i></a>.</p>
<hr>

<ul><li><p>Using the <tt>share</tt> command, edit the <tt>/etc/dfs/dfstab</tt> file by adding the following entry.</p><p><tt>#</tt> <tt><b>share -F nfs -o ro,anon=0 </tt><i>jumpstart_dir_path</i><tt></b></tt></p><p>For example, the following entry shares the <tt>/jumpstart</tt> directory:</p><p><tt>#</tt> <tt><b>share -F nfs -o ro,anon=0 /jumpstart</b></tt></p><p>Then, type <tt>shareall</tt> and press Enter.</p></li>
<li><p>Using the <tt>sharemgr</tt> utility, enter the following commands:</p><p><tt>#</tt> <tt><b>sharemgr add-share</b></tt> <tt>-s</tt> <tt><b>/jumpstart default</b></tt></p><p><tt>#</tt> <tt><b>sharemgr set</b></tt> <tt>-P</tt> <i>nfs</i> <tt>-S</tt> <i>sys</i> <tt>-p</tt> <tt><b>ro="*"</b></tt> <tt>-s</tt> <tt><b>/jumpstart default</b></tt></p><p><tt>#</tt> <tt><b>sharemgr set</b></tt> <tt>-P</tt> <i>nfs</i> <tt>-p</tt> <tt><b>anon=0</b></tt> <tt>-s</tt> <tt><b>/jumpstart default</b></tt></p></li></ul>
</li>
<li><a name="preparecustom-step-41"></a><b>Determine if you want to copy examples of custom JumpStart files to your
JumpStart directory.</b>
<ul><li><p>If no, go to <a href="#preparecustom-step-10">Step&nbsp;8</a>.</p></li>
<li><p>If yes, use the following decision table to determine what to do next.</p></li></ul>
<table><col width="132*"><col width="264*"><tr><th align="left" valign="top" scope="column"><p>Example Locations</p></th>
<th align="left" valign="top" scope="column"><p>Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>The Solaris Operating System DVD or the Solaris Software - 1
CD for your platform</p></td>
<td align="left" valign="top" scope="row"><p>Insert the Solaris Operating System DVD or the Solaris
Software - 1 CD into the server's CD-ROM drive.</p><p>Removable media services automatically mounts the
CD or DVD.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="preparecustom-ix358"></a><a name="preparecustom-ix359"></a><a name="indexterm-1"></a>An image of the Solaris Operating System DVD or the
Solaris Software - 1 CD for your platform on a local disk 
 </p></td>
<td align="left" valign="top" scope="row"><p>Change directory to the location of the Solaris Operating System DVD
or the Solaris Software - 1 image. For example, type the following command:</p><pre>cd /export/install</pre></td>
</tr>
</table></li>
<li><a name="preparecustom-step-43"></a><b><a name="preparecustom-ix366"></a><a name="preparecustom-ix367"></a><a name="preparecustom-ix368"></a><a name="preparecustom-ix369"></a><a name="preparecustom-ix370"></a><a name="indexterm-2"></a><a name="indexterm-3"></a><a name="indexterm-4"></a><a name="indexterm-5"></a>Copy the example custom JumpStart files into the JumpStart directory on the profile
server. </b><pre># <tt><b>cp -r </tt><i>media_path</i><tt>/Solaris_11/Misc/jumpstart_sample/* </tt><i>jumpstart_dir_path</i><tt></b></tt></pre><dl><dt><i>media_path</i></dt>
<dd><p>The path to the CD, DVD, or image on the local disk</p></dd>
<dt><i>jumpstart_dir_path</i></dt>
<dd><p>The path on the profile server where you are placing the example custom JumpStart files</p></dd>
</dl>
<p>For example, the following command copies the <tt>jumpstart_sample</tt> directory into the <tt>/jumpstart</tt> directory
on the profile server:</p>
<ul><li><p>For SPARC based systems:</p><pre><tt><b>cp -r /media/cdrom/s0/Solaris_11/Misc/jumpstart_sample/* /jumpstart</b></tt></pre></li>
<li><p>For x86 based systems:</p><pre><tt><b>cp -r /media/cdrom/Solaris_11/Misc/jumpstart_sample/* /jumpstart</b></tt></pre></li></ul>
</li>
<li><a name="preparecustom-step-9a"></a><b>Update the example JumpStart files so that the files work in your environment.</b></li>
<li><a name="preparecustom-step-10"></a><b>Ensure that <tt>root</tt> owns the JumpStart directory and that the permissions are set
to 755.</b></li>
<li><a name="preparecustom-step-11a"></a><b>Allow systems on the network to access the profile server.</b><p>For detailed instructions, see <a href="#preparecustom-12">To Allow All Systems Access to the Profile Server</a>.</p></li></ol>

<a name="fxjxq"></a><h4>Allowing All Systems Access to the Profile Server</h4>
<p>When you create a profile server, you must ensure that systems can
access the JumpStart directory on the profile server during a custom JumpStart installation. Use
one of the following ways to ensure access.</p><table><col width="146.37*"><col width="278.68*"><col width="234.96*"><tr><th align="left" valign="top" scope="column"><p>Command or File</p></th>
<th align="left" valign="top" scope="column"><p>Providing Access</p></th>
<th align="left" valign="top" scope="column"><p>Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><a name="fxjqk"></a><tt>add_install_client</tt> command</p></td>
<td align="left" valign="top" scope="row"><p>Each
time that you add a system for network installation, use the <tt>-c</tt>
option with the <tt>add_install_client</tt> command to specify the profile server. </p>
<hr><p><b>Note - </b>If you are
not using NFS, then you must use another means to provide access.</p>
<ul><li><p><b>For SPARC based systems</b>, use the <tt>boot</tt> command</p></li>
<li><p><b>For x86 based systems</b>, edit the GRUB menu</p></li></ul>

<hr>
</td>
<td align="left" valign="top" scope="row">
<ul><li><p>For DVD media, see <a href="http://docs.sun.com/doc/819-2394/netinstalldvd-40778?a=view">Adding Systems to Be Installed From the Network With a DVD Image in <i>Solaris Express Installation Guide: Network-Based Installations</i></a></p></li>
<li><p>For CD media, see <a href="http://docs.sun.com/doc/819-2394/netinstall-40778?a=view">Adding Systems to Be Installed From the Network With a CD Image in <i>Solaris Express Installation Guide: Network-Based Installations</i></a></p></li></ul>
</td>
</tr>
<tr><td rowspan="2" align="left" valign="top" scope="row"><p>Specify the
location of the JumpStart directory when you boot the system</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p><b>For SPARC based systems</b>, use the <tt>boot</tt> command to boot the system. Specify the location of the JumpStart directory on the profile server when you boot the system. You must compress the custom JumpStart configuration files into one file. Then, save the compressed configuration file on an HTTP or HTTPS server.</p></li></ul>
</td>
<td align="left" valign="top" scope="row">
<ul><li><p><a href="optionalcustom-4.html">Creating a Compressed Configuration File</a></p></li>
<li><p><a href="customjump-40000.html#customjump-step-55">Step&nbsp;5</a> in <a href="customjump-40000.html#customjump-721">SPARC: To Perform an Installation or Upgrade With the Custom JumpStart Program</a></p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row">
<ul><li><p><b>For x86 based systems</b>, specify the location of the JumpStart directory on the profile server when you boot the system by editing the boot entry on the GRUB menu. You must compress the custom JumpStart configuration files into one file. Then, save the compressed configuration file on an HTTP or HTTPS server. </p><p>When you edit the GRUB menu entry, specify the location of the compressed file. </p></li></ul>
</td>
<td align="left" valign="top" scope="row">
<ul><li><p><a href="optionalcustom-4.html">Creating a Compressed Configuration File</a></p></li>
<li><p><a href="customjump-3.html#fxbnh">x86: Performing a Custom JumpStart Installation by Editing the GRUB Boot Command</a></p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/etc/bootparams</tt> file </p></td>
<td align="left" valign="top" scope="row"><p>Add
a wildcard in the <tt>/etc/bootparams</tt> file. </p></td>
<td align="left" valign="top" scope="row"><p><a href="#preparecustom-12">To Allow All Systems Access to the Profile Server</a></p></td>
</tr>
</table>

<a name="preparecustom-12"></a><h5>To Allow All Systems Access to the Profile Server</h5>
<p><a name="gbeuq"></a>Use the following procedure only if you store network installation information in the
following places: </p>
<ul><li><p>In the <tt>/etc/bootparams</tt> file.</p></li>
<li><p>In the naming service <tt>bootparams</tt> database. To update the <tt>bootparams</tt> database, add the entry that is shown in <a href="#preparecustom-step-46">Step&nbsp;3</a>.</p></li></ul>
<p>If you use the following procedure, the systems must be of the
same type, such as all SPARC systems.</p><p>Do not use this procedure under the following conditions:</p>
<ul><li><p>If you save the JumpStart directory on a diskette.</p></li>
<li><p>If you specify the location of the profile server when you boot the system. If you have systems of different architectures, you must specify the location of the profile server when you boot the system</p></li></ul>
<p>If you have the above conditions, use the SPARC <tt>boot</tt> command or use
the x86 GRUB menu.</p>
<hr><p><b>Note - </b>You also can store network installation information on a DHCP server.</p>
<ul><li><p><b>For SPARC based systems</b>, you use the <tt>add_install_client</tt> command and the <tt>-d</tt> option to specify that the custom JumpStart program use the DHCP server. Or you use the <tt>boot</tt> command with the <tt>dhcp</tt> option to specify that the custom JumpStart program use the DHCP server. For instructions about using this option, see <a href="customjump-40000.html#customjump-10">SPARC: Command Reference for the <tt>boot</tt> Command</a>. </p></li>
<li><p><b>For x86 based systems</b>, you use dhcp in one of the following ways:</p>
<ul><li><p>If you use an install server, use the <tt>add_install_client</tt> command and the <tt>-d</tt> option to specify that the custom JumpStart program use the DHCP server with PXE.</p></li>
<li><p>You can edit the GRUB entry on the GRUB menu and add the dhcp option. For instructions about editing the GRUB entry, see <a href="customjump-3.html#fxbnh">x86: Performing a Custom JumpStart Installation by Editing the GRUB Boot Command</a></p></li></ul>
</li></ul>

<hr>
<ol>
<li><a name="preparecustom-step-45"></a><b>On the installation or boot server, log in as superuser.</b></li>
<li><a name="preparecustom-step-27a"></a><b>Use a text editor to open <tt>/etc/bootparams</tt>.</b></li>
<li><a name="preparecustom-step-46"></a><b><a name="preparecustom-ix378"></a><a name="preparecustom-ix379"></a><a name="preparecustom-ix380"></a>Add this entry. </b><pre>* install_config=<i>server:jumpstart_dir_path</i></pre><dl><dt>*</dt>
<dd><p>A wildcard character that specifies that all systems have access</p></dd>
<dt><i>server</i></dt>
<dd><p>The host name of the profile server where the JumpStart directory is located</p></dd>
<dt><i>jumpstart_dir_path</i></dt>
<dd><p>The absolute path of the JumpStart directory</p></dd>
</dl>
<p>For example, the following entry enables all systems to access the <tt>/jumpstart</tt>
directory on the profile server that is named <tt>sherlock</tt>:</p><pre>* install_config=sherlock:/jumpstart</pre>
<hr><p><b>Caution - </b>Use of this procedure might produce the following error message when an installation
client is booted: </p><p><tt>WARNING: getfile: RPC failed: error 5: (RPC Timed out).</tt></p><p><a name="preparecustom-ix381"></a><a name="preparecustom-ix382"></a><a name="preparecustom-ix383"></a><a name="preparecustom-ix384"></a><a href="troubleshooting-32526.html#troubleshooting-2">Booting From the Network, Error Messages</a> contains details about this error message.  </p>
<hr>
<p>All systems can now access the profile server. </p></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preparecustom-21142.html">Previous</a>
             </td>
             <td align="right">
                 <a href="preparecustom-53074.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

