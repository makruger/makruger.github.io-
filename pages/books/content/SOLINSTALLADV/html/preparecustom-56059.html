<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Creating the <tt>rules</tt> File - Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preparecustom-53074.html">Previous</a>
             </td>
             <td align="right">
                 <a href="preparecustom-53442.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="epucy.html">Part&nbsp;I&nbsp;Using Custom JumpStart</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="jumpstartoverview-4.html">2.&nbsp;&nbsp;Custom JumpStart (Overview)</a></p>
<p class="toc level2"><a href="preparecustom-56440.html">3.&nbsp;&nbsp;Preparing Custom JumpStart Installations (Tasks)</a></p>
<p class="toc level3"><a href="preparecustom-21142.html">Task Map: Preparing Custom JumpStart Installations</a></p>
<p class="toc level3"><a href="preparecustom-88630.html">Creating a Profile Server for Networked Systems</a></p>
<p class="toc level4"><a href="preparecustom-88630.html#preparecustom-29356">To Create a JumpStart Directory on a Server</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-53074.html">Creating a Profile Diskette for Standalone Systems</a></p>
<p class="toc level4"><a href="preparecustom-53074.html#preparecustom-55190">SPARC: To Create a Profile Diskette</a></p>
<p class="toc level4"><a href="preparecustom-53074.html#preparecustom-19234">x86: To Create a Profile Diskette With GRUB</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Creating the <tt>rules</tt> File</a></p>
<p class="toc level4"><a href="#preparecustom-32674">To Create a <tt>rules</tt> File</a></p>
</div>
<p class="toc level3 tocsp"><a href="preparecustom-53442.html">Creating a Profile</a></p>
<p class="toc level4"><a href="preparecustom-53442.html#preparecustom-26130">To Create a Profile</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-25808.html">Testing a Profile</a></p>
<p class="toc level4"><a href="preparecustom-25808.html#preparecustom-25">To Create a Temporary Solaris Environment to Test a Profile</a></p>
<p class="toc level4"><a href="preparecustom-25808.html#preparecustom-11884">To Test a Profile</a></p>
<p class="toc level3 tocsp"><a href="preparecustom-50536.html">Validating the <tt>rules</tt> File</a></p>
<p class="toc level4"><a href="preparecustom-50536.html#preparecustom-91711">To Validate the <tt>rules</tt> File</a></p>
<p class="toc level2 tocsp"><a href="optionalcustom-29530.html">4.&nbsp;&nbsp;Using Optional Custom JumpStart Features (Tasks)</a></p>
<p class="toc level2"><a href="customprobes-1.html">5.&nbsp;&nbsp;Creating Custom Rule and Probe Keywords (Tasks)</a></p>
<p class="toc level2"><a href="customjump-88491.html">6.&nbsp;&nbsp;Performing a Custom JumpStart Installation (Tasks)</a></p>
<p class="toc level2"><a href="customjumpsample-1.html">7.&nbsp;&nbsp;Installing With Custom JumpStart (Examples)</a></p>
<p class="toc level2"><a href="jumpstartreference-1.html">8.&nbsp;&nbsp;Custom JumpStart (Reference)</a></p>
<p class="toc level1 tocsp"><a href="epucz.html">Part&nbsp;II&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="preparecustom-56059"></a><h3>Creating the <tt>rules</tt> File</h3>
<p><a name="preparecustom-ix623"></a><a name="preparecustom-ix624"></a><a name="preparecustom-ix622"></a>The <tt>rules</tt> file is a text file that contains a rule for each
group of systems on which you want to install the Solaris OS. Each
rule distinguishes a group of systems that are based on one or
more system attributes. Each rule also links each group to a profile. A
profile is a text file that defines how the Solaris software is to
be installed on each system in the group. For example, the following rule
specifies that the JumpStart program use the information in the <tt>basic_prof</tt> profile to install
any system with the <tt>sun4u</tt> platform group.  </p><pre>karch sun4u - basic_prof -</pre><p>The <tt>rules</tt> file is used to create the <tt>rules.ok</tt> file, which is
required for custom JumpStart installations.</p>
<hr><p><b>Note - </b><a name="preparecustom-ix625"></a><a name="preparecustom-ix626"></a><a name="preparecustom-ix627"></a>If you set up the JumpStart directory by using the procedures in <a href="preparecustom-53074.html">Creating a Profile Diskette for Standalone Systems</a>
or <a href="preparecustom-88630.html">Creating a Profile Server for Networked Systems</a>, an example <tt>rules</tt> file is already located in the JumpStart directory.
The sample <tt>rules</tt> file contains documentation and some example rules. If you use
the sample <tt>rules</tt> file, ensure that you comment out the example rules
you do not intend to use.</p>
<hr>


<a name="preparecustom-15667"></a><h4>Syntax of the <tt>rules</tt> File</h4>
<p><a name="preparecustom-ix633"></a><a name="preparecustom-ix634"></a>The <tt>rules</tt> file must have the following attributes:</p>
<ul><li><p><a name="preparecustom-ix635"></a><a name="preparecustom-ix636"></a>The file must be assigned the name <tt>rules</tt>.</p></li>
<li><p>The file must contain at least one rule.</p></li></ul>
<p>The <tt>rules</tt> file can contain any of the following:</p>
<ul><li><p>Commented text</p><p><a name="preparecustom-ix638"></a><a name="preparecustom-ix639"></a><a name="preparecustom-ix640"></a>Any text that is included after the <tt>#</tt> symbol on a line is treated by JumpStart as commented text. If a line begins with the <tt>#</tt> symbol, the entire line is treated as a comment.</p></li>
<li><p>One or more blank lines</p></li>
<li><p>One or more multiline rules</p><p><a name="preparecustom-ix641"></a><a name="preparecustom-ix642"></a><a name="preparecustom-ix643"></a><a name="preparecustom-ix645"></a><a name="preparecustom-ix646"></a>To continue a single rule onto a new line, include a backslash character (\) just before pressing Return.</p></li></ul>


<a name="preparecustom-32674"></a><h4>To Create a <tt>rules</tt> File</h4><ol>
<li><a name="preparecustom-step-70"></a><b><a name="preparecustom-ix647"></a><a name="preparecustom-ix648"></a>Use a text editor to create a text file that is named
<tt>rules</tt>. Or, open the sample <tt>rules</tt> file in the JumpStart directory that you
created. </b></li>
<li><a name="preparecustom-step-71"></a><b><a name="preparecustom-ix649"></a><a name="preparecustom-ix650"></a>Add a rule in the <tt>rules</tt> file for each group of systems on
which you want to install the Solaris software. </b><p>For a list of <tt>rules</tt> file keywords and values, see <a href="preparecustom-74.html">Rule Keywords and Values</a>.</p><p><a name="preparecustom-ix651"></a><a name="preparecustom-ix652"></a><a name="preparecustom-ix653"></a><a name="preparecustom-ix656"></a><a name="preparecustom-ix657"></a>A rule within a <tt>rules</tt> file must adhere to the following syntax: 
</p><pre>!<i>rule_keyword</i> <i>rule_value</i> &amp;&amp; !<i>rule_keyword</i> <i>rule_value</i> ... <i>begin</i>  <i>profile</i>  <i>finish</i></pre><dl><dt><tt>!</tt></dt>
<dd><p><a name="preparecustom-ix663"></a>A symbol that is used before a keyword to indicate negation.</p></dd>
<dt><i>rule_keyword</i></dt>
<dd><p><a name="preparecustom-ix664"></a>A predefined lexical unit or word that describes a general system attribute, such as host name, <tt>hostname</tt>, or memory size, <tt>memsize</tt>. <i>rule_keyword</i> is used with the rule value to match a system with the same attribute to a profile. For the list of rule keywords, see <a href="preparecustom-74.html">Rule Keywords and Values</a>.</p></dd>
<dt><i>rule_value</i></dt>
<dd><p><a name="preparecustom-ix665"></a><a name="preparecustom-ix666"></a><a name="preparecustom-ix667"></a><a name="preparecustom-ix668"></a>A value that provides the specific system attribute for the corresponding rule keyword. Rule values are described in <a href="preparecustom-74.html">Rule Keywords and Values</a>.</p></dd>
<dt><tt>&amp;&amp;</tt></dt>
<dd><p><a name="preparecustom-ix669"></a><a name="preparecustom-ix670"></a><a name="preparecustom-ix671"></a><a name="preparecustom-ix672"></a>A symbol you must use to join rule keyword and rule value pairs in the same rule (a logical AND). During a custom JumpStart installation, a system must match every pair in the rule before the rule matches.</p></dd>
<dt><i>begin</i></dt>
<dd><p>The name of an optional Bourne shell script that can be executed before the installation begins. If no begin script exists, you must type a minus sign (-) in this field. All begin scripts must be located in the JumpStart directory. </p><p><a name="preparecustom-ix673"></a>Information about how to create begin scripts is presented in <a href="optionalcustom-59707.html">Creating Begin Scripts</a>.</p></dd>
<dt><i>profile</i></dt>
<dd><p>The name of a text file that defines how the Solaris software is to be installed on the system when a system matches the rule. The information in a profile consists of profile keywords and their corresponding profile values. All profiles must be located in the JumpStart directory.</p>
<hr><p><b>Note - </b><a name="preparecustom-ix674"></a><a name="preparecustom-ix675"></a>Optional ways to use the profile field are described in <a href="optionalcustom-73438.html">Using a Site-Specific Installation Program</a> and <a href="optionalcustom-59707.html#optionalcustom-44541">Creating Derived Profiles With a Begin Script</a>.</p>
<hr>
</dd>
<dt><i>finish</i></dt>
<dd><p>The name of an optional Bourne shell script that can be executed after the installation is completed. If no finish script exists, you must type a minus sign (-) in this field. All finish scripts must be located in the JumpStart directory. </p><p><a name="preparecustom-ix676"></a>Information about how to create finish scripts is presented in <a href="optionalcustom-44024.html">Creating Finish Scripts</a>.</p></dd>
</dl>
<p>At the minimum, each rule must contain the following:</p>
<ul><li><p>A keyword, a value, and a corresponding profile</p></li>
<li><p>A minus sign (-) in the <i>begin</i> and <i>finish</i> fields if no begin or finish scripts are specified</p></li></ul>
</li>
<li><a name="preparecustom-step-4"></a><b>Save the <tt>rules</tt> file in the JumpStart directory.</b></li>
<li><a name="preparecustom-step-14"></a><b>Ensure that <tt>root</tt> owns the <tt>rules</tt> file and that the permissions are set
to 644.</b></li></ol>

<a name="preparecustom-88417"></a><h4><tt>rules</tt> File Example</h4>
<p>The following example shows several example rules in a <tt>rules</tt> file. Each line
has a rule keyword and a valid value for that keyword. The
JumpStart program scans the <tt>rules</tt> file from top to bottom. </p><p><a name="preparecustom-ix679"></a><a name="preparecustom-ix680"></a><a name="preparecustom-ix681"></a><a name="preparecustom-ix682"></a><a name="preparecustom-ix683"></a><a name="preparecustom-ix684"></a>When the JumpStart program matches a rule keyword and value with a known
system, the JumpStart program installs the Solaris software that is specified by the profile
that is listed in the profile field.</p><p>For a complete list of <tt>rules</tt> file limitations, see <a href="#preparecustom-15667">Syntax of the <tt>rules</tt> File</a>.</p><a name="preparecustom-ex-24"></a>Example&nbsp;3-1 <tt>rule</tt> File<pre> # rule keywords and rule values       begin script       profile       finish script
 # -----------------------------       ------------       --------      -------------
  hostname eng-1                       -                  basic_prof    -
  network 192.168.255.255 &amp;&amp; !model \
 'SUNW,Sun-Blade-100'                  -                  net_prof      -
  model SUNW,SPARCstation-LX           -                  lx_prof       complete
  network 192.168.2.0 &amp;&amp; karch i86pc  setup               x86_prof      done
  memsize 64-128 &amp;&amp; arch i386          -                  prog_prof     -
  any   -                              -                  generic_prof  -</pre><p>The following list describes some of the keywords and values from this example.</p><dl><dt><tt>hostname</tt></dt>
<dd><p>The rule matches if the system's host name is <tt>eng-1</tt>. The <tt>basic_prof</tt> profile is used to install the Solaris software on the system that matches the rule.</p></dd>
<dt><tt>network</tt></dt>
<dd><p>The rule matches if the system is on subnet 192.168.255.255 and if the system is <b>not</b> a Sun Blade <sup>TM</sup> 100 (<tt>SUNW,Sun-Blade-100</tt>). The <tt>net_prof</tt> profile is used to install the Solaris software on systems that match this rule. This rule also provides an example of continuing a single rule onto a new line by using the backslash character (\).</p></dd>
<dt><tt>model</tt></dt>
<dd><p>The rule matches if the system is a SPARCstation LX. The <tt>lx_prof</tt> profile and the <tt>complete</tt> finish script are used to install the Solaris software on systems that match this rule.</p></dd>
<dt><tt>network</tt></dt>
<dd><p>The rule matches if the system is on subnet 192.168.2.0 and is an x86 based sun4u system. The <tt>setup</tt> begin script, the <tt>x864u_prof</tt> profile, and the <tt>done</tt> finish script are used to install the Solaris software on systems that match the rule.</p></dd>
<dt><tt>memsize</tt></dt>
<dd><p>The rule matches if the system has between 64 and 128 Mbytes of memory and is an x86 based system. The <tt>prog_prof</tt> profile is used to install the Solaris software on systems that match the rule.</p></dd>
<dt><tt>any</tt></dt>
<dd><p>The rule matches any system that did not match the previous rules. The <tt>generic_prof</tt> profile is used to install the Solaris software on systems that match the rule. If <tt>any</tt> is used, it should always be the last rule in the <tt>rules</tt> file.</p></dd>
</dl>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preparecustom-53074.html">Previous</a>
             </td>
             <td align="right">
                 <a href="preparecustom-53442.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

