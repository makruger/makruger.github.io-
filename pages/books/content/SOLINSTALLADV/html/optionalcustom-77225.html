<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Creating Disk Configuration Files - Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="optionalcustom-4.html">Previous</a>
             </td>
             <td align="right">
                 <a href="optionalcustom-73438.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="epucy.html">Part&nbsp;I&nbsp;Using Custom JumpStart</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="jumpstartoverview-4.html">2.&nbsp;&nbsp;Custom JumpStart (Overview)</a></p>
<p class="toc level2"><a href="preparecustom-56440.html">3.&nbsp;&nbsp;Preparing Custom JumpStart Installations (Tasks)</a></p>
<p class="toc level2"><a href="optionalcustom-29530.html">4.&nbsp;&nbsp;Using Optional Custom JumpStart Features (Tasks)</a></p>
<p class="toc level3"><a href="optionalcustom-59707.html">Creating Begin Scripts</a></p>
<p class="toc level3"><a href="optionalcustom-44024.html">Creating Finish Scripts</a></p>
<p class="toc level4"><a href="optionalcustom-44024.html#optionalcustom-1">To Add Files With a Finish Script</a></p>
<p class="toc level3 tocsp"><a href="optionalcustom-4.html">Creating a Compressed Configuration File</a></p>
<p class="toc level4"><a href="optionalcustom-4.html#optionalcustom-5a">To Create a Compressed Configuration File</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">Creating Disk Configuration Files</a></p>
<p class="toc level4"><a href="#optionalcustom-63517">SPARC: To Create a Disk Configuration File</a></p>
<p class="toc level4"><a href="#optionalcustom-35662">x86: To Create a Disk Configuration File</a></p>
</div>
<p class="toc level3 tocsp"><a href="optionalcustom-73438.html">Using a Site-Specific Installation Program</a></p>
<p class="toc level2 tocsp"><a href="customprobes-1.html">5.&nbsp;&nbsp;Creating Custom Rule and Probe Keywords (Tasks)</a></p>
<p class="toc level2"><a href="customjump-88491.html">6.&nbsp;&nbsp;Performing a Custom JumpStart Installation (Tasks)</a></p>
<p class="toc level2"><a href="customjumpsample-1.html">7.&nbsp;&nbsp;Installing With Custom JumpStart (Examples)</a></p>
<p class="toc level2"><a href="jumpstartreference-1.html">8.&nbsp;&nbsp;Custom JumpStart (Reference)</a></p>
<p class="toc level1 tocsp"><a href="epucz.html">Part&nbsp;II&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="optionalcustom-77225"></a><h3>Creating Disk Configuration Files</h3>
<p><a name="optionalcustom-ix852"></a><a name="optionalcustom-ix853"></a>This section describes how to create single-disk and multiple-disk configuration files. Disk configuration
files enable you to use <a href="http://docs.sun.com/doc/819-2240/pfinstall-1m?a=view"><tt>pfinstall</tt>(1M)</a> from a single system to test profiles against
different disk configurations.</p>

<a name="optionalcustom-63517"></a><h4>SPARC: To Create a Disk Configuration File</h4><ol>
<li><a name="optionalcustom-step-15"></a><b><a name="optionalcustom-ix854"></a><a name="optionalcustom-ix855"></a>Locate a SPARC based system with a disk you want to test.</b></li>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="optionalcustom-step-16"></a><b><a name="optionalcustom-ix856"></a>Create a single&ndash;disk configuration file by redirecting the output of the <a href="http://docs.sun.com/doc/819-2240/prtvtoc-1m?a=view"><tt>prtvtoc</tt>(1M)</a> command
to a file.</b><pre># <tt><b>prtvtoc /dev/rdsk/</b></tt><i>device_name</i> <tt><b>></b></tt><i>disk_config_file</i></pre><dl><dt><tt>/dev/rdsk/</tt><i>device_name</i></dt>
<dd><p>The device name of the system's disk. <i>device_name</i> must be in the form <tt>c</tt><i>w</i><tt>t</tt><i>x</i><tt>d</tt><i>y</i><tt>s2</tt> or <tt>c</tt><i>x</i><tt>d</tt><i>y</i><tt>s2</tt>.</p></dd>
<dt><i>disk_config_file</i></dt>
<dd><p>The name of the disk configuration file.</p></dd>
</dl>
</li>
<li><a name="optionalcustom-step-17"></a><b>Determine if you are testing the installation of Solaris software on multiple disks.</b>
<ul><li><p>If no, stop. You are finished.</p></li>
<li><p>If yes, concatenate the single&ndash;disk configuration files and save the output in a new file.</p><pre># <tt><b>cat</b></tt> <i>disk_file1 disk_file2</i> <tt><b>></b></tt><i>multi_disk_config</i></pre><p>The new file becomes the multiple-disk configuration file, as in the following example.</p><pre># <tt><b>cat 104_disk2 104_disk3 104_disk5 >multi_disk_test</b></tt></pre></li></ul>
</li>
<li><a name="optionalcustom-step-18"></a><b>Determine if the target numbers in the disk device names are unique in
the multiple-disk configuration file that you created in the previous step.</b>
<ul><li><p>If yes, stop. You are finished.</p></li>
<li><p>If no, open the file with a text editor and make the target numbers unique in the disk device names.</p><p>For example, assume that the file contains the same target number, <tt>t0</tt>, for different disk device names, as shown here.</p><pre>* /dev/rdsk/c0t0d0s2 partition map
...
* /dev/rdsk/c0t0d0s2 partition map</pre><p>Change the second target number to <tt>t2</tt>, as shown here:</p><pre>* /dev/rdsk/c0t0d0s2 partition map
...
* /dev/rdsk/c0t2d0s2 partition map</pre></li></ul>
</li></ol>

<a name="optionalcustom-20"></a><h4>SPARC: Disk Configuration File Example</h4>
<p>The following example shows how to create a single&ndash;disk configuration file, <tt>104_test</tt>, on
a SPARC based system with a 104-Mbyte disk.</p><a name="optionalcustom-ex-13"></a>Example&nbsp;4-8 SPARC: Creating a Disk Configuration File<p>You redirect the output of the <tt>prtvtoc</tt> command to a single&ndash;disk configuration file
that is named <tt>104_test</tt>:</p><pre># <tt><b>prtvtoc /dev/rdsk/c0t3d0s2 >104_test</b></tt></pre><p>The contents of the <tt>104_test</tt> file resemble the following:</p><pre>* /dev/rdsk/c0t3d0s2 partition map
*
* Dimensions:
*     512 bytes/sector
*      72 sectors/track
*      14 tracks/cylinder
*    1008 sectors/cylinder
*    2038 cylinders*    2036 accessible cylinders
* Flags:
*   1: unmountable
*  10: read-only
*
*                          First     Sector    Last
* Partition  Tag  Flags    Sector     Count    Sector  Mount Directory
       1      2    00          0     164304   164303   /
       2      5    00          0    2052288  2052287  
       3      0    00     164304     823536   987839   /disk2/b298
       5      0    00     987840     614880  1602719   /install/298/sparc/work
       7      0    00    1602720     449568  2052287   /space</pre><p>You have created disk configuration files for a SPARC based system. <a href="preparecustom-25808.html">Testing a Profile</a>
contains information about using disk configuration files to test profiles.</p>

<a name="optionalcustom-35662"></a><h4>x86: To Create a Disk Configuration File</h4><ol>
<li><a name="optionalcustom-step-22"></a><b><a name="optionalcustom-ix865"></a>Locate an x86 based system that contains a disk that you are testing.</b></li>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><a name="optionalcustom-step-23"></a><b><a name="optionalcustom-ix869"></a>Create part of the single-disk configuration file by saving the output of the
<a href="http://docs.sun.com/doc/819-2240/fdisk-1m?a=view"><tt>fdisk</tt>(1M)</a> command in a file.</b><pre># <tt><b>fdisk -R -W</b></tt> <i>disk_config_file</i> <tt><b>-h /dev/rdsk/</b></tt><i>device_name</i></pre><dl><dt><i>disk_config_file</i></dt>
<dd><p>The name of a disk configuration file.</p></dd>
<dt><tt>/dev/rdsk/</tt><i>device_name</i></dt>
<dd><p>The device name of the <tt>fdisk</tt> layout of the entire disk. <i>device_name</i> must be in the form <tt>c</tt><i>w</i><tt>t</tt><i>x</i><tt>d</tt><i>y</i><tt>s0</tt> or <tt>c</tt><i>x</i><tt>d</tt><i>y</i><tt>s0</tt>.</p></dd>
</dl>
</li>
<li><a name="optionalcustom-step-24"></a><b><a name="optionalcustom-ix867"></a>Append the output of the <a href="http://docs.sun.com/doc/819-2240/prtvtoc-1m?a=view"><tt>prtvtoc</tt>(1M)</a> command to the disk configuration file: </b><pre># <tt><b>prtvtoc /dev/rdsk/</b></tt><i>device_name</i> <tt><b>>></b></tt><i>disk_config</i></pre><dl><dt><tt>/dev/rdsk/</tt><i>device_name</i></dt>
<dd><p>The device name of the system's disk. <i>device_name</i> must be in the form <tt>c</tt><i>w</i><tt>t</tt><i>x</i><tt>d</tt><i>y</i><tt>s2</tt> or <tt>c</tt><i>x</i><tt>d</tt><i>y</i><tt>s2</tt>. </p></dd>
<dt><i>disk_config</i></dt>
<dd><p>The name of the disk configuration file.</p></dd>
</dl>
</li>
<li><a name="optionalcustom-step-25"></a><b>Determine if you are testing the installation of Solaris software on multiple disks.</b>
<ul><li><p>If no, stop. You are finished. </p></li>
<li><p>If yes, concatenate the single-disk configuration files and save the output in a new file.</p><pre># <tt><b>cat</b></tt> <i>disk_file1 disk_file2</i> <tt><b>></b></tt><i>multi_disk_config</i></pre><p>The new file becomes the multiple-disk configuration file, as in the following example.</p><pre># <tt><b>cat 104_disk2 104_disk3 104_disk5 >multi_disk_test</b></tt></pre></li></ul>
</li>
<li><a name="optionalcustom-step-6"></a><b>Determine if the target numbers in the disk device names are unique in
the multiple-disk configuration file that you created in the previous step.</b>
<ul><li><p>If yes, stop. You are finished.</p></li>
<li><p>If no, open the file with a text editor and make the target numbers unique.</p><p>For example, the file might contain the same target number, <tt>t0</tt>, for different disk device names as shown here:</p><pre>* /dev/rdsk/c0t0d0s2 partition map
...
* /dev/rdsk/c0t0d0s2 partition map</pre><p>Change the second target number to <tt>t2</tt>, as shown here:</p><pre>* /dev/rdsk/c0t0d0s2 partition map
...
* /dev/rdsk/c0t2d0s2 partition map</pre></li></ul>
</li></ol>

<a name="optionalcustom-28"></a><h4>x86: Disk Configuration File Example</h4>
<p>The following example shows how to create a single-disk configuration file, <tt>500_test</tt>, on
an x86 based system that contains a 500-Mbyte disk. </p><a name="optionalcustom-ex-14"></a>Example&nbsp;4-9 x86: Creating a Disk Configuration File<p>First, you save the output of the <tt>fdisk</tt> command to a file that
is named <tt>500_test</tt>: </p><pre># <tt><b>fdisk -R -W 500_test -h /dev/rdsk/c0t0d0p0</b></tt></pre><p>The <tt>500_test</tt> file looks like the following:</p><pre> * /dev/rdsk/c0t0d0p0 default fdisk table
* Dimensions:
*     512 bytes/sector
*      94 sectors/track
*      15 tracks/cylinder
*    1455 cylinders
*
*  HBA Dimensions:
*     512 bytes/sector
*      94 sectors/track
*      15 tracks/cylinder
*    1455 cylinders
*
* systid:
*  1:    DOSOS12
*  2:    PCIXOS
*  4:    DOSOS16
*  5:    EXTDOS
*  6:    DOSBIG
*  86:   DOSDATA
*  98:   OTHEROS
*  99:   UNIXOS
* 130:   SUNIXOS
*
* Id  Act Bhead Bsect   Bcyl  Ehead  Esect  Ecyl Rsect  Numsect
 130  128 44    3       0     46    30     1001 1410   2050140</pre><p>Second, you append the output of the <tt>prtvtoc</tt> command to the <tt>500_test</tt> file:
</p><pre># <tt><b>prtvtoc /dev/rdsk/c0t0d0s2 >>500_test</b></tt></pre><p>The <tt>500_test</tt> file is now a complete disk configuration file:</p><pre>* /dev/rdsk/c0t0d0p0 default fdisk table    
* Dimensions:
*     512 bytes/sector
*      94 sectors/track
*      15 tracks/cylinder
*    1455 cylinders
*
*  HBA Dimensions:
*     512 bytes/sector
*      94 sectors/track
*      15 tracks/cylinder
*    1455 cylinders
*
* systid:
*  1:    DOSOS12
*  2:    PCIXOS
*  4:    DOSOS16
*  5:    EXTDOS
*  6:    DOSBIG
*  86:   DOSDATA
*  98:   OTHEROS
*  99:   UNIXOS
*  130:  SUNIXOS
*
* Id  Act Bhead Bsect Bcyl  Ehead  Esec  Ecyl Rsect  Numsect
 130  128 44    3     0     46    30    1001 1410   2050140
* /dev/rdsk/c0t0d0s2 partition map
*
* Dimensions:
*      512 bytes/sector
*       94 sectors/track
*       15 tracks/cylinder
*     1110 sectors/cylinder
*     1454 cylinders
*     1452 accessible cylinders
*
* Flags:
*   1: unmountable
*  10: read-only
*                          First    Sector    Last
* Partition  Tag  Flags    Sector     Count    Sector  Mount Directory
       2      5    01       1410   2045910   2047319
       7      6    00       4230   2043090   2047319  /space
       8      1    01          0      1410     1409
       9      9    01       1410      2820     422987</pre><p>You have created disk configuration files for an x86 based system. <a href="preparecustom-25808.html">Testing a Profile</a>
contains information about using disk configuration files to test profiles.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="optionalcustom-4.html">Previous</a>
             </td>
             <td align="right">
                 <a href="optionalcustom-73438.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

