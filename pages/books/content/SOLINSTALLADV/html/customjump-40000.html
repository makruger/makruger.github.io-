<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>SPARC: Performing a Custom JumpStart Installation - Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fxjxx.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fxjxu.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="epucy.html">Part&nbsp;I&nbsp;Using Custom JumpStart</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="jumpstartoverview-4.html">2.&nbsp;&nbsp;Custom JumpStart (Overview)</a></p>
<p class="toc level2"><a href="preparecustom-56440.html">3.&nbsp;&nbsp;Preparing Custom JumpStart Installations (Tasks)</a></p>
<p class="toc level2"><a href="optionalcustom-29530.html">4.&nbsp;&nbsp;Using Optional Custom JumpStart Features (Tasks)</a></p>
<p class="toc level2"><a href="customprobes-1.html">5.&nbsp;&nbsp;Creating Custom Rule and Probe Keywords (Tasks)</a></p>
<p class="toc level2"><a href="customjump-88491.html">6.&nbsp;&nbsp;Performing a Custom JumpStart Installation (Tasks)</a></p>
<p class="toc level3"><a href="gevli.html">Limitations for a JumpStart Installation</a></p>
<p class="toc level3"><a href="fxjxx.html">SPARC: Task Map: Setting Up a System for a Custom JumpStart Installation</a></p>
<div class="onpage">
<p class="toc level3"><a href="">SPARC: Performing a Custom JumpStart Installation</a></p>
<p class="toc level4"><a href="#flash-46">To Prepare to Install a Solaris Flash Archive With a Custom JumpStart Installation</a></p>
<p class="toc level4"><a href="#customjump-721">SPARC: To Perform an Installation or Upgrade With the Custom JumpStart Program</a></p>
</div>
<p class="toc level3 tocsp"><a href="fxjxu.html">x86: Task Map: Setting Up a System for a Custom JumpStart Installation</a></p>
<p class="toc level3"><a href="customjump-3.html">x86: Performing a Custom JumpStart Installation</a></p>
<p class="toc level4"><a href="customjump-3.html#customjump-723">x86: To Perform an Installation or Upgrade With the Custom JumpStart Program and With GRUB</a></p>
<p class="toc level2 tocsp"><a href="customjumpsample-1.html">7.&nbsp;&nbsp;Installing With Custom JumpStart (Examples)</a></p>
<p class="toc level2"><a href="jumpstartreference-1.html">8.&nbsp;&nbsp;Custom JumpStart (Reference)</a></p>
<p class="toc level1 tocsp"><a href="epucz.html">Part&nbsp;II&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="package-9.html">B.&nbsp;&nbsp;Additional SVR4 Packaging Requirements (Reference)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="customjump-40000"></a><h3>SPARC: Performing a Custom JumpStart Installation</h3>
<p><a name="indexterm-59"></a><a name="indexterm-60"></a><a name="indexterm-61"></a><a name="indexterm-62"></a><a name="indexterm-63"></a>During a custom JumpStart installation, the JumpStart program attempts to match the system that
is being installed to the rules in the <tt>rules.ok</tt> file.  The JumpStart
program reads the rules from the first rule through the last. A match
occurs when the system that is being installed matches all the system attributes
that are defined in the rule. When a system matches a rule,
the JumpStart program stops reading the <tt>rules.ok</tt> file and begins to install the system,
based on the matched rule's profile.</p>

<a name="flash-46"></a><h4>To Prepare to Install a Solaris Flash Archive With a Custom JumpStart Installation</h4><p>You can install a full archive for an initial installation or if
you have already installed an archive, a differential archive for an update. You can
use the custom JumpStart installation method or use Solaris Live Upgrade to install
an archive on an inactive boot environment. This procedure provides the instructions to
install an archive with custom JumpStart.</p>
<ul><li><p>For an overview of a full or differential archive, see <a href="http://docs.sun.com/doc/819-2397/flash-24?a=view">Chapter 1, Solaris Flash (Overview), in <i>Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</i></a>.</p></li>
<li><p>For procedures about installing an archive on an inactive boot environment by using Solaris Live Upgrade, see <a href="http://docs.sun.com/doc/819-2395/luupgrade1-8800?a=view">To Install a Solaris Flash Archive With a Profile in <i>Solaris Express Installation Guide: Solaris Live Upgrade and Upgrade Planning</i></a>.</p></li></ul>
<ol>
<li><b>Review the following limitations.</b><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Example</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><b>Caution</b>: When using the <tt>archive_location</tt> keyword to install a
Solaris Flash archive, the archive and the installation media must contain identical operating
system versions.</p></td>
<td align="left" valign="top" scope="row"><p>For example, if the archive is a Solaris Express 5/07 operating system
and you are using DVD media, then you must use Solaris Express
5/07 DVD media to install the archive. If the operating systems versions do
not match, the installation on the clone system fails.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row">
<hr><p><b>Caution - </b>A Solaris Flash archive cannot
be properly created when a non-global zone is installed. The Solaris Flash feature
is not compatible  with the Solaris Zones partitioning technology. If you create
a Solaris Flash archive, the resulting  archive is not installed properly when
the archive is deployed under these conditions:</p>
<ul><li><p>The archive is created in a non-global zone</p></li>
<li><p>The archive is created in a global zone that has non-global zones installed</p></li></ul>

<hr>
</td>
<td align="left" valign="top" scope="row"></td>
</tr>
</table></li>
<li><a name="flashinstall-step-1a"></a><b>On the install server, create the custom JumpStart <tt>rules</tt> file.</b><p>For detailed instructions about creating custom JumpStart files, refer to <a href="preparecustom-56440.html">Chapter&nbsp;3, Preparing Custom JumpStart Installations (Tasks)</a>.</p></li>
<li><a name="flash-step-49"></a><b>On the install server, create the custom JumpStart profile file.</b><p>For examples of Solaris Flash archive profiles, see <a href="preparecustom-53442.html#preparecustom-45277">Profile Examples</a>.</p><p>From the existing list of custom JumpStart keywords in <a href="preparecustom-24696.html#preparecustom-tbl-118">Table&nbsp;8-2</a>, the only
keywords valid when you install a Solaris Flash archive are the following:</p><a name="customjump-tbl-3"></a><table><col width="33.00*"><col width="20.00*"><col width="46.00*"><tr><th align="left" valign="top" scope="column"><p>Keyword</p></th>
<th align="left" valign="top" scope="column"><p>Initial Installation</p></th>
<th align="left" valign="top" scope="column"><p>Differential
Archive</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>(required)<tt>archive_location</tt></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>fdisk</tt> (x86 only)</p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>filesys</tt> </p>
<hr><p><b>Note - </b>You cannot set the <tt>filesys</tt> keyword to the value
<tt>auto</tt>.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"><p>X</p></td>
<td align="left" valign="top" scope="row"><p></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>forced_deployment</tt></p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>(required) <tt>install_type</tt></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>local_customization</tt></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>no_content_check</tt></p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>no_master_check</tt></p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>package</tt></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
<td align="left" valign="top" scope="row"><p></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>root_device</tt></p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
<td align="left" valign="top" scope="row"><p>X</p></td>
</tr>
</table><ol style="list-style-type: lower-alpha">
				 
<li><a name="flashinstall-step-11"></a><b>Set the value of the keyword <tt>install_type</tt> to one of the following
types.</b>
<ul><li><p>For a full archive installation, set the value to <tt>flash_install</tt>.</p></li>
<li><p>For a differential archive installation, set the value to <tt>flash_update</tt>.</p></li></ul>
</li>
<li><a name="flashinstall-step-3"></a><b>Add the path to the Solaris Flash archive by using the <tt>archive_location</tt> 
keyword.</b><p>For details about the <tt>archive_location</tt> keyword, refer to <a href="preparecustom-24696.html#preparecustom-2"><tt>archive_location</tt> Keyword</a>.</p></li>
<li><a name="flashinstall-step-15"></a><b>Specify the file system configuration.</b><p>The Solaris Flash archive extraction process does not support auto-layout of partitions.</p></li>
<li><b>(Optional) If you want to install additional packages at the same time you
install an archive, use the <tt>package</tt> keyword. For more information, see <a href="preparecustom-24696.html#preparecustom-94"><tt>package</tt> Profile Keyword</a>.</b></li>
<li><a name="flashinstall-step-4"></a><b>(Optional) If you want to install an additional Solaris Flash archive on the
clone system, add one <tt>archive_location</tt> line for each archive that you want
to install.</b></li></ol></li>
<li><a name="flash-step-11"></a><b>On the install server, add the clients that you are installing with the
Solaris Flash archive.</b><p>For detailed instructions, refer to the following:</p>
<ul><li><p><a href="http://docs.sun.com/doc/819-2394/netinstalldvd-40778?a=view">Adding Systems to Be Installed From the Network With a DVD Image in <i>Solaris Express Installation Guide: Network-Based Installations</i></a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2394/netinstall-40778?a=view">Adding Systems to Be Installed From the Network With a CD Image in <i>Solaris Express Installation Guide: Network-Based Installations</i></a></p></li></ul>
</li>
<li><a name="flash-step-12"></a><b>Perform the custom JumpStart installation on the clone systems.</b><p>For detailed instructions, refer to <a href="#customjump-721">SPARC: To Perform an Installation or Upgrade With the Custom JumpStart Program</a>.</p></li></ol>

<a name="customjump-721"></a><h4>SPARC: To Perform an Installation or Upgrade With the Custom JumpStart Program</h4><ol>
<li><a name="customjump-step-700"></a><b>If the system is part of a network, ensure that an Ethernet connector
or similar network adapter is attached to your system.</b></li>
<li><a name="customjump-step-54"></a><b><a name="indexterm-64"></a><a name="indexterm-65"></a><a name="indexterm-66"></a><a name="indexterm-67"></a>If you are installing a system that is connected through a <a href="http://docs.sun.com/doc/819-2239/tip-1?a=view"><tt>tip</tt>(1)</a> line,
ensure that your window display is at least 80 columns wide and 24
rows long.    </b><p><a name="indexterm-68"></a>To determine the current dimensions of your <tt>tip</tt> window, use the <a href="http://docs.sun.com/doc/819-2239/stty-1?a=view"><tt>stty</tt>(1)</a>
command.</p></li>
<li><a name="customjump-step-600"></a><b>If you are using the system's DVD-ROM or CD-ROM drive to install the
Solaris software, insert the Solaris Operating System for SPARC Platforms DVD or the
Solaris Software for SPARC Platforms - 1 CD in the drive.</b></li>
<li><a name="customjump-step-9"></a><b>If you are using a profile diskette,  insert the profile diskette in
the system's diskette drive.</b></li>
<li><a name="customjump-step-55"></a><b>Boot the system. </b>
<ul><li><p>If the system is new, out&ndash;of&ndash;the&ndash;box, turn on the system.</p></li>
<li><p>If you want to install or upgrade an existing system, shut down the system. At the <tt>ok</tt> prompt, type the appropriate options for the boot command. The syntax of the <tt>boot</tt> command is the following.</p><pre>ok <tt><b>boot</b></tt> [<i>cd&ndash;dvd</i>|<tt><b>net</b></tt>] <tt><b>- install</b></tt> [<tt><b></tt><i>url</i><tt>|ask</b></tt>] <i>options</i></pre><p>For example, if you type the following command, the OS is installed over the network by using a JumpStart profile.</p><pre>ok <tt><b>boot net - install http://131.141.2.32/jumpstart/config.tar</b></tt></pre><p>For a description of the boot command options, see the following table.</p></li></ul>

<hr><p><b>SPARC only - </b>The system checks hardware and system components and your  SPARC based system
boots. Booting lasts several minutes. </p>
<hr>
</li>
<li><a name="customjump-step-7b"></a><b>If you did not preconfigure system information in the <tt>sysidcfg</tt> file, when prompted,
answer the questions about system configuration.</b></li>
<li><a name="customjump-step-76"></a><b>Follow the instructions on the screen to install the software.</b><p>When the JumpStart program finishes installing the Solaris software, the system reboots automatically.</p><p>After the installation is finished, installation logs are saved in a file. You
can find the installation logs in the following directories:</p>
<ul><li><p><tt>/var/sadm/system/logs</tt></p></li>
<li><p><tt>/var/sadm/install/logs</tt></p></li></ul>
</li></ol>

<a name="customjump-10"></a><h4>SPARC: Command Reference for the <tt>boot</tt> Command</h4>
<p>The syntax of the <tt>boot</tt> command is the following.</p><pre>ok <tt><b>boot</b></tt> [<i>cd&ndash;dvd</i>|<tt><b>net</b></tt>] <tt><b>- install</b></tt> [<i>url</i>|<tt><b>ask</b></tt>] <i>options</i></pre><p>The following table describes the command-line options for the <tt>boot</tt> command that
are appropriate for a JumpStart installation.</p><table><col width="18.74*"><col width="81.26*"><tr><th align="left" valign="top" scope="column"><p>Option</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>[<i>cd&ndash;dvd</i>|net]</p></td>
<td align="left" valign="top" scope="row"><p>Specifies to boot from a CD or
a DVD or to boot from an install server on the network.</p>
<ul><li><p><i>cd-dvd</i> - Use <tt>cdrom</tt> to boot from a CD or a DVD.</p></li>
<li><p><tt>net</tt> - Specifies to boot from an install server on the network.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>[<i>url</i>| ask]</p></td>
<td align="left" valign="top" scope="row"><p>Specifies
the location of the custom JumpStart files or prompts you for the location.
</p>
<ul><li><p><i>url</i> &ndash; Specifies the path to the files. You can specify a URL for files that are located in an HTTP or HTTPS server:</p><p>HTTP server</p><pre>http://<i>server_name:IP_address/jumpstart_dir_path/</i>
<i>compressed_config_file&amp;proxy_info</i></pre>
<ul><li><p>If you placed a <tt>sysidcfg</tt> file in the compressed configuration file, you must specify the IP address of the server that contains the file, as in the following example:</p><pre>http://131.141.2.32/jumpstart/config.tar</pre></li>
<li><p>If you saved the compressed configuration file on an HTTP server that is behind a firewall, you must use a proxy specifier during boot.  You do not need to specify an IP address for the server that contains the file. You must specify an IP address for the proxy server, as in the following example:</p><pre>http://www.shadow.com/jumpstart/
config.tar&amp;proxy=131.141.6.151</pre></li></ul>
</li>
<li><p><tt>ask</tt> &ndash; Specifies that the installation program prompt you to type the location of the compressed configuration file. The prompt happens after the system boots and connects to the network. If you use this option, you are not able to do a completely hands off JumpStart installation.</p><p>If you bypass the prompt by pressing Return, the Solaris installation program interactively configures the network parameters.  The installation program then prompts you for the location of the compressed configuration file.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><i>options</i></p></td>
<td align="left" valign="top" scope="row">
<ul><li><p><tt>dhcp</tt> &ndash; Specifies to use a DHCP server to obtain network installation information that is needed to boot the system. This option is not needed for a JumpStart installation. If you do not specify to use a DHCP server by typing <tt>dhcp</tt>, the system uses the <tt>/etc/bootparams</tt> file or the naming service <tt>bootparams</tt> database. For example, you would not specify <tt>dhcp</tt> if you wanted keep a static IP address.</p></li>
<li><p>The options <tt>nowin</tt> and <tt>text</tt> do not apply to a JumpStart installation. These options are useful with an interactive installation. For more information, see <a href="http://docs.sun.com/doc/819-2393/webstart-24?a=view">To Install or Upgrade With the Solaris Installation Program in <i>Solaris Express Installation Guide: Basic Installations</i></a>.</p></li></ul>
</td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fxjxx.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fxjxu.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

