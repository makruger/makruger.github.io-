<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Managing Devices in the Solaris OS - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devconfig-23.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devconfig-6.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level2"><a href="gdryj.html">What's New in Device Management?</a></p>
<p class="toc level2"><a href="devconfig-23.html">Where to Find Device Management Tasks</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Managing Devices in the Solaris OS</a></p>
</div>
<p class="toc level2"><a href="devconfig-6.html">Adding a Peripheral Device to a System</a></p>
<p class="toc level3"><a href="devconfig-6.html#devconfig-3">How to Add a Peripheral Device</a></p>
<p class="toc level3"><a href="devconfig-6.html#devconfig-18">How to Add a Device Driver</a></p>
<p class="toc level2 tocsp"><a href="devaccess-90138.html">Accessing Devices</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gdvku"></a><h3>Managing Devices in the Solaris OS</h3>
<p>The following sections provide overview information about features that manage devices in the
Solaris OS. For information about accessing devices, see <a href="devaccess-90138.html">Accessing Devices</a>.</p>

<a name="gdvkz"></a><h4>Power Management of Devices</h4>
<p>The United States Environmental Protection Agency created the Energy Star<sup>&reg;</sup>
				  guidelines for
computer products to encourage the use of energy-efficient computer systems and to reduce
air pollution associated with energy generation.  To meet these guidelines, Sun hardware
is designed to use power efficiently. In addition, power management software is provided to
configure the power management settings.<a name="indexterm-53"></a></p><p>For more information about power managing your system, see your specific hardware documentation
or <a href="http://docs.sun.com/doc/819-2251/power.conf-4?a=view"><tt>power.conf</tt>(4)</a>.</p>

<a name="fbeci"></a><h5>Power Management of Fibre Channel Devices</h5>
<p>Power management of Sun systems has been provided in many previous Solaris releases.
For example, the internal drives on the following systems are power managed by
default:</p>
<ul><li><p>SunBlade 1000 or 2000</p></li>
<li><p>SunBlade 100 or 150</p></li>
<li><p>SunBlade 2500 or 1500</p></li></ul>
<p>The default settings in the <tt>/etc/power.conf</tt> file ensure Energy Star compliance and fully
support power management of these systems. </p><p>The following adapters connect external Fibre Channel storage devices:</p>
<ul><li><p>Sun StorEdge PCI Dual Fibre Channel Host Adapter</p></li>
<li><p>Sun StorEdge PCI Single Fibre Channel Network Adapter</p></li></ul>
<p>If a combination of the above adapters and Sun systems are used
to attach external Fibre Channel storage devices, the external storage devices will also be
power managed by default.</p><p>Under the following conditions, power management should be disabled:</p>
<ul><li><p>If the system has Fibre Channel attached disks that are connected to a storage area network (SAN)</p></li>
<li><p>If the system has Fibre Channel attached disks that are used in a multi-initiator configuration, such as with the SunCluster software</p></li>
<li><p>If the system is using IP over a Fibre Channel interface (see <a href="http://docs.sun.com/doc/819-2254/fcip-7d?a=view"><tt>fcip</tt>(7D)</a>)</p></li></ul>
<p>Power management should not be enabled when more than one Solaris system might
share the same devices, as in the above conditions.</p><p>You can disable power management for the system by changing the <tt>autopm</tt>
keyword in the <tt>/etc/power.conf</tt> file as follows:</p><pre>autopm         disable</pre><p>Then, reconfigure power management by running the <tt>pmconfig</tt> command or by rebooting the
system.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2251/power.conf-4?a=view"><tt>power.conf</tt>(4)</a> and <a href="http://docs.sun.com/doc/819-2240/pmconfig-1m?a=view"><tt>pmconfig</tt>(1M)</a>.</p>

<a name="devconfig-25988"></a><h4>About Device Drivers</h4>
<p>A computer typically uses a wide range of peripheral devices and mass-storage devices.
Your system, for example, probably has a disk drive, a keyboard and a
mouse, and some kind of magnetic backup medium. Other commonly used devices include
the following:</p>
<ul><li><p>CD-ROM drives</p></li>
<li><p>Printers and plotters</p></li>
<li><p>Light pens</p></li>
<li><p>Touch-sensitive screens</p></li>
<li><p>Digitizers</p></li>
<li><p>Tablet-and-stylus pairs</p></li></ul>
<p>The Solaris software does not directly communicate with all these devices. Each type
of device requires different data formats, protocols, and transmission rates.</p><p>A <b>device driver</b> is a low-level program that allows the operating system to communicate
with a specific piece of hardware. The driver serves as the operating system's
&ldquo;interpreter&rdquo; for that piece of hardware. <a name="devconfig-ix2396"></a></p>

<a name="devconfig-12740"></a><h4>Automatic Configuration of Devices</h4>
<p>The kernel consists of a small generic core with a platform-specific component and
a set of modules. The kernel is configured automatically in the Solaris release.</p><p>A <b>kernel</b> <b>module</b> is a hardware or software component that is used to
perform a specific task on the system. An example of a <b>loadable</b> kernel
module is a device driver that is loaded when the device is accessed.</p><p>The platform-independent kernel is <tt>/kernel/genunix</tt>. The platform-specific component is <tt>/platform/`uname -m`/kernel/unix</tt>. </p><p>The kernel modules are described in the following table.  </p><a name="devconfig-37710"></a><h6>Table&nbsp;5-2 Description of Solaris Kernel Modules</h6><table><col width="180*"><col width="180*"><tr><th align="left" valign="top" scope="column"><p>Location</p></th>
<th align="left" valign="top" scope="column"><p>Directory Contents</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/platform/`uname -m`/kernel</tt></p></td>
<td align="left" valign="top" scope="row"><p>Platform-specific
kernel components</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/kernel</tt></p></td>
<td align="left" valign="top" scope="row"><p>Kernel components common to all platforms that are needed for booting the
system</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr/kernel</tt></p></td>
<td align="left" valign="top" scope="row"><p>Kernel components common to all platforms within a particular instruction set</p></td>
</tr>
</table><p>The system determines what devices are attached to it at boot time. Then,
the kernel configures itself dynamically, loading needed modules into memory. At this time,
device drivers are loaded when devices, such as disk devices and tape devices,
are accessed. This process is called <b>autoconfiguration</b> because all kernel modules are
loaded automatically when they are needed.<a name="devconfig-ix2397"></a> </p><p>You can customize the way in which kernel modules are loaded by
modifying the <tt>/etc/system</tt> file. For instructions on modifying this file, see <a href="http://docs.sun.com/doc/819-2251/system-4?a=view"><tt>system</tt>(4)</a>.</p>

<a name="devconfig-1"></a><h5>Features and Benefits of Autoconfiguration</h5>
<p>The benefits of autoconfiguration are as follows:</p>
<ul><li><p>Main memory is used more efficiently because modules are loaded when needed.</p></li>
<li><p>There is no need to reconfigure the kernel when new devices are added to the system.</p></li>
<li><p>Drivers can be loaded and tested without having to rebuild the kernel and reboot the system.</p></li></ul>
<p>Autoconfiguration is used when you add a new device (and driver) to the
system. In previous Solaris releases, it was necessary to perform a reconfiguration boot
if you added a device to a system that is shutdown. Starting in
the Solaris Express 10/06 release, device configuration enhancements make a reconfiguration boot unnecessary
when a device is added to a system that is shutdown.</p><p>You can add, remove, or replace devices in the Solaris OS while the
system is still running, if the system components support hot-plugging. For information about
hot-plugging devices, see <a href="devconfig2-1.html">Chapter&nbsp;6, Dynamically Configuring Devices (Tasks)</a>.</p>

<a name="devconfig-2"></a><h5>What You Need for Unsupported Devices</h5>
<p>Device drivers needed to support a wide range of standard devices are included
in the Solaris release. These drivers can be found in the <tt>/kernel/drv</tt>
and <tt>/platform/`uname -m`/kernel/drv</tt> directories.  <a name="devconfig-ix2398"></a><a name="devconfig-ix2399"></a></p><p>However, if you have purchased an unsupported device, the manufacturer should provide the
software that is needed for the device to be properly installed, maintained, and
administered.</p><p>At a minimum, this software includes a device driver and its associated configuration
(<tt>.conf</tt>) file. The <tt>.conf</tt> files reside in the <tt>drv</tt> directories. This software might
also include custom maintenance and administrative utilities because the device might be incompatible with
Solaris utilities. </p><p>For more information about what you need for unsupported devices, contact your device
manufacturer.</p>

<a name="devconfig-27211"></a><h4>Displaying Device Configuration Information</h4>
<p>Three commands are used to display system and device configuration information. <a name="devconfig-ix2404"></a></p><table><col width="17.09*"><col width="64.79*"><col width="17.13*"><tr><th align="left" valign="top" scope="column"><p>Command</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Man
Page</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>prtconf</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays system configuration information, including the total amount of memory and the device
configuration as described by the system's device hierarchy. The output displayed by this
command depends upon the type of system.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/prtconf-1m?a=view"><tt>prtconf</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>sysdef</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays device configuration information, including system
hardware, pseudo devices, loadable modules, and selected kernel parameters. </p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/sysdef-1m?a=view"><tt>sysdef</tt>(1M)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>dmesg</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays system diagnostic messages
as well as a list of devices attached to the system since the
last reboot.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2240/dmesg-1m?a=view"><tt>dmesg</tt>(1M)</a></p></td>
</tr>
</table><p>For information on the device names that are used to identify devices on
the system, see <a href="devaccess-90138.html#devaccess-29390">Device Naming Conventions</a>.</p>

<a name="devconfig-19"></a><h5><tt>driver not attached</tt> Message</h5>
<p><a name="devconfig-ix2407"></a>The following driver-related message might be displayed by the <tt>prtconf</tt> and <tt>sysdef</tt>
commands: </p><pre><i>device</i>, instance #<i>number</i> (driver not attached)</pre><p>This message does not always mean that a driver is unavailable for
this device. This message means that no driver is <b>currently</b> attached to the device
instance because no device exists at this node or the device is not
in use. Drivers are loaded automatically when the device is accessed. They are
unloaded when the device is not in use.</p>

<a name="devconfig-20"></a><h5>How to Display System Configuration Information</h5>
<p>Use the output of the <tt>prtconf</tt> and <tt>sysdef</tt> commands to identify which disk,
tape, and CD-ROM devices are connected to the system. The output of these
commands displays the <tt>driver not attached</tt> messages next to the device instances. Because these devices
are always being monitored by some system process, the <tt>driver not attached</tt> message is usually a
good indication that no device exists at that device instance. <a name="devconfig-ix2408"></a></p><p>Use the <tt>sysdef</tt> command to display system configuration information that include pseudo devices,
loadable modules, and selected kernel parameters.<a name="devconfig-ix2410"></a></p><ul>
<li><b>Display system and device configuration information.</b>
<ul><li><p>Display all the devices connected to a system.</p><p>For example, the following <tt>prtconf -v</tt> output on a SunBlade 1000 identifies the disk devices connected to the system. The detailed disk information is described in the <tt>Device Minor Nodes</tt> section within the <tt>ssd/fp</tt> driver section.</p><pre>$ <tt><b>/usr/sbin/prtconf -v | more</b></tt>
.
.
.
            Device Minor Nodes:
               dev=(118,8)
                  dev_path=/pci@8,600000/SUNW,qlc@4/fp@0,0/ssd@w210000
2037bde864,0:a
                      spectype=blk type=minor
                      dev_link=/dev/dsk/c0t1d0s0
                  dev_path=/pci@8,600000/SUNW,qlc@4/fp@0,0/ssd@w210000
2037bde864,0:a,raw
                      spectype=chr type=minor
                      dev_link=/dev/rdsk/c0t1d0s0
               dev=(118,9)
                  dev_path=/pci@8,600000/SUNW,qlc@4/fp@0,0/ssd@w210000
2037bde864,0:b
                      spectype=blk type=minor
                      dev_link=/dev/dsk/c0t1d0s1
                  dev_path=/pci@8,600000/SUNW,qlc@4/fp@0,0/ssd@w210000
2037bde864,0:b,raw
.
.
.</pre></li>
<li><p>Display information about one specific device connected to the system.</p><p>For example, the following <tt>prtconf</tt> output on a SunBlade 1000 displays the <tt>ssd</tt> instance number for <tt>/dev/dsk/c0t1d0s0</tt>.</p><pre># <tt><b>prtconf -v /dev/dsk/c0t1d0s0</b></tt>
ssd, instance #1</pre></li>
<li><p>Display only the devices that are attached to the system.</p><pre># <tt><b>prtconf | grep -v not</b></tt></pre></li>
<li><p>Display device usage information.</p><p>For example, the following <tt>fuser</tt> command displays which processes are accessing the <tt>/dev/console</tt> device.</p><pre># <tt><b>fuser -d /dev/console</b></tt>
/dev/console:      346o     323o
#</pre></li></ul>
</li></ul><a name="eyamo"></a>Example&nbsp;5-1 Displaying System Configuration Information<p>The following <tt>prtconf</tt> output is displayed on a SPARC based system.</p><pre># <tt><b>prtconf</b></tt>
System Configuration:  Sun Microsystems  sun4u
Memory size: 512 Megabytes
System Peripherals (Software Nodes):

SUNW,Sun-Blade-1000
    scsi_vhci, instance #0
    packages (driver not attached)
        SUNW,builtin-drivers (driver not attached)
        deblocker (driver not attached)
        disk-label (driver not attached)
        terminal-emulator (driver not attached)
        obp-tftp (driver not attached)
        dropins (driver not attached)
        kbd-translator (driver not attached)
        ufs-file-system (driver not attached)
    chosen (driver not attached)
    openprom (driver not attached)
        client-services (driver not attached)
    options, instance #0
    aliases (driver not attached)
    memory (driver not attached)
    virtual-memory (driver not attached)
    SUNW,UltraSPARC-III, instance #0
    memory-controller, instance #0
    SUNW,UltraSPARC-III, instance #1
    memory-controller, instance #1
    pci, instance #0
        ebus, instance #0
            flashprom (driver not attached)
            bbc (driver not attached)
            ppm, instance #0
            i2c, instance #0
                dimm-fru, instance #0
                dimm-fru, instance #1
                dimm-fru, instance #2
                dimm-fru, instance #3
                nvram, instance #4
                idprom (driver not attached)
            i2c, instance #1
                cpu-fru, instance #5
                temperature, instance #0
                cpu-fru, instance #6
                temperature, instance #1
                fan-control, instance #0
                motherboard-fru, instance #7
                i2c-bridge (driver not attached)
            beep, instance #0
            rtc, instance #0
            gpio (driver not attached)
            pmc (driver not attached)
            floppy (driver not attached)
            parallel (driver not attached)
            serial, instance #0
        network, instance #0
        firewire, instance #0
        usb, instance #0
        scsi (driver not attached)
            disk (driver not attached)
            tape (driver not attached)
        scsi (driver not attached)
            disk (driver not attached)
            tape (driver not attached)
    pci, instance #1
        SUNW,qlc, instance #0
            fp (driver not attached)
                disk (driver not attached)
            fp, instance #1
                ssd, instance #1
                ssd, instance #0 (driver not attached)
                ssd, instance #2 (driver not attached)
                ssd, instance #3 (driver not attached)
                ssd, instance #4 (driver not attached)
                ssd, instance #5 (driver not attached)
                ssd, instance #6 (driver not attached)
    upa, instance #0
        SUNW,ffb, instance #0 (driver not attached)
    ppm, instance #0
    pseudo, instance #0</pre><p><a name="devconfig-ix2411"></a>The following <tt>sysdef</tt> output is displayed from an x86 based system. </p><pre># <tt><b>sysdef</b></tt>
* Hostid
*
  29f10b4d
*
* i86pc Configuration
*
*
* Devices
*
+boot (driver not attached)
memory (driver not attached)
aliases (driver not attached)
chosen (driver not attached)
i86pc-memory (driver not attached)
i86pc-mmu (driver not attached)
openprom (driver not attached)
options, instance #0
packages (driver not attached)
delayed-writes (driver not attached)
itu-props (driver not attached)
isa, instance #0
    motherboard (driver not attached)
    pnpADP,1542, instance #0
    asy, instance #0
    asy, instance #1
    lp, instance #0 (driver not attached)
    fdc, instance #0
        fd, instance #0
        fd, instance #1 (driver not attached)
    kd (driver not attached)
    kdmouse (driver not attached)
.
.
.</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devconfig-23.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devconfig-6.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

