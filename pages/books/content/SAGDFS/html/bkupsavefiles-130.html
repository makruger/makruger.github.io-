<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Copying Files to a Remote Tape Device - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupsavefiles-129.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupsavefiles-60201.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level2"><a href="bkupsavefiles-1.html">Commands for Copying File Systems</a></p>
<p class="toc level2"><a href="bkupsavefiles-2.html">Copying File Systems Between Disks</a></p>
<p class="toc level3"><a href="bkupsavefiles-2.html#bkupsavefiles-60904">How to Copy a Disk (<tt>dd</tt>)</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-21.html">Copying Directories Between File Systems (<tt>cpio</tt> Command)</a></p>
<p class="toc level3"><a href="bkupsavefiles-21.html#bkupsavefiles-14144">How to Copy Directories Between File Systems (<tt>cpio</tt>)</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-38276.html">Copying Files and File Systems to Tape</a></p>
<p class="toc level2"><a href="bkupsavefiles-30.html">Copying Files to Tape (<tt>tar</tt> Command)</a></p>
<p class="toc level3"><a href="bkupsavefiles-30.html#bkupsavefiles-22962">How to Copy Files to a Tape (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-30.html#bkupsavefiles-18134">How to List the Files on a Tape (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-30.html#bkupsavefiles-30917">How to Retrieve Files From a Tape (<tt>tar</tt>)</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-47.html">Copying Files to a Tape With the <tt>pax</tt> Command</a></p>
<p class="toc level3"><a href="bkupsavefiles-47.html#bkupsavefiles-48">How to Copy Files to a Tape (<tt>pax</tt>)</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-129.html">Copying Files to Tape With the <tt>cpio</tt> Command</a></p>
<p class="toc level3"><a href="bkupsavefiles-129.html#bkupsavefiles-85934">How to Copy All Files in a Directory to a Tape (<tt>cpio</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-129.html#bkupsavefiles-30690">How to List the Files on a Tape (<tt>cpio</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-129.html#bkupsavefiles-66148">How to Retrieve All Files From a Tape (<tt>cpio</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-129.html#bkupsavefiles-86108">How to Retrieve Specific Files From a Tape (<tt>cpio</tt>)</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Copying Files to a Remote Tape Device</a></p>
<p class="toc level3"><a href="#bkupsavefiles-17981">How to Copy Files to a Remote Tape Device (<tt>tar</tt> and <tt>dd</tt>)</a></p>
<p class="toc level3"><a href="#bkupsavefiles-74428">How to Extract Files From a Remote Tape Device</a></p>
</div>
<p class="toc level2 tocsp"><a href="bkupsavefiles-60201.html">Copying Files and File Systems to Diskette</a></p>
<p class="toc level3"><a href="bkupsavefiles-60201.html#bkupsavefiles-84545">How to Copy Files to a Single Formatted Diskette (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-60201.html#bkupsavefiles-78890">How to List the Files on a Diskette (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-60201.html#bkupsavefiles-53640">How to Retrieve Files From a Diskette (<tt>tar</tt>)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="bkupsavefiles-130"></a><h3>Copying Files to a Remote Tape Device</h3>


<a name="bkupsavefiles-17981"></a><h4>How to Copy Files to a Remote Tape Device (<tt>tar</tt> and <tt>dd</tt>)</h4><ol>
<li><a name="bkupsavefiles-step-77"></a><b>The following prerequisites must be met to use a remote tape drive:</b><ol style="list-style-type: lower-alpha">
				 
<li><a name="bkupsavefiles-step-128"></a><b>The local host name and optionally, the user name of the user doing
the copy, must appear in the remote system's <tt>/etc/hosts.equiv</tt> file. Or, the
user doing the copy must have his or her home directory accessible on
the remote machine, and have the local machine name in <tt>$HOME/.rhosts</tt>.</b><p>For more information, see the <a href="http://docs.sun.com/doc/819-2251/hosts.equiv-4?a=view"><tt>hosts.equiv</tt>(4)</a> man page.</p></li>
<li><a name="bkupsavefiles-step-127"></a><b>An entry for the remote system must be in the local system's <tt>/etc/inet/hosts</tt>
file or in the name service <tt>hosts</tt> file.</b></li></ol></li>
<li><a name="bkupsavefiles-step-121"></a><b>To test whether you have the appropriate permission to execute a remote command,
try the following:</b><pre>$ <tt><b>rsh remotehost echo test</b></tt></pre><p>If <tt>test</tt> is echoed back to you, you have permission to execute remote
commands. If <tt>Permission denied</tt> is echoed back to you, check your setup as described
in Step 1.</p></li>
<li><a name="bkupsavefiles-step-2"></a><b>Change to the directory where you want to put the files.</b></li>
<li><a name="bkupsavefiles-step-3"></a><b>Insert the tape into the tape drive.</b></li>
<li><a name="bkupsavefiles-step-78"></a><b><a name="bkupsavefiles-ix3176"></a>Copy the files to a remote tape drive. </b><pre>$ <tt><b>tar cvf -</b></tt> <i>filenames</i> <tt><b>| rsh</b></tt> <i>remote-host</i> <tt><b>dd of=/dev/rmt/</b></tt><i>n</i> <tt><b>obs=</b></tt><i>block-size</i></pre><dl><dt><tt>tar</tt> <tt>cf</tt></dt>
<dd><p>Creates a tape archive, lists the files as they are archived, and specifies the tape device.</p></dd>
<dt><tt>v</tt></dt>
<dd><p>Provides additional information about the tar file entries.</p></dd>
<dt><tt>-</tt> (Hyphen)</dt>
<dd><p>Represents a placeholder for the tape device.</p></dd>
<dt><i>filenames</i></dt>
<dd><p>Identifies the files to be copied. Separate multiple files with spaces.</p></dd>
<dt><tt>rsh</tt> <i>| remote-host</i></dt>
<dd><p>Pipes the <tt>tar</tt> command's output to a remote shell.</p></dd>
<dt><tt>dd of=</tt> /dev/rmt<i>/n</i></dt>
<dd><p>Represents the output device.</p></dd>
<dt><tt>obs=</tt><i>block-size</i></dt>
<dd><p>Represents the blocking factor.</p></dd>
</dl>
</li>
<li><a name="bkupsavefiles-step-79"></a><b>Remove the tape from the drive. Write the names of the files on
the tape label.</b></li></ol><a name="fncsh"></a>Example&nbsp;29-12 Copying Files to a Remote Tape Drive (<tt>tar</tt> and <tt>dd</tt>)<pre># <tt><b>tar cvf - * | rsh mercury dd of=/dev/rmt/0 obs=126b</b></tt>
a answers/ 0 tape blocks
a answers/test129 1 tape blocks
a sc.directives/ 0 tape blocks
a sc.directives/sc.190089 1 tape blocks
a tests/ 0 tape blocks
a tests/test131 1 tape blocks
6+9 records in
0+1 records out</pre>

<a name="bkupsavefiles-74428"></a><h4>How to Extract Files From a Remote Tape Device</h4><ol>
<li><a name="bkupsavefiles-step-4"></a><b>Insert the tape into the tape drive.</b></li>
<li><a name="bkupsavefiles-step-82"></a><b>Change to a temporary directory.</b><pre>$ <tt><b>cd /var/tmp</b></tt></pre></li>
<li><a name="bkupsavefiles-step-83"></a><b><a name="bkupsavefiles-ix3179"></a>Extract the files from a remote tape device.</b><pre>$ <tt><b>rsh</b></tt> <i>remote-host</i> <tt><b>dd if=/dev/rmt/</b></tt><i>n</i> <tt><b>| tar xvBpf -</b></tt></pre><dl><dt><tt>rsh</tt> <i>remote-host</i></dt>
<dd><p>Indicates a remote shell that is started to extract the files from the tape device by using the <tt>dd</tt> command.</p></dd>
<dt><tt>dd if=/dev/rmt/</tt><i>n</i></dt>
<dd><p>Indicates the input device.</p></dd>
<dt><tt>| tar xvBpf -</tt></dt>
<dd><p>Pipes the output of the <tt>dd</tt> command to the <tt>tar</tt> command, which is used to restore the files.</p></dd>
</dl>
</li>
<li><a name="bkupsavefiles-step-122"></a><b>Verify that the files have been extracted.</b><pre>$ <tt><b>ls -l</b></tt></pre></li></ol><a name="fncsa"></a>Example&nbsp;29-13 Extracting Files From a Remote Tape Drive<pre>$ <tt><b>cd /var/tmp</b></tt>
$ <tt><b>rsh mercury dd if=/dev/rmt/0 | tar xvBpf -</b></tt>
x answers/, 0 bytes, 0 tape blocks
x answers/test129, 48 bytes, 1 tape blocks
20+0 records in
20+0 records out
x sc.directives/, 0 bytes, 0 tape blocks
x sc.directives/sc.190089, 77 bytes, 1 tape blocks
x tests/, 0 bytes, 0 tape blocks
x tests/test131, 84 bytes, 1 tape blocks
$ <tt><b>ls -l</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupsavefiles-129.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupsavefiles-60201.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

