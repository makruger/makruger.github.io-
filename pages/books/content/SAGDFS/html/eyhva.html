<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using USB Audio Devices - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devusbtasks-36.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devusbtasks-37.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level2"><a href="devusbtasks-73.html">Managing USB Devices in the Solaris OS (Roadmap)</a></p>
<p class="toc level2"><a href="devusbtasks-34.html">Using USB Mass Storage Devices (Task Map)</a></p>
<p class="toc level2"><a href="devusbtasks-12.html">Using USB Mass Storage Devices</a></p>
<p class="toc level3"><a href="devusbtasks-12.html#eyhux">How to Display USB Device Information</a></p>
<p class="toc level3"><a href="devusbtasks-12.html#devusbtasks-50">How to Create a File System on a USB Mass Storage Device </a></p>
<p class="toc level3"><a href="devusbtasks-12.html#gafmj">How to Modify Partitions and Create a PCFS File System on a USB Mass Storage Device</a></p>
<p class="toc level3"><a href="devusbtasks-12.html#gafnz">How to Create a Solaris Partition and Modify the Slices on a USB Mass Storage Device</a></p>
<p class="toc level3"><a href="devusbtasks-12.html#devusbtasks-22">How to Mount or Unmount a USB Mass Storage Device</a></p>
<p class="toc level3"><a href="devusbtasks-12.html#devusbtasks-56">How to Disable Specific USB Drivers</a></p>
<p class="toc level3"><a href="devusbtasks-12.html#devusbtasks-33">How to Remove Unused USB Device Links</a></p>
<p class="toc level2 tocsp"><a href="devusbtasks-36.html">Using USB Audio Devices (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Using USB Audio Devices</a></p>
<p class="toc level3"><a href="#devusbtasks-26">How to Add USB Audio Devices</a></p>
<p class="toc level3"><a href="#devusbtasks-31">How to Identify Your System's Primary Audio Device</a></p>
<p class="toc level3"><a href="#eyhvg">How to Change the Primary USB Audio Device</a></p>
</div>
<p class="toc level2 tocsp"><a href="devusbtasks-37.html">Hot-Plugging USB Devices With the <tt>cfgadm</tt> Command (Task Map)</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#eyhvx">How to Display USB Bus Information (<tt>cfgadm</tt>)</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#devusbtasks-96">How to Unconfigure a USB Device</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#devusbtasks-100">How to Configure a USB Device</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#devusbtasks-104">How to Logically Disconnect a USB Device</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#devusbtasks-108">How to Logically Connect a USB Device</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#devusbtasks-112">How to Logically Disconnect a USB Device Subtree</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#devusbtasks-115">How to Reset a USB Device</a></p>
<p class="toc level3"><a href="devusbtasks-37.html#devusbtasks-51">How to Change the Default Configuration of a Multi-Configuration USB Device</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="eyhva"></a><h3>Using USB Audio Devices</h3>
<p>For information about USB audio support in specific Solaris releases, see <a href="devusbover-28.html">Solaris Support for USB Devices</a>.</p><p><a name="indexterm-159"></a>This Solaris release provides USB audio support that is implemented by a pair
of cooperating drivers, <tt>usb_ac</tt> and <tt>usb_as</tt>.  The audio control driver, <tt>usb_ac</tt>,
is a Solaris USB Architecture compliant client driver that provides the controlling interface
to user applications. The audio streaming driver, <tt>usb_as</tt>, processes audio data messages during play
and record. It sets sample frequency and precision, and encodes requests from the
<tt>usb_ac</tt> driver. Both drivers comply with the USB audio class 1.0 specification.</p><p>Some audio devices can set volume under software control. A STREAMS module, <tt>usb_ah</tt>,
is pushed on top of the HID driver for managing this function.</p><p>Solaris supports USB audio devices that are play-only, record-only, or record and play.
Hot-plugging of USB audio devices is supported.</p>
<ul><li><p>USB audio devices are supported on SPARC Ultra<sup>TM</sup> and x86 platforms that have USB connectors.</p></li>
<li><p>USB audio devices that are supported in the Solaris 8 10/01, Solaris 8 2/02, or Solaris 9 releases must support a fixed 44100 or 48000 Hz sampling frequency to play or record. </p></li>
<li><p>For fully supported audio data format information, see <a href="http://docs.sun.com/doc/819-2254/usb-ac-7d?a=view"><tt>usb_ac</tt>(7D)</a>.</p></li></ul>
<p>The primary audio device is <tt>/dev/audio</tt>. You can verify that <tt>/dev/audio</tt> is pointing
to USB audio by using the following command:</p><pre>% <tt><b>mixerctl</b></tt>
Device /dev/audioctl:
  Name    = USB Audio
  Version = 1.0
  Config  = external

Audio mixer for /dev/audioctl is enabled</pre><p>After you connect your USB audio devices, you access them with the
<tt>audioplay</tt> and <tt>audiorecord</tt> command through the <tt>/dev/sound/</tt><i>N</i> device links.</p><p>Note that the <tt>/dev/audio</tt> and <tt>/dev/sound/N</tt> devices can refer to speakers, microphones, or
combination devices.  If you refer to the incorrect device type, the command
fails. For example, the <tt>audioplay</tt> command fails if you try to use
it with a microphone.</p><p>You can select a specific default audio device for most Sun audio
applications, such as <tt>audioplay</tt> and <tt>audiorecord</tt>, by setting the <tt>AUDIODEV</tt> shell variable or by
specifying the <tt>-d</tt> option for these commands. However, setting <tt>AUDIODEV</tt> does not work
for third-party applications that have <tt>/dev/audio</tt> hardcoded as the audio file.</p><p>When you plug in a USB audio device, it automatically becomes the
primary audio device, <tt>/dev/audio</tt>, unless <tt>/dev/audio</tt> is in use. For instructions on changing <tt>/dev/audio</tt>
from on-board audio to USB audio and vice versa, refer to <a href="#eyhvg">How to Change the Primary USB Audio Device</a>, and
<a href="http://docs.sun.com/doc/819-2254/usb-ac-7d?a=view"><tt>usb_ac</tt>(7D)</a>.</p>

<a name="devusbtasks-29"></a><h4>Hot-Plugging Multiple USB Audio Devices</h4>
<p>If a USB audio device is plugged into a system, it becomes
the primary audio device, <tt>/dev/audio</tt>. It remains the primary audio device even after the
system is rebooted. If additional USB audio devices are plugged in, the last
one becomes the primary audio device.</p><p>For additional information on troubleshooting USB audio device problems, see <a href="http://docs.sun.com/doc/819-2254/usb-ac-7d?a=view"><tt>usb_ac</tt>(7D)</a>.</p>

<a name="devusbtasks-26"></a><h4>How to Add USB Audio Devices</h4><ol>
<li><a name="devusbtasks-step-2"></a><b>Plug in the USB speaker.<a name="indexterm-160"></a><a name="indexterm-161"></a></b><p>The primary audio device, <tt>/dev/audio</tt>, points to the USB speaker.</p><pre>% <tt><b>ls -l /dev/audio</b></tt>
lrwxrwxrwx   1 root     root    10 Feb 13 08:46 /dev/audio -> usb/audio0</pre></li>
<li><a name="devusbtasks-step-8"></a><b>(Optional) Remove the speaker. Then, plug it back in.</b><p>If you remove the speaker, the <tt>/dev/audio</tt> device reverts back to on-board audio.</p><pre>% <tt><b>ls -l /dev/audio</b></tt>
lrwxrwxrwx   1 root     root   7 Feb 13 08:47 /dev/audio -> sound/0</pre></li>
<li><a name="devusbtasks-step-29"></a><b>Add a USB microphone.</b><pre>% <tt><b>ls -l /dev/audio</b></tt>
lrwxrwxrwx   1 root     root    10 Feb 13 08:54 /dev/audio -> usb/audio1</pre></li></ol>

<a name="devusbtasks-31"></a><h4>How to Identify Your System's Primary Audio Device</h4><p>This procedure assumes that you have already connected the USB audio devices.</p><ul>
<li><a name="devusbtasks-step-47"></a><b>Examine your system's new audio links.<a name="indexterm-162"></a><a name="indexterm-163"></a></b>
<ul><li><p>Display your system's new audio links with the <tt>ls</tt> command.</p><p>For example:</p><pre>% <tt><b>ls -lt /dev/audio*</b></tt>
lrwxrwxrwx   1 root  root      7 Jul 23 15:46 /dev/audio -> usb/audio0
lrwxrwxrwx   1 root  root     10 Jul 23 15:46 /dev/audioctl -> 
usb/audioctl0/
% <tt><b>ls -lt /dev/sound/*</b></tt>
lrwxrwxrwx   1 root  root     74 Jul 23 15:46 /dev/sound/1 -> 
../../devices/pci@1f,4000/usb@5/hub@1/device@3/sound-control@0:...
lrwxrwxrwx   1 root  root     77 Jul 23 15:46 /dev/sound/1ctl -> 
../../devices/pci@1f,4000/usb@5/hub@1/device@3/sound-control@0:...
lrwxrwxrwx   1 root  other    66 Jul 23 14:21 /dev/sound/0 -> 
../../devices/pci@1f,4000/ebus@1/SUNW,CS4231@14,200000:sound,audio
lrwxrwxrwx   1 root  other    69 Jul 23 14:21 /dev/sound/0ctl -> 
../../devices/pci@1f,4000/ebus@1/SUNW,CS4231@14,200000:sound,audioctl
% </pre><p>Notice that the primary audio device, <tt>/dev/audio</tt>, is pointing to the newly plugged in USB audio device, <tt>/dev/usb/audio0</tt>.</p></li>
<li><p>You can also examine your system's USB audio devices with the <tt>prtconf</tt> command and look for the USB device information.</p><pre>% <tt><b>prtconf</b></tt>
.
.
.
usb, instance #0
   hub, instance #0
        mouse, instance #0
        keyboard, instance #1
        device, instance #0
            sound-control, instance #0
            sound, instance #0
            input, instance #0
.
.
.</pre></li></ul>
</li></ul>

<a name="eyhvg"></a><h4>How to Change the Primary USB Audio Device</h4><ul>
<li><b>Select one of the following to change the primary USB audio device.</b>
<ul><li><p>If you want the on-board audio device to become the primary audio device, remove the USB audio devices. The <tt>/dev/audio</tt> link then points to the <tt>/dev/sound/0</tt> entry. If the <tt>/dev/sound/0</tt> entry is not the primary audio device, then either shut down the system and use the <tt>boot</tt> <tt>-r</tt> command, or run the <tt>devfsadm</tt> <tt>-i</tt> command as root.</p></li>
<li><p>If you want the USB audio device to become primary audio device, just plug it in and check the device links.<a name="indexterm-164"></a><a name="indexterm-165"></a></p></li></ul>
</li></ul>

<a name="devusbtasks-30"></a><h4>Troubleshooting USB Audio Device Problems</h4>
<p>Sometimes, USB speakers do not produce any sound, even though the driver is
attached and the volume is set to high. Hot-plugging the device might
not change this behavior.<a name="indexterm-166"></a><a name="indexterm-167"></a></p><p>The workaround is to power cycle the USB speakers.</p>

<a name="devusbtasks-16"></a><h5>Key Points of Audio Device Ownership</h5>
<p>Keep the following key points of audio device ownership in mind when working
with audio devices:<a name="indexterm-168"></a></p>
<ul><li><p>When you plug in a USB audio device and you are logged in on the console, the console is the owner of the <tt>/dev/</tt>* entries. This situation means you can use the audio device as long as you are logged in to the console.</p></li>
<li><p>If you are not logged in to the console when you plug in a USB audio device, root becomes the owner of the device. However, if you log in to the console and attempt to access the USB audio device, device ownership changes to the console. For more information, see <a href="http://docs.sun.com/doc/819-2251/logindevperm-4?a=view"><tt>logindevperm</tt>(4)</a>.</p></li>
<li><p>When you remotely log in with the <tt>rlogin</tt> command and attempt to access the USB audio device, the ownership does not change. This means that, for example, unauthorized users cannot listen to conversations over a microphone owned by someone else. </p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devusbtasks-36.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devusbtasks-37.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

