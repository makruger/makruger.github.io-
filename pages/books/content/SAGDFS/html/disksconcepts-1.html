<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Overview of Disk Management - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksconcepts-6.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksconcepts-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level2"><a href="gdgtz.html">What's New in Disk Management?</a></p>
<p class="toc level2"><a href="disksconcepts-6.html">Where to Find Disk Management Tasks</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Overview of Disk Management</a></p>
</div>
<p class="toc level2"><a href="disksconcepts-5.html">Partitioning a Disk</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="disksconcepts-1"></a><h3>Overview of Disk Management</h3>
<p>Managing disks in the Solaris OS usually involves setting up the system and
running the Solaris installation program to create the appropriate disk slices and file
systems and to install the Solaris OS. Occasionally, you might need to use
the <tt>format</tt> utility to add a new disk drive or replace a defective
disk drive.</p>

<a name="disksconcepts-35202"></a><h4>Disk Terminology</h4>
<p>Before you can effectively use the information in this section, you should be
familiar with basic disk architecture. In particular, you should be familiar with the
following terms:</p><table><col width="35.96*"><col width="64.04*"><tr><th align="left" valign="top" scope="column"><p>Disk Term</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Track</p></td>
<td align="left" valign="top" scope="row"><p>A concentric ring on a disk that passes under a
single stationary disk head as the disk rotates.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Cylinder</p></td>
<td align="left" valign="top" scope="row"><p>The set of tracks with the
same nominal distance from the axis about which the disk rotates.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Sector</p></td>
<td align="left" valign="top" scope="row"><p>Section of each
disk platter. A sector holds 512 bytes. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Block</p></td>
<td align="left" valign="top" scope="row"><p>A data storage area on
a disk. A disk block is 512 bytes.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Disk controller</p></td>
<td align="left" valign="top" scope="row"><p>A chip and its
associated circuitry that controls the disk drive.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Disk label</p></td>
<td align="left" valign="top" scope="row"><p>The first sector of a
disk that contains disk geometry and partition information.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Device driver</p></td>
<td align="left" valign="top" scope="row"><p>A kernel module that controls
a hardware or virtual device.</p></td>
</tr>
</table><p>For additional information, see the product information from your disk's manufacturer.</p>

<a name="disksconcepts-47761"></a><h4>About Disk Labels</h4>
<p><a name="indexterm-233"></a>A special area of every disk is set aside for storing information about
the disk's controller, geometry, and slices. This information is called the disk's <b>label</b>.
Another term that is used to described the disk label is the <b>VTOC</b>
(<b>Volume Table of Contents</b>) on a disk with a VTOC label. To <b>label</b> a disk means
to write slice information onto the disk. You usually label a disk after
you change its slices. </p><p>The Solaris release supports the following two disk labels:</p>
<ul><li><p>SMI &ndash; The traditional VTOC label for disks that are less than 1 terabyte in size.</p></li>
<li><p>EFI &ndash; Provides support for disks that are larger than 1 terabyte on systems that run a 64-bit Solaris kernel. The Extensible Firmware Interface GUID Partition Table (EFI GPT) disk label is also available for disks less than 1 terabyte that are connected to a system that runs a 32-bit Solaris kernel.</p></li></ul>
<p>If you fail to label a disk after you create slices, the
slices will be unavailable because the OS has no way of &ldquo;knowing&rdquo; about
the slices.</p>

<a name="disksconcepts-14"></a><h4>EFI Disk Label</h4>
<p>The EFI label provides support for physical disks and virtual disk volumes. This
release also includes updated disk utilities for managing disks greater than 1 terabyte.
The UFS file system is compatible with the EFI disk label, and you
can create a UFS file system greater than 1 terabyte. For information on
creating a multiterabyte UFS file system, see <a href="fsoverview-12343.html#fsoverview-18">64-bit: Support of Multiterabyte UFS File Systems</a>.<a name="indexterm-234"></a></p><p>The unbundled Sun QFS file system is also available if you need
to create file systems greater than 1 terabyte. For information on the Sun
QFS file system, see <a href="http://docs.sun.com/doc/816-2542-10"><i>Sun QFS, Sun SAM-FS, and Sun SAM-QFS File System Administrator&rsquo;s Guide</i></a>.</p><p>The Solaris Volume Manager software can also be used to manage disks greater
than 1 terabyte in this Solaris release. For information on using Solaris Volume
Manager, see <a href="http://docs.sun.com/doc/819-2789"><i>Solaris Volume Manager Administration Guide</i></a>.</p><p>The VTOC label is still available for disks less than 1 terabyte
in size. If you are only using disks smaller than 1 terabyte on
your systems, managing disks will be the same as in previous Solaris releases.
In addition, you can use the <tt>format</tt><tt>-e</tt> command to label a disk less than
1 terabyte with an EFI label. For more information, see <a href="disksprep-34.html#disksprep-116">Example&nbsp;11-6</a>.</p><p>You can use the <tt>format</tt> <tt>-e</tt> command to apply an EFI label to
a disk if the system is running the appropriate Solaris release. However, you
should review the important information in <a href="#disksconcepts-17">Restrictions of the EFI Disk Label</a> before attempting to apply an EFI
label.</p>

<a name="disksconcepts-16"></a><h5>Comparison of the EFI Label and the VTOC Label</h5>
<p>The EFI disk label differs from the VTOC disk label in the
following ways:<a name="indexterm-235"></a></p>
<ul><li><p>Provides support for disks greater than 1 terabyte in size.</p></li>
<li><p>Provides usable slices 0-6, where slice 2 is just another slice.</p></li>
<li><p>Partitions (or slices) cannot overlap with the primary or backup label, nor with any other partitions. The size of the EFI label is usually 34 sectors, so partitions start at sector 34. This feature means that no partition can start at sector zero (0).</p></li>
<li><p>No cylinder, head, or sector information is stored in the EFI label. Sizes are reported in blocks.</p></li>
<li><p>Information that was stored in the alternate cylinders area, the last two cylinders of the disk, is now stored in slice 8.</p></li>
<li><p>If you use the <tt>format</tt> utility to change partition sizes, the <tt>unassigned</tt> partition tag is assigned to partitions with sizes equal to zero. By default, the <tt>format</tt> utility assigns the <tt>usr</tt> partition tag to any partition with a size greater than zero. You can use the partition change menu to reassign partition tags after the partitions are changed. However, you cannot change a partition with a non-zero size to the <tt>unassigned</tt> partition tag.</p></li></ul>


<a name="disksconcepts-17"></a><h5>Restrictions of the EFI Disk Label</h5>
<p>Keep the following restrictions in mind when determining whether using disks greater than
1 terabyte is appropriate for your environment:</p>
<ul><li><p>Layered software products intended for systems with VTOC-labeled disks might be incapable of accessing a disk with an EFI disk label.<a name="indexterm-236"></a></p></li>
<li><p>A disk with an EFI label is not recognized on systems running previous Solaris releases.</p></li>
<li><p>You cannot boot from a disk with an EFI disk label.</p></li>
<li><p>You cannot use the <tt>fdisk</tt> command on a disk with an EFI label that is greater than 1 terabyte in size.</p></li>
<li><p>You cannot use the Solaris Management Console's Disk Manager tool to manage disks with EFI labels. Use the <tt>format</tt> utility to partition disks with EFI labels. Then, you can use the Solaris Management Console's Enhanced Storage Tool to manage volumes and disk sets with EFI-labeled disks.</p></li>
<li><p>The EFI specification prohibits overlapping slices. The entire disk is represented by <i>cxtydz</i>.</p></li>
<li><p>The EFI disk label provides information about disk or partition sizes in sectors and blocks, but not in cylinders and heads.</p></li>
<li><p>The following <tt>format</tt> options are either not supported or are not applicable on disks with EFI labels:</p>
<ul><li><p>The <tt>save</tt> option is not supported because disks with EFI labels do not need an entry in the <tt>format.dat</tt> file.</p></li>
<li><p>The <tt>backup</tt> option is not applicable because the disk driver finds the primary label and writes it back to the disk.</p></li></ul>
</li></ul>


<a name="fsulx"></a><h5>Support for EFI-Labeled Disks on x86 Systems</h5>
<p>Solaris support for the EFI disk label is available on x86 systems. Use
the following command to add an EFI label on an x86 system:</p><pre># <tt><b>format -e</b></tt>
> [0] SMI Label
> [1] EFI Label
> Specify Label type[0]: <tt><b>1</b></tt>
> WARNING: converting this device to EFI labels will erase all current
> fdisk partition information. Continue? <tt><b>yes</b></tt></pre><p>Previous label information is not converted to the EFI disk label. </p><p>You will have to recreate the label's partition information manually with the <tt>format</tt>
command. You cannot use the <tt>fdisk</tt> command on a disk with an EFI
label that is greater than 1 terabyte in size. The <tt>fdisk</tt> command
is not intended for disks that are larger than 1 terabyte. For more
information about EFI disk labels, see the preceding section.</p>

<a name="disksconcepts-19"></a><h5>Installing a System With an EFI-Labeled Disk</h5>
<p>The Solaris installation utilities automatically recognize disks with EFI labels. However, you cannot
use the Solaris installation program to repartition these disks. You must use the
<tt>format</tt> utility to repartition an EFI-labeled disk before or after installation. The Solaris
Upgrade and Live Upgrade utilities also recognize a disk with an EFI label.
However, you cannot boot a system from an EFI-labeled disk.<a name="indexterm-237"></a></p><p>After the Solaris release is installed on a system with an EFI-labeled disk,
the partition table appears similar to the following:</p><pre>Current partition table (original):
Total disk sectors available: 2576924638 + 16384 (reserved sectors)

Part      Tag    Flag     First Sector          Size          Last Sector
  0       root    wm                34         1.20TB           2576924636
  1 unassigned    wm                 0            0                0    
  2 unassigned    wm                 0            0                0    
  3 unassigned    wm                 0            0                0    
  4 unassigned    wm                 0            0                0    
  5 unassigned    wm                 0            0                0    
  6 unassigned    wm                 0            0                0    
  8   reserved    wm        2576924638         8.00MB           2576941021</pre>

<a name="disksconcepts-18"></a><h5>Managing Disks With EFI Disks Labels</h5>
<p>Use the following table to locate information on managing disks with EFI disk
labels.</p><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>For More Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>If the system is already installed, connect the disk to
the system and perform a reconfiguration boot.</p></td>
<td align="left" valign="top" scope="row"><p><a href="diskssadd-53.html">SPARC: Adding a System Disk or a Secondary Disk (Task Map)</a> or <a href="disksxadd-73.html">x86: Adding a System Disk or a Secondary Disk (Task Map)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Repartition the disk by using
the <tt>format</tt> utility, if necessary.</p></td>
<td align="left" valign="top" scope="row"><p><a href="diskssadd-53.html#diskssadd-43616">SPARC: How to Create Disk Slices and Label a Disk</a> or <a href="disksxadd-1.html#disksxadd-33190">x86: How to Create Disk Slices and Label a Disk</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create disk volumes, and if needed, create
soft partitions by using Solaris Volume Manager. Or, set up a ZFS storage
pool.</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2789/storage-overview-1?a=view">Chapter 2, Storage Management Concepts, in <i>Solaris Volume Manager Administration Guide</i></a> or <a href="http://docs.sun.com/doc/817-2271/gayob?a=view">Creating a ZFS Storage Pool in <i>ZFS Administration Guide</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create UFS file systems for the new disk by using
the <tt>newfs</tt> command.</p></td>
<td align="left" valign="top" scope="row"><p><a href="diskssadd-53.html#diskssadd-40446">SPARC: How to Create a UFS File System</a> or <a href="disksxadd-1.html#disksxadd-41967">x86: How to Create File Systems</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Or, create a ZFS file system.*</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/817-2271/gayog?a=view">How to Create ZFS File Systems in <i>ZFS Administration Guide</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Clone a disk
with an EFI label</p></td>
<td align="left" valign="top" scope="row"><p><a href="bkupsavefiles-2.html#fpyma">Example&nbsp;29-2</a></p></td>
</tr>
</table><p>*If a ZFS file system or UFS file system does not meet
your needs, consider a QFS file system.</p>

<a name="disksconcepts-22"></a><h5>Troubleshooting Problems With EFI Disk Labels</h5>
<p>Use the following error messages and solutions to troubleshoot problems with EFI-labeled disks.<a name="indexterm-238"></a><a name="indexterm-239"></a></p><dl><dt>Error Message</dt>
<dd><pre>Dec  3 09:26:48 holoship scsi: WARNING: /sbus@a,0/SUNW,socal@d,10000/
sf@1,0/ssd@w50020f23000002a4,0 (ssd1):
Dec  3 09:26:48 holoship disk has 2576941056 blocks, which is too large 
for a 32-bit kernel</pre></dd>
<dt>Cause</dt>
<dd><p>You attempted to boot a system running a 32-bit SPARC or x86 kernel with a disk greater than 1 terabyte.</p></dd>
<dt>Solution</dt>
<dd><p>Boot a system running a 64-bit SPARC or x86 kernel with a disk greater than 1 terabyte.</p></dd>
<dt>Error Message</dt>
<dd><pre>Dec  3 09:12:17 holoship scsi: WARNING: /sbus@a,0/SUNW,socal@d,10000/
sf@1,0/ssd@w50020f23000002a4,0 (ssd1):
Dec  3 09:12:17 holoship corrupt label - wrong magic number</pre></dd>
<dt>Cause</dt>
<dd><p>You attempted to add a disk to a system running an older Solaris release.</p></dd>
<dt>Solution</dt>
<dd><p>Add the disk to a system running the Solaris release that supports the EFI disk label.</p></dd>
</dl>


<a name="disksconcepts-20068"></a><h4>About Disk Slices</h4>
<p>Files stored on a disk are contained in file systems. Each file
system on a disk is assigned to a <b>slice</b>, which is a group
of sectors set aside for use by that file system. Each disk slice
appears to the Solaris OS (and to the system administrator) as though it
were a separate disk drive.<a name="indexterm-240"></a><a name="indexterm-241"></a></p><p>For information about file systems, see <a href="fsoverview-38559.html">Chapter&nbsp;17, Managing File Systems (Overview)</a>.</p>
<hr><p><b>Note - </b>Slices are sometimes referred to as <i>partitions</i>. Certain interfaces, such as the <tt>format</tt>
utility, refer to slices as partitions.</p>
<hr>
<p>When setting up slices, remember these rules:</p>
<ul><li><p>Each disk slice holds only one file system.</p></li>
<li><p>No file system can span multiple slices.</p></li></ul>
<p>Slices are set up slightly differently on SPARC and x86 platforms. The following
table summarizes the differences.</p><a name="disksconcepts-97082"></a><h6>Table&nbsp;10-1 Slice Differences on SPARC and x86 Platforms</h6><table><col width="180*"><col width="180*"><tr><th align="left" valign="top" scope="column"><p>SPARC Platform</p></th>
<th align="left" valign="top" scope="column"><p>x86 Platform</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>The entire disk is devoted to Solaris
OS.</p></td>
<td align="left" valign="top" scope="row"><p>Disk is divided into <tt>fdisk</tt> partitions, one <tt>fdisk</tt> partition per operating system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><b>VTOC</b>
&ndash; The disk is divided into 8 slices, numbered 0-7.</p><p><b>EFI</b> &ndash; The disk
is divided into 7 slices, numbered 0-6.</p></td>
<td align="left" valign="top" scope="row"><p><b>VTOC</b> &ndash; The Solaris <tt>fdisk</tt> partition is divided
into 10 slices, numbered 0&ndash;9.</p><p><b>EFI</b> &ndash; The disk is divided into 7 slices,
numbered 0-6</p></td>
</tr>
</table><p>Solaris Volume Manager, previously the Solstice DiskSuite<sup>TM</sup>, has a partitioning feature, <b>soft partitions</b>. Soft
partitions enable more than eight partitions per disk.</p><p>For general information about Solaris Volume Manager, see <a href="http://docs.sun.com/doc/819-2789/storage-overview-1?a=view">Chapter 2, Storage Management Concepts, in <i>Solaris Volume Manager Administration Guide</i></a>. For information on soft
partitions, see <a href="http://docs.sun.com/doc/819-2789/about-softpart-1?a=view">Chapter 12, Soft Partitions (Overview), in <i>Solaris Volume Manager Administration Guide</i></a>.</p>

<a name="disksconcepts-12351"></a><h5>Disk Slices</h5>
<p>The following table describes the slices that might be found on a
system that runs the Solaris OS.</p><p>On x86 systems:</p>
<ul><li><p>Disks are divided into <tt>fdisk</tt> partitions. An <tt>fdisk</tt> partition is a section of the disk that is reserved for a particular operating system, such as the Solaris OS.</p></li>
<li><p>The Solaris OS places ten slices, numbered 0-9, on a Solaris <tt>fdisk</tt> partition.</p></li></ul>
<a name="disksconcepts-25860"></a><h6>Table&nbsp;10-2 Customary Disk Slices</h6><table><col width="43.66*"><col width="57.30*"><col width="92.18*"><col width="157.37*"><tr><th align="left" valign="top" scope="column"><p> Slice</p></th>
<th align="left" valign="top" scope="column"><p>File System</p></th>
<th align="left" valign="top" scope="column"><p>Usually Found on Client or Server Systems?</p></th>
<th align="left" valign="top" scope="column"><p>Comments</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>0</p></td>
<td align="left" valign="top" scope="row"><p>root (<tt>/</tt>)</p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p>Holds files and
directories that make up the OS.</p><p><b>EFI</b> &ndash; You cannot boot from a disk
with an EFI label.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1</p></td>
<td align="left" valign="top" scope="row"><p>swap</p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p>Provides virtual memory, or <b>swap space</b>. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>2</p></td>
<td align="left" valign="top" scope="row"><p>&mdash;</p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p><b>VTOC</b> &ndash; Refers to
the entire disk, by convention. The size of this slice should not be
changed.</p><p><b>EFI</b> &ndash; Optional slice to be defined based on your site's needs.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>3</p></td>
<td align="left" valign="top" scope="row"><p><tt>/export</tt>, for
example</p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p>Optional slice that can be defined based on your site's needs.</p><p>Can be
used on a server to hold alternative versions of operating systems that are
required by client systems.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>4</p></td>
<td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p>Optional slice to be defined based on your site's
needs.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>5</p></td>
<td align="left" valign="top" scope="row"><p><tt>/opt</tt>, for example</p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p>Optional slice to be defined based on your site's needs.</p><p>Can
be used to hold application software added to a system. If a
slice is not allocated for the <tt>/opt</tt> file system during installation, the <tt>/opt</tt> directory
is put in slice 0.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>6</p></td>
<td align="left" valign="top" scope="row"><p><tt>/usr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p>Holds OS commands (also known as <b>executables</b>). This slice
also holds documentation, system programs (<tt>init</tt> and <tt>syslogd</tt>, for example), and library
routines.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>7</p></td>
<td align="left" valign="top" scope="row"><p><tt>/home</tt> or</p><p><tt>/export/home</tt></p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p>Holds files that are created by users.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>8</p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
<td align="left" valign="top" scope="row"><p><b>VTOC</b> &ndash; Contains GRUB boot
information.</p><p><b>EFI</b> &ndash; A reserved slice created by default. This area is similar to
the VTOC's alternate cylinders.  Do not modify or delete this slice.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>9 (<b>x86 only</b>)</p></td>
<td align="left" valign="top" scope="row"><p>&mdash;</p></td>
<td align="left" valign="top" scope="row"><p>Both</p></td>
<td align="left" valign="top" scope="row"><p><b>EFI</b>
&ndash; Not applicable.</p><p><b>VTOC</b> &ndash; Provides an area that is reserved for alternate disk
blocks. Slice 9 is known as the alternate sector slice.</p></td>
</tr>
</table>
<hr><p><b>Note - </b>On a disk with a VTOC label, do not modify slice or
use slice 2 to store a file system. Products, such as Solaris Volume
Manager and Live Upgrade, do not work correctly if slice 2 is modified
in any way.</p>
<hr>


<a name="disksconcepts-7"></a><h5>Using Raw Data Slices</h5>
<p>The disk label is stored in block 0 of each disk. So,
third-party database applications that create raw data slices must not start at block
0. Otherwise, the disk label will be overwritten, and the data on the
disk will be inaccessible.  </p><p>Do not use the following areas of the disk for raw data
slices, which are sometimes created by third-party database applications:  </p>
<ul><li><p>Block 0 where the disk label is stored</p></li>
<li><p>Slice 2, which represents the entire disk with a VTOC label</p></li></ul>


<a name="disksconcepts-11261"></a><h5>Slice Arrangements on Multiple Disks</h5>
<p>Although a single large disk can hold all slices and their corresponding file
systems, two or more disks are often used to hold a system's
slices and file systems.</p>
<hr><p><b>Note - </b>A slice cannot be split between two or more disks. However, multiple swap
slices on separate disks are allowed.</p>
<hr>
<p>For instance, a single disk might hold the root (<tt>/</tt>) file system, a
swap area, and the <tt>/usr</tt> file system, while another disk holds the <tt>/export/home</tt>
file system and other file systems that contain user data.</p><p><a name="indexterm-242"></a><a name="indexterm-243"></a>In a multiple disk arrangement, the disk that contains the OS and swap
space (that is, the disk that holds the root (<tt>/</tt>) and <tt>/usr</tt> file
systems and the slice for swap space) is called the <b>system disk</b>. Other disks
are called <b>secondary disks</b> or <b>non-system disks</b>.  </p><p>When you arrange a system's file systems on multiple disks, you can modify
file systems and slices on the secondary disks without having to shut down
the system or reload the OS.</p><p>When you have more than one disk, you also increase input-output (I/O) volume.
By distributing disk load across multiple disks, you can avoid I/O bottlenecks.</p>

<a name="disksconcepts-25801"></a><h5>Determining Which Slices to Use</h5>
<p><a name="indexterm-244"></a>When you set up a disk's file systems, you choose not only the
size of each slice, but also which slices to use. Your decisions about
these matters depend on the configuration of the system to which the disk
is attached and the software you want to install on the disk. </p><p>System configurations that need disk space are as follows:</p>
<ul><li><p>Servers</p></li>
<li><p>Stand-alone systems</p></li></ul>
<p><a name="indexterm-245"></a>Each system configuration can use slices in a different way. The following table
lists some examples. </p><a name="disksconcepts-42938"></a><h6>Table&nbsp;10-3 System Configurations and Slices</h6><table><col width="44*"><col width="88*"><col width="88*"><tr><th align="left" valign="top" scope="column"><p>Slice</p></th>
<th align="left" valign="top" scope="column"><p>Servers</p></th>
<th align="left" valign="top" scope="column"><p>Stand-alone Systems</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>0</p></td>
<td align="left" valign="top" scope="row"><p>root</p></td>
<td align="left" valign="top" scope="row"><p>root</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1</p></td>
<td align="left" valign="top" scope="row"><p>swap</p></td>
<td align="left" valign="top" scope="row"><p>swap</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>2</p></td>
<td align="left" valign="top" scope="row"><p>&mdash;</p></td>
<td align="left" valign="top" scope="row"><p>&mdash;</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>3</p></td>
<td align="left" valign="top" scope="row"><p><tt>/export</tt></p></td>
<td align="left" valign="top" scope="row"><p>&mdash;</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>6</p></td>
<td align="left" valign="top" scope="row"><p><tt>/usr</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/usr</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>7</p></td>
<td align="left" valign="top" scope="row"><p><tt>/export/home</tt></p></td>
<td align="left" valign="top" scope="row"><p><tt>/home</tt></p></td>
</tr>
</table><p>For more information about system configurations, see <a href="http://docs.sun.com/doc/819-2379/clientconcept-25948?a=view">Overview of System Types in <i>System Administration Guide: Basic Administration</i></a>.</p>
<hr><p><b>Note - </b>The Solaris installation utility provides default slice sizes based on the software you
select for installation.</p>
<hr>


<a name="disksconcepts-25867"></a><h4><tt>format</tt> Utility</h4>
<p><a name="indexterm-246"></a>Read the following overview of the <tt>format</tt> utility and its uses before proceeding
to the &ldquo;how-to&rdquo; or reference sections. </p><p>The <tt>format</tt> utility is a system administration tool that is used to prepare
hard disk drives for use on your Solaris system.</p><p><a name="indexterm-247"></a>The following table shows the features and associated benefits that the <tt>format</tt> utility
provides. </p><a name="disksconcepts-24449"></a><h6>Table&nbsp;10-4 Features and Benefits of the <tt>format</tt> Utility</h6><table><col width="132*"><col width="264*"><tr><th align="left" valign="top" scope="column"><p>Feature</p></th>
<th align="left" valign="top" scope="column"><p>Benefit</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Searches your system for all attached disk drives</p></td>
<td align="left" valign="top" scope="row"><p>Reports on the following:
</p>
<ul><li><p>Target location</p></li>
<li><p>Disk geometry</p></li>
<li><p>Whether the disk is formatted</p></li>
<li><p>If the disk has mounted partitions</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Retrieves disk labels</p></td>
<td align="left" valign="top" scope="row"><p>Convenient for repair operations</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Repairs defective sectors</p></td>
<td align="left" valign="top" scope="row"><p>Allows administrators to repair disk
drives with recoverable errors instead of sending the drive back to the manufacturer</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Formats
and analyzes a disk</p></td>
<td align="left" valign="top" scope="row"><p>Creates sectors on the disk and verifies each sector</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Partitions
a disk</p></td>
<td align="left" valign="top" scope="row"><p>Divides a disk into slices so that individual file systems can
be created on separate slices</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Labels a disk</p></td>
<td align="left" valign="top" scope="row"><p>Writes disk name and configuration information to
the disk for future retrieval (usually for repair operations)</p></td>
</tr>
</table><p>The <tt>format</tt> utility options are described in <a href="disksformat-15833.html">Chapter&nbsp;16, The <tt>format</tt> Utility (Reference)</a>.</p>

<a name="disksconcepts-3"></a><h5>When to Use the <tt>format</tt> Utility</h5>
<p><a name="indexterm-248"></a>Disk drives are partitioned and labeled by the Solaris installation utility when you
install the Solaris release. You can use the <tt>format</tt> utility to do the
following: </p>
<ul><li><p>Display slice information</p></li>
<li><p>Partition a disk</p></li>
<li><p>Add a disk drive to an existing system</p></li>
<li><p>Format a disk drive</p></li>
<li><p>Label a disk</p></li>
<li><p>Repair a disk drive</p></li>
<li><p>Analyze a disk for errors</p></li></ul>
<p>The main reason a system administrator uses the <tt>format</tt> utility is to partition
a disk. These steps are covered in <a href="diskssadd-16103.html">Chapter&nbsp;12, SPARC: Adding a Disk (Tasks)</a> and <a href="disksxadd-38159.html">Chapter&nbsp;13, x86: Adding a Disk (Tasks)</a>.</p><p>See the following section for guidelines on using the <tt>format</tt> utility.</p>

<a name="disksconcepts-16978"></a><h5>Guidelines for Using the <tt>format</tt> Utility</h5>
<a name="indexterm-249"></a><a name="disksconcepts-36653"></a><h6>Table&nbsp;10-5 <tt>format</tt> Utility Guidelines</h6><table><col width="72*"><col width="179*"><col width="108*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Guidelines</p></th>
<th align="left" valign="top" scope="column"><p>For More
Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Format a disk.</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Any existing data is destroyed when you reformat a disk.</p></li>
<li><p>The need for formatting a disk drive has decreased as more and more manufacturers ship their disk drives formatted and partitioned. You might not need to use the <tt>format</tt> utility when you add a disk drive to an existing system.</p></li>
<li><p>If a disk has been relocated and is displaying many disk errors, you can attempt to reformat it. Reformatting automatically remaps any bad sectors.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p><a href="disksprep-10.html#disksprep-24584">How to Format a Disk</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Replace a system disk.</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Data from the damaged system disk must be restored from a backup medium. Otherwise, the system will have to be reinstalled by using the installation utility.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p><a href="diskssadd-53.html#diskssadd-55658">SPARC: How to Connect a System Disk and Boot</a>, <a href="disksxadd-1.html#disksxadd-12484">x86: How to Connect a System Disk</a>, or, if the system must be
reinstalled, <a href="http://docs.sun.com/doc/819-2393"><i>Solaris Express Installation Guide: Basic Installations</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Divide a disk into slices.</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Any existing data is destroyed when you repartition and relabel a disk with existing slices.</p></li>
<li><p>Existing data must be copied to backup media before the disk is repartitioned and restored.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p><a href="diskssadd-53.html#diskssadd-43616">SPARC: How to Create Disk Slices and Label a Disk</a> or <a href="disksxadd-1.html#disksxadd-33190">x86: How to Create Disk Slices and Label a Disk</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Add a secondary disk to
an existing system.</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Any existing data must be restored from backup media if the secondary disk is reformatted or repartitioned.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p> <a href="diskssadd-53.html#diskssadd-87325">SPARC: How to Connect a Secondary Disk and Boot</a> or <a href="disksxadd-1.html#disksxadd-21330">x86: How to Connect a Secondary Disk and Boot</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Repair a disk drive.</p></td>
<td align="left" valign="top" scope="row">
<ul><li><p>Some customer sites prefer to replace rather than repair defective drives. If your site has a repair contract with the disk drive manufacturer, you might not need to use the <tt>format</tt> utility to repair disk drives.</p></li>
<li><p>The repair of a disk drive usually means that a bad sector is added to a defect list. New controllers remap bad sectors with no system interruption.</p></li>
<li><p>If the system has an older controller, you might need to remap a bad sector and restore any lost data.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p><a href="disksprep-87.html">Repairing a Defective Sector</a></p></td>
</tr>
</table>

<a name="disksconcepts-37592"></a><h5>Formatting a Disk</h5>
<p><a name="indexterm-250"></a><a name="indexterm-251"></a>In most cases, disks are formatted by the manufacturer or reseller. So, they
do not need to be reformatted when you install the drive. To
determine if a disk is formatted, use the <tt>format</tt> utility. For more information, see
<a href="disksprep-10.html#disksprep-37081">How to Determine if a Disk Is Formatted</a>. </p><p>If you determine that a disk is not formatted, use the <tt>format</tt>
utility to format the disk.</p><p>When you format a disk, you accomplish two steps:</p>
<ul><li><p>The disk media is prepared for use.</p></li>
<li><p>A list of disk defects based on a surface analysis is compiled.</p></li></ul>

<hr><p><b>Caution - </b>Formatting a disk is a destructive process because it overwrites data on the
disk. For this reason, disks are usually formatted only by the manufacturer or
reseller. If you think disk defects are the cause of recurring problems, you
can use the <tt>format</tt> utility to do a surface analysis. However, be careful
to use only the commands that do not destroy data. For details, see
<a href="disksprep-10.html#disksprep-24584">How to Format a Disk</a>.</p>
<hr>
<p>A small percentage of total disk space that is available for data
is used to store defect and formatting information. This percentage varies according to disk
geometry, and decreases as the disk ages and develops more defects.</p><p>Formatting a disk might take anywhere from a few minutes to several hours,
depending on the type and size of the disk. </p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksconcepts-6.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksconcepts-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

