<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>What's New in Device Management? - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devconfig-27900.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devconfig-23.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">What's New in Device Management?</a></p>
</div>
<p class="toc level2"><a href="devconfig-23.html">Where to Find Device Management Tasks</a></p>
<p class="toc level2"><a href="gdvku.html">Managing Devices in the Solaris OS</a></p>
<p class="toc level2"><a href="devconfig-6.html">Adding a Peripheral Device to a System</a></p>
<p class="toc level3"><a href="devconfig-6.html#devconfig-3">How to Add a Peripheral Device</a></p>
<p class="toc level3"><a href="devconfig-6.html#devconfig-18">How to Add a Device Driver</a></p>
<p class="toc level2 tocsp"><a href="devaccess-90138.html">Accessing Devices</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gdryj"></a><h3>What's New in Device Management?</h3>
<p>This section provides information about new device management features in the Solaris release.</p>
<ul><li><p><a href="#gdryc">x86: Device Detection Tool</a></p></li>
<li><p><a href="#gdryb">Faulty Device Retirement Feature</a></p></li>
<li><p><a href="#gdrya">Device Naming Enhancements</a></p></li>
<li><p><a href="#gbpoi">Support for PCI Express (PCIe)</a></p></li>
<li><p><a href="#gcajp">USB and 1394 (FireWire) Support Enhancements</a></p></li>
<li><p><a href="#gcajq">Improved Device In Use Error Checking</a></p></li></ul>
<p>For a complete listing of new Solaris features and a description of Solaris
releases, see <a href="http://docs.sun.com/doc/820-0724"><i>Solaris Express Developer Edition What&rsquo;s New</i></a>.</p>

<a name="gdryc"></a><h4>x86: Device Detection Tool</h4>
<p><b>Solaris Express Developer Edition 1/08</b>: You can use the device detection tool to identify whether your x86
hardware is supported in this Solaris release. For more information, go to the
following site:</p><p><a href="http://www.sun.com/bigadmin/hcl/hcts/device_detect.jsp">http://www.sun.com/bigadmin/hcl/hcts/device_detect.jsp</a></p>

<a name="gdryb"></a><h4>Faulty Device Retirement Feature</h4>
<p><b>Solaris Express Developer Edition 1/08</b>: This release introduces a new device retirement mechanism to isolate a device as
<b>faulty</b> by the fault management framework (FMA). This feature allows faulty devices to
be safely and automatically inactivated to avoid data loss, data corruption, or panics
and system down time. The retirement process is done safely, taking into account
the stability of the system after the device has been retired.</p><p>Critical devices are never retired. If you need to manually replace a retired
device, use the <tt>fmadm repair</tt> command after the device replacement so that system knows
that the device is replaced, in addition to the manual replacement steps.</p><p>The <tt>fmadm</tt> repair process is as follows:</p>
<ul><li><p>Identify the faulted device with the <tt>fmadm faulty</tt> <tt>-a</tt> command.</p><pre># fmadm faulty

   STATE RESOURCE / UUID

-------- ---------------------------------------------------------------------

faulty   &lt;<i>fmri</i>></pre></li>
<li><p>Clear the fault by using the <tt>fmadm repair</tt> command.</p><pre># fmadm repair &lt;<i>fmri</i>></pre></li>
<li><p>Run the <tt>fmadm faulty</tt> command again to be sure the fault is cleared.</p><pre># fmadm faulty -a
   STATE RESOURCE / UUID</pre></li></ul>
<p>For more information, see <a href="http://docs.sun.com/doc/819-2240/fmadm-1m?a=view"><tt>fmadm</tt>(1M)</a>.</p><p>A general message regarding device retirement is displayed on the console and written
to the <tt>/var/adm/messages</tt> file so that you aware of a retired device. For
example:</p><pre>Aug 9 18:14 starbug genunix: [ID 751201 kern.notice] NOTICE: One or more I/O devices have been retired</pre><p>You can use the <tt>prtconf</tt> command to identify specific retired devices. For example:</p><pre># prtconf
.
.
.
pci, instance #2
        scsi, instance #0
            disk (driver not attached)
            tape (driver not attached)
            sd, instance #3
            sd, instance #0 (retired)
        scsi, instance #1 (retired)
            disk (retired)
            tape (retired)
    pci, instance #3
        network, instance #2 (driver not attached)
        network, instance #3 (driver not attached)
    os-io (driver not attached)
    iscsi, instance #0
    pseudo, instance #0 
.
.
.</pre>

<a name="gdrya"></a><h4>Device Naming Enhancements</h4>
<p><b>Solaris Express 10/06</b>: The <tt>/dev</tt> name space supports multiple file system instances as needed. A
global instance of the <tt>/dev</tt> file system is created automatically when the system
is booted. Subsequent <tt>/dev</tt> instances are created and mounted when needed, such as
when devices are added to a non-global zone. When a non-global zone is
shutdown, the available <tt>/dev</tt> instance is unmounted and unavailable.<a name="indexterm-50"></a></p><p>In addition, device configuration is improved in the following ways:</p>
<ul><li><p><b>Reconfiguration boot is eliminated</b> &ndash; In previous Solaris releases, a reconfiguration boot was needed if you connected a device to a system that is powered off.</p><p>In this Solaris release, performing a reconfiguration boot is unnecessary when attaching devices to a system that is powered off. Newly attached devices are automatically recognized and the appropriate device links are created when the system is rebooted.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2254/dev-7fs?a=view"><tt>dev</tt>(7FS)</a>.</p></li>
<li><p><b>Zone device support is simplified</b> &ndash; As described above, device support for Solaris zones is enhanced by providing specific instances of the <tt>/dev</tt> directory for non-global zones. In addition, zones are no longer dependent upon the <tt>devfsadm</tt> daemon for reconfiguration of devices within a zone.</p></li>
<li><p><b>Pseudo device creation is improved</b> &ndash; In this Solaris release, the content of the <tt>/dev/pts</tt> directory is created on demand in the global <tt>/dev</tt> name space as well as a<tt>/dev</tt> instance when needed in a non-global zone. In addition, the <tt>pty</tt>s links are only visible in the global zone or the non-global zone from which they are allocated.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2243/grantpt-3c?a=view"><tt>grantpt</tt>(3C)</a>.</p></li></ul>
<p>For more information about device configuration, see <a href="gdvku.html">Managing Devices in the Solaris OS</a>.</p>

<a name="gbpoi"></a><h4>Support for PCI Express (PCIe)</h4>
<p><b>Solaris Express 4/06</b>: This Solaris release provides support for the PCI Express (PCIe) interconnect, which
is designed to connect peripheral devices to desktop, enterprise, mobile, communication, and embedded applications,
on both SPARC and x86 systems.<a name="indexterm-51"></a></p><p>In the previous  Solaris Express 1/06  release, PCIe devices were only
available on x86 systems.</p><p>The PCIe interconnect is an industry-standard, high-performance, serial I/O bus. For details on
PCIe technology, go to the following site:</p><p><a href="http://www.pcisig.com">http://www.pcisig.com</a></p><p>The PCIe software provides the following features in this Solaris release:</p>
<ul><li><p>Support for extended PCIe configuration space</p></li>
<li><p>Support for PCIe baseline error handling and MSI interrupts</p></li>
<li><p>Modified IEEE-1275 properties for PCIe devices</p></li>
<li><p>PCIe hotplug support (both native and ACPI-based) by enhancing the <tt>cfgadm_pci</tt> component of the <tt>cfgadm</tt> command</p></li>
<li><p>ATTN Button usage based PCIe peripheral autoconfiguration</p></li></ul>
<p>The administrative model for hotplugging PCIe peripherals is the same as for PCI
peripherals, which uses the <tt>cfgadm</tt> command.</p><p>Check your hardware platform guide to ensure that PCIe and PCIe hotplug support
is provided on your system. In addition, carefully review the instructions  for
physically inserting or removing adapters on your system and the semantics of device
auto-configuration, if applicable.</p><p>For information about using the <tt>cfgadm</tt> command with PCIe peripherals, see <a href="devconfig2-121.html">PCI or PCIe Hot-Plugging With the <tt>cfgadm</tt> Command (Task Map)</a>.</p>

<a name="gcajp"></a><h4>USB and 1394 (FireWire) Support Enhancements</h4>
<p><b>Solaris Express 6/06</b>: In this Solaris release, both non-removable USB storage devices and 1394 mass
storage devices are identified as hotpluggable devices at the driver level. This new
behavior means that these devices can be connected or disconnected without rebooting the
system and configured or unconfigured automatically without intervention. These changes are made at the
kernel level and do not impact the use of these devices. For example,
the responsibility of mounting and unmounting these devices is controlled by the removable
media management services.<a name="indexterm-52"></a></p><p>In addition, non-removable USB devices and 1394 mass storage devices can be accessed
and labeled by using the <tt>format</tt> utility.  However, you can override the
new hotpluggable behavior of these devices by setting the <tt>remvalue</tt> to true in
the <tt>/kernel/drv/scsa2usb.conf</tt> file. Setting this parameter to true means that the device
is treated as a removable media device at the driver level, if that
behavior is preferred.</p><p>For more information on using these devices, see <a href="http://docs.sun.com/doc/819-2254/scsa1394-7d?a=view"><tt>scsa1394</tt>(7D)</a> and <a href="devusbtasks-34.html">Using USB Mass Storage Devices (Task Map)</a>.</p>

<a name="gcajq"></a><h4>Improved Device In Use Error Checking</h4>
<p><b>Solaris Express 1/06</b>: This feature was undocumented previously.</p><p>The following utilities have been enhanced to detect when a specified device is
in use:</p>
<ul><li><p><tt>dumpadm</tt></p></li>
<li><p><tt>format</tt></p></li>
<li><p><tt>mkfs</tt> and <tt>newfs</tt></p></li>
<li><p><tt>swap</tt></p></li></ul>
<p>These enhancements mean that the above utilities might detect some of the following
usage scenarios:</p>
<ul><li><p>Device is part of a ZFS storage pool</p></li>
<li><p>Device is a dump or swap device</p></li>
<li><p>Mounted file system or an entry for the device exists in the <tt>/etc/vfstab</tt> file</p></li>
<li><p>Device is part of live upgrade configuration</p></li>
<li><p>Device is part of a Solaris Volume Manager configuration or Veritas Volume Manager configuration</p></li></ul>
<p>For example, if you attempt to use the <tt>format</tt> utility to access an
active device, you will see a message similar to the following:</p><pre># <tt><b>format</b></tt>
.
.
.
Specify disk (enter its number): 1
selecting c0t1d0
[disk formatted]
Warning: Current Disk has mounted partitions.
/dev/dsk/c0t1d0s0 is currently mounted on /. Please see umount(1M).
/dev/dsk/c0t1d0s1 is currently used by swap. Please see swap(1M).</pre><p>However, these utilities do not detect all scenarios in the same way. For
example, you can use the <tt>newfs</tt> command to create a new file system
on a device in a live upgrade configuration. You cannot use the <tt>newfs</tt>
command to create a new file system on a device that is part
of a live upgrade configuration if it also has a mounted file system.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devconfig-27900.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devconfig-23.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

