<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>What's New in Removable Media? - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="medintro-55492.html">Previous</a>
             </td>
             <td align="right">
                 <a href="medintro-4.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">What's New in Removable Media?</a></p>
</div>
<p class="toc level2"><a href="medintro-4.html">Where to Find Managing Removable Media Tasks</a></p>
<p class="toc level2"><a href="medintro-61235.html">Removable Media Features and Benefits</a></p>
<p class="toc level2"><a href="medintro-79377.html">Comparison of Manual and Automatic Mounting</a></p>
<p class="toc level2"><a href="medintro-10775.html">Overview of Accessing Removable Media</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gbbfr"></a><h3>What's New in Removable Media?</h3>
<p>The following section describes new removable media features in the Solaris release.</p>
<ul><li><p><a href="#gbppr">Changes and Improvements to Removable Media Management</a></p></li>
<li><p><a href="#gbppq"><tt>vold</tt> is Managed by the Service Management Facility (SMF)</a></p></li>
<li><p><a href="#gbbfu">Improvements to Volume Management (<tt>vold</tt>)</a></p></li></ul>
<p>For a complete listing of new Solaris features and a description of Solaris
releases, see <a href="http://docs.sun.com/doc/820-0724"><i>Solaris Express Developer Edition What&rsquo;s New</i></a>.</p>

<a name="gbppr"></a><h4>Changes and Improvements to Removable Media Management</h4>
<p><b>Solaris Express 12/06</b>: Previous features for managing removable media have been removed and replaced with
services and methods that provide better removable media management.<a name="indexterm-1"></a><a name="indexterm-2"></a><a name="indexterm-3"></a><a name="indexterm-4"></a><a name="indexterm-5"></a></p><p>For information about using <tt>vold</tt> in previous Solaris 10 releases, see <i>System Administration Guide: Devices and File Systems</i>.</p><p>The following new features are available:</p>
<ul><li><p>New removable media services are enabled and disabled by using SMF.</p><pre>online         12:17:54 svc:/system/hal:default
online         12:17:56 svc:/system/filesystem/rmvolmgr:default
online         12:17:26 svc:/system/dbus:default</pre></li>
<li><p>Removable media is now mounted automatically in the <tt>/media</tt> directory. However, symbolic links to <tt>/media</tt> are provided from previous media mount points, <tt>/cdrom</tt> and <tt>/rmdisk</tt>, for compatibility purposes.<a name="indexterm-6"></a></p><p>For example, a compact flash memory card (<tt>/dev/dsk/c4d0p0:1</tt>) is mounted as follows:</p><pre>$ ls /media/NIKON</pre><p>For example, a USB memory stick (<tt>/dev/dsk/c3t0d0s0</tt>) is mounted as follows:</p><pre>$ ls /media/U3</pre><p>For example, a diskette (<tt>/dev/diskette0</tt>) is mounted as follows:</p><pre>$ ls /media/floppy</pre></li>
<li><p>The default removable media volume manager, <tt>rmvolmgr</tt>, is responsible for following activities:</p>
<ul><li><p>Mounting and unmounting volumes.</p></li>
<li><p>The root instance of <tt>rmvolmgr</tt> starts at system boot. However, you can configure your session's configuration files to start an instance of <tt>rmvolmgr</tt> when you log in. When run within a user session, <tt>rmvolmgr</tt> only mounts devices owned by the current user or session and does not conflict with the root instance.<a name="indexterm-7"></a></p></li>
<li><p>When <tt>rmvolmgr</tt> exits, it unmounts all media that it mounted.</p></li>
<li><p>For compatibility purposes, <tt>rmvolmgr</tt> creates symbolic links under the <tt>/cdrom</tt>, <tt>/floppy</tt>, <tt>/rmdisk</tt> directories to the actual mount points under <tt>/media</tt>.</p></li>
<li><p>A special <tt>rmvolmgr</tt> run mode is available for CDE compatibility.</p></li></ul>
</li>
<li><p>The hardware abstraction layer (HAL) daemon, <tt>hald</tt>, provides a view of the device attached to a system. This view is updated automatically as hardware configuration changes, by hotplugging or other mechanisms.<a name="indexterm-8"></a></p><p>HAL represents a piece of hardware as a device object. A device object is identified by a unique device identifier (UDI) and carries a set of key-value pairs referred to as device properties. Some properties are derived from the actual hardware, some are merged from device information files (<tt>.fdi</tt> files) and some are related to the actual device configuration.</p></li></ul>
<p>The following features are removed:</p>
<ul><li><p>The <tt>vold</tt> daemon, the <tt>volfs</tt> file system, and the <tt>volfs</tt> service have been removed.<a name="indexterm-9"></a><a name="indexterm-10"></a></p><pre>svc:/system/filesystem/volfs</pre></li>
<li><p>Logical device names for removable media under the <tt>/vol</tt> directory, such as <tt>/vol/dev/rdsk/...</tt> or <tt>/vol/dev/aliases/...</tt>, are no longer provided.</p><p>To access removable media by its logical device name, the <tt>/dev</tt> device should be used. For example:</p><pre>/dev/rdsk/c0t6d0s2</pre></li>
<li><p>Some <tt>vold</tt> device nicknames are no longer available. The following <tt>eject</tt> <tt>-l</tt> output identified the available device nicknames for each device and in this example, the mounted media pathname (<tt>/media/SOL_11_X86_4</tt>):</p><pre>$ eject -l
/dev/dsk/c2t0d0s2    cdrom,cdrom0,cd,cd0,sr,sr0,SOL_11_X86_4,/media/SOL_11_X86_4
/dev/diskette        floppy,floppy0,fd,fd0,diskette,diskette0,rdiskette,rdiskette0</pre><p>The comma-separated list shows the nicknames that can be used to eject each device.</p></li>
<li><p>Customizations that were made in <tt>vold.conf</tt> and <tt>rmmount.conf</tt> are no longer available because these configuration files no longer exist. For information about managing media customizations, see <a href="#gepzn">Customizing Removable Media Management</a>.</p></li>
<li><p>Commands that begin with <tt>vol</tt>* commands except for <tt>volcheck</tt> and <tt>volrmmount</tt>.</p></li></ul>


<a name="gepzr"></a><h5>Backward Compatibility</h5>
<p>The following features provide backward compatibility with previous Solaris removable media features:<a name="indexterm-11"></a></p>
<ul><li><p>Removable media mount points have moved to the <tt>/media</tt> directory, which is used to mount removable media, such as CD-ROMs and USB devices. Symbolic links to <tt>/media</tt> from previous media mounts points, such as <tt>/cdrom</tt> and <tt>/rmdisk</tt>, are provided for compatibility purposes.</p></li>
<li><p>The <tt>rmformat</tt> command is still available. The output of this command is identical to what it looks in previous Solaris releases with <tt>vold</tt> disabled.</p><p>For example:</p><pre># rmformat
Looking for devices...
     1. Logical Node: /dev/rdsk/c0t6d0s2
        Physical Node: /pci@1f,4000/scsi@3/sd@6,0
        Connected Device: TOSHIBA  DVD-ROM SD-M1401 1009
        Device Type: DVD Reader
        Bus: SCSI
        Size: 2.9 GB
        Label: &lt;None>
        Access permissions: &lt;Unknown></pre></li>
<li><p>The <tt>eject</tt> command is available but has been enhanced. For more information, see <a href="#gepzj">Ejecting Removable Media</a>.</p></li></ul>


<a name="gepzk"></a><h5>Mounting and Unmounting Removable Media</h5>
<p>Most commands that begin with <tt>vol</tt>* are removed in this release. A modified
version of <tt>rmmount</tt> and a new <tt>rmumount</tt> command are available to mount
and unmount removable media.</p><p>These commands can be used to mount by device name, label, or
mount point. For example, to mount an iPod:</p><pre>% <tt><b>rmmount ipod</b></tt></pre><p>For example, to unmount the file systems on a DVD:</p><pre># <tt><b>rmumount cdrom</b></tt>
cdrom /dev/dsk/c0t6d0s5 unmounted
cdrom /dev/dsk/c0t6d0s0 unmounted</pre><p>For more information, see <a href="http://docs.sun.com/doc/819-2240/rmmount-1m?a=view"><tt>rmmount</tt>(1M)</a>.</p>

<a name="gepzw"></a><h5>Mounting and Unmounting Diskettes</h5>
<p>You can use the existing <tt>volcheck</tt> command to manually poll diskettes and mount
them if a new diskette is detected.<a name="indexterm-12"></a><a name="indexterm-13"></a><a name="indexterm-14"></a></p><p>If you manually reformat diskette after it is connected to the system, HAL
is not automatically notified. Continue to use the <tt>volcheck</tt> command to notify the
system and attempt to automount a new file system on a diskette.</p>

<a name="gepzj"></a><h5>Ejecting Removable Media</h5>
<p>As in previous Solaris releases, use the <tt>eject</tt> command to unmount and eject
removable media. However, the following <tt>eject</tt> options are available:</p><dl><dt><tt>-f</tt></dt>
<dd><p>Forces the device to eject even if the device is busy.</p></dd>
<dt><tt>-l</tt></dt>
<dd><p>Displays paths and nicknames of devices that can be ejected.</p></dd>
<dt><tt>-t</tt></dt>
<dd><p>A CD-ROM tray close command is provided to the device. Not all devices support this option.</p></dd>
</dl>
<p>For example, to eject by its volume label:</p><pre>% <tt><b>eject mypictures</b></tt></pre><p>As in previous Solaris releases, you might need to issue the <tt>volcheck</tt>
command before using the <tt>eject</tt> command to eject a diskette.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2239/eject-1?a=view"><tt>eject</tt>(1)</a>.</p>

<a name="gepzn"></a><h5>Customizing Removable Media Management</h5>
<p>For most customizations that were available in the <tt>vold.conf</tt> and <tt>rmmount.conf</tt> files,
you will need to either use Desktop Volume manager preferences or modify the
<tt>.fdi</tt> files.</p>
<ul><li><p>For <tt>rmmount.conf</tt> actions, you will need to use either Desktop Volume Manager actions, gconf, or HAL callouts.</p></li>
<li><p>Previously, <tt>rmmount.conf</tt> <tt>actions</tt> could be run as root on behalf of ordinary users. Now, this is done by installing callout executables in the <tt>/usr/lib/hal</tt> directory.</p></li></ul>


<a name="gepzs"></a><h5>Disabling Removable Media Features</h5>
<p>You can disable some or all removable media features in this release:</p>
<ul><li><p>To prevent volumes from mounting outside of user sessions, disable the <tt>rmvolmgr</tt> service. For example:<a name="indexterm-15"></a><a name="indexterm-16"></a><a name="indexterm-17"></a></p><pre># svcadm disable rmvolmgr</pre></li>
<li><p>To prevent any volume management, disable the <tt>dbus</tt>, <tt>hal</tt>, and <tt>rmvolmgr</tt> services.</p><pre># svcadm disable rmvolmgr
# svcadm disable dbus
# svcadm disable hal</pre></li></ul>


<a name="gbppq"></a><h4><tt>vold</tt> is Managed by the Service Management Facility (SMF)</h4>

<hr><p><b>Note - </b>Starting in the Solaris Express 12/06 release, <tt>vold</tt> is removed. For information about managing
removable media with <tt>vold</tt> in Solaris 10 releases, see <i>System Administration Guide: Devices and File Systems</i>.</p>
<hr>
<p><b>Solaris Express 11/05:</b> The volume management daemon, <tt>vold</tt>, is now managed by the Service
Management Facility (SMF). This  means you can use the <tt>svcadm disable</tt> command to
disable the following new volfs service, if appropriate:<a name="indexterm-18"></a><a name="indexterm-19"></a><a name="indexterm-20"></a></p><pre># <tt><b>svcadm disable volfs</b></tt></pre><p>You can identify the status of the <tt>volfs</tt> service by using this command:</p><pre>$ <tt><b>svcs volfs</b></tt>
STATE          STIME    FMRI
online         Sep_29   svc:/system/filesystem/volfs:default</pre><p>For more information, see <a href="http://docs.sun.com/doc/819-2252/smf-5?a=view"><tt>smf</tt>(5)</a>.</p><p>You can use the <tt>svccfg</tt> command to display and to set additional <tt>vold</tt>
properties. For example, you could temporarily enable <tt>vold</tt> logging to help troubleshooting a problem.
For example:</p><pre># <tt><b>svccfg</b></tt>
svc:> <tt><b>select system/filesystem/volfs</b></tt>
svc:/system/filesystem/volfs> <tt><b>setprop vold/log_debuglevel=3</b></tt>
svc:/system/filesystem/volfs> <tt><b>exit</b></tt>
# <tt><b>svcadm disable volfs</b></tt>
# <tt><b>svcadm enable volfs</b></tt></pre><p>You can also use the <tt>svccfg</tt> command to display a listing of settable
<tt>vold</tt> properties.</p><pre># <tt><b>svccfg</b></tt>
svc:> <tt><b>select volfs</b></tt>
svc:/system/filesystem/volfs> <tt><b>listprop vold/*</b></tt>
vold/config_file            astring  
vold/log_debuglevel         count    3
vold/log_file               astring  
vold/log_nfs_trace          boolean  false
vold/log_verbose            boolean  false
vold/root_dir               astring  
vold/never_writeback_label  boolean  false
svc:/system/filesystem/volfs> <tt><b>exit</b></tt></pre>

<a name="gbbfu"></a><h4>Improvements to Volume Management (<tt>vold</tt>)</h4>

<hr><p><b>Note - </b>Starting in the Solaris Express 12/06 release, <tt>vold</tt> is removed. For information
about managing removable media with <tt>vold</tt> in Solaris 10 releases, see <i>System Administration Guide: Devices and File Systems</i>.</p>
<hr>
<p><b>Solaris Express 11/05:</b> Removable media management is improved. Previously, <tt>vold</tt> did not create device links for
removable devices that contain no media. Now, device links are properly created for
devices that contain no media, similar to the following:</p><pre>lrwxrwxrwx   1 root     root     28 Jun 13 13:09 /vol/dev/aliases/cdrom0 ->
 /vol/dev/rdsk/c2t2d0/nomedia</pre><p>Now, you can use the <tt>cdrw</tt> and <tt>rmformat</tt> commands to list devices that
have no media when <tt>vold</tt> is running.</p><p>You can revert back to the previous <tt>vold</tt> behavior by changing the following
<tt>support nomedia</tt> entry in the <tt>/etc/vold.conf</tt> file as follows:</p><pre>support media</pre><p>Then, restart <tt>vold</tt>. </p><p>In addition, <tt>vold</tt> is now hot-plug aware. This improvement means that if you
insert removable media, the media is automatically detected and mounted by <tt>vold</tt>. 
There should be no need to restart <tt>vold</tt> manually to recognize and
mount a file system from any removable media device.</p><p>If you are using a legacy or non-USB diskette device, then you
might need to issue the <tt>volcheck</tt> command before <tt>vold</tt> can recognize the media.</p><p>If the media is detected, but for some reason, is unmounted, then
you'll need to run the following commands:</p><pre># volrmmount -i rmdisk0</pre><p>Before you hot-remove a removable media device, eject the media first. For example:</p><pre># eject rmdisk0</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="medintro-55492.html">Previous</a>
             </td>
             <td align="right">
                 <a href="medintro-4.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

