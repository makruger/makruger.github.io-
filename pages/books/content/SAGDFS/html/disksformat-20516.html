<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title><tt>format.dat</tt> File - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksformat-34753.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksformat-12286.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level2"><a href="disksformat-1.html">Recommendations and Requirements for Using the <tt>format</tt> Utility</a></p>
<p class="toc level2"><a href="disksformat-34753.html"><tt>format</tt> Menu and Command Descriptions</a></p>
<div class="onpage">
<p class="toc level2"><a href=""><tt>format.dat</tt> File</a></p>
</div>
<p class="toc level2"><a href="disksformat-12286.html">Rules for Input to <tt>format</tt> Commands</a></p>
<p class="toc level2"><a href="disksformat-31805.html">Getting Help on the <tt>format</tt> Utility</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="disksformat-20516"></a><h3><tt>format.dat</tt> File</h3>
<p>The <tt>format.dat</tt> file that is shipped with the Solaris OS supports many standard
disks. If your disk drive is not listed in the <tt>format.dat</tt> file,
you can do the following:</p>
<ul><li><p>Add an entry to the <tt>format.dat</tt> file for the disk.</p></li>
<li><p>Add entries with the <tt>format</tt> utility by selecting the <tt>type</tt> command and choosing the <tt>other</tt> option.</p></li></ul>
<p>Adding an entry to the <tt>format.dat</tt> file can save time if the disk
drive will be used throughout your site. To use the <tt>format.dat</tt> file
on other systems, copy the file to each system that will use the
specific disk drive that you added to the <tt>format.dat</tt> file.</p><p>You might need to modify the <tt>/etc/format.dat</tt> file for your system if you
have one of the following: </p>
<ul><li><p>A disk that is not supported by the Solaris OS</p></li>
<li><p>A disk with a partition table that is different from the Solaris OS's default configuration</p></li></ul>

<hr><p><b>Note - </b>Do not alter default entries in the <tt>/etc/format.dat</tt> file. If you want to
alter the default entries, copy the entry, give the entry a different name,
and make the appropriate changes to avoid confusion.</p>
<hr>
<p>The <tt>/etc/format.dat</tt> is not applicable for disks with EFI labels.</p>

<a name="disksformat-3"></a><h4>Contents of the <tt>format.dat</tt> File</h4>
<p>The <tt>format.dat</tt> contains disk drive information that is used by the <tt>format</tt> utility.
Three items are defined in the <tt>format.dat</tt> file:</p>
<ul><li><p>Search paths</p></li>
<li><p>Disk types</p></li>
<li><p>Slice tables</p></li></ul>


<a name="disksformat-4"></a><h4>Syntax of the <tt>format.dat</tt> File</h4>
<p><a name="disksformat-ix2585"></a>The following syntax rules apply to the <tt>/etc/format.dat</tt> file: </p>
<ul><li><p>The pound sign (<tt>#</tt>) is the comment character. Any text on a line after a pound sign is not interpreted by the <tt>format</tt> utility. </p></li>
<li><p>Each definition in the <tt>format.dat</tt> file appears on a single logical line. If the definition is longer than one line long, all lines but the last line of the definition must end with a backslash (<tt>\</tt>). </p></li>
<li><p>A definition consists of a series of assignments that have an identifier on the left side and one or more values on the right side. The assignment operator is the equal sign (<tt>=</tt>). The assignments within a definition must be separated by a colon (<tt>:</tt>). </p></li>
<li><p>White space is ignored by the <tt>format</tt> utility. If you want an assigned value to contain white space, enclose the entire value in double quotation marks (<tt>"</tt>). This syntax causes the white space within the quotes to be preserved as part of the assignment value.</p></li>
<li><p>Some assignments can have multiple values on the right side. Separate values by a comma. </p></li></ul>


<a name="disksformat-5"></a><h4>Keywords in the <tt>format.dat</tt> File</h4>
<p><a name="disksformat-ix2586"></a>The <tt>format.dat</tt> file contains disk definitions that are read by the <tt>format</tt> utility when
it is started. Each definition starts with one of the following keywords:
<tt>disk_type</tt> or <tt>partition</tt>. These keywords are described in the following table.</p><a name="disksformat-26632"></a><h6>Table&nbsp;16-6 Keyword Descriptions for the <tt>format.dat</tt> File</h6><table><col width="123.45*"><col width="332.55*"><tr><th align="left" valign="top" scope="column"><p>Keyword</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>disk_type</tt></p></td>
<td align="left" valign="top" scope="row"><p>Defines the controller
and disk model. Each <tt>disk_type</tt> definition contains information that concerns the physical geometry
of the disk. The default data file contains definitions for the controllers and
disks that the Solaris OS supports.</p><p>You need to add a new <tt>disk_type</tt> definition
only if you have an unsupported disk. You can add as many <tt>disk_type</tt>
definitions to the data file as you want.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>partition</tt></p></td>
<td align="left" valign="top" scope="row"><p>Defines a partition table for a
specific disk type. The partition table contains the partition information, plus a name
that lets you refer to it in the <tt>format</tt> utility. The default <tt>format.dat</tt>
file contains default partition definitions for several kinds of disk drives. Add a partition
definition if you recreated partitions on any of the disks on your system.
Add as many partition definitions to the data file as you need.
</p></td>
</tr>
</table>

<a name="disksformat-6"></a><h5>Disk Type (<tt>format.dat</tt>)</h5>
<p>The <tt>disk_type</tt> keyword in the <tt>format.dat</tt> file defines the controller and disk model.
Each <tt>disk_type</tt> definition contains information about the physical geometry of the disk. The
default <tt>format.dat</tt> file contains definitions for the controllers and disks that the Solaris
OS supports. You need to add a new <tt>disk_type</tt> only if you have
an unsupported disk. You can add as many <tt>disk_type</tt> definitions to the data
file as you want.</p><p>The keyword itself is assigned the name of the disk type. This
name appears in the disk's label, and is used to identify the disk
type whenever the <tt>format</tt> utility is run.  Enclose the name in double quotation
marks to preserve any white space in the name. The following table describes
the identifiers that must also be assigned values in all <tt>disk_type</tt> definitions.</p><a name="disksformat-88559"></a><h6>Table&nbsp;16-7 Required <tt>disk_type</tt> Identifiers (<tt>format.dat</tt>)</h6><table><col width="95*"><col width="361*"><tr><th align="left" valign="top" scope="column"><p>Identifier</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ctlr</tt></p></td>
<td align="left" valign="top" scope="row"><p>Identifies
the controller type for the disk type. Currently, the supported values are SCSI
and ATA. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ncyl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the number of data cylinders in the disk type.
This determines how many logical disk cylinders the system will be allowed to
access. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>acyl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the number of alternate cylinders in the disk type. These cylinders
are used by the <tt>format</tt> utility to store information such as the defect
list for the drive. You should always reserve at least two cylinders for
alternates.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pcyl</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the number of physical cylinders in the disk type. This number is
used to calculate the boundaries of the disk media. This number is
usually equal to <tt>ncyl</tt> plus <tt>acyl</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>nhead</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the number of heads in the disk
type. This number is used to calculate the boundaries of the disk media.
</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>nsect</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the number of data sectors per track in the disk type.
This number is used to calculate the boundaries of the disk media. Note
that this number includes only the data sectors. Any spares are not reflected
in the number of data sections per track. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>rpm</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies the rotations per minute
of the disk type. This information is put in the label and later
used by the file system to calculate the optimal placement of file data.
</p></td>
</tr>
</table><p>Other identifiers might be necessary, depending on the controller. The following table describes
the identifiers that are required for SCSI controllers. </p><a name="disksformat-14341"></a><h6>Table&nbsp;16-8 Required <tt>disk_type</tt> Identifiers for SCSI Controllers <tt>format.dat</tt></h6><table><col width="70*"><col width="386*"><tr><th align="left" valign="top" scope="column"><p>Identifier</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>fmt_time</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies a number that
indicates how long it takes to format a given drive. See the controller
manual for more information. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>cache</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies a number that controls the operation of
the on-board cache while the <tt>format</tt> utility is operating. See the controller manual for
more information. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>trks_zone</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies a number that identifies how many tracks that exist
per defect zone, to be used in alternate sector mapping. See the controller
manual for more information. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>asect</tt></p></td>
<td align="left" valign="top" scope="row"><p>Specifies a number that identifies how many sectors are
available for alternate mapping within a given defect zone. See the controller manual
for more information. </p></td>
</tr>
</table><a name="fahth"></a>Example&nbsp;16-1 Required <tt>disk_type</tt> Identifiers for SCSI Controllers (<tt>format.dat</tt>)<p>The following are examples of <tt>disk_type</tt> definitions:</p><pre>disk_type = "SUN1.3G" \
        : ctlr = SCSI : fmt_time = 4 \
        : trks_zone = 17 : asect = 6 : atrks = 17 \
        : ncyl = 1965 : acyl = 2 : pcyl = 3500 : nhead = 17 : nsect = 80 \
        : rpm = 5400 : bpt = 44823

disk_type = "SUN2.1G" \
        : ctlr = SCSI : fmt_time = 4 \
        : ncyl = 2733 : acyl = 2 : pcyl = 3500 : nhead = 19 : nsect = 80 \
        : rpm = 5400 : bpt = 44823

disk_type = "SUN2.9G" \
        : ctlr = SCSI : fmt_time = 4 \
        : ncyl = 2734 : acyl = 2 : pcyl = 3500 : nhead = 21 : nsect = 99 \
        : rpm = 5400</pre>

<a name="disksformat-7"></a><h4>Partition Tables (<tt>format.dat</tt>)</h4>
<p>A partition table in the <tt>format.dat</tt> file defines a slice table for a
specific disk type.</p><p>The <tt>partition</tt> keyword in the <tt>format.dat</tt> file is assigned the name of the
partition table. Enclose the name in double quotation marks to preserve any white
space in the name. The following table describes the identifiers that must be
assigned values in all partition tables.</p><a name="disksformat-11582"></a><h6>Table&nbsp;16-9 Required Identifiers for Partition Tables (<tt>format.dat</tt>)</h6><table><col width="70*"><col width="386*"><tr><th align="left" valign="top" scope="column"><p>Identifier</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>disk</tt></p></td>
<td align="left" valign="top" scope="row"><p>The name of the <tt>disk_type</tt> that this
partition table is defined for. This name must appear exactly as it does
in the <tt>disk_type</tt> definition.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ctlr</tt></p></td>
<td align="left" valign="top" scope="row"><p>The disk controller type that this partition table can
be attached to. Currently, the supported values are ATA for ATA controllers and
SCSI for SCSI controllers. The controller type that is specified here must also
be defined for the <tt>disk_type</tt> that you specified in the <tt>disk_type</tt> definition. </p></td>
</tr>
</table><p><a name="disksformat-ix2587"></a>The other identifiers in a slice definition describe the actual partition information. The
identifiers are the numbers 0 through 7. These identifiers are optional. Any partition that
is not explicitly assigned is set to 0 length. The value of
each of these identifiers is a pair of numbers separated by a comma.
The first number is the starting cylinder for the partition. The second is
the number of sectors in the slice.</p><a name="fahtm"></a>Example&nbsp;16-2 Required Identifiers for Partition Tables (<tt>format.dat</tt>)<p>The following are some examples of slice definitions:</p><pre>partition = "SUN1.3G" \
        : disk = "SUN1.3G" : ctlr = SCSI \
        : 0 = 0, 34000 : 1 = 25, 133280 : 2 = 0, 2672400 : 6 = 123, 2505120

partition = "SUN2.1G" \
        : disk = "SUN2.1G" : ctlr = SCSI \
        : 0 = 0, 62320 : 1 = 41, 197600 : 2 = 0, 4154160 : 6 = 171, 3894240

partition = "SUN2.9G" \
        : disk = "SUN2.9G" : ctlr = SCSI \
        : 0 = 0, 195426 : 1 = 94, 390852 : 2 = 0, 5683986 : 6 = 282, 5097708</pre>

<a name="disksformat-8"></a><h4>Specifying an Alternate Data File for the <tt>format</tt> Utility</h4>
<p>The <tt>format</tt> utility determines the location of an alternate file by the following
methods in this order:</p>
<ol><li><p>If a file name is given with the <tt>format</tt> <tt>-x</tt> option, that file is always used as the data file.</p></li>
<li><p>If the <tt>-x</tt> option is not specified, then the <tt>format</tt> utility searches the current directory for a file named <tt>format.dat</tt>. If the file exists, it is used as the data file.</p></li>
<li><p>If neither of these methods yields a data file, the <tt>format</tt> utility uses the <tt>/etc/format.dat</tt> file as the data file. This file is shipped with the Solaris OS and should always be present.</p></li></ol>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksformat-34753.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksformat-12286.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

