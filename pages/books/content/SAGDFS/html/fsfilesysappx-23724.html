<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Structure of Cylinder Groups for UFS File Systems - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsfilesysappx-94408.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsfilesysappx-20581.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Structure of Cylinder Groups for UFS File Systems</a></p>
</div>
<p class="toc level2"><a href="fsfilesysappx-20581.html">Customizing UFS File System Parameters</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="fsfilesysappx-23724"></a><h3>Structure of Cylinder Groups for UFS File Systems</h3>
<a name="fsfilesysappx-ix2979"></a><a name="fsfilesysappx-ix2980"></a><a name="fsfilesysappx-ix2981"></a><p>When you create a UFS file system, the disk slice is divided
into cylinder groups. A <b>cylinder group</b> is comprised of one or more consecutive disk cylinders.
Cylinder groups are then further divided into addressable blocks to control and organize
the structure of the files within the cylinder group. Each type of block
has a specific function in the file system. A UFS file system has
these four types of blocks.</p><table><col width="36.36*"><col width="63.64*"><tr><th align="left" valign="top" scope="column"><p>Block Type </p></th>
<th align="left" valign="top" scope="column"><p>Type of Information Stored</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Boot block</p></td>
<td align="left" valign="top" scope="row"><p>Information used
when the system is booted</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Superblock</p></td>
<td align="left" valign="top" scope="row"><p>Detailed information about the file system</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Inode</p></td>
<td align="left" valign="top" scope="row"><p>All information about
a file</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Storage or data block</p></td>
<td align="left" valign="top" scope="row"><p>Data for each file</p></td>
</tr>
</table><p>The following sections provide additional information about the organization and function of these
blocks.</p>

<a name="fsfilesysappx-2"></a><h4>Boot Block</h4>
<a name="fsfilesysappx-ix2982"></a><a name="fsfilesysappx-ix2983"></a><p>The <b>boot block</b> stores objects that are used in booting the system. If a
file system is not to be used for booting, the boot block is
left blank. The boot block appears only in the first cylinder group (cylinder
group 0) and is the first 8 Kbytes in a slice.</p>

<a name="fsfilesysappx-3"></a><h4>Superblock</h4>
<a name="fsfilesysappx-ix2984"></a><p>The <b>superblock</b> stores much of the information about the file system, which includes
the following:</p>
<ul><li><p>Size and status of the file system</p></li>
<li><p>Label, which includes the file system name and volume name</p></li>
<li><p>Size of the file system logical block</p></li>
<li><p>Date and time of the last update </p></li>
<li><p>Cylinder group size</p></li>
<li><p>Number of data blocks in a cylinder group</p></li>
<li><p>Summary data block</p></li>
<li><p>File system state</p></li>
<li><p>Path name of the last mount point</p></li></ul>
<p>Because the superblock contains critical data, multiple superblocks are made when the file
system is created.</p><p>A summary information block is kept within the superblock. The summary information block
is not replicated, but is grouped with the primary superblock, usually in cylinder
group 0. The summary block records changes that take place as the file
system is used. In addition, the summary block lists the number of inodes,
directories, fragments, and storage blocks within the file system.</p>

<a name="fsfilesysappx-4"></a><h4>Inodes</h4>
<a name="fsfilesysappx-ix2985"></a><p>An <b>inode</b> contains all the information about a file except its name, which
is kept in a directory. An inode is 128 bytes. The inode information
is kept in the cylinder information block, and contains the following: </p>
<ul><li><p>The type of the file:</p>
<ul><li><p>Regular</p></li>
<li><p>Directory</p></li>
<li><p>Block special</p></li>
<li><p>Character special</p></li>
<li><p>FIFO, also known as named pipe</p></li>
<li><p>Symbolic link</p></li>
<li><p>Socket</p></li>
<li><p>Other inodes &ndash; Attribute directory and shadow (used for ACLs)</p></li></ul>
</li>
<li><p>The mode of the file (the set of read-write-execute permissions)</p></li>
<li><p>The number of hard links to the file</p></li>
<li><p>The user ID of the owner of the file</p></li>
<li><p>The group ID to which the file belongs</p></li>
<li><p>The number of bytes in the file</p></li>
<li><p>An array of 15 disk-block addresses</p></li>
<li><p>The date and time the file was last accessed</p></li>
<li><p>The date and time the file was last modified</p></li>
<li><p>The date and time the inode was changed</p></li></ul>
<p>The array of 15 disk-block addresses (0 to 14) points to the
data blocks that store the contents of the file. The first 12 are
direct addresses. That is, they point directly to the first 12 logical storage
blocks of the file contents. If the file is larger than 12 logical
blocks, the 13th address points to an indirect block, which contains direct-block addresses
instead of file contents. The 14th address points to a double indirect block,
which contains addresses of indirect blocks. The 15th address is for triple indirect
addresses. The following figure shows this chaining of address blocks starting from the inode.</p><a name="fsfilesysappx-fig-5"></a><h6>Figure&nbsp;23-1 <a name="fsfilesysappx-44569"></a>Address Chain for a UFS File System</h6><img src="figures/fs_filesysappx.fig3184.gif" alt="Graphic of relationship between the address array of a UFS inode and the indirect and double indirect pointers to a file's storage blocks."></img>

<a name="fsfilesysappx-6"></a><h4>Data Blocks</h4>
<a name="fsfilesysappx-ix2986"></a><a name="fsfilesysappx-ix2987"></a><p><b>Data blocks</b>, also called <b>storage blocks</b>, contain the rest of the space that is allocated
to the file system. The size of these data blocks is determined when
a file system is created. By default, data blocks are allocated in two
sizes: an 8-Kbyte logical block size, and a 1-Kbyte fragment size.</p><p>For a regular file, the data blocks contain the contents of the
file. For a directory, the data blocks contain entries that give the inode
number and the file name of the files in the directory.</p>

<a name="fsfilesysappx-7"></a><h4>Free Blocks</h4>
<a name="fsfilesysappx-ix2988"></a><a name="fsfilesysappx-ix2989"></a><p>Blocks that are not currently being used as inodes, as indirect address blocks,
or as storage blocks are marked as free in the cylinder group
map. This map also keeps track of fragments to prevent fragmentation from degrading disk
performance.</p><p>To give you an idea of the structure of a typical UFS
file system, the following figure shows a series of cylinder groups in a
generic UFS file system.</p><a name="fsfilesysappx-fig-8"></a><h6>Figure&nbsp;23-2 <a name="fsfilesysappx-34155"></a>A Typical UFS File System</h6><img src="figures/fs_filesysappx.fig3185.gif" alt="Graphic of UFS cylinder groups with boot blocks (8 Kbytes in cylinder group 0 only), superblock, cylinder group map, inodes, and storage blocks."></img>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsfilesysappx-94408.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsfilesysappx-20581.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

