<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Using the uDAPL Application Interface With InfiniBand Devices - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyaqo.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksconcepts-29477.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level2"><a href="eyant.html">Overview of InfiniBand Devices</a></p>
<p class="toc level2"><a href="eyarx.html">Dynamically Reconfiguring IB Devices (Task Map)</a></p>
<p class="toc level2"><a href="eyaqo.html">Dynamically Reconfiguring IB Devices (<tt>cfgadm</tt>)</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqp">How to Display IB Device Information</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqq">How to Unconfigure an IOC Device</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqr">How to Configure an IOC Device</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqs">How to Unconfigure an IB Port, HCA_SVC, or a VPPA Device</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqt">How to Configure a IB Port, HCA_SVC, or a VPPA Device</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqu">How to Unconfigure an IB Pseudo Device</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqv">How to Configure an IB Pseudo Device</a></p>
<p class="toc level3"><a href="eyaqo.html#eyatt">How to Display Kernel IB Clients of  an HCA</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqw">How to Unconfigure IB Devices Connected to an HCA</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqy">How to Update the IB <tt>p_key</tt> Tables</a></p>
<p class="toc level3"><a href="eyaqo.html#eyaqz">How to Display IB Communication Services</a></p>
<p class="toc level3"><a href="eyaqo.html#eyarb">How to Add a VPPA Communication Service</a></p>
<p class="toc level3"><a href="eyaqo.html#eyarc">How to Remove an Existing IB Port, HCA_SVC, or a VPPA Communication Service</a></p>
<p class="toc level3"><a href="eyaqo.html#eyarj">How to Update an IOC Configuration</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Using the uDAPL Application Interface With InfiniBand Devices</a></p>
<p class="toc level3"><a href="#eyank">How to Enable uDAPL</a></p>
</div>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="eyasr"></a><h3>Using the uDAPL Application Interface With InfiniBand Devices</h3>
<p>User Direct Access Programming Library (uDAPL) is a standard API that promotes data
center application data messaging performance, scalability, and reliability over Remote Direct Memory Access
(RDMA) capable interconnects such as InfiniBand. The uDAPL interface is defined by the
DAT collaborative. For more information about the DAT collaborative, go to the following
site:<a name="indexterm-219"></a></p><p><a href="http://www.datcollaborative.org">http://www.datcollaborative.org</a></p><p>The Solaris release provides the following uDAPL features:</p>
<ul><li><p>A standard DAT registry library, <tt>libdat</tt>. For more information, see <a href="http://docs.sun.com/doc/819-2242/libdat-3lib?a=view"><tt>libdat</tt>(3LIB)</a>.</p></li>
<li><p>A standard service provider registration file, <tt>dat.conf</tt>. For more information, see <a href="http://docs.sun.com/doc/819-2251/dat.conf-4?a=view"><tt>dat.conf</tt>(4)</a>.</p></li>
<li><p>Support for multiple service providers so that each provider specifies their own uDAPL library path, version number, and so on, in their own <tt>service_provider.conf</tt> file. For more information, see, <a href="http://docs.sun.com/doc/819-2251/service-provider.conf-4?a=view"><tt>service_provider.conf</tt>(4)</a>.</p></li>
<li><p>An administrative tool, the <tt>datadm</tt> command, to configure <tt>dat.conf</tt>. For more information, see <a href="http://docs.sun.com/doc/819-2240/datadm-1m?a=view"><tt>datadm</tt>(1M)</a>.</p></li>
<li><p>A new resource control property, <tt>project.max-device-locked-memory</tt>, to regulate the amount of locked down physical memory.</p></li>
<li><p>A naming scheme that uses either IPv4 or IPv6 addresses that leverage the IP infrastructure, such as ARP in IPv4 and neighbor discovery in IPv6, for address resolution. The Solaris uDAPL Interface Adapter directly maps to an IPoIB device instance. </p></li>
<li><p>Support for the standard Address Translation Scheme that is used by the DAT collaborative community.</p></li>
<li><p>A uDAPL service provider library to support the Mellanox Tavor Host Channel Adapter with automatic registration to the <tt>dat.conf</tt> registration file.</p></li>
<li><p>Supports both SPARC platform and x86 platforms.</p></li></ul>


<a name="eyank"></a><h4>How to Enable uDAPL</h4><ol><a name="eyanl"></a>
<li><b>Become superuser.</b></li>
<li><b>Confirm that the following packages are installed. Or, install them, if needed.<a name="indexterm-220"></a><a name="indexterm-221"></a></b>
<ul><li><p><tt>SUNWib</tt> &ndash; Sun InfiniBand Framework</p></li>
<li><p><tt>SUNWtavor</tt> &ndash; Sun Tavor HCA Driver</p></li>
<li><p><tt>SUNWipoib</tt> &ndash; Sun IP over InfiniBand</p></li>
<li><p><tt>SUNWudaplr</tt> &ndash; Direct Access Transport (DAT) registry package (root)</p></li>
<li><p><tt>SUNWudaplu</tt> &ndash; Direct Access Transport (DAT) registry packages (usr)</p></li>
<li><p><tt>SUNWudapltr</tt> &ndash; Service Provider for Tavor packages (root)</p></li>
<li><p><tt>SUNWudapltu</tt> &ndash; Service Provider for Tavor packages (usr)</p></li></ul>
</li>
<li><a name="eyann"></a><b>Select one of the following to plumb the IPoIB interfaces.</b>
<ul><li><p>Manually plumb the interfaces with the <tt>ifconfig</tt> and <tt>datadm</tt> commands.</p><p>For example:</p><pre># <tt><b>ifconfig ibd1 plumb</b></tt>
# <tt><b>ifconfig ibd1 192.168.0.1/24 up</b></tt>
# <tt><b>datadm -a /usr/share/dat/SUNWudaplt.conf</b></tt></pre></li>
<li><p>Automatically plumb the interfaces by doing the following:</p>
<ul><li><p>Create the following file with the appropriate IP address.</p><pre>/etc/hostname.ibd1</pre></li>
<li><p>Reboot the system.</p></li></ul>
</li></ul>
</li></ol>

<a name="eyanu"></a><h4>Updating the DAT Static Registry</h4>
<p>You can use the <tt>datadm</tt> command to maintain the DAT static registry, the
<tt>dat.conf</tt> file. For more information about this file, see <a href="http://docs.sun.com/doc/819-2251/dat.conf-4?a=view"><tt>dat.conf</tt>(4)</a>.</p><p>The <tt>datadm</tt> command can also be used to register or unregister a service
provider to the <tt>dat.conf</tt> file. For more information, see <a href="http://docs.sun.com/doc/819-2240/datadm-1m?a=view"><tt>datadm</tt>(1M)</a>.</p><p>When IPoIB interface adapters are added or removed, run the <tt>datadm</tt> command
to  update the <tt>dat.conf</tt> file to reflect the current state of the
system. A new set of interface adapters for all the service providers that
are currently installed will be regenerated.</p>

<a name="eyanp"></a><h5>How to Update the DAT Static Registry</h5>
<ol><a name="eyano"></a>
<li><b>Become superuser.</b></li>
<li><a name="eyanq"></a><b>Update the DAT static registry after you add or remove IPoIP interface adapters
from the system.<a name="indexterm-222"></a><a name="indexterm-223"></a><a name="indexterm-224"></a></b><pre># <tt><b>datadm -u</b></tt></pre></li>
<li><a name="eyanv"></a><b>Display the updated DAT static registry.</b><pre># <tt><b>datadm</b></tt></pre></li></ol>

<a name="ezswe"></a><h5>How to Register a Service Provider in the DAT Static Registry</h5>
<ol>
<li><b>Become superuser.</b></li>
<li><b>Update the DAT static registry after you add Sun's service provider for the
Mellanox Tavor Host Channel Adapter.<a name="indexterm-225"></a><a name="indexterm-226"></a></b><pre># <tt><b>datadm -a /usr/share/dat/SUNWudaplt.conf</b></tt></pre></li>
<li><b>Display the updated DAT static registry.</b><pre># <tt><b>datadm -v</b></tt></pre></li></ol>

<a name="faaoy"></a><h5>How to Unregister a Service Provider from the DAT Static Registry</h5>
<ol>
<li><b>Become superuser.</b></li>
<li><b>Update the DAT static registry after you remove Sun's service provider for the
Mellanox Tavor Host Channel Adapter from the system.<a name="indexterm-227"></a><a name="indexterm-228"></a></b><pre># <tt><b>datadm -r /usr/share/dat/SUNWudaplt.conf</b></tt></pre></li>
<li><b>Display the updated DAT static registry.</b><pre># <tt><b>datadm -v</b></tt></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyaqo.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksconcepts-29477.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

