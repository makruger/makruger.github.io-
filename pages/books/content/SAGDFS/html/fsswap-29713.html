<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>About Swap Space - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsswap-14677.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsswap-31555.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">About Swap Space</a></p>
</div>
<p class="toc level2"><a href="fsswap-31555.html">How Do I Know If I Need More Swap Space?</a></p>
<p class="toc level2"><a href="fsswap-66891.html">How Swap Space Is Allocated</a></p>
<p class="toc level2"><a href="fsswap-31050.html">Planning for Swap Space</a></p>
<p class="toc level2"><a href="fsswap-52195.html">Monitoring Swap Resources</a></p>
<p class="toc level2"><a href="fsswap-59089.html">Adding More Swap Space</a></p>
<p class="toc level3"><a href="fsswap-59089.html#fsswap-37376">How to Create a Swap File and Make It Available</a></p>
<p class="toc level2 tocsp"><a href="fsswap-88340.html">Removing a Swap File From Use</a></p>
<p class="toc level3"><a href="fsswap-88340.html#fsswap-13">How to Remove Unneeded Swap Space</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="fsswap-29713"></a><h3>About Swap Space</h3>
<p>You should understand the features of the SunOS<sup>TM</sup> swap mechanism to determine the
following:</p>
<ul><li><p>Swap space requirements</p></li>
<li><p>The relationship between swap space and the TMPFS file system</p></li>
<li><p>How to recover from error messages related to swap space</p></li></ul>


<a name="fsswap-89187"></a><h4>Swap Space and Virtual Memory</h4>
<p><a name="fsswap-ix2858"></a><a name="fsswap-ix2859"></a><a name="fsswap-ix2860"></a><a name="fsswap-ix2861"></a><a name="fsswap-ix2862"></a>Solaris software uses some disk slices for temporary storage rather than for file systems.
These slices are called <b>swap</b> slices. Swap slices are used as virtual memory
storage areas when the system does not have enough physical memory to handle
current processes.     </p><p>The virtual memory system maps physical copies of files on disk to
virtual addresses in memory. Physical memory pages that contain the data for these mappings
can be backed by regular files in the file system, or by
swap space. If the memory is backed by swap space it is referred
to as <b>anonymous</b> <b>memory</b> because no identity is assigned to the disk
space that is backing the memory.</p><p>The Solaris OS uses the concept of <b>virtual swap space</b>, a layer between anonymous memory
pages and the physical storage (or disk-backed swap space) that actually back these
pages. A system's virtual swap space is equal to the sum of all
its physical (disk-backed) swap space plus a portion of the currently available physical
memory.</p><p>Virtual swap space has these advantages:</p>
<ul><li><p>The need for large amounts of physical swap space is reduced because virtual swap space does not necessarily correspond to physical (disk) storage.</p></li>
<li><p>A pseudo file system called SWAPFS provides addresses for anonymous memory pages. Because SWAPFS controls the allocation of memory pages, it has greater flexibility in deciding what happens to a page. For example, SWAPFS might change the page's requirements for disk-backed swap storage.</p></li></ul>


<a name="fsswap-76986"></a><h4>Swap Space and the TMPFS File System</h4>
<p>The TMPFS file system is activated automatically in the Solaris environment by an
entry in the <tt>/etc/vfstab</tt> file. The TMPFS file system stores files and their
associated information in memory (in the <tt>/tmp</tt> directory) rather than on disk, which
speeds access to those files. This feature results in a major performance enhancement
for applications such as compilers and DBMS products that use <tt>/tmp</tt> heavily.</p><p>The TMPFS file system allocates space in the <tt>/tmp</tt> directory from the system's
swap resources. This feature means that as you use up space in the
<tt>/tmp</tt> directory, you are also using up swap space. So, if your applications
use the <tt>/tmp</tt> directory heavily and you do not monitor swap space usage,
your system could run out of swap space. </p><p>Do use the following if you want to use TMPFS, but your
swap resources are limited:</p>
<ul><li><p>Mount the TMPFS file system with the size option (<tt>-o</tt> <i>size</i>) to control how much swap resources TMPFS can use.</p></li>
<li><p>Use your compiler's <tt>TMPDIR</tt> environment variable to point to another larger directory.</p><p>Using your compiler's <tt>TMPDIR</tt> variable only controls whether the compiler is using the <tt>/tmp</tt> directory. This variable has no effect on other programs' use of the <tt>/tmp</tt> directory.</p></li></ul>


<a name="fsswap-20"></a><h4>Swap Space as a Dump Device</h4>
<p>A <b>dump device</b> is usually disk space that is reserved to store system crash
dump information. By default, a system's dump device is configured to be a
swap slice. If possible, you should configure an alternate disk partition as a
<b>dedicated dump device</b> instead to provide increased reliability for crash dumps and faster reboot time
after a system failure. You can configure a dedicated dump device by using
the <tt>dumpadm</tt> command. For more information, see <a href="http://docs.sun.com/doc/819-2380/tscrashdumps-40145?a=view">Chapter 17, Managing System Crash Information (Tasks), in <i>System Administration Guide: Advanced Administration</i></a>.</p><p>If you are using a volume manager to manage your disks, such
as Solaris Volume Manager, do not configure your dedicated dump device to be
under its control. You can keep your swap areas under Solaris Volume Manager's
control, which is a recommended practice. However, for accessibility and performance reasons, configure another
disk as a dedicated dump device outside of Solaris Volume Manager's control.</p>

<a name="fsswap-23"></a><h4>Swap Space and Dynamic Reconfiguration</h4>
<p>A good practice is to allocate enough swap space to support a
failing CPU or system board during dynamic reconfiguration. Otherwise, a CPU or system board
failure might result in your host or domain rebooting with less memory.</p><p>Without having this additional swap space available, one or more of your applications
might fail to start due to insufficient memory. This problem would require manual
intervention either to add additional swap space or to reconfigure the memory usage
of these applications.</p><p>If you have allocated additional swap space to handle a potential loss of
memory on reboot, all of your intensive applications might start as usual. This
means the system will be available to the users, perhaps possibly slower due
to some additional swapping.</p><p>For more information, see your hardware dynamic reconfiguration guide.</p>

<a name="gfuco"></a><h4>Configuring Swap Space in a SAN Environment</h4>
<p>Review the following points to determine whether you might configure swap space on
a network-connected disk, such as in a SAN environment:</p>
<ul><li><p>Diagnosing swap space issues on a locally-attached disk is easier than diagnosing swap space issues on a network-connected disk.</p></li>
<li><p>The performance of swap space over a SAN should be comparable to swap space configured on a locally-attached disk.</p></li>
<li><p>Adding more memory to a system with performance issues, after analyzing performance data, might resolve a swap over SAN performance problem better than moving the swap to a locally-attached disk.</p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsswap-14677.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsswap-31555.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

