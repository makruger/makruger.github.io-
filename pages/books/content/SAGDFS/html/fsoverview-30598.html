<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Mounting and Unmounting File Systems - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsoverview-12343.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsoverview-28729.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level2"><a href="fsoverview-63.html">What's New in File Systems?</a></p>
<p class="toc level2"><a href="fsoverview-62.html">Where to Find File System Management Tasks</a></p>
<p class="toc level2"><a href="fsoverview-51.html">Overview of File Systems</a></p>
<p class="toc level2"><a href="fsoverview-95856.html">Commands for File System Administration</a></p>
<p class="toc level2"><a href="fsoverview-43247.html">Default Solaris File Systems</a></p>
<p class="toc level2"><a href="fsoverview-12343.html">UFS File System</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Mounting and Unmounting File Systems</a></p>
</div>
<p class="toc level2"><a href="fsoverview-28729.html">Determining a File System's Type</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="fsoverview-30598"></a><h3>Mounting and Unmounting File Systems</h3>
<p>Before you can access the files on a file system, you need
to mount the file system. When you mount a file system, you attach
that file system to a directory (<b>mount point</b>) and make it available to the system.
The root (<tt>/</tt>) file system is always mounted. Any other file system can
be connected or disconnected from the root (<tt>/</tt>) file system.</p><p><a name="fsoverview-ix2732"></a>When you mount a file system, any files or directories in the underlying
mount point directory are unavailable as long as the file system is mounted.
These files are not permanently affected by the mounting process. They become available
again when the file system is unmounted.  However, mount directories are typically
empty because you usually do not want to obscure existing files.  </p><p>For example, the following figure shows a local file system, starting with a
root (<tt>/</tt>) file system and the <tt>sbin</tt>, <tt>etc</tt>, and <tt>opt</tt> subdirectories.</p><a name="fsoverview-fig-24"></a><h6>Figure&nbsp;17-1 <a name="fsoverview-89893"></a>Sample root (<tt>/</tt>) File System</h6><img src="figures/fs_overview.fig2702.gif" alt="Diagram shows sample root (/) file system with partial entries from the sbin, etc, and opt directories listed."></img><p>To access a local file system from the <tt>/opt</tt> file system that contains
a set of unbundled products, you must do the following:</p>
<ul><li><p>First, you must create a directory to use as a mount point for the file system you want to mount, for example, <tt>/opt/unbundled</tt>. </p></li>
<li><p>Once the mount point is created, you can mount the file system by using the <tt>mount</tt> command. This command makes all of the files and directories in <tt>/opt/unbundled</tt> available, as shown in the following figure.</p></li></ul>
<a name="fsoverview-fig-25"></a><h6>Figure&nbsp;17-2 <a name="fsoverview-17289"></a>Mounting a File System</h6><img src="figures/fs_overview.fig2703.gif" alt="Diagram shows mounting a file system on the /opt/unbundled mount point with a listing of the newly accessible items in the /opt/unbundled directory."></img><p>For step-by-step instructions on how to mount file systems, see <a href="fsmount-42780.html">Chapter&nbsp;19, Mounting and Unmounting File Systems (Tasks)</a>.</p>

<a name="fsoverview-53"></a><h4>The Mounted File System Table</h4>
<p><a name="fsoverview-ix2734"></a><a name="fsoverview-ix2735"></a><a name="fsoverview-ix2736"></a>Whenever you mount or unmount a file system, the <tt>/etc/mnttab</tt> (mount table) file
is modified with the list of currently mounted file systems. You can display the
contents of this file by using the <tt>cat</tt> or <tt>more</tt> commands. However, you
cannot edit this file. Here is an example of an <tt>/etc/mnttab</tt> file:</p><pre>$ <tt><b>more /etc/mnttab</b></tt>
/dev/dsk/c0t0d0s0       /       ufs     rw,intr,largefiles,logging,xattr,onerror
=panic,dev=2200008      1093882623
/devices        /devices        devfs   dev=4340000     1093882603
ctfs    /system/contract        ctfs    dev=4380001     1093882603
proc    /proc   proc    dev=43c0000     1093882603
mnttab  /etc/mnttab     mntfs   dev=4400001     1093882603
swap    /etc/svc/volatile       tmpfs   xattr,dev=4440001       1093882603
/dev/dsk/c0t0d0s6       /usr    ufs     rw,intr,largefiles,logging,xattr,onerror
=panic,dev=220000e      1093882623
objfs   /system/object  objfs   dev=44c0001     1094150403
fd      /dev/fd fd      rw,dev=45c0001  1093882624
swap    /var/run        tmpfs   xattr,dev=4440002       1093882625
swap    /tmp    tmpfs   xattr,dev=4440003       1093882625
/dev/dsk/c0t0d0s7       /export/home    ufs     rw,intr,largefiles,logging,xattr
,onerror=panic,dev=220000f      1093882637
$</pre>

<a name="fsoverview-42092"></a><h4>The Virtual File System Table</h4>
<p>Manually mount file systems every time you wanted to access them would be
a very time-consuming and error-prone. To avoid these problems, the virtual file
system table (the <tt>/etc/vfstab</tt> file) provides a list of file systems and
information on how to mount them.</p><p>The <tt>/etc/vfstab</tt> file provides two important features:</p>
<ul><li><p>You can specify file systems to automatically mount when the system boots.</p></li>
<li><p>You can mount file systems by using only the mount point name. The <tt>/etc/vfstab</tt> file contains the mapping between the mount point and the actual device slice name. </p></li></ul>
<p><a name="fsoverview-ix2741"></a><a name="fsoverview-ix2738"></a><a name="fsoverview-ix2740"></a>A default <tt>/etc/vfstab</tt> file is created when you install a system, depending on
the selections during installation. However, you can edit the <tt>/etc/vfstab</tt> file on a
system whenever you want. To add an entry, the information you need to
specify is as follows:</p>
<ul><li><p>The device where the file system resides</p></li>
<li><p>The file system mount point</p></li>
<li><p>File system type</p></li>
<li><p>Whether you want the file system to mount automatically when the system boots (by using the <tt>mountall</tt> command)</p></li>
<li><p>Any mount options</p></li></ul>
<p>The following is an example of an <tt>/etc/vfstab</tt> file. Comment lines begin with
<tt>#</tt>. This example shows an <tt>/etc/vfstab</tt> file for a system with two
disks (<tt>c0t0d0</tt> and <tt>c0t3d0</tt>).</p><pre>$ <tt><b>more /etc/vfstab</b></tt>
#device           device              mount            FS      fsck    mount   mount
#to mount         to fsck             point            type    pass    at boot options
#
fd                 -                  /dev/fd          fd      -       no      -
/proc              -                  /proc            proc    -       no      -
/dev/dsk/c0t0d0s1  -                  -                swap    -       no      -
/dev/dsk/c0t0d0s0  /dev/rdsk/c0t0d0s0 /                ufs     1       no      -
/dev/dsk/c0t0d0s6  /dev/rdsk/c0t0d0s6 /usr             ufs     1       no      -
/dev/dsk/c0t0d0s7  /dev/rdsk/c0t0d0s7 /export/home     ufs     2       yes     -
/dev/dsk/c0t0d0s5  /dev/rdsk/c0t0d0s5 /opt             ufs     2       yes     -
/devices           -                  /devices         devfs   -       no      -
ctfs               -                  /system/contract ctfs    -       no      -
objfs              -                  /system/object   objfs   -       no      -
swap               -                  /tmp             tmpfs   -       yes     -
$</pre><p>In this example, the UFS file system entry for <tt>/export/home</tt> on the <tt>/dev/dsk/c0t0d0s7</tt>
slice will be automatically mounted on the <tt>/test</tt> mount point when the system
boots. Note that, for root (<tt>/</tt>) and <tt>/usr</tt>, the <tt>mount at boot</tt> field value is
specified as <tt>no</tt>. These file systems are mounted by the kernel as part
of the boot sequence before the <tt>mountall</tt> command is run.</p><p>For descriptions of each <tt>/etc/vfstab</tt> field and information on how to edit and
use the file, see <a href="fsmount-42780.html">Chapter&nbsp;19, Mounting and Unmounting File Systems (Tasks)</a>.</p>

<a name="fsoverview-78649"></a><h4>The NFS Environment</h4>
<a name="fsoverview-ix2746"></a><a name="fsoverview-ix2747"></a><a name="fsoverview-ix2748"></a><p><b>NFS</b> is a distributed file system service that can be used to share
<b>resources</b> (files or directories) from one system, typically a server, with other systems
on the network. For example, you might want to share third-party applications or
source files with users on other systems.</p><p><a name="fsoverview-ix2749"></a>NFS makes the actual physical location of the resource irrelevant to the user.
Instead of placing copies of commonly used files on every system, NFS allows
you to place one copy on one system's disk and let all other
systems access it from the network. Under NFS, remote files are virtually indistinguishable
from local files.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-1634/rfsintro-2?a=view">Chapter 4, Managing Network File Systems (Overview), in <i>System Administration Guide: Network Services</i></a>.</p><p><a name="fsoverview-ix2750"></a>A system becomes an NFS server if it has resources to share on
the network. A server keeps a list of currently shared resources and their
access restrictions (such as read/write or read-only access). </p><p>When you share a resource, you make it available for mounting by
remote systems.</p><p>You can share a resource in these ways:</p>
<ul><li><p><a name="fsoverview-ix2751"></a><a name="fsoverview-ix2752"></a>By using the <tt>share</tt> or <tt>shareall</tt> command </p></li>
<li><p>By adding an entry to the <tt>/etc/dfs/dfstab</tt> (distributed file system table) file and rebooting the system</p></li></ul>
<p>For information on how to share resources, see <a href="fsmount-42780.html">Chapter&nbsp;19, Mounting and Unmounting File Systems (Tasks)</a>. For a complete
description of NFS, see <a href="http://docs.sun.com/doc/819-1634/rfsintro-2?a=view">Chapter 4, Managing Network File Systems (Overview), in <i>System Administration Guide: Network Services</i></a>.</p>

<a name="gdsfn"></a><h5>NFS Version 4</h5>
<p>Sun's implementation of the NFS version 4 distributed file access protocol is included
in the Solaris release.</p><p>NFS version 4 integrates file access, file locking, and mount protocols into a
single, unified protocol to ease traversal through a firewall and improve security. The
Solaris implementation of NFS version 4 is fully integrated with Kerberos V5, also
known as SEAM, thus providing authentication, integrity, and privacy. NFS version 4 also
enables the negotiation of security flavors to be used between the client and
the server. With NFS version 4, a server can offer different security flavors
for different file systems.</p><p>For more information about NFS Version 4 features, see <a href="http://docs.sun.com/doc/819-1634/ewbds?a=view">What&rsquo;s New With the NFS Service in <i>System Administration Guide: Network Services</i></a>.</p>

<a name="fsoverview-26"></a><h4>Automounting or AutoFS</h4>
<a name="fsoverview-ix2742"></a><a name="fsoverview-ix2743"></a><p>You can mount NFS file system resources by using a client-side service called
<b>automounting</b> (or <b>AutoFS</b>). AutoFS enables a system to automatically mount and unmount NFS
resources whenever you access them. The resource remains mounted as long as you
remain in the directory and are using a file within that directory. If
the resource is not accessed for a certain period of time, it is
automatically unmounted. </p><p>AutoFS provides the following features:</p>
<ul><li><p>NFS resources don't need to be mounted when the system boots, which saves booting time.</p></li>
<li><p>Users don't need to know the root password to mount and unmount NFS resources.</p></li>
<li><p>Network traffic might be reduced because NFS resources are mounted only when they are in use.</p></li></ul>
<p><a name="fsoverview-ix2744"></a><a name="fsoverview-ix2745"></a>The AutoFS service is initialized by the <tt>automount</tt> utility, which runs automatically
when a system is booted. The <tt>automountd</tt> daemon runs continuously and is
responsible for the mounting and unmounting of NFS file systems on an as-needed
basis. By default, the <tt>/home</tt> file system is mounted by the <tt>automount</tt>
daemon. </p><p>With AutoFS, you can specify multiple servers to provide the same file system.
This way, if one of these servers is down, AutoFS can try
to mount the file system from another machine.</p><p>For complete information on how to set up and administer AutoFS, see
<a href="http://docs.sun.com/doc/819-3000"><i>System Administration Guide: IP Services</i></a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsoverview-12343.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsoverview-28729.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

