<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Tips and Tricks for Managing Disks - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksprep-87.html">Previous</a>
             </td>
             <td align="right">
                 <a href="diskssadd-16103.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level2"><a href="disksprep-1.html">Administering Disks (Task Map)</a></p>
<p class="toc level2"><a href="disksprep-3.html">Identifying Disks on a System</a></p>
<p class="toc level3"><a href="disksprep-3.html#disksprep-24293">How to Identify the Disks on a System</a></p>
<p class="toc level2 tocsp"><a href="disksprep-10.html">Formatting a Disk</a></p>
<p class="toc level3"><a href="disksprep-10.html#disksprep-37081">How to Determine if a Disk Is Formatted</a></p>
<p class="toc level3"><a href="disksprep-10.html#disksprep-24584">How to Format a Disk</a></p>
<p class="toc level2 tocsp"><a href="disksprep-24.html">Displaying Disk Slices</a></p>
<p class="toc level3"><a href="disksprep-24.html#disksprep-23207">How to Display Disk Slice Information</a></p>
<p class="toc level2 tocsp"><a href="disksprep-34.html">Creating and Examining a Disk Label</a></p>
<p class="toc level3"><a href="disksprep-34.html#disksprep-32432">How to Label a Disk</a></p>
<p class="toc level3"><a href="disksprep-34.html#disksprep-15875">How to Examine a Disk Label</a></p>
<p class="toc level2 tocsp"><a href="disksprep-52.html">Recovering a Corrupted Disk Label</a></p>
<p class="toc level3"><a href="disksprep-52.html#disksprep-22071">How to Recover a Corrupted Disk Label</a></p>
<p class="toc level2 tocsp"><a href="disksprep-67.html">Adding a Third-Party Disk</a></p>
<p class="toc level3"><a href="disksprep-67.html#disksprep-17927">How to Create a <tt>format.dat</tt> Entry</a></p>
<p class="toc level2 tocsp"><a href="disksprep-72.html">Automatically Configuring SCSI Disk Drives</a></p>
<p class="toc level3"><a href="disksprep-72.html#disksprep-24067">How to Automatically Configure a SCSI Drive</a></p>
<p class="toc level2 tocsp"><a href="disksprep-87.html">Repairing a Defective Sector</a></p>
<p class="toc level3"><a href="disksprep-87.html#disksprep-27270">How to Identify a Defective Sector by Using Surface Analysis</a></p>
<p class="toc level3"><a href="disksprep-87.html#disksprep-31929">How to Repair a Defective Sector</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Tips and Tricks for Managing Disks</a></p>
</div>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="disksprep-101"></a><h3>Tips and Tricks for Managing Disks</h3>
<p>Use the following tips to help you manage disks more efficiently.</p>

<a name="disksprep-102"></a><h4>Debugging <tt>format</tt> Sessions</h4>
<p>Invoke the <tt>format</tt> <tt>-M</tt> command to enable extended and diagnostic messages for ATA
and SCSI devices.</p><a name="fahtc"></a>Example&nbsp;11-8 Debugging <tt>format</tt> Sessions<p>In this example, the series of numbers under <tt>Inquiry</tt> represent the hexadecimal value
of the <tt>inquiry</tt> data that is displayed to the right of the numbers.</p><pre># <tt><b>format -M</b></tt>
Searching for disks...done
AVAILABLE DISK SELECTIONS:
  0. c0t1d0 &lt;SUN1.05 cyl 2036 alt 2 hd 14 sec 72>
     /iommu@f,e0000000/sbus@f,e0001000/espdma@f,400000/esp@f,800000/sd@1,0
  1. c0t3d0 &lt;SUN1.05 cyl 2036 alt 2 hd 14 sec 72>
     /iommu@f,e0000000/sbus@f,e0001000/espdma@f,400000/esp@f,800000/sd@3,0
 
Specify disk (enter its number): <tt><b>0</b></tt>
selecting c0t3d0
[disk formatted]
format> <tt><b>inquiry</b></tt>
Inquiry:
00 00 02 02 8f 00 00 12 53 45 41 47 41 54 45 20     ........NAME....
53 54 31 31 32 30 30 4e 20 53 55 4e 31 2e 30 35     ST11200N SUN1.05
38 33 35 38 30 30 30 33 30 32 30 39 00 00 00 00     835800030209....
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00     ................
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00     ................
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00     ................
00 43 6f 70 79 72 69 67 68 74 20 28 63 29 20 31     .Copyright (c) 1
39 39 32 20 53 65 61 67 61 74 65 20 41 6c 6c 20     992 NAME    All 
72 69 67 68 74 73 20 72 65 73 65 72 76 65 64 20     rights reserved 
30 30 30                                            000
Vendor:   <i>name</i> 
Product:  ST11200N SUN1.05
Revision: 8358
format> </pre>

<a name="disksprep-103"></a><h4>Labeling Multiple Disks by Using the <tt>prtvtoc</tt> and <tt>fmthard</tt> Commands</h4>
<p>Use the <tt>prtvtoc</tt> and <tt>fmthard</tt> commands to label multiple disks with the same
disk geometry.</p><p>Use the following <tt>for loop</tt> in a script to copy a disk label from
one disk and replicate it on multiple disks.</p><pre># <tt><b>for i in</b></tt> <i>x y z</i>
> <tt><b>do</b></tt>
> <tt><b>prtvtoc /dev/rdsk/</b></tt>c<i>w</i>t<i>x</i>d<i>y</i>s<i>z</i> <tt><b>| fmthard -s - /dev/rdsk/</b></tt>c<i>w</i>t${i}d0s2
> <tt><b>done</b></tt></pre><a name="disksprep-104"></a>Example&nbsp;11-9 Labeling Multiple Disks<p>In this example, the disk label from <tt>c2t0d0s0</tt> is copied to four other
disks.</p><pre># <tt><b>for i in 1 2 3 5</b></tt>
> <tt><b>do</b></tt>
> <tt><b>prtvtoc /dev/rdsk/c2t0d0s0 | fmthard -s - /dev/rdsk/c2t${i}d0s2</b></tt>
> <tt><b>done</b></tt>
fmthard:  New volume table of contents now in place.
fmthard:  New volume table of contents now in place.
fmthard:  New volume table of contents now in place.
fmthard:  New volume table of contents now in place.
#</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksprep-87.html">Previous</a>
             </td>
             <td align="right">
                 <a href="diskssadd-16103.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

