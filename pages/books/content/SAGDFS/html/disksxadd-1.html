<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>x86: Adding a System Disk or a Secondary Disk - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksxadd-73.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fmvcd.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level2"><a href="disksxadd-73.html">x86: Adding a System Disk or a Secondary Disk (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">x86: Adding a System Disk or a Secondary Disk</a></p>
<p class="toc level3"><a href="#disksxadd-12484">x86: How to Connect a System Disk</a></p>
<p class="toc level3"><a href="#fpyqd">How to Change the Solaris <tt>fdisk</tt> Identifier</a></p>
<p class="toc level3"><a href="#disksxadd-21330">x86: How to Connect a Secondary Disk and Boot</a></p>
<p class="toc level3"><a href="#disksxadd-19036">x86: How to Create a Solaris <tt>fdisk</tt> Partition</a></p>
<p class="toc level3"><a href="#disksxadd-33190">x86: How to Create Disk Slices and Label a Disk</a></p>
<p class="toc level3"><a href="#disksxadd-41967">x86: How to Create File Systems</a></p>
<p class="toc level3"><a href="#disksxadd-45774">x86: How to Install a Boot Block on a System Disk</a></p>
</div>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="disksxadd-1"></a><h3>x86: Adding a System Disk or a Secondary Disk</h3>
<a name="disksxadd-ix2529"></a><a name="disksxadd-ix2530"></a><p>A system disk contains the root (<tt>/</tt>) or <tt>/usr</tt> file systems, or both.
If the disk that contains either of these file systems becomes damaged, you
have two ways to recover:</p>
<ul><li><p>You can reinstall the entire Solaris OS.</p></li>
<li><p>Or, you can replace the system disk and restore your file systems from a backup medium.</p></li></ul>
<p>A secondary disk doesn't contain the root (<tt>/</tt>) and <tt>/usr</tt> file systems.
A secondary disk usually contains space for user files. You can add a
secondary disk to a system for more disk space. Or, you can replace
a damaged secondary disk. If you replace a secondary disk on a system,
you can restore the old disk's data on the new disk.</p>

<a name="disksxadd-12484"></a><h4>x86: How to Connect a System Disk</h4><p>This procedure assumes that the operating system is shutdown. </p><ol>
<li><a name="disksxadd-step-5"></a><b>Disconnect the damaged system disk from the system.</b></li>
<li><a name="disksxadd-step-6"></a><b><a name="disksxadd-ix2535"></a>Ensure that the disk you are adding has a different target number than
the other devices on the system. </b><p>Typically, a small switch is located at the back of the disk for
this purpose. </p></li>
<li><a name="disksxadd-step-7"></a><b>Connect the replacement system disk to the system, and check the physical connections.</b><p>Refer to the disk's hardware installation guide for details.</p></li>
<li><a name="disksxadd-step-8"></a><b>Boot the system.</b><p>This procedure assumes that you are booting from GRUB's Solaris failsafe boot option.</p><ol style="list-style-type: lower-alpha">
				 
<li><a name="disksxadd-step-11"></a><b>Press any key to reboot the system if the system displays the <tt>Press any key to reboot</tt>
prompt. Or, use the reset button to restart the system if the system
is shut down. </b><p>The GRUB menu is displayed after a few minutes.</p></li>
<li><a name="disksxadd-step-12"></a><b>Use the arrow keys to select the Solaris failsafe boot option.<a name="fxjvl"></a></b></li>
<li><b>Press return.</b></li>
<li><b>At the <tt>Do you wish to automatically update boot archives?</tt> prompt answer no.</b><p>The root prompt (<tt>#</tt>) is displayed.</p>
<hr><p><b>Note - </b>You must reboot the system when you want to exit Solaris failsafe boot
mode. You cannot reboot the system to multiuser mode until the system disk
is successfully added, the data is restored, and the bootblocks are installed.</p>
<hr>
</li></ol></li></ol><h6><h6>More Information</h6>After You Connect a System Disk ...<p>You can create an <tt>fdisk</tt> partition if the disk is less than 1
terabyte size. Go to <a href="#disksxadd-19036">x86: How to Create a Solaris <tt>fdisk</tt> Partition</a>.</p></h6>

<a name="fgojw"></a><h4>Changing the <tt>fdisk</tt> Partition Identifier</h4>
<p>The Solaris <tt>fdisk</tt> partition identifier on x86 systems has been changed from 130
(<tt>0x82</tt>) to 191 (<tt>0xbf</tt>). All Solaris commands, utilities, and drivers have been updated
to work with either <tt>fdisk</tt> identifier. There is no change in <tt>fdisk</tt> functionality.</p>

<a name="fpyqd"></a><h4>How to Change the Solaris <tt>fdisk</tt> Identifier</h4><p>A new <tt>fdisk</tt> menu option enables you to switch back and forth between
the new and old identifier. The <tt>fdisk</tt> identifier can be changed even when
the file system that is contained in the partition is mounted.</p><p>Two <tt>type</tt> values in the <tt>fdisk</tt> menu reflect the old and new identifiers
as follows:</p>
<ul><li><p><tt>Solaris</tt> identifies <tt>0x82</tt></p></li>
<li><p><tt>Solaris2</tt> identifies <tt>0xbf</tt></p></li></ul>
<ol>
<li><b>Become superuser.</b></li>
<li><b>Display the current <tt>fdisk</tt> identifier.</b><p>For example:</p><pre>            Total disk size is 39890 cylinders
            Cylinder size is 4032 (512 byte) blocks

                                              Cylinders
     Partition   Status    Type          Start   End   Length    %
     =========   ======    ============  =====   ===   ======   ===
         1       Active    x86 Boot          1     6       6      0
         2                 Solaris2          7  39889    39883    100</pre></li>
<li><b>Select option 4 from the <tt>fdisk</tt> menu to change the <tt>fdisk</tt> partition identifier
back to <tt>0x82</tt></b><pre>SELECT ONE OF THE FOLLOWING:
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)
Enter Selection: <tt><b>4</b></tt></pre></li>
<li><b>Select option 5 to update your disk configuration and exit.</b></li>
<li><b>If necessary, select option 4 from the <tt>fdisk</tt> menu to change the <tt>fdisk</tt>
partition identifier back to <tt>0xbf</tt>.</b><p>For example:</p><pre>Total disk size is 39890 cylinders
            Cylinder size is 4032 (512 byte) blocks

                                              Cylinders
     Partition   Status    Type          Start   End   Length    %
     =========   ======    ============  =====   ===   ======   ===
         1       Active    x86 Boot          1     6       6      0
         2                 Solaris           7  39889    39883    100

SELECT ONE OF THE FOLLOWING:
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)
Enter Selection: <tt><b>4</b></tt></pre></li>
<li><b>Select option 5 to update your disk configuration and exit.</b></li></ol>

<a name="disksxadd-21330"></a><h4>x86: How to Connect a Secondary Disk and Boot</h4><p>If you are adding a disk with an EFI disk label on
an x64 system, see <a href="disksconcepts-1.html#disksconcepts-14">EFI Disk Label</a> for more information.</p><p>For more information about hot-plugging devices, see <a href="devconfig2-1.html">Chapter&nbsp;6, Dynamically Configuring Devices (Tasks)</a>.</p><ol>
<li><a name="disksxadd-step-16"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="disksxadd-step-17"></a>(Optional) <b>If the disk is unsupported by the Solaris software, add the device driver
for the disk by following the instructions included with the hardware.</b></li>
<li><a name="disksxadd-step-19"></a><b>Shut down the system.</b><pre># <tt><b>shutdown -i0 -g</b></tt><i>n</i> <tt><b>-y</b></tt></pre><dl><dt><tt>-i0</tt></dt>
<dd><p>Brings the system down to run level 0, the power-down state.</p></dd>
<dt><tt>-g</tt><i>n</i></dt>
<dd><p>Notifies logged-in users that they have <i>n</i> seconds before the system begins to shut down. </p></dd>
<dt><tt>-y</tt></dt>
<dd><p>Specifies that the command should run without user intervention.</p></dd>
</dl>
<p>The <tt>Press any key to reboot</tt> prompt is displayed.</p></li>
<li><a name="disksxadd-step-20"></a><b>Turn off the power to the system and all external peripheral devices.</b></li>
<li><a name="disksxadd-step-21"></a><b><a name="disksxadd-ix2538"></a>Ensure that the disk you are adding has a different target number than
the other devices on the system. </b><p>Typically, a small switch is located at the back of the disk for
this purpose.</p></li>
<li><a name="disksxadd-step-22"></a><b>Connect the disk to the system and check the physical connections.</b><p>Refer to the disk's hardware installation guide for details.</p></li>
<li><a name="disksxadd-step-23"></a><b>Turn on the power to all external peripheral devices.</b></li>
<li><a name="disksxadd-step-24"></a><b>Turn on the power to the system.</b><p>The system boots and displays the login prompt.</p></li></ol><h6><h6>More Information</h6>After You Connect a Secondary Disk and Boot ...<p>After the system is booted, you can create an <tt>fdisk</tt> partition if the
disk is less than 1 terabyte in size. Go to <a href="#disksxadd-19036">x86: How to Create a Solaris <tt>fdisk</tt> Partition</a>.</p></h6>

<a name="disksxadd-54639"></a><h4>x86: Guidelines for Creating an <tt>fdisk</tt> Partition</h4>
<a name="disksxadd-ix2532"></a><p>Follow these guidelines when you set up one or more <tt>fdisk</tt> partitions.</p>
<ul><li><p>The <tt>fdisk</tt> command cannot be used on disks with an EFI label that are greater than 1 terabyte in size.</p></li>
<li><p>The disk can be divided into a maximum of four <tt>fdisk</tt> partitions. One of partitions must be a Solaris partition.</p></li>
<li><p>The Solaris partition must be made the active partition on the disk. The active partition is partition whose operating system will be booted by default at system startup.</p></li>
<li><p>Solaris <tt>fdisk</tt> partitions must begin on cylinder boundaries. </p></li>
<li><p>Solaris <tt>fdisk</tt> partitions must begin at cylinder 1, not cylinder 0, on the first disk because additional boot information, including the master boot record, is written in sector 0. </p></li>
<li><p>The Solaris <tt>fdisk</tt> partition can be the entire disk. Or, you might want to make it smaller to allow room for a DOS partition. You can also make a new <tt>fdisk</tt> partition on a disk without disturbing existing partitions (if sufficient space is available) to create a new partition.</p></li></ul>

<hr><p><b>x86 only - </b>Solaris slices are also called partitions. Certain interfaces might refer to a <b>slice</b>
as a <b>partition</b>.</p><p><tt>fdisk</tt> partitions are supported only on x86 based systems. To avoid confusion, Solaris
documentation tries to distinguish between <tt>fdisk</tt> partitions and the entities within the Solaris
<tt>fdisk</tt> partition. These entities might be called slices or partitions.</p>
<hr>


<a name="disksxadd-19036"></a><h4>x86: How to Create a Solaris <tt>fdisk</tt> Partition</h4><h6>Before You Begin</h6><p>If you need information about <tt>fdisk</tt> partitions, see <a href="#disksxadd-54639">x86: Guidelines for Creating an <tt>fdisk</tt> Partition</a>.</p><ol>
<li><a name="disksxadd-step-28"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="disksxadd-step-29"></a><b><a name="disksxadd-ix2540"></a>Invoke the <tt>format</tt> utility. </b><pre># <tt><b>format</b></tt></pre><p>A numbered list of disks is displayed.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2240/format-1m?a=view"><tt>format</tt>(1M)</a>.</p></li>
<li><a name="disksxadd-step-30"></a><b>Type the number of the disk on which to create a Solaris <tt>fdisk</tt>
partition.</b><pre>Specify disk (enter its number): <i>disk-number</i></pre><p>where <i>disk-number</i> is the number of the disk on which you want to
create a Solaris <tt>fdisk</tt> partition.</p></li>
<li><a name="disksxadd-step-31"></a><b>Select the <tt>fdisk</tt> menu.</b><pre>format> <tt><b>fdisk</b></tt></pre><p>The <tt>fdisk</tt> menu that is displayed depends upon whether the disk has existing
<tt>fdisk</tt> partitions. Determine the next step by using the following table.</p><table><col width="162.40*"><col width="85.76*"><col width="147.85*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Go To</p></th>
<th align="left" valign="top" scope="column"><p>For More
Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create a Solaris <tt>fdisk</tt> partition to span the entire disk.</p></td>
<td align="left" valign="top" scope="row"><p>Step 5</p></td>
<td align="left" valign="top" scope="row"><p><a href="#disksxadd-12321">Example&nbsp;13-1</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create a Solaris
<tt>fdisk</tt> partition and preserve one or more existing non Solaris <tt>fdisk</tt> partitions.</p></td>
<td align="left" valign="top" scope="row"><p>Step 6</p></td>
<td align="left" valign="top" scope="row"><p><a href="#disksxadd-31473">Example&nbsp;13-2</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create
a Solaris <tt>fdisk</tt> partition and one or more additional non Solaris <tt>fdisk</tt> partition.</p></td>
<td align="left" valign="top" scope="row"><p>Step
6</p></td>
<td align="left" valign="top" scope="row"><p><a href="#disksxadd-35230">Example&nbsp;13-3</a></p></td>
</tr>
</table></li>
<li><a name="disksxadd-step-32"></a><b>Create and activate a Solaris <tt>fdisk</tt> partition that spans the entire disk by
specifying <tt>y</tt> at the prompt.  Then, go to step 13.</b><pre>No fdisk table exists. The default partition for the disk is:

a 100% "SOLARIS System" partition

Type "y" to accept the default partition, otherwise type "n" to edit the
partition table.
<tt><b>y</b></tt></pre></li>
<li><a name="disksxadd-step-33"></a><b>Specify <tt>n</tt> at the prompt if you do not want the Solaris <tt>fdisk</tt>
partition to span the entire disk.</b><pre>Type "y" to accept the default partition, otherwise type "n" to edit the
 partition table.
<tt><b>n</b></tt>
             Total disk size is 3498 cylinders
             Cylinder size is 1199 (512 byte) blocks
                                         Cylinders
    Partition   Status    Type      Start   End   Length    %
    =========   ======    ========  =====   ===   ======   ===
SELECT ONE OF THE FOLLOWING:
     
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)
Enter Selection:</pre></li>
<li><a name="disksxadd-step-34"></a><b>Select option 1, <tt>Create a partition</tt>, to create an <tt>fdisk</tt> partition.</b><pre>Enter Selection: <tt><b>1</b></tt></pre></li>
<li><a name="disksxadd-step-35"></a><b>Create a Solaris <tt>fdisk</tt> partition by selecting <tt>1(=Solaris2)</tt>.</b><pre>Indicate the type of partition you want to create
  1=SOLARIS2   2=UNIX        3=PCIXOS     4=Other
  5=DOS12      6=DOS16       7=DOSEXT     8=DOSBIG
  9=DOS16LBA   A=x86 Boot    B=Diagnostic C=FAT32
  D=FAT32LBA   E=DOSEXTLBA   F=EFI        0=Exit? <tt><b>1</b></tt></pre></li>
<li><a name="disksxadd-step-36"></a><b>Identify the percentage of the disk to be reserved for the Solaris <tt>fdisk</tt>
partition. Keep in mind the size of any existing <tt>fdisk</tt> partitions when you
calculate this percentage. </b><pre>Specify the percentage of disk to use for this partition
(or type "c" to specify the size in cylinders). <i>nn</i></pre></li>
<li><a name="disksxadd-step-37"></a><b>Activate the Solaris <tt>fdisk</tt> partition by typing <tt>y</tt> at the prompt.</b><pre>Should this to become the active partition? If yes, it will be 
activated each time the computer is reset or turned on.
Please type "y" or "n". <tt><b>y</b></tt></pre><p>The <tt>Enter Selection</tt> prompt is displayed after the <tt>fdisk</tt> partition is activated.</p></li>
<li><a name="disksxadd-step-38"></a><b>Select option 1, <tt>Create a partition</tt>, to create another <tt>fdisk</tt> partition.</b><p>See steps 8&ndash;10 for instructions on creating an <tt>fdisk</tt> partition.</p></li>
<li><a name="disksxadd-step-39"></a><b>Update the disk configuration, and exit the <tt>fdisk</tt> menu from the <tt>selection</tt> menu.</b><pre>Selection: <tt><b>5</b></tt> </pre></li>
<li><a name="disksxadd-step-40"></a><b>Relabel the disk by using the <tt>label</tt> command.</b><pre>format> <tt><b>label</b></tt>
Ready to label disk, continue? <tt><b>yes</b></tt>
format> </pre></li>
<li><a name="disksxadd-step-41"></a><b>Quit the <tt>format</tt> utility.</b><pre>format> <tt><b>quit</b></tt></pre></li></ol><a name="disksxadd-12321"></a>Example&nbsp;13-1 x86: Creating a Solaris <tt>fdisk</tt> Partition That Spans the Entire Drive<p>The following example uses the <tt>format</tt> utility's <tt>fdisk</tt> option to create a
Solaris <tt>fdisk</tt> partition that spans the entire drive.</p><pre># <tt><b>format</b></tt>
Searching for disks...done
AVAILABLE DISK SELECTIONS:
       0. c0d0 &lt;DEFAULT cyl 2466 alt 2 hd 16 sec 63>
          /pci@0,0/pci-ide@7,1/ide@0/cmdk@0,0
       1. c0d1 &lt;DEFAULT cyl 522 alt 2 hd 32 sec 63>
          /pci@0,0/pci-ide@7,1/ide@0/cmdk@1,0
       2. c1d0 &lt;DEFAULT cyl 13102 alt 2 hd 16 sec 63>
          /pci@0,0/pci-ide@7,1/ide@1/cmdk@0,0
Specify disk (enter its number): <tt><b>0</b></tt>
selecting c0d0
Controller working list found
[disk formatted]
format> <tt><b>fdisk</b></tt>
No fdisk table exists. The default partitioning for your disk is:
 
  a 100% "SOLARIS System" partition.
 
Type "y" to accept the default partition, otherwise type "n" to edit the
partition table. <tt><b>y</b></tt>

format> <tt><b>label</b></tt>
Ready to label disk, continue? <tt><b>yes</b></tt>
format> <tt><b>quit</b></tt></pre><a name="disksxadd-31473"></a>Example&nbsp;13-2 x86: Creating a Solaris <tt>fdisk</tt> Partition While Preserving an Existing <tt>fdisk</tt> Partition<p>The following example shows how to create a Solaris <tt>fdisk</tt> partition on a
disk that has an existing <tt>DOS-BIG</tt> <tt>fdisk</tt> partition.</p><pre>format> <tt><b>fdisk</b></tt>
             Total disk size is 3498 cylinders
             Cylinder size is 1199 (512 byte) blocks

                                               Cylinders
      Partition   Status    Type          Start   End   Length    %
      =========   ======    ============  =====   ===   ======   ===
          1       Active    DOS-BIG           1   699     699     20
SELECT ONE OF THE FOLLOWING:
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)  
Enter Selection: <tt><b>1</b></tt>
Indicate the type of partition you want to create
  1=SOLARIS2  2=UNIX        3=PCIXOS     4=Other
  5=DOS12     6=DOS16       7=DOSEXT     8=DOSBIG
  9=DOS16LBA  A=x86 Boot    B=Diagnostic C=FAT32
  D=FAT32LBA  E=DOSEXTLBA   F=EFI        0=Exit?<tt><b>1</b></tt>
Indicate the percentage of the disk you want this partition
to use (or enter "c" to specify in cylinders). <tt><b>80</b></tt>
Should this become the active partition? If yes, it will be 
activated each time the computer is or turned on. 
Please type "y" or "n". <tt><b>y</b></tt>
             Total disk size is 3498 cylinders
             Cylinder size is 1199 (512 byte) blocks
                                               Cylinders
      Partition   Status    Type          Start   End   Length    %
      =========   ======    ============  =====   ===   ======   ===
          1                 DOS-BIG           1   699     699     20
          2       Active    Solaris2        700  3497    2798     80
    
SELECT ONE OF THE FOLLOWING:
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)   
Enter Selection:<tt><b>5</b></tt>
Partition 2 is now the active partition 
format> <tt><b>label</b></tt>
Ready to label disk, continue? <tt><b>yes</b></tt>
format> <tt><b>q</b></tt></pre><a name="disksxadd-35230"></a>Example&nbsp;13-3 x86: Creating a Solaris <tt>fdisk</tt> Partition and an Additional <tt>fdisk</tt> Partition<p>This following example shows how to create a Solaris <tt>fdisk</tt> partition and a
<tt>DOSBIG</tt> <tt>fdisk</tt> partition.</p><pre>format> <tt><b>fdisk</b></tt>
No fdisk table exists. The default partitioning for your disk is:
   a 100% "SOLARIS System" partition.
Type "y" to accept the default partition, otherwise type "n" to edit the
partition table.
<tt><b>n</b></tt>
             Total disk size is 3498 cylinders
             Cylinder size is 1199 (512 byte) blocks
                                               Cylinders
      Partition   Status    Type          Start   End   Length    %
      =========   ======    ============  =====   ===   ======   ===
SELECT ONE OF THE FOLLOWING:
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)  
Enter Selection: <tt><b>1</b></tt>
Indicate the type of partition you want to create
1=SOLARIS2   2=UNIX        3=PCIXOS     4=Other
5=DOS12      6=DOS16       7=DOSEXT     8=DOSBIG
9=DOS16LBA   A=x86 Boot    B=Diagnostic C=FAT32
D=FAT32LBA   E=DOSEXTLBA   F=EFI        0=Exit?  <tt><b>8</b></tt>
Specify the percentage of disk to use for this partition
(or type "c" to specify the size in cylinders)<tt><b>20</b></tt>
Should this to become the Active partition? If yes, it will be 
activated each time the computer is reset or turned on. 
again. Please type "y" or "n". <tt><b>n</b></tt>
             Total disk size is 3498 cylinders
             Cylinder size is 1199 (512 byte) blocks
                                               Cylinders
      Partition   Status    Type          Start   End   Length    %
      =========   ======    ============  =====   ===   ======   ===
          1                 DOS-BIG           1   699     699     20
  SELECT ONE OF THE FOLLOWING:
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)  
Enter Selection: <tt><b>1</b></tt>
Indicate the type of partition you want to create
1=SOLARIS2   2=UNIX        3=PCIXOS     4=Other
5=DOS12      6=DOS16       7=DOSEXT     8=DOSBIG
9=DOS16LBA   A=x86 Boot    B=Diagnostic C=FAT32
D=FAT32LBA   E=DOSEXTLBA   F=EFI        0=Exit? <tt><b>1</b></tt>
Indicate the percentage of the disk you want this partition
to use (or enter "c" to specify in cylinders). <tt><b>80</b></tt>
Should this become the active partition? If yes, it will be 
activated each time the computer is reset or turned on.
Please type "y" or "n". <tt><b>y</b></tt>
             Total disk size is 3498 cylinders
             Cylinder size is 1199 (512 byte) blocks
                                               Cylinders
      Partition   Status    Type          Start   End   Length    %
      =========   ======    ============  =====   ===   ======   ===
          1                 DOS-BIG           1   699     699     20
          2       Active    Solaris2         700  3497    2798     80
SELECT ONE OF THE FOLLOWING:
  1. Create a partition
  2. Specify the active partition
  3. Delete a partition
  4. Change between Solaris and Solaris2 Partition IDs
  5. Exit (update disk configuration and exit)
  6. Cancel (exit without updating disk configuration)  
Enter Selection: <tt><b>5</b></tt>
Partition 2 is now the Active partition 
format> <tt><b>q</b></tt></pre><h6><h6>More Information</h6>After You Create a Solaris <tt>fdisk</tt> Partition ...<p>After you create a Solaris <tt>fdisk</tt> partition on the disk, you can create
slices on the disk. Go to <a href="#disksxadd-33190">x86: How to Create Disk Slices and Label a Disk</a></p></h6>

<a name="disksxadd-33190"></a><h4>x86: How to Create Disk Slices and Label a Disk</h4><ol>
<li><a name="disksxadd-step-45"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="disksxadd-step-46"></a><b><a name="disksxadd-ix2544"></a>Invoke the <tt>format</tt> utility. </b><pre># <tt><b>format</b></tt></pre><p>A numbered list of disks is displayed.</p></li>
<li><a name="disksxadd-step-47"></a><b>Type the number of the disk that you want to repartition.</b><pre>Specify disk (enter its number): <i>disk-number</i></pre><p>where <i>disk-number</i> is the number of the disk that you want to repartition.</p></li>
<li><a name="disksxadd-step-48"></a><b>Select the <tt>partition</tt> menu.</b><pre>format> <tt><b>partition</b></tt></pre></li>
<li><a name="disksxadd-step-49"></a><b>Display the current partition (slice) table.</b><pre>partition> <tt><b>print</b></tt></pre></li>
<li><a name="disksxadd-step-50"></a><b>Start the modification process.</b><pre>partition> <tt><b>modify</b></tt></pre></li>
<li><a name="disksxadd-step-51"></a><b>Set the disk to all free hog.</b><pre>Choose base (enter number) [0]? <tt><b>1</b></tt></pre><p>For more information about the free hog slice, see <a href="disksconcepts-5.html#disksconcepts-15570">Using the Free Hog Slice</a>.</p></li>
<li><a name="disksxadd-step-52"></a><b>Create a new partition table by answering <tt>yes</tt> when prompted to continue.</b><pre>Do you wish to continue creating a new partition
table based on above table[yes]? <tt><b>yes</b></tt></pre></li>
<li><a name="disksxadd-step-53"></a><b>Identify the free hog partition (slice) and the sizes of the slices when
prompted.</b><p>When adding a system disk, you must set up slices for the following:</p>
<ul><li><p>root (slice 0) and swap (slice 1) and/or</p></li>
<li><p><tt>/usr</tt> (slice 6) </p></li></ul>
<p>After you identify the slices, the new partition table is displayed.</p></li>
<li><a name="disksxadd-step-54"></a><b>Make the displayed partition table the current partition table by answering <tt>yes</tt> when
prompted.</b><pre>Okay to make this the current partition table[yes]? <tt><b>yes</b></tt></pre><p>If you don't want the current partition table and you want to
change it, answer <tt>no</tt> and go to <a href="#disksxadd-step-50">Step&nbsp;6</a>.</p></li>
<li><a name="disksxadd-step-55"></a><b>Name the partition table.</b><pre>Enter table name (remember quotes): <tt><b>"</b></tt><i>partition-name</i><tt><b>"</b></tt></pre><p>where <i>partition-name</i> is the name for the new partition table.</p></li>
<li><a name="disksxadd-step-56"></a><b>Label the disk with the new partition table after you have finished allocating
slices on the new disk.</b><pre>Ready to label disk, continue? <tt><b>yes</b></tt></pre></li>
<li><a name="disksxadd-step-57"></a><b>Quit the <tt>partition</tt> menu.</b><pre>partition> <tt><b>quit</b></tt></pre></li>
<li><a name="disksxadd-step-69"></a><b>Verify the new disk label.</b><pre>format> <tt><b>verify</b></tt></pre></li>
<li><a name="disksxadd-step-58"></a><b>Exit the <tt>format</tt> utility.</b><pre>format> <tt><b>quit</b></tt></pre></li></ol><h6><h6>More Information</h6>After You Create Disk Slices and Label a Disk ...<p>After you create disk slices and label the disk, you can create
file systems on the disk. Go to <a href="#disksxadd-41967">x86: How to Create File Systems</a>.</p></h6>

<a name="disksxadd-41967"></a><h4>x86: How to Create File Systems</h4><ol>
<li><a name="disksxadd-step-61"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="disksxadd-step-62"></a><b>Create a file system for each slice.</b><pre># <tt><b>newfs</b></tt> /dev/rdsk/c<i>w</i>t<i>x</i>d<i>y</i>s<i>z</i></pre><p>where <tt>/dev/rdsk/c</tt><i>w</i>t<i>x</i>d<i>y</i>s<i>z</i> is the raw device for the file system to be created.</p><p>For more information about the <tt>newfs</tt> command, see <a href="fscreate-96442.html">Chapter&nbsp;18, Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a> or <a href="http://docs.sun.com/doc/819-2240/newfs-1m?a=view"><tt>newfs</tt>(1M)</a>.</p></li>
<li><a name="disksxadd-step-70"></a><b>Verify the new file system by mounting.</b><pre># <tt><b>mount</b></tt> /dev/dsk/c<i>w</i>t<i>x</i>d<i>y</i>s<i>z</i> <tt><b>/mnt</b></tt>
# <tt><b>ls /mnt</b></tt>
lost+found</pre></li></ol><h6><h6>More Information</h6>After You Create File Systems ...
<ul><li><p><b>System Disk</b> &ndash; You need to restore the root (<tt>/</tt>) and <tt>/usr</tt> file systems on the disk.</p>
<ul><li><p>Go to <a href="bkuprestoretasks-38055.html">Chapter&nbsp;27, Restoring Files and File Systems (Tasks)</a>.</p></li>
<li><p>After the root (<tt>/</tt>) and <tt>/usr</tt> file systems are restored, install the boot block. Go to <a href="#disksxadd-45774">x86: How to Install a Boot Block on a System Disk</a>.</p></li></ul>
</li>
<li><p><b>Secondary Disk</b> &ndash; You might need to restore file systems on the new disk. Go to <a href="bkuprestoretasks-38055.html">Chapter&nbsp;27, Restoring Files and File Systems (Tasks)</a>. If you are not restoring file systems on the new disk, you are finished adding a secondary disk.</p></li>
<li><p>For information on making the file systems available to users, see <a href="fsmount-42780.html">Chapter&nbsp;19, Mounting and Unmounting File Systems (Tasks)</a>.</p></li></ul>
</h6>

<a name="disksxadd-45774"></a><h4>x86: How to Install a Boot Block on a System Disk</h4><ol>
<li><a name="disksxadd-step-64"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="disksxadd-step-65"></a><b><a name="disksxadd-ix2549"></a>Install the boot blocks on the system disk.</b><pre># <tt><b>/sbin/installgrub /boot/grub/stage1 /boot/grub/stage2</b></tt> <i>/dev/rdsk/cwtxdysz</i></pre><dl><dt><tt>/boot/grub/stage1</tt></dt>
<dd><p>Is the partition boot file.</p></dd>
<dt><tt>/boot/grub/stage2</tt></dt>
<dd><p>Is the boot block code.</p></dd>
<dt><i>/dev/rdsk/cwtxdysz</i></dt>
<dd><p>Is the raw device name that represents the location of the GRUB menu, <tt>/boot/grub/menu.lst</tt> on the Solaris root slice.</p></dd>
</dl>
<p>For more information, see <a href="http://docs.sun.com/doc/819-2240/installgrub-1m?a=view"><tt>installgrub</tt>(1M)</a>.</p></li>
<li><a name="disksxadd-step-71"></a><b>Verify that the boot blocks are installed by rebooting the system to run
level 3.</b><pre># <tt><b>init 6</b></tt></pre></li></ol><a name="disksxadd-67"></a>Example&nbsp;13-4 x86: Installing a Boot Block on a System Disk<p>The following example shows how to install the boot blocks on an
x86 system. </p><pre># <tt><b>/sbin/installgrub /boot/grub/stage1 /boot/grub/stage2 /dev/rdsk/c1d0s0</b></tt>
stage1 written to partition 0 sector 0 (abs 2016)
stage2 written to to partition 0, 227 sectors starting 50 (abs 2066)</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksxadd-73.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fmvcd.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

