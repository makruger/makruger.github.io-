<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Introduction to Backing Up and Restoring File Systems - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupconcepts-20.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupconcepts-21.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level2"><a href="bkupconcepts-20.html">Where to Find Backup and Restore Tasks</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Introduction to Backing Up and Restoring File Systems</a></p>
</div>
<p class="toc level2"><a href="bkupconcepts-21.html">High-Level View of Backing Up and Restoring File Systems (Task Map)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="bkupconcepts-18333"></a><h3>Introduction to Backing Up and Restoring File Systems</h3>
<p><b>Backing up</b> file systems means copying file systems to removable media, such as tape,
to safeguard against loss, damage, or corruption. <b>Restoring</b> file systems means copying
reasonably current backup files from removable media to a working directory.<a name="bkupconcepts-ix3010"></a></p><p>This chapter describes the <tt>ufsdump</tt> and <tt>ufsrestore</tt> commands for backing up and
restoring UFS file systems. Other commands are available for copying files and file
systems for the purpose of sharing or transporting files. The following table provides
pointers to all commands that copy individual files and file systems to other
media.<a name="bkupconcepts-ix3011"></a></p><a name="bkupconcepts-25782"></a><h6>Table&nbsp;24-1 Commands for Backing Up and Restoring Files and File Systems</h6><table><col width="158*"><col width="119*"><col width="119*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Command</p></th>
<th align="left" valign="top" scope="column"><p>For More Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Back up one or more file systems to a local
tape device or a remote tape device.</p></td>
<td align="left" valign="top" scope="row"><p><tt>ufsdump</tt></p></td>
<td align="left" valign="top" scope="row"><p><a href="bkuptasks2-64128.html">Chapter&nbsp;25, Backing Up Files and File Systems (Tasks)</a> or <a href="bkupref-12756.html">Chapter&nbsp;28, UFS Backup and Restore Commands (Reference)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Create read-only copies of
file systems.</p></td>
<td align="left" valign="top" scope="row"><p><tt>fssnap</tt></p></td>
<td align="left" valign="top" scope="row"><p><a href="bkupsnapshot-2.html">Chapter&nbsp;26, Using UFS Snapshots (Tasks)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Back up all file systems for systems on a network from
a backup server.</p></td>
<td align="left" valign="top" scope="row"><p>Solstice Backup software</p></td>
<td align="left" valign="top" scope="row"><p><i>Solstice Backup 6.1 Administration Guide</i></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Back up and restore an NIS+ master server.</p></td>
<td align="left" valign="top" scope="row"><p><tt>nisbackup</tt>
and <tt>nisrestore</tt></p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-3195"><i>System Administration Guide: Naming and Directory Services (NIS+)</i></a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Copy, list, and retrieve files on a tape or diskette.</p></td>
<td align="left" valign="top" scope="row"><p><tt>tar</tt>, <tt>cpio</tt>,
or <tt>pax</tt></p></td>
<td align="left" valign="top" scope="row"><p><a href="bkupsavefiles-17924.html">Chapter&nbsp;29, Copying UFS Files and File Systems (Tasks)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Copy the master disk to a clone disk.</p></td>
<td align="left" valign="top" scope="row"><p><tt>dd</tt></p></td>
<td align="left" valign="top" scope="row"><p><a href="bkupsavefiles-17924.html">Chapter&nbsp;29, Copying UFS Files and File Systems (Tasks)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Restore complete file systems
or individual files from removable media to a working directory.</p></td>
<td align="left" valign="top" scope="row"><p><tt>ufsrestore</tt></p></td>
<td align="left" valign="top" scope="row"><p><a href="bkuprestoretasks-38055.html">Chapter&nbsp;27, Restoring Files and File Systems (Tasks)</a></p></td>
</tr>
</table>

<a name="bkupconcepts-35884"></a><h4>Why You Should Back Up File Systems</h4>
<p>Backing up files is one of the most crucial system administration functions. You
should perform regularly scheduled backups to prevent loss of data due to
the following types of problems:<a name="bkupconcepts-ix3012"></a><a name="bkupconcepts-ix3013"></a></p>
<ul><li><p>System crashes</p></li>
<li><p>Accidental deletion of files</p></li>
<li><p>Hardware failures</p></li>
<li><p>Natural disasters such as fire, hurricanes, or earthquakes</p></li>
<li><p>Problems when you reinstall or upgrade a system</p></li></ul>


<a name="bkupconcepts-28918"></a><h4>Planning Which File Systems to Back Up</h4>
<p>You should back up all file systems that are critical to users,
including file systems that change frequently. The following tables provide general guidelines on the
file systems to back up for stand-alone systems and servers.<a name="bkupconcepts-ix3018"></a><a name="bkupconcepts-ix3019"></a></p><a name="bkupconcepts-10171"></a><h6>Table&nbsp;24-2 File Systems to Back Up for Stand-alone Systems</h6><table><col width="122*"><col width="122*"><col width="152*"><tr><th align="left" valign="top" scope="column"><p>File System to
Back Up</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Back Up Interval</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>root (<tt>/</tt>) &ndash; slice 0</p></td>
<td align="left" valign="top" scope="row"><p>This file system contains the
kernel and possibly the <tt>/var</tt> directory. The <tt>/var</tt> directory contains temporary files, logging
files, or status files, and possibly contains frequently updated system accounting and mail files.</p></td>
<td align="left" valign="top" scope="row"><p>At
regular intervals such as weekly or daily</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr</tt> &ndash; slice 6, <tt>/opt</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>/usr</tt>
and <tt>/opt</tt> file systems contain software and executables. The <tt>/opt</tt> directory is either
part of root (<tt>/</tt>) or is its own file system.</p></td>
<td align="left" valign="top" scope="row"><p>Occasionally</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/export/home</tt> &ndash; slice 7</p></td>
<td align="left" valign="top" scope="row"><p>This
file system can contain the directories and subdirectories of all users on the
stand-alone system.</p></td>
<td align="left" valign="top" scope="row"><p>More often than root (<tt>/</tt>) or <tt>/usr</tt>, perhaps as often as once
a day, depending on your site's needs</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/export</tt>, <tt>/var</tt>, or other file systems</p></td>
<td align="left" valign="top" scope="row"><p>The <tt>/export</tt>
file system can contain the kernel and executables for diskless clients. The <tt>/var</tt>
directory contains temporary files, logging files, or status files.</p></td>
<td align="left" valign="top" scope="row"><p>As your site requires</p></td>
</tr>
</table><a name="bkupconcepts-37575"></a><h6>Table&nbsp;24-3 File Systems to Back Up for Servers</h6><table><col width="111.20*"><col width="106.40*"><col width="178.41*"><tr><th align="left" valign="top" scope="column"><p>File System
to Back Up</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Back Up Interval</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>root (<tt>/</tt>) &ndash; slice 0</p></td>
<td align="left" valign="top" scope="row"><p>This file system contains
the kernel and executables.</p></td>
<td align="left" valign="top" scope="row"><p>Once a day to once a month depending on
your site's needs. </p><p>If you frequently add and remove users and systems
on the network, you have to change configuration files in this file system.
In this case, you should do a full backup of the root (<tt>/</tt>)
file system at intervals between once a week and once a month. </p><p>If
your site keeps user mail in the <tt>/var/mail</tt> directory on a mail server,
which client systems then mount, you might want to back up root (<tt>/</tt>)
daily. Or, backup the  <tt>/var</tt> directory, if it is a separate file
system. </p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/export</tt> &ndash; slice 3</p></td>
<td align="left" valign="top" scope="row"><p>This file system can contain the kernel and
executables for diskless clients.</p></td>
<td align="left" valign="top" scope="row"><p>Once a day to once a month, depending on
your site's needs. </p><p>Because the information in this file system is similar
to the server's root directory in slice 0, the file system does not
change frequently. You need to back up this file system only occasionally, unless
your site delivers mail to client systems. Then, you should back up <tt>/export</tt>
more frequently.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/usr</tt> &ndash; slice 6, <tt>/opt</tt></p></td>
<td align="left" valign="top" scope="row"><p>The <tt>/usr</tt> and <tt>/opt</tt> file systems contain software
and executables. The <tt>/opt</tt> directory is either part of root (<tt>/</tt>) or is
its own file system.</p></td>
<td align="left" valign="top" scope="row"><p>Once a day to once a month, depending on
your site's needs.</p><p>These file systems are fairly static unless software is added
or removed frequently.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>/export/home</tt> &ndash; slice 7</p></td>
<td align="left" valign="top" scope="row"><p>This file system can contains the home
directories of all the users on the system. The files in this file
system are volatile.</p></td>
<td align="left" valign="top" scope="row"><p>Once a day to once a week.</p></td>
</tr>
</table>

<a name="bkupconcepts-24102"></a><h4>Choosing the Type of Backup</h4>
<p>You can perform full or incremental backups by using the <tt>ufsdump</tt> command. You
can create a temporary image of a file system by using the
<tt>fssnap</tt> command. The following table lists the differences between these types of backup
procedures.  <a name="bkupconcepts-ix3021"></a><a name="bkupconcepts-ix3022"></a></p><a name="bkupconcepts-21614"></a><h6>Table&nbsp;24-4 Differences Between Types of Backups</h6><table><col width="72*"><col width="108*"><col width="108*"><col width="108*"><tr><th align="left" valign="top" scope="column"><p>Backup Type</p></th>
<th align="left" valign="top" scope="column"><p>Result</p></th>
<th align="left" valign="top" scope="column"><p>Advantages</p></th>
<th align="left" valign="top" scope="column"><p>Disadvantages</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Full</p></td>
<td align="left" valign="top" scope="row"><p><a name="bkupconcepts-ix3023"></a>Copies a complete file system or directory </p></td>
<td align="left" valign="top" scope="row"><p>All data is
in one place</p></td>
<td align="left" valign="top" scope="row"><p>Requires large numbers of backup tapes that take a long
time to write. Takes longer to retrieve individual files because the drive has
to move sequentially to the point on the tape where the file is
located. You might have to search multiple tapes.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Snapshot</p></td>
<td align="left" valign="top" scope="row"><p>Creates a temporary image of a
file system</p></td>
<td align="left" valign="top" scope="row"><p>System can be in multiuser mode</p></td>
<td align="left" valign="top" scope="row"><p>System performance might degrade while the
snapshot is created.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Incremental</p></td>
<td align="left" valign="top" scope="row"><p><a name="bkupconcepts-ix3024"></a>Copies only those files in the specified file system that have
changed since a previous backup </p></td>
<td align="left" valign="top" scope="row"><p>Easier to retrieve small changes in file
systems</p></td>
<td align="left" valign="top" scope="row"><p>Finding which incremental tape contains a file can take time. You might
have to go back to the last full backup.</p></td>
</tr>
</table>

<a name="bkupconcepts-40585"></a><h4>Choosing a Tape Device</h4>
<p>The following table shows typical tape devices that are used for storing
file systems during the backup process. The storage capacity depends on the type
of drive and the data being written to the tape. For more information
on tape devices, see <a href="bkuptapedevice-42512.html">Chapter&nbsp;30, Managing Tape Drives (Tasks)</a>.  <a name="bkupconcepts-ix3015"></a><a name="bkupconcepts-ix3016"></a><a name="bkupconcepts-ix3017"></a></p><a name="bkupconcepts-32470"></a><h6>Table&nbsp;24-5 Typical Media for Backing Up File Systems</h6><table><col width="264*"><col width="132*"><tr><th align="left" valign="top" scope="column"><p>Backup Media</p></th>
<th align="left" valign="top" scope="column"><p>Storage Capacity </p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1/2-inch reel tape</p></td>
<td align="left" valign="top" scope="row"><p>140 Mbytes
(6250 bpi)</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>2.5-Gbyte 1/4-inch cartridge (QIC) tape</p></td>
<td align="left" valign="top" scope="row"><p>2.5 Gbytes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>DDS3 4-mm cartridge tape (DAT)</p></td>
<td align="left" valign="top" scope="row"><p>12&ndash;24 Gbytes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>14-Gbyte
8-mm cartridge tape</p></td>
<td align="left" valign="top" scope="row"><p>14 Gbytes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>DLT 7000 1/2-inch cartridge tape</p></td>
<td align="left" valign="top" scope="row"><p>35&ndash;70 Gbytes</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupconcepts-20.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupconcepts-21.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

