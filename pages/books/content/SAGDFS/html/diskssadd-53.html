<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>SPARC: Adding a System Disk or a Secondary Disk (Task Map) - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="diskssadd-16103.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksxadd-38159.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">SPARC: Adding a System Disk or a Secondary Disk (Task Map)</a></p>
<p class="toc level3"><a href="#diskssadd-55658">SPARC: How to Connect a System Disk and Boot</a></p>
<p class="toc level3"><a href="#diskssadd-87325">SPARC: How to Connect a Secondary Disk and Boot</a></p>
<p class="toc level3"><a href="#diskssadd-43616">SPARC: How to Create Disk Slices and Label a Disk</a></p>
<p class="toc level3"><a href="#diskssadd-40446">SPARC: How to Create a UFS File System</a></p>
<p class="toc level3"><a href="#diskssadd-43588">SPARC: How to Install a Boot Block on a System Disk</a></p>
</div>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="diskssadd-53"></a><h3>SPARC: Adding a System Disk or a Secondary Disk (Task Map)</h3>
<p>The following task map identifies the procedures for adding a disk to a
SPARC based system.</p><table><col width="33*"><col width="33*"><col width="33*"><tr><th align="left" valign="top" scope="column"><p>Task</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>For Instructions</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>1. Connect the disk and boot.</p></td>
<td align="left" valign="top" scope="row"><p><b>System Disk</b></p><p>Connect the new disk
and boot from a local or remote Solaris CD or DVD. </p></td>
<td align="left" valign="top" scope="row"><p><a href="#diskssadd-55658">SPARC: How to Connect a System Disk and Boot</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p></p></td>
<td align="left" valign="top" scope="row"><p><b>Secondary Disk</b>
</p><p>Connect the new disk and perform a reconfiguration boot so that the system
will recognize the disk. </p></td>
<td align="left" valign="top" scope="row"><p><a href="#diskssadd-87325">SPARC: How to Connect a Secondary Disk and Boot</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>2. Create slices and label the disk.</p></td>
<td align="left" valign="top" scope="row"><p>Create disk
slices and label the disk if the disk manufacturer has not already done
so.</p></td>
<td align="left" valign="top" scope="row"><p><a href="#diskssadd-43616">SPARC: How to Create Disk Slices and Label a Disk</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>3. Create file systems.</p></td>
<td align="left" valign="top" scope="row"><p>Create UFS file systems on the disk slices by
using the <tt>newfs</tt> command. You must create the root (<tt>/</tt>) or <tt>/usr</tt> file system,
or both, for a system disk. </p></td>
<td align="left" valign="top" scope="row"><p><a href="#diskssadd-40446">SPARC: How to Create a UFS File System</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>4. Restore file systems.</p></td>
<td align="left" valign="top" scope="row"><p>Restore the root
(<tt>/</tt>) or <tt>/usr</tt> file system, or both, on the system disk. If necessary,
restore file systems on the secondary disk. </p></td>
<td align="left" valign="top" scope="row"><p><a href="bkuprestoretasks-38055.html">Chapter&nbsp;27, Restoring Files and File Systems (Tasks)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>5. Install boot block.</p></td>
<td align="left" valign="top" scope="row"><p><b>System Disk Only.</b> Install the
boot block on the root (<tt>/</tt>) file system so that the system can
boot. </p></td>
<td align="left" valign="top" scope="row"><p><a href="#diskssadd-43588">SPARC: How to Install a Boot Block on a System Disk</a></p></td>
</tr>
</table>

<a name="diskssadd-1"></a><h4>SPARC: Adding a System Disk or a Secondary Disk</h4>
<p>A system disk contains the root (<tt>/</tt>) or <tt>/usr</tt> file systems, or both.
If the disk that contains either of these file systems becomes damaged, you
have two ways to recover:</p>
<ul><li><p>You can reinstall the entire Solaris OS.</p></li>
<li><p>Or, you can replace the system disk and restore your file systems from a backup medium.</p></li></ul>
<p><a name="indexterm-254"></a><a name="indexterm-255"></a>A secondary disk does not contain the root (<tt>/</tt>) and <tt>/usr</tt> file systems.
A secondary disk usually contains space for user files. You can add a
secondary disk to a system for more disk space. Or, you can replace
a damaged secondary disk. If you replace a secondary disk on a system,
you can restore the old disk's data on the new disk.</p>

<a name="diskssadd-55658"></a><h4>SPARC: How to Connect a System Disk and Boot</h4><p>This procedure assumes that the system is shut down.</p><ol>
<li><a name="diskssadd-step-3"></a><b>Disconnect the damaged system disk from the system.</b></li>
<li><a name="diskssadd-step-4"></a><b>Ensure that the disk you are adding has a different target number than
the other devices on the system.</b><p>Typically, a small switch is located at the back of the disk for
this purpose. </p></li>
<li><a name="diskssadd-step-5"></a><b>Connect the replacement system disk to the system and check the physical connections.</b><p>Refer to the disk's hardware installation guide for details.</p></li>
<li><a name="diskssadd-step-6"></a><b>Follow the instructions in the following table, depending on whether you are booting
from a local Solaris CD or DVD or a remote Solaris CD or
DVD from the network.</b><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Boot Type</p></th>
<th align="left" valign="top" scope="column"><p>Action</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>From a Solaris CD or DVD in a
local drive</p></td>
<td align="left" valign="top" scope="row"><p>1. Make sure the Solaris Software 1 CD or the Solaris
DVD is in the drive.</p><p>2. Boot from the media to single-user mode:</p><p><tt>ok</tt> 
<tt><b>boot cdrom -s</b></tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>From the network</p></td>
<td align="left" valign="top" scope="row"><p>Boot from the network to single-user mode: </p><p><tt>ok</tt> <tt><b>boot net -s</b></tt></p></td>
</tr>
</table><p>After a few minutes, the root prompt (<tt>#</tt>) is displayed.</p></li></ol><h6><h6>More Information</h6>After You Connect a System Disk and Boot ...<p>After you boot the system, you can create slices and a disk
label on the disk. Go to <a href="#diskssadd-43616">SPARC: How to Create Disk Slices and Label a Disk</a>.</p></h6>

<a name="diskssadd-87325"></a><h4>SPARC: How to Connect a Secondary Disk and Boot</h4><p>If you are adding a disk with an EFI disk label, see
<a href="disksconcepts-1.html#disksconcepts-14">EFI Disk Label</a> for more information.</p><p>For more information about hot-plugging devices, see <a href="devconfig2-1.html">Chapter&nbsp;6, Dynamically Configuring Devices (Tasks)</a>.</p><ol>
<li><a name="diskssadd-step-9"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="diskssadd-step-10"></a>(Optional) <b>If the disk type is unsupported by the Solaris software, add the device
driver for the disk by following the instructions included with the hardware. </b><p>For information on creating a <tt>format.dat</tt> entry for the disk, see <a href="disksprep-67.html#disksprep-17927">How to Create a <tt>format.dat</tt> Entry</a>, if necessary.</p></li>
<li><a name="diskssadd-step-12"></a><b>Shut down the system.</b><pre># <tt><b>shutdown -i0 -g</b></tt><i>n</i> <tt><b>-y</b></tt></pre><dl><dt><tt>-i0</tt></dt>
<dd><p>Changes to run level 0, the power-down state.</p></dd>
<dt><tt>-g</tt><i>n</i></dt>
<dd><p>Notifies logged-in users that they have <i>n</i> seconds before the system begins to shut down. </p></dd>
<dt><tt>-y</tt></dt>
<dd><p>Specifies that the command should run without user intervention.</p></dd>
</dl>
<p>The <tt>ok</tt> prompt is displayed after the Solaris OS is shut down.</p></li>
<li><a name="diskssadd-step-13"></a><b>Turn off the power to the system and all external peripheral devices.</b></li>
<li><a name="diskssadd-step-14"></a><b>Ensure that the disk you are adding has a different target number than
the other devices on the system.</b><p>Typically, a small switch is located at the back of the disk for
this purpose.</p></li>
<li><a name="diskssadd-step-15"></a><b><a name="diskssadd-ix2520"></a>Connect the disk to the system and check the physical connections. </b><p>Refer to the disk's hardware installation guide for details.</p></li>
<li><a name="diskssadd-step-16"></a><b>Turn on the power to all external peripheral devices.</b></li>
<li><a name="diskssadd-step-17"></a><b>Turn on the power to the system.</b><p>The system boots and displays the login prompt.</p></li></ol><h6><h6>More Information</h6>After You Connect a Secondary Disk and Boot ...<p>After you boot the system, you can create slices and a disk
label on the disk. Go to <a href="#diskssadd-43616">SPARC: How to Create Disk Slices and Label a Disk</a>.</p></h6>

<a name="diskssadd-43616"></a><h4>SPARC: How to Create Disk Slices and Label a Disk</h4><ol>
<li><a name="diskssadd-step-20"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="diskssadd-step-21"></a><b><a name="diskssadd-ix2522"></a>Invoke the <tt>format</tt> utility. </b><pre># <tt><b>format</b></tt></pre><p>A numbered list of available disks is displayed. For more information, see <a href="http://docs.sun.com/doc/819-2240/format-1m?a=view"><tt>format</tt>(1M)</a>.</p></li>
<li><a name="diskssadd-step-22"></a><b><a name="diskssadd-ix2523"></a>Type the number of the disk that you want to repartition. </b><pre>Specify disk (enter its number): <i>disk-number</i></pre><p><i>disk-number</i> is the number of the disk that you want to repartition.</p></li>
<li><a name="diskssadd-step-23"></a><b>Select the <tt>partition</tt> menu.</b><pre>format> <tt><b>partition</b></tt></pre></li>
<li><a name="diskssadd-step-24"></a><b>Display the current partition (slice) table.</b><pre>partition> <tt><b>print</b></tt></pre></li>
<li><a name="diskssadd-step-25"></a><b>Start the modification process. </b><pre>partition> <tt><b>modify</b></tt></pre></li>
<li><a name="diskssadd-step-26"></a><b>Set the disk to all free hog.</b><pre>Choose base (enter number) [0]?<tt><b>1</b></tt></pre><p>For more information about the free hog slice, see <a href="disksconcepts-5.html#disksconcepts-15570">Using the Free Hog Slice</a>.</p></li>
<li><a name="diskssadd-step-27"></a><b>Create a new partition table by answering <tt>y</tt> when prompted to continue.</b><pre>Do you wish to continue creating a new partition table based on 
above table[yes]? <tt><b>y</b></tt></pre></li>
<li><a name="diskssadd-step-28"></a><b>Identify the free hog partition (slice) and the sizes of the slices when
prompted.</b><p>When adding a system disk, you must set up slices for:</p>
<ul><li><p>root (slice 0) and swap (slice 1) </p></li>
<li><p><tt>/usr</tt> (slice 6) </p></li></ul>
<p>After you identify the slices, the new partition table is displayed.</p><p>For an example of creating disk slices, see <a href="#diskssadd-34">Example&nbsp;12-1</a>.</p></li>
<li><a name="diskssadd-step-29"></a><b>Make the displayed partition table the current partition table by answering <tt>y</tt> when
prompted.</b><pre>Okay to make this the current partition table[yes]? <tt><b>y</b></tt></pre><p>If you do not want the current partition table and you want
to change it, answer <tt>no</tt> and go to <a href="#diskssadd-step-25">Step&nbsp;6</a>.</p></li>
<li><a name="diskssadd-step-30"></a><b>Name the partition table.</b><pre>Enter table name (remember quotes): <tt><b>"</b></tt><i>partition-name</i><tt><b>"</b></tt></pre><p>where <i>partition-name</i> is the name for the new partition table.</p></li>
<li><a name="diskssadd-step-31"></a><b>Label the disk with the new partition table after you have finished allocating
slices on the new disk.</b><pre>Ready to label disk, continue? <tt><b>yes</b></tt></pre></li>
<li><a name="diskssadd-step-32"></a><b>Quit the <tt>partition</tt> menu.</b><pre>partition> <tt><b>q</b></tt></pre></li>
<li><a name="diskssadd-step-49"></a><b>Verify the disk label.</b><pre>format> <tt><b>verify</b></tt></pre></li>
<li><a name="diskssadd-step-33"></a><b>Exit the <tt>format</tt> utility.</b><pre>format> <tt><b>q</b></tt></pre></li></ol><a name="diskssadd-34"></a>Example&nbsp;12-1 SPARC: Creating Disk Slices and Labeling a System Disk<p><a name="indexterm-256"></a>The following example shows the <tt>format</tt> utility being used to divide a 18-Gbyte disk
into three slices: one slice for the root (<tt>/</tt>) file system, one slice
for the swap area, and one slice for the <tt>/usr</tt> file system.</p><pre># <tt><b>format</b></tt>
AVAILABLE DISK SELECTIONS:
       0. /dev/rdsk/c1t0d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@0,0
       1. /dev/rdsk/c1t1d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@1,0
       2. /dev/rdsk/c1t8d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@8,0
       3. /dev/rdsk/c1t9d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@9,0
Specify disk (enter its number): <tt><b>0</b></tt>
selecting c1t0d0
[disk formatted]
format> <tt><b>partition</b></tt>
partition> <tt><b>print</b></tt>
partition> <tt><b>modify</b></tt>
Select partitioning base:
    0. Current partition table (original)
    1. All Free Hog
Part      Tag    Flag     Cylinders        Size            Blocks
  0       root    wm       0               0         (0/0/0)           0
  1       swap    wu       0               0         (0/0/0)           0
  2     backup    wu       0 - 7505       16.86GB    (7506/0/0) 35368272
  3 unassigned    wm       0               0         (0/0/0)           0
  4 unassigned    wm       0               0         (0/0/0)           0
  5 unassigned    wm       0               0         (0/0/0)           0
  6        usr    wm       0               0         (0/0/0)           0
  7 unassigned    wm       0               0         (0/0/0)           0

Choose base (enter number) [0]? <tt><b>1</b></tt>
table based on above table[yes]? <tt><b>yes</b></tt>
Free Hog partition[6]? <tt><b>6</b></tt>
Enter size of partition '0' [0b, 0c, 0.00mb, 0.00gb]: 4gb
Enter size of partition '1' [0b, 0c, 0.00mb, 0.00gb]: 4gb
Enter size of partition '3' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '4' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '5' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '7' [0b, 0c, 0.00mb, 0.00gb]: 
Part      Tag    Flag     Cylinders        Size            Blocks
  0       root    wm       0 - 1780        4.00GB    (1781/0/0)  8392072
  1       swap    wu    1781 - 3561        4.00GB    (1781/0/0)  8392072
  2     backup    wu       0 - 7505       16.86GB    (7506/0/0) 35368272
  3 unassigned    wm       0               0         (0/0/0)           0
  4 unassigned    wm       0               0         (0/0/0)           0
  5 unassigned    wm       0               0         (0/0/0)           0
  6        usr    wm    3562 - 7505        8.86GB    (3944/0/0) 18584128
  7 unassigned    wm       0               0         (0/0/0)           0
 
Okay to make this the current partition table[yes]? <tt><b>yes</b></tt>
Enter table name (remember quotes): <tt><b>"disk0"</b></tt>
Ready to label disk, continue? <tt><b>yes</b></tt>
partition> <tt><b>quit</b></tt>
format> <tt><b>verify</b></tt>
format> <tt><b>quit</b></tt></pre><a name="diskssadd-36"></a>Example&nbsp;12-2 SPARC: Creating Disk Slices and Labeling a Secondary Disk<p><a name="indexterm-257"></a>The following example shows the <tt>format</tt> utility being used to divide a 18-Gbyte disk
into one slice for the <tt>/export/home</tt> file system.</p><pre># <tt><b>format /dev/rdsk/c1*</b></tt>
AVAILABLE DISK SELECTIONS:
       0. /dev/rdsk/c1t0d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@0,0
       1. /dev/rdsk/c1t1d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@1,0
       2. /dev/rdsk/c1t8d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@8,0
       3. /dev/rdsk/c1t9d0s0 &lt;SUN18G cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@9,0
Specify disk (enter its number): <tt><b>1</b></tt>
selecting c1t1d0
[disk formatted]
format> <tt><b>partition</b></tt>
partition> <tt><b>print</b></tt>
partition> <tt><b>modify</b></tt>
Select partitioning base:
    0. Current partition table (original)
    1. All Free Hog
Choose base (enter number) [0]? <tt><b>1</b></tt>
Part      Tag    Flag     Cylinders        Size            Blocks
  0       root    wm       0               0         (0/0/0)           0
  1       swap    wu       0               0         (0/0/0)           0
  2     backup    wu       0 - 7505       16.86GB    (7506/0/0) 35368272
  3 unassigned    wm       0               0         (0/0/0)           0
  4 unassigned    wm       0               0         (0/0/0)           0
  5 unassigned    wm       0               0         (0/0/0)           0
  6        usr    wm       0               0         (0/0/0)           0
  7 unassigned    wm       0               0         (0/0/0)           0

Do you wish to continue creating a new partition
table based on above table[yes]? <tt><b>y</b></tt>
Free Hog partition[6]? <tt><b>7</b></tt>
Enter size of partition '0' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '1' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '3' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '4' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '5' [0b, 0c, 0.00mb, 0.00gb]: 
Enter size of partition '6' [0b, 0c, 0.00mb, 0.00gb]:
Part      Tag    Flag     Cylinders        Size            Blocks
  0       root    wm       0               0         (0/0/0)           0
  1       swap    wu       0               0         (0/0/0)           0
  2     backup    wu       0 - 7505       16.86GB    (7506/0/0) 35368272
  3 unassigned    wm       0               0         (0/0/0)           0
  4 unassigned    wm       0               0         (0/0/0)           0
  5 unassigned    wm       0               0         (0/0/0)           0
  6        usr    wm       0               0         (0/0/0)           0
  7 unassigned    wm       0 - 7505       16.86GB    (7506/0/0) 35368272
Okay to make this the current partition table[yes]? <tt><b>yes</b></tt>
Enter table name (remember quotes): <tt><b>"home"</b></tt>
Ready to label disk, continue? <tt><b>y</b></tt>
partition> <tt><b>q</b></tt>
format> <tt><b>verify</b></tt>
format> <tt><b>q</b></tt>
# </pre><p>The following example shows how to use the format utility to divide a
1.15 terabyte disk with an EFI label into three slices.</p><pre># <tt><b>format</b></tt>
.
.
.
partition> <tt><b>modify</b></tt>
Select partitioning base:
        0. Current partition table (original)
        1. All Free Hog
Choose base (enter number) [0]? <tt><b>1</b></tt>
Part      Tag    Flag     First Sector          Size          Last Sector
  0       root    wm                 0            0                0    
  1        usr    wm                 0            0                0    
  2 unassigned    wm                 0            0                0    
  3 unassigned    wm                 0            0                0    
  4 unassigned    wm                 0            0                0    
  5 unassigned    wm                 0            0                0    
  6        usr    wm                 0            0                0    
  8   reserved    wm        2576924638         8.00MB           2576941021
Do you wish to continue creating a new partition
table based on above table[yes]? <tt><b>y</b></tt>
Free Hog partition[6]? <tt><b>4</b></tt>
Enter size of partition 0 [0b, 34e, 0mb, 0gb, 0tb]: 
Enter size of partition 1 [0b, 34e, 0mb, 0gb, 0tb]: 
Enter size of partition 2 [0b, 34e, 0mb, 0gb, 0tb]: <tt><b>400gb</b></tt>
Enter size of partition 3 [0b, 838860834e, 0mb, 0gb, 0tb]: <tt><b>400gb</b></tt>
Enter size of partition 5 [0b, 1677721634e, 0mb, 0gb, 0tb]: 
Enter size of partition 6 [0b, 1677721634e, 0mb, 0gb, 0tb]: 
Part      Tag    Flag     First Sector          Size          Last Sector
  0 unassigned    wm                 0            0                0    
  1 unassigned    wm                 0            0                0    
  2        usr    wm                34       400.00GB           838860833
  3        usr    wm         838860834       400.00GB           1677721633
  4        usr    wm        1677721634       428.77GB           2576924637
  5 unassigned    wm                 0            0                0    
  6 unassigned    wm                 0            0                0    
  8   reserved    wm        2576924638         8.00MB           2576941021
Ready to label disk, continue? <tt><b>yes</b></tt>

partition> <tt><b>q</b></tt></pre><h6><h6>More Information</h6>After You Create Disk Slices and Label a Disk ...<p>After you create disk slices and label the disk, you can create
file systems on the disk. Go to <a href="#diskssadd-40446">SPARC: How to Create a UFS File System</a>.</p></h6>

<a name="diskssadd-40446"></a><h4>SPARC: How to Create a UFS File System</h4><ol>
<li><a name="diskssadd-step-40"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="diskssadd-step-41"></a><b>Create a file system for each slice.</b><pre># <tt><b>newfs</b></tt> /dev/rdsk/c<i>w</i>t<i>x</i>d<i>y</i>s<i>z</i></pre><p>where <tt>/dev/rdsk/c</tt><i>w</i>t<i>x</i>d<i>y</i>s<i>x</i> is the raw device for the file system to be created.</p><p>For more information about the <tt>newfs</tt> command, see <a href="fscreate-96442.html">Chapter&nbsp;18, Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a> or <a href="http://docs.sun.com/doc/819-2240/newfs-1m?a=view"><tt>newfs</tt>(1M)</a>.</p></li>
<li><a name="diskssadd-step-50"></a><b>Verify the new file system by mounting it.</b><pre># <tt><b>mount</b></tt> /dev/dsk/c<i>w</i>t<i>x</i>d<i>y</i>s<i>z</i> <tt><b>/mnt</b></tt>
# <tt><b>ls</b></tt> 
lost+found</pre></li></ol><h6><h6>More Information</h6>After Creating a UFS File System ...
<ul><li><p><b>System Disk</b> &ndash; You need to restore the root (<tt>/</tt>) and <tt>/usr</tt> file systems on the disk.</p>
<ul><li><p>Go to <a href="bkuprestoretasks-38055.html">Chapter&nbsp;27, Restoring Files and File Systems (Tasks)</a>.</p></li>
<li><p>After the root (<tt>/</tt>) and <tt>/usr</tt> file systems are restored, install the boot block. Go to <a href="#diskssadd-43588">SPARC: How to Install a Boot Block on a System Disk</a>.</p></li></ul>
</li>
<li><p><b>Secondary Disk</b> &ndash; You might need to restore file systems on the new disk. Go to <a href="bkuprestoretasks-38055.html">Chapter&nbsp;27, Restoring Files and File Systems (Tasks)</a>. If you are not restoring file systems on the new disk, you are finished adding a secondary disk.</p></li>
<li><p>For information on making the file systems available to users, see <a href="fsmount-42780.html">Chapter&nbsp;19, Mounting and Unmounting File Systems (Tasks)</a>.</p></li></ul>
</h6>

<a name="diskssadd-43588"></a><h4>SPARC: How to Install a Boot Block on a System Disk</h4><ol>
<li><a name="diskssadd-step-44"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="diskssadd-step-45"></a><b><a name="diskssadd-ix2527"></a><a name="diskssadd-ix2528"></a>Install a boot block on the system disk.  </b><pre># <tt><b>installboot /usr/platform/`uname -i`/lib/fs/ufs/bootblk</b></tt>
<tt><b>/dev/rdsk/</b></tt><i>cwtxdy</i><tt><b>s0</b></tt></pre><dl><dt><tt>/usr/platform/`uname -i`/lib/fs /ufs/bootblk</tt></dt>
<dd><p>Is the boot block code.</p></dd>
<dt><tt>/dev/rdsk/</tt><i>cwtxdy</i><tt>s0</tt></dt>
<dd><p>Is the raw device of the root (<tt>/</tt>) file system.</p></dd>
</dl>
<p>For more information, see <a href="http://docs.sun.com/doc/819-2240/installboot-1m?a=view"><tt>installboot</tt>(1M)</a>.</p></li>
<li><a name="diskssadd-step-51"></a><b>Verify that the boot blocks are installed by rebooting the system to run
level 3.</b><pre># <tt><b>init 6</b></tt></pre></li></ol><a name="diskssadd-47"></a>Example&nbsp;12-3 SPARC: Installing a Boot Block on a System Disk<p>The following example shows how to install the boot block on an
Ultra<sup>TM</sup> 10 system. </p><pre># <tt><b>installboot /usr/platform/sun4u/lib/fs/ufs/bootblk</b></tt>
<tt><b>/dev/rdsk/c0t0d0s0</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="diskssadd-16103.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksxadd-38159.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

