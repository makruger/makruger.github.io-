<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Copying Files to Tape With the <tt>cpio</tt> Command - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupsavefiles-47.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupsavefiles-130.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level2"><a href="bkupsavefiles-1.html">Commands for Copying File Systems</a></p>
<p class="toc level2"><a href="bkupsavefiles-2.html">Copying File Systems Between Disks</a></p>
<p class="toc level3"><a href="bkupsavefiles-2.html#bkupsavefiles-60904">How to Copy a Disk (<tt>dd</tt>)</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-21.html">Copying Directories Between File Systems (<tt>cpio</tt> Command)</a></p>
<p class="toc level3"><a href="bkupsavefiles-21.html#bkupsavefiles-14144">How to Copy Directories Between File Systems (<tt>cpio</tt>)</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-38276.html">Copying Files and File Systems to Tape</a></p>
<p class="toc level2"><a href="bkupsavefiles-30.html">Copying Files to Tape (<tt>tar</tt> Command)</a></p>
<p class="toc level3"><a href="bkupsavefiles-30.html#bkupsavefiles-22962">How to Copy Files to a Tape (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-30.html#bkupsavefiles-18134">How to List the Files on a Tape (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-30.html#bkupsavefiles-30917">How to Retrieve Files From a Tape (<tt>tar</tt>)</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-47.html">Copying Files to a Tape With the <tt>pax</tt> Command</a></p>
<p class="toc level3"><a href="bkupsavefiles-47.html#bkupsavefiles-48">How to Copy Files to a Tape (<tt>pax</tt>)</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Copying Files to Tape With the <tt>cpio</tt> Command</a></p>
<p class="toc level3"><a href="#bkupsavefiles-85934">How to Copy All Files in a Directory to a Tape (<tt>cpio</tt>)</a></p>
<p class="toc level3"><a href="#bkupsavefiles-30690">How to List the Files on a Tape (<tt>cpio</tt>)</a></p>
<p class="toc level3"><a href="#bkupsavefiles-66148">How to Retrieve All Files From a Tape (<tt>cpio</tt>)</a></p>
<p class="toc level3"><a href="#bkupsavefiles-86108">How to Retrieve Specific Files From a Tape (<tt>cpio</tt>)</a></p>
</div>
<p class="toc level2 tocsp"><a href="bkupsavefiles-130.html">Copying Files to a Remote Tape Device</a></p>
<p class="toc level3"><a href="bkupsavefiles-130.html#bkupsavefiles-17981">How to Copy Files to a Remote Tape Device (<tt>tar</tt> and <tt>dd</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-130.html#bkupsavefiles-74428">How to Extract Files From a Remote Tape Device</a></p>
<p class="toc level2 tocsp"><a href="bkupsavefiles-60201.html">Copying Files and File Systems to Diskette</a></p>
<p class="toc level3"><a href="bkupsavefiles-60201.html#bkupsavefiles-84545">How to Copy Files to a Single Formatted Diskette (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-60201.html#bkupsavefiles-78890">How to List the Files on a Diskette (<tt>tar</tt>)</a></p>
<p class="toc level3"><a href="bkupsavefiles-60201.html#bkupsavefiles-53640">How to Retrieve Files From a Diskette (<tt>tar</tt>)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="bkupsavefiles-129"></a><h3>Copying Files to Tape With the <tt>cpio</tt> Command</h3>


<a name="bkupsavefiles-85934"></a><h4>How to Copy All Files in a Directory to a Tape (<tt>cpio</tt>)</h4><ol>
<li><a name="bkupsavefiles-step-1"></a><b>Change to the directory that contains the files you want to copy.</b></li>
<li><a name="bkupsavefiles-step-57"></a><b>Insert a write-enabled tape into the tape drive.</b></li>
<li><a name="bkupsavefiles-step-58"></a><b>Copy the files to tape.</b><pre>$ <tt><b>ls | cpio -oc > /dev/rmt/</b></tt><i>n</i></pre><dl><dt><tt>ls</tt></dt>
<dd><p>Provides the <tt>cpio</tt> command with a list of file names.</p></dd>
<dt><tt>cpio -oc</tt></dt>
<dd><p>Specifies that the <tt>cpio</tt> command should operate in copy-out mode (<tt>-o</tt>) and write header information in ASCII character format (<tt>-c</tt>). These options ensure portability to other vendors' systems.</p></dd>
<dt><tt>> /dev/rmt/</tt><i>n</i></dt>
<dd><p>Specifies the output file.</p></dd>
</dl>
<p>All files in the directory are copied to the tape in the
drive you specify, overwriting any existing files on the tape. The total number
of blocks that are copied is shown.</p></li>
<li><a name="bkupsavefiles-step-119"></a><b>Verify that the files have been copied to tape.</b><pre>$ <tt><b>cpio -civt &lt; /dev/rmt/</b></tt><i>n</i></pre><dl><dt><tt>-c</tt></dt>
<dd><p>Specifies that the <tt>cpio</tt> command should read files in ASCII character format.</p></dd>
<dt><tt>-i</tt></dt>
<dd><p>Specifies that the <tt>cpio</tt> command should operate in copy-in mode, even though the command is only listing files at this point.</p></dd>
<dt><tt>-v</tt></dt>
<dd><p>Displays the output in a format that is similar to the output from the <tt>ls -l</tt> command.</p></dd>
<dt><tt>-t</tt></dt>
<dd><p>Lists the table of contents for the files on the tape in the tape drive that you specify.</p></dd>
<dt><tt>&lt; /dev/rmt/</tt><i>n</i></dt>
<dd><p>Specifies the input file of an existing <tt>cpio</tt> archive.</p></dd>
</dl>
</li>
<li><a name="bkupsavefiles-step-59"></a><b>Remove the tape from the drive. Write the names of the files on
the tape label.</b></li></ol><a name="fncrz"></a>Example&nbsp;29-8 Copying All Files in a Directory to a Tape (<tt>cpio</tt>)<p>The following example shows how to copy all of the files in
the <tt>/export/home/kryten</tt> directory to the tape in tape drive 0.</p><pre>$ <tt><b>cd /export/home/kryten</b></tt>
$ <tt><b>ls | cpio -oc > /dev/rmt/0</b></tt>
16 blocks
$ <tt><b>cpio -civt &lt; /dev/rmt/0</b></tt>
-rw-r--r--    1 root     other          0 Jul 28 14:59 2004, filea
-rw-r--r--    1 root     other          0 Jul 28 14:59 2004, fileb
-rw-r--r--    1 root     other          0 Jul 28 14:59 2004, filec
drwxr-xr-x    2 root     other          0 Jul 28 14:59 2004, letters
drwxr-xr-x    2 root     other          0 Jul 28 15:00 2004, reports
16 blocks
$</pre>

<a name="bkupsavefiles-30690"></a><h4>How to List the Files on a Tape (<tt>cpio</tt>)</h4>
<hr><p><b>Note - </b>Listing the table of contents on a tape takes a long time
because the <tt>cpio</tt> command must process the entire archive.</p>
<hr>
<ol>
<li><a name="bkupsavefiles-step-63"></a><b>Insert an archive tape into the tape drive.</b></li>
<li><a name="bkupsavefiles-step-64"></a><b><a name="bkupsavefiles-ix3164"></a>List the files on the tape. </b><pre>$ <tt><b>cpio -civt &lt; /dev/rmt/</b></tt><i>n</i></pre></li></ol><a name="fncsi"></a>Example&nbsp;29-9 Listing the Files on a Tape (<tt>cpio</tt>)<p>The following example shows how to list the files on the tape
in drive 0.</p><pre>$ <tt><b>cpio -civt &lt; /dev/rmt/0</b></tt>
-rw-r--r--    1 root     other          0 Jul 28 14:59 2004, filea
-rw-r--r--    1 root     other          0 Jul 28 14:59 2004, fileb
-rw-r--r--    1 root     other          0 Jul 28 14:59 2004, filec
drwxr-xr-x    2 root     other          0 Jul 28 14:59 2004, letters
drwxr-xr-x    2 root     other          0 Jul 28 15:00 2004, reports
16 blocks
$</pre>

<a name="bkupsavefiles-66148"></a><h4>How to Retrieve All Files From a Tape (<tt>cpio</tt>)</h4><p>If the archive was created using relative path names, the input files are
built as a directory within the current directory when you retrieve the files.
If, however, the archive was created with absolute path names, the same absolute
paths are used to re-create the file on your system.</p>
<hr><p><b>Caution - </b>The use of absolute path names can be dangerous because you might overwrite
existing files on your system.</p>
<hr>
<ol>
<li><a name="bkupsavefiles-step-67"></a><b>Change to the directory where you want to put the files.</b></li>
<li><a name="bkupsavefiles-step-68"></a><b>Insert the tape into the tape drive.</b></li>
<li><a name="bkupsavefiles-step-69"></a><b><a name="bkupsavefiles-ix3168"></a>Extract all files from the tape. </b><pre>$ <tt><b>cpio -icvd &lt; /dev/rmt/</b></tt><i>n</i></pre><dl><dt><tt>-i</tt></dt>
<dd><p>Extracts files from standard input.</p></dd>
<dt><tt>-c</tt></dt>
<dd><p>Specifies that the <tt>cpio</tt> command should read files in ASCII character format.</p></dd>
<dt><tt>-v</tt></dt>
<dd><p>Displays the files as they are retrieved in a format that is similar to the output from the <tt>ls</tt> command.</p></dd>
<dt><tt>-d</tt></dt>
<dd><p>Creates directories as needed.</p></dd>
<dt><tt>&lt; /dev/rmt/</tt><i>n</i></dt>
<dd><p>Specifies the output file.</p></dd>
</dl>
</li>
<li><a name="bkupsavefiles-step-120"></a><b>Verify that the files were copied.</b><pre>$ <tt><b>ls -l</b></tt></pre></li></ol><a name="fncsc"></a>Example&nbsp;29-10 Retrieving All Files From a Tape (<tt>cpio</tt>)<p>The following example shows how to retrieve all files from the tape in
drive 0.</p><pre>$ <tt><b>cd /var/tmp</b></tt>
<tt><b>cpio -icvd &lt; /dev/rmt/0</b></tt>
answers 
sc.directives 
tests
8 blocks
$ <tt><b>ls -l</b></tt></pre>

<a name="bkupsavefiles-86108"></a><h4>How to Retrieve Specific Files From a Tape (<tt>cpio</tt>)</h4><ol>
<li><a name="bkupsavefiles-step-72"></a><b>Change to the directory where you want to put the files.</b></li>
<li><a name="bkupsavefiles-step-73"></a><b>Insert the tape into the tape drive.</b></li>
<li><a name="bkupsavefiles-step-74"></a><b>Retrieve a subset of files from the tape.</b><pre>$ <tt><b>cpio -icv "</b></tt><i>*file</i><tt><b>" &lt; /dev/rmt/</b></tt><i>n</i></pre><dl><dt><tt>-i</tt></dt>
<dd><p>Extracts files from standard input.</p></dd>
<dt><tt>-c</tt></dt>
<dd><p>Specifies that the <tt>cpio</tt> command should read headers in ASCII character format.</p></dd>
<dt><tt>-v</tt></dt>
<dd><p>Displays the files as they are retrieved in a format that is similar to the output from the <tt>ls</tt> command.</p></dd>
<dt><tt>"*</tt><i>file</i><tt>"</tt></dt>
<dd><p>Specifies that all files that match the pattern are copied to the current directory. You can specify multiple patterns, but each pattern must be enclosed in double quotation marks.</p></dd>
<dt><tt>&lt; /dev/rmt/</tt><i>n</i></dt>
<dd><p>Specifies the input file.</p></dd>
</dl>
<p>For more information, see the <a href="http://docs.sun.com/doc/819-2239/cpio-1?a=view"><tt>cpio</tt>(1)</a> man page.</p></li>
<li><a name="bkupsavefiles-step-126"></a><b>Verify that the files were copied.</b><pre>$ <tt><b>ls -l</b></tt></pre></li></ol><a name="fncrv"></a>Example&nbsp;29-11 Retrieving Specific Files From a Tape (<tt>cpio</tt>)<p>The following example shows how to retrieve all files with the <tt>chapter</tt>
suffix from the tape in drive 0.</p><pre>$ <tt><b>cd /home/smith/Book</b></tt>
$ <tt><b>cpio -icv "*chapter" &lt; /dev/rmt/0</b></tt>
Boot.chapter 
Directory.chapter 
Install.chapter 
Intro.chapter
31 blocks
$ <tt><b>ls -l</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupsavefiles-47.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupsavefiles-130.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

