<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>SCSI Hot-Plugging With the <tt>cfgadm</tt> Command - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devconfig2-120.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devconfig2-121.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level2"><a href="devconfig2-6.html">Dynamic Reconfiguration and Hot-Plugging</a></p>
<p class="toc level2"><a href="devconfig2-120.html">SCSI Hot-Plugging With the <tt>cfgadm</tt> Command (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">SCSI Hot-Plugging With the <tt>cfgadm</tt> Command</a></p>
<p class="toc level3"><a href="#devconfig2-9">How to Display Information About SCSI Devices</a></p>
<p class="toc level3"><a href="#devconfig2-10">How to Unconfigure a SCSI Controller</a></p>
<p class="toc level3"><a href="#devconfig2-11">How to Configure a SCSI Controller</a></p>
<p class="toc level3"><a href="#devconfig2-12">How to Configure a SCSI Device</a></p>
<p class="toc level3"><a href="#devconfig2-13">How to Disconnect a SCSI Controller</a></p>
<p class="toc level3"><a href="#devconfig2-14">SPARC: How to Connect a SCSI Controller</a></p>
<p class="toc level3"><a href="#devconfig2-15">SPARC: How to Add a SCSI Device to a SCSI Bus</a></p>
<p class="toc level3"><a href="#devconfig2-57">SPARC: How to Replace an Identical Device on a SCSI Controller</a></p>
<p class="toc level3"><a href="#devconfig2-58">SPARC: How to Remove a SCSI Device</a></p>
<p class="toc level3"><a href="#devconfig2-90">How to Resolve a Failed SCSI Unconfigure Operation</a></p>
</div>
<p class="toc level2 tocsp"><a href="devconfig2-121.html">PCI or PCIe Hot-Plugging With the <tt>cfgadm</tt> Command (Task Map)</a></p>
<p class="toc level2"><a href="devconfig2-49.html">PCI or PCIe Hot-Plugging With the <tt>cfgadm</tt> Command</a></p>
<p class="toc level3"><a href="devconfig2-49.html#devconfig2-51">How to Display PCI Slot Configuration Information</a></p>
<p class="toc level3"><a href="devconfig2-49.html#devconfig2-54">How to Remove a PCI Adapter Card</a></p>
<p class="toc level3"><a href="devconfig2-49.html#devconfig2-55">How to Add a PCI Adapter Card</a></p>
<p class="toc level2 tocsp"><a href="devconfig2-2.html">Reconfiguration Coordination Manager (RCM) Script Overview</a></p>
<p class="toc level2"><a href="devconfig2-19.html">RCM Script Tasks</a></p>
<p class="toc level3"><a href="devconfig2-19.html#devconfig2-37">How to Install an RCM Script</a></p>
<p class="toc level3"><a href="devconfig2-19.html#devconfig2-42">How to Remove an RCM Script</a></p>
<p class="toc level3"><a href="devconfig2-19.html#devconfig2-43">How to Test an RCM Script</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="devconfig2-8"></a><h3>SCSI Hot-Plugging With the <tt>cfgadm</tt> Command</h3>
<p>This section describes various SCSI hot-plugging procedures that you can perform with the
<tt>cfgadm</tt> command.</p>
<hr><p><b>Note - </b>The SCSI framework generally supports hot-plugging of SCSI devices. However, you should consult
your hardware documentation to confirm whether hot-plugging is supported for your SCSI devices.</p>
<hr>
<p>These procedures use specific devices as examples to illustrate how to use the
<tt>cfgadm</tt> command to hot-plug SCSI components. The device information that you supply, and
that the <tt>cfgadm</tt> command displays, depends on your system configuration.</p>

<a name="devconfig2-9"></a><h4>How to Display Information About SCSI Devices</h4><p>The following procedure uses SCSI controllers <tt>c0</tt> and <tt>c1</tt> and the devices
that are attached to them in the examples of the type of device
configuration information that you can display with the <tt>cfgadm</tt> command.</p>
<hr><p><b>Note - </b>If the SCSI device is not supported by the <tt>cfgadm</tt> command, the device
does not display in the <tt>cfgadm</tt> command output.</p>
<hr>
<ol>
<li><a name="devconfig2-step-20"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-21"></a><b>Display information about attachment points on the system.<a name="indexterm-61"></a><a name="indexterm-62"></a></b><pre># <tt><b>cfgadm -l</b></tt>
Ap_Id                Type         Receptacle   Occupant     Condition
c0                   scsi-bus     connected    configured   unknown
c1                   scsi-bus     connected    configured   unknown</pre><p>In this example, <tt>c0</tt> and <tt>c1</tt> represent two SCSI controllers.</p></li>
<li><a name="devconfig2-step-22"></a><b>Display information about a system's SCSI controllers and their attached devices.  </b><pre># <tt><b>cfgadm -al</b></tt> 
Ap_Id                Type         Receptacle   Occupant     Condition
c0                   scsi-bus     connected    configured   unknown
c0::dsk/c0t0d0       disk         connected    configured   unknown
c0::rmt/0            tape         connected    configured   unknown
c1                   scsi-bus     connected    configured   unknown
c1::dsk/c1t3d0       disk         connected    configured   unknown
c1::dsk/c1t4d0       unavailable  connected    unconfigured unknown</pre>
<hr><p><b>Note - </b>The <tt>cfgadm -l</tt> commands displays information about SCSI HBAs but not SCSI devices. Use
the <tt>cfgadm -al</tt> command to display information about SCSI devices such as disk and
tapes.</p>
<hr>
</li></ol>

<a name="devconfig2-10"></a><h4>How to Unconfigure a SCSI Controller</h4><p>The following procedure uses SCSI controller <tt>c1</tt> in the example of unconfiguring a
SCSI controller.</p><ol>
<li><a name="devconfig2-step-23"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-24"></a><b>Unconfigure a SCSI controller.<a name="indexterm-63"></a><a name="indexterm-64"></a><a name="indexterm-65"></a></b><pre># <tt><b>cfgadm -c unconfigure c1</b></tt></pre></li>
<li><a name="devconfig2-step-25"></a><b>Verify that the SCSI controller is unconfigured.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                 Type         Receptacle   Occupant     Condition
c0                    scsi-bus     connected    configured   unknown
c0::dsk/c0t0d0        disk         connected    configured   unknown
c0::rmt/0             tape         connected    configured   unknown
c1                    scsi-bus     connected    unconfigured unknown</pre><p>Notice that the <tt>Occupant</tt> column for <tt>c1</tt> specifies <tt>unconfigured</tt>, indicating that the
SCSI bus has no configured occupants.</p><p>If the unconfigure operation fails, see <a href="#devconfig2-90">How to Resolve a Failed SCSI Unconfigure Operation</a>.</p></li></ol>

<a name="devconfig2-11"></a><h4>How to Configure a SCSI Controller</h4><p>The following procedure uses SCSI controller <tt>c1</tt> in the example of configuring a
SCSI controller.</p><ol>
<li><a name="devconfig2-step-26"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-27"></a><b>Configure a SCSI controller.<a name="indexterm-66"></a><a name="indexterm-67"></a><a name="indexterm-68"></a></b><pre># <tt><b>cfgadm -c configure c1</b></tt></pre></li>
<li><a name="devconfig2-step-28"></a><b>Verify that the SCSI controller is configured.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type         Receptacle   Occupant     Condition
c0                   scsi-bus     connected    configured   unknown
c0::dsk/c0t0d0       disk         connected    configured   unknown
c0::rmt/0            tape         connected    configured   unknown
c1                   scsi-bus     connected    configured   unknown
c1::dsk/c1t3d0       disk         connected    configured   unknown
c1::dsk/c1t4d0       unavailable  connected    unconfigured unknown</pre><p>The previous unconfigure procedure removed all devices on the SCSI bus. Now all
the devices are configured back into the system.</p></li></ol>

<a name="devconfig2-12"></a><h4>How to Configure a SCSI Device</h4><p>The following procedure uses SCSI disk <tt>c1t4d0</tt> in the example of configuring a
SCSI device.</p><ol>
<li><a name="devconfig2-step-29"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-30"></a><b>Identify the device to be configured.<a name="indexterm-69"></a><a name="indexterm-70"></a><a name="indexterm-71"></a></b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       unavailable   connected    unconfigured unknown</pre></li>
<li><a name="devconfig2-step-31"></a><b>Configure the SCSI device.</b><pre># <tt><b>cfgadm -c configure c1::dsk/c1t4d0</b></tt></pre></li>
<li><a name="devconfig2-step-32"></a><b>Verify that the SCSI device is configured.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       disk          connected    configured   unknown</pre></li></ol>

<a name="devconfig2-13"></a><h4>How to Disconnect a SCSI Controller</h4>
<hr><p><b>Caution - </b><a name="indexterm-72"></a><a name="indexterm-73"></a><a name="indexterm-74"></a>Disconnecting a SCSI device must be done with caution, particularly when you are
dealing with controllers for disks that contain critical file systems such as root
(<tt>/</tt>), <tt>usr</tt>, <tt>var</tt>, and the <tt>swap</tt> partition. The dynamic reconfiguration software cannot detect
all cases where a system hang might result. Use this procedure with caution.</p>
<hr>
<p>The following procedure uses SCSI controller <tt>c1</tt> in the example of disconnecting a
SCSI device.</p><ol>
<li><a name="devconfig2-step-33"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-34"></a><b>Verify that the device is connected before you disconnect it.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       disk          connected    configured   unknown</pre></li>
<li><a name="devconfig2-step-35"></a><b>Disconnect the SCSI controller.</b><pre># <tt><b>cfgadm -c disconnect c1</b></tt>
WARNING: Disconnecting critical partitions may cause system hang.
Continue (yes/no)? <tt><b>y</b></tt></pre>
<hr><p><b>Caution - </b>This command suspends all I/O activity on the SCSI bus until the <tt>cfgadm -c connect</tt>
command is used. The <tt>cfgadm</tt> command does some basic checking to prevent critical
partitions from being disconnected, but it cannot detect all cases. Inappropriate use of
this command can result in a system hang and could require a system
reboot. </p>
<hr>
</li>
<li><a name="devconfig2-step-36"></a><b>Verify that the SCSI bus is disconnected.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   unavailable   disconnected configured   unknown
c1::dsk/c1t3d0       unavailable   disconnected configured   unknown
c1::dsk/c1t4d0       unavailable   disconnected configured   unknown</pre><p>The controller and all the devices that are attached to it are
disconnected from the system.</p></li></ol>

<a name="devconfig2-14"></a><h4>SPARC: How to Connect a SCSI Controller</h4><p>The following procedure uses SCSI controller <tt>c1</tt> in the example of connecting a
SCSI controller.</p><ol>
<li><a name="devconfig2-step-37"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-38"></a><b>Verify that the device is disconnected before you connect it.<a name="indexterm-75"></a><a name="indexterm-76"></a><a name="indexterm-77"></a></b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   unavailable   disconnected configured   unknown
c1::dsk/c1t3d0       unavailable   disconnected configured   unknown
c1::dsk/c1t4d0       unavailable   disconnected configured   unknown</pre></li>
<li><a name="devconfig2-step-39"></a><b>Connect the SCSI controller.</b><pre># <tt><b>cfgadm -c connect c1</b></tt></pre></li>
<li><a name="devconfig2-step-40"></a><b>Verify that the SCSI controller is connected.</b><pre># <tt><b>cfgadm -al</b></tt> 
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       disk          connected    configured   unknown</pre></li></ol>

<a name="devconfig2-15"></a><h4>SPARC: How to Add a SCSI Device to a SCSI Bus</h4><p>SCSI controller <tt>c1</tt> is used in the example of how to add a
SCSI device to a SCSI bus.</p>
<hr><p><b>Note - </b>When you add devices, you specify the <tt>Ap_Id</tt> of the SCSI HBA (controller)
to which the device is attached, not the <tt>Ap_Id</tt> of the device
itself.</p>
<hr>
<ol>
<li><a name="devconfig2-step-41"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-42"></a><b>Identify the current SCSI configuration.<a name="indexterm-78"></a><a name="indexterm-79"></a><a name="indexterm-80"></a></b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown</pre></li>
<li><a name="devconfig2-step-43"></a><b>Add the SCSI device to the SCSI bus.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Type the following <tt>cfgadm</tt> command.</b><p>For example:</p><pre># <tt><b>cfgadm -x insert_device c1</b></tt>
Adding device to SCSI HBA: /devices/sbus@1f,0/SUNW,fas@1,8800000
This operation will suspend activity on SCSI bus: c1</pre></li>
<li><a name="devconfig2-step-60"></a><b>Type <tt><b>y</b></tt> at the <tt>Continue (yes/no)?</tt> prompt to proceed.</b><pre>Continue (yes/no)? <tt><b>y</b></tt>
SCSI bus quiesced successfully.
It is now safe to proceed with hotplug operation.</pre><p>I/O activity on the SCSI bus is suspended while the hot-plug operation is
in progress.</p></li>
<li><a name="devconfig2-step-61"></a><b>Connect the device and then power it on.</b></li>
<li><a name="devconfig2-step-62"></a><b>Type <tt><b>y</b></tt> at the <tt>Enter y if operation is complete or n to abort (yes/no)?</tt> prompt.</b><pre>Enter y if operation is complete or n to abort (yes/no)? <tt><b>y</b></tt></pre></li></ol></li>
<li><a name="devconfig2-step-45"></a><b>Verify that the device has been added.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       disk          connected    configured   unknown</pre><p>A new disk has been added to controller <tt>c1</tt>.</p></li></ol>

<a name="devconfig2-57"></a><h4>SPARC: How to Replace an Identical Device on a SCSI Controller</h4><p>The following procedure uses SCSI disk <tt>c1t4d0</tt> in the example of replacing an
identical device on a SCSI controller.</p><ol>
<li><a name="devconfig2-step-46"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-54"></a><b>Identify the current SCSI configuration.<a name="indexterm-81"></a><a name="indexterm-82"></a><a name="indexterm-83"></a></b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       disk          connected    configured   unknown</pre></li>
<li><a name="devconfig2-step-57"></a><b>Replace a device on the SCSI bus with another device of the same
type.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Type the following <tt>cfgadm</tt> command.</b><p>For example:</p><pre># <tt><b>cfgadm -x replace_device c1::dsk/c1t4d0</b></tt>
Replacing SCSI device: /devices/sbus@1f,0/SUNW,fas@1,8800000/sd@4,0
This operation will suspend activity on SCSI bus: c1</pre></li>
<li><a name="devconfig2-step-63"></a><b>Type <tt><b>y</b></tt> at the <tt>Continue (yes/no)?</tt> prompt to proceed.</b><p>I/O activity on the SCSI bus is suspended while the hot-plug operation is
in progress.</p><pre>Continue (yes/no)? <tt><b>y</b></tt>
SCSI bus quiesced successfully.
It is now safe to proceed with hotplug operation.</pre></li>
<li><a name="devconfig2-step-64"></a><b>Power off the device to be removed and remove it. </b></li>
<li><a name="devconfig2-step-122"></a><b>Add the replacement device. Then, power it on.</b><p>The replacement device should be of the same type and at the same
address (target and lun) as the device to be removed.</p></li>
<li><a name="devconfig2-step-65"></a><b>Type <tt><b>y</b></tt> at the <tt>Enter y if operation is complete or n to abort (yes/no)?</tt> prompt.</b><pre>Enter y if operation is complete or n to abort (yes/no)? <tt><b>y</b></tt></pre></li></ol></li>
<li><a name="devconfig2-step-50"></a><b>Verify that the device has been replaced.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       disk          connected    configured   unknown</pre></li></ol>

<a name="devconfig2-58"></a><h4>SPARC: How to Remove a SCSI Device</h4><p>The following procedure uses SCSI disk <tt>c1t4d0</tt> in the example of removing a
device on a SCSI controller.</p><ol>
<li><a name="devconfig2-step-51"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-52"></a><b>Identify the current SCSI configuration.<a name="indexterm-84"></a><a name="indexterm-85"></a><a name="indexterm-86"></a></b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown
c1::dsk/c1t4d0       disk          connected    configured   unknown</pre></li>
<li><a name="devconfig2-step-53"></a><b>Remove the SCSI device from the system.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Type the following <tt>cfgadm</tt> command.</b><p>For example:</p><pre># <tt><b>cfgadm -x remove_device c1::dsk/c1t4d0</b></tt>
Removing SCSI device: /devices/sbus@1f,0/SUNW,fas@1,8800000/sd@4,0
This operation will suspend activity on SCSI bus: c1</pre></li>
<li><a name="devconfig2-step-66"></a><b>Type <tt><b>y</b></tt> at the <tt>Continue (yes/no)?</tt> prompt to proceed.</b><pre>Continue (yes/no)? <tt><b>y</b></tt>
SCSI bus quiesced successfully.
It is now safe to proceed with hotplug operation.</pre><p>I/O activity on the SCSI bus is suspended while the hot-plug operation is
in progress.</p></li>
<li><a name="devconfig2-step-67"></a><b>Power off the device to be removed and remove it.</b></li>
<li><a name="devconfig2-step-68"></a><b>Type <tt><b>y</b></tt> at the <tt>Enter y if operation is complete or n to abort (yes/no)?</tt> prompt.</b><pre>Enter y if operation is complete or n to abort (yes/no)? <tt><b>y</b></tt></pre></li></ol>
<hr><p><b>Note - </b>Note: This step must be performed if you are removing a SCSI
RAID device from a SCSI RAID array.</p>
<hr>
</li>
<li><a name="devconfig2-step-55"></a><b>Verify that the device has been removed from the system.</b><pre># <tt><b>cfgadm -al</b></tt>
Ap_Id                Type          Receptacle   Occupant     Condition
c0                   scsi-bus      connected    configured   unknown
c0::dsk/c0t0d0       disk          connected    configured   unknown
c0::rmt/0            tape          connected    configured   unknown
c1                   scsi-bus      connected    configured   unknown
c1::dsk/c1t3d0       disk          connected    configured   unknown</pre></li></ol>

<a name="devconfig2-89"></a><h4>Troubleshooting SCSI Configuration Problems</h4>
<p><a name="indexterm-87"></a><a name="indexterm-88"></a>This section provides error messages and possible solutions for troubleshooting SCSI configuration problems. For
more information on troubleshooting SCSI configuration problems, see <a href="http://docs.sun.com/doc/819-2240/cfgadm-1m?a=view"><tt>cfgadm</tt>(1M)</a>.</p><dl><dt>Error Message</dt>
<dd><pre>cfgadm: Component system is busy, try again: failed to offline:
     <i>device-path</i>
          Resource              Information
     ------------------  --------------------------
     /dev/dsk/c1t0d0s0   mounted filesystem "/<i>file-system</i>"</pre></dd>
<dt>Cause</dt>
<dd><p>You attempted to remove or replace a device with a mounted file system.</p></dd>
<dt>Solution</dt>
<dd><p>Unmount the file system that is listed in the error message and retry the <tt>cfgadm</tt> operation.</p></dd>
</dl>
<dl><dt>Error Message</dt>
<dd><pre>cfgadm: Component system is busy, try again: failed to offline:
     <i>device-path</i>
          Resource              Information
     ------------------  --------------------------
     /dev/dsk/<i>device-name</i>   swap area</pre></dd>
<dt>Cause</dt>
<dd><p>If you use the <tt>cfgadm</tt> command to remove a system resource, such as a swap device or a dedicated dump device, a similar error message is displayed if the system resource is still active.</p></dd>
<dt>Solution</dt>
<dd><p>Unconfigure the swap areas on the device that is specified and retry the <tt>cfgadm</tt> operation.</p></dd>
<dt>Error Message</dt>
<dd><pre>cfgadm: Component system is busy, try again: failed to offline:
     <i>device-path</i>
          Resource              Information
     ------------------  --------------------------
     /dev/dsk/<i>device-name</i>   dump device (swap)</pre></dd>
<dt>Cause</dt>
<dd><p>You attempted to remove or replace a dump device that is configured on a swap area.</p></dd>
<dt>Solution</dt>
<dd><p>Unconfigure the dump device that is configured on the swap area and retry the <tt>cfgadm</tt> operation.</p></dd>
<dt>Error Message</dt>
<dd><pre>cfgadm: Component system is busy, try again: failed to offline:
     <i>device-path</i>
          Resource              Information
     ------------------  --------------------------
     /dev/dsk/<i>device-name</i>   dump device (dedicated)</pre></dd>
<dt>Cause</dt>
<dd><p>You attempted to remove or replace a dedicated dump device.</p></dd>
<dt>Solution</dt>
<dd><p>Unconfigure the dedicate dump device and retry the <tt>cfgadm</tt> operation.</p></dd>
</dl>


<a name="devconfig2-90"></a><h4>How to Resolve a Failed SCSI Unconfigure Operation</h4><p>Use this procedure if one or more target devices are busy and
the SCSI unconfigure operation fails.  Otherwise, future dynamic reconfiguration operations on this controller
and target devices will fail with a <tt>dr in progress</tt> message.</p><ol>
<li><a name="devconfig2-step-92"></a><b>Become superuser.</b></li>
<li><a name="devconfig2-step-93"></a><b><a name="indexterm-89"></a><a name="indexterm-90"></a><a name="indexterm-91"></a>Reconfigure the controller.</b><pre># <tt><b>cfgadm -c configure</b></tt> <i>device-name</i></pre></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devconfig2-120.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devconfig2-121.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

