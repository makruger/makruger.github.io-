<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>UFS Snapshots Overview - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupsnapshot-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupsnapshot-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level2"><a href="bkupsnapshot-1.html">Using UFS Snapshots (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">UFS Snapshots Overview</a></p>
</div>
<p class="toc level2"><a href="bkupsnapshot-5.html">Creating and Deleting UFS Snapshots</a></p>
<p class="toc level3"><a href="bkupsnapshot-5.html#bkupsnapshot-6">How to Create a UFS Snapshot</a></p>
<p class="toc level3"><a href="bkupsnapshot-5.html#bkupsnapshot-7">How to Display UFS Snapshot Information</a></p>
<p class="toc level3"><a href="bkupsnapshot-5.html#bkupsnapshot-8">How to Delete a UFS Snapshot</a></p>
<p class="toc level2 tocsp"><a href="bkupsnapshot-9.html">Backing Up a UFS Snapshot</a></p>
<p class="toc level3"><a href="bkupsnapshot-9.html#bkupsnapshot-10">How to Create a Full Backup of a UFS Snapshot (<tt>ufsdump</tt>)</a></p>
<p class="toc level3"><a href="bkupsnapshot-9.html#bkupsnapshot-16">How to Create an Incremental Backup of a UFS Snapshot (<tt>ufsdump</tt>)</a></p>
<p class="toc level3"><a href="bkupsnapshot-9.html#bkupsnapshot-12">How to Back Up a UFS Snapshot (<tt>tar</tt>)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="bkupsnapshot-11"></a><h3>UFS Snapshots Overview</h3>
<p>You can use the <tt>fssnap</tt> command to back up file systems while the
file system is mounted. This command to creates a read-only snapshot of a
file system. A <b>snapshot</b> is a file system's temporary image that is intended
for backup operations.</p><p>When the <tt>fssnap</tt> command is run, it creates a virtual device and a
backing-store file. You can back up the <b>virtual device</b>, which looks and acts like
a real device, with any of the existing Solaris backup commands. The <b>backing-store file</b>
is a bitmap file that contains copies of pre snapshot data that has
been modified since the snapshot was taken.</p><p>Keep the following key points in mind when specifying backing-store files:</p>
<ul><li><p>The destination path of the backing store files must have enough free space to hold the file system data. The size of the backing store files vary with the amount of activity on the file system.</p></li>
<li><p>The backing store file location must be different from the file system that is being captured in a snapshot.</p></li>
<li><p>The backing-store files can reside on any type of file system, including another UFS file system or an NFS file system.</p></li>
<li><p>Multiple backing-store files are created when you create a snapshot of a UFS file system that is larger than 512 Gbytes.</p></li>
<li><p>Backing-store files are sparse files. The logical size of a sparse file, as reported by the <tt>ls</tt> command, is not the same as the amount of space that has been allocated to the sparse file, as reported by the <tt>du</tt> command.</p></li></ul>
<p>For more information about creating snapshots for a UFS file system larger than
512 Gbytes, see <a href="bkupsnapshot-5.html#fapul">Creating a Multiterabyte UFS Snapshot</a>.</p>

<a name="bkupsnapshot-3"></a><h4>Why Use UFS Snapshots?</h4>
<p>The UFS snapshots feature provides additional availability and convenience for backing up a
file system because the file system remains mounted and the system remains in
multiuser mode during backups. Then, you can use the <tt>tar</tt> or <tt>cpio</tt>
commands to back up a UFS snapshot to tape for more permanent storage.
If you use the <tt>ufsdump</tt> command to perform backups, the system should be
in single-user mode to keep the file system inactive when you perform backups.</p><p><a name="indexterm-452"></a>The <tt>fssnap</tt> command gives administrators of non enterprise-level systems the power of enterprise-level
tools, such as Sun StorEdge<sup>TM</sup> Instant Image, without the large storage demands.</p><p>The UFS snapshots feature is similar to the Instant Image product. Although UFS
snapshots can make copies of large file systems, Instant Image is better suited
for enterprise-level systems. UFS snapshots is better suited for smaller systems. Instant Image
allocates space equal to the size of the entire file system that is
being captured. However, the backing-store file that is created by UFS snapshots occupies
only as much disk space as needed.</p><p>This table describes specific differences between UFS snapshots and Instant Image.</p><table><col width="198*"><col width="198*"><tr><th align="left" valign="top" scope="column"><p>UFS Snapshots</p></th>
<th align="left" valign="top" scope="column"><p>Sun StorEdge
Instant Image</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Size of the backing-store file depends on how much data has
changed since the snapshot was taken</p></td>
<td align="left" valign="top" scope="row"><p>Size of the backing-store file equals the size
of the entire file system being copied</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Does not persist across system reboots</p></td>
<td align="left" valign="top" scope="row"><p>Persists across
system reboots</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Works on UFS file systems</p></td>
<td align="left" valign="top" scope="row"><p>Cannot be used with root (<tt>/</tt>) or
<tt>/usr</tt> file systems</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Available starting with the Solaris 8 1/01 release</p></td>
<td align="left" valign="top" scope="row"><p>Part of Sun StorEdge
products</p></td>
</tr>
</table>

<a name="bkupsnapshot-20"></a><h4>UFS Snapshots Performance Issues</h4>
<p>When the UFS snapshot is first created, users of the file system
might notice a slight pause. The length of the pause increases with the
size of the file system to be captured. While the snapshot is active,
users of the file system might notice a slight performance impact when the
file system is written to. However, they see no impact when the file
system is read.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="bkupsnapshot-1.html">Previous</a>
             </td>
             <td align="right">
                 <a href="bkupsnapshot-5.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

