<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>File System Consistency - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fstroublefsck-61446.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fstroublefsck-60228.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">File System Consistency</a></p>
</div>
<p class="toc level2"><a href="fstroublefsck-60228.html">How the File System State Is Recorded</a></p>
<p class="toc level2"><a href="fstroublefsck-51788.html">What the <tt>fsck</tt> Command Checks and Tries to Repair</a></p>
<p class="toc level2"><a href="fstroublefsck-62389.html">Interactively Checking and Repairing a UFS File System</a></p>
<p class="toc level3"><a href="fstroublefsck-62389.html#fstroublefsck-59">How to Check the root (<tt>/</tt>), <tt>/usr</tt>, or <tt>/var</tt> File Systems From an Alternate Boot Device</a></p>
<p class="toc level3"><a href="fstroublefsck-62389.html#fstroublefsck-28">How to Check Other File Systems (Not root (<tt>/</tt>), <tt>/usr</tt>, or <tt>/var</tt>)</a></p>
<p class="toc level3"><a href="fstroublefsck-62389.html#fstroublefsck-37">How to Preen a UFS File System</a></p>
<p class="toc level2 tocsp"><a href="fstroublefsck-59471.html">Restoring a Bad Superblock</a></p>
<p class="toc level3"><a href="fstroublefsck-59471.html#galyo">How to Restore a Bad Superblock ( Solaris Express Release)</a></p>
<p class="toc level3"><a href="fstroublefsck-59471.html#fstroublefsck-43">How to Restore a Bad Superblock (Solaris 8, 9, and 10 Releases)</a></p>
<p class="toc level2 tocsp"><a href="fstroublefsck-22051.html">Syntax and Options for the <tt>fsck</tt> Command</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="fstroublefsck-52"></a><h3>File System Consistency</h3>
<p>The UFS file system relies on an internal set of tables to
keep track of inodes used and available blocks. When these internal tables are
not properly synchronized with data on a disk, inconsistencies result and file systems need
to be repaired.</p><p>File systems can be inconsistent because of abrupt termination of the operating system
from the following:</p>
<ul><li><p>Power failure</p></li>
<li><p>Accidental unplugging of the system</p></li>
<li><p>Turning off the system without proper shutdown procedure</p></li>
<li><p>A software error in the kernel</p></li></ul>
<p>File system inconsistencies, while serious, are not common. When a system is booted,
a check for file system consistency is automatically performed (with the <tt>fsck</tt> command).
Often, this file system check repairs problems it encounters.</p><p>The <tt>fsck</tt> command places files and directories that are allocated but unreferenced in
the <tt>lost+found</tt> directory. An inode number is assigned as the name of unreferenced
file and directory. If the <tt>lost+found</tt> directory does not exist, the <tt>fsck</tt> command
creates it. If there is not enough space in the <tt>lost+found</tt> directory,
the <tt>fsck</tt> command increases its size.</p><p>For a description of inodes, see <a href="fsfilesysappx-23724.html#fsfilesysappx-4">Inodes</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fstroublefsck-61446.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fstroublefsck-60228.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

