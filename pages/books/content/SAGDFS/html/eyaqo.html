<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Dynamically Reconfiguring IB Devices (<tt>cfgadm</tt>) - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyarx.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eyasr.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level2"><a href="eyant.html">Overview of InfiniBand Devices</a></p>
<p class="toc level2"><a href="eyarx.html">Dynamically Reconfiguring IB Devices (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Dynamically Reconfiguring IB Devices (<tt>cfgadm</tt>)</a></p>
<p class="toc level3"><a href="#eyaqp">How to Display IB Device Information</a></p>
<p class="toc level3"><a href="#eyaqq">How to Unconfigure an IOC Device</a></p>
<p class="toc level3"><a href="#eyaqr">How to Configure an IOC Device</a></p>
<p class="toc level3"><a href="#eyaqs">How to Unconfigure an IB Port, HCA_SVC, or a VPPA Device</a></p>
<p class="toc level3"><a href="#eyaqt">How to Configure a IB Port, HCA_SVC, or a VPPA Device</a></p>
<p class="toc level3"><a href="#eyaqu">How to Unconfigure an IB Pseudo Device</a></p>
<p class="toc level3"><a href="#eyaqv">How to Configure an IB Pseudo Device</a></p>
<p class="toc level3"><a href="#eyatt">How to Display Kernel IB Clients of  an HCA</a></p>
<p class="toc level3"><a href="#eyaqw">How to Unconfigure IB Devices Connected to an HCA</a></p>
<p class="toc level3"><a href="#eyaqy">How to Update the IB <tt>p_key</tt> Tables</a></p>
<p class="toc level3"><a href="#eyaqz">How to Display IB Communication Services</a></p>
<p class="toc level3"><a href="#eyarb">How to Add a VPPA Communication Service</a></p>
<p class="toc level3"><a href="#eyarc">How to Remove an Existing IB Port, HCA_SVC, or a VPPA Communication Service</a></p>
<p class="toc level3"><a href="#eyarj">How to Update an IOC Configuration</a></p>
</div>
<p class="toc level2 tocsp"><a href="eyasr.html">Using the uDAPL Application Interface With InfiniBand Devices</a></p>
<p class="toc level3"><a href="eyasr.html#eyank">How to Enable uDAPL</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="eyaqo"></a><h3>Dynamically Reconfiguring IB Devices (<tt>cfgadm</tt>)</h3>
<p>One can configure or unconfigure an IB device from a running system by
using the <tt>cfgadm</tt> CLI only. This command also provides a way to display
the IB fabric, manage communication services, and update <tt>p_key</tt> table databases. For
more information, see <a href="http://docs.sun.com/doc/819-2240/cfgadm-ib-1m?a=view"><tt>cfgadm_ib</tt>(1M)</a>.<a name="indexterm-189"></a><a name="indexterm-190"></a></p><p>The <tt>cfgadm</tt> CLI manages dynamic reconfiguration, referred to in this guide as DR,
of the entire IB fabric as seen by a host. The <tt>cfgadm</tt>
operations are supported on all the IB devices, such as Port, VPPA, HCA_SVC,
IOC, and pseudo devices.</p><p>The <tt>cfgadm</tt> command displays information about attachment points (<tt>Ap_Id</tt>s), which are locations in
the system where DR operations can occur. For details on the <tt>Ap_Id</tt>s that
<tt>cfgadm</tt> supports, see <tt>cfgadm_ib.1M</tt>. Note that all IB <tt>Ap_Id</tt>s are shown as <tt>connected</tt>.</p><p>The <tt>cfgadm</tt> command provides the following IB device status information.</p><table><col width="50*"><col width="50*"><tr><th align="left" valign="top" scope="column"><p>Receptacle State</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p> <tt>connected</tt>/<tt>configured</tt>/<tt>ok</tt> </p></td>
<td align="left" valign="top" scope="row"><p>The
device is connected and available. The <tt>devinfo</tt> node is present.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>connected</tt>/<tt>unconfigured</tt>/<tt>unknown</tt></p></td>
<td align="left" valign="top" scope="row"><p>The device is unavailable
and no <tt>devinfo</tt> node or device driver exists for this device. Or, the
device was never configured for use by <tt>ib</tt> nexus driver. The device might
be known to the IB Device Manager.</p></td>
</tr>
</table><p>The following sections describe how to dynamically reconfigure (DR) IB devices with the
<tt>cfgadm</tt> command. All of the sample IB device information in these sections has
been truncated to focus on relevant information.</p>

<a name="eyaqp"></a><h4>How to Display IB Device Information</h4><p>You can use the <tt>prtconf</tt> command to display general information about IB devices.
For example:<a name="indexterm-191"></a><a name="indexterm-192"></a></p><pre>$ <tt><b>prtconf</b></tt>
    pci, instance #0
        pci15b3,5a44, instance #0
             ibport, instance #253
             ibport, instance #254
             ibport, instance #255
    .
    .
    .
    ib, instance #0
        ioc, instance #243
        ioc, instance #244
        ioc, instance #245
        ioc, instance #246
        ioc, instance #247
        ioc, instance #248
        ibgen, instance #249</pre><p>In the preceding example,  <tt>pci15b3,5a44</tt> refers to an IB HCA.</p><p>Use the following steps to display specific IB device information.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Display IB fabric information.</b><p>For example:</p><pre># <tt><b>cfgadm -a</b></tt>
Ap_Id                       Type       Receptacle Occupant   Condition
ib                          IB-Fabric  connected  configured   ok
hca:1730000008070           IB-HCA     connected  configured   ok
ib::1730000007F5198         IB-IOC     connected  configured   ok
ib::1730000007F5199         IB-IOC     connected  configured   ok
ib::1730000008070,0,hnfs    IB-HCA_SVC connected  configured   ok
ib::1730000008071,0,sdp     IB-PORT    connected  configured   ok
ib::1730000008072,0,sdp     IB-PORT    connected  configured   ok
ib::1730000008071,8001,ipib IB-VPPA    connected  configured   ok
ib::1730000008072,8001,ipib IB-VPPA    connected  configured   ok
ib::ibgen,0                 IB-PSEUDO  connected  configured   ok
#</pre><p>In the preceding example output, the components are described as follows:</p><dl><dt><tt>Ap_Id ib::1730000008072,0,sdp</tt></dt>
<dd><p>Identifies an IB Port device that is connected to port 2 and is bound to the <tt>sdp</tt> service.</p></dd>
<dt><tt>Ap_Id ib::1730000008072,8001,ipib</tt></dt>
<dd><p>Identifies an IB VPPA device that is connected to port 2, using a <tt>p_key</tt> value of <tt>0x8001</tt>, and is bound to the <tt>ibd</tt> service.</p></dd>
<dt><tt>Ap_Id ib:: 1730000008070,0,hnfs</tt></dt>
<dd><p>Identifies an IB HCA_SVC device bound to the <tt>hnfs</tt> service.</p></dd>
<dt><tt>Ap_Id ib::1730000007F5198</tt></dt>
<dd><p>Identifies an IOC device.</p></dd>
<dt><tt>Ap_Id ib::ibgen,0</tt></dt>
<dd><p>Identifies a pseudo device.</p></dd>
</dl>
</li>
<li><b>Display specific IB device information.</b><p>For example, for an IB VPPA device:</p><pre># <tt><b>cfgadm -al -s "cols=ap_id:info" ib::1730000008072,8001,ipib</b></tt>
Ap_Id                          Information
ib::1730000008072,8001,ipib    ipib
# </pre><p>For example, for an IB HCA device:</p><pre># <tt><b>cfgadm -al -s "cols=ap_id:info" hca::1730000008070</b></tt>
Ap_Id                          Information
hca::1730000008070             VID: 0x15b3, PID: 0x5a44, #ports: 0x2, 
port1 GUID: 0x1730000008071, port2 GUID: 0x1730000008072
# </pre><p>The preceding output displays the number of ports and their GUIDs.</p></li></ol>

<a name="eyaqq"></a><h4>How to Unconfigure an IOC Device</h4><p>You can unconfigure an IB device that is still physically connected to the
system, but a driver will never attach to it.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Unconfigure the IB device.<a name="indexterm-193"></a><a name="indexterm-194"></a></b><p>For example:</p><pre># <tt><b>cfgadm -c unconfigure ib::1730000007F5198</b></tt>
Unconfigure the device: /devices/ib:fabric::1730000007F5198
This operation will suspend activity on the IB device
Continue (yes/no)? <tt><b>y</b></tt>
#</pre></li>
<li><b>Verify that the device is unconfigured.</b><p>For example:</p><pre># <tt><b>cfgadm -a ib::1730000007F5198</b></tt>
ib::1730000007F5198         IB-IOC     connected  unconfigured unknown
#</pre></li></ol>

<a name="eyaqr"></a><h4>How to Configure an IOC Device</h4><ol>
<li><b>Become superuser.</b></li>
<li><b>Configure a IB device.<a name="indexterm-195"></a><a name="indexterm-196"></a></b><p>For example:</p><pre># <tt><b>cfgadm -yc configure ib::1730000007F5198</b></tt></pre></li>
<li><b>Verify that the IB device is configured.</b><p>For example:</p><pre># <tt><b>cfgadm -al ib::1730000007F5198</b></tt>
Ap_Id                Type    Receptacle  Occupant    Condition
ib::1730000007F5198  IB-IOC  connected   configured  ok</pre></li></ol>

<a name="eyaqs"></a><h4>How to Unconfigure an IB Port, HCA_SVC, or a VPPA Device</h4><p>Use the following steps if you want to remove an IB Port,
HCA_SVC, or a VPPA device from the system.</p><p>The example below illustrates how to unconfigure a VPPA device, but the same
procedure applies to Port and HCA_SVC devices as well.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Unconfigure the IB VPPA device.<a name="indexterm-197"></a><a name="indexterm-198"></a></b><p>For example:</p><pre># <tt><b>cfgadm -c unconfigure ib::1730000007F51,8001,ipib</b></tt>
Unconfigure the device: /devices/ib:fabric::1730000007F51,8001,ipib
This operation will suspend activity on the IB device
Continue (yes/no)? <tt><b>Y</b></tt>
#</pre></li>
<li><b>Verify that the device is disconnected.</b><p>For example:</p><pre># <tt><b>cfgadm -a ib::1730000007F51,8001,ipib</b></tt>
Ap_Id                       Type    Receptacle Occupant     Condition
ib::1730000007F51,8001,ipib IB-VPPA connected  unconfigured unknown
#</pre></li></ol>

<a name="eyaqt"></a><h4>How to Configure a IB Port, HCA_SVC, or a VPPA Device</h4><p>Use the following steps if you want to configure an IB Port,
HCA_SVC, or a VPPA device on the system.</p><p>The example below illustrates how to configure a VPPA device, but similar steps
can be used to configure Port and HCA_SVC devices as well.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Configure the IB VPPA device.<a name="indexterm-199"></a><a name="indexterm-200"></a></b><p>For example:</p><pre># <tt><b>cfgadm -c configure ib::1730000007F51,8001,ipib</b></tt></pre></li>
<li><b>Verify that the device is connected.</b><p>For example:</p><pre># <tt><b>cfgadm -a ib::1730000007F51,8001,ipib</b></tt>   
Ap_Id                       Type     Receptacle Occupant   Condition
ib::1730000007F51,8001,ipib IB-VPPA  connected  configured ok</pre>
<hr><p><b>Note - </b>A <tt>cfgadm</tt> based configure or unconfigure operation of IB Port and HCA_SVC 
devices is similar to the preceding examples for an IB VPPA device.</p>
<hr>
</li></ol>

<a name="eyaqu"></a><h4>How to Unconfigure an IB Pseudo Device</h4><p>Use the following steps if you want to remove an IB pseudo
device from the system.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Unconfigure the IB pseudo device.<a name="indexterm-201"></a><a name="indexterm-202"></a></b><p>For example:</p><pre># <tt><b>cfgadm -c unconfigure ib::ibgen,0</b></tt>
Unconfigure the device: /devices/ib:fabric::ibgen,0
This operation will suspend activity on the IB device
Continue (yes/no)? <tt><b>Y</b></tt>
#</pre></li>
<li><b>Verify that the device is disconnected.</b><pre># <tt><b>cfgadm -a ib::ibgen,0</b></tt>
Ap_Id                  Type      Receptacle Occupant     Condition
ib::ibgen,0            IB-PSEUDO connected  unconfigured unknown</pre></li></ol>

<a name="eyaqv"></a><h4>How to Configure an IB Pseudo Device</h4><p>Use the following steps to configure an IB pseudo device.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Configure the IB pseudo device.<a name="indexterm-203"></a><a name="indexterm-204"></a></b><p>For example:</p><pre># <tt><b>cfgadm -yc configure ib::ibgen,0</b></tt></pre></li>
<li><b>Verify that the device is connected.</b><p>For example:</p><pre># <tt><b>cfgadm -a ib::ibgen,0</b></tt>
Ap_Id                  Type       Receptacle Occupant   Condition
ib::ibgen,0            IB-PSEUDO  connected  configured ok</pre></li></ol>

<a name="eyatt"></a><h4>How to Display Kernel IB Clients of an HCA</h4><p>The following IB <tt>cfgadm</tt> plugin command can be invoked to list kernel IB
clients using this HCA. Note that the last column would show a &ldquo;yes&rdquo;
if a kernel IB client uses another HCA. IB Managers and kernel clients
that do not use the HCA are shown with an <tt>Ap_Id</tt> of
&ldquo;-&rdquo;.</p><ul>
<li><b>Display kernel IB clients of  an HCA.<a name="indexterm-205"></a><a name="indexterm-206"></a></b><p>For example:</p><pre>$ <tt><b>cfgadm -x list_clients hca:173000007F50</b></tt>   
Ap_Id                       IB Client         Alternate HCA
ib::1730000007F51D0            ibgen              no
ib::1730000007F51D1            ibgen              no
ib::1730000007F51,8001,ipib    ibd                no
ib::ibgen,0                    ibgen              no
-                              ibdm               no
-                              ibmf               no
-                              nfs/ib             no
$</pre></li></ul>

<a name="eyaqw"></a><h4>How to Unconfigure IB Devices Connected to an HCA</h4><p>An actual DR of an HCA is beyond the scope of the
IB <tt>cfgadm</tt> plugin. Although DR of an HCA can be achieved by using
the plugin of the underlying bus. For example, a PCI based HCA can
use the <tt>cfgadm_pci</tt> command. For more information, see <a href="http://docs.sun.com/doc/819-2240/cfgadm-pci-1m?a=view"><tt>cfgadm_pci</tt>(1M)</a>.</p><p>However, the IB <tt>cfgadm</tt> plugin assists in the HCA DR by listing its
kernel IB clients as illustrated in steps below.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>List the kernel IB clients of the HCA.<a name="indexterm-207"></a><a name="indexterm-208"></a></b><p>For example:</p><pre># <tt><b>cfgadm -x list_clients hca:173000007F50</b></tt>   
Ap_Id                       IB Client         Alternate HCA
ib::1730000007F51D0            ibgen              no
ib::1730000007F51D1            ibgen              no
ib::1730000007F51,8001,ipib    ibd                no
ib::ibgen,0                    ibgen              no
-                              ibdm               no
-                              ibmf               no
-                              nfs/ib             no</pre></li>
<li><b>Unconfigure kernel IB clients, such as Port, VPPA, HCA_SVC, or IOC devices, that
do not have alternate HCAs present.</b><p>For example:</p><pre># <tt><b>cfgadm -x unconfig_clients hca:1730000008070</b></tt>
Unconfigure Clients of HCA /devices/ib:1730000008070
This operation will unconfigure IB clients of this HCA
Continue (yes/no)? <tt><b>y</b></tt></pre></li>
<li><b>Verify that the kernel IB clients of the HCA are unconfigured.</b><pre># <tt><b>cfgadm -x list_clients hca:173000007F50</b></tt>   
Ap_Id                       IB Client         Alternate HCA
-                              ibdm               no
-                              ibmf               no
-                              nfs/ib             no
#</pre></li></ol>

<a name="eyatr"></a><h4>Configuring an IB HCA</h4>
<p>Invoke the bus-specific <tt>cfgadm</tt> plugin to configure the HCA.  The exact details
are beyond the scope of this chapter.</p>

<a name="eyaqy"></a><h4>How to Update the IB <tt>p_key</tt> Tables</h4><p>If the <tt>p_key</tt> table information of an HCA ports changes, for example, additional
<tt>p_key</tt>s are enabled or disabled, InfiniBand Transport Framework (IBTF) and IBDM need to
be notified so that their internal <tt>p_key</tt> databases are updated. The <tt>cfgadm</tt> command
helps update the <tt>p_key</tt> databases of IBTF and IBDM. For more information, see
<a href="http://docs.sun.com/doc/819-2254/ibtl-7d?a=view"><tt>ibtl</tt>(7D)</a> and <a href="http://docs.sun.com/doc/819-2254/ibdm-7d?a=view"><tt>ibdm</tt>(7D)</a>.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Update the <tt>p_key</tt> tables.<a name="indexterm-209"></a><a name="indexterm-210"></a></b><p>For example:</p><pre># <tt><b>cfgadm -x update_pkey_tbls -y ib</b></tt></pre></li></ol>

<a name="eyaqz"></a><h4>How to Display IB Communication Services</h4><p>Use the following steps to display the communication services that are currently in
use by the IBTF.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Display IB communication services.<a name="indexterm-211"></a><a name="indexterm-212"></a></b><p>For example:</p><pre># <tt><b>cfgadm -x list_services ib</b></tt>
Port communication services:
                srp
VPPA communication services:
                ibd
HCA_SVC communication services:
                hnfs</pre></li></ol>

<a name="eyarb"></a><h4>How to Add a VPPA Communication Service</h4><p>Use the following steps to add a new VPPA communication service.</p><p>Similar steps can be used to add a new HCA_SVC or a
port communication service.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Add a new VPPA communication service.<a name="indexterm-213"></a><a name="indexterm-214"></a></b><p>For example:</p><pre># <tt><b>cfgadm -o comm=vppa,service=new -x add_service ib</b></tt></pre></li>
<li><b>Verify that the new service has been added.</b><p>For example:</p><pre># <tt><b>cfgadm -x list_services ib</b></tt>
Port communication services:
                srp
VPPA communication services:
                ibd
                new
HCA_SVC communication services:
                nfs_service
#</pre></li></ol>

<a name="eyarc"></a><h4>How to Remove an Existing IB Port, HCA_SVC, or a VPPA Communication Service</h4><p>Use the following steps to delete an existing IB Port, HCA_SVC, or
a VPPA communication service.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Remove a VPPA communication service.<a name="indexterm-215"></a><a name="indexterm-216"></a></b><p>For example:</p><pre># <tt><b>cfgadm -o comm=vppa,service=new -x delete_service ib</b></tt></pre></li>
<li><b>Verify that the communication service has been removed.</b><p>For example:</p><pre># <tt><b>cfgadm -x list_services ib</b></tt>
Port communication services:
                srp
VPPA communication services:
                ibd
HCA_SVC communication services:
                hnfs
#</pre></li></ol>

<a name="eyarj"></a><h4>How to Update an IOC Configuration</h4><p>Use the following steps to update properties of all the IOC device
nodes or for a particular IOC <tt>Ap_Id</tt>. The properties that can get updated are
as follows:</p>
<ul><li><p><tt>port-list</tt></p></li>
<li><p><tt>port-entries</tt></p></li>
<li><p><tt>service-id</tt></p></li>
<li><p><tt>service-name</tt></p></li></ul>
<p>For more information on these properties, see <a href="http://docs.sun.com/doc/819-2254/ib-7d?a=view"><tt>ib</tt>(7D)</a>.</p><p>Note that these properties may not get updated if there is no
configuration change. The following example describes how to update a particular IOC's configuration. If
you need to update the configuration of all the IOCs, then specify
the static <tt>ib</tt> <tt>Ap_Id</tt> instead of the particular IOC <tt>Ap_Id</tt>.</p><ol>
<li><b>Become superuser.</b></li>
<li><b>Update the configuration of an IOC.<a name="indexterm-217"></a><a name="indexterm-218"></a></b><p>For example:</p><pre># <tt><b>cfgadm -x update_ioc_conf ib::1730000007F5198</b></tt>
This operation can update properties of IOC devices.
Continue (yes/no)? <tt><b>y</b></tt>
#</pre></li>
<li><b>Verify that the properties have been updated by running <tt>prtconf -v</tt>.</b></li></ol>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="eyarx.html">Previous</a>
             </td>
             <td align="right">
                 <a href="eyasr.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

