<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Overview of the CacheFS File System - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fscachefs-16.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fscachefs-80158.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level2"><a href="fscachefs-16.html">High-Level View of Using the CacheFS File System (Task Map)</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Overview of the CacheFS File System</a></p>
</div>
<p class="toc level2"><a href="fscachefs-80158.html">Creating and Mounting a CacheFS File System (Task Map)</a></p>
<p class="toc level3"><a href="fscachefs-80158.html#fscachefs-15053">How to Create the Cache</a></p>
<p class="toc level3"><a href="fscachefs-80158.html#fscachefs-77212">How to Mount a CacheFS File System (<tt>mount</tt>)</a></p>
<p class="toc level3"><a href="fscachefs-80158.html#fscachefs-23416">How to Mount a CacheFS File System (<tt>/etc/vfstab</tt>)</a></p>
<p class="toc level3"><a href="fscachefs-80158.html#fscachefs-54948">How to Mount a CacheFS File System (AutoFS)</a></p>
<p class="toc level2 tocsp"><a href="fscachefs-23.html">Maintaining a CacheFS File System (Task Map)</a></p>
<p class="toc level2"><a href="fscachefs-24.html">Maintaining a CacheFS File System</a></p>
<p class="toc level3"><a href="fscachefs-24.html#fscachefs-58683">How to Display Information About a CacheFS File System</a></p>
<p class="toc level3"><a href="fscachefs-24.html#fscachefs-87412">How to Specify Cache Consistency Checking on Demand</a></p>
<p class="toc level3"><a href="fscachefs-24.html#fscachefs-10353">How to Delete a CacheFS File System</a></p>
<p class="toc level3"><a href="fscachefs-24.html#fscachefs-17439">How to Check the Integrity of a CacheFS File System</a></p>
<p class="toc level2 tocsp"><a href="fscachefs-15.html">Packing a Cached File System (Task Map)</a></p>
<p class="toc level2"><a href="fscachepack-80612.html">Packing a CacheFS File System</a></p>
<p class="toc level3"><a href="fscachepack-80612.html#fscachepack-80613">How to Pack Files in the Cache</a></p>
<p class="toc level3"><a href="fscachepack-80612.html#fscachepack-21">How to Display Packed Files Information</a></p>
<p class="toc level3"><a href="fscachepack-80612.html#fscachepack-17738">How to Create a Packing List</a></p>
<p class="toc level3"><a href="fscachepack-80612.html#fscachepack-5">How to Pack Files in the Cache With a Packing List</a></p>
<p class="toc level3"><a href="fscachepack-80612.html#fscachepack-18">How to Unpack Files or Packing Lists From the Cache</a></p>
<p class="toc level2 tocsp"><a href="fscachefsref-26610.html">Collecting CacheFS Statistics (Task Map)</a></p>
<p class="toc level2"><a href="fscachefsref-38278.html">Collecting CacheFS Statistics</a></p>
<p class="toc level3"><a href="fscachefsref-38278.html#fscachefs-5">How to Set Up CacheFS Logging</a></p>
<p class="toc level3"><a href="fscachefsref-38278.html#fscachefs-8">How to Locate the CacheFS Log File</a></p>
<p class="toc level3"><a href="fscachefsref-38278.html#fscachefsref-71516">How to View the Working Set (Cache) Size</a></p>
<p class="toc level3"><a href="fscachefsref-38278.html#fscachefsref-35885">How to View CacheFS Statistics</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="fscachefs-14"></a><h3>Overview of the CacheFS File System</h3>
<p>The CacheFS file system is a general purpose caching mechanism that improves NFS
server performance and scalability by reducing server and network load. Designed as a
layered file system, the CacheFS file system provides the ability to cache one
file system on another file system. In an NFS environment, the CacheFS file
system increases the client per server ratio, reduces server and network loads, and
improves performance for clients on slow links, such as Point-to-Point Protocol (PPP).</p>

<a name="fscachefs-14634"></a><h4>How a CacheFS File System Works</h4>
<p>You create a CacheFS file system on a client system so that
file systems you cache can be accessed by the client locally instead of
across the network. The following figure shows the relationship of the components that
are involved in using CacheFS file systems.</p><a name="fscachefs-fig-1"></a><h6>Figure&nbsp;20-1 <a name="fscachefs-18911"></a>How a CacheFS File System Works</h6><img src="figures/fs_cachefs.fig2929.gif" alt="Graphic of CacheFS components. Identifies the relationship between the back file system from the server and the cached file system on the client."></img><p>The <b>back</b> file system is the file system that you specify to be
mounted in the cache. A back file system can be either NFS
or HSFS (High Sierra File System). When the user attempts to access files
that are part of the back file system, those files are placed in
the cache. The <b>front</b> file system is the file system that is
mounted in the cache and is accessed from the local mount point. The
front file system type must be UFS.</p><p><a name="fscachefs-ix2834"></a><a name="fscachefs-ix2835"></a>To the user, the initial request to access a file in a
CacheFS file system might seem slow. However, subsequent uses of the same file
are faster.</p>

<a name="fscachefsref-59635"></a><h4>CacheFS File System Structure and Behavior</h4>
<p><a name="fscachefsref-ix2847"></a>Each cache has a set of parameters that determines the cache structure and
how it behaves. The parameters are set to the default values listed in
the following table. The default values specify that the entire front file system
is used for caching, which is the recommended method of caching file systems.
</p><a name="fscachefsref-51665"></a><h6>Table&nbsp;20-1 CacheFS File System Parameters and Their Default Values</h6><table><col width="88*"><col width="88*"><col width="220*"><tr><th align="left" valign="top" scope="column"><p>CacheFS File System Parameter</p></th>
<th align="left" valign="top" scope="column"><p>Default Value</p></th>
<th align="left" valign="top" scope="column"><p>Definition</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>maxblocks</tt></p></td>
<td align="left" valign="top" scope="row"><p>90 %</p></td>
<td align="left" valign="top" scope="row"><p>Sets the maximum number of blocks that
a CacheFS file system is allowed to claim within the front file system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>minblocks</tt></p></td>
<td align="left" valign="top" scope="row"><p>0
%</p></td>
<td align="left" valign="top" scope="row"><p>Sets the minimum number of blocks that a CacheFS file system is
allowed to claim within the front file system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>threshblocks</tt></p></td>
<td align="left" valign="top" scope="row"><p>85 %</p></td>
<td align="left" valign="top" scope="row"><p>Sets the number of blocks
that must be available in the front file system before a CacheFS file
system can claim more than the blocks specified by <tt>minblocks</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>maxfiles</tt></p></td>
<td align="left" valign="top" scope="row"><p>90 %</p></td>
<td align="left" valign="top" scope="row"><p>Sets the
maximum number of available inodes (number of files) that a CacheFS file system
is allowed to claim within the front file system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>minfiles</tt></p></td>
<td align="left" valign="top" scope="row"><p>0 %</p></td>
<td align="left" valign="top" scope="row"><p>Sets the minimum
number of available inodes that a CacheFS file system is allowed to claim
within the front file system.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>threshfiles</tt></p></td>
<td align="left" valign="top" scope="row"><p>85 %</p></td>
<td align="left" valign="top" scope="row"><p>Sets the number of inodes that must
be available in the front file system before a CacheFS file system can
claim more files than is specified in <tt>minfiles</tt>.</p></td>
</tr>
</table><p>Typically, you should not change any of these parameter values. They are set
to default values to achieve optimal cache behavior. However, you might want to
modify the <tt>maxblocks</tt> and <tt>maxfiles</tt> values if you have some room in the
front file system that is not used by the cache, and you want
to use it for some other file system. You do so by
using the <tt>cfsadmin</tt> command. For example: </p><pre>$ <tt><b>cfsadmin -o maxblocks=60</b></tt></pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fscachefs-16.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fscachefs-80158.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

