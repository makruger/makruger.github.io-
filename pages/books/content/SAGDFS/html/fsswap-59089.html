<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Adding More Swap Space - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsswap-52195.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsswap-88340.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level2"><a href="fsswap-29713.html">About Swap Space</a></p>
<p class="toc level2"><a href="fsswap-31555.html">How Do I Know If I Need More Swap Space?</a></p>
<p class="toc level2"><a href="fsswap-66891.html">How Swap Space Is Allocated</a></p>
<p class="toc level2"><a href="fsswap-31050.html">Planning for Swap Space</a></p>
<p class="toc level2"><a href="fsswap-52195.html">Monitoring Swap Resources</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Adding More Swap Space</a></p>
<p class="toc level3"><a href="#fsswap-37376">How to Create a Swap File and Make It Available</a></p>
</div>
<p class="toc level2 tocsp"><a href="fsswap-88340.html">Removing a Swap File From Use</a></p>
<p class="toc level3"><a href="fsswap-88340.html#fsswap-13">How to Remove Unneeded Swap Space</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="fsswap-59089"></a><h3>Adding More Swap Space</h3>
<p><a name="fsswap-ix2872"></a><a name="fsswap-ix2873"></a><a name="fsswap-ix2870"></a><a name="fsswap-ix2871"></a>As system configurations change and new software packages are installed, you might need to
add more swap space. The easiest way to add more swap space is
to use the <tt>mkfile</tt> and <tt>swap</tt> commands to designate a part of an
existing UFS or NFS file system as a supplementary swap area. These commands,
described in the following sections, enable you to add more swap space without
repartitioning a disk.  </p><p>Alternative ways to add more swap space are to repartition an existing disk
or to add another disk. For information on how to repartition a
disk, see <a href="disksconcepts-29477.html">Chapter&nbsp;10, Managing Disks (Overview)</a>.</p>

<a name="fsswap-4"></a><h4>Creating a Swap File</h4>
<p>The following general steps are involved in creating a swap file:</p>
<ul><li><p>Creating a swap file by using the <tt>mkfile</tt> command.</p></li>
<li><p>Activating the swap file by using the <tt>swap</tt> command.</p></li>
<li><p>Adding an entry for the swap file in the <tt>/etc/vfstab</tt> file so that the swap file is activated automatically when the system is booted.</p></li></ul>


<a name="fsswap-5"></a><h5><tt>mkfile</tt> Command</h5>
<p>The <tt>mkfile</tt> command creates a file that is suitable for use as either
an NFS-mounted swap area or a local swap area. The sticky bit is
set, and the file is filled with zeros. You can specify the
size of the swap file in bytes (the default) or in Kbytes, blocks,
or Mbytes by using the <tt>k</tt>, <tt>b</tt>, or <tt>m</tt> suffixes, respectively.</p><p>The following table shows the <tt>mkfile</tt> command options.</p><a name="fsswap-26020"></a><h6>Table&nbsp;21-2 Options to the <tt>mkfile</tt> Command</h6><table><col width="2*"><col width="7*"><tr><th align="left" valign="top" scope="column"><p>Option</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-n</tt></p></td>
<td align="left" valign="top" scope="row"><p>Creates an empty file. The
size is noted. However, the disk blocks are not allocated until data is
written to them.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-v</tt></p></td>
<td align="left" valign="top" scope="row"><p>Reports the names and sizes of created files.</p></td>
</tr>
</table>
<hr><p><b>Note - </b>Use the <tt>-n</tt> option only when you create an NFS swap file.</p>
<hr>


<a name="fsswap-37376"></a><h4>How to Create a Swap File and Make It Available</h4><ol>
<li><a name="fsswap-step-7"></a><b>Become superuser.</b><p>You can create a swap file without root permissions. However, to avoid accidental
overwriting, root should be the owner of the swap file.</p></li>
<li><a name="fsswap-step-21"></a><b>Create a directory for the swap file, if needed.</b></li>
<li><a name="fsswap-step-8"></a><b><a name="fsswap-ix2876"></a>Create the swap file. </b><pre># <tt><b>mkfile</b></tt> <i>nnn</i><tt><b>[k|b|m]</b></tt> <i>filename</i></pre><p>The swap file of the size <b>nnn</b> (in Kbytes, bytes, or Mbytes) with
the <i>filename</i> you specify is created.</p></li>
<li><a name="fsswap-step-9"></a><b>Activate the swap file.</b><pre># <tt><b>/usr/sbin/swap -a</b></tt> <i>/path/filename</i></pre><p>You must use the absolute path name to specify the swap file.
The swap file is added and available until the file system is unmounted,
the system is rebooted, or the swap file is removed. Keep in mind
that you cannot unmount a file system while some process or program is
swapping to the swap file.</p></li>
<li><a name="fsswap-step-10"></a><b>Add an entry for the swap file to the <tt>/etc/vfstab</tt> file that
specifies the full path name of the file, and designates <tt>swap</tt> as
the file system type.</b><pre><i>/path/filename</i>   -      -       swap     -     no     -</pre></li>
<li><a name="fsswap-step-11"></a><b>Verify that the swap file is added.</b><pre>$ <tt><b>/usr/sbin/swap -l</b></tt></pre>
<hr><p><b>Note - </b>If a swap file does not get activated, make sure that the
following service is running:</p><pre># svcs nfs/client
STATE          STIME    FMRI
enabled        14:14:34 svc:/network/nfs/client:default </pre>
<hr>
</li></ol><a name="fncrl"></a>Example&nbsp;21-1 Creating a Swap File and Making It Available<p>The following examples shows how to create a 100-Mbyte swap file called
<tt>/files/swapfile</tt>.</p><pre># <tt><b>mkdir /files</b></tt>
# <tt><b>mkfile 100m /files/swapfile</b></tt>
# <tt><b>swap -a /files/swapfile</b></tt>
# <tt><b>vi /etc/vfstab</b></tt>
(<b>An entry is added for the swap file</b>):
/files/swapfile   -      -       swap     -     no     -
# <tt><b>swap -l</b></tt>
swapfile             dev  swaplo blocks   free
/dev/dsk/c0t0d0s1   136,1      16 1638608 1600528
/files/swapfile        -       16 204784  204784</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="fsswap-52195.html">Previous</a>
             </td>
             <td align="right">
                 <a href="fsswap-88340.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

