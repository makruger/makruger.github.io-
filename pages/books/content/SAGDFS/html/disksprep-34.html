<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Creating and Examining a Disk Label - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksprep-24.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksprep-52.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level2"><a href="disksprep-1.html">Administering Disks (Task Map)</a></p>
<p class="toc level2"><a href="disksprep-3.html">Identifying Disks on a System</a></p>
<p class="toc level3"><a href="disksprep-3.html#disksprep-24293">How to Identify the Disks on a System</a></p>
<p class="toc level2 tocsp"><a href="disksprep-10.html">Formatting a Disk</a></p>
<p class="toc level3"><a href="disksprep-10.html#disksprep-37081">How to Determine if a Disk Is Formatted</a></p>
<p class="toc level3"><a href="disksprep-10.html#disksprep-24584">How to Format a Disk</a></p>
<p class="toc level2 tocsp"><a href="disksprep-24.html">Displaying Disk Slices</a></p>
<p class="toc level3"><a href="disksprep-24.html#disksprep-23207">How to Display Disk Slice Information</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Creating and Examining a Disk Label</a></p>
<p class="toc level3"><a href="#disksprep-32432">How to Label a Disk</a></p>
<p class="toc level3"><a href="#disksprep-15875">How to Examine a Disk Label</a></p>
</div>
<p class="toc level2 tocsp"><a href="disksprep-52.html">Recovering a Corrupted Disk Label</a></p>
<p class="toc level3"><a href="disksprep-52.html#disksprep-22071">How to Recover a Corrupted Disk Label</a></p>
<p class="toc level2 tocsp"><a href="disksprep-67.html">Adding a Third-Party Disk</a></p>
<p class="toc level3"><a href="disksprep-67.html#disksprep-17927">How to Create a <tt>format.dat</tt> Entry</a></p>
<p class="toc level2 tocsp"><a href="disksprep-72.html">Automatically Configuring SCSI Disk Drives</a></p>
<p class="toc level3"><a href="disksprep-72.html#disksprep-24067">How to Automatically Configure a SCSI Drive</a></p>
<p class="toc level2 tocsp"><a href="disksprep-87.html">Repairing a Defective Sector</a></p>
<p class="toc level3"><a href="disksprep-87.html#disksprep-27270">How to Identify a Defective Sector by Using Surface Analysis</a></p>
<p class="toc level3"><a href="disksprep-87.html#disksprep-31929">How to Repair a Defective Sector</a></p>
<p class="toc level2 tocsp"><a href="disksprep-101.html">Tips and Tricks for Managing Disks</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="disksprep-34"></a><h3>Creating and Examining a Disk Label</h3>
<p>The labeling of a disk is usually done during system installation or when
you are creating new disk slices. You might need to relabel a
disk if the disk label becomes corrupted. For example, from a power failure.</p><p>The <tt>format</tt> utility attempts to automatically configure any unlabeled SCSI disk. If the
<tt>format</tt> utility is able to automatically configure an unlabeled disk, it displays a
message similar to the following: <a name="disksprep-ix2493"></a></p><pre>    c0t0d1: configured with capacity of 4.00GB</pre>
<hr><p><b>Tip - </b>For information on labeling multiple disks with the same disk label, see <a href="disksprep-101.html#disksprep-103">Labeling Multiple Disks by Using the <tt>prtvtoc</tt> and <tt>fmthard</tt> Commands</a>.</p>
<hr>


<a name="disksprep-32432"></a><h4>How to Label a Disk</h4><p>You can use the following procedure to do the following:</p>
<ul><li><p>Label a disk with a VTOC label or a disk greater than 1 terabyte with an EFI label.</p></li>
<li><p>Label a disk that is greater than 1 terabyte with an EFI label.</p></li></ul>
<p>If you want to put an EFI label on disk smaller than
1 terabyte, see <a href="#disksprep-116">Example&nbsp;11-6</a>.</p><ol>
<li><a name="disksprep-step-36"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="disksprep-step-37"></a><b>Invoke the <tt>format</tt> utility.</b><pre># <tt><b>format</b></tt></pre><p>A numbered list of disks is displayed.</p></li>
<li><a name="disksprep-step-38"></a><b>Type the number of the disk that you want to label.</b><pre>Specify disk (enter its number):<tt><b>1</b></tt></pre><p>If the <tt>format</tt> utility recognizes the disk type, the next step is to
search for a backup label to label the disk. Labeling the disk with
the backup label labels the disk with the correct partitioning information, the disk
type, and disk geometry.</p></li>
<li><a name="disksprep-step-39"></a><b>Select one of the following to label the disk:</b>
<ul><li><p>If the disk is unlabeled and was successfully configured, go to Step 5 to label the disk.</p><p>The <tt>format</tt> utility will ask if you want to label the disk.</p></li>
<li><p>If the disk is labeled but you want to change the disk type, or if the <tt>format</tt> utility was not able to automatically configure the disk, proceed to Step 6 to set the disk type and label the disk.</p></li></ul>
</li>
<li><a name="disksprep-step-40"></a><b>Label the disk by typing <tt>y</tt> at the <tt>Label it now?</tt> prompt.</b><pre>Disk not labeled. Label it now? <tt><b>y</b></tt></pre><p>The disk is now labeled. Go to step 10 to exit the
<tt>format</tt> utility.</p></li>
<li><a name="disksprep-step-41"></a><b>Enter <tt>type</tt> at the <tt>format></tt> prompt.</b><pre>format> <tt><b>type</b></tt></pre><p>The Available Drive Types menu is displayed.</p></li>
<li><a name="disksprep-step-42"></a><b>Select a disk type from the list of possible disk types.</b><pre>Specify disk type (enter its number)[12]: <tt><b>12</b></tt></pre><p>Or, select <tt>0</tt> to automatically configure a SCSI-2 disk. For more information, see
<a href="disksprep-72.html#disksprep-24067">How to Automatically Configure a SCSI Drive</a>.</p></li>
<li><a name="disksprep-step-43"></a><b>Label the disk. If the disk is not labeled, the following message is
displayed.</b><pre>Disk not labeled. Label it now? <tt><b>y</b></tt></pre><p>Otherwise, you are prompted with this message:</p><pre>Ready to label disk, continue? <tt><b>y</b></tt></pre></li>
<li><a name="disksprep-step-109"></a><b>Verify the disk label.</b><pre>format> <tt><b>verify</b></tt> </pre></li>
<li><a name="disksprep-step-44"></a><b>Exit the <tt>format</tt> utility.</b><pre>format> <tt><b>q</b></tt>
#</pre></li></ol><a name="fncqo"></a>Example&nbsp;11-5 Labeling a Disk<p><a name="disksprep-ix2495"></a>The following example shows how to automatically configure and label a 1.05-Gbyte disk.
</p><pre># <tt><b>format</b></tt>
    c1t0d0: configured with capacity of 1002.09MB
 
AVAILABLE DISK SELECTIONS:
      0. c0t3d0 &lt;SUN1.05 cyl 2036 alt 2 hd 14 sec 72>
     /iommu@f,e0000000/sbus@f,e0001000/espdma@f,400000/esp@f,800000/sd@1,0
      1. c1t0d0 &lt;SUN1.05 cyl 2036 alt 2 hd 14 sec 72>
     /iommu@f,e0000000/sbus@f,e0001000/espdma@f,400000/esp@f,800000/sd@1,0
Specify disk (enter its number): <tt><b>1</b></tt>
Disk not labeled.  Label it now?  <tt><b>yes</b></tt>
format> <tt><b>verify</b></tt>
format> <tt><b>q</b></tt>
#</pre><a name="disksprep-116"></a>Example&nbsp;11-6 Labeling a Disk Less Than 1 Terabyte with an EFI Label<p>The following example shows how to use the <tt>format</tt> <tt>-e</tt> command to
label a disk that is less than 1 terabyte with an EFI label.
Remember to verify that your layered software products will continue to work on
systems with EFI-labeled disks. For general information on EFI label restrictions, see <a href="disksconcepts-1.html#disksconcepts-17">Restrictions of the EFI Disk Label</a>.</p><pre># <tt><b>format -e</b></tt>
Searching for disks...done
AVAILABLE DISK SELECTIONS:
       1. c1t0d0 &lt;SUNW18g cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@0,0
       2. c1t1d0 &lt;SUNW18g cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@1,0
       3. c1t8d0 &lt;SUNW18g cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@8,0
       4. c1t9d0 &lt;SUNW18g cyl 7506 alt 2 hd 19 sec 248>
          /sbus@2,0/QLGC,isp@2,10000/sd@9,0
Specify disk (enter its number): <tt><b>4</b></tt>
selecting c1t9d0
[disk formatted]
format> <tt><b>label</b></tt>
[0] SMI Label
[1] EFI Label
Specify Label type[0]: <tt><b>1</b></tt>
Ready to label disk, continue? <tt><b>yes</b></tt>
format> <tt><b>quit</b></tt></pre>

<a name="disksprep-15875"></a><h4>How to Examine a Disk Label</h4><p>Examine disk label information by using the <tt>prtvtoc</tt> command. For a detailed description
of the disk label and the information that is displayed by the <tt>prtvtoc</tt>
command, see <a href="disksconcepts-29477.html">Chapter&nbsp;10, Managing Disks (Overview)</a>.  </p><ol>
<li><a name="disksprep-step-48"></a><b>Become superuser or assume an equivalent role.</b></li>
<li><a name="disksprep-step-49"></a><b>Display the disk label information. </b><pre># <tt><b>prtvtoc /dev/rdsk/</b></tt><i>device-name</i></pre><p>where <i>device-name</i> is the raw disk device you want to examine. </p></li></ol><a name="fncqn"></a>Example&nbsp;11-7 Examining a Disk Label<p><a name="disksprep-ix2498"></a>The following example shows disk label information for a disk with a VTOC
label.</p><pre># <tt><b>prtvtoc /dev/rdsk/c0t0d0s0</b></tt>
* /dev/rdsk/c0t0d0s0 partition map
*
* Dimensions:
*     512 bytes/sector
*      63 sectors/track
*      15 tracks/cylinder
*     945 sectors/cylinder
*    8894 cylinders
*    8892 accessible cylinders
*
* Flags:
*   1: unmountable
*  10: read-only
*
*                          First     Sector    Last
* Partition  Tag  Flags    Sector     Count    Sector  Mount Directory
       0      2    00    1048950   3381210   4430159   /
       1      3    01          0   1048950   1048949
       2      5    00          0   8402940   8402939
       7      8    00    4430160   3972780   8402939   /export/home</pre><p>The following example shows disk label information for a disk with an EFI
label.</p><pre># <tt><b>prtvtoc /dev/rdsk/c3t1d0s0</b></tt>
* /dev/rdsk/c3t1d0s0 partition map
*
* Dimensions:
*     512 bytes/sector
* 2479267840 sectors
* 2479267773 accessible sectors
*
* Flags:
*   1: unmountable
*  10: read-only
*
*                          First      Sector       Last
* Partition  Tag  Flags    Sector     Count        Sector  Mount Directory
       0      2    00          34      262144      262177
       1      3    01      262178      262144      524321
       6      4    00      524322  2478727100  2479251421
       8     11    00  2479251422       16384  2479267805</pre>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="disksprep-24.html">Previous</a>
             </td>
             <td align="right">
                 <a href="disksprep-52.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

