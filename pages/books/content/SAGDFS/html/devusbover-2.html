<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Overview of USB Devices - System Administration Guide: Devices and File Systems</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-01-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">System Administration Guide: Devices and File Systems</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devusbover-28.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devusbover-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="vol1preface-11.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="medintro-55492.html">1.&nbsp;&nbsp;Managing Removable Media (Overview)</a></p>
<p class="toc level1 tocsp"><a href="medformat-83002.html">2.&nbsp;&nbsp;Managing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medaccess-29267.html">3.&nbsp;&nbsp;Accessing Removable Media (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="medcdrw-1.html">4.&nbsp;&nbsp;Writing CDs and DVDs (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig-27900.html">5.&nbsp;&nbsp;Managing Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devconfig2-1.html">6.&nbsp;&nbsp;Dynamically Configuring Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="devusbover-24.html">7.&nbsp;&nbsp;Using USB Devices (Overview)</a></p>
<p class="toc level2"><a href="gafhv.html">What's New in USB Devices?</a></p>
<p class="toc level2"><a href="devusbover-28.html">Solaris Support for USB Devices</a></p>
<div class="onpage">
<p class="toc level2"><a href="">Overview of USB Devices</a></p>
</div>
<p class="toc level2"><a href="devusbover-9.html">About USB in the Solaris OS</a></p>
<p class="toc level1 tocsp"><a href="devusbtasks-1.html">8.&nbsp;&nbsp;Using USB Devices (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fncpk.html">9.&nbsp;&nbsp;Using InfiniBand Devices (Overview/Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksconcepts-29477.html">10.&nbsp;&nbsp;Managing Disks (Overview)</a></p>
<p class="toc level1 tocsp"><a href="disksprep-31030.html">11.&nbsp;&nbsp;Administering Disks (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="diskssadd-16103.html">12.&nbsp;&nbsp;SPARC: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="disksxadd-38159.html">13.&nbsp;&nbsp;x86: Adding a Disk (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fmvcd.html">14.&nbsp;&nbsp;Configuring Solaris iSCSI Targets and Initiators (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="gfydr.html">15.&nbsp;&nbsp;Configuring and Managing the Solaris Internet Storage Name Service (iSNS)</a></p>
<p class="toc level1 tocsp"><a href="disksformat-15833.html">16.&nbsp;&nbsp;The <tt>format</tt> Utility (Reference)</a></p>
<p class="toc level1 tocsp"><a href="fsoverview-38559.html">17.&nbsp;&nbsp;Managing File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="fscreate-96442.html">18.&nbsp;&nbsp;Creating UFS, TMPFS, and LOFS File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsmount-42780.html">19.&nbsp;&nbsp;Mounting and Unmounting File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fscachefs-70682.html">20.&nbsp;&nbsp;Using The CacheFS File System (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsswap-14677.html">21.&nbsp;&nbsp;Configuring Additional Swap Space (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fstroublefsck-61446.html">22.&nbsp;&nbsp;Checking UFS File System Consistency (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="fsfilesysappx-94408.html">23.&nbsp;&nbsp;UFS File System (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupconcepts-57422.html">24.&nbsp;&nbsp;Backing Up and Restoring File Systems (Overview)</a></p>
<p class="toc level1 tocsp"><a href="bkuptasks2-64128.html">25.&nbsp;&nbsp;Backing Up Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupsnapshot-2.html">26.&nbsp;&nbsp;Using UFS Snapshots (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuprestoretasks-38055.html">27.&nbsp;&nbsp;Restoring Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkupref-12756.html">28.&nbsp;&nbsp;UFS Backup and Restore Commands (Reference)</a></p>
<p class="toc level1 tocsp"><a href="bkupsavefiles-17924.html">29.&nbsp;&nbsp;Copying UFS Files and File Systems (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="bkuptapedevice-42512.html">30.&nbsp;&nbsp;Managing Tape Drives (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="devusbover-2"></a><h3>Overview of USB Devices</h3>
<p>Universal Serial Bus (USB) was developed by the PC industry to provide a
low-cost solution for attaching peripheral devices, such as keyboards, mouse devices, and printers,
to a system.</p><p>USB connectors are designed to fit only one type of cable, in
one way. The primary design motivation for USB was to alleviate the need
for multiple connector types for different devices. This design reduces the clutter on the
back panel of a system.</p><p>Devices connect to USB ports on external USB hubs, or on a
root hub that is located on the computer itself. Since hubs have several
ports, several branches of a device tree can stem from a hub.<a name="indexterm-111"></a></p><p>For more information, see <a href="http://docs.sun.com/doc/819-2254/usba-7d?a=view"><tt>usba</tt>(7D)</a> or go to the following site:</p><p><a href="http://www.usb.org">http://www.usb.org</a></p>

<a name="devusbover-7"></a><h4>Commonly Used USB Acronyms</h4>
<p><a name="indexterm-112"></a>The following table describes the USB acronyms that are used in the Solaris
OS. For a complete description of USB components and acronyms, go to:</p><p><a href="http://www.usb.org">http://www.usb.org</a></p><table><col width="92.88*"><col width="317.08*"><col width="289.03*"><tr><th align="left" valign="top" scope="column"><p>Acronym</p></th>
<th align="left" valign="top" scope="column"><p>Definition</p></th>
<th align="left" valign="top" scope="column"><p>For More Information</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>UGEN</p></td>
<td align="left" valign="top" scope="row"><p>USB generic driver</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2254/ugen-7d?a=view"><tt>ugen</tt>(7D)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>USB</p></td>
<td align="left" valign="top" scope="row"><p>Universal Serial Bus</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2254/usb-7d?a=view"><tt>usb</tt>(7D)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>USBA</p></td>
<td align="left" valign="top" scope="row"><p>Universal Serial Bus Architecture (Solaris)</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2254/usba-7d?a=view"><tt>usba</tt>(7D)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>USBAI</p></td>
<td align="left" valign="top" scope="row"><p>USBA Client
Driver Interface (Solaris)</p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>HCD</p></td>
<td align="left" valign="top" scope="row"><p>USB host controller driver</p></td>
<td align="left" valign="top" scope="row"><p>N/A</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>EHCI</p></td>
<td align="left" valign="top" scope="row"><p>Enhanced Host Controller Interface</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2254/ehci-7d?a=view"><tt>ehci</tt>(7D)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>OHCI</p></td>
<td align="left" valign="top" scope="row"><p>Open Host Controller Interface</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2254/ohci-7d?a=view"><tt>ohci</tt>(7D)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>UHCI</p></td>
<td align="left" valign="top" scope="row"><p>Universal
Host Controller Interface</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2254/uhci-7d?a=view"><tt>uhci</tt>(7D)</a></p></td>
</tr>
</table>

<a name="devusbover-8"></a><h4>USB Bus Description</h4>
<p><a name="indexterm-113"></a>The USB specification is openly available and free of royalties. The specification defines
the electrical and mechanical interfaces of the bus and the connectors.</p><p><a name="indexterm-114"></a>USB employs a topology in which hubs provide attachment points for USB devices.
The host controller contains the root hub, which is the origin of all
USB ports in the system. For more information about hubs, see <a href="devusbover-9.html#devusbover-17">USB Host Controller and Hubs</a>.</p><a name="devusbover-fig-20"></a><h6>Figure&nbsp;7-1 USB Physical Device Hierarchy</h6><img src="figures/usb_dev_hie.gif" alt="Diagram shows a system with three active USB ports that includes a compound device (hub and printer) and composite device (keyboard and mouse)."></img><p><a href="#devusbover-fig-20">Figure&nbsp;7-1</a> shows a system with three active USB ports. The first USB port
connects a USB memory stick. The second USB port connects an external hub,
which in turn, connects a cdrw device and a composite keyboard/mouse device. As
a <b>composite device</b>, this keyboard contains a USB controller, which operates both the keyboard
and an attached mouse. The keyboard and the mouse share a common USB
bus address because they are directed by the same USB controller.</p><p><a name="indexterm-115"></a><a name="indexterm-116"></a><a href="#devusbover-fig-20">Figure&nbsp;7-1</a> also shows an example of a hub and a printer as
a <b>compound device</b>. The hub is an external hub that is enclosed in
the same casing as the printer. The printer is permanently connected to the
hub. The hub and printer have separate USB bus addresses. </p><p><a name="indexterm-117"></a>The device tree path name for some of the devices that are
displayed in <a href="#devusbover-fig-20">Figure&nbsp;7-1</a> are listed here.</p><dl><dt>Memory stick</dt>
<dd><p><tt>/pci@1f,4000/usb@5/storage@1</tt></p></dd>
<dt>Keyboard</dt>
<dd><p><tt>/pci@1f,4000/usb@5/hub@2/device@1/keyboard@0</tt></p></dd>
<dt>Mouse</dt>
<dd><p><tt>/pci@1f,4000/usb@5/hub@2/device@1/mouse@1</tt></p></dd>
<dt>cdrw device</dt>
<dd><p><tt>/pci@1f,4000/usb@5/hub@2/storage@3</tt></p></dd>
<dt>Printer</dt>
<dd><p><tt>/pci@1f,4000/usb@5/hub@3/printer@1</tt></p></dd>
</dl>


<a name="devusbover-18"></a><h5>USB Devices and Drivers</h5>
<p><a name="indexterm-118"></a><a name="indexterm-119"></a>USB devices with similar attributes and services are grouped into device classes. 
Devices within a class are managed by the same device driver pair. However,
the USB specification also allows for vendor-specific devices that are not part of a
specific class.</p><p>The Human Interface Device (HID) class contains devices that are user-controlled such as
the following devices:</p>
<ul><li><p>Keyboards</p></li>
<li><p>Mouse devices</p></li>
<li><p>Joysticks</p></li></ul>
<p>The Communication Device class includes the following devices:</p>
<ul><li><p>Modems</p></li>
<li><p>Ethernet adapters</p></li></ul>
<p>Other device classes include the following classes:</p>
<ul><li><p>Audio</p></li>
<li><p>Monitor</p></li>
<li><p>Printer</p></li>
<li><p>Storage Device</p></li></ul>
<p>Each USB device contains descriptors that reflect the class of the device. A
device class specifies how its members should behave in configuration and data transfer.
You can obtain additional class information from:</p><p><a href="http://www.usb.org">http://www.usb.org</a></p><p>For more information about USB devices supported in the Solaris release, see <a href="http://docs.sun.com/doc/819-2254/usb-7d?a=view"><tt>usb</tt>(7D)</a>.</p>

<a name="fpkbw"></a><h5>USB Driver Enhancements</h5>
<p>The following USB driver enhancements are included.</p>
<ul><li><p><b>USB CDC ACM device support &ndash;</b> The <tt>acm</tt> driver can work with devices that are compliant with the USB Communication Class Device specification's Abstract Control Model and some PCMCIA cards that have modem capabilities.</p><p>The <tt>pppd</tt> daemon can access these devices through the <tt>/dev/term/[0~9]</tt>* entries. For more information, see <a href="http://docs.sun.com/doc/819-2240/pppd-1m?a=view"><tt>pppd</tt>(1M)</a>.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2254/usbsacm-7d?a=view"><tt>usbsacm</tt>(7D)</a>.</p></li>
<li><p><b>Generic USB driver &ndash;</b> USB devices can now be accessed and manipulated by applications using standard UNIX<sup>&reg;</sup>
				  read(2) and write(2) system calls, and without writing a special kernel driver. Additional features include:</p>
<ul><li><p>Applications have access to raw device data and device status.</p></li>
<li><p>The driver supports control, bulk, and interrupt (in and out) transfers.</p></li></ul>
<p>Starting in the Solaris 10 6/06 release, the <tt>ugen</tt> driver no longer needs to bind explicitly to a device. By default, <tt>usb_mid</tt> binds to devices that lack a class driver and exports a <tt>ugen</tt> interface that works with <tt>libusb</tt>. For example, you can plug in a USB camera that is not a mass-storage device and use a <tt>libusb</tt> application to access it. In addition, both <tt>scsa2usb</tt> and <tt>usbprn</tt> drivers export <tt>ugen</tt> interfaces and <tt>libusb</tt> applications can be used on these classes of devices directly.</p><p>For more information, refer to <a href="http://docs.sun.com/doc/819-2254/ugen-7d?a=view"><tt>ugen</tt>(7D)</a>.</p></li>
<li><p><b>USB serial driver support</b></p>
<ul><li><p>Digi Edgeport USB support &ndash; The Edgeport USB driver only works with Edgeport devices and not with other USB serial devices.</p>
<ul><li><p>New devices are accessed as <tt>/dev/term/[0-9]*</tt> and <tt>/dev/cua/[0-9]*</tt>.</p></li>
<li><p>USB serial ports are usable as any other serial port would be, except that they cannot serve as a local serial console. The fact that their data is run through a USB port is transparent to the user.</p></li></ul>
<p>For more information, see <a href="http://docs.sun.com/doc/819-2254/usbser-edge-7d?a=view"><tt>usbser_edge</tt>(7D)</a>, or go to the following sites:</p>
<ul><li><p><a href="http://www.digi.com">http://www.digi.com</a></p></li>
<li><p><a href="http://www.sun.com/io">http://www.sun.com/io</a></p></li></ul>
</li>
<li><p>Keyspan &ndash; The Keyspan USB serial driver only works with Keyspan devices, which currently supports the USA-19HS and USA-49WLC models.<a name="indexterm-120"></a></p><p>For more information, see <a href="http://docs.sun.com/doc/819-2254/usbsksp-7d?a=view"><tt>usbsksp</tt>(7D)</a>.</p></li>
<li><p>Prolific &ndash; The Prolific USB serial driver only works with devices based on the PL2303 chipset.</p><p>For more information, see <a href="http://docs.sun.com/doc/819-2254/usbsprl-7d?a=view"><tt>usbsprl</tt>(7D)</a>.</p></li></ul>
<p>For more information about the USB to serial devices support, go to the following site:</p><p><a href="http://www.sun.com/io_technologies/usb/USB-Faq.html">http://www.sun.com/io_technologies/usb/USB-Faq.html</a></p></li>
<li><p><b>Documentation and binary support for user-written kernel and userland drivers &ndash;</b> For up-to-date information on USB driver development, go to:</p>
<ul><li><p><a href="http://www.sun.com/io_technologies/usb/USB-Faq.html">http://www.sun.com/io_technologies/usb/USB-Faq.html</a></p></li>
<li><p><a href="http://developers.sun.com/solaris/developer/support/driver/usb.html">http://developers.sun.com/solaris/developer/support/driver/usb.html</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-3196/usb-1?a=view">Chapter 20, USB Drivers, in <i>Writing Device Drivers</i></a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-3196/lp64-35004?a=view">Appendix C, <i>Making a Device Driver 64-Bit Ready,</i> in <i>Writing Device Drivers</i></a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-3159"><i>Device Driver Tutorial</i></a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2254/intro-7?a=view"><tt>Intro</tt>(7)</a>, <a href="http://docs.sun.com/doc/819-2256/intro-9f?a=view"><tt>Intro</tt>(9F)</a>, and <a href="http://docs.sun.com/doc/819-2257/intro-9s?a=view"><tt>Intro</tt>(9S)</a></p></li>
<li><p><a href="http://developers.sun.com/prodtech/solaris/driverdev/reference/codesamples/usb_security/index.html">http://developers.sun.com/prodtech/solaris/driverdev/reference/codesamples/usb_security/index.html</a></p></li></ul>
</li></ul>


<a name="fpkea"></a><h5>The EHCI, OHCI, and UHCI Drivers</h5>
<p>Features of the EHCI driver include:</p>
<ul><li><p>Complies with enhanced host controller interface that supports USB 2.0.</p></li>
<li><p>Supports high-speed control, bulk, interrupt, and isochronous transfers.</p></li></ul>

<ul><li><p>The USB 2.0 chip has one EHCI controller and one or more OHCI or UHCI controllers.<a name="indexterm-121"></a></p></li>
<li><p>A USB 1.1 device is dynamically assigned to the OHCI or UHCI controller when it is plugged in. A USB 2.0 device is dynamically assigned to the EHCI controller when it is plugged in.</p></li></ul>
<p>Use the <tt>prtconf</tt> command output to identify whether your system supports USB 1.1
or USB 2.0 devices. For example:</p><pre># prtconf  -D | egrep "ehci|ohci|uhci"</pre><p>If your <tt>prtconf</tt> output identifies an EHCI controller, your system supports USB 2.0
devices.</p><p>If your <tt>prtconf</tt> output identifies an OHCI or UHCI controller, your system supports
USB 1.1 devices.</p>

<a name="devusbover-19"></a><h5>Solaris USB Architecture (USBA)</h5>
<p><a name="indexterm-122"></a><a name="indexterm-123"></a>USB devices can be represented as two levels of device tree nodes. A
device node represents the entire USB <i>device</i>. One or more child <i>interface</i>
nodes represent the individual USB interfaces on the device. </p><p>Driver binding is achieved by using the compatible name properties. For more information,
refer to 3.2.2.1 of the IEEE 1275 USB binding and <a href="http://docs.sun.com/doc/819-3196"><i>Writing Device Drivers</i></a>. A driver
can either bind to the entire device and control all the interfaces, or
can bind to just one interface. If no vendor or class driver
claims the entire device, a generic USB multi-interface driver is bound to the
device-level node. This driver attempts to bind drivers to each interface by using
compatible names properties, as defined in section 3.3.2.1 of the IEEE 1275 binding
specification.</p><p>The Solaris USB Architecture (USBA) adheres to the USB 1.1 and USB
2.0 specifications and is part of the Solaris  Device Driver Interface (DDI). The
USBA model is similar to Sun Common SCSI Architecture (SCSA). As the
following figure shows, the USBA is a thin layer that provides a generic
USB transport-layer abstraction to client drivers, providing them with services that implement core generic
USB functionality.</p><a name="devusbover-fig-36"></a><h6>Figure&nbsp;7-2 Solaris USB Architecture (USBA)</h6><img src="figures/usba-fw.gif" alt="Diagram shows the relationship between client drivers, USBA framework, host controller drivers, and the device bus."></img>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="devusbover-28.html">Previous</a>
             </td>
             <td align="right">
                 <a href="devusbover-9.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

