<chapter id="disksconcepts-29477"><title>Managing Disks (Overview)</title><highlights><para>This chapter provides overview information about Solaris disk slices
and introduces the <command>format</command> utility.</para><para>This is a list of overview information in this chapter. </para><itemizedlist><listitem><para><olink targetptr="gdgtz" remap="internal">What's New in Disk Management?</olink></para>
</listitem><listitem><para><olink targetptr="disksconcepts-6" remap="internal">Where to Find Disk Management
Tasks</olink></para>
</listitem><listitem><para><olink targetptr="disksconcepts-1" remap="internal">Overview of Disk Management</olink></para>
</listitem><listitem><para><olink targetptr="disksconcepts-35202" remap="internal">Disk Terminology</olink></para>
</listitem><listitem><para><olink targetptr="disksconcepts-47761" remap="internal">About Disk Labels</olink></para>
</listitem><listitem><para><olink targetptr="disksconcepts-20068" remap="internal">About Disk Slices</olink></para>
</listitem><listitem><para><olink targetptr="disksconcepts-25867" remap="internal">format Utility</olink></para>
</listitem><listitem><para><olink targetptr="disksconcepts-5" remap="internal">Partitioning a Disk</olink></para>
</listitem>
</itemizedlist><para>For instructions on how to add a disk to your system, see <olink targetptr="diskssadd-16103" remap="internal">Chapter&nbsp;12, SPARC: Adding a Disk (Tasks)</olink> or <olink targetptr="disksxadd-38159" remap="internal">Chapter&nbsp;13, x86: Adding a Disk (Tasks)</olink>.</para>
</highlights><sect1 id="gdgtz"><title>What's New in Disk Management?</title><para>This section describes new disk management features in the Solaris release.</para><itemizedlist><listitem><para><olink targetptr="gdgst" remap="internal">iSNS Support in the Solaris iSCSI Target and
Initiator</olink></para>
</listitem><listitem><para><olink targetptr="gdgsr" remap="internal">Solaris iSCSI Target Support</olink></para>
</listitem><listitem><para><olink targetptr="ftxyw" remap="internal">Solaris iSCSI Initiator Support</olink></para>
</listitem><listitem><para><olink targetptr="gbehx" remap="internal">Disk Management in the GRUB Boot
Environment</olink></para>
</listitem><listitem><para><olink targetptr="ftzen" remap="internal">Support for SCSI Disks That are Larger
Than 2 Tbytes</olink></para>
</listitem>
</itemizedlist><para>For a complete listing of new Solaris features and a description of
Solaris releases, see <olink targetdoc="solwhatsnew" remap="external"><citetitle remap="book">Solaris Express Developer Edition What&rsquo;s New</citetitle></olink>.</para><sect2 id="gdgst"><title>iSNS Support in the Solaris iSCSI
Target and Initiator</title><para><emphasis role="strong">Solaris Express 1/08</emphasis>: This Solaris release provides
support for the Internet Storage Name Service (iSNS) protocol in the Solaris
iSCSI target and initiator software. The iSNS protocol allows for the automated
discovery, management, and configuration of iSCSI devices on a TCP/IP network.</para><para>In this Solaris release, you can use the <command>iscsitadm</command> command
to add access to an existing third-party iSNS server or you can user the Solaris
iSNS server to automatically discover the iSCSI devices in your network. The
iSNS server can be specified by hostname or IP address. After you add the
iSNS server information, you will need to enable access to the server. </para><para>See the following resources for step-by-step instructions:</para><itemizedlist><listitem><para>For information about configuring the Solaris iSCSI target
to use a third-party iSNS server, see <olink targetptr="fmvcd" remap="internal">14 Configuring
Solaris iSCSI Targets and Initiators (Tasks)</olink> and <olink targetdoc="refman1m" targetptr="iscsitadm-1m" remap="external"><citerefentry><refentrytitle>iscsitadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</listitem><listitem><para>For information about configuring the Solaris iSCSI target
with a Solaris iSNS server, see <olink targetptr="gfydr" remap="internal">15 Configuring and
Managing the Solaris Internet Storage Name Service (iSNS)</olink> and <olink targetdoc="refman1m" targetptr="isnsadm-1m" remap="external"><citerefentry><refentrytitle>isnsadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</listitem>
</itemizedlist>
</sect2><sect2 id="gdgsr"><title>Solaris iSCSI Target Support</title><para><emphasis role="strong">Solaris Express 8/06</emphasis>: This Solaris release provides
support for iSCSI target devices, which can be disk or tape devices. Previous
Solaris releases provide support for iSCSI initiators. The advantage of setting
up Solaris iSCSI targets is you might have existing fibre-channel devices
that can be connected to clients without the cost of fibre-channel HBAs. In
addition, systems with dedicated arrays can now export replicated storage
with ZFS or UFS file systems.</para><para>You can use the <command>iscsitadm</command> command to set up and manage
your iSCSI target devices. For the disk device that you select as your iSCSI
target, you'll need to provide an equivalently sized ZFS or UFS file system
as the backing store for the iSCSI daemon.</para><para>After the target device is set up, use the <command>iscsiadm</command> command
to identify your iSCSI targets, which will discover and use the iSCSI target
device.</para><para>For more information, see <olink targetptr="fmvcd" remap="internal">Chapter&nbsp;14,
Configuring Solaris iSCSI Targets and Initiators (Tasks)</olink>, <olink targetdoc="refman1m" targetptr="iscsiadm-1m" remap="external"><citerefentry><refentrytitle>iscsiadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>, and <olink targetdoc="refman1m" targetptr="iscsitadm-1m" remap="external"><citerefentry><refentrytitle>iscsitadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</sect2><sect2 id="ftxyw"><title>Solaris iSCSI Initiator Support</title><para><emphasis role="strong">Solaris Express 6/05</emphasis>: iSCSI is an Internet Protocol
(IP)-based storage networking standard for linking data storage subsystems.
By carrying SCSI commands over IP networks, the iSCSI protocol enables you
to mount disk devices, from across the network, onto your local system. On
your local system, you can use the devices like block devices.</para><para>For more information, see <olink targetptr="fmvcd" remap="internal">Chapter&nbsp;14,
Configuring Solaris iSCSI Targets and Initiators (Tasks)</olink>.</para><sect3 id="gceyz"><title>Solaris iSCSI Initiator Support Enhancements</title><para><emphasis role="strong">Solaris Express 3/06</emphasis>: The following enhancements
have been added to the Solaris iSCSI initiator support:</para><itemizedlist><listitem><para>Dynamic target removal support &ndash; Provides the ability
to remove (or log out) an iSCSI target without rebooting the system. If you
try to remove or disable a discovery method or address, and the target is
not in use, the target is removed and related resources are released. If the
target is in use, the discovery address or method remains enabled, and in
use message is displayed.</para><para>For more information, see <olink targetptr="fqnls" remap="internal">How to Remove Discovered iSCSI Targets</olink>.</para>
</listitem><listitem><para>Internet Storage Name Service (iSNS) client support &ndash;
Enables the iSCSI initiator to discover the targets to which it has access
using as little configuration as possible. It also provides state change notification
functionality to notify the iSCSI initiator when changes in operational state
of storage nodes occur. The <command>iscsiadm</command> command has been enhanced
to support iSNS discovery.</para><para>For more information, see <olink targetptr="fqnlk" remap="internal">How to Configure iSCSI Target Discovery</olink>.</para>
</listitem><listitem><para>Multiple session target (MS/T) support &ndash; Provides the
ability to create more iSCSI sessions or paths to a target on demand. The
additional iSCSI paths provide higher bandwidth aggregation and availability
in specific configurations, such as iSCSI arrays that support login redirection.
The iSCSI MS/T feature should be used in combination with MPxIO or other multipathing
software. The <command>iscsiadm</command> command has been enhanced to support
MS/T.</para>
</listitem>
</itemizedlist><para>For more information about configuring Solaris iSCSI initiators, see <olink targetptr="fmvcd" remap="internal">Chapter&nbsp;14, Configuring Solaris iSCSI Targets and Initiators
(Tasks)</olink> and <olink targetdoc="refman1m" targetptr="iscsiadm-1m" remap="external"><citerefentry><refentrytitle>iscsiadm</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</sect3>
</sect2><sect2 id="gbehx" arch="x86"><title>Disk Management in the GRUB Boot Environment</title><para><emphasis role="strong">Solaris Express 6/05</emphasis>: The GRUB boot menu has replaced
the previous method for booting an x86 system. In the area of disk management,
you use the GRUB interface when booting from an alternative device to replace
a system disk or when installing the bootblocks.</para><para>The GRUB boot environment provides the following features:</para><itemizedlist><listitem><para><emphasis role="strong">Solaris failsafe boot</emphasis> &ndash;
A Solaris failsafe boot option that boots into the miniroot so you can recover
from a problem that is preventing the system from booting without having to
boot from an alternative device. Use the arrow keys to select the following
option from the GRUB boot menu and then press return:</para><screen>Solaris failsafe</screen><para>You'll need to reboot the system after using the Solaris failsafe boot
option.</para>
</listitem><listitem><para><emphasis role="strong">Network boot</emphasis> &ndash; Boot
from the network by pressing the F12 key during the BIOS configuration phase.</para>
</listitem><listitem><para><emphasis role="strong">Single-user boot</emphasis> &ndash;
Boot to single-user mode by selecting this option from the Solaris failsafe
boot menu:</para><screen>kernel /platform/i86pc/multiboot</screen><para>Then, use the <literal>e</literal> (edit) option to add the <option>s</option> single-user
option. For example:</para><screen>kernel /platform/i86pc/multiboot <userinput>-s</userinput></screen><para>Press return and then press the b key to boot the system. Press control-D
to boot the system back to multiuser mode.</para>
</listitem>
</itemizedlist><para>In the GRUB environment, you cannot use the <command>fmthard</command> command
to install the boot blocks automatically when run on an x86 system. You must
install the boot blocks separately.</para><para>For detailed feature information and instructions on using the new GRUB
based booting on x86 systems, see <olink targetdoc="sysadv1" targetptr="hbx86boot-68676" remap="external">Chapter 12, <citetitle remap="chapter">Booting
a Solaris System With GRUB (Tasks),</citetitle> in <citetitle remap="book">System
Administration Guide: Basic Administration</citetitle></olink>.</para><para>For instructions for managing disks in the GRUB boot environment, see
the following references:</para><itemizedlist><listitem><para><olink targetptr="disksxadd-45774" remap="internal">How to Install a Boot Block
on a System Disk</olink></para>
</listitem><listitem><para><olink targetptr="disksxadd-12484" remap="internal">How to Connect a System
Disk</olink></para>
</listitem>
</itemizedlist><para>This feature is not available on SPARC systems.</para>
</sect2><sect2 id="ftzen"><title>Support for SCSI Disks That are Larger Than 2 Tbytes</title><para><emphasis role="strong">Solaris Express 6/05</emphasis>: The SCSI driver, <filename>ssd</filename> or <filename>sd</filename>, is limited to 2 terabytes in the Solaris 10 release. Starting
in the Solaris 10 1/06 release, the SCSI driver, <filename>ssd</filename> or <filename>sd</filename>, supports 2 terabytes and greater.</para><para>The <command>format</command> utility can be used to label, configure,
and partition these larger disks. For information about using the EFI disk
label on large disks and restrictions with the <command>fdisk</command> utility,
see <olink targetptr="disksconcepts-17" remap="internal">Restrictions of the EFI Disk Label</olink>.</para>
</sect2>
</sect1><sect1 id="disksconcepts-6"><title>Where to Find Disk Management Tasks</title><para>Use these references to find step-by-step instructions for managing
disks.</para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="50*"/><colspec colname="colspec1" colwidth="50*"/><thead><row rowsep="1"><entry><para>Disk Management Task</para>
</entry><entry><para>For More Information</para>
</entry>
</row>
</thead><tbody><row><entry><para>Format a disk and examine a disk label.</para>
</entry><entry><para><olink targetptr="disksprep-31030" remap="internal">Chapter&nbsp;11, Administering Disks
(Tasks)</olink></para>
</entry>
</row><row><entry><para>Add a new disk to a SPARC system.</para>
</entry><entry><para><olink targetptr="diskssadd-16103" remap="internal">Chapter&nbsp;12, SPARC: Adding a
Disk (Tasks)</olink></para>
</entry>
</row><row><entry><para>Add a new disk to an x86 system.</para>
</entry><entry><para><olink targetptr="disksxadd-38159" remap="internal">Chapter&nbsp;13, x86: Adding a Disk
(Tasks)</olink></para>
</entry>
</row><row><entry><para>Hot-plug a SCSI or PCI disk.</para>
</entry><entry><para><olink targetptr="devconfig2-1" remap="internal">Chapter&nbsp;6, Dynamically Configuring
Devices (Tasks)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect1><sect1 id="disksconcepts-1"><title>Overview of Disk Management</title><para>Managing disks in the Solaris OS usually involves setting up the system
and running the Solaris installation program to create the appropriate disk
slices and file systems and to install the Solaris OS. Occasionally, you
might need to use the <command>format</command> utility to add a new disk
drive or replace a defective disk drive.</para><sect2 id="disksconcepts-35202"><title>Disk Terminology</title><para>Before you can effectively use the information in this section, you
should be familiar with basic disk architecture. In particular, you should
be familiar with the following terms:</para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="colspec0" colwidth="35.96*"/><colspec colname="colspec1" colwidth="64.04*"/><thead><row rowsep="1"><entry><para>Disk Term</para>
</entry><entry><para>Description</para>
</entry>
</row>
</thead><tbody><row><entry><para>Track</para>
</entry><entry><para>A concentric ring on a disk that passes under a single stationary disk
head as the disk rotates.</para>
</entry>
</row><row><entry><para>Cylinder</para>
</entry><entry><para>The set of tracks with the same nominal distance from the axis about
which the disk rotates.</para>
</entry>
</row><row><entry><para>Sector</para>
</entry><entry><para>Section of each disk platter. A sector holds 512 bytes. </para>
</entry>
</row><row><entry><para>Block</para>
</entry><entry><para>A data storage area on a disk. A disk block is 512 bytes.</para>
</entry>
</row><row><entry><para>Disk controller</para>
</entry><entry><para>A chip and its associated circuitry that controls the disk drive.</para>
</entry>
</row><row><entry><para>Disk label</para>
</entry><entry><para>The first sector of a disk that contains disk geometry and partition
information.</para>
</entry>
</row><row><entry><para>Device driver</para>
</entry><entry><para>A kernel module that controls a hardware or virtual device.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>For additional information, see the product information from your disk's
manufacturer.</para>
</sect2><sect2 id="disksconcepts-47761"><title>About Disk Labels</title><para>A special area of every disk is set aside for storing information
about the disk's controller, geometry, and slices. This information is called
the disk's <emphasis>label</emphasis>. Another term that is used to described
the disk label is the <emphasis>VTOC</emphasis> (<emphasis>Volume Table of
Contents</emphasis>) on a disk with a VTOC label. To <emphasis>label</emphasis> a
disk means to write slice information onto the disk. You usually label a disk
after you change its slices. </para><para>The Solaris release supports the following two disk labels:</para><itemizedlist><listitem><para>SMI &ndash; The traditional VTOC label for disks that are
less than 1 terabyte in size.</para>
</listitem><listitem><para>EFI &ndash; Provides support for disks that are larger than
1 terabyte on systems that run a 64-bit Solaris kernel. The Extensible Firmware
Interface GUID Partition Table (EFI GPT) disk label is also available for
disks less than 1 terabyte that are connected to a system that runs a 32-bit
Solaris kernel.</para>
</listitem>
</itemizedlist><para>If you fail to label a disk after you create slices, the slices will
be unavailable because the OS has no way of &ldquo;knowing&rdquo; about the
slices.</para>
</sect2><sect2 id="disksconcepts-14"><title>EFI Disk Label</title><para>The EFI label provides support for physical disks and virtual disk volumes.
This release also includes updated disk utilities for managing disks greater
than 1 terabyte. The UFS file system is compatible with the EFI disk label,
and you can create a UFS file system greater than 1 terabyte. For information
on creating a multiterabyte UFS file system, see <olink targetptr="fsoverview-18" remap="internal">Support of Multiterabyte UFS File Systems</olink>.</para><para>The unbundled Sun QFS file system is also available if you need to create
file systems greater than 1 terabyte. For information on the Sun QFS file
system, see <olink targetdoc="816-2542-10" remap="external"><citetitle remap="book">Sun QFS,
Sun SAM-FS, and Sun SAM-QFS File System Administrator&rsquo;s Guide</citetitle></olink>.</para><para>The Solaris Volume Manager software can also be used to manage disks
greater than 1 terabyte in this Solaris release. For information on using
Solaris Volume Manager, see <olink targetdoc="logvolmgradmin" remap="external"><citetitle remap="book">Solaris Volume Manager Administration Guide</citetitle></olink>.</para><para>The VTOC label is still available for disks less than 1 terabyte in
size. If you are only using disks smaller than 1 terabyte on your systems,
managing disks will be the same as in previous Solaris releases. In addition,
you can use the <command>format</command><option>e</option> command to label
a disk less than 1 terabyte with an EFI label. For more information, see <olink targetptr="disksprep-116" remap="internal">Example&nbsp;11&ndash;6</olink>.</para><para>You can use the <command>format</command> <option>e</option> command
to apply an EFI label to a disk if the system is running the appropriate Solaris
release. However, you should review the important information in <olink targetptr="disksconcepts-17" remap="internal">Restrictions of the EFI Disk Label</olink> before
attempting to apply an EFI label.</para><sect3 id="disksconcepts-16"><title>Comparison of the EFI Label and the VTOC
Label</title><para>The EFI disk label differs from the VTOC disk label in the following
ways:</para><itemizedlist><listitem><para>Provides support for disks greater than 1 terabyte in size.</para>
</listitem><listitem><para>Provides usable slices 0-6, where slice 2 is just another
slice.</para>
</listitem><listitem><para>Partitions (or slices) cannot overlap with the primary or
backup label, nor with any other partitions. The size of the EFI label is
usually 34 sectors, so partitions start at sector 34. This feature means that
no partition can start at sector zero (0).</para>
</listitem><listitem><para>No cylinder, head, or sector information is stored in the
EFI label. Sizes are reported in blocks.</para>
</listitem><listitem><para>Information that was stored in the alternate cylinders area,
the last two cylinders of the disk, is now stored in slice 8.</para>
</listitem><listitem><para>If you use the <command>format</command> utility to change
partition sizes, the <literal>unassigned</literal> partition tag is assigned
to partitions with sizes equal to zero. By default, the <command>format</command> utility
assigns the <literal>usr</literal> partition tag to any partition with a size
greater than zero. You can use the partition change menu to reassign partition
tags after the partitions are changed. However, you cannot change a partition
with a non-zero size to the <literal>unassigned</literal> partition tag.</para>
</listitem>
</itemizedlist>
</sect3><sect3 id="disksconcepts-17"><title>Restrictions of the EFI Disk Label</title><para>Keep the following restrictions in mind when determining whether using
disks greater than 1 terabyte is appropriate for your environment:</para><itemizedlist><listitem><para>Layered software products intended for systems with VTOC-labeled
disks might be incapable of accessing a disk with an EFI disk label.</para>
</listitem><listitem><para>A disk with an EFI label is not recognized on systems running
previous Solaris releases.</para>
</listitem><listitem><para>You cannot boot from a disk with an EFI disk label.</para>
</listitem><listitem><para>You cannot use the <command>fdisk</command> command on a disk
with an EFI label that is greater than 1 terabyte in size.</para>
</listitem><listitem><para>You cannot use the Solaris Management Console's Disk Manager
tool to manage disks with EFI labels. Use the <command>format</command> utility
to partition disks with EFI labels. Then, you can use the Solaris Management
Console's Enhanced Storage Tool to manage volumes and disk sets with EFI-labeled
disks.</para>
</listitem><listitem><para>The EFI specification prohibits overlapping slices. The entire
disk is represented by <replaceable>cxtydz</replaceable>.</para>
</listitem><listitem><para>The EFI disk label provides information about disk or partition
sizes in sectors and blocks, but not in cylinders and heads.</para>
</listitem><listitem><para>The following <command>format</command> options are either
not supported or are not applicable on  disks with EFI labels:</para><itemizedlist><listitem><para>The <command>save</command> option is not supported because
disks with EFI labels do not need an entry in the <filename>format.dat</filename> file.</para>
</listitem><listitem><para>The <command>backup</command> option is not applicable because
the disk driver finds the primary label and writes it back to the disk.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</sect3><sect3 id="fsulx"><title>Support for EFI-Labeled Disks on x86 Systems</title><para>Solaris support for the EFI disk label is available on x86 systems.
Use the following command to add an EFI label on an x86 system:</para><screen># <userinput>format -e</userinput>
> [0] SMI Label
> [1] EFI Label
> Specify Label type[0]: <userinput>1</userinput>
> WARNING: converting this device to EFI labels will erase all current
> fdisk partition information. Continue? <userinput>yes</userinput></screen><para>Previous label information is not converted to the EFI disk label. </para><para>You will have to recreate the label's partition information manually
with the <command>format</command> command. You cannot use the <command>fdisk</command> command
on a disk with an EFI label that is greater than 1 terabyte in size. The <command>fdisk</command> command is not intended for disks that are larger than 1 terabyte.
For more information about EFI disk labels, see the preceding section.</para>
</sect3><sect3 id="disksconcepts-19"><title>Installing a System With an EFI-Labeled
Disk</title><para>The Solaris installation utilities automatically recognize disks with
EFI labels. However, you cannot use the Solaris installation program to repartition
these disks. You must use the <command>format</command> utility to repartition
an EFI-labeled disk before or after installation. The Solaris Upgrade and
Live Upgrade utilities also recognize a disk with an EFI label. However, you
cannot boot a system from an EFI-labeled disk.</para><para>After the Solaris release is installed on a system with an EFI-labeled
disk, the partition table appears similar to the following:</para><screen>Current partition table (original):
Total disk sectors available: 2576924638 + 16384 (reserved sectors)

Part      Tag    Flag     First Sector          Size          Last Sector
  0       root    wm                34         1.20TB           2576924636
  1 unassigned    wm                 0            0                0    
  2 unassigned    wm                 0            0                0    
  3 unassigned    wm                 0            0                0    
  4 unassigned    wm                 0            0                0    
  5 unassigned    wm                 0            0                0    
  6 unassigned    wm                 0            0                0    
  8   reserved    wm        2576924638         8.00MB           2576941021</screen>
</sect3><sect3 id="disksconcepts-18"><title>Managing Disks With EFI Disks Labels</title><para>Use the following table to locate information on managing disks with
EFI disk labels.</para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colwidth="50*"/><colspec colwidth="50*"/><thead><row rowsep="1"><entry><para>Task</para>
</entry><entry><para>For More Information</para>
</entry>
</row>
</thead><tbody><row><entry><para>If the system is already installed, connect the disk to the system and
perform a reconfiguration boot.</para>
</entry><entry><para><olink targetptr="diskssadd-53" remap="internal">Adding a System Disk or a Secondary
Disk (Task Map)</olink> or <olink targetptr="disksxadd-73" remap="internal">Adding a System
Disk or a Secondary Disk (Task Map)</olink></para>
</entry>
</row><row><entry><para>Repartition the disk by using the <command>format</command> utility,
if necessary.</para>
</entry><entry><para><olink targetptr="diskssadd-43616" remap="internal">How to Create Disk Slices and Label
a Disk</olink> or <olink targetptr="disksxadd-33190" remap="internal">How to Create Disk Slices
and Label a Disk</olink></para>
</entry>
</row><row><entry><para>Create disk volumes, and if needed, create soft partitions by using
Solaris Volume Manager. Or, set up a ZFS storage pool.</para>
</entry><entry><para><olink targetdoc="logvolmgradmin" targetptr="storage-overview-1" remap="external">Chapter
2, <citetitle remap="chapter">Storage Management Concepts,</citetitle> in <citetitle remap="book">Solaris Volume Manager Administration Guide</citetitle></olink> or <olink targetdoc="zfsadmin" targetptr="gayob" remap="external"><citetitle remap="section">Creating
a ZFS Storage Pool</citetitle> in <citetitle remap="book">ZFS Administration
Guide</citetitle></olink></para>
</entry>
</row><row><entry><para>Create UFS file systems for the new disk by using the <command>newfs</command> command.</para>
</entry><entry><para><olink targetptr="diskssadd-40446" remap="internal">How to Create a UFS File System</olink> or <olink targetptr="disksxadd-41967" remap="internal">How to Create File Systems</olink></para>
</entry>
</row><row><entry><para>Or, create a ZFS file system.*</para>
</entry><entry><para><olink targetdoc="zfsadmin" targetptr="gayog" remap="external"><citetitle remap="section">How
to Create ZFS File Systems</citetitle> in <citetitle remap="book">ZFS Administration
Guide</citetitle></olink></para>
</entry>
</row><row><entry><para>Clone a disk with an EFI label</para>
</entry><entry><para><olink targetptr="fpyma" remap="internal">Example&nbsp;28&ndash;2</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>*If a ZFS file system or UFS file system does not meet your needs, consider
a QFS file system.</para>
</sect3><sect3 id="disksconcepts-22"><title>Troubleshooting Problems With EFI Disk
Labels</title><para>Use the following error messages and solutions to troubleshoot problems
with EFI-labeled disks.</para><variablelist termlength="wholeline"><varlistentry><term>Error Message</term><listitem><screen>Dec  3 09:26:48 holoship scsi: WARNING: /sbus@a,0/SUNW,socal@d,10000/
sf@1,0/ssd@w50020f23000002a4,0 (ssd1):
Dec  3 09:26:48 holoship disk has 2576941056 blocks, which is too large 
for a 32-bit kernel</screen>
</listitem>
</varlistentry><varlistentry><term>Cause</term><listitem><para>You attempted to boot a system running a 32-bit SPARC or x86
kernel with a disk greater than 1 terabyte.</para>
</listitem>
</varlistentry><varlistentry><term>Solution</term><listitem><para>Boot a system running a 64-bit SPARC or x86 kernel with a
disk greater than 1 terabyte.</para>
</listitem>
</varlistentry><varlistentry><term>Error Message</term><listitem><screen>Dec  3 09:12:17 holoship scsi: WARNING: /sbus@a,0/SUNW,socal@d,10000/
sf@1,0/ssd@w50020f23000002a4,0 (ssd1):
Dec  3 09:12:17 holoship corrupt label - wrong magic number</screen>
</listitem>
</varlistentry><varlistentry><term>Cause</term><listitem><para>You attempted to add a disk to a system running an older Solaris
release.</para>
</listitem>
</varlistentry><varlistentry><term>Solution</term><listitem><para>Add the disk to a system running the Solaris release that
supports the EFI disk label.</para>
</listitem>
</varlistentry>
</variablelist>
</sect3>
</sect2><sect2 id="disksconcepts-20068"><title>About Disk Slices</title><para>Files stored on a disk are contained in file systems. Each file system
on a disk is assigned to a <emphasis>slice</emphasis>, which is a group of
sectors set aside for use by that file system. Each disk slice appears to
the Solaris OS (and to the system administrator) as though it were a separate
disk drive.</para><para>For information about file systems, see <olink targetptr="fsoverview-38559" remap="internal">Chapter&nbsp;16, Managing File Systems (Overview)</olink>.</para><note><para>Slices are sometimes referred to as <replaceable>partitions</replaceable>.
Certain interfaces, such as the <command>format</command> utility, refer to
slices as partitions.</para>
</note><para>When setting up slices, remember these rules:</para><itemizedlist><listitem><para>Each disk slice holds only one file system.</para>
</listitem><listitem><para>No file system can span multiple slices.</para>
</listitem>
</itemizedlist><para>Slices are set up slightly differently on SPARC and x86 platforms.
The following table summarizes the differences.</para><table frame="topbot" id="disksconcepts-97082"><title>Slice Differences on
SPARC and x86 Platforms</title><tgroup cols="2" colsep="0" rowsep="1"><colspec colname="column1" colwidth="180*"/><colspec colname="column2" colwidth="180*"/><thead><row><entry><para>SPARC Platform</para>
</entry><entry><para>x86 Platform</para>
</entry>
</row>
</thead><tbody><row rowsep="0"><entry><para>The entire disk is devoted to Solaris OS.</para>
</entry><entry><para>Disk is divided into <literal>fdisk</literal> partitions, one <literal>fdisk</literal> partition per operating system.</para>
</entry>
</row><row><entry><para><emphasis role="strong">VTOC</emphasis> &ndash; The disk is divided
into 8 slices, numbered 0-7.</para><para><emphasis role="strong">EFI</emphasis> &ndash; The disk is divided into
7 slices, numbered 0-6.</para>
</entry><entry><para><emphasis role="strong">VTOC</emphasis> &ndash; The Solaris <literal>fdisk</literal> partition
is divided into 10 slices, numbered 0&ndash;9.</para><para><emphasis role="strong">EFI</emphasis> &ndash; The disk is divided into
7 slices, numbered 0-6</para>
</entry>
</row>
</tbody>
</tgroup>
</table><para>Solaris Volume Manager, previously the Solstice <trademark>DiskSuite</trademark>,
has a partitioning feature, <emphasis>soft partitions</emphasis>. Soft partitions
enable more than eight partitions per disk.</para><para>For general information about Solaris Volume Manager, see <olink targetdoc="logvolmgradmin" targetptr="storage-overview-1" remap="external">Chapter 2, <citetitle remap="chapter">Storage Management Concepts,</citetitle> in <citetitle remap="book">Solaris Volume Manager Administration Guide</citetitle></olink>.
For information on soft partitions, see <olink targetdoc="logvolmgradmin" targetptr="about-softpart-1" remap="external">Chapter 12, <citetitle remap="chapter">Soft Partitions
(Overview),</citetitle> in <citetitle remap="book">Solaris Volume Manager
Administration Guide</citetitle></olink>.</para><sect3 id="disksconcepts-12351"><title>Disk Slices</title><para>The following table describes the slices that might be found on a system
that runs the Solaris OS.</para><para>On x86 systems:</para><itemizedlist><listitem><para>Disks are divided into <literal>fdisk</literal> partitions.
An <literal>fdisk</literal> partition is a section of the disk that is reserved
for a particular operating system, such as the Solaris OS.</para>
</listitem><listitem><para>The Solaris OS places ten slices, numbered 0-9, on a Solaris <literal>fdisk</literal> partition.</para>
</listitem>
</itemizedlist><table frame="topbot" id="disksconcepts-25860"><title>Customary Disk Slices</title><tgroup cols="4" colsep="0" rowsep="0"><colspec colname="column1" colwidth="43.66*"/><colspec colname="column2" colwidth="57.30*"/><colspec colname="column3" colwidth="92.18*"/><colspec colname="column4" colwidth="157.37*"/><thead><row rowsep="1"><entry><para> Slice</para>
</entry><entry><para>File System</para>
</entry><entry><para>Usually Found on Client or Server Systems?</para>
</entry><entry><para>Comments</para>
</entry>
</row>
</thead><tbody><row><entry><para>0</para>
</entry><entry><para>root (<filename>/</filename>)</para>
</entry><entry><para>Both</para>
</entry><entry><para>Holds files and directories that make up the OS.</para><para><emphasis role="strong">EFI</emphasis> &ndash; You cannot boot from
a disk with an EFI label.</para>
</entry>
</row><row><entry><para>1</para>
</entry><entry><para>swap</para>
</entry><entry><para>Both</para>
</entry><entry><para>Provides virtual memory, or <emphasis>swap space</emphasis>. </para>
</entry>
</row><row><entry><para>2</para>
</entry><entry><para>&mdash;</para>
</entry><entry><para>Both</para>
</entry><entry><para><emphasis role="strong">VTOC</emphasis> &ndash; Refers to the entire
disk, by convention. The size of this slice should not be changed.</para><para><emphasis role="strong">EFI</emphasis> &ndash; Optional slice to be
defined based on your site's needs.</para>
</entry>
</row><row><entry><para>3</para>
</entry><entry><para><filename>/export</filename>, for example</para>
</entry><entry><para>Both</para>
</entry><entry><para>Optional slice that can be defined based on your site's needs.</para><para>Can be used on a server to hold alternative versions of operating systems
that are required by client systems.</para>
</entry>
</row><row><entry><para>4</para>
</entry><entry><para></para>
</entry><entry><para>Both</para>
</entry><entry><para>Optional slice to be defined based on your site's needs.</para>
</entry>
</row><row><entry><para>5</para>
</entry><entry><para><filename>/opt</filename>, for example</para>
</entry><entry><para>Both</para>
</entry><entry><para>Optional slice to be defined based on your site's needs.</para><para>Can be used to hold application software added to a system. If a slice
is not allocated for the <filename>/opt</filename> file system during installation,
the <filename>/opt</filename> directory is put in slice 0.</para>
</entry>
</row><row><entry><para>6</para>
</entry><entry><para><filename>/usr</filename></para>
</entry><entry><para>Both</para>
</entry><entry><para>Holds OS commands (also known as <emphasis>executables</emphasis>).
This slice also holds documentation, system programs (<command>init</command> and <command>syslogd</command>, for example), and library routines.</para>
</entry>
</row><row><entry><para>7</para>
</entry><entry><para><filename>/home</filename> or</para><para><filename>/export/home</filename></para>
</entry><entry><para>Both</para>
</entry><entry><para>Holds files that are created by users.</para>
</entry>
</row><row><entry><para>8</para>
</entry><entry><para>N/A</para>
</entry><entry><para>N/A</para>
</entry><entry><para><emphasis role="strong">VTOC</emphasis> &ndash; Contains GRUB boot information.</para><para><emphasis role="strong">EFI</emphasis> &ndash; A reserved slice created
by default. This area is similar to the VTOC's alternate cylinders.  Do not
modify or delete this slice.</para>
</entry>
</row><row><entry><para>9 (<emphasis role="strong">x86 only</emphasis>)</para>
</entry><entry><para>&mdash;</para>
</entry><entry><para>Both</para>
</entry><entry><para><emphasis role="strong">EFI</emphasis> &ndash; Not applicable.</para><para><emphasis role="strong">VTOC</emphasis> &ndash; Provides an area that
is reserved for alternate disk blocks. Slice 9 is known as the alternate sector
slice.</para>
</entry>
</row>
</tbody>
</tgroup>
</table><note><para>On a disk with a VTOC label, do not modify slice or use slice
2 to store a file system. Products, such as Solaris Volume Manager and Live
Upgrade, do not work correctly if slice 2 is modified in any way.</para>
</note>
</sect3><sect3 id="disksconcepts-7"><title>Using Raw Data Slices</title><para>The disk label is stored in block 0 of each disk. So, third-party database
applications that create raw data slices must not start at block 0. Otherwise,
the disk label will be overwritten, and the data on the disk will be inaccessible.
 </para><para>Do not use the following areas of the disk for raw data slices, which
are sometimes created by third-party database applications:  </para><itemizedlist><listitem><para>Block 0 where the disk label is stored</para>
</listitem><listitem><para>Slice 2, which represents the entire disk with a VTOC label</para>
</listitem>
</itemizedlist>
</sect3><sect3 id="disksconcepts-11261"><title>Slice Arrangements on Multiple Disks</title><para>Although a single large disk can hold all slices and their corresponding
file systems, two or more disks are often used to hold a system's slices and
file systems.</para><note><para>A slice cannot be split between two or more disks. However, multiple
swap slices on separate disks are allowed.</para>
</note><para>For instance, a single disk might hold the root (<filename>/</filename>)
file system, a swap area, and the <filename>/usr</filename> file system, while
another disk holds the <filename>/export/home</filename> file system and other
file systems that contain user data.</para><para>In a multiple disk arrangement, the disk that contains the OS
and swap space (that is, the disk that holds the root (<filename>/</filename>)
and <filename>/usr</filename> file systems and the slice for swap space) is
called the <emphasis>system disk</emphasis>. Other disks are called <emphasis>secondary
disks</emphasis> or <emphasis>non-system disks</emphasis>.  </para><para>When you arrange a system's file systems on multiple disks, you can
modify file systems and slices on the secondary disks without having to shut
down the system or reload the OS.</para><para>When you have more than one disk, you also increase input-output (I/O)
volume. By distributing disk load across multiple disks, you can avoid I/O
bottlenecks.</para>
</sect3><sect3 id="disksconcepts-25801"><title>Determining Which Slices to Use</title><para>When you set up a disk's file systems,
you choose not only the size of each slice, but also which slices to use.
Your decisions about these matters depend on the configuration of the system
to which the disk is attached and the software you want to install on the
disk. </para><para>System configurations that need disk space are as follows:</para><itemizedlist><listitem><para>Servers</para>
</listitem><listitem><para>Stand-alone systems</para>
</listitem>
</itemizedlist><para>Each system configuration can
use slices in a different way. The following table lists some examples. </para><table frame="topbot" id="disksconcepts-42938"><title>System Configurations
and Slices</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="column1" colwidth="44*"/><colspec colname="column2" colwidth="88*"/><colspec colname="column4" colwidth="88*"/><thead><row rowsep="1"><entry><para>Slice</para>
</entry><entry><para>Servers</para>
</entry><entry><para>Stand-alone Systems</para>
</entry>
</row>
</thead><tbody><row><entry><para>0</para>
</entry><entry><para>root</para>
</entry><entry><para>root</para>
</entry>
</row><row><entry><para>1</para>
</entry><entry><para>swap</para>
</entry><entry><para>swap</para>
</entry>
</row><row><entry><para>2</para>
</entry><entry><para>&mdash;</para>
</entry><entry><para>&mdash;</para>
</entry>
</row><row><entry><para>3</para>
</entry><entry><para><filename>/export</filename></para>
</entry><entry><para>&mdash;</para>
</entry>
</row><row><entry><para>6</para>
</entry><entry><para><filename>/usr</filename></para>
</entry><entry><para><filename>/usr</filename></para>
</entry>
</row><row><entry><para>7</para>
</entry><entry><para><filename>/export/home</filename></para>
</entry><entry><para><filename>/home</filename></para>
</entry>
</row>
</tbody>
</tgroup>
</table><para>For more information about system configurations, see <olink targetdoc="sysadv1" targetptr="clientconcept-25948" remap="external"><citetitle remap="section">Overview
of System Types</citetitle> in <citetitle remap="book">System Administration
Guide: Basic Administration</citetitle></olink>.</para><note><para>The Solaris installation utility provides default slice sizes
based on the software you select for installation.</para>
</note>
</sect3>
</sect2><sect2 id="disksconcepts-25867"><title><command>format</command> Utility</title><para>Read the following overview of the <command>format</command> utility
and its uses before proceeding to the &ldquo;how-to&rdquo; or reference sections. </para><para>The <command>format</command> utility is a system administration tool
that is used to prepare hard disk drives for use on your Solaris system.</para><para>The following table shows the features
and associated benefits that the <command>format</command> utility provides. </para><table frame="topbot" id="disksconcepts-24449"><title>Features and Benefits
of the <command>format</command> Utility</title><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="column1" colwidth="132*"/><colspec colname="column2" colwidth="264*"/><thead><row rowsep="1"><entry><para>Feature</para>
</entry><entry><para>Benefit</para>
</entry>
</row>
</thead><tbody><row><entry><para>Searches your system for all attached disk drives</para>
</entry><entry><para>Reports on the following: </para><itemizedlist><listitem><para>Target location</para>
</listitem><listitem><para>Disk geometry</para>
</listitem><listitem><para>Whether the disk is formatted</para>
</listitem><listitem><para>If the disk has mounted partitions</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Retrieves disk labels</para>
</entry><entry><para>Convenient for repair operations</para>
</entry>
</row><row><entry><para>Repairs defective sectors</para>
</entry><entry><para>Allows administrators to repair disk drives with recoverable errors
instead of sending the drive back to the manufacturer</para>
</entry>
</row><row><entry><para>Formats and analyzes a disk</para>
</entry><entry><para>Creates sectors on the disk and verifies each sector</para>
</entry>
</row><row><entry><para>Partitions a disk</para>
</entry><entry><para>Divides a disk into slices so that individual file systems can be created
on separate slices</para>
</entry>
</row><row><entry><para>Labels a disk</para>
</entry><entry><para>Writes disk name and configuration information to the disk for future
retrieval (usually for repair operations)</para>
</entry>
</row>
</tbody>
</tgroup>
</table><para>The <command>format</command> utility options are described in <olink targetptr="disksformat-15833" remap="internal">Chapter&nbsp;15, The format Utility (Reference)</olink>.</para><sect3 id="disksconcepts-3"><title>When to Use the <command>format</command> Utility</title><para>Disk drives are partitioned and labeled by the
Solaris installation utility when you install the Solaris release. You can
use the <command>format</command> utility to do the following: </para><itemizedlist><listitem><para>Display slice information</para>
</listitem><listitem><para>Partition a disk</para>
</listitem><listitem><para>Add a disk drive to an existing system</para>
</listitem><listitem><para>Format a disk drive</para>
</listitem><listitem><para>Label a disk</para>
</listitem><listitem><para>Repair a disk drive</para>
</listitem><listitem><para>Analyze a disk for errors</para>
</listitem>
</itemizedlist><para>The main reason a system administrator uses the <command>format</command> utility
is to partition a disk. These steps are covered in <olink targetptr="diskssadd-16103" remap="internal">Chapter&nbsp;12, SPARC: Adding a Disk (Tasks)</olink> and <olink targetptr="disksxadd-38159" remap="internal">Chapter&nbsp;13, x86: Adding a Disk (Tasks)</olink>.</para><para>See the following section for guidelines on using the <command>format</command> utility.</para>
</sect3><sect3 id="disksconcepts-16978"><title>Guidelines for Using the <command>format</command> Utility</title><table frame="topbot" id="disksconcepts-36653"><title><command>format</command> Utility
Guidelines</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="column1" colwidth="72*"/><colspec colname="column2" colwidth="179*"/><colspec colname="column3" colwidth="108*"/><thead><row rowsep="1"><entry><para>Task</para>
</entry><entry><para>Guidelines</para>
</entry><entry><para>For More Information</para>
</entry>
</row>
</thead><tbody><row><entry><para>Format a disk.</para>
</entry><entry><itemizedlist><listitem><para>Any existing data is  destroyed when you reformat a disk.</para>
</listitem><listitem><para>The need for formatting a disk drive has decreased as more
and more manufacturers ship their disk drives formatted and partitioned. You
might not need to use the <command>format</command> utility when you add a
disk drive to an existing system.</para>
</listitem><listitem><para>If a disk has been relocated and is displaying many disk errors,
you can attempt to reformat it. Reformatting automatically remaps any bad
sectors.</para>
</listitem>
</itemizedlist>
</entry><entry><para><olink targetptr="disksprep-24584" remap="internal">How to Format a Disk</olink></para>
</entry>
</row><row><entry><para>Replace a system disk.</para>
</entry><entry><itemizedlist><listitem><para>Data from the damaged system disk must be restored from a
backup medium. Otherwise, the system will have to be reinstalled by using
the installation utility.</para>
</listitem>
</itemizedlist>
</entry><entry><para><olink targetptr="diskssadd-55658" remap="internal">How to Connect a System Disk and
Boot</olink>, <olink targetptr="disksxadd-12484" remap="internal">How to Connect a System Disk</olink>,
or, if the system must be reinstalled, <olink targetdoc="solarisinstall" remap="external"><citetitle remap="book">Solaris Express Installation
Guide: Basic Installations</citetitle></olink></para>
</entry>
</row><row><entry><para>Divide a disk into slices.</para>
</entry><entry><itemizedlist><listitem><para>Any existing data is destroyed when you repartition and relabel
a disk with existing slices.</para>
</listitem><listitem><para>Existing data must be copied to backup media before the disk
is repartitioned and restored.</para>
</listitem>
</itemizedlist>
</entry><entry><para><olink targetptr="diskssadd-43616" remap="internal">How to Create Disk Slices and Label
a Disk</olink> or <olink targetptr="disksxadd-33190" remap="internal">How to Create Disk Slices
and Label a Disk</olink></para>
</entry>
</row><row><entry><para>Add a secondary disk to an existing system.</para>
</entry><entry><itemizedlist><listitem><para>Any existing data must be restored from backup media if the
secondary disk is reformatted or repartitioned.</para>
</listitem>
</itemizedlist>
</entry><entry><para> <olink targetptr="diskssadd-87325" remap="internal">How to Connect a Secondary Disk
and Boot</olink> or <olink targetptr="disksxadd-21330" remap="internal">How to Connect a Secondary
Disk and Boot</olink></para>
</entry>
</row><row><entry><para>Repair a disk drive.</para>
</entry><entry><itemizedlist><listitem><para>Some customer sites prefer to replace rather than repair defective
drives. If your site has a repair contract with the disk drive manufacturer,
you might not need to use the <command>format</command> utility to repair
disk drives.</para>
</listitem><listitem><para>The repair of  a disk drive usually means that a bad sector
is added to a defect list. New controllers remap bad sectors with no system
interruption.</para>
</listitem><listitem><para>If the system has an older controller, you might need to remap
a bad sector and restore any lost data.</para>
</listitem>
</itemizedlist>
</entry><entry><para><olink targetptr="disksprep-87" remap="internal">Repairing a Defective Sector</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect3><sect3 id="disksconcepts-37592"><title>Formatting a Disk</title><para>In most cases, disks are formatted by the manufacturer or reseller.
So, they do not need to be reformatted when you install the drive. To determine
if a disk is formatted, use the <command>format</command> utility. For more
information, see <olink targetptr="disksprep-37081" remap="internal">How to Determine if a
Disk Is Formatted</olink>. </para><para>If you determine that a disk is not formatted, use the <command>format</command> utility
to format the disk.</para><para>When you format a disk, you accomplish two steps:</para><itemizedlist><listitem><para>The disk media is prepared for use.</para>
</listitem><listitem><para>A list of disk defects based on a surface analysis is compiled.</para>
</listitem>
</itemizedlist><caution><para>Formatting a disk is a destructive process because it overwrites
data on the disk. For this reason, disks are usually formatted only by the
manufacturer or reseller. If you think disk defects are the cause of recurring
problems, you can use the <command>format</command> utility to do a surface
analysis. However, be careful to use only the commands that do not destroy
data. For details, see <olink targetptr="disksprep-24584" remap="internal">How to Format a
Disk</olink>.</para>
</caution><para>A small percentage of total disk space that is available for data is
used to store defect and formatting information. This percentage varies according
to disk geometry, and decreases as the disk ages and develops more defects.</para><para>Formatting a disk might take anywhere from a few minutes to several
hours, depending on the type and size of the disk. </para>
</sect3>
</sect2>
</sect1><sect1 id="disksconcepts-5"><title>Partitioning a Disk</title><para>The <command>format</command> utility is most often used by system administrators
to partitioning a Disk. The steps are as follows:</para><itemizedlist><listitem><para>Determining which slices are needed</para>
</listitem><listitem><para>Determining the size of each slice or partition</para>
</listitem><listitem><para>Using the <command>format</command> utility to partition the
disk</para>
</listitem><listitem><para>Labeling the disk with new partition information</para>
</listitem><listitem><para>Creating the file system for each partition</para>
</listitem>
</itemizedlist><para>The easiest way to partition a disk is to use the <command>modify</command> command
from the partition menu of the <command>format</command> utility. The <command>modify</command> command allows you to create partitions by specifying the size
of each partition without having to keep track of the starting cylinder boundaries.
The <command>modify</command> command also keeps tracks of any disk space
that remains in the &ldquo;free hog&rdquo; slice.</para><sect2 id="disksconcepts-31423"><title>Partition Table Terminology</title><para>An important part of the disk label is the <emphasis>partition table</emphasis>.
The partition table identifies a disk's slices, the slice boundaries (in cylinders),
and the total size of the slices. You can display a disk's partition table
by using the <command>format</command> utility. The following describes partition
table terminology.</para><table frame="topbot" id="disksconcepts-33752"><title>Partition Table Terminology</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="column1" colwidth="71.00*"/><colspec colname="column2" colwidth="105.96*"/><colspec colname="column3" colwidth="182.04*"/><thead><row rowsep="1"><entry><para>Partition Term</para>
</entry><entry><para>Value</para>
</entry><entry><para>Description</para>
</entry>
</row>
</thead><tbody><row><entry><para>Number</para>
</entry><entry><para><literal>0&ndash;7</literal></para>
</entry><entry><para><emphasis role="strong">VTOC</emphasis> &ndash; Partitions or slices,
numbered 0&ndash;7.</para><para><emphasis role="strong">EFI</emphasis> &ndash; Partitions or slices,
numbered 0&ndash;6.</para>
</entry>
</row><row><entry><para>Tag</para>
</entry><entry><para><literal>0=UNASSIGNED 1=BOOT 2=ROOT 3=SWAP 4=USR 5=BACKUP 7=VAR 8=HOME
11=RESERVED</literal></para>
</entry><entry><para>A numeric value that usually describes the file system mounted on this
partition.</para>
</entry>
</row><row><entry><para>Flags</para>
</entry><entry><para><literal>wm</literal></para>
</entry><entry><para>The partition is writable and mountable.</para>
</entry>
</row><row><entry><para></para>
</entry><entry><para><literal>wu rm</literal></para>
</entry><entry><para>The partition is writable and unmountable. This state is the default
for partitions that are dedicated for swap areas. (However, the <command>mount</command> command
does not check the &ldquo;not mountable&rdquo; flag.)</para>
</entry>
</row><row><entry><para></para>
</entry><entry><para><literal>rm</literal></para>
</entry><entry><para>The partition is read only and mountable.</para>
</entry>
</row>
</tbody>
</tgroup>
</table><para>Partition flags and tags are assigned by convention and require no maintenance.</para><para>For more information on displaying the partition table, see the following
references:</para><itemizedlist><listitem><para><olink targetptr="disksconcepts-13" remap="internal">Displaying Partition Table
Information</olink></para>
</listitem><listitem><para><olink targetptr="disksprep-23207" remap="internal">How to Display Disk Slice
Information</olink></para>
</listitem><listitem><para><olink targetptr="disksprep-15875" remap="internal">How to Examine a Disk Label</olink></para>
</listitem>
</itemizedlist>
</sect2><sect2 id="disksconcepts-13"><title>Displaying Partition Table Information</title><para>The following <command>format</command> utility output shows an example
of a partition table from a 74-Gbyte disk with a VTOC label displayed:</para><screen>Total disk cylinders available: 38756 + 2 (reserved cylinders)

Part      Tag    Flag     Cylinders         Size            Blocks
  0       root    wm       3 -  2083        4.00GB    (2081/0/0)    8390592
  1       swap    wu    2084 -  3124        2.00GB    (1041/0/0)    4197312
  2     backup    wm       0 - 38755       74.51GB    (38756/0/0) 156264192
  3 unassigned    wm       0                0         (0/0/0)             0
  4 unassigned    wm       0                0         (0/0/0)             0
  5 unassigned    wm       0                0         (0/0/0)             0
  6 unassigned    wm       0                0         (0/0/0)             0
  7       home    wm    3125 - 38755       68.50GB    (35631/0/0) 143664192
  8       boot    wu       0 -     0        1.97MB    (1/0/0)          4032
  9 alternates    wu       1 -     2        3.94MB    (2/0/0)          8064

partition> </screen><para>The partition table displayed by the <command>format</command> utility
contains the following information.</para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="column1" colwidth="90*"/><colspec colname="column2" colwidth="270*"/><thead><row rowsep="1"><entry><para>Column Name</para>
</entry><entry><para>Description</para>
</entry>
</row>
</thead><tbody><row><entry><para><literal>Part</literal></para>
</entry><entry><para>Partition or slice number. See <olink targetptr="disksconcepts-33752" remap="internal">Table&nbsp;10&ndash;6</olink> for a description of this column.</para>
</entry>
</row><row><entry><para><literal>Tag</literal></para>
</entry><entry><para>Partition tag. See <olink targetptr="disksconcepts-33752" remap="internal">Table&nbsp;10&ndash;6</olink> for a description of this column.</para>
</entry>
</row><row><entry><para><literal>Flag</literal></para>
</entry><entry><para>Partition flag. See <olink targetptr="disksconcepts-33752" remap="internal">Table&nbsp;10&ndash;6</olink> for a description of this column.</para>
</entry>
</row><row><entry><para><literal>Cylinders</literal></para>
</entry><entry><para>The starting and ending cylinder number for the slice. Not displayed
on EFI-labeled disks.</para>
</entry>
</row><row><entry><para><literal>Size</literal></para>
</entry><entry><para>The slice size in Mbytes.</para>
</entry>
</row><row><entry><para><literal>Blocks</literal></para>
</entry><entry><para>The total number of cylinders and the total number of sectors per slice.
Not displayed on EFI-labeled disks.</para>
</entry>
</row><row><entry><para><literal>First Sector</literal></para>
</entry><entry><para><emphasis role="strong">EFI</emphasis> &ndash; The starting block number.
Not displayed on VTOC-labeled disks.</para>
</entry>
</row><row><entry><para><literal>Last Sector</literal></para>
</entry><entry><para><emphasis role="strong">EFI</emphasis> &ndash; The ending block number.
Not displayed on VTOC-labeled disks.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>The following is an example of an EFI disk label displayed by using
the <command>prtvtoc</command> command.</para><screen># <userinput>prtvtoc /dev/rdsk/c4t1d0s0</userinput>
* /dev/rdsk/c4t1d0s0 partition map
*
* Dimensions:
*     512 bytes/sector
* 2576941056 sectors
* 2576940989 accessible sectors
*
* Flags:
*   1: unmountable
*  10: read-only
*
*                           First     Sector    Last
* Partition  Tag  Flags     Sector     Count    Sector   Mount Directory
       0      2    00          34   629145600  629145633
       1      4    00   629145634   629145600 1258291233
       6      4    00  1258291234  1318633404 2576924637
       8     11    00  2576924638       16384 2576941021</screen><para>The output of the <command>prtvtoc</command> command provides information
in the following three sections:</para><itemizedlist><listitem><para>Dimensions</para>
</listitem><listitem><para>Flags</para>
</listitem><listitem><para>Partition Table</para>
</listitem>
</itemizedlist><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colname="column1" colwidth="110*"/><colspec colname="column2" colwidth="249*"/><thead><row rowsep="1"><entry><para><command>prtvtoc</command> Column Name</para>
</entry><entry><para>Description </para>
</entry>
</row>
</thead><tbody><row><entry><para><literal>Partition</literal></para>
</entry><entry><para>Partition or slice number. For a description of this column, see <olink targetptr="disksconcepts-33752" remap="internal">Table&nbsp;10&ndash;6</olink>.</para>
</entry>
</row><row><entry><para><literal>Tag</literal></para>
</entry><entry><para>Partition tag. For a description of this column, see <olink targetptr="disksconcepts-33752" remap="internal">Table&nbsp;10&ndash;6</olink>.</para>
</entry>
</row><row><entry><para><literal>Flags</literal></para>
</entry><entry><para>Partition flag. For a description of this column, see <olink targetptr="disksconcepts-33752" remap="internal">Table&nbsp;10&ndash;6</olink>.</para>
</entry>
</row><row><entry><para><literal>First Sector</literal></para>
</entry><entry><para>The first sector of the slice.</para>
</entry>
</row><row><entry><para><literal>Sector Count</literal></para>
</entry><entry><para>The total number of sectors in the slice.</para>
</entry>
</row><row><entry><para><literal>Last Sector</literal></para>
</entry><entry><para>The last sector of the slice.</para>
</entry>
</row><row><entry><para><literal>Mount Directory</literal></para>
</entry><entry><para>The last mount point directory for the file system.</para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect2><sect2 id="disksconcepts-15570"><title>Using the Free Hog Slice</title><para>When you use the <command>format</command> utility to change the
size of one or more disk slices, you designate a temporary slice that will
expand and shrink to accommodate the resizing operations. </para><para>This temporary slice donates, or &ldquo;frees,&rdquo; space when you
expand a slice, and receives, or &ldquo;hogs,&rdquo; the discarded space when
you shrink a slice. For this reason, the donor slice is sometimes called the <emphasis>free hog</emphasis>.</para><para>The free hog slice exists only during installation or when you run the <command>format</command> utility. There is no permanent free hog slice during day-to-day
operations.</para><para>For information on using the free hog slice, see <olink targetptr="diskssadd-43616" remap="internal">How to Create Disk Slices and Label a Disk</olink> or <olink targetptr="disksxadd-33190" remap="internal">How to Create Disk Slices and Label a Disk</olink>.</para>
</sect2>
</sect1>
</chapter>