<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">

<!--   The contents of this Documentation are subject to the Public Documentation
License Version 1.01 (the "License"); you may only use this Documentation if
you comply with the terms of this License. A copy of the License is
available at http://www.opensolaris.org/os/community/documentation/license.
  -->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>pkg(1) Command Reference - OpenSolaris 2009.06 Image Packaging System Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/opensol.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.com"><img border="0" src="graphics/opensolaris_logo_trans.png"></img></a>
   </div>
   <div class="Title">OpenSolaris 2009.06 Image Packaging System Guide</div>
</div>
<div class="headerbar"></div>


<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="cmd_ref.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gentextid-3044.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="index.html">1.&nbsp;&nbsp;Introduction to IPS</a></p>
<p class="toc level1 tocsp"><a href="learn_ips.html">2.&nbsp;&nbsp;Learning About IPS</a></p>
<p class="toc level1 tocsp"><a href="ips_cmds.html">3.&nbsp;&nbsp;Working With Packages</a></p>
<p class="toc level1 tocsp"><a href="image.html">4.&nbsp;&nbsp;Creating and Managing Images</a></p>
<p class="toc level1 tocsp"><a href="ips_dev_cmds.html">5.&nbsp;&nbsp;Advanced IPS Commands</a></p>
<p class="toc level1 tocsp"><a href="ips_dev_tasks.html">6.&nbsp;&nbsp;Advanced Packaging Tasks</a></p>
<p class="toc level1 tocsp"><a href="keys_cert.html">7.&nbsp;&nbsp;Using Keys and Certificates for Repositories</a></p>
<p class="toc level1 tocsp"><a href="repo_mirror.html">8.&nbsp;&nbsp;Mirroring Repositories</a></p>
<p class="toc level1 tocsp"><a href="gentextid-2274.html">9.&nbsp;&nbsp;Classification of Packages</a></p>
<p class="toc level1 tocsp"><a href="cmd_ref.html">10.&nbsp;&nbsp;<tt>pkg</tt>(1) Command Reference</a></p>
<div class="onpage">
<p class="toc level2"><a href=""><tt>pkg(1)</tt> Command Reference</a></p>
</div>
<p class="toc level1 tocsp"><a href="gentextid-3044.html">11.&nbsp;&nbsp;Additional Developer Information</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="gentextid-2535"></a><h3><tt>pkg(1)</tt> Command Reference</h3>
<p><tt>pkg</tt>(1) supports two options directly:</p>
<ul><li><p><tt>-R</tt> &ndash; Perform the packaging operations on the image rooted at <i>dir</i>, rather than the image discovered automatically. All the <tt>pkg</tt> commands accept <tt><tt>-R</tt> <i>dir</i></tt> as an option.</p></li>
<li><p><tt>--help</tt> or <tt>-?</tt> &ndash; List the subcommands and options supported by <tt>pkg(1)</tt>.</p></li></ul>
<p>For the OpenSolaris 2009.06 release, the <tt>pkg</tt> command has the following subcommands and
options.</p><a name="pkgtbl"></a><h6>Table&nbsp;10-1 <tt>pkg(1)</tt> Commands</h6><table><col width="27%"><col width="51%"><col width="20%"><tr><th align="left" valign="top" scope="column"><p>Subcommands</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
<th align="left" valign="top" scope="column"><p>Privileges Required to Run Command</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg image-create</tt></p></td>
<td align="left" valign="top" scope="row"><p>Creates an image suitable for package operations at
the directory specified by <i>dir</i>.</p><p>Syntax : <tt>pkg image-create [-fFPUz] [--force] [--full | --partial | --user] [--zone] [-k <i>ssl_key]</i> [-c ssl_cert] [--no-refresh] (-p | --publisher) name=<i>origin_uri</i> <i>dir</i></tt></p>
<ul><li><p><tt>-F</tt>&ndash; Creates a full image.</p></li>
<li><p><tt>-f</tt>&ndash; Forces the command to create an image over an existing image.</p>
<hr><p><b>Caution - </b>Use this option with care. See <a href="gentextid-690.html#giifi">How to Create an Image</a>.</p>
<hr>
</li>
<li><p><tt>-P</tt> &ndash; Creates a partial image.</p></li>
<li><p><tt>-U</tt> &ndash; Creates a user image (default).</p></li>
<li><p><tt>-z</tt> &ndash; Runs the image in a non-global zone context.</p></li>
<li><p><tt>-p</tt>&ndash; Specifies a preferred publisher.</p>
<hr><p><b>Note - </b>This option <b>must</b> be specified.</p>
<hr>
</li>
<li><p><tt>-c</tt> &ndash; Specifies the client key (for publishers using client SSL authentication).</p></li>
<li><p><tt>-k</tt> &ndash; Specifies certificate (for publishers using client SSL authentication).</p></li>
<li><p><tt>--no-refresh</tt> &ndash; Does not attempt to contact the image's publisher to retrieve its catalog.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg image-update</tt></p></td>
<td align="left" valign="top" scope="row"><p>Updates all installed packages in the current
image to the latest available version.</p><p>Syntax: <tt>pkg image-update [-fnvq] [--be-name <i>name</i> [--no-refresh] [--no-index]</tt></p>
<ul><li><p><tt>-f</tt> - Skips safety checks.</p></li>
<li><p><tt>-n</tt> - Executes the requested operation but make no persistent changes to the image.</p></li>
<li><p><tt>-v</tt> - Issues verbose progress messages during the requested operation.</p></li>
<li><p><tt>-q</tt> - No message is shown during command execution.</p></li>
<li><p><tt>---be-name</tt> - Renames the newly created boot environment to the name specified by <i>name</i>. This option is valid only if a new boot environment is created during image-update. See also beadm(1).</p></li>
<li><p><tt>--no-refresh</tt> - Does not attempt to contact the image's authorities to retrieve their catalogs.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg refresh</tt></p></td>
<td align="left" valign="top" scope="row"><p>Retrieves updated catalogs for each publisher registered
within the image.</p><p>Syntax: <tt>pkg refresh [-full] <i>[publisher..]</i></tt></p>
<ul><li><p><tt>-full</tt> - Retrieves full catalog.</p></li>
<li><p>When no publisher is specified, the command retrieves updates for each publisher registered within the image.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg install</tt></p></td>
<td align="left" valign="top" scope="row"><p>Installs a package.</p><p>Syntax: <tt>pkg install [-nvq] [--no-refresh] [--no-index] <i>pkg_fmri</i></tt></p>
<ul><li><p><tt>-n</tt> - Executes the requested operation but makes no persistent changes to the image.</p></li>
<li><p><tt>-v</tt> - Issues verbose progress messages during the requested operation.</p></li>
<li><p><tt>--no-refresh</tt> - Does not attempt to contact the image's authorities to retrieve their catalogs.</p></li>
<li><p><tt>--no-index</tt> - Does not update the search indexes after the operation has completed successfully.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg uninstall</tt></p></td>
<td align="left" valign="top" scope="row"><p>Uninstalls a package.</p><p>Syntax: <tt>pkg uninstall [-nrvq] <i>pkg_fmri</i></tt></p>
<ul><li><p><tt>-n</tt> - Executes the requested operation but makes no persistent changes to the image.</p></li>
<li><p><tt>-v</tt> - Issues verbose progress messages during the requested operation.</p></li>
<li><p><tt>-r</tt> - Recursively uninstall any packages that are dependent on the initial package.</p></li>
<li><p><tt>--no-refresh</tt> - Does not attempt to contact the image's authorities to retrieve their catalogs.</p></li>
<li><p><tt>--no-index</tt> - Does not update the search indexes after the operation has completed successfully.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg info</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays information about a
package.</p><p>Syntax : <tt>pkg info [-lr] [--license] <i>pkg_fmri</i></tt></p>
<ul><li><p><tt>-l</tt> &ndash; Displays the data available from locally installed packages. This is the default option.</p></li>
<li><p><tt>-r</tt> &ndash; Shows the latest available package on the server. A package FMRI must be specified with this option.</p></li>
<li><p><tt>--license</tt> &ndash; Displays license and copyright information for a package.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg contents</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays the contents (action attributes) of packages in the current image.</p><p>Syntax
: <tt>pkg contents [-Hmr] [-o <i>attribute</i>] [ -s <i>sort_key</i>] [-t <i>action_type</i>] <i>pkg_fmri</i></tt></p>
<ul><li><p><tt>-m</tt> - Shows the complete contents of the action as represented in the package manifest.</p></li>
<li><p><tt>-o</tt> - Specifies the attributes that you are searching for. Multiple attributes can be specified with a single <tt>-o</tt> option by separating the attributes with commas. <b>If this option is not specified, only the path attribute is displayed.</b></p></li>
<li><p><tt>-r</tt> - Retrieves the contents of a package from the server. This option is used in cases where the package is not already installed. A package FMRI must be specified when using this option.</p></li>
<li><p><tt>-s</tt> - Sorts the display based on the specified attribute.</p></li>
<li><p><tt>-t</tt> - Displays information pertaining only to the specified action.</p></li>
<li><p><tt>-H</tt> - Does not display any headers.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg search</tt></p></td>
<td align="left" valign="top" scope="row"><p>Searches for <i>token</i>, and displays the FMRIs in which <i>token</i> was found.</p><p>Syntax:
<tt>pkg search [-alprI] [-s server] <i>query</i></tt></p>
<ul><li><p><tt>-a</tt> - Display information about matching actions along with the search results.</p></li>
<li><p><tt>-l</tt> - Searches the installed packages on the image. </p></li>
<li><p><tt>-p</tt> - Perform the search and display the packages which contain atleast one action that matched <i>query</i>.</p></li>
<li><p><tt>-r</tt> - Searches the repository corresponding to the image's publishers. This is the default option. This option can be combined with the <tt>-l</tt> option so that both local and remote searches are performed.</p></li>
<li><p><tt>-s</tt> - Searches for packages in the specified server, a <tt>pkg(5) </tt> repository. Multiple servers can be specified. This option can be combined with the <tt>-l</tt> option.</p></li>
<li><p><tt>-I</tt> - Search for packages in a case sensitive manner.</p>
<hr><p><b>Note - </b>The <tt>-I</tt> option can only be used with the default option, <tt>-l</tt> at this time.</p>
<hr>

<hr><p><b>Note - </b>Boolean search using <tt>AND</tt> and <tt>OR</tt> is supported. For more information, see the <a href="http://pkg.opensolaris.org/sc/src/man/pkg.1.txt">pkg(1)</a> man page.</p>
<hr>
</li></ul>
</td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg list</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays most recent version information about the state of packages in the current
image.</p><p>Syntax: <tt>pkg list [-aHsuvf] [--no-refresh] <i>pkg_fmri</i></tt></p>
<ul><li><p><tt>-a</tt> - Display information on <b>all</b> known packages, whether they are installed or not installed.</p></li>
<li><p><tt>-H</tt> - Do not display any headers.</p></li>
<li><p><tt>-s</tt> - Display only package name and description of the package.</p></li>
<li><p><tt>-u</tt> - Show information only about packages which have newer versions available.</p></li>
<li><p><tt>-v</tt> - Show detailed package FMRIs.</p></li>
<li><p><tt>-f</tt> - List all known versions of a package.</p></li>
<li><p><tt>--no-refresh</tt> - Do not attempt to contact the repositories for the image's publishers to retrieve publisher metadata.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg verify</tt></p></td>
<td align="left" valign="top" scope="row"><p>Validate the installation of packages in the current image.</p><p>Syntax: <tt>pkg verify <tt>-[Hqv]</tt> <i>pkg_fmri</i></tt></p>
<ul><li><p><tt>-v</tt> - Display verbose information.</p></li>
<li><p><tt>-q</tt> - Do not report anything but return failure if there are any verification problems.</p></li>
<li><p><tt>-H</tt> - Remove headers from the listing.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg fix</tt></p></td>
<td align="left" valign="top" scope="row"><p>Fixes any
errors reported by <tt>pkg verify</tt></p><p>Syntax : <tt>pkg fix <i>pkg_fmri</i></tt></p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg set-property <i>propname</i> <i>propvalue</i></tt></p></td>
<td align="left" valign="top" scope="row"><p>Updates an existing image property or add
a new image property.</p>
<hr><p><b>Note - </b>The preferred publisher property cannot be changed using this subcommand.
Use <tt>pkg set-publisher</tt> to change the preferred publisher.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg unset-property <i>propname</i> <i>propvalue</i></tt></p></td>
<td align="left" valign="top" scope="row"><p>Removes an existing image property or add
a new image property.</p>
<hr><p><b>Note - </b>The preferred publisher property cannot be changed using this subcommand.
Use <tt>pkg set-publisher</tt> to change the preferred publisher.</p>
<hr>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg property <i>[propname..]</i></tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays image property information.</p>
<ul><li><p><tt>No argument</tt> &ndash; Display name and values for all image properties.</p></li>
<li><p><tt>-H</tt> &ndash; Remove headers from the listing.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg set-publisher</tt></p></td>
<td align="left" valign="top" scope="row"><p>Updates an existing publisher
or adds an additional package publisher.</p><p>Syntax: <tt>pkg set-publisher [-Ped] [-k ssl_key] [-c ssl_cert] [-O origin_url] [-m mirror_to_add] [-M mirror_to_remove] [--enable] [--disable] [--no-refresh] [--reset-uuid] publisher</tt></p>
<ul><li><p><tt>-P</tt> - Sets the specified publisher as the preferred publisher.</p></li>
<li><p><tt>-c</tt> - Specifies client SSL certificate.</p></li>
<li><p><tt>-k</tt> - Specifies client key.</p></li>
<li><p><tt>-O</tt> - Sets the URL prefix for the origin packaging repository for the publisher.</p></li>
<li><p><tt>-m</tt> - Adds the URI as a mirror for the given publisher.</p></li>
<li><p><tt>-M</tt> - Removes the URI as a mirror for the given publisher.</p></li>
<li><p><tt>-e</tt> - Enables the given publisher.</p></li>
<li><p><tt>-d</tt> - Disables the given publisher.</p>
<hr><p><b>Note - </b>A disabled publisher is not used when the package list is being populated or in certain package operations. However the properties for a disabled publisher can still be set and viewed.</p>
<hr>

<hr><p><b>Caution - </b>If only one publisher exists, it cannot be disabled.</p>
<hr>
</li>
<li><p><tt>--no-refresh</tt> - Do not attempt to contact the specified publisher to retrieve the metadata.</p></li>
<li><p><tt>---reset-uuid</tt> - Choose a new, unique identifier to identify this image to the publisher.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg unset-publisher</tt></p></td>
<td align="left" valign="top" scope="row"><p>Removes the configuration associated with the
given publisher.</p><p>Syntax: <tt>pkg unset-publisher <i>publisher</i></tt></p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg publisher</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays publisher information. If a publisher is specified, configuration values associated
with the publisher is displayed. </p><p>Syntax: <tt>pkg publisher [-HPa] <i>publisher</i></tt></p>
<ul><li><p>No argument - Display the list of all configured publishers, their origin URLs , and their mirrors.</p></li>
<li><p><tt>-H</tt>- Remove headers from the listing.</p></li>
<li><p><tt>-P</tt>- Display only preferred publisher information.</p></li>
<li><p><tt>-a</tt>- Display all publishers including those that have been disabled.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg history</tt></p></td>
<td align="left" valign="top" scope="row"><p>Displays the history of operations executed
in the image.</p><p>Syntax : <tt>pkg history [-Hl]</tt></p>
<ul><li><p><tt>-H</tt> &ndash; Remove headers from the listing.</p></li>
<li><p><tt>-l</tt> &ndash; Display detailed history information which includes the outcome of the command, when the command completed execution, version and name of the client used, identity of the user who performed the operation, and any errors encountered while executing the command.</p></li></ul>
</td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg purge-history</tt></p></td>
<td align="left" valign="top" scope="row"><p>Deletes all existing history information.</p></td>
<td align="left" valign="top" scope="row"><p>Yes</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>pkg help</tt></p></td>
<td align="left" valign="top" scope="row"><p>Views a list of
all available commands and their associated options.</p></td>
<td align="left" valign="top" scope="row"><p>No</p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="cmd_ref.html">Previous</a>
             </td>
             <td align="right">
                 <a href="gentextid-3044.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

