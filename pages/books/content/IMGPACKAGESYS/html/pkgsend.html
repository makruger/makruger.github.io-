<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">

<!--   The contents of this Documentation are subject to the Public Documentation
License Version 1.01 (the "License"); you may only use this Documentation if
you comply with the terms of this License. A copy of the License is
available at http://www.opensolaris.org/os/community/documentation/license.
  -->
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>The Publication Client pkgsend(1) - OpenSolaris 2009.06 Image Packaging System Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/opensol.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.com"><img border="0" src="graphics/opensolaris_logo_trans.png"></img></a>
   </div>
   <div class="Title">OpenSolaris 2009.06 Image Packaging System Guide</div>
</div>
<div class="headerbar"></div>


<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ips_dev_cmds.html">Previous</a>
             </td>
             <td align="right">
                 <a href="actions.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="index.html">1.&nbsp;&nbsp;Introduction to IPS</a></p>
<p class="toc level1 tocsp"><a href="learn_ips.html">2.&nbsp;&nbsp;Learning About IPS</a></p>
<p class="toc level1 tocsp"><a href="ips_cmds.html">3.&nbsp;&nbsp;Working With Packages</a></p>
<p class="toc level1 tocsp"><a href="image.html">4.&nbsp;&nbsp;Creating and Managing Images</a></p>
<p class="toc level1 tocsp"><a href="ips_dev_cmds.html">5.&nbsp;&nbsp;Advanced IPS Commands</a></p>
<div class="onpage">
<p class="toc level2"><a href="">The Publication Client pkgsend(1)</a></p>
</div>
<p class="toc level2"><a href="actions.html">Actions in IPS</a></p>
<p class="toc level2"><a href="depot_server.html">Overview of the <tt>pkg.depotd</tt> Depot Server</a></p>
<p class="toc level2"><a href="pkgrecv.html"><tt>pkgrecv</tt>(1), Content Retrieval Utility</a></p>
<p class="toc level1 tocsp"><a href="ips_dev_tasks.html">6.&nbsp;&nbsp;Advanced Packaging Tasks</a></p>
<p class="toc level1 tocsp"><a href="keys_cert.html">7.&nbsp;&nbsp;Using Keys and Certificates for Repositories</a></p>
<p class="toc level1 tocsp"><a href="repo_mirror.html">8.&nbsp;&nbsp;Mirroring Repositories</a></p>
<p class="toc level1 tocsp"><a href="gentextid-2274.html">9.&nbsp;&nbsp;Classification of Packages</a></p>
<p class="toc level1 tocsp"><a href="cmd_ref.html">10.&nbsp;&nbsp;<tt>pkg</tt>(1) Command Reference</a></p>
<p class="toc level1 tocsp"><a href="gentextid-3044.html">11.&nbsp;&nbsp;Additional Developer Information</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="pkgsend"></a><h3>The Publication Client pkgsend(1)</h3>
<p>The image packaging system publication client, <tt>pkgsend</tt>, enables the publication of new packages
and new package versions to an image packaging repository. Each publication is structured
as a transaction. Transactions can contain actions as described in the section <a href="actions.html">Actions in IPS</a>.</p><p>The <tt>pkgsend</tt>(1) command supports the following options.</p><a name="gimoi"></a><h6>Table&nbsp;5-1 <tt>pkgsend(1)</tt> Options</h6><table><col width="21%"><col width="78%"><tr><th align="left" valign="top" scope="column"><p>Option</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-s</tt> <i>repo_uri</i></p></td>
<td align="left" valign="top" scope="row"><p>Specify a different repository server.
The default repository is <tt>http://localhost:10000</tt>.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>-?</tt> or <tt>--help</tt></p></td>
<td align="left" valign="top" scope="row"><p>Display usage message.</p></td>
</tr>
</table><p>The <tt>pkgsend</tt>(1) command supports the following sub commands.</p><a name="ghnpq"></a><h6>Table&nbsp;5-2 <tt>pkgsend(1)</tt> Subcommands</h6><table><col width="21%"><col width="78%"><tr><th align="left" valign="top" scope="column"><p>Subcommand</p></th>
<th align="left" valign="top" scope="column"><p>Description</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>create-repository</tt></p></td>
<td align="left" valign="top" scope="row"><p>Creates a new repository at
the specified location if it does not already exist. This subcommand is only
supported for <tt>file://</tt> repository locations for the OpenSolaris 2009.06 release.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>open</tt></p></td>
<td align="left" valign="top" scope="row"><p> Begins a transaction
on the package specified by <i>pkg_fmri</i>. A <tt>transaction_id</tt> is printed to the screen
when the command executes successfully.</p><p>Syntax : <tt>pkgsend open <tt>-en</tt> <i>pkg_fmri</i></tt></p>
<ul><li><p><tt>-e</tt>&ndash; Use this option to prepend <tt>export PKG_TRANS_ID=</tt> to the <tt>transaction_id</tt>. This option can be used by the shell to evaluate the output and set the environment variable <tt>PKG_TANS_ID</tt>. This environment variable can be used when executing future <tt>pkgsend</tt> commands <b>within the same transaction</b>. If the -n option is given, the transaction ID is displayed as a string; </p></li>
<li><p><tt>-n</tt> Use this option to display the transaction ID as a string.</p></li></ul>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>add</tt></p></td>
<td align="left" valign="top" scope="row"><p>Adds an action to the current 
transaction. </p><p>Syntax : <tt>pkgsend add <i>actions pkg_fmri</i></tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>include</tt></p></td>
<td align="left" valign="top" scope="row"><p>Adds multiple actions present in each manifest file to
the current transaction.  Each line in the file should be the string
representation of an action. Do not use this sub command with the <tt>add</tt>,
<tt>open</tt> or <tt>close</tt> sub commands.</p><p>Syntax : <tt>pkgsend include [<tt>-d</tt> <i>basedir</i>] <i>filename</i></tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>import</tt> <i>bundlefile</i></p></td>
<td align="left" valign="top" scope="row"><p>Adds each given bundlefile into
the current transaction. An <tt>SVR4</tt> package is an example of a bundlefile.</p><p>Syntax :
<tt>pkgsend import [<tt>-T</tt> <i>pattern</i>] <i>bundlefile</i></tt></p><p>Use the following shell matching rules with the <i>pattern</i> option to add the
timestamp of the file to the action of that file, if the
basename of the files in the bundle match the optional patterns.</p>
<hr><p><b>Note - </b>The basename refers
to the last component of a path name. For example, in the path
<tt>/usr/bin/ls</tt>, the basename is <tt>ls</tt>.</p>
<hr>

<ul><li><p><tt>*</tt> &ndash; Matches everything.</p></li>
<li><p><tt>?</tt> &ndash; Matches any single character.</p></li>
<li><p><tt>[seq]</tt> &ndash; Matches any character in sequence.</p></li>
<li><p><tt>[!seq]</tt> &mdash; Matches any character not in sequence.</p></li></ul>

<hr><p><b>Note - </b>When a timestamp is added to a file's
actions, the file will be installed with precisely that timestamp, regardless of the
actual time of installation. This is particularly useful in cases where the software
requires a particular timestamp on the files it reads. For instance, python wants
the executable files <tt>.py</tt> that are installed to have the same timestamp on the
filesystem as is recorded in the compiled versions <tt>(.pyc)</tt> of those files.</p>
<hr>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>close</p></td>
<td align="left" valign="top" scope="row"><p>Close
the current transaction.</p><p>Syntax : <tt>pkgsend close [-A]</tt></p><p>The <tt>-A</tt> option abandons the current transaction. Use this
option to remove all information of a transaction such as package and file
information, from a server when a transaction is canceled before it is completed.</p></td>
</tr>
</table>

<a name="ghnpx"></a><h4>Limitations of the <tt>pkgsend(1)</tt> Command</h4>
<p>Note the following limitations of using the <tt>pkgsend</tt> command:</p>
<ul><li><p>Use the <tt>pkgsend</tt> command only if one or two packages at a time are being published to the repository.</p></li>
<li><p>The <tt>pkgsend</tt> command does not resolve dependencies. If more than one package is being published to the repository, you must manually resolve all package dependencies.</p></li></ul>

<hr><p><b>Note - </b>When you are publishing a newer version of a package to the
repository, specify the FMRI of the package correctly. The new version of the
package will coexist with any prior version already in the repository.</p>
<hr>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="ips_dev_cmds.html">Previous</a>
             </td>
             <td align="right">
                 <a href="actions.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

