<chapter id="wanboottasks-1"><title>Installing With WAN Boot (Tasks)</title><highlights><para>This chapter describes the following tasks that are necessary to prepare
your network for a WAN boot installation.</para><itemizedlist><listitem><para><olink targetptr="wanboottasks2-10" remap="internal">Installing Over a Wide
Area Network (Task Maps)</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-47" remap="internal">Configuring the WAN Boot
Server</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks-29" remap="internal">Creating the Custom JumpStart
Installation Files</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks-30" remap="internal">Creating the Configuration
Files</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-46" remap="internal">(Optional) Providing Configuration
Information With a DHCP Server</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-55" remap="internal">(Optional) To Configure
the WAN Boot Logging Server</olink></para>
</listitem>
</itemizedlist>
</highlights><sect1 id="wanboottasks2-10"><title>Installing Over a Wide Area Network (Task
Maps)</title><para>The following tables list the tasks you need to perform to prepare for
a WAN boot installation.</para><itemizedlist><listitem><para>For a list of the tasks you need to perform to prepare for
a secure WAN boot installation, see <olink targetptr="wanboottasks2-tbl-11" remap="internal">Table
11&ndash;1</olink>. </para><para>For a description of a secure WAN boot installation
over HTTPS, see <olink targetptr="wanboottasks2-68" remap="internal">Secure WAN Boot Installation
Configuration</olink>.</para>
</listitem><listitem><para>For a list of the tasks you need to perform to prepare for
an insecure WAN boot installation, see <olink targetptr="wanboottasks2-tbl-122" remap="internal">Table
11&ndash;2</olink>. </para><para>For a description of an insecure WAN boot
installation, see <olink targetptr="wanboottasks2-65" remap="internal">Insecure WAN Boot Installation
Configuration</olink>.</para>
</listitem>
</itemizedlist><para>To
use a DHCP server or a logging server, complete the optional tasks that are
listed at the bottom of each table.</para><table frame="topbot" id="wanboottasks2-tbl-11"><title>Task Map: Preparing
to Perform a Secure WAN Boot Installation</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="colspec7" colwidth="50*"/><colspec colname="colspec8" colwidth="50*"/><colspec colname="colspec9" colwidth="50.00*"/><thead><row><entry rowsep="1"><para>Task</para>
</entry><entry rowsep="1"><para>Description</para>
</entry><entry rowsep="1"><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Decide what security features you want to use in your installation.</para>
</entry><entry><para>Review the security features and configurations to decide what level
of security you want to use in your WAN boot installation.</para>
</entry><entry><para><olink targetptr="wanboottasks2-66" remap="internal">Protecting Data During a WAN Boot
Installation</olink></para><para><olink targetptr="wanboottasks2-30" remap="internal">Security Configurations Supported
by WAN Boot (Overview)</olink></para>
</entry>
</row><row><entry><para>Collect WAN boot installation information.</para>
</entry><entry><para>Complete the worksheet to record all the information you need to perform
a WAN boot installation.</para>
</entry><entry><para><olink targetptr="wanboottasks2-19" remap="internal">Gathering Information for WAN Boot
Installations</olink></para>
</entry>
</row><row><entry><para>Create the document root directory on the WAN boot server.</para>
</entry><entry><para>Create the document root directory and any subdirectories to serve the
configuration and installation files.</para>
</entry><entry><para><olink targetptr="wanboottasks-33cc" remap="internal">Creating the Document Root Directory</olink></para>
</entry>
</row><row><entry><para>Create the WAN boot miniroot.</para>
</entry><entry><para>Use the <command>setup_install_server</command> command to create the
WAN boot miniroot.</para>
</entry><entry><para><olink targetptr="wanboottasks-proc-2" remap="internal">To Create a WAN Boot Miniroot</olink></para>
</entry>
</row><row><entry><para>Verify that the client system supports WAN boot.</para>
</entry><entry><para>Check the client OBP for boot argument support of WAN boot.</para>
</entry><entry><para><olink targetptr="wanboottasks-13" remap="internal">To Check the Client OBP for WAN Boot
Support</olink></para>
</entry>
</row><row><entry><para>Install the <filename>wanboot</filename> program on the WAN boot server.</para>
</entry><entry><para>Copy the <filename>wanboot</filename> program to the document root directory
of the WAN boot server.</para>
</entry><entry><para><olink targetptr="wanboottasks-32" remap="internal">Installing the wanboot Program on
the WAN Boot Server</olink></para>
</entry>
</row><row><entry><para>Install the <filename>wanboot-cgi</filename> program on the WAN boot
server.</para>
</entry><entry><para>Copy the <filename>wanboot-cgi</filename> program  to the WAN boot server's
CGI directory.</para>
</entry><entry><para><olink targetptr="wanboottasks2-proc-83" remap="internal">To Copy the wanboot-cgi Program
to the WAN Boot Server</olink></para>
</entry>
</row><row><entry><para>(Optional) Set up the logging server.</para>
</entry><entry><para>Configure a dedicated system for displaying boot and installation log
messages.</para>
</entry><entry><para><olink targetptr="wanboottasks2-55" remap="internal">(Optional) To Configure the WAN
Boot Logging Server</olink></para>
</entry>
</row><row><entry><para>Set up the <filename>/etc/netboot</filename> hierarchy.</para>
</entry><entry><para>Populate the <filename>/etc/netboot</filename> hierarchy with the configuration
and security files that are required for a WAN boot installation.</para>
</entry><entry><para><olink targetptr="wanboottasks2-50" remap="internal">Creating the /etc/netboot Hierarchy
on the WAN Boot Server</olink></para>
</entry>
</row><row><entry><para>Configure the web server to use secure HTTP for a more secure WAN boot
installation.</para>
</entry><entry><para>Identify the web server requirements that are necessary to perform a
WAN installation with HTTPS.</para>
</entry><entry><para><olink targetptr="wanboottasks2-82" remap="internal">(Optional) Protecting Data by Using
HTTPS</olink></para>
</entry>
</row><row><entry><para>Format digital certificates for a more secure WAN boot installation.</para>
</entry><entry><para>Split PKCS#12 file into a private key and a certificate to use with
the WAN installation.</para>
</entry><entry><para><olink targetptr="wanboottasks2-93" remap="internal">(Optional) To Use Digital Certificates
for Server and Client Authentication</olink></para>
</entry>
</row><row><entry><para>Create a hashing key and an encryption key for a more secure WAN boot
installation.</para>
</entry><entry><para>Use the <command>wanbootutil keygen</command> command to create HMAC
SHA1, 3DES, or AES keys.</para>
</entry><entry><para><olink targetptr="wanboottasks2-51" remap="internal">(Optional) To Create a Hashing Key
and an Encryption Key</olink></para>
</entry>
</row><row><entry><para>Create the Solaris Flash archive.</para>
</entry><entry><para>Use the <command>flarcreate</command> command to create an archive of
the software that you want to install on the client.</para>
</entry><entry><para><olink targetptr="wanboottasks2-6" remap="internal">To Create the Solaris Flash Archive</olink></para>
</entry>
</row><row><entry><para>Create the installation files for the custom JumpStart installation.</para>
</entry><entry><para>Use a text editor to create the following files:</para><itemizedlist><listitem><para><filename>sysidcfg</filename></para>
</listitem><listitem><para><filename>profile</filename></para>
</listitem><listitem><para><filename>rules.ok</filename></para>
</listitem><listitem><para><filename>begin scripts</filename></para>
</listitem><listitem><para><filename>finish scripts</filename></para>
</listitem>
</itemizedlist>
</entry><entry><para><olink targetptr="wanboottasks2-8" remap="internal">To Create the sysidcfg File</olink></para><para><olink targetptr="wanboottasks2-38" remap="internal">To Create the Profile</olink></para><para><olink targetptr="wanboottasks2-7" remap="internal">To Create the rules File</olink></para><para><olink targetptr="wanboottasks2-41" remap="internal">(Optional) Creating Begin and Finish
Scripts</olink></para>
</entry>
</row><row><entry><para>Create the system configuration file.</para>
</entry><entry><para>Set the configuration information in the <filename>system.conf</filename> file.</para>
</entry><entry><para><olink targetptr="wanboottasks2-71" remap="internal">To Create the System Configuration
File</olink></para>
</entry>
</row><row><entry><para>Create the WAN boot configuration file.</para>
</entry><entry><para>Set the configuration information in the <filename>wanboot.conf</filename> file.</para>
</entry><entry><para><olink targetptr="wanboottasks2-43" remap="internal">To Create the wanboot.conf File</olink></para>
</entry>
</row><row><entry><para>(Optional) Configure the DHCP server to support a WAN boot installation.</para>
</entry><entry><para>Set Sun vendor options and macros in the DHCP server.</para>
</entry><entry><para><olink targetptr="dhcp-admin-38" remap="internal">Preconfiguring System Configuration
Information With the DHCP Service (Tasks)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</table><table frame="topbot" id="wanboottasks2-tbl-122"><title>Task Map: Preparing
to Perform an Insecure WAN Boot Installation</title><tgroup cols="3" colsep="0" rowsep="0"><colspec colname="colspec7" colwidth="50*"/><colspec colname="colspec8" colwidth="50*"/><colspec colname="colspec9" colwidth="50.00*"/><thead><row><entry rowsep="1"><para>Task</para>
</entry><entry rowsep="1"><para>Description</para>
</entry><entry rowsep="1"><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Decide what security features you want to use in your installation.</para>
</entry><entry><para>Review the security features and configurations to decide what level
of security you want to use in your WAN boot installation.</para>
</entry><entry><para><olink targetptr="wanboottasks2-66" remap="internal">Protecting Data During a WAN Boot
Installation</olink></para><para><olink targetptr="wanboottasks2-30" remap="internal">Security Configurations Supported
by WAN Boot (Overview)</olink></para>
</entry>
</row><row><entry><para>Collect WAN boot installation information.</para>
</entry><entry><para>Complete the worksheet to record all the information you need to perform
a WAN boot installation.</para>
</entry><entry><para><olink targetptr="wanboottasks2-19" remap="internal">Gathering Information for WAN Boot
Installations</olink></para>
</entry>
</row><row><entry><para>Create the document root directory on the WAN boot server.</para>
</entry><entry><para>Create the document root directory and any subdirectories to serve the
configuration and installation files.</para>
</entry><entry><para><olink targetptr="wanboottasks-33cc" remap="internal">Creating the Document Root Directory</olink></para>
</entry>
</row><row><entry><para>Create the WAN boot miniroot.</para>
</entry><entry><para>Use the <command>setup_install_server</command> command to create the
WAN boot miniroot.</para>
</entry><entry><para><olink targetptr="wanboottasks-proc-2" remap="internal">To Create a WAN Boot Miniroot</olink></para>
</entry>
</row><row><entry><para>Verify that the client system supports WAN boot.</para>
</entry><entry><para>Check the client OBP for boot argument support of WAN boot.</para>
</entry><entry><para><olink targetptr="wanboottasks-13" remap="internal">To Check the Client OBP for WAN Boot
Support</olink></para>
</entry>
</row><row><entry><para>Install the <filename>wanboot</filename> program on the WAN boot server.</para>
</entry><entry><para>Copy the <filename>wanboot</filename> program to the document root directory
of the WAN boot server.</para>
</entry><entry><para><olink targetptr="wanboottasks-32" remap="internal">Installing the wanboot Program on
the WAN Boot Server</olink></para>
</entry>
</row><row><entry><para>Install the <filename>wanboot-cgi</filename> program on the WAN boot
server.</para>
</entry><entry><para>Copy the <filename>wanboot-cgi</filename> program  to the WAN boot server's
CGI directory.</para>
</entry><entry><para><olink targetptr="wanboottasks2-proc-83" remap="internal">To Copy the wanboot-cgi Program
to the WAN Boot Server</olink></para>
</entry>
</row><row><entry><para>(Optional) Set up the logging server.</para>
</entry><entry><para>Configure a dedicated system for displaying boot and installation log
messages.</para>
</entry><entry><para><olink targetptr="wanboottasks2-55" remap="internal">(Optional) To Configure the WAN
Boot Logging Server</olink></para>
</entry>
</row><row><entry><para>Set up the <filename>/etc/netboot</filename> hierarchy.</para>
</entry><entry><para>Populate the <filename>/etc/netboot</filename> hierarchy with the configuration
and security files that are required for a WAN boot installation.</para>
</entry><entry><para><olink targetptr="wanboottasks2-50" remap="internal">Creating the /etc/netboot Hierarchy
on the WAN Boot Server</olink></para>
</entry>
</row><row><entry><para>(Optional) Create a hashing key.</para>
</entry><entry><para>Use the <command>wanbootutil keygen</command> command to create HMAC
SHA1 key.</para><para>For insecure installations that check data integrity, complete this
task to create an HMAC SHA1 hashing key.</para>
</entry><entry><para><olink targetptr="wanboottasks2-51" remap="internal">(Optional) To Create a Hashing Key
and an Encryption Key</olink></para>
</entry>
</row><row><entry><para>Create the Solaris Flash archive.</para>
</entry><entry><para>Use the <command>flarcreate</command> command to create an archive of
the software that you want to install on the client.</para>
</entry><entry><para><olink targetptr="wanboottasks2-6" remap="internal">To Create the Solaris Flash Archive</olink></para>
</entry>
</row><row><entry><para>Create the installation files for the custom JumpStart installation.</para>
</entry><entry><para>Use a text editor to create the following files:</para><itemizedlist><listitem><para><filename>sysidcfg</filename></para>
</listitem><listitem><para>profile</para>
</listitem><listitem><para><filename>rules.ok</filename></para>
</listitem><listitem><para>begin scripts</para>
</listitem><listitem><para>finish scripts</para>
</listitem>
</itemizedlist>
</entry><entry><para><olink targetptr="wanboottasks2-8" remap="internal">To Create the sysidcfg File</olink></para><para><olink targetptr="wanboottasks2-38" remap="internal">To Create the Profile</olink></para><para><olink targetptr="wanboottasks2-7" remap="internal">To Create the rules File</olink></para><para><olink targetptr="wanboottasks2-41" remap="internal">(Optional) Creating Begin and Finish
Scripts</olink></para>
</entry>
</row><row><entry><para>Create the system configuration file.</para>
</entry><entry><para>Set the configuration information in the <filename>system.conf</filename> file.</para>
</entry><entry><para><olink targetptr="wanboottasks2-71" remap="internal">To Create the System Configuration
File</olink></para>
</entry>
</row><row><entry><para>Create the WAN boot configuration file.</para>
</entry><entry><para>Set the configuration information in the <filename>wanboot.conf</filename> file.</para>
</entry><entry><para><olink targetptr="wanboottasks2-43" remap="internal">To Create the wanboot.conf File</olink></para>
</entry>
</row><row><entry><para>(Optional) Configure the DHCP server to support a WAN boot installation.</para>
</entry><entry><para>Set Sun vendor options and macros in the DHCP server.</para>
</entry><entry><para><olink targetptr="dhcp-admin-38" remap="internal">Preconfiguring System Configuration
Information With the DHCP Service (Tasks)</olink></para>
</entry>
</row>
</tbody>
</tgroup>
</table>
</sect1><sect1 id="wanboottasks2-47"><title>Configuring the WAN Boot Server</title><para>The WAN boot server is a web server that provides the boot and configuration
data during a WAN boot installation. For a list of the system requirements
for the WAN boot server, see <olink targetptr="wanboottasks2-tbl-114" remap="internal">Table
10&ndash;1</olink>.</para><para>This section describes the following tasks required to configure the
WAN boot server for a WAN boot installation.</para><itemizedlist><listitem><para><olink targetptr="wanboottasks-33cc" remap="internal">Creating the Document
Root Directory</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-1nn" remap="internal">Creating the WAN Boot
Miniroot</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks-32" remap="internal">Installing the wanboot
Program on the WAN Boot Server</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-50" remap="internal">Creating the /etc/netboot
Hierarchy on the WAN Boot Server</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-25" remap="internal">Copying the WAN Boot CGI
Program to the WAN Boot Server</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-82" remap="internal">(Optional) Protecting
Data by Using HTTPS</olink></para>
</listitem>
</itemizedlist><sect2 id="wanboottasks-33cc"><title>Creating the Document Root Directory</title><para>To serve the configuration and installation files, you must make these
files accessible to the web server software on the WAN boot server. One method
to make these files accessible is to store them in the WAN boot server's document
root directory. </para><para>If you want to use a document root directory to serve the configuration
and installation files, you must create this directory. See your web server
documentation for information about how to create the document root directory.
For detailed information about how to design your document root directory,
see <olink targetptr="wanbootplanning-6" remap="internal">Storing Installation and Configuration
Files in the Document Root Directory</olink>.</para><para>For an example of how to set up this directory, see <olink targetptr="wanbootexamples-5dsaf" remap="internal">Create the Document Root Directory</olink>.</para><para>After you create the document root directory, create the WAN boot miniroot.
For instructions, see <olink targetptr="wanboottasks2-1nn" remap="internal">Creating the WAN
Boot Miniroot</olink>.</para>
</sect2><sect2 id="wanboottasks2-1nn"><title>Creating the WAN Boot Miniroot</title><para>WAN boot uses a special Solaris miniroot that has been modified to perform
a WAN boot installation. The WAN boot miniroot contains a subset of the software
in the Solaris miniroot. To perform a WAN boot installation, you must copy
the miniroot from the Solaris DVD or the Solaris Software - 1 CD to the WAN
boot server. Use the <option>w</option> option to the <command>setup_install_server</command> command to copy the WAN boot miniroot from the Solaris software
media to your system's hard disk.</para><task id="wanboottasks-proc-2" arch="sparc"><title>To Create a WAN Boot Miniroot</title><tasksummary><para>This procedure creates a SPARC WAN boot miniroot with SPARC media. If
you want to serve a SPARC WAN boot miniroot from an x86&ndash;based server,
you must create the miniroot on a SPARC machine. After you create the miniroot,
copy the miniroot to the document root directory on the x86&ndash;based server.</para>
</tasksummary><taskprerequisites><para>This procedure assumes that the WAN boot server is running the Volume
Manager. If you are not using the Volume Manager, see <olink targetdoc="sagdfs" remap="external"><citetitle remap="book">System Administration Guide: Devices and File Systems</citetitle></olink>.</para>
</taskprerequisites><procedure><step id="netinstall-step-520"><para>Become superuser or assume an equivalent
role on the WAN boot server. </para><para>The system must meet the following
requirements.</para><itemizedlist><listitem><para>Include a CD-ROM or DVD-ROM drive</para>
</listitem><listitem><para>Be part of the site's network and naming service</para><para>If
you use a naming service, the system must already be in a naming service,
such as NIS, NIS+, DNS, or LDAP. If you do not use a naming service, you must
distribute information about this system by following your site's policies.</para>
</listitem>
</itemizedlist>
</step><step id="netinstall-step-530"><para>Insert the Solaris Software - 1 CD or
the Solaris DVD in the install server's drive.</para>
</step><step id="netinstall-step-1020"><para>Create a directory for the WAN boot
miniroot and Solaris installation image.</para><screen># <userinput>mkdir -p <replaceable>wan-dir-path</replaceable> <replaceable>install-dir-path</replaceable></userinput></screen><variablelist><varlistentry><term><option>p</option></term><listitem><para>Instructs the <command>mkdir</command> command to create all
the necessary parent directories for the directory you want to create.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>wan-dir-path</replaceable></term><listitem><para>Specifies the directory where the WAN boot miniroot is to
be created on the install server. This directory needs to accommodate miniroots
that are typically 250 Mbytes in size.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>install-dir-path</replaceable></term><listitem><para>Specifies the directory on the install server where the Solaris
software image is to be copied. This directory can be removed later in this
procedure.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="netinstall-step-550"><para>Change to the <filename>Tools</filename> directory
on the mounted disc.</para><screen># <userinput>cd /cdrom/cdrom0/s0/Solaris_11/Tools</userinput></screen><para>In the previous example, <userinput>cdrom0</userinput> is the path to
the drive that contains the Solaris OS media.</para>
</step><step id="netinstall-step-560"><para>Copy the WAN boot miniroot and the Solaris
software image to the WAN boot server's hard disk.</para><screen># <userinput>./setup_install_server -w <replaceable>wan-dir-path</replaceable> <replaceable>install-dir-path</replaceable></userinput></screen><variablelist><varlistentry><term><replaceable>wan-dir-path</replaceable></term><listitem><para>Specifies the directory where the WAN boot miniroot is to
be copied</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>install-dir-path</replaceable></term><listitem><para>Specifies the directory where the Solaris software image is
to be copied</para>
</listitem>
</varlistentry>
</variablelist><note><para>The <command>setup_install_server</command> command indicates
whether you have enough disk space available for the Solaris Software disc
images. To determine available disk space, use the <command>df -kl</command> command.</para>
</note><para>The <command>setup_install_server -w</command> command creates the WAN
boot miniroot and a network installation image of the Solaris software.</para>
</step><step performance="optional" id="wanboottasks-step-46"><para>Remove the network
installation image.</para><para>You do not need the Solaris software image
to perform a WAN installation with a Solaris Flash archive. You can free up
disk space if you do not plan to use the network installation image for other
network installations. Type the following command to remove the network installation
image.</para><screen># <userinput>rm -rf <replaceable>install-dir-path</replaceable></userinput></screen>
</step><step id="wanboottasks2-step-18"><para>Make the WAN boot miniroot available
to the WAN boot server in one of the following ways.</para><stepalternatives><step><para>Create a symbolic link to the WAN boot miniroot in the document
root directory of the WAN boot server.</para><screen># <userinput>cd /<replaceable>document-root-directory</replaceable>/miniroot</userinput>
# <userinput>ln -s /<replaceable>wan-dir-path</replaceable>/miniroot .</userinput></screen><variablelist><varlistentry><term><filename><replaceable>document-root-directory</replaceable>/miniroot</filename></term><listitem><para>Specifies the directory in the WAN boot server's document
root directory where you want to link to the WAN boot miniroot</para>
</listitem>
</varlistentry><varlistentry><term><filename>/<replaceable>wan-dir-path</replaceable>/miniroot</filename></term><listitem><para>Specifies the path to the WAN boot miniroot</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Move the WAN boot miniroot to the document root directory on the
WAN boot server.</para><screen># <userinput>mv /<replaceable>wan-dir-path</replaceable>/miniroot /<replaceable>document-root-directory</replaceable>/miniroot/<replaceable>miniroot-name</replaceable></userinput></screen><variablelist><varlistentry><term><filename><replaceable>wan-dir-path</replaceable>/miniroot</filename></term><listitem><para>Specifies the path to the WAN boot miniroot.</para>
</listitem>
</varlistentry><varlistentry><term><filename>/<replaceable>document-root-directory</replaceable>/miniroot/</filename></term><listitem><para>Specifies the path to the WAN boot miniroot directory in the
WAN boot server's document root directory.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>miniroot-name</replaceable></term><listitem><para>Specifies the name of the WAN boot miniroot. Name the file
descriptively, for example <filename>miniroot.s10_sparc</filename>.</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</stepalternatives>
</step>
</procedure><example id="eypqx"><title>Creating the WAN Boot Miniroot</title><para>Use the <olink targetdoc="refman1m" targetptr="setup-install-server-1m" remap="external"><citerefentry><refentrytitle>setup_install_server</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink> with the <option>w</option> option to copy the WAN
boot miniroot and the Solaris software image to the <filename>/export/install/Solaris_11</filename> directory
of <literal>wanserver-1</literal>.</para><para>Insert the Solaris Software media in the media drive that is attached
to <literal>wanserver-1</literal>. Type the following commands.</para><screen width="100">wanserver-1# <userinput>mkdir -p /export/install/cdrom0</userinput>
wanserver-1# <userinput>cd /cdrom/cdrom0/s0/Solaris_11/Tools</userinput>
wanserver-1# <userinput>./setup_install_server -w /export/install/cdrom0/miniroot \</userinput>
<userinput>/export/install/cdrom0</userinput></screen><para>Move the WAN boot miniroot to the document root directory (<filename>/opt/apache/htdocs/</filename>) of the WAN boot server. In this example the name the WAN boot
miniroot is set to <filename>miniroot.s10_sparc</filename>.</para><screen width="100">wanserver-1# <userinput>mv /export/install/cdrom0/miniroot/miniroot \</userinput>
<userinput>/opt/apache/htdocs/miniroot/miniroot.s10_sparc</userinput></screen>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create the WAN boot miniroot, verify that the client OpenBoot
PROM (OBP) supports WAN boot. For instructions, see <olink targetptr="eypnx" remap="internal">Verifying
WAN Boot Support on the Client</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For additional information about the <command>setup_install_server</command> command,
see <olink targetdoc="refman1m" targetptr="install-scripts-1m" remap="external"><citerefentry><refentrytitle>install_scripts</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</taskrelated>
</task>
</sect2><sect2 id="eypnx"><title>Verifying WAN Boot Support on the Client</title><para>To perform an unattended WAN boot installation, the client system's
OpenBoot PROM (OBP) must support WAN boot. If the client's OBP does not support
WAN boot, you can perform a WAN boot installation by providing the necessary
programs on a local CD.</para><para>You can determine if the client supports WAN boot by checking the client's
OBP configuration variables. Perform the following procedure to check the
client for WAN boot support.</para><task id="wanboottasks-13"><title>To Check the Client OBP for WAN Boot Support</title><tasksummary><para>This procedure describes how to determine if the client OBP supports
WAN boot.</para>
</tasksummary><procedure id="wanboottasks2-proc-59">&suStepA;<step><para>Check the OBP configuration variables for WAN boot support.</para><screen># <userinput>eeprom | grep network-boot-arguments</userinput></screen><itemizedlist><listitem><para>If the variable <literal>network-boot-arguments</literal> is
displayed, or if the previous command returns the output <literal>network-boot-arguments:
data not available</literal>, the OBP supports WAN boot installations. You
do not need to update the OBP before you perform your WAN boot installation.</para>
</listitem><listitem><para>If the previous command does not return any output, the OBP
does not support WAN boot installations. You must perform one of the following
tasks.</para><itemizedlist mark="bullet"><listitem><para>Update the client OBP. For those clients who do have an OBP
that is capable of supporting WAN boot installations, see your system documentation
for information about how to update the OBP.</para><note><para>Not all client OBPs support WAN Boot. For those clients use the
next option.</para>
</note>
</listitem><listitem><para>After you complete the preparation tasks and are ready to install
the client, perform the WAN boot installation from the Solaris Software CD1
or DVD. This option works in all cases when the current OBP does not provide
WAN Boot support.</para><para>For instructions about how to boot the client
from CD1, see <olink targetptr="wanboottasks2-17" remap="internal">To Perform a WAN Boot Installation
With Local CD Media</olink>. To continue preparing for the WAN boot installation,
see <olink targetptr="wanboottasks2-50" remap="internal">Creating the /etc/netboot Hierarchy
on the WAN Boot Server</olink>.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</step>
</procedure><example id="wanboottasks-ex-25"><title>Verifying OBP Support for WAN Boot on the Client</title><para>The following command shows how to check the client OBP for WAN boot
support.</para><screen># <userinput>eeprom | grep network-boot-arguments</userinput>
network-boot-arguments: data not available</screen><para>In this example, the output <literal>network-boot-arguments: data not
available</literal> indicates that the client OBP supports WAN boot.</para>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you verify that the client OBP supports WAN boot, you must copy
the <filename>wanboot</filename> program to the WAN boot server. For instructions,
see <olink targetptr="wanboottasks-32" remap="internal">Installing the wanboot Program on the
WAN Boot Server</olink>.</para><para>If the client OBP does not support WAN boot, you do not need to copy
the <filename>wanboot</filename> program to the WAN boot server. You must
provide the <filename>wanboot</filename> program to the client on a local
CD. To continue the installation, see <olink targetptr="wanboottasks2-50" remap="internal">Creating
the /etc/netboot Hierarchy on the WAN Boot Server</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For additional information about the <command>setup_install_server</command> command,
see <olink targetptr="netinstalloverview-28995" remap="internal">Chapter&nbsp;4, Installing
From the Network (Overview)</olink>.</para>
</taskrelated>
</task>
</sect2><sect2 id="wanboottasks-32"><title>Installing the <filename>wanboot</filename> Program
on the WAN Boot Server</title><para>WAN boot uses a special second-level boot program (<filename>wanboot</filename>)
to install the client. The <filename>wanboot</filename> program loads the
WAN boot miniroot, client configuration files, and installation files that
are required to perform a WAN boot installation.</para><para>To perform a WAN boot installation, you must provide the <filename>wanboot</filename> program
to the client during the installation. You can provide this program to the
client in the following ways.</para><itemizedlist><listitem><para>If your client's PROM supports WAN boot, you can transmit
the program from the WAN boot server to the client. You must install the <filename>wanboot</filename> program on the WAN boot server.</para><para>To check if
your client's PROM supports WAN boot, see <olink targetptr="wanboottasks-13" remap="internal">To
Check the Client OBP for WAN Boot Support</olink>.</para>
</listitem><listitem><para>If your client's PROM does not support WAN boot, you must
provide the program to the client on a local CD. If your client's PROM does
not support WAN boot, go to <olink targetptr="wanboottasks2-50" remap="internal">Creating the
/etc/netboot Hierarchy on the WAN Boot Server</olink> to continue preparing
for your installation.</para>
</listitem>
</itemizedlist><task id="wanboottasks-proc-34" arch="sparc"><title>To Install the <filename>wanboot</filename> Program on the WAN Boot Server</title><tasksummary><para>This procedure describes how to copy the <filename>wanboot</filename> program
from Solaris media to the WAN boot server.</para><para>This procedure assumes that the WAN boot server is running the Volume
Manager. If you are not using the Volume Manager, see <olink targetdoc="sagdfs" remap="external"><citetitle remap="book">System Administration Guide: Devices and File Systems</citetitle></olink>.</para>
</tasksummary><taskprerequisites><para>Verify that your client system supports WAN boot. See <olink targetptr="wanboottasks-13" remap="internal">To Check the Client OBP for WAN Boot Support</olink> for
more information.</para>
</taskprerequisites><procedure><step><para>Become superuser or assume an equivalent role on the install server.</para>
</step><step id="wanboottasks-step-530"><para>Insert the Solaris Software - 1 CD
or the Solaris DVD in the install server's drive.</para>
</step><step id="wanboottasks-step-35"><para>Change to the <filename>sun4u</filename> platform
directory on the Solaris Software - 1 CD or the Solaris DVD.</para><screen># <userinput>cd /cdrom/cdrom0/s0/Solaris_11/Tools/Boot/platform/sun4u/</userinput></screen>
</step><step id="wanboottasks-step-36"><para>Copy the <filename>wanboot</filename> program
to the install server.</para><screen># <userinput>cp wanboot /<replaceable>document-root-directory</replaceable>/wanboot/<replaceable>wanboot-name</replaceable></userinput></screen><variablelist><varlistentry><term><replaceable>document-root-directory</replaceable></term><listitem><para>Specifies the document root directory of the WAN boot server.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>wanboot-name</replaceable></term><listitem><para>Specifies the name of the <filename>wanboot</filename> program.
Name this file descriptively, for example, <filename>wanboot.s10_sparc</filename>.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Make the <filename>wanboot</filename> program available to the
WAN boot server in one of the following ways.</para><itemizedlist><listitem><para>Create a symbolic link to the <filename>wanboot</filename> program
in the document root directory of the WAN boot server.</para><screen># <userinput>cd /<replaceable>document-root-directory</replaceable>/wanboot</userinput>
# <userinput>ln -s /<replaceable>wan-dir-path</replaceable>/wanboot .</userinput></screen><variablelist><varlistentry><term><filename><replaceable>document-root-directory</replaceable>/wanboot</filename></term><listitem><para>Specifies the directory in the WAN boot server's document
root directory where you want to link to the <filename>wanboot</filename> program</para>
</listitem>
</varlistentry><varlistentry><term><filename>/<replaceable>wan-dir-path</replaceable>/wanboot</filename></term><listitem><para>Specifies the path to the <filename>wanboot</filename> program</para>
</listitem>
</varlistentry>
</variablelist>
</listitem><listitem><para>Move the WAN boot miniroot to the document root directory
on the WAN boot server.</para><screen># <userinput>mv /<replaceable>wan-dir-path</replaceable>/wanboot /<replaceable>document-root-directory</replaceable>/wanboot/<replaceable>wanboot-name</replaceable></userinput></screen><variablelist><varlistentry><term><filename><replaceable>wan-dir-path</replaceable>/wanboot</filename></term><listitem><para>Specifies the path to the <filename>wanboot</filename> program</para>
</listitem>
</varlistentry><varlistentry><term><filename>/<replaceable>document-root-directory</replaceable>/wanboot/</filename></term><listitem><para>Specifies the path to the <filename>wanboot</filename> program
directory in the WAN boot server's document root directory.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>wanboot-name</replaceable></term><listitem><para>Specifies the name of the <filename>wanboot</filename> program.
Name the file descriptively, for example <filename>wanboot.s10_sparc</filename>.</para>
</listitem>
</varlistentry>
</variablelist>
</listitem>
</itemizedlist>
</step>
</procedure><example id="eypnb"><title>Installing the <filename>wanboot</filename> Program on the WAN Boot
Server</title><para>To install the <filename>wanboot</filename> program on the WAN boot
server, copy the program from the Solaris Software media to the WAN boot
server's document root directory.</para><para>Insert the Solaris DVD or the Solaris Software - 1 CD in the media
drive that is attached to <literal>wanserver-1</literal> and type the following
commands.</para><screen>wanserver-1# <userinput>cd /cdrom/cdrom0/s0/Solaris_11/Tools/Boot/platform/sun4u/</userinput>
wanserver-1# <userinput>cp wanboot /opt/apache/htdocs/wanboot/wanboot.s10_sparc</userinput></screen><para>In this example, the name of the <filename>wanboot</filename> program
is set to <filename>wanboot.s10_sparc</filename>.</para>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you install the  <filename>wanboot</filename> program on the WAN
boot server, you must create the  <filename>/etc/netboot</filename> hierarchy
on the WAN boot server. For instructions, see <olink targetptr="wanboottasks2-50" remap="internal">Creating the /etc/netboot Hierarchy on the WAN Boot Server</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For overview information about the <command>wanboot</command> program,
see <olink targetptr="wanboottasks2-105" remap="internal">What Is WAN Boot?</olink>.</para>
</taskrelated>
</task>
</sect2><sect2 id="wanboottasks2-50"><title>Creating the <filename>/etc/netboot</filename> Hierarchy
on the WAN Boot Server</title><para>During the installation, WAN boot refers to the contents of the <filename>/etc/netboot</filename> hierarchy on the web server for instructions about how to perform
the installation. This directory contains the configuration information, private
key, digital certificate, and certificate authority required for a WAN boot
installation. During the installation, the <filename>wanboot-cgi</filename> program
converts this information into the WAN boot file system. The <filename>wanboot-cgi</filename> program then transmits the WAN boot file system to the client.</para><para>You can create subdirectories within the <filename>/etc/netboot</filename> directory
to customize the scope of the WAN installation. Use the following directory
structures to define how configuration information is shared among the clients
that you want to install.</para><itemizedlist><listitem><para><emphasis role="strong">Global
configuration</emphasis> &ndash; If you want all the clients on your network
to share configuration information, store the files that you want to share
in the <filename>/etc/netboot</filename> directory.</para>
</listitem><listitem><para><emphasis role="strong">Network-specific
configuration</emphasis> &ndash; If you want only those machines on a specific
subnet to share configuration information, store the configuration files that
you want to share in a subdirectory of <filename>/etc/netboot</filename>.
Have the subdirectory follow this naming convention.</para><screen>/etc/netboot/<replaceable>net-ip</replaceable></screen><para>In this example, <replaceable>net-ip</replaceable> is the IP address
of the client's subnet.</para>
</listitem><listitem><para><emphasis role="strong">Client-specific configuration</emphasis> &ndash; If you want only a specific client to use the boot file
system, store the boot file system files in a subdirectory of <filename>/etc/netboot</filename>. Have the subdirectory follow this naming convention.</para><screen>/etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable></screen><para>In this example, <replaceable>net-ip</replaceable> is the IP address
of the subnet. <replaceable>client-ID</replaceable> is either the client ID
that is assigned by the DHCP server, or a user-specified client ID.</para>
</listitem>
</itemizedlist><para>For detailed planning information about these configurations, see <olink targetptr="wanboottasks2-501" remap="internal">Storing Configuration and Security Information
in the /etc/netboot Hierarchy</olink>.</para><para>The following procedure describes how to create the <filename>/etc/netboot</filename> hierarchy.</para><task id="wanboottasks-47"><title>To Create the <filename>/etc/netboot</filename> Hierarchy
on the WAN Boot Server</title><tasksummary><para>Follow these steps to create the <filename>/etc/netboot</filename> hierarchy.</para>
</tasksummary><procedure><step><para>Become superuser or assume an equivalent role on the WAN boot
server.</para>
</step><step id="wanboottasks-step-3"><para>Create the <filename>/etc/netboot</filename> directory.</para><screen># <userinput>mkdir /etc/netboot</userinput></screen>
</step><step id="wanboottasks-step-38"><para>Change the permissions of the <filename>/etc/netboot</filename> directory to 700.</para><screen># <userinput>chmod 700 /etc/netboot</userinput></screen>
</step><step id="wanboottasks-step-42"><para>Change the owner of the <filename>/etc/netboot</filename> directory to the web server owner.</para><screen># <userinput>chown <replaceable>web-server-user</replaceable>:<replaceable>web-server-group</replaceable> /etc/netboot/</userinput></screen><variablelist><varlistentry><term><replaceable>web-server-user</replaceable></term><listitem><para>Specifies the user owner of the web server process</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>web-server-group</replaceable></term><listitem><para>Specifies the group owner of the web server process</para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="wanboottasks-step-43"><para>Exit the superuser role.</para><screen># <userinput>exit</userinput></screen>
</step><step id="wanboottasks-step-44"><para>Assume the user role of the web server
owner.</para>
</step><step><para>Create the client subdirectory of the <filename>/etc/netboot</filename> directory.</para><screen># <userinput>mkdir -p /etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable></userinput></screen><variablelist><varlistentry><term><option>p</option></term><listitem><para>Instructs the <command>mkdir</command> command to create all
the necessary parent directories for the directory you want to create.</para>
</listitem>
</varlistentry><varlistentry><term>(Optional) <replaceable>net-ip</replaceable></term><listitem><para>Specifies the network IP address of the client's subnet.</para>
</listitem>
</varlistentry><varlistentry><term>(Optional) <replaceable>client-ID</replaceable></term><listitem><para>Specifies the client ID. The client ID can be a user-defined
value or the DHCP client ID. The <replaceable>client-ID</replaceable> directory
must be a subdirectory of the <replaceable>net-ip</replaceable> directory.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>For each directory in the <filename>/etc/netboot</filename> hierarchy, change the permissions to 700.</para><screen># <userinput>chmod 700 /etc/netboot/<replaceable>dir-name</replaceable></userinput></screen><variablelist><varlistentry><term><replaceable>dir-name</replaceable></term><listitem><para>Specifies the name of a directory in the <filename>/etc/netboot</filename> hierarchy</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</procedure><example id="wanboottasks-ex-26"><title>Creating the <filename>/etc/netboot</filename> Hierarchy on the WAN
Boot Server</title><para>The following example shows how to create the <filename>/etc/netboot</filename> hierarchy
for the client 010003BA152A42 on subnet 192.168.198.0. In this example, the
user <literal>nobody</literal> and the group <literal>admin</literal> own
the web server process.</para><para>The commands in this example perform the following tasks.</para><itemizedlist><listitem><para>Create the <filename>/etc/netboot</filename> directory.</para>
</listitem><listitem><para>Change the permissions of the <filename>/etc/netboot</filename> directory
to 700.</para>
</listitem><listitem><para>Change the ownership of the <filename>/etc/netboot</filename> directory
to the owner of the web server process.</para>
</listitem><listitem><para>Assume the same user role as the web server user.</para>
</listitem><listitem><para>Create a subdirectory of <filename>/etc/netboot</filename> that
is named after the subnet (192.168.198.0).</para>
</listitem><listitem><para>Create a subdirectory of the subnet directory that is named
after the client ID.</para>
</listitem><listitem><para>Change the permissions of the <filename>/etc/netboot</filename> subdirectories
to 700.</para>
</listitem>
</itemizedlist><screen># <userinput>cd /</userinput>
# <userinput>mkdir /etc/netboot/</userinput>
# <userinput>chmod 700 /etc/netboot</userinput>
# <userinput>chown nobody:admin /etc/netboot</userinput>
# <userinput>exit</userinput>
server# <userinput>su nobody</userinput>
Password:
nobody# <userinput>mkdir -p /etc/netboot/192.168.198.0/010003BA152A42</userinput>
nobody# <userinput>chmod 700 /etc/netboot/192.168.198.0</userinput>
nobody# <userinput>chmod 700 /etc/netboot/192.168.198.0/010003BA152A42</userinput></screen>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create the <filename>/etc/netboot</filename> hierarchy, you
must copy the WAN Boot CGI program to the WAN boot server. For instructions,
see <olink targetptr="wanboottasks2-25" remap="internal">Copying the WAN Boot CGI Program to
the WAN Boot Server</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For detailed planning information about how to design the <filename>/etc/netboot</filename> hierarchy, see <olink targetptr="wanboottasks2-501" remap="internal">Storing Configuration
and Security Information in the /etc/netboot Hierarchy</olink>.</para>
</taskrelated>
</task>
</sect2><sect2 id="wanboottasks2-25"><title>Copying the WAN Boot CGI Program to the
WAN Boot Server</title><para>The <filename>wanboot-cgi</filename> program creates the data streams
that transmit the following files from the WAN boot server to the client.</para><itemizedlist><listitem><para><command>wanboot</command> program</para>
</listitem><listitem><para>WAN boot file system</para>
</listitem><listitem><para>WAN boot miniroot</para>
</listitem>
</itemizedlist><para>The <filename>wanboot-cgi</filename> program is installed on the system
when you install the current Solaris release software. To enable the WAN boot server to
use this program, copy this program to the <filename>cgi-bin</filename> directory
of the WAN boot server.</para><task id="wanboottasks2-proc-83"><title>To Copy the <filename>wanboot-cgi</filename> Program
to the WAN Boot Server</title><procedure><step><para>Become superuser or assume an equivalent role on the WAN boot
server.</para>
</step><step id="wanboottasks2-step-84"><para>Copy the <filename>wanboot-cgi</filename> program
to the WAN boot server.</para><screen># <userinput>cp /usr/lib/inet/wanboot/wanboot-cgi /<replaceable>WAN-server-root</replaceable>/cgi-bin/wanboot-cgi</userinput></screen><variablelist><varlistentry><term>/<replaceable>WAN-server-root</replaceable></term><listitem><para>Specifies the root directory of the web server software on
the WAN boot server</para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="wanboottasks2-step-86"><para>On the WAN boot server, change the
permissions of the CGI program to 755.</para><screen># <userinput>chmod 755 /<replaceable>WAN-server-root</replaceable>/cgi-bin/wanboot-cgi</userinput></screen>
</step>
</procedure><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you copy the WAN boot CGI program to the WAN boot server, you
can optionally set up a logging server. For instructions, see <olink targetptr="wanboottasks2-55" remap="internal">(Optional) To Configure the WAN Boot Logging
Server</olink>.</para><para>If you do not want to set up a separate logging server, see <olink targetptr="wanboottasks2-82" remap="internal">(Optional) Protecting Data by Using HTTPS</olink> for
instructions about how to set up the security features of a WAN boot installation.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For overview information about the <command>wanboot-cgi</command> program,
see <olink targetptr="wanboottasks2-105" remap="internal">What Is WAN Boot?</olink>.</para>
</taskrelated>
</task>
</sect2><task id="wanboottasks2-55"><title>(Optional) To Configure the WAN Boot Logging
Server</title><tasksummary><para>By default, all WAN boot logging messages are displayed on the client
system. This default behavior enables you to quickly debug any installation
issues.</para><para>If you want to record boot and installation logging messages on a system
other than the client, you must set up a logging server. If you want to use
a logging server with HTTPS during the installation, you must configure the
WAN boot server as the logging server.</para><para>To configure the logging server, follow these steps.</para>
</tasksummary><procedure><step id="wanboottasks2-step-85"><para>Copy the <filename>bootlog-cgi</filename> script
to the logging server's CGI script directory.</para><screen># <userinput>cp /usr/lib/inet/wanboot/bootlog-cgi \   <replaceable>log-server-root</replaceable>/cgi-bin</userinput></screen><variablelist><varlistentry><term><filename><replaceable>log-server-root</replaceable>/cgi-bin</filename></term><listitem><para>Specifies the <filename>cgi-bin</filename> directory in the
logging server's web server directory</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Change the permissions of the <filename>bootlog-cgi</filename> script
to 755.</para><screen># <userinput>chmod 755 <replaceable>log-server-root</replaceable>/cgi-bin/bootlog-cgi</userinput></screen>
</step><step id="wanboottasks2-step-122"><para>Set the value of the <literal>boot_logger</literal> parameter in the <filename>wanboot.conf</filename> file.</para><para>In
the <filename>wanboot.conf</filename> file, specify the URL of the <filename>bootlog-cgi</filename> script on the logging server.</para><para>For more information
about setting parameters in the <filename>wanboot.conf</filename> file, see <olink targetptr="wanboottasks2-43" remap="internal">To Create the wanboot.conf File</olink>.</para><para>During
the installation, boot and installation log messages are recorded in the <filename>/tmp</filename> directory of the logging server. The log file is named <filename>bootlog.<replaceable>hostname</replaceable></filename>, where <replaceable>hostname</replaceable> is the host name of the client.</para>
</step>
</procedure><example id="wanboottasks-ex-6"><title>Configuring a Logging Server for WAN Boot Installation Over HTTPS</title><para>The following example configures the WAN boot server as a logging server.</para><screen># <userinput>cp /usr/lib/inet/wanboot/bootlog-cgi /opt/apache/cgi-bin/</userinput>
# <userinput>chmod 755 /opt/apache/cgi-bin/bootlog-cgi</userinput></screen>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you set up the logging server, you can optionally set up the WAN
boot installation to use digital certificates and security keys. See <olink targetptr="wanboottasks2-82" remap="internal">(Optional) Protecting Data by Using HTTPS</olink> for
instructions about how to set up the security features of a WAN boot installation.</para>
</taskrelated-custom>
</task>
</sect1><sect1 id="wanboottasks2-82"><title>(Optional) Protecting Data by Using HTTPS</title><para>To protect your data during the transfer from the WAN boot server to
the client, you can use HTTP over Secure Sockets Layer (HTTPS). To use the
more secure installation configuration that is described in <olink targetptr="wanboottasks2-68" remap="internal">Secure WAN Boot Installation Configuration</olink>,
you must enable your web server to use HTTPS.</para><para>If you do not want to perform a secure WAN boot, skip the procedures
in this section. To continue preparing for your less secure installation,
see <olink targetptr="wanboottasks-29" remap="internal">Creating the Custom JumpStart Installation
Files</olink>.</para><para>To enable the web server software on the WAN boot server to use HTTPS,
you must perform the following tasks.</para><itemizedlist><listitem><para>Activate Secure Sockets Layer (SSL) support in your web server
software.</para><para>The processes for enabling SSL support and client authentication
vary by web server. This document does not describe how to enable these security
features on your web server. For information about these features, see the
following documentation.</para><itemizedlist><listitem><para>For information about activating SSL on the SunONE and iPlanet
web servers, see the SunONE and iPlanet documentation collections on <ulink url="http://docs.sun.com" type="text">http://docs.sun.com</ulink>.</para>
</listitem><listitem><para>For information about activating SSL on the Apache web server,
see the Apache Documentation Project at <ulink url="http://httpd.apache.org/docs-project/" type="text">http://httpd.apache.org/docs-project/</ulink>.</para>
</listitem><listitem><para>If you are using web server software that is not listed in
the previous list, see your web server software documentation.</para>
</listitem>
</itemizedlist>
</listitem><listitem><para>Install digital certificates on the WAN boot server.</para><para>For information about using digital certificates with WAN boot, see <olink targetptr="wanboottasks2-93" remap="internal">(Optional) To Use Digital Certificates for Server
and Client Authentication</olink>.</para>
</listitem><listitem><para>Provide a trusted certificate to the client.</para><para>For
instructions about how to create a trusted certificate, see <olink targetptr="wanboottasks2-93" remap="internal">(Optional) To Use Digital Certificates for Server
and Client Authentication</olink>.</para>
</listitem><listitem><para>Create a hashing key and an encryption key.</para><para>For
instructions about how to create keys, see <olink targetptr="wanboottasks2-51" remap="internal">(Optional)
To Create a Hashing Key and an Encryption Key</olink>.</para>
</listitem><listitem><para>(Optional) Configure the web server software to support client
authentication.</para><para>For information about how to configure your web
server to support client authentication, see your web server documentation.</para>
</listitem>
</itemizedlist><para>This section describes how to use digital certificates and keys in your
WAN boot installation.</para><task id="wanboottasks2-93"><title>(Optional) To Use Digital Certificates
for Server and Client Authentication</title><tasksummary><para>The WAN boot installation method can use PKCS#12 files to perform an
installation over HTTPS with server or both client and server authentication.
For requirements and guidelines about using PKCS#12 files, see <olink targetptr="wanboottasks2-70" remap="internal">Digital Certificate Requirements</olink>.</para><para>To use a PKCS#12 file in a WAN boot installation, you perform the following
tasks.</para><itemizedlist><listitem><para>Split the PKCS#12 file into separate SSL private key and trusted
certificate files.</para>
</listitem><listitem><para>Insert the trusted certificate in the client's <filename>truststore</filename> file in the <filename>/etc/netboot</filename> hierarchy. The trusted
certificate instructs the client to trust the server.</para>
</listitem><listitem><para>(Optional) Insert the contents of the SSL private key file
in the client's <filename>keystore</filename> file in the  <filename>/etc/netboot</filename> hierarchy.</para>
</listitem>
</itemizedlist><para>The <command>wanbootutil</command> command provides options to perform
the tasks in the previous list.</para><para>If you do not want to perform a secure WAN boot, skip this procedure.
To continue preparing for your less secure installation, see <olink targetptr="wanboottasks-29" remap="internal">Creating the Custom JumpStart Installation Files</olink>.</para><para>Follow these steps to create a trusted certificate and a client private
key.</para>
</tasksummary><taskprerequisites><para>Before you split a PKCS#12 file, create the appropriate subdirectories
of the <filename>/etc/netboot</filename> hierarchy on the WAN boot server.</para><itemizedlist><listitem><para>For overview information that describes the <filename>/etc/netboot</filename> hierarchy, see <olink targetptr="wanboottasks2-501" remap="internal">Storing Configuration
and Security Information in the /etc/netboot Hierarchy</olink>.</para>
</listitem><listitem><para>For instructions about how to create the <filename>/etc/netboot</filename> hierarchy, see <olink targetptr="wanboottasks2-50" remap="internal">Creating the
/etc/netboot Hierarchy on the WAN Boot Server</olink>.</para>
</listitem>
</itemizedlist>
</taskprerequisites><procedure><step><para>Assume the same user role as the web server user on the WAN boot
server.</para>
</step><step id="wanboottasks2-step-95"><para>Extract the trusted certificate from
the PKCS#12 file. Insert the certificate in the client's <filename>truststore</filename> file
in the <filename>/etc/netboot</filename> hierarchy.</para><screen># <userinput>wanbootutil p12split -i <replaceable>p12cert</replaceable> \</userinput>
<userinput>-t /etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable>/truststore</userinput></screen><variablelist><varlistentry><term><command>p12split</command></term><listitem><para>Option to <command>wanbootutil</command> command that splits
a PKCS#12 file into separate private key and certificate files.</para>
</listitem>
</varlistentry><varlistentry><term><command>-i <replaceable>p12cert</replaceable></command></term><listitem><para>Specifies the name of the PKCS#12 file to split.</para>
</listitem>
</varlistentry><varlistentry><term><command>-t</command> <filename>/etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable>/truststore</filename><command></command></term><listitem><para>Inserts the certificate in the client's <filename>truststore</filename> file. <replaceable>net-ip</replaceable> is the IP address of the client's subnet. <replaceable>client-ID</replaceable> can be a user-defined ID or the DHCP client ID.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step performance="optional" id="wanboottasks-step-4"><para>Decide if you
want to require client authentication.</para><stepalternatives><step><para>If no, go to <olink targetptr="wanboottasks2-51" remap="internal">(Optional) To
Create a Hashing Key and an Encryption Key</olink>.</para>
</step><step><para>If yes, continue with the following steps.</para><substeps><step><para>Insert the client certificate in the client's <filename>certstore</filename>.</para><screen># <userinput>wanbootutil p12split -i <replaceable>p12cert</replaceable> -c \</userinput>
<userinput>/etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable>/certstore -k <replaceable>keyfile</replaceable></userinput></screen><variablelist><varlistentry><term><command>p12split</command></term><listitem><para>Option to <command>wanbootutil</command> command that splits
a PKCS#12 file into separate private key and certificate files.</para>
</listitem>
</varlistentry><varlistentry><term><command>-i <replaceable>p12cert</replaceable></command></term><listitem><para>Specifies the name of the PKCS#12 file to split.</para>
</listitem>
</varlistentry><varlistentry><term><command>-c /etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable>/certstore</command></term><listitem><para>Inserts the client's certificate in the client's <filename>certstore</filename>. <replaceable>net-ip</replaceable> is the IP address of the client's
subnet. <replaceable>client-ID</replaceable> can be a user-defined ID or the
DHCP client ID.</para>
</listitem>
</varlistentry><varlistentry><term><command>-k <replaceable>keyfile</replaceable></command></term><listitem><para>Specifies the name of the client's SSL private key file to
create from the split PKCS#12 file.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Insert the private key in the client's <filename>keystore</filename>.</para><screen># <userinput>wanbootutil keymgmt -i -k <replaceable>keyfile</replaceable> \</userinput>
<userinput>-s /etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable>/keystore -o type=rsa</userinput></screen><variablelist><varlistentry><term><command>keymgmt -i</command></term><listitem><para>Inserts an SSL private key in the client's <filename>keystore</filename></para>
</listitem>
</varlistentry><varlistentry><term><command>-k <replaceable>keyfile</replaceable></command></term><listitem><para>Specifies the name of the client's private key file that was
created in the previous step</para>
</listitem>
</varlistentry><varlistentry><term><command>-s /etc/netboot/<replaceable>net-ip</replaceable>/<replaceable>client-ID</replaceable>/keystore</command></term><listitem><para>Specifies the path to the client's <filename>keystore</filename></para>
</listitem>
</varlistentry><varlistentry><term><command>-o type=rsa</command></term><listitem><para>Specifies the
key type as RSA</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</substeps>
</step>
</stepalternatives>
</step>
</procedure><example id="wanboottasks2-ex-117"><title>Creating a Trusted Certificate for Server Authentication</title><para>In the following example, you use a PKCS#12 file to install client 010003BA152A42
on subnet 192.168.198.0. This command sample extracts a certificate from a
PKCS#12 file that is named <filename>client.p12</filename>. The command then
places the contents of the trusted certificate in the client's <filename>truststore</filename> file.</para><para>Before you execute these commands, you must first assume the same user
role as the web server user. In this example, the web server user role is <literal>nobody</literal>.</para><screen width="100">server# <userinput>su nobody</userinput>
Password:
nobody# <userinput>wanbootutil p12split -i client.p12 \</userinput>
<userinput>-t /etc/netboot/192.168.198.0/010003BA152A42/truststore</userinput>
nobody# <userinput>chmod 600 /etc/netboot/192.168.198.0/010003BA152A42/truststore</userinput></screen>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create a digital certificate, create a hashing key and an
encryption key. For instructions, see<olink targetptr="wanboottasks2-51" remap="internal">(Optional)
To Create a Hashing Key and an Encryption Key</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For more information about how to create trusted certificates, see the
man page <olink targetdoc="refman1m" targetptr="wanbootutil-1m" remap="external"><citerefentry><refentrytitle>wanbootutil</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</taskrelated>
</task><task id="wanboottasks2-51"><title>(Optional) To Create a Hashing Key and
an Encryption Key</title><tasksummary><para>If you want to use HTTPS to transmit your data, you must create a HMAC
SHA1 hashing key and an encryption key. If you plan to install over a semi-private
network, you might not want to encrypt the installation data. You can use
a HMAC SHA1 hashing key to check the integrity of the <filename>wanboot</filename> program.</para><para>By using the <command>wanbootutil keygen</command> command, you can
generate these keys and store them in the appropriate <filename>/etc/netboot</filename> directory.</para><para>If you do not want to perform a secure WAN boot, skip this procedure.
To continue preparing for your less secure installation, see <olink targetptr="wanboottasks-29" remap="internal">Creating the Custom JumpStart Installation Files</olink>.</para><para>To create a hashing key and an encryption key, follow these steps.</para>
</tasksummary><procedure><step><para>Assume the same user role as the web server user on the WAN boot
server.</para>
</step><step id="wanboottasks2-step-91"><para>Create the master HMAC SHA1 key.</para><screen># <userinput>wanbootutil keygen -m</userinput></screen><variablelist><varlistentry><term><command>keygen -m</command></term><listitem><para>Creates the master HMAC SHA1 key for the WAN boot server</para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="wanboottasks2-step-92"><para>Create the HMAC SHA1 hashing key for
the client from the master key.</para><screen># <userinput>wanbootutil keygen -c -o [net=<replaceable>net-ip</replaceable>,{cid=<replaceable>client-ID</replaceable>,}]type=sha1</userinput></screen><variablelist><varlistentry><term><command>-c</command></term><listitem><para>Creates the client's hashing key from the master key.</para>
</listitem>
</varlistentry><varlistentry><term><command>-o</command></term><listitem><para>Indicates that additional options are included for the <command>wanbootutil
keygen</command> command.</para>
</listitem>
</varlistentry><varlistentry><term>(Optional) <command>net=<replaceable>net-ip</replaceable></command></term><listitem><para>Specifies the IP address for the client's subnet. If you do
not use the <command>net</command> option, the key is stored in the <filename>/etc/netboot/keystore</filename> file, and can be used by all WAN boot clients.</para>
</listitem>
</varlistentry><varlistentry><term>(Optional) <command>cid=<replaceable>client-ID</replaceable></command></term><listitem><para>Specifies the client ID. The client ID can be a user-defined
ID or the DHCP client ID. The <command>cid</command> option must be preceded
by a valid <command>net=</command> value. If you do not specify the <command>cid</command> option
with the  <command>net</command> option, the key is stored in the <filename>/etc/netboot/<replaceable>net-ip</replaceable>/keystore</filename> file. This key can be used by all
WAN boot clients on the <replaceable>net-ip</replaceable> subnet.</para>
</listitem>
</varlistentry><varlistentry><term><command>type=sha1</command></term><listitem><para>Instructs the <command>wanbootutil keygen</command> utility
to create a HMAC SHA1 hashing key for the client.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step><para>Decide if you need to create an encryption key for the client.</para><para>You need to create an encryption key to perform a WAN boot installation
over HTTPS. Before the client establishes an HTTPS connection with the WAN
boot server, the WAN boot server transmits encrypted data and information
to the client. The encryption key enables the client to decrypt this information
and use this information during the installation.</para><itemizedlist><listitem><para>If you are performing a more secure WAN installation over
HTTPS with server authentication, continue.</para>
</listitem><listitem><para>If you only want to check the integrity of the <command>wanboot</command> program,
you do not need to create an encryption key. Go to <olink targetptr="wanboottasks-step-12" remap="internal">Step&nbsp;6</olink>.</para>
</listitem>
</itemizedlist>
</step><step id="wanboottasks2-step-93"><para>Create an encryption key for the client.</para><screen># <userinput>wanbootutil keygen -c -o [net=<replaceable>net-ip</replaceable>,{cid=<replaceable>client-ID</replaceable>,}]type=<replaceable>key-type</replaceable></userinput></screen><variablelist><varlistentry><term><command>-c</command></term><listitem><para>Creates the client's encryption key.</para>
</listitem>
</varlistentry><varlistentry><term><command>-o</command></term><listitem><para>Indicates that additional options are included for the <command>wanbootutil
keygen</command> command.</para>
</listitem>
</varlistentry><varlistentry><term>(Optional) <command>net=<replaceable>net-ip</replaceable></command></term><listitem><para>Specifies the network IP address for the client.  If you do
not use the <command>net</command> option, the key is stored in the <filename>/etc/netboot/keystore</filename> file, and can be used by all WAN boot clients.</para>
</listitem>
</varlistentry><varlistentry><term>(Optional) <command>cid=<replaceable>client-ID</replaceable></command></term><listitem><para>Specifies the client ID. The client ID can be a user-defined
ID, or the DHCP client ID. The <command>cid</command> option must be preceded
by a valid <command>net=</command> value. If you do not specify the <command>cid</command> option
with the  <command>net</command> option, the key is stored in the <filename>/etc/netboot/<replaceable>net-ip</replaceable>/keystore</filename> file. This key can be used by all
WAN boot clients on the <replaceable>net-ip</replaceable> subnet.</para>
</listitem>
</varlistentry><varlistentry><term><command>type=<replaceable>key-type</replaceable></command></term><listitem><para>Instructs the <command>wanbootutil keygen</command> utility
to create an encryption key for the client. <replaceable>key-type</replaceable> can
have a value of <command>3des</command> or <command>aes</command>.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="wanboottasks-step-12"><para>Install the keys on the client system.</para><para>For instructions about how to install
keys on the client, see <olink targetptr="wanboottasks-9" remap="internal">Installing Keys
on the Client</olink>.</para>
</step>
</procedure><example id="wanboottasks-ex-5"><title>Creating Required Keys for WAN Boot Installation Over HTTPS</title><para>The following example creates a master HMAC SHA1 key for the WAN boot
server. This example also creates a HMAC SHA1 hashing key and 3DES encryption
key for client 010003BA152A42 on subnet 192.168.198.0.</para><para>Before you execute these commands, you must first assume the same user
role as the web server user. In this example, the web server user role is <literal>nobody</literal>.</para><screen width="100">server# <userinput>su nobody</userinput>
Password:
nobody# <userinput>wanbootutil keygen -m</userinput>
nobody# <userinput>wanbootutil keygen -c -o net=192.168.198.0,cid=010003BA152A42,type=sha1</userinput>
nobody# <userinput>wanbootutil keygen -c -o net=192.168.198.0,cid=010003BA152A42,type=3des</userinput></screen>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create a hashing and an encryption key, you must create the
installation files. For instructions, see <olink targetptr="wanboottasks-29" remap="internal">Creating
the Custom JumpStart Installation Files</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For overview information on hashing keys and encryption keys, see <olink targetptr="wanboottasks2-66" remap="internal">Protecting Data During a WAN Boot Installation</olink>.</para><para>For more information about how to create hashing and encryption keys,
see the man page <olink targetdoc="refman1m" targetptr="wanbootutil-1m" remap="external"><citerefentry><refentrytitle>wanbootutil</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</taskrelated>
</task>
</sect1><sect1 id="wanboottasks-29"><title>Creating the Custom JumpStart Installation
Files</title><para>WAN boot performs a custom JumpStart installation to install a Solaris
Flash archive on the client. The custom JumpStart installation method is a
command&ndash;line interface that enables you to automatically install several
systems, based on profiles that you create. The profiles define specific software
installation requirements. You can also incorporate shell scripts to include
preinstallation and postinstallation tasks. You choose which profile and scripts
to use for installation or upgrade. The custom JumpStart installation method
installs or upgrades the system, based on the profile and scripts that you
select. Also, you can use a <filename>sysidcfg</filename> file to specify
configuration information so that the custom JumpStart installation is completely
free of manual intervention.</para><para>To prepare the custom JumpStart files for a WAN boot installation, complete
the following tasks.</para><itemizedlist><listitem><para><olink targetptr="wanboottasks2-6" remap="internal">To Create the Solaris Flash
Archive</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-8" remap="internal">To Create the sysidcfg
File</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-7" remap="internal">To Create the rules File</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-38" remap="internal">To Create the Profile</olink></para>
</listitem><listitem><para><olink targetptr="wanboottasks2-41" remap="internal">(Optional) Creating Begin
and Finish Scripts</olink></para>
</listitem>
</itemizedlist><para>For detailed information on the custom JumpStart installation method,
see <olink targetdoc="solinstalladv" targetptr="jumpstartoverview-4" remap="external">Chapter 2, <citetitle remap="chapter">Custom JumpStart (Overview),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para><task id="wanboottasks2-6"><title>To Create the Solaris Flash Archive</title><tasksummary><para>The Solaris Flash installation feature enables you to use a single
reference installation of the Solaris OS on a system, which is called
the master system. You can then create a Solaris Flash archive, which is a
replica image of the master system. You can install the Solaris Flash archive
on other systems in the network, creating clone systems.</para><para>This section describes how to create a Solaris Flash archive.</para>
</tasksummary><taskprerequisites><itemizedlist><listitem><para>Before you create a Solaris Flash archive, you must first
install the master system.</para><itemizedlist><listitem><para>For information about installing a master system, see <olink targetdoc="solinstallflash" targetptr="flashcreate-3" remap="external"><citetitle remap="section">Installing the Master System</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</citetitle></olink>.</para>
</listitem><listitem><para>For detailed
information about Solaris Flash archives, see <olink targetdoc="solinstallflash" targetptr="flash-24" remap="external">Chapter 1, <citetitle remap="chapter">Solaris Flash (Overview),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</citetitle></olink>.</para>
</listitem>
</itemizedlist>
</listitem><listitem><para>File Size Issues:</para><para>Check your web server software
documentation to verify that the software can transmit  files that are the
size of a Solaris Flash archive.</para><itemizedlist><listitem><para>Check your web server software documentation to verify that
the software can transmit  files that are the size of a Solaris Flash archive.</para>
</listitem><listitem><para>The <command>flarcreate</command> command
no longer has size limitations on individual files. You can create a Solaris Flash archive
that  contains individual files over 4 Gbytes.</para><para>For more information,
see <olink targetdoc="solinstallflash" targetptr="gbwbm" remap="external"><citetitle remap="section">Creating an Archive That Contains Large Files</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</citetitle></olink>.</para>
</listitem>
</itemizedlist>
</listitem>
</itemizedlist>
</taskprerequisites><procedure><step id="flash-step-4400"><para>Boot the master system.</para><para>Run the
master system in as inactive a state as possible. When possible, run the system
in single-user mode. If that is not possible, shut down any applications that
you want to archive and any applications that require extensive operating
system resources.</para>
</step><step id="flash-step-4500"><para>To create the archive, use the <command>flarcreate</command> command.</para><screen># <userinput>flarcreate -n <replaceable>name</replaceable> [<replaceable>optional-parameters</replaceable>]  <replaceable>document-root</replaceable>/flash/<replaceable>filename</replaceable></userinput></screen><variablelist><varlistentry><term><replaceable>name</replaceable></term><listitem><para>The name that you give the archive. The <replaceable>name</replaceable> you
specify is the value of the <literal>content_name</literal> keyword.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>optional-parameters</replaceable></term><listitem><para>You can use several options to the <command>flarcreate</command> command
to customize your Solaris Flash archive. For detailed descriptions of these
options, see <olink targetdoc="solinstallflash" targetptr="flashref-1" remap="external">Chapter 5, <citetitle remap="chapter">Solaris Flash (Reference),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</citetitle></olink>.</para>
</listitem>
</varlistentry><varlistentry><term><filename><replaceable>document-root</replaceable>/flash</filename></term><listitem><para>The path to the Solaris Flash subdirectory of the install
server's document root directory.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>filename</replaceable></term><listitem><para>The name of the archive file.</para>
</listitem>
</varlistentry>
</variablelist><para>To conserve disk space, you might want to use the <option>c</option> option
to the <command>flarcreate</command> command to compress the archive. However,
a compressed archive can affect the performance of your WAN boot installation.
For more information about creating a compressed archive, see the man page <olink targetdoc="refman1m" targetptr="flarcreate-1m" remap="external"><citerefentry><refentrytitle>flarcreate</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para><itemizedlist><listitem><para>If the archive creation is successful, the <command>flarcreate</command> command
returns an exit code of 0.</para>
</listitem><listitem><para>If the archive creation fails, the <command>flarcreate</command> command
returns a nonzero exit code.</para>
</listitem>
</itemizedlist>
</step>
</procedure><example id="eypnc"><title>Creating a Solaris Flash Archive for a WAN Boot Installation</title><para>In this example, you create your Solaris Flash archive by cloning the
WAN boot server system with the host name <literal>wanserver</literal>. The
archive is named <filename>sol_10_sparc</filename>, and is copied exactly
from the master system. The archive is an exact duplicate of the master system.
The archive is stored in <filename>sol_10_sparc.flar</filename>. You save
the archive in the <filename>flash/archives</filename> subdirectory of the
document root directory on the WAN boot server.</para><screen>wanserver# <userinput>flarcreate -n sol_10_sparc \
/opt/apache/htdocs/flash/archives/sol_10_sparc.flar</userinput></screen>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create the Solaris Flash archive, preconfigure the client
information in the <filename>sysidcfg</filename> file. For instructions, see <olink targetptr="wanboottasks2-8" remap="internal">To Create the sysidcfg File</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For detailed instructions about how to create a Solaris Flash archive,
see <olink targetdoc="solinstallflash" targetptr="flashcreate-1" remap="external">Chapter 3, <citetitle remap="chapter">Creating Solaris Flash Archives (Tasks),</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Solaris Flash Archives (Creation and Installation)</citetitle></olink>.</para><para>For more information about the <command>flarcreate</command> command,
see the man page <olink targetdoc="refman1m" targetptr="flarcreate-1m" remap="external"><citerefentry><refentrytitle>flarcreate</refentrytitle><manvolnum>1M</manvolnum></citerefentry></olink>.</para>
</taskrelated>
</task><task id="wanboottasks2-8"><title>To Create the <filename>sysidcfg</filename> File</title><tasksummary><para>You can specify a set of keywords in the <filename>sysidcfg</filename> file
to preconfigure a system.</para><para>To create the <filename>sysidcfg</filename> file, follow these steps.</para>
</tasksummary><taskprerequisites><para>Create the Solaris Flash archive. See <olink targetptr="wanboottasks2-6" remap="internal">To
Create the Solaris Flash Archive</olink> for detailed instructions.</para>
</taskprerequisites><procedure><step><para>Create a file called <filename>sysidcfg</filename> in a text editor
on the install server.</para>
</step><step><para>Type the <filename>sysidcfg</filename> keywords you want.</para><para>For detailed information about <filename>sysidcfg</filename> keywords,
see <olink targetptr="preconsysid-2" remap="internal">sysidcfg File Keywords</olink>.</para>
</step><step><para>Save the <filename>sysidcfg</filename> file in a location that
is accessible to the WAN boot server.</para><para>Save the file to one of
the following locations.</para><itemizedlist><listitem><para>If the WAN boot server and install server are hosted on the
same machine, save this file to the <filename>flash</filename> subdirectory
of the document root directory on the WAN boot server.</para>
</listitem><listitem><para>If the WAN boot server and install server are
not on the same machine, save this file to the <filename>flash</filename> subdirectory
of the document root directory of the install server.</para>
</listitem>
</itemizedlist>
</step>
</procedure><example id="wanboottasks2-ex-13"><title><filename>sysidcfg</filename> File for WAN Boot Installation</title><para>The following is an example of a <filename>sysidcfg</filename> file
for a SPARC based system. The host name, IP address, and netmask of this system
have been preconfigured by editing the naming service.</para><programlisting>network_interface=primary {hostname=wanclient
                           default_route=192.168.198.1
                           ip_address=192.168.198.210
                           netmask=255.255.255.0
                           protocol_ipv6=no}
timezone=US/Central
system_locale=C
terminal=xterm
timeserver=localhost
name_service=NIS {name_server=matter(192.168.255.255)
                  domain_name=mind.over.example.com
                  }
security_policy=none</programlisting>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create the <filename>sysidcfg</filename> file, create a custom
JumpStart profile for the client. For instructions, see <olink targetptr="wanboottasks2-38" remap="internal">To Create the Profile</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For more detailed information about <filename>sysidcfg</filename> keywords
and values, see <olink targetptr="preconsysid-55534" remap="internal">Preconfiguring With the
sysidcfg File</olink>.</para>
</taskrelated>
</task><task id="wanboottasks2-38"><title>To Create the Profile</title><tasksummary><para>A profile is a text file that instructs the custom JumpStart program
how to install the Solaris software on a system. A profile defines elements
of the installation, for example, the software group to install.</para><para>For detailed information about how to create profiles, see <olink targetdoc="solinstalladv" targetptr="preparecustom-53442" remap="external"><citetitle remap="section">Creating a Profile</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para><para>To create the profile, follow these steps.</para>
</tasksummary><taskprerequisites><para>Create the <filename>sysidcfg</filename> file for the client. See <olink targetptr="wanboottasks2-8" remap="internal">To Create the sysidcfg File</olink> for detailed
instructions.</para>
</taskprerequisites><procedure><step><para>Create a text file on the install server. Name the file descriptively.</para><para>Ensure that the name of the profile reflects how you intend to
use the profile to install the Solaris software on a system. For example,
you might name the profiles <filename>basic_install</filename>, <filename>eng_profile</filename>, or <filename>user_profile</filename>.</para>
</step><step><para>Add profile keywords and values to the profile.</para><para>For
a list of profile keywords and values, see <olink targetdoc="solinstalladv" targetptr="preparecustom-24696" remap="external"><citetitle remap="section">Profile Keywords and Values</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para><para>Profile keywords and their values are case sensitive.</para>
</step><step><para>Save the profile in a location that is accessible to the WAN boot
server.</para><para>Save the profile in one of the following locations.</para><itemizedlist><listitem><para>If the WAN boot server and install server are hosted on the
same machine, save this file to the <filename>flash</filename> subdirectory
of the document root directory on the WAN boot server.</para>
</listitem><listitem><para>If the WAN boot server and install server are not on the same
machine, save this file to the <filename>flash</filename> subdirectory of
the document root directory of the install server.</para>
</listitem>
</itemizedlist>
</step><step><para>Ensure that <literal>root</literal> owns the profile and that
the permissions are set to 644.</para>
</step><step><para>(Optional) Test the profile.</para><para><olink targetdoc="solinstalladv" targetptr="preparecustom-25808" remap="external"><citetitle remap="section">Testing a Profile</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink> contains
information about testing profiles.</para>
</step>
</procedure><example id="wanboottasks2-ex-40"><title>Retrieving a Solaris Flash Archive From a Secure HTTP Server</title><para>In the following example, the profile indicates that the custom
JumpStart program retrieves the Solaris Flash archive from a secure HTTP
server.</para><programlisting width="80100"># profile keywords         profile values
# ----------------         -------------------
install_type               flash_install
archive_location           https://192.168.198.2/sol_10_sparc.flar
partitioning               explicit
filesys                    c0t1d0s0 4000 /
filesys                    c0t1d0s1 512 swap
filesys                    c0t1d0s7 free /export/home</programlisting><para>The following list describes some of the keywords and values from this
example.</para><variablelist><varlistentry><term><literal>install_type</literal></term><listitem><para>The profile installs a Solaris Flash archive on the clone
system. All files are overwritten as in an initial installation.</para>
</listitem>
</varlistentry><varlistentry><term><literal>archive_location</literal></term><listitem><para>The compressed Solaris Flash archive is retrieved from
a secure HTTP server.</para>
</listitem>
</varlistentry><varlistentry><term><literal>partitioning</literal></term><listitem><para>The file system slices are determined by the <literal>filesys</literal> keywords,
value <filename>explicit</filename>. The size of root (<filename>/</filename>)
is based on the size of the Solaris Flash archive. The size of <filename>swap</filename> is
set to the necessary size and is installed on <literal>c0t1d0s1</literal>. <filename>/export/home</filename> is based on the remaining disk space. <filename>/export/home</filename> is installed on <literal>c0t1d0s7</literal>.</para>
</listitem>
</varlistentry>
</variablelist>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create a profile, you must create and validate the <filename>rules</filename> file. For instructions, see <olink targetptr="wanboottasks2-7" remap="internal">To
Create the rules File</olink>.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For more information about how to create a profile, see <olink targetdoc="solinstalladv" targetptr="preparecustom-53442" remap="external"><citetitle remap="section">Creating a Profile</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para><para>For more detailed information about profile keywords and values, see <olink targetdoc="solinstalladv" targetptr="preparecustom-24696" remap="external"><citetitle remap="section">Profile Keywords and Values</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para>
</taskrelated>
</task><task id="wanboottasks2-7"><title>To Create the <filename>rules</filename> File</title><tasksummary><para>The <filename>rules</filename> file is a text file that contains a rule
for each group of systems on which you want to install the Solaris OS.
Each rule distinguishes a group of systems that are based on one or more system
attributes. Each rule also links each group to a profile. A profile is a text
file that defines how the Solaris software is to be installed on each system
in the group. For example, the following rule specifies that the JumpStart
program use the information in the <filename>basic_prof</filename> profile
to install any system with the <literal>sun4u</literal> platform group.</para><screen>karch sun4u - basic_prof -</screen><para>The <filename>rules</filename> file is used to create the <filename>rules.ok</filename> file, which is required for custom JumpStart installations.</para><para>For detailed information about how to create a <filename>rules</filename> file,
see <olink targetdoc="solinstalladv" targetptr="preparecustom-56059" remap="external"><citetitle remap="section">Creating the rules File</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para><para>To create the <filename>rules</filename> file, follow these steps.</para>
</tasksummary><taskprerequisites><para>Create the profile for the client. See <olink targetptr="wanboottasks2-38" remap="internal">To Create the Profile</olink> for detailed instructions.</para>
</taskprerequisites><procedure><step><para>On the install server, create a text file that is named <filename>rules</filename>.</para>
</step><step><para>Add a rule in the <filename>rules</filename> file for each group
of systems you want to install.</para><para>For detailed information about
how to create a rules file, see <olink targetdoc="solinstalladv" targetptr="preparecustom-56059" remap="external"><citetitle remap="section">Creating the rules File</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para>
</step><step><para>Save the <filename>rules</filename> file on the install server.</para>
</step><step id="wanboottasks2-step-81"><para>Validate the <filename>rules</filename> file.</para><screen>$ <userinput>./check</userinput> <userinput>-p</userinput> <replaceable>path</replaceable> <userinput>-r</userinput> <replaceable>file-name</replaceable></screen><variablelist><varlistentry><term><option>p</option> <replaceable>path</replaceable></term><listitem><para>Validates the <filename>rules</filename> by using the <filename>check</filename> script from the current Solaris release software image instead of the <filename>check</filename> script from the system you are using. <replaceable>path</replaceable> is
the image on a local disk or a mounted Solaris DVD or a Solaris Software - 1 CD.</para><para>Use this option to run the most recent version of <command>check</command> if
your system is running a previous version of the Solaris OS.</para>
</listitem>
</varlistentry><varlistentry><term><option>r</option> <replaceable>file_name</replaceable></term><listitem><para>Specifies a rules file other than the file that is named <filename>rules</filename>. By using this option, you can test the validity of a rule
before you integrate the rule into the <filename>rules</filename> file.</para>
</listitem>
</varlistentry>
</variablelist><para>As the <command>check</command> script runs, the script reports the
checking of the validity of the <filename>rules</filename> file and each profile.
If no errors are encountered, the script reports: <literal>The custom JumpStart
configuration is ok</literal>. The <command>check</command> script creates
the <filename>rules.ok</filename> file.</para>
</step><step><para>Save the <filename>rules.ok</filename> file in a location that
is accessible to the WAN boot server.</para><para>Save the file to one of
the following locations.</para><itemizedlist><listitem><para>If the WAN boot server and install server are hosted on the
same machine, save this file to the <filename>flash</filename> subdirectory
of the document root directory on the WAN boot server.</para>
</listitem><listitem><para>If the WAN boot server and install server are not on the same
machine, save this file to the <filename>flash</filename> subdirectory of
the document root directory of the install server.</para>
</listitem>
</itemizedlist>
</step><step><para>Ensure that <literal>root</literal> owns the <filename>rules.ok</filename> file
and that the permissions are set to 644.</para>
</step>
</procedure><example id="eyppx"><title>Creating and Validating the <filename>rules</filename> File</title><para>The custom JumpStart programs use the <filename>rules</filename> file
to select the correct installation profile for the <literal>wanclient-1</literal> system.
Create a text file that is named <filename>rules</filename>. Then, add keywords
and values to this file.</para><para>The IP address of the client system is 192.168.198.210, and the netmask
is 255.255.255.0. Use the <literal>network</literal> rule keyword to specify
the profile that the custom JumpStart programs should use to install the client.</para><screen>network 192.168.198.0 - wanclient_prof - </screen><para>This <filename>rules</filename> file instructs the custom JumpStart
programs to use the <filename>wanclient_prof</filename> to install the current Solaris release software
on the client.</para><para>Name this rule file <filename>wanclient_rule</filename>.</para><para>After you create the profile and the <filename>rules</filename> file,
you run the <filename>check</filename> script to verify that the files are
valid.</para><screen>wanserver# <userinput>./check -r wanclient_rule</userinput></screen><para>If the <command>check</command> script does not find any errors, the
script creates the <filename>rules.ok</filename> file. </para><para>Save the <filename>rules.ok</filename> file in the <filename>/opt/apache/htdocs/flash/</filename> directory.</para>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create the <filename>rules.ok</filename> file, you can optionally
set up begin and finish scripts for your installation. For instructions, see <olink targetptr="wanboottasks2-41" remap="internal">(Optional) Creating Begin and Finish Scripts</olink>.</para><para>If you do not want to set up begin and finish scripts, see <olink targetptr="wanboottasks-30" remap="internal">Creating the Configuration Files</olink> to continue
the WAN boot installation.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For more information about how to create a <filename>rules</filename> file,
see <olink targetdoc="solinstalladv" targetptr="preparecustom-56059" remap="external"><citetitle remap="section">Creating the rules File</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para><para>For more detailed information about <filename>rules</filename> file
keywords and values, see <olink targetdoc="solinstalladv" targetptr="preparecustom-74" remap="external"><citetitle remap="section">Rule Keywords and Values</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para>
</taskrelated>
</task><sect2 id="wanboottasks2-41"><title>(Optional) Creating Begin and Finish Scripts</title><para>Begin and finish scripts are user-defined Bourne shell scripts that
you specify in the <filename>rules</filename> file. A begin script performs
tasks before the Solaris software is installed on a system. A finish script
performs tasks after the Solaris software is installed on a system, but before
the system reboots. You can use these scripts only when using custom JumpStart
to install Solaris.</para><para>You can use begin scripts to create derived profiles. Finish scripts
enable you to perform various postinstallation tasks, such as adding files,
packages, patches, or additional software.</para><para>You must store the begin and finish scripts in the same directory as
the <filename>sysidcfg</filename>, <filename>rules.ok</filename>, and profile
files on the install server.</para><itemizedlist><listitem><para>For more information about creating begin scripts, see <olink targetdoc="solinstalladv" targetptr="optionalcustom-59707" remap="external"><citetitle remap="section">Creating Begin Scripts</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para>
</listitem><listitem><para>For more information about creating finish scripts, see <olink targetdoc="solinstalladv" targetptr="optionalcustom-44024" remap="external"><citetitle remap="section">Creating Finish Scripts</citetitle> in <citetitle remap="book">Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</citetitle></olink>.</para>
</listitem>
</itemizedlist><para>To continue preparing for your WAN boot installation, see <olink targetptr="wanboottasks-30" remap="internal">Creating the Configuration Files</olink>.</para>
</sect2>
</sect1><sect1 id="wanboottasks-30"><title>Creating the Configuration Files</title><para>WAN boot uses the following files to specify the location of the data
and files that are required for a WAN boot installation.</para><itemizedlist><listitem><para>System configuration file (<filename>system.conf</filename>)</para>
</listitem><listitem><para><filename>wanboot.conf</filename> file</para>
</listitem>
</itemizedlist><para>This section describes how to create and store these two files.</para><task id="wanboottasks2-71"><title>To Create the System Configuration File</title><tasksummary><para>In the system configuration file, you can direct the WAN boot installation
programs to the following files.</para><itemizedlist><listitem><para><filename>sysidcfg</filename> file</para>
</listitem><listitem><para><filename>rules.ok</filename> file</para>
</listitem><listitem><para>Custom JumpStart profile</para>
</listitem>
</itemizedlist><para>WAN boot follows the pointers in the system configuration file to install
and configure the client.</para><para>The system configuration file is a plain text file, and must be formatted
in the following pattern.</para><screen><replaceable>setting=value</replaceable></screen><para>To use a system configuration file to direct the WAN installation programs
 to the <filename>sysidcfg</filename>, <filename>rules.ok</filename>, and
profile files, follow these steps.</para>
</tasksummary><taskprerequisites><para>Before you create the system configuration file, you must create the
installation files for you WAN boot installation. See <olink targetptr="wanboottasks-29" remap="internal">Creating the Custom JumpStart Installation Files</olink> for
detailed instructions.</para>
</taskprerequisites><procedure><step><para>Assume the same user role as the web server user on the WAN boot
server.</para>
</step><step><para>Create a text file.
Name the file descriptively, for example, <filename>sys-conf.s10&ndash;sparc</filename>.</para>
</step><step id="wanboottasks2-step-73"><para>Add the following entries to the system configuration
file.</para><variablelist termlength="wholeline"><varlistentry><term><literal>SsysidCF=</literal><replaceable>sysidcfg-file-URL</replaceable><literal></literal></term><listitem><para>This setting points to the <filename>flash</filename> directory
on the install server that contains the <filename>sysidcfg</filename> file.
Make sure that this URL matches the path to the <filename>sysidcfg</filename> file
that you created in <olink targetptr="wanboottasks2-8" remap="internal">To Create the sysidcfg
File</olink>. </para><para>For WAN installations that use HTTPS, set the value to a valid
HTTPS URL.</para>
</listitem>
</varlistentry><varlistentry><term><literal>SjumpsCF=</literal><replaceable>jumpstart-files-URL</replaceable></term><listitem><para>This setting points to the Solaris Flash directory on the
install server that contains the <filename>rules.ok</filename> file, profile
file, and begin and finish scripts. Make sure that this URL matches the path
to the custom JumpStart files that you created in <olink targetptr="wanboottasks2-38" remap="internal">To Create the Profile</olink> and <olink targetptr="wanboottasks2-7" remap="internal">To Create the rules File</olink>. </para><para>For WAN installations that use HTTPS, set the value to a valid HTTPS
URL.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step id="wanboottasks2-step-74"><para>Save the file to a directory that is
accessible to the WAN boot server.</para><para>For administration purposes,
you might want to save the file to the appropriate client directory in the <filename>/etc/netboot</filename> directory on the WAN boot server.</para>
</step><step><para>Change the permissions on the system configuration file to 600.</para><screen># <userinput>chmod 600 /<replaceable>path</replaceable>/<replaceable>system-conf-file</replaceable></userinput></screen><variablelist><varlistentry><term><command><replaceable>path</replaceable></command></term><listitem><para>Specifies the path to the directory that contains the system
configuration file.</para>
</listitem>
</varlistentry><varlistentry><term><replaceable>system-conf-file</replaceable></term><listitem><para>Specifies the
name of the system configuration file.</para>
</listitem>
</varlistentry>
</variablelist>
</step>
</procedure><example id="wanboottasks2-ex-121"><title>System Configuration File for WAN Boot Installation Over HTTPS</title><para>In the following example, the WAN boot programs check for the <filename>sysidcfg</filename> and custom JumpStart files on the web server <literal>https://www.example.com</literal> on port 1234. The web server uses secure HTTP to encrypt data and
files during the installation.</para><para>The <filename>sysidcfg</filename> and
custom JumpStart files are located in the <filename>flash</filename>  subdirectory
of the document root directory <filename>/opt/apache/htdocs</filename>.</para><programlisting>SsysidCF=https://www.example.com:1234/flash
SjumpsCF=https://www.example.com:1234/flash</programlisting>
</example><example id="wanboottasks2-ex-120"><title>System Configuration File for Insecure WAN Boot Installation</title><para>In the following example, the WAN boot programs check for the <filename>sysidcfg</filename> and custom JumpStart files on the web server <literal>http://www.example.com</literal>. The web server uses HTTP, so the data and files are not protected
during the installation.</para><para>The <filename>sysidcfg</filename> and custom JumpStart files are located
in the <filename>flash</filename> subdirectory of the document root directory <filename>/opt/apache/htdocs</filename>.</para><programlisting>SsysidCF=http://www.example.com/flash
SjumpsCF=http://www.example.com/flash</programlisting>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create the system configuration file, create the <filename>wanboot.conf</filename> file. For instructions, see <olink targetptr="wanboottasks2-43" remap="internal">To
Create the wanboot.conf File</olink>.</para>
</taskrelated-custom>
</task><task id="wanboottasks2-43"><title>To Create the <filename>wanboot.conf</filename> File</title><tasksummary><para>The <filename>wanboot.conf</filename> file is a plain text configuration
file that the WAN boot programs use to perform a WAN installation. The <filename>wanboot-cgi</filename> program, the boot file system, and the WAN boot miniroot
all use the information included in the <filename>wanboot.conf</filename> file
to install the client machine.</para><para>Save the <filename>wanboot.conf</filename> file in the appropriate client
subdirectory in the <filename>/etc/netboot</filename> hierarchy on the WAN
boot server. For information about how to define the scope of your WAN boot
installation with the <filename>/etc/netboot</filename> hierarchy, see <olink targetptr="wanboottasks2-50" remap="internal">Creating the /etc/netboot Hierarchy on the WAN
Boot Server</olink>.</para><para>If the WAN boot server is running the current Solaris release, a sample <filename>wanboot.conf</filename> file is located in <filename>/etc/netboot/wanboot.conf.sample</filename>.
You can use this sample as a template for your WAN boot installation.</para><para>You must include the following information in the <filename>wanboot.conf</filename> file.</para><informaltable frame="topbot"><tgroup cols="2" colsep="0" rowsep="0"><colspec colwidth="35.73*"/><colspec colwidth="64.27*"/><thead><row rowsep="1"><entry><para>Type of Information</para>
</entry><entry><para>Description</para>
</entry>
</row>
</thead><tbody><row><entry><para>WAN boot server information</para>
</entry><entry><itemizedlist><listitem><para>Path to <filename>wanboot</filename> program  on the WAN boot
 server</para>
</listitem><listitem><para>URL of <filename>wanboot-cgi</filename> program on WAN boot
server</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Install server information</para>
</entry><entry><itemizedlist><listitem><para>Path to WAN boot miniroot on the install server</para>
</listitem><listitem><para>Path to system configuration  file on the WAN boot server
that specifies location of <filename>sysidcfg</filename> and custom JumpStart
files</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Security information</para>
</entry><entry><itemizedlist><listitem><para>Signature type for the WAN  boot file system or WAN boot miniroot</para>
</listitem><listitem><para>Encryption type for the  WAN boot file system</para>
</listitem><listitem><para>Whether the server should be authenticated during the WAN
boot installation</para>
</listitem><listitem><para>Whether the client should be authenticated during the  WAN
boot installation</para>
</listitem>
</itemizedlist>
</entry>
</row><row><entry><para>Optional information</para>
</entry><entry><itemizedlist><listitem><para>Additional hosts that might need to be resolved for the client
during a  WAN boot installation</para>
</listitem><listitem><para>URL to the <filename>bootlog-cgi</filename> script on the
logging server</para>
</listitem>
</itemizedlist>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><para>You specify this information by listing parameters with associated values
in the following format.</para><screen><replaceable>parameter=value</replaceable></screen><para>For detailed information about <filename>wanboot.conf</filename> file
parameters and syntax, see <olink targetptr="wanbootref-4" remap="internal">wanboot.conf File
Parameters and Syntax</olink>.</para><para>To create the <filename>wanboot.conf</filename> file, follow these steps.</para>
</tasksummary><procedure><step><para>Assume the same user role as the web server user on the WAN boot
server.</para>
</step><step><para>Create the <filename>wanboot.conf</filename> text file.</para><para>You
can create a new text file that is named  <filename>wanboot.conf</filename>,
or use the sample file that is located in <filename>/etc/netboot/wanboot.conf.sample</filename>. If you use the sample file, rename the file <filename>wanboot.conf</filename> after
you add parameters.</para>
</step><step><para>Type the <filename>wanboot.conf</filename> parameters and values
for your installation.</para><para>For detailed descriptions of <filename>wanboot.conf</filename> parameters and values, see <olink targetptr="wanbootref-4" remap="internal">wanboot.conf
File Parameters and Syntax</olink>.</para>
</step><step><para>Save the <filename>wanboot.conf</filename> file to the appropriate
subdirectory of the <filename>/etc/netboot</filename> hierarchy.</para><para>For
information about how to create the <filename>/etc/netboot</filename> hierarchy,
see <olink targetptr="wanboottasks2-50" remap="internal">Creating the /etc/netboot Hierarchy
on the WAN Boot Server</olink>.</para>
</step><step id="wanboottasks2-step-22"><para>Validate the <filename>wanboot.conf</filename> file.</para><screen># <userinput>bootconfchk /etc/netboot/<replaceable>path-to-wanboot.conf</replaceable>/wanboot.conf</userinput></screen><variablelist><varlistentry><term><replaceable>path-to-wanboot.conf</replaceable></term><listitem><para>Specifies the path to the client's <filename>wanboot.conf</filename> file
on the WAN boot server</para>
</listitem>
</varlistentry>
</variablelist><itemizedlist><listitem><para>If the <filename>wanboot.conf</filename> file is structurally
valid, the <command>bootconfchk</command> command returns an exit code of
0.</para>
</listitem><listitem><para>If the <filename>wanboot.conf</filename> file is invalid,
the <command>bootconfchk</command> command returns a nonzero exit code.</para>
</listitem>
</itemizedlist>
</step><step id="wanboottasks-step-41"><para>Change the permissions on the <filename>wanboot.conf</filename> file
to 600.</para><screen># <userinput>chmod 600 /etc/netboot/<replaceable>path-to-wanboot.conf</replaceable>/wanboot.conf</userinput></screen>
</step>
</procedure><example id="wanboottasks2-ex-465"><title><filename>wanboot.conf</filename> File for WAN Boot Installation Over
HTTPS</title><para>The following <filename>wanboot.conf</filename> file example includes
configuration information for a WAN installation that uses secure HTTP. The <filename>wanboot.conf</filename> file also indicates that a 3DES encryption key is
used in this installation.</para><programlisting>boot_file=/wanboot/wanboot.s10_sparc
root_server=https://www.example.com:1234/cgi-bin/wanboot-cgi
root_file=/miniroot/miniroot.s10_sparc
signature_type=sha1
encryption_type=3des
server_authentication=yes
client_authentication=no
resolve_hosts=
boot_logger=https://www.example.com:1234/cgi-bin/bootlog-cgi
system_conf=sys-conf.s10&ndash;sparc</programlisting><para>This <filename>wanboot.conf</filename> file specifies the following
configuration.</para><variablelist><varlistentry><term><literal>boot_file=/wanboot/wanboot.s10_sparc</literal></term><listitem><para>The second level boot program is named <filename>wanboot.s10_sparc</filename>. This program is located in the <filename>/wanboot</filename> directory
in the WAN boot server's document root directory.</para>
</listitem>
</varlistentry><varlistentry><term><literal>root_server=https://www.example.com:1234/cgi-bin/wanboot-cgi</literal></term><listitem><para>The location of the <filename>wanboot-cgi</filename> program
on the WAN boot server is <literal>https://www.example.com:1234/cgi-bin/wanboot-cgi</literal>. The <filename>https</filename> portion of the URL indicates that
this WAN boot installation uses secure HTTP.</para>
</listitem>
</varlistentry><varlistentry><term><literal>root_file=/miniroot/miniroot.s10_sparc</literal></term><listitem><para>The WAN boot miniroot is named <filename>miniroot.s10_sparc</filename>.
This miniroot is located in the <filename>/miniroot</filename> directory in
the WAN boot server's document root directory.</para>
</listitem>
</varlistentry><varlistentry><term><literal>signature_type=sha1</literal></term><listitem><para>The <filename>wanboot.s10_sparc</filename> program and the
WAN boot file system are signed with a HMAC SHA1 hashing key.</para>
</listitem>
</varlistentry><varlistentry><term><literal>encryption_type=3des</literal></term><listitem><para>The <filename>wanboot.s10_sparc</filename> program and the
boot file system are encrypted with a 3DES key.</para>
</listitem>
</varlistentry><varlistentry><term><literal>server_authentication=yes</literal></term><listitem><para>The server is authenticated during the installation.</para>
</listitem>
</varlistentry><varlistentry><term><literal>client_authentication=no</literal></term><listitem><para>The client is not authenticated during the installation.</para>
</listitem>
</varlistentry><varlistentry><term><literal>resolve_hosts=</literal></term><listitem><para>No additional host names are needed to perform the WAN installation.
All required files and information are located in the document root directory
on the WAN boot server.</para>
</listitem>
</varlistentry><varlistentry><term><literal>boot_logger=https://www.example.com:1234/cgi-bin/bootlog-cgi</literal></term><listitem><para>(Optional) Booting and installation log messages are recorded
on the WAN boot server by using secure HTTP.</para><para>For instructions on how to set up a logging server for your WAN boot
installation, see <olink targetptr="wanboottasks2-55" remap="internal">(Optional) To Configure the WAN Boot Logging
Server</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><literal>system_conf=sys-conf.s10&ndash;sparc</literal></term><listitem><para>The system configuration file that contains the locations of the <filename>sysidcfg</filename> and JumpStart files is located in a subdirectory of the <filename>/etc/netboot</filename> hierarchy. The system configuration file is named <filename>sys-conf.s10&ndash;sparc</filename>.</para>
</listitem>
</varlistentry>
</variablelist>
</example><example id="wanboottasks2-ex-45"><title><filename>wanboot.conf</filename> File for Insecure WAN Boot Installation</title><para>The following <filename>wanboot.conf</filename> file example includes
configuration information for a less secure WAN boot installation that uses
HTTP. This <filename>wanboot.conf</filename> file also indicates that the
installation does not use an encryption key or a hashing key.</para><programlisting>boot_file=/wanboot/wanboot.s10_sparc
root_server=http://www.example.com/cgi-bin/wanboot-cgi
root_file=/miniroot/miniroot.s10_sparc
signature_type=
encryption_type=
server_authentication=no
client_authentication=no
resolve_hosts=
boot_logger=http://www.example.com/cgi-bin/bootlog-cgi
system_conf=sys-conf.s10&ndash;sparc</programlisting><para>This <filename>wanboot.conf</filename> file specifies the following
configuration.</para><variablelist><varlistentry><term><literal>boot_file=/wanboot/wanboot.s10_sparc</literal></term><listitem><para>The second level boot program is named <filename>wanboot.s10_sparc</filename>. This program is located in the <filename>/wanboot</filename> directory
in the WAN boot server's document root directory.</para>
</listitem>
</varlistentry><varlistentry><term><literal>root_server=http://www.example.com/cgi-bin/wanboot-cgi</literal></term><listitem><para>The location of the <filename>wanboot-cgi</filename> program
on the WAN boot server is <literal>http://www.example.com/cgi-bin/wanboot-cgi</literal>.
This installation does not use secure HTTP.</para>
</listitem>
</varlistentry><varlistentry><term><literal>root_file=/miniroot/miniroot.s10_sparc</literal></term><listitem><para>The WAN boot miniroot is named <filename>miniroot.s10_sparc</filename>.
This miniroot is located in the <filename>/miniroot</filename> subdirectory
in the WAN boot server's document root directory.</para>
</listitem>
</varlistentry><varlistentry><term><literal>signature_type=</literal></term><listitem><para>The <filename>wanboot.s10_sparc</filename> program and the
WAN boot file system are not signed with a hashing key.</para>
</listitem>
</varlistentry><varlistentry><term><literal>encryption_type=</literal></term><listitem><para>The <filename>wanboot.s10_sparc</filename> program and the
boot file system are not encrypted.</para>
</listitem>
</varlistentry><varlistentry><term><literal>server_authentication=no</literal></term><listitem><para>The server is not authenticated with keys or certificates
during the installation.</para>
</listitem>
</varlistentry><varlistentry><term><literal>client_authentication=no</literal></term><listitem><para>The client is not authenticated with keys or certificates
during the installation.</para>
</listitem>
</varlistentry><varlistentry><term><literal>resolve_hosts=</literal></term><listitem><para>No additional host names are needed to perform the installation.
All required files and information are located in the document root directory
on the WAN boot server.</para>
</listitem>
</varlistentry><varlistentry><term><literal>boot_logger=http://www.example.com/cgi-bin/bootlog-cgi</literal></term><listitem><para>(Optional) Booting and installation log messages are recorded
on the WAN boot server.</para><para>For instructions on how to set up a logging server for your WAN boot
installation, see <olink targetptr="wanboottasks2-55" remap="internal">(Optional) To Configure the WAN Boot Logging
Server</olink>.</para>
</listitem>
</varlistentry><varlistentry><term><literal>system_conf=sys-conf.s10&ndash;sparc</literal></term><listitem><para>The system configuration file that contains the locations
of the <filename>sysidcfg</filename> and JumpStart files is named <filename>sys-conf.s10&ndash;sparc</filename>. This file is located in the appropriate client subdirectory of
the <filename>/etc/netboot</filename> hierarchy.</para>
</listitem>
</varlistentry>
</variablelist>
</example><taskrelated-custom><title>Continuing the WAN Boot Installation</title><para>After you create the <filename>wanboot.conf</filename> file, you can
optionally configure a DHCP server to support WAN boot. For instructions,
see <olink targetptr="wanboottasks2-46" remap="internal">(Optional) Providing Configuration
Information With a DHCP Server</olink>.</para><para>If you do not want to use a DHCP server in your WAN boot installation,
see <olink targetptr="waninstalltasks-6net" remap="internal">To Check the net Device Alias
in the Client OBP</olink> to continue the WAN boot installation.</para>
</taskrelated-custom><taskrelated role="see-also"><para>For detailed descriptions of <filename>wanboot.conf</filename> parameters
and values, see <olink targetptr="wanbootref-4" remap="internal">wanboot.conf File Parameters
and Syntax</olink> and the man page <olink targetdoc="refman4" targetptr="wanboot.conf-4" remap="external"><citerefentry><refentrytitle>wanboot.conf</refentrytitle><manvolnum>4</manvolnum></citerefentry></olink>.</para>
</taskrelated>
</task>
</sect1><sect1 id="wanboottasks2-46"><title>(Optional) Providing Configuration Information
With a DHCP Server</title><para>If you use a DHCP server on your network, you can configure the DHCP
server to supply the following information.</para><itemizedlist><listitem><para>Proxy server's IP address</para>
</listitem><listitem><para>Location of the <filename>wanboot-cgi</filename> program</para>
</listitem>
</itemizedlist><para>You can
use the following DHCP vendor options in your WAN boot installation.</para><variablelist><varlistentry><term><literal>SHTTPproxy</literal></term><listitem><para>Specifies
the IP address of the network's proxy server</para>
</listitem>
</varlistentry><varlistentry><term><literal>SbootURI</literal></term><listitem><para>Specifies the URL of the <filename>wanboot-cgi</filename> program
on the WAN boot server</para>
</listitem>
</varlistentry>
</variablelist><para>For information about setting these vendor options on a Solaris DHCP
server, see <olink targetptr="dhcp-admin-38" remap="internal">Preconfiguring System Configuration
Information With the DHCP Service (Tasks)</olink>.</para><para>For detailed information about setting up a Solaris DHCP server, see <olink targetdoc="sysadv3" targetptr="chapter3-20" remap="external">Chapter 16, <citetitle remap="chapter">Configuring the DHCP Service (Tasks),</citetitle> in <citetitle remap="book">System Administration Guide: IP Services</citetitle></olink>. </para><para>To continue with your WAN boot installation, see <olink targetptr="waninstalltasks-2" remap="internal">Chapter&nbsp;12, Installing With WAN Boot (Tasks)</olink>.</para>
</sect1>
</chapter>