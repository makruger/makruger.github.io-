<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>(Optional) Protecting Data by Using HTTPS - Solaris Express Installation Guide: Network-Based Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Network-Based Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wanboottasks2-47.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wanboottasks-29.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="ejusv.html">Part&nbsp;I&nbsp;Planning to Install Over the Network</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="preconsysid-15630.html">2.&nbsp;&nbsp;Preconfiguring System Configuration Information (Tasks)</a></p>
<p class="toc level2"><a href="preconsysid_adv-15630.html">3.&nbsp;&nbsp;Preconfiguring With a Naming Service or DHCP</a></p>
<p class="toc level1 tocsp"><a href="ejurp.html">Part&nbsp;II&nbsp;Installing Over a Local Area Network</a></p>
<p class="toc level2"><a href="netinstalloverview-28995.html">4.&nbsp;&nbsp;Installing From the Network (Overview)</a></p>
<p class="toc level2"><a href="netinstalldvd-28995.html">5.&nbsp;&nbsp;Installing From the Network With DVD Media (Tasks)</a></p>
<p class="toc level2"><a href="netinstall-28995.html">6.&nbsp;&nbsp;Installing From the Network With CD Media (Tasks)</a></p>
<p class="toc level2"><a href="netinstall-examples.html">7.&nbsp;&nbsp;Installing Over the Network (Examples)</a></p>
<p class="toc level2"><a href="netinstallref-28995.html">8.&nbsp;&nbsp;Installing From the Network (Command Reference)</a></p>
<p class="toc level1 tocsp"><a href="ejurz.html">Part&nbsp;III&nbsp;Installing Over a Wide Area Network</a></p>
<p class="toc level2"><a href="wanbootoverview-1.html">9.&nbsp;&nbsp;WAN Boot (Overview)</a></p>
<p class="toc level2"><a href="wanbootplanning-1.html">10.&nbsp;&nbsp;Preparing to Install With WAN Boot (Planning)</a></p>
<p class="toc level2"><a href="wanboottasks-1.html">11.&nbsp;&nbsp;Installing With WAN Boot (Tasks)</a></p>
<p class="toc level3"><a href="wanboottasks2-10.html">Installing Over a Wide Area Network (Task Maps)</a></p>
<p class="toc level3"><a href="wanboottasks2-47.html">Configuring the WAN Boot Server</a></p>
<p class="toc level4"><a href="wanboottasks2-47.html#wanboottasks2-55">(Optional) To Configure the WAN Boot Logging Server</a></p>
<div class="onpage">
<p class="toc level3 tocsp"><a href="">(Optional) Protecting Data by Using HTTPS</a></p>
<p class="toc level4"><a href="#wanboottasks2-93">(Optional) To Use Digital Certificates for Server and Client Authentication</a></p>
<p class="toc level4"><a href="#wanboottasks2-51">(Optional) To Create a Hashing Key and an Encryption Key</a></p>
</div>
<p class="toc level3 tocsp"><a href="wanboottasks-29.html">Creating the Custom JumpStart Installation Files</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-6">To Create the Solaris Flash Archive</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-8">To Create the <tt>sysidcfg</tt> File</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-38">To Create the Profile</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-7">To Create the <tt>rules</tt> File</a></p>
<p class="toc level3 tocsp"><a href="wanboottasks-30.html">Creating the Configuration Files</a></p>
<p class="toc level4"><a href="wanboottasks-30.html#wanboottasks2-71">To Create the System Configuration File</a></p>
<p class="toc level4"><a href="wanboottasks-30.html#wanboottasks2-43">To Create the <tt>wanboot.conf</tt> File</a></p>
<p class="toc level3 tocsp"><a href="wanboottasks2-46.html">(Optional) Providing Configuration Information With a DHCP Server</a></p>
<p class="toc level2 tocsp"><a href="waninstalltasks-2.html">12.&nbsp;&nbsp;SPARC: Installing With WAN Boot (Tasks)</a></p>
<p class="toc level2"><a href="wanbootexamples-1.html">13.&nbsp;&nbsp;SPARC: Installing With WAN Boot (Examples)</a></p>
<p class="toc level2"><a href="wanbootref-1.html">14.&nbsp;&nbsp;WAN Boot (Reference)</a></p>
<p class="toc level1 tocsp"><a href="appendixpart.html">Part&nbsp;IV&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="remotecd-2.html">B.&nbsp;&nbsp;Installing or Upgrading Remotely (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="wanboottasks2-82"></a><h3>(Optional) Protecting Data by Using HTTPS</h3>
<a name="indexterm-358"></a><a name="indexterm-359"></a><a name="indexterm-360"></a><a name="indexterm-361"></a><a name="indexterm-362"></a><p>To protect your data during the transfer from the WAN boot server
to the client, you can use HTTP over Secure Sockets Layer (HTTPS). To
use the more secure installation configuration that is described in <a href="wanboottasks2-30.html#wanboottasks2-68">Secure WAN Boot Installation Configuration</a>, you must enable
your web server to use HTTPS.</p><p>If you do not want to perform a secure WAN boot, skip
the procedures in this section. To continue preparing for your less secure installation, see
<a href="wanboottasks-29.html">Creating the Custom JumpStart Installation Files</a>.</p><p>To enable the web server software on the WAN boot server to
use HTTPS, you must perform the following tasks.</p>
<ul><li><p>Activate Secure Sockets Layer (SSL) support in your web server software.</p><p>The processes for enabling SSL support and client authentication vary by web server. This document does not describe how to enable these security features on your web server. For information about these features, see the following documentation.</p>
<ul><li><p>For information about activating SSL on the SunONE and iPlanet web servers, see the SunONE and iPlanet documentation collections on <a href="http://docs.sun.com">http://docs.sun.com</a>.</p></li>
<li><p>For information about activating SSL on the Apache web server, see the Apache Documentation Project at <a href="http://httpd.apache.org/docs-project/">http://httpd.apache.org/docs-project/</a>.</p></li>
<li><p>If you are using web server software that is not listed in the previous list, see your web server software documentation.</p></li></ul>
</li>
<li><p>Install digital certificates on the WAN boot server.</p><p>For information about using digital certificates with WAN boot, see <a href="#wanboottasks2-93">(Optional) To Use Digital Certificates for Server and Client Authentication</a>.</p></li>
<li><p>Provide a trusted certificate to the client.</p><p>For instructions about how to create a trusted certificate, see <a href="#wanboottasks2-93">(Optional) To Use Digital Certificates for Server and Client Authentication</a>.</p></li>
<li><p>Create a hashing key and an encryption key.</p><p>For instructions about how to create keys, see <a href="#wanboottasks2-51">(Optional) To Create a Hashing Key and an Encryption Key</a>.</p></li>
<li><p>(Optional) Configure the web server software to support client authentication.</p><p>For information about how to configure your web server to support client authentication, see your web server documentation.</p></li></ul>
<p>This section describes how to use digital certificates and keys in your WAN
boot installation.</p>

<a name="wanboottasks2-93"></a><h4>(Optional) To Use Digital Certificates for Server and Client Authentication</h4><p>The WAN boot installation method can use PKCS#12 files to perform an installation
over HTTPS with server or both client and server authentication. For requirements and
guidelines about using PKCS#12 files, see <a href="wanbootoverview-3.html#wanboottasks2-70">Digital Certificate Requirements</a>.</p><p>To use a PKCS#12 file in a WAN boot installation, you perform
the following tasks.</p>
<ul><li><p>Split the PKCS#12 file into separate SSL private key and trusted certificate files.</p></li>
<li><p><a name="indexterm-363"></a>Insert the trusted certificate in the client's <tt>truststore</tt> file in the <tt>/etc/netboot</tt> hierarchy. The trusted certificate instructs the client to trust the server.</p></li>
<li><p>(Optional) Insert the contents of the SSL private key file in the client's <tt>keystore</tt> file in the <tt>/etc/netboot</tt> hierarchy.</p></li></ul>
<p>The <tt>wanbootutil</tt> command provides options to perform the tasks in the previous list.</p><p>If you do not want to perform a secure WAN boot, skip
this procedure. To continue preparing for your less secure installation, see <a href="wanboottasks-29.html">Creating the Custom JumpStart Installation Files</a>.</p><p>Follow these steps to create a trusted certificate and a client private key.</p><h6>Before You Begin</h6><p>Before you split a PKCS#12 file, create the appropriate subdirectories of the <tt>/etc/netboot</tt>
hierarchy on the WAN boot server.</p>
<ul><li><p>For overview information that describes the <tt>/etc/netboot</tt> hierarchy, see <a href="wanbootoverview-3.html#wanboottasks2-501">Storing Configuration and Security Information in the <tt>/etc/netboot</tt> Hierarchy</a>.</p></li>
<li><p><a name="indexterm-364"></a><a name="indexterm-365"></a><a name="indexterm-366"></a><a name="indexterm-367"></a><a name="indexterm-368"></a><a name="indexterm-369"></a><a name="indexterm-370"></a>For instructions about how to create the <tt>/etc/netboot</tt> hierarchy, see <a href="wanboottasks2-47.html#wanboottasks2-50">Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</a>.</p></li></ul>
<ol>
<li><b>Assume the same user role as the web server user on the
WAN boot server.</b></li>
<li><a name="wanboottasks2-step-95"></a><b>Extract the trusted certificate from the PKCS#12 file. Insert the certificate in the
client's <tt>truststore</tt> file in the <tt>/etc/netboot</tt> hierarchy.</b><pre># <tt><b>wanbootutil p12split -i </tt><i>p12cert</i><tt> \</b></tt>
<tt><b>-t /etc/netboot/</tt><i>net-ip</i><tt>/</tt><i>client-ID</i><tt>/truststore</b></tt></pre><dl><dt><tt>p12split</tt></dt>
<dd><p>Option to <tt>wanbootutil</tt> command that splits a PKCS#12 file into separate private key and certificate files.</p></dd>
<dt><tt>-i <i>p12cert</i></tt></dt>
<dd><p>Specifies the name of the PKCS#12 file to split.</p></dd>
<dt><tt>-t</tt> <tt>/etc/netboot/</tt><i>net-ip</i><tt>/</tt><i>client-ID</i><tt>/truststore</tt><tt></tt></dt>
<dd><p>Inserts the certificate in the client's <tt>truststore</tt> file. <i>net-ip</i> is the IP address of the client's subnet. <i>client-ID</i> can be a user-defined ID or the DHCP client ID.</p></dd>
</dl>
</li>
<li><a name="wanboottasks-step-4"></a>(Optional) <b>Decide if you want to require client authentication.</b><ul>
<li><b>If no, go to <a href="#wanboottasks2-51">(Optional) To Create a Hashing Key and an Encryption Key</a>.</b></li>
<li><b>If yes, continue with the following steps.</b><ol style="list-style-type: lower-alpha">
				 
<li><b>Insert the client certificate in the client's <tt>certstore</tt>.</b><pre># <tt><b>wanbootutil p12split -i </tt><i>p12cert</i><tt> -c \</b></tt>
<tt><b>/etc/netboot/</tt><i>net-ip</i><tt>/</tt><i>client-ID</i><tt>/certstore -k </tt><i>keyfile</i><tt></b></tt></pre><dl><dt><tt>p12split</tt></dt>
<dd><p>Option to <tt>wanbootutil</tt> command that splits a PKCS#12 file into separate private key and certificate files.</p></dd>
<dt><tt>-i <i>p12cert</i></tt></dt>
<dd><p>Specifies the name of the PKCS#12 file to split.</p></dd>
<dt><tt>-c /etc/netboot/<i>net-ip</i>/<i>client-ID</i>/certstore</tt></dt>
<dd><p>Inserts the client's certificate in the client's <tt>certstore</tt>. <i>net-ip</i> is the IP address of the client's subnet. <i>client-ID</i> can be a user-defined ID or the DHCP client ID.</p></dd>
<dt><tt>-k <i>keyfile</i></tt></dt>
<dd><p>Specifies the name of the client's SSL private key file to create from the split PKCS#12 file.</p></dd>
</dl>
</li>
<li><b>Insert the private key in the client's <tt>keystore</tt>.</b><pre># <tt><b>wanbootutil keymgmt -i -k </tt><i>keyfile</i><tt> \</b></tt>
<tt><b>-s /etc/netboot/</tt><i>net-ip</i><tt>/</tt><i>client-ID</i><tt>/keystore -o type=rsa</b></tt></pre><dl><dt><tt>keymgmt -i</tt></dt>
<dd><p>Inserts an SSL private key in the client's <tt>keystore</tt></p></dd>
<dt><tt>-k <i>keyfile</i></tt></dt>
<dd><p>Specifies the name of the client's private key file that was created in the previous step</p></dd>
<dt><tt>-s /etc/netboot/<i>net-ip</i>/<i>client-ID</i>/keystore</tt></dt>
<dd><p>Specifies the path to the client's <tt>keystore</tt></p></dd>
<dt><tt>-o type=rsa</tt></dt>
<dd><p><a name="indexterm-371"></a><a name="indexterm-372"></a><a name="indexterm-373"></a><a name="indexterm-374"></a>Specifies the key type as RSA</p></dd>
</dl>
</li></ol></li></ul></li></ol><a name="wanboottasks2-ex-117"></a>Example&nbsp;11-6 Creating a Trusted Certificate for Server Authentication<p>In the following example, you use a PKCS#12 file to install client
010003BA152A42 on subnet 192.168.198.0. This command sample extracts a certificate from a PKCS#12 file
that is named <tt>client.p12</tt>. The command then places the contents of the trusted
certificate in the client's <tt>truststore</tt> file.</p><p>Before you execute these commands, you must first assume the same user role
as the web server user. In this example, the web server user
role is <tt>nobody</tt>.</p><pre>server# <tt><b>su nobody</b></tt>
Password:
nobody# <tt><b>wanbootutil p12split -i client.p12 \</b></tt>
<tt><b>-t /etc/netboot/192.168.198.0/010003BA152A42/truststore</b></tt>
nobody# <tt><b>chmod 600 /etc/netboot/192.168.198.0/010003BA152A42/truststore</b></tt></pre><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you create a digital certificate, create a hashing key and an encryption
key. For instructions, see<a href="#wanboottasks2-51">(Optional) To Create a Hashing Key and an Encryption Key</a>.</p></h6><h6>See Also</h6><p>For more information about how to create trusted certificates, see the man page
<a href="http://docs.sun.com/doc/819-2240/wanbootutil-1m?a=view"><tt>wanbootutil</tt>(1M)</a>.</p>

<a name="wanboottasks2-51"></a><h4>(Optional) To Create a Hashing Key and an Encryption Key</h4><p>If you want to use HTTPS to transmit your data, you must
create a HMAC SHA1 hashing key and an encryption key. If you plan
to install over a semi-private network, you might not want to encrypt the
installation data. You can use a HMAC SHA1 hashing key to check the
integrity of the <tt>wanboot</tt> program.</p><p>By using the <tt>wanbootutil keygen</tt> command, you can generate these keys and store them
in the appropriate <tt>/etc/netboot</tt> directory.</p><p>If you do not want to perform a secure WAN boot, skip
this procedure. To continue preparing for your less secure installation, see <a href="wanboottasks-29.html">Creating the Custom JumpStart Installation Files</a>.</p><p>To create a hashing key and an encryption key, follow these steps.</p><ol>
<li><b>Assume the same user role as the web server user on the
WAN boot server.</b></li>
<li><a name="wanboottasks2-step-91"></a><b>Create the master HMAC SHA1 key.</b><pre># <tt><b>wanbootutil keygen -m</b></tt></pre><dl><dt><tt>keygen -m</tt></dt>
<dd><p>Creates the master HMAC SHA1 key for the WAN boot server</p></dd>
</dl>
</li>
<li><a name="wanboottasks2-step-92"></a><b>Create the HMAC SHA1 hashing key for the client from the master key.</b><pre># <tt><b>wanbootutil keygen -c -o [net=</tt><i>net-ip</i><tt>,{cid=</tt><i>client-ID</i><tt>,}]type=sha1</b></tt></pre><dl><dt><tt>-c</tt></dt>
<dd><p>Creates the client's hashing key from the master key.</p></dd>
<dt><tt>-o</tt></dt>
<dd><p>Indicates that additional options are included for the <tt>wanbootutil keygen</tt> command.</p></dd>
<dt>(Optional) <tt>net=<i>net-ip</i></tt></dt>
<dd><p>Specifies the IP address for the client's subnet. If you do not use the <tt>net</tt> option, the key is stored in the <tt>/etc/netboot/keystore</tt> file, and can be used by all WAN boot clients.</p></dd>
<dt>(Optional) <tt>cid=<i>client-ID</i></tt></dt>
<dd><p>Specifies the client ID. The client ID can be a user-defined ID or the DHCP client ID. The <tt>cid</tt> option must be preceded by a valid <tt>net=</tt> value. If you do not specify the <tt>cid</tt> option with the <tt>net</tt> option, the key is stored in the <tt>/etc/netboot/</tt><i>net-ip</i><tt>/keystore</tt> file. This key can be used by all WAN boot clients on the <i>net-ip</i> subnet.</p></dd>
<dt><tt>type=sha1</tt></dt>
<dd><p>Instructs the <tt>wanbootutil keygen</tt> utility to create a HMAC SHA1 hashing key for the client.</p></dd>
</dl>
</li>
<li><b>Decide if you need to create an encryption key for the client.</b><p>You need to create an encryption key to perform a WAN boot
installation over HTTPS. Before the client establishes an HTTPS connection with the WAN boot
server, the WAN boot server transmits encrypted data and information to the client.
The encryption key enables the client to decrypt this information and use this
information during the installation.</p>
<ul><li><p>If you are performing a more secure WAN installation over HTTPS with server authentication, continue.</p></li>
<li><p>If you only want to check the integrity of the <tt>wanboot</tt> program, you do not need to create an encryption key. Go to <a href="#wanboottasks-step-12">Step&nbsp;6</a>.</p></li></ul>
</li>
<li><a name="wanboottasks2-step-93"></a><b>Create an encryption key for the client.</b><pre># <tt><b>wanbootutil keygen -c -o [net=</tt><i>net-ip</i><tt>,{cid=</tt><i>client-ID</i><tt>,}]type=</tt><i>key-type</i><tt></b></tt></pre><dl><dt><tt>-c</tt></dt>
<dd><p>Creates the client's encryption key.</p></dd>
<dt><tt>-o</tt></dt>
<dd><p>Indicates that additional options are included for the <tt>wanbootutil keygen</tt> command.</p></dd>
<dt>(Optional) <tt>net=<i>net-ip</i></tt></dt>
<dd><p>Specifies the network IP address for the client. If you do not use the <tt>net</tt> option, the key is stored in the <tt>/etc/netboot/keystore</tt> file, and can be used by all WAN boot clients.</p></dd>
<dt>(Optional) <tt>cid=<i>client-ID</i></tt></dt>
<dd><p>Specifies the client ID. The client ID can be a user-defined ID, or the DHCP client ID. The <tt>cid</tt> option must be preceded by a valid <tt>net=</tt> value. If you do not specify the <tt>cid</tt> option with the <tt>net</tt> option, the key is stored in the <tt>/etc/netboot/</tt><i>net-ip</i><tt>/keystore</tt> file. This key can be used by all WAN boot clients on the <i>net-ip</i> subnet.</p></dd>
<dt><tt>type=<i>key-type</i></tt></dt>
<dd><p>Instructs the <tt>wanbootutil keygen</tt> utility to create an encryption key for the client. <i>key-type</i> can have a value of <tt>3des</tt> or <tt>aes</tt>.</p></dd>
</dl>
</li>
<li><a name="wanboottasks-step-12"></a><b>Install the keys on the client system.</b><p><a name="indexterm-375"></a><a name="indexterm-376"></a>For instructions about how to install keys on the client, see <a href="wanboottasks2-57.html#wanboottasks-9">Installing Keys on the Client</a>.</p></li></ol><a name="wanboottasks-ex-5"></a>Example&nbsp;11-7 Creating Required Keys for WAN Boot Installation Over HTTPS<p>The following example creates a master HMAC SHA1 key for the WAN
boot server. This example also creates a HMAC SHA1 hashing key and 3DES
encryption key for client 010003BA152A42 on subnet 192.168.198.0.</p><p>Before you execute these commands, you must first assume the same user role
as the web server user. In this example, the web server user
role is <tt>nobody</tt>.</p><pre>server# <tt><b>su nobody</b></tt>
Password:
nobody# <tt><b>wanbootutil keygen -m</b></tt>
nobody# <tt><b>wanbootutil keygen -c -o net=192.168.198.0,cid=010003BA152A42,type=sha1</b></tt>
nobody# <tt><b>wanbootutil keygen -c -o net=192.168.198.0,cid=010003BA152A42,type=3des</b></tt></pre><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you create a hashing and an encryption key, you must create
the installation files. For instructions, see <a href="wanboottasks-29.html">Creating the Custom JumpStart Installation Files</a>.</p></h6><h6>See Also</h6><p>For overview information on hashing keys and encryption keys, see <a href="wanboottasks2-29.html#wanboottasks2-66">Protecting Data During a WAN Boot Installation</a>.</p><p>For more information about how to create hashing and encryption keys, see the
man page <a href="http://docs.sun.com/doc/819-2240/wanbootutil-1m?a=view"><tt>wanbootutil</tt>(1M)</a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wanboottasks2-47.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wanboottasks-29.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

