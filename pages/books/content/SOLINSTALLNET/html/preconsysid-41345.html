<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Preconfiguring With the Naming Service - Solaris Express Installation Guide: Network-Based Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Network-Based Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preconsysid-31023.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-admin-38.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="ejusv.html">Part&nbsp;I&nbsp;Planning to Install Over the Network</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="preconsysid-15630.html">2.&nbsp;&nbsp;Preconfiguring System Configuration Information (Tasks)</a></p>
<p class="toc level2"><a href="preconsysid_adv-15630.html">3.&nbsp;&nbsp;Preconfiguring With a Naming Service or DHCP</a></p>
<p class="toc level3"><a href="preconsysid-31023.html">Choosing a Naming Service</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Preconfiguring With the Naming Service</a></p>
<p class="toc level4"><a href="#preconsysid-12982">To Preconfigure the Locale Using NIS</a></p>
<p class="toc level4"><a href="#preconsysid-96586">To Preconfigure the Locale Using NIS+</a></p>
</div>
<p class="toc level3 tocsp"><a href="dhcp-admin-38.html">Preconfiguring System Configuration Information With the DHCP Service (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="ejurp.html">Part&nbsp;II&nbsp;Installing Over a Local Area Network</a></p>
<p class="toc level2"><a href="netinstalloverview-28995.html">4.&nbsp;&nbsp;Installing From the Network (Overview)</a></p>
<p class="toc level2"><a href="netinstalldvd-28995.html">5.&nbsp;&nbsp;Installing From the Network With DVD Media (Tasks)</a></p>
<p class="toc level2"><a href="netinstall-28995.html">6.&nbsp;&nbsp;Installing From the Network With CD Media (Tasks)</a></p>
<p class="toc level2"><a href="netinstall-examples.html">7.&nbsp;&nbsp;Installing Over the Network (Examples)</a></p>
<p class="toc level2"><a href="netinstallref-28995.html">8.&nbsp;&nbsp;Installing From the Network (Command Reference)</a></p>
<p class="toc level1 tocsp"><a href="ejurz.html">Part&nbsp;III&nbsp;Installing Over a Wide Area Network</a></p>
<p class="toc level2"><a href="wanbootoverview-1.html">9.&nbsp;&nbsp;WAN Boot (Overview)</a></p>
<p class="toc level2"><a href="wanbootplanning-1.html">10.&nbsp;&nbsp;Preparing to Install With WAN Boot (Planning)</a></p>
<p class="toc level2"><a href="wanboottasks-1.html">11.&nbsp;&nbsp;Installing With WAN Boot (Tasks)</a></p>
<p class="toc level2"><a href="waninstalltasks-2.html">12.&nbsp;&nbsp;SPARC: Installing With WAN Boot (Tasks)</a></p>
<p class="toc level2"><a href="wanbootexamples-1.html">13.&nbsp;&nbsp;SPARC: Installing With WAN Boot (Examples)</a></p>
<p class="toc level2"><a href="wanbootref-1.html">14.&nbsp;&nbsp;WAN Boot (Reference)</a></p>
<p class="toc level1 tocsp"><a href="appendixpart.html">Part&nbsp;IV&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="remotecd-2.html">B.&nbsp;&nbsp;Installing or Upgrading Remotely (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="preconsysid-41345"></a><h3>Preconfiguring With the Naming Service</h3>
<a name="indexterm-49"></a><p>The following table provides a high-level overview of the naming service databases that
you need to edit and populate to preconfigure system information.</p><table><col width="144*"><col width="252*"><tr><th align="left" valign="top" scope="column"><p>System Information to
Preconfigure</p></th>
<th align="left" valign="top" scope="column"><p>Naming Service Database</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Host name and Internet Protocol (IP) address</p></td>
<td align="left" valign="top" scope="row"><p><tt>hosts</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Date and time</p></td>
<td align="left" valign="top" scope="row"><p><tt>hosts</tt>. Specify
the <tt>timehost</tt> alias next to the host name of the system that will
provide the date and time for the systems that are being installed.</p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Time zone</p></td>
<td align="left" valign="top" scope="row"><p><tt>timezone</tt></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p>Netmask</p></td>
<td align="left" valign="top" scope="row"><p><tt>netmasks</tt></p></td>
</tr>
</table><p>You cannot preconfigure the locale for a system with the DNS or
LDAP name service. If you use the NIS or NIS+ name service, follow
the procedure below to use your naming service to preconfigure the locale for
a system.</p>
<hr><p><b>Note - </b>In order to successfully preconfigure your system locale by using NIS or NIS+,
the following requirements must be met:</p>
<ul><li><p>You must boot the system from the network by using the following command:</p><pre>ok <tt><b>boot net</b></tt></pre><p>You can use options with this command. See details in Step 2 of the<a href="eyaup.html#eyavn">SPARC: To Install the Client Over the Network (DVD)</a> procedure.</p></li>
<li><p>The NIS or NIS+ server must be available to access during the installation.</p></li></ul>
<p>If these requirements are fulfilled, the installer uses the preconfigured settings and does
not prompt for the locale during the installation.  If either requirement is
not fulfilled, the installer prompts for your locale information during the installation.</p>
<hr>

<ul><li><p><a href="#preconsysid-12982">To Preconfigure the Locale Using NIS</a></p></li>
<li><p><a href="#preconsysid-96586">To Preconfigure the Locale Using NIS+</a></p></li></ul>


<a name="preconsysid-12982"></a><h4>To Preconfigure the Locale Using NIS</h4><ol>
<li><a name="preconsysid-step-4"></a><b>Become superuser or assume an equivalent role on the name server.</b></li>
<li><a name="preconsysid-step-10"></a><b><a name="preconsysid-ix105"></a><a name="preconsysid-ix106"></a>Change <tt>/var/yp/Makefile</tt> to add the locale map. </b><ol style="list-style-type: lower-alpha">
				 
<li><a name="preconsysid-step-25"></a><b>Insert this shell procedure after the last <tt></tt><i>variable</i><tt>.time</tt> shell procedure.</b><pre>locale.time:  $(DIR)/locale
        -@if [ -f $(DIR)/locale ]; then \
               sed -e "/^#/d" -e s/#.*$$// $(DIR)/locale \
               | awk '{for (i = 2; i&lt;=NF; i++) print $$i, $$0}' \
               | $(MAKEDBM) - $(YPDBDIR)/$(DOM)/locale.byname; \
               touch locale.time; \
               echo "updated locale"; \
               if [ ! $(NOPUSH) ]; then \
                       $(YPPUSH) locale.byname; \
                       echo "pushed locale"; \
               else \
               : ; \
               fi \
        else \
               echo "couldn't find $(DIR)/locale"; \
        fi</pre></li>
<li><a name="preconsysid-step-11"></a><b>Find the string <tt>all:</tt> and, at the end of the list of variables,
insert the word <tt>locale</tt>.</b><pre>all: passwd group hosts ethers networks rpc services protocols \
    netgroup bootparams aliases publickey netid netmasks c2secure \
    timezone auto.master auto.home locale</pre></li>
<li><a name="preconsysid-step-26"></a><b>Near the end of the file, after the last entry of its type,
insert the string <tt>locale: locale.time</tt> on a new line.</b><pre>passwd: passwd.time
group: group.time
hosts: hosts.time
ethers: ethers.time
networks: networks.time
rpc: rpc.time
services: services.time
protocols: protocols.time
netgroup: netgroup.time
bootparams: bootparams.time
aliases: aliases.time
publickey: publickey.time
netid: netid.time
passwd.adjunct: passwd.adjunct.time
group.adjunct: group.adjunct.time
netmasks: netmasks.time
timezone: timezone.time
auto.master: auto.master.time
auto.home: auto.home.time
locale: locale.time</pre></li>
<li><a name="preconsysid-step-5a"></a><b>Save the file.</b></li></ol></li>
<li><a name="preconsysid-step-14"></a><b><a name="preconsysid-ix107"></a><a name="preconsysid-ix108"></a><a name="preconsysid-ix110"></a>Create the file <tt>/etc/locale</tt> and make one entry for each domain or specific
system:  </b><ul>
<li><b>Enter <tt>locale domain_name</tt>.</b><p>For example, the following entry specifies that French is the default language that
is used in the <tt>example.com</tt> domain:</p><pre>fr example.com</pre>
<hr><p><b>Note - </b><a href="http://docs.sun.com/doc/817-2521"><i>International Language Environments Guide</i></a> contains a list of valid locales.</p>
<hr>
</li>
<li><b>Or, enter <tt>locale system_name</tt>.</b><p>The following example specifies that Belgian French is the default locale that is used
by a system named <tt>myhost</tt>:</p><pre>fr_BE myhost</pre></li></ul>
<hr><p><b>Note - </b>Locales are available on the Solaris DVD or Solaris Software - 1
CD.</p>
<hr>
</li>
<li><a name="preconsysid-step-15"></a><b><a name="preconsysid-ix111"></a>Make the maps:</b><pre># <tt><b>cd /var/yp; make</b></tt></pre><p>Systems that are specified by domain or individually in the <tt>locale</tt> map
are now set up to use the default locale. The default locale that
you specified is used during installation and by the desktop after the system
is rebooted.</p></li></ol><h6><h6>More Information</h6>Continuing the Installation<p>If you plan to use the NIS name service in an installation
over the network, you need to set up an installation server and add
the system as an installation client. For more information, see <a href="netinstalloverview-28995.html">Chapter&nbsp;4, Installing From the Network (Overview)</a>.</p><p>If you plan to use the NIS name service in a custom
JumpStart installation, you need to create a profile and a <tt>rules.ok</tt> file. For more
information, see <a href="http://docs.sun.com/doc/819-2396/jumpstartoverview-4?a=view">Chapter 2, Custom JumpStart (Overview), in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a>.</p></h6><h6>See Also</h6><p>For more information about the NIS name service, see <a href="http://docs.sun.com/doc/819-3194/nissetup-1?a=view">Part&nbsp;III, NIS Setup and Administration, in <i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>.</p>

<a name="preconsysid-96586"></a><h4>To Preconfigure the Locale Using NIS+</h4><p>The following procedure assumes the NIS+ domain is set up. Setting up the
NIS+ domain is documented in the <a href="http://docs.sun.com/doc/819-3194"><i>System Administration Guide: Naming and Directory Services (DNS, NIS, and LDAP)</i></a>.</p><ol>
<li><a name="preconsysid-step-18"></a><b>Log in to a name server as superuser or as a user in
the NIS+ administration group.</b></li>
<li><a name="preconsysid-step-19"></a><b><a name="preconsysid-ix115"></a>Create the <tt>locale</tt> table:</b><pre># <tt><b>nistbladm -D access=og=rmcd,nw=r -c locale_tbl name=SI,nogw=</b></tt>
<tt><b>locale=,nogw= comment=,nogw= locale.org_dir.`nisdefaults -d`</b></tt></pre></li>
<li><a name="preconsysid-step-20"></a><b><a name="preconsysid-ix116"></a><a name="preconsysid-ix117"></a>Add needed entries to the <tt>locale</tt>.</b><pre># <tt><b>nistbladm -a name=</tt><i>name</i><tt>locale=</tt><i>locale</i><tt> comment=</tt><i>comment</i><tt></b></tt>
<tt><b>locale.org_dir.`nisdefaults -d`</b></tt></pre><dl><dt><i>name</i></dt>
<dd><p>Either the domain name or a specific system name for which you want to preconfigure a default locale.</p></dd>
<dt><i>locale</i></dt>
<dd><p>The locale you want to install on the system and use on the desktop after the system is rebooted. <a href="http://docs.sun.com/doc/817-2521"><i>International Language Environments Guide</i></a> contains a list of valid locales.</p></dd>
<dt><i>comment</i></dt>
<dd><p>The comment field. Use double quotation marks to begin and end comments that are longer than one word.</p></dd>
</dl>

<hr><p><b>Note - </b><a name="preconsysid-ix118"></a>Locales are available on the Solaris DVD or Solaris Software - 1
CD.</p>
<hr>
<p>Systems that are specified by domain or individually in the <tt>locale</tt> table
are now set up to use the default locale. The default locale you
specified is used during installation and by the desktop after the system is
rebooted.</p></li></ol><h6><h6>More Information</h6>Continuing the Installation<p>If you plan to use the NIS+ name service in an installation
over the network, you need to set up an installation server and add
the system as an installation client. For more information, see <a href="netinstalloverview-28995.html">Chapter&nbsp;4, Installing From the Network (Overview)</a>.</p><p>If you plan to use the NIS+ name service in a custom
JumpStart installation, you need to create a profile and a <tt>rules.ok</tt> file. For more
information, see <a href="http://docs.sun.com/doc/819-2396/jumpstartoverview-4?a=view">Chapter 2, Custom JumpStart (Overview), in <i>Solaris Express Installation Guide: Custom JumpStart and Advanced Installations</i></a>.</p></h6><h6>See Also</h6><p>For more information about the NIS+ name service, see <a href="http://docs.sun.com/doc/819-3195"><i>System Administration Guide: Naming and Directory Services (NIS+)</i></a>.</p>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="preconsysid-31023.html">Previous</a>
             </td>
             <td align="right">
                 <a href="dhcp-admin-38.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

