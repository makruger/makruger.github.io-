<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Configuring the WAN Boot Server - Solaris Express Installation Guide: Network-Based Installations</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2007-05-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo"></div>
   <div class="Title">Solaris Express Installation Guide: Network-Based Installations</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wanboottasks2-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wanboottasks2-82.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="ejusv.html">Part&nbsp;I&nbsp;Planning to Install Over the Network</a></p>
<p class="toc level2"><a href="intro-1.html">1.&nbsp;&nbsp;Where to Find Solaris Installation Planning Information</a></p>
<p class="toc level2"><a href="preconsysid-15630.html">2.&nbsp;&nbsp;Preconfiguring System Configuration Information (Tasks)</a></p>
<p class="toc level2"><a href="preconsysid_adv-15630.html">3.&nbsp;&nbsp;Preconfiguring With a Naming Service or DHCP</a></p>
<p class="toc level1 tocsp"><a href="ejurp.html">Part&nbsp;II&nbsp;Installing Over a Local Area Network</a></p>
<p class="toc level2"><a href="netinstalloverview-28995.html">4.&nbsp;&nbsp;Installing From the Network (Overview)</a></p>
<p class="toc level2"><a href="netinstalldvd-28995.html">5.&nbsp;&nbsp;Installing From the Network With DVD Media (Tasks)</a></p>
<p class="toc level2"><a href="netinstall-28995.html">6.&nbsp;&nbsp;Installing From the Network With CD Media (Tasks)</a></p>
<p class="toc level2"><a href="netinstall-examples.html">7.&nbsp;&nbsp;Installing Over the Network (Examples)</a></p>
<p class="toc level2"><a href="netinstallref-28995.html">8.&nbsp;&nbsp;Installing From the Network (Command Reference)</a></p>
<p class="toc level1 tocsp"><a href="ejurz.html">Part&nbsp;III&nbsp;Installing Over a Wide Area Network</a></p>
<p class="toc level2"><a href="wanbootoverview-1.html">9.&nbsp;&nbsp;WAN Boot (Overview)</a></p>
<p class="toc level2"><a href="wanbootplanning-1.html">10.&nbsp;&nbsp;Preparing to Install With WAN Boot (Planning)</a></p>
<p class="toc level2"><a href="wanboottasks-1.html">11.&nbsp;&nbsp;Installing With WAN Boot (Tasks)</a></p>
<p class="toc level3"><a href="wanboottasks2-10.html">Installing Over a Wide Area Network (Task Maps)</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Configuring the WAN Boot Server</a></p>
<p class="toc level4"><a href="#wanboottasks2-55">(Optional) To Configure the WAN Boot Logging Server</a></p>
</div>
<p class="toc level3 tocsp"><a href="wanboottasks2-82.html">(Optional) Protecting Data by Using HTTPS</a></p>
<p class="toc level4"><a href="wanboottasks2-82.html#wanboottasks2-93">(Optional) To Use Digital Certificates for Server and Client Authentication</a></p>
<p class="toc level4"><a href="wanboottasks2-82.html#wanboottasks2-51">(Optional) To Create a Hashing Key and an Encryption Key</a></p>
<p class="toc level3 tocsp"><a href="wanboottasks-29.html">Creating the Custom JumpStart Installation Files</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-6">To Create the Solaris Flash Archive</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-8">To Create the <tt>sysidcfg</tt> File</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-38">To Create the Profile</a></p>
<p class="toc level4"><a href="wanboottasks-29.html#wanboottasks2-7">To Create the <tt>rules</tt> File</a></p>
<p class="toc level3 tocsp"><a href="wanboottasks-30.html">Creating the Configuration Files</a></p>
<p class="toc level4"><a href="wanboottasks-30.html#wanboottasks2-71">To Create the System Configuration File</a></p>
<p class="toc level4"><a href="wanboottasks-30.html#wanboottasks2-43">To Create the <tt>wanboot.conf</tt> File</a></p>
<p class="toc level3 tocsp"><a href="wanboottasks2-46.html">(Optional) Providing Configuration Information With a DHCP Server</a></p>
<p class="toc level2 tocsp"><a href="waninstalltasks-2.html">12.&nbsp;&nbsp;SPARC: Installing With WAN Boot (Tasks)</a></p>
<p class="toc level2"><a href="wanbootexamples-1.html">13.&nbsp;&nbsp;SPARC: Installing With WAN Boot (Examples)</a></p>
<p class="toc level2"><a href="wanbootref-1.html">14.&nbsp;&nbsp;WAN Boot (Reference)</a></p>
<p class="toc level1 tocsp"><a href="appendixpart.html">Part&nbsp;IV&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="troubleshooting-9.html">A.&nbsp;&nbsp;Troubleshooting (Tasks)</a></p>
<p class="toc level2"><a href="remotecd-2.html">B.&nbsp;&nbsp;Installing or Upgrading Remotely (Tasks)</a></p>
<p class="toc level1 tocsp"><a href="glossary-1.html">Glossary</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="wanboottasks2-47"></a><h3>Configuring the WAN Boot Server</h3>
<a name="indexterm-319"></a><a name="indexterm-320"></a><a name="indexterm-321"></a><p>The WAN boot server is a web server that provides the boot
and configuration data during a WAN boot installation. For a list of the
system requirements for the WAN boot server, see <a href="wanbootoverview-3.html#wanboottasks2-tbl-114">Table&nbsp;10-1</a>.</p><p>This section describes the following tasks required to configure the WAN boot server
for a WAN boot installation.</p>
<ul><li><p><a href="#wanboottasks-33cc">Creating the Document Root Directory</a></p></li>
<li><p><a href="#wanboottasks2-1nn">Creating the WAN Boot Miniroot</a></p></li>
<li><p><a href="#wanboottasks-32">Installing the <tt>wanboot</tt> Program on the WAN Boot Server</a></p></li>
<li><p><a href="#wanboottasks2-50">Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</a></p></li>
<li><p><a href="#wanboottasks2-25">Copying the WAN Boot CGI Program to the WAN Boot Server</a></p></li>
<li><p><a href="wanboottasks2-82.html">(Optional) Protecting Data by Using HTTPS</a></p></li></ul>


<a name="wanboottasks-33cc"></a><h4>Creating the Document Root Directory</h4>
<a name="indexterm-322"></a><a name="indexterm-323"></a><a name="indexterm-324"></a><p>To serve the configuration and installation files, you must make these files accessible
to the web server software on the WAN boot server. One method to
make these files accessible is to store them in the WAN boot
server's document root directory. </p><p>If you want to use a document root directory to serve the
configuration and installation files, you must create this directory. See your web server documentation
for information about how to create the document root directory. For detailed information
about how to design your document root directory, see <a href="wanbootoverview-3.html#wanbootplanning-6">Storing Installation and Configuration Files in the Document Root Directory</a>.</p><p>For an example of how to set up this directory, see <a href="wanbootexamples-5dsaf.html">Create the Document Root Directory</a>.</p><p>After you create the document root directory, create the WAN boot miniroot. For
instructions, see <a href="#wanboottasks2-1nn">Creating the WAN Boot Miniroot</a>.</p>

<a name="wanboottasks2-1nn"></a><h4>Creating the WAN Boot Miniroot</h4>
<a name="indexterm-325"></a><a name="indexterm-326"></a><a name="indexterm-327"></a><a name="indexterm-328"></a><p>WAN boot uses a special Solaris miniroot that has been modified to
perform a WAN boot installation. The WAN boot miniroot contains a subset of
the software in the Solaris miniroot. To perform a WAN boot installation, you
must copy the miniroot from the Solaris DVD or the Solaris Software -
1 CD to the WAN boot server. Use the <tt>-w</tt> option to the
<tt>setup_install_server</tt> command to copy the WAN boot miniroot from the Solaris software media
to your system's hard disk.</p>

<a name="wanboottasks-proc-2"></a><h5>SPARC: To Create a WAN Boot Miniroot</h5>
<p>This procedure creates a SPARC WAN boot miniroot with SPARC media. If you
want to serve a SPARC WAN boot miniroot from an x86&ndash;based server, you
must create the miniroot on a SPARC machine. After you create the
miniroot, copy the miniroot to the document root directory on the x86&ndash;based server.</p><h6>Before You Begin</h6><p>This procedure assumes that the WAN boot server is running the Volume Manager.
If you are not using the Volume Manager, see <a href="http://docs.sun.com/doc/819-2723"><i>System Administration Guide: Devices and File Systems</i></a>.</p><ol>
<li><a name="netinstall-step-520"></a><b>Become superuser or assume an equivalent role on the WAN boot server. </b><p>The system must meet the following requirements.</p>
<ul><li><p>Include a CD-ROM or DVD-ROM drive</p></li>
<li><p>Be part of the site's network and naming service</p><p>If you use a naming service, the system must already be in a naming service, such as NIS, NIS+, DNS, or LDAP. If you do not use a naming service, you must distribute information about this system by following your site's policies.</p></li></ul>
</li>
<li><a name="netinstall-step-530"></a><b>Insert the Solaris Software - 1 CD or the Solaris DVD in the
install server's drive.</b></li>
<li><a name="netinstall-step-1020"></a><b>Create a directory for the WAN boot miniroot and Solaris installation image.</b><pre># <tt><b>mkdir -p </tt><i>wan-dir-path</i><tt> </tt><i>install-dir-path</i><tt></b></tt></pre><dl><dt><tt>-p</tt></dt>
<dd><p>Instructs the <tt>mkdir</tt> command to create all the necessary parent directories for the directory you want to create.</p></dd>
<dt><i>wan-dir-path</i></dt>
<dd><p>Specifies the directory where the WAN boot miniroot is to be created on the install server. This directory needs to accommodate miniroots that are typically 250 Mbytes in size.</p></dd>
<dt><i>install-dir-path</i></dt>
<dd><p>Specifies the directory on the install server where the Solaris software image is to be copied. This directory can be removed later in this procedure.</p></dd>
</dl>
</li>
<li><a name="netinstall-step-550"></a><b>Change to the <tt>Tools</tt> directory on the mounted disc.</b><pre># <tt><b>cd /cdrom/cdrom0/s0/Solaris_11/Tools</b></tt></pre><p>In the previous example, <tt><b>cdrom0</b></tt> is the path to the drive that contains
the Solaris OS media.</p></li>
<li><a name="netinstall-step-560"></a><b>Copy the WAN boot miniroot and the Solaris software image to the WAN
boot server's hard disk.</b><pre># <tt><b>./setup_install_server -w </tt><i>wan-dir-path</i><tt> </tt><i>install-dir-path</i><tt></b></tt></pre><dl><dt><i>wan-dir-path</i></dt>
<dd><p>Specifies the directory where the WAN boot miniroot is to be copied</p></dd>
<dt><i>install-dir-path</i></dt>
<dd><p>Specifies the directory where the Solaris software image is to be copied</p></dd>
</dl>

<hr><p><b>Note - </b>The <tt>setup_install_server</tt> command indicates whether you have enough disk space available for the
Solaris Software disc images. To determine available disk space, use the <tt>df -kl</tt> command.</p>
<hr>
<p>The <tt>setup_install_server -w</tt> command creates the WAN boot miniroot and a network installation image
of the Solaris software.</p></li>
<li><a name="wanboottasks-step-46"></a>(Optional) <b>Remove the network installation image.</b><p>You do not need the Solaris software image to perform a WAN installation
with a Solaris Flash archive. You can free up disk space if you
do not plan to use the network installation image for other network installations.
Type the following command to remove the network installation image.</p><pre># <tt><b>rm -rf </tt><i>install-dir-path</i><tt></b></tt></pre></li>
<li><a name="wanboottasks2-step-18"></a><b>Make the WAN boot miniroot available to the WAN boot server in one
of the following ways.</b><ul>
<li><b>Create a symbolic link to the WAN boot miniroot in the document root
directory of the WAN boot server.</b><pre># <tt><b>cd /</tt><i>document-root-directory</i><tt>/miniroot</b></tt>
# <tt><b>ln -s /</tt><i>wan-dir-path</i><tt>/miniroot .</b></tt></pre><dl><dt><tt></tt><i>document-root-directory</i><tt>/miniroot</tt></dt>
<dd><p>Specifies the directory in the WAN boot server's document root directory where you want to link to the WAN boot miniroot</p></dd>
<dt><tt>/</tt><i>wan-dir-path</i><tt>/miniroot</tt></dt>
<dd><p>Specifies the path to the WAN boot miniroot</p></dd>
</dl>
</li>
<li><b>Move the WAN boot miniroot to the document root directory on the WAN
boot server.</b><pre># <tt><b>mv /</tt><i>wan-dir-path</i><tt>/miniroot /</tt><i>document-root-directory</i><tt>/miniroot/</tt><i>miniroot-name</i><tt></b></tt></pre><dl><dt><tt></tt><i>wan-dir-path</i><tt>/miniroot</tt></dt>
<dd><p>Specifies the path to the WAN boot miniroot.</p></dd>
<dt><tt>/</tt><i>document-root-directory</i><tt>/miniroot/</tt></dt>
<dd><p>Specifies the path to the WAN boot miniroot directory in the WAN boot server's document root directory.</p></dd>
<dt><i>miniroot-name</i></dt>
<dd><p>Specifies the name of the WAN boot miniroot. Name the file descriptively, for example <tt>miniroot.s10_sparc</tt>.</p></dd>
</dl>
</li></ul></li></ol><a name="eypqx"></a>Example&nbsp;11-1 Creating the WAN Boot Miniroot<p>Use the <a href="http://docs.sun.com/doc/819-2240/setup-install-server-1m?a=view"><tt>setup_install_server</tt>(1M)</a> with the <tt>-w</tt> option to copy the WAN boot miniroot
and the Solaris software image to the <tt>/export/install/Solaris_11</tt> directory of <tt>wanserver-1</tt>.</p><p>Insert the Solaris Software media in the media drive that is attached to
<tt>wanserver-1</tt>. Type the following commands.</p><pre>wanserver-1# <tt><b>mkdir -p /export/install/cdrom0</b></tt>
wanserver-1# <tt><b>cd /cdrom/cdrom0/s0/Solaris_11/Tools</b></tt>
wanserver-1# <tt><b>./setup_install_server -w /export/install/cdrom0/miniroot \</b></tt>
<tt><b>/export/install/cdrom0</b></tt></pre><p>Move the WAN boot miniroot to the document root directory (<tt>/opt/apache/htdocs/</tt>) of
the WAN boot server. In this example the name the WAN boot miniroot
is set to <tt>miniroot.s10_sparc</tt>.</p><pre>wanserver-1# <tt><b>mv /export/install/cdrom0/miniroot/miniroot \</b></tt>
<tt><b>/opt/apache/htdocs/miniroot/miniroot.s10_sparc</b></tt></pre><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you create the WAN boot miniroot, verify that the client OpenBoot PROM
(OBP) supports WAN boot. For instructions, see <a href="#eypnx">Verifying WAN Boot Support on the Client</a>.</p></h6><h6>See Also</h6><p>For additional information about the <tt>setup_install_server</tt> command, see <a href="http://docs.sun.com/doc/819-2240/install-scripts-1m?a=view"><tt>install_scripts</tt>(1M)</a>.</p>

<a name="eypnx"></a><h4>Verifying WAN Boot Support on the Client</h4>
<p>To perform an unattended WAN boot installation, the client system's OpenBoot PROM (OBP)
must support WAN boot. If the client's OBP does not support WAN boot,
you can perform a WAN boot installation by providing the necessary programs on
a local CD.</p><p>You can determine if the client supports WAN boot by checking the
client's OBP configuration variables. Perform the following procedure to check the client for WAN
boot support.</p>

<a name="wanboottasks-13"></a><h5>To Check the Client OBP for WAN Boot Support</h5>
<p>This procedure describes how to determine if the client OBP supports WAN boot.</p><ol><a name="wanboottasks2-proc-59"></a>
<li><b>Become superuser or assume an equivalent role.</b><p>Roles contain authorizations and privileged commands. For more information about roles, see <a href="http://docs.sun.com/doc/819-3321/rbactask-15?a=view">Configuring RBAC (Task Map) in <i>System Administration Guide: Security Services</i></a>.</p></li>
<li><b>Check the OBP configuration variables for WAN boot support.</b><pre># <tt><b>eeprom | grep network-boot-arguments</b></tt></pre>
<ul><li><p>If the variable <tt>network-boot-arguments</tt> is displayed, or if the previous command returns the output <tt>network-boot-arguments: data not available</tt>, the OBP supports WAN boot installations. You do not need to update the OBP before you perform your WAN boot installation.</p></li>
<li><p>If the previous command does not return any output, the OBP does not support WAN boot installations. You must perform one of the following tasks.</p>
<ul><li><p>Update the client OBP. For those clients who do have an OBP that is capable of supporting WAN boot installations, see your system documentation for information about how to update the OBP.</p>
<hr><p><b>Note - </b>Not all client OBPs support WAN Boot. For those clients use the next option.</p>
<hr>
</li>
<li><p><a name="indexterm-329"></a><a name="indexterm-330"></a>After you complete the preparation tasks and are ready to install the client, perform the WAN boot installation from the Solaris Software CD1 or DVD. This option works in all cases when the current OBP does not provide WAN Boot support.</p><p>For instructions about how to boot the client from CD1, see <a href="wanboottasks2-60.html#wanboottasks2-17">To Perform a WAN Boot Installation With Local CD Media</a>. To continue preparing for the WAN boot installation, see <a href="#wanboottasks2-50">Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</a>.</p></li></ul>
</li></ul>
</li></ol><a name="wanboottasks-ex-25"></a>Example&nbsp;11-2 Verifying OBP Support for WAN Boot on the Client<p>The following command shows how to check the client OBP for WAN
boot support.</p><pre># <tt><b>eeprom | grep network-boot-arguments</b></tt>
network-boot-arguments: data not available</pre><p>In this example, the output <tt>network-boot-arguments: data not available</tt> indicates that the client OBP supports
WAN boot.</p><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you verify that the client OBP supports WAN boot, you must
copy the <tt>wanboot</tt> program to the WAN boot server. For instructions, see <a href="#wanboottasks-32">Installing the <tt>wanboot</tt> Program on the WAN Boot Server</a>.</p><p>If the client OBP does not support WAN boot, you do not
need to copy the <tt>wanboot</tt> program to the WAN boot server. You must provide
the <tt>wanboot</tt> program to the client on a local CD. To continue the
installation, see <a href="#wanboottasks2-50">Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</a>.</p></h6><h6>See Also</h6><p>For additional information about the <tt>setup_install_server</tt> command, see <a href="netinstalloverview-28995.html">Chapter&nbsp;4, Installing From the Network (Overview)</a>.</p>

<a name="wanboottasks-32"></a><h4>Installing the <tt>wanboot</tt> Program on the WAN Boot Server</h4>
<a name="indexterm-331"></a><a name="indexterm-332"></a><a name="indexterm-333"></a><p>WAN boot uses a special second-level boot program (<tt>wanboot</tt>) to install the client.
The <tt>wanboot</tt> program loads the WAN boot miniroot, client configuration files, and installation
files that are required to perform a WAN boot installation.</p><p>To perform a WAN boot installation, you must provide the <tt>wanboot</tt> program to
the client during the installation. You can provide this program to the client
in the following ways.</p>
<ul><li><p>If your client's PROM supports WAN boot, you can transmit the program from the WAN boot server to the client. You must install the <tt>wanboot</tt> program on the WAN boot server.</p><p>To check if your client's PROM supports WAN boot, see <a href="#wanboottasks-13">To Check the Client OBP for WAN Boot Support</a>.</p></li>
<li><p>If your client's PROM does not support WAN boot, you must provide the program to the client on a local CD. If your client's PROM does not support WAN boot, go to <a href="#wanboottasks2-50">Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</a> to continue preparing for your installation.</p></li></ul>


<a name="wanboottasks-proc-34"></a><h5>SPARC: To Install the <tt>wanboot</tt> Program on the WAN Boot Server</h5>
<p>This procedure describes how to copy the <tt>wanboot</tt> program from Solaris media to
the WAN boot server.</p><p>This procedure assumes that the WAN boot server is running the Volume Manager.
If you are not using the Volume Manager, see <a href="http://docs.sun.com/doc/819-2723"><i>System Administration Guide: Devices and File Systems</i></a>.</p><h6>Before You Begin</h6><p>Verify that your client system supports WAN boot. See <a href="#wanboottasks-13">To Check the Client OBP for WAN Boot Support</a> for more information.</p><ol>
<li><b>Become superuser or assume an equivalent role on the install server.</b></li>
<li><a name="wanboottasks-step-530"></a><b>Insert the Solaris Software - 1 CD or the Solaris DVD in the
install server's drive.</b></li>
<li><a name="wanboottasks-step-35"></a><b>Change to the <tt>sun4u</tt> platform directory on the Solaris Software - 1 CD
or the Solaris DVD.</b><pre># <tt><b>cd /cdrom/cdrom0/s0/Solaris_11/Tools/Boot/platform/sun4u/</b></tt></pre></li>
<li><a name="wanboottasks-step-36"></a><b>Copy the <tt>wanboot</tt> program to the install server.</b><pre># <tt><b>cp wanboot /</tt><i>document-root-directory</i><tt>/wanboot/</tt><i>wanboot-name</i><tt></b></tt></pre><dl><dt><i>document-root-directory</i></dt>
<dd><p>Specifies the document root directory of the WAN boot server.</p></dd>
<dt><i>wanboot-name</i></dt>
<dd><p>Specifies the name of the <tt>wanboot</tt> program. Name this file descriptively, for example, <tt>wanboot.s10_sparc</tt>.</p></dd>
</dl>
</li>
<li><b>Make the <tt>wanboot</tt> program available to the WAN boot server in one of
the following ways.</b>
<ul><li><p>Create a symbolic link to the <tt>wanboot</tt> program in the document root directory of the WAN boot server.</p><pre># <tt><b>cd /</tt><i>document-root-directory</i><tt>/wanboot</b></tt>
# <tt><b>ln -s /</tt><i>wan-dir-path</i><tt>/wanboot .</b></tt></pre><dl><dt><tt></tt><i>document-root-directory</i><tt>/wanboot</tt></dt>
<dd><p>Specifies the directory in the WAN boot server's document root directory where you want to link to the <tt>wanboot</tt> program</p></dd>
<dt><tt>/</tt><i>wan-dir-path</i><tt>/wanboot</tt></dt>
<dd><p>Specifies the path to the <tt>wanboot</tt> program</p></dd>
</dl>
</li>
<li><p>Move the WAN boot miniroot to the document root directory on the WAN boot server.</p><pre># <tt><b>mv /</tt><i>wan-dir-path</i><tt>/wanboot /</tt><i>document-root-directory</i><tt>/wanboot/</tt><i>wanboot-name</i><tt></b></tt></pre><dl><dt><tt></tt><i>wan-dir-path</i><tt>/wanboot</tt></dt>
<dd><p>Specifies the path to the <tt>wanboot</tt> program</p></dd>
<dt><tt>/</tt><i>document-root-directory</i><tt>/wanboot/</tt></dt>
<dd><p>Specifies the path to the <tt>wanboot</tt> program directory in the WAN boot server's document root directory.</p></dd>
<dt><i>wanboot-name</i></dt>
<dd><p>Specifies the name of the <tt>wanboot</tt> program. Name the file descriptively, for example <tt>wanboot.s10_sparc</tt>.</p></dd>
</dl>
</li></ul>
</li></ol><a name="eypnb"></a>Example&nbsp;11-3 Installing the <tt>wanboot</tt> Program on the WAN Boot Server<p>To install the <tt>wanboot</tt> program on the WAN boot server, copy the program
from the Solaris Software media to the WAN boot server's document root directory.</p><p>Insert the Solaris DVD or the Solaris Software - 1 CD in
the media drive that is attached to <tt>wanserver-1</tt> and type the following commands.</p><pre>wanserver-1# <tt><b>cd /cdrom/cdrom0/s0/Solaris_11/Tools/Boot/platform/sun4u/</b></tt>
wanserver-1# <tt><b>cp wanboot /opt/apache/htdocs/wanboot/wanboot.s10_sparc</b></tt></pre><p>In this example, the name of the <tt>wanboot</tt> program is set to <tt>wanboot.s10_sparc</tt>.</p><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you install the  <tt>wanboot</tt> program on the WAN boot server, you
must create the  <tt>/etc/netboot</tt> hierarchy on the WAN boot server. For instructions,
see <a href="#wanboottasks2-50">Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</a>.</p></h6><h6>See Also</h6><p>For overview information about the <tt>wanboot</tt> program, see <a href="wanboottasks2-105.html">What Is WAN Boot?</a>.</p>

<a name="wanboottasks2-50"></a><h4>Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</h4>
<a name="indexterm-334"></a><a name="indexterm-335"></a><a name="indexterm-336"></a><a name="indexterm-337"></a><a name="indexterm-338"></a><p>During the installation, WAN boot refers to the contents of the <tt>/etc/netboot</tt>
hierarchy on the web server for instructions about how to perform the installation.
This directory contains the configuration information, private key, digital certificate, and certificate authority
required for a WAN boot installation. During the installation, the <tt>wanboot-cgi</tt> program converts this
information into the WAN boot file system. The <tt>wanboot-cgi</tt> program then transmits
the WAN boot file system to the client.</p><p>You can create subdirectories within the <tt>/etc/netboot</tt> directory to customize the scope of
the WAN installation. Use the following directory structures to define how configuration information
is shared among the clients that you want to install.</p>
<ul><li><p><a name="indexterm-339"></a><a name="indexterm-340"></a><b>Global configuration</b> &ndash; If you want all the clients on your network to share configuration information, store the files that you want to share in the <tt>/etc/netboot</tt> directory.</p></li>
<li><p><a name="indexterm-341"></a><a name="indexterm-342"></a><b>Network-specific configuration</b> &ndash; If you want only those machines on a specific subnet to share configuration information, store the configuration files that you want to share in a subdirectory of <tt>/etc/netboot</tt>. Have the subdirectory follow this naming convention.</p><pre>/etc/netboot/<i>net-ip</i></pre><p>In this example, <i>net-ip</i> is the IP address of the client's subnet.</p></li>
<li><p><a name="indexterm-343"></a><a name="indexterm-344"></a><b>Client-specific configuration</b> &ndash; If you want only a specific client to use the boot file system, store the boot file system files in a subdirectory of <tt>/etc/netboot</tt>. Have the subdirectory follow this naming convention.</p><pre>/etc/netboot/<i>net-ip</i>/<i>client-ID</i></pre><p>In this example, <i>net-ip</i> is the IP address of the subnet. <i>client-ID</i> is either the client ID that is assigned by the DHCP server, or a user-specified client ID.</p></li></ul>
<p>For detailed planning information about these configurations, see <a href="wanbootoverview-3.html#wanboottasks2-501">Storing Configuration and Security Information in the <tt>/etc/netboot</tt> Hierarchy</a>.</p><p>The following procedure describes how to create the <tt>/etc/netboot</tt> hierarchy.</p>

<a name="wanboottasks-47"></a><h5>To Create the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server</h5>
<p>Follow these steps to create the <tt>/etc/netboot</tt> hierarchy.</p><ol>
<li><b>Become superuser or assume an equivalent role on the WAN boot server.</b></li>
<li><a name="wanboottasks-step-3"></a><b>Create the <tt>/etc/netboot</tt> directory.</b><pre># <tt><b>mkdir /etc/netboot</b></tt></pre></li>
<li><a name="wanboottasks-step-38"></a><b><a name="indexterm-345"></a>Change the permissions of the <tt>/etc/netboot</tt> directory to 700.</b><pre># <tt><b>chmod 700 /etc/netboot</b></tt></pre></li>
<li><a name="wanboottasks-step-42"></a><b>Change the owner of the <tt>/etc/netboot</tt> directory to the web server owner.</b><pre># <tt><b>chown </tt><i>web-server-user</i><tt>:</tt><i>web-server-group</i><tt> /etc/netboot/</b></tt></pre><dl><dt><i>web-server-user</i></dt>
<dd><p>Specifies the user owner of the web server process</p></dd>
<dt><i>web-server-group</i></dt>
<dd><p>Specifies the group owner of the web server process</p></dd>
</dl>
</li>
<li><a name="wanboottasks-step-43"></a><b>Exit the superuser role.</b><pre># <tt><b>exit</b></tt></pre></li>
<li><a name="wanboottasks-step-44"></a><b>Assume the user role of the web server owner.</b></li>
<li><b>Create the client subdirectory of the <tt>/etc/netboot</tt> directory.</b><pre># <tt><b>mkdir -p /etc/netboot/</tt><i>net-ip</i><tt>/</tt><i>client-ID</i><tt></b></tt></pre><dl><dt><tt>-p</tt></dt>
<dd><p>Instructs the <tt>mkdir</tt> command to create all the necessary parent directories for the directory you want to create.</p></dd>
<dt>(Optional) <i>net-ip</i></dt>
<dd><p>Specifies the network IP address of the client's subnet.</p></dd>
<dt>(Optional) <i>client-ID</i></dt>
<dd><p>Specifies the client ID. The client ID can be a user-defined value or the DHCP client ID. The <i>client-ID</i> directory must be a subdirectory of the <i>net-ip</i> directory.</p></dd>
</dl>
</li>
<li><b><a name="indexterm-346"></a>For each directory in the <tt>/etc/netboot</tt> hierarchy, change the permissions to 700.</b><pre># <tt><b>chmod 700 /etc/netboot/</tt><i>dir-name</i><tt></b></tt></pre><dl><dt><i>dir-name</i></dt>
<dd><p><a name="indexterm-347"></a>Specifies the name of a directory in the <tt>/etc/netboot</tt> hierarchy</p></dd>
</dl>
</li></ol><a name="wanboottasks-ex-26"></a>Example&nbsp;11-4 Creating the <tt>/etc/netboot</tt> Hierarchy on the WAN Boot Server<p>The following example shows how to create the <tt>/etc/netboot</tt> hierarchy for the client
010003BA152A42 on subnet 192.168.198.0. In this example, the user <tt>nobody</tt> and the group
<tt>admin</tt> own the web server process.</p><p>The commands in this example perform the following tasks.</p>
<ul><li><p>Create the <tt>/etc/netboot</tt> directory.</p></li>
<li><p>Change the permissions of the <tt>/etc/netboot</tt> directory to 700.</p></li>
<li><p>Change the ownership of the <tt>/etc/netboot</tt> directory to the owner of the web server process.</p></li>
<li><p>Assume the same user role as the web server user.</p></li>
<li><p>Create a subdirectory of <tt>/etc/netboot</tt> that is named after the subnet (192.168.198.0).</p></li>
<li><p>Create a subdirectory of the subnet directory that is named after the client ID.</p></li>
<li><p>Change the permissions of the <tt>/etc/netboot</tt> subdirectories to 700.</p></li></ul>
<pre># <tt><b>cd /</b></tt>
# <tt><b>mkdir /etc/netboot/</b></tt>
# <tt><b>chmod 700 /etc/netboot</b></tt>
# <tt><b>chown nobody:admin /etc/netboot</b></tt>
# <tt><b>exit</b></tt>
server# <tt><b>su nobody</b></tt>
Password:
nobody# <tt><b>mkdir -p /etc/netboot/192.168.198.0/010003BA152A42</b></tt>
nobody# <tt><b>chmod 700 /etc/netboot/192.168.198.0</b></tt>
nobody# <tt><b>chmod 700 /etc/netboot/192.168.198.0/010003BA152A42</b></tt></pre><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you create the <tt>/etc/netboot</tt> hierarchy, you must copy the WAN Boot CGI
program to the WAN boot server. For instructions, see <a href="#wanboottasks2-25">Copying the WAN Boot CGI Program to the WAN Boot Server</a>.</p></h6><h6>See Also</h6><p>For detailed planning information about how to design the <tt>/etc/netboot</tt> hierarchy, see
<a href="wanbootoverview-3.html#wanboottasks2-501">Storing Configuration and Security Information in the <tt>/etc/netboot</tt> Hierarchy</a>.</p>

<a name="wanboottasks2-25"></a><h4>Copying the WAN Boot CGI Program to the WAN Boot Server</h4>
<a name="indexterm-348"></a><a name="indexterm-349"></a><a name="indexterm-350"></a><a name="indexterm-351"></a><a name="indexterm-352"></a><p>The <tt>wanboot-cgi</tt> program creates the data streams that transmit the following files from
the WAN boot server to the client.</p>
<ul><li><p><tt>wanboot</tt> program</p></li>
<li><p>WAN boot file system</p></li>
<li><p>WAN boot miniroot</p></li></ul>
<p>The <tt>wanboot-cgi</tt> program is installed on the system when you install the current
Solaris release software. To enable the WAN boot server to use this program,
copy this program to the <tt>cgi-bin</tt> directory of the WAN boot server.</p>

<a name="wanboottasks2-proc-83"></a><h5>To Copy the <tt>wanboot-cgi</tt> Program to the WAN Boot Server</h5>
<ol>
<li><b>Become superuser or assume an equivalent role on the WAN boot server.</b></li>
<li><a name="wanboottasks2-step-84"></a><b>Copy the <tt>wanboot-cgi</tt> program to the WAN boot server.</b><pre># <tt><b>cp /usr/lib/inet/wanboot/wanboot-cgi /</tt><i>WAN-server-root</i><tt>/cgi-bin/wanboot-cgi</b></tt></pre><dl><dt>/<i>WAN-server-root</i></dt>
<dd><p>Specifies the root directory of the web server software on the WAN boot server</p></dd>
</dl>
</li>
<li><a name="wanboottasks2-step-86"></a><b>On the WAN boot server, change the permissions of the CGI program to
755.</b><pre># <tt><b>chmod 755 /</tt><i>WAN-server-root</i><tt>/cgi-bin/wanboot-cgi</b></tt></pre></li></ol><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you copy the WAN boot CGI program to the WAN boot
server, you can optionally set up a logging server. For instructions, see <a href="#wanboottasks2-55">(Optional) To Configure the WAN Boot Logging Server</a>.</p><p>If you do not want to set up a separate logging server,
see <a href="wanboottasks2-82.html">(Optional) Protecting Data by Using HTTPS</a> for instructions about how to set up the security features of
a WAN boot installation.</p></h6><h6>See Also</h6><p>For overview information about the <tt>wanboot-cgi</tt> program, see <a href="wanboottasks2-105.html">What Is WAN Boot?</a>.</p>

<a name="wanboottasks2-55"></a><h4>(Optional) To Configure the WAN Boot Logging Server</h4><p>By default, all WAN boot logging messages are displayed on the client system.
This default behavior enables you to quickly debug any installation issues.</p><p>If you want to record boot and installation logging messages on a
system other than the client, you must set up a logging server. If
you want to use a logging server with HTTPS during the installation, you
must configure the WAN boot server as the logging server.</p><p>To configure the logging server, follow these steps.</p><ol>
<li><a name="wanboottasks2-step-85"></a><b>Copy the <tt>bootlog-cgi</tt> script to the logging server's CGI script directory.</b><pre># <tt><b>cp /usr/lib/inet/wanboot/bootlog-cgi \ </tt><i>log-server-root</i><tt>/cgi-bin</b></tt></pre><dl><dt><tt></tt><i>log-server-root</i><tt>/cgi-bin</tt></dt>
<dd><p>Specifies the <tt>cgi-bin</tt> directory in the logging server's web server directory</p></dd>
</dl>
</li>
<li><b>Change the permissions of the <tt>bootlog-cgi</tt> script to 755.</b><pre># <tt><b>chmod 755 </tt><i>log-server-root</i><tt>/cgi-bin/bootlog-cgi</b></tt></pre></li>
<li><a name="wanboottasks2-step-122"></a><b>Set the value of the <tt>boot_logger</tt> parameter in the <tt>wanboot.conf</tt> file.</b><p>In the <tt>wanboot.conf</tt> file, specify the URL of the <tt>bootlog-cgi</tt> script on the
logging server.</p><p>For more information about setting parameters in the <tt>wanboot.conf</tt> file, see <a href="wanboottasks-30.html#wanboottasks2-43">To Create the <tt>wanboot.conf</tt> File</a>.</p><p><a name="indexterm-353"></a><a name="indexterm-354"></a><a name="indexterm-355"></a><a name="indexterm-356"></a><a name="indexterm-357"></a>During the installation, boot and installation log messages are recorded in the <tt>/tmp</tt>
directory of the logging server. The log file is named <tt>bootlog.</tt><i>hostname</i><tt></tt>, where
<i>hostname</i> is the host name of the client.</p></li></ol><a name="wanboottasks-ex-6"></a>Example&nbsp;11-5 Configuring a Logging Server for WAN Boot Installation Over HTTPS<p>The following example configures the WAN boot server as a logging server.</p><pre># <tt><b>cp /usr/lib/inet/wanboot/bootlog-cgi /opt/apache/cgi-bin/</b></tt>
# <tt><b>chmod 755 /opt/apache/cgi-bin/bootlog-cgi</b></tt></pre><h6><h6>More Information</h6>Continuing the WAN Boot Installation<p>After you set up the logging server, you can optionally set up
the WAN boot installation to use digital certificates and security keys. See <a href="wanboottasks2-82.html">(Optional) Protecting Data by Using HTTPS</a>
for instructions about how to set up the security features of a WAN
boot installation.</p></h6>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="wanboottasks2-10.html">Previous</a>
             </td>
             <td align="right">
                 <a href="wanboottasks2-82.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

