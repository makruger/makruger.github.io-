<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Interrupt Functions - Writing Device Drivers</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2008-08-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/indiana.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.org"><img border="0" src="graphics/header.png"></img></a>
   </div>
   <div class="Title">Writing Device Drivers</div>
</div>

<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="geywh.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ddidkisvc-32.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="preface-1.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="eqbvu.html">Part&nbsp;I&nbsp;Designing Device Drivers for the Solaris Platform</a></p>
<p class="toc level2"><a href="eqbqn.html">1.&nbsp;&nbsp;Overview of Solaris Device Drivers</a></p>
<p class="toc level2"><a href="kernelovr-77198.html">2.&nbsp;&nbsp;Solaris Kernel and Device Tree</a></p>
<p class="toc level2"><a href="mt-17026.html">3.&nbsp;&nbsp;Multithreading</a></p>
<p class="toc level2"><a href="properties-1.html">4.&nbsp;&nbsp;Properties</a></p>
<p class="toc level2"><a href="events-1.html">5.&nbsp;&nbsp;Managing Events and Queueing Tasks</a></p>
<p class="toc level2"><a href="autoconf-17.html">6.&nbsp;&nbsp;Driver Autoconfiguration</a></p>
<p class="toc level2"><a href="devaccess-3.html">7.&nbsp;&nbsp;Device Access: Programmed I/O</a></p>
<p class="toc level2"><a href="interrupt-15678.html">8.&nbsp;&nbsp;Interrupt Handlers</a></p>
<p class="toc level2"><a href="dma-29901.html">9.&nbsp;&nbsp;Direct Memory Access (DMA)</a></p>
<p class="toc level2"><a href="devmap-24338.html">10.&nbsp;&nbsp;Mapping Device and Kernel Memory</a></p>
<p class="toc level2"><a href="devcnmgt-19679.html">11.&nbsp;&nbsp;Device Context Management</a></p>
<p class="toc level2"><a href="powermgt-37437.html">12.&nbsp;&nbsp;Power Management</a></p>
<p class="toc level2"><a href="gevsi.html">13.&nbsp;&nbsp;Hardening Solaris Drivers</a></p>
<p class="toc level2"><a href="ldi-1.html">14.&nbsp;&nbsp;Layered Driver Interface (LDI)</a></p>
<p class="toc level1 tocsp"><a href="eqbvb.html">Part&nbsp;II&nbsp;Designing Specific Kinds of Device Drivers</a></p>
<p class="toc level2"><a href="character-21002.html">15.&nbsp;&nbsp;Drivers for Character Devices</a></p>
<p class="toc level2"><a href="block-34861.html">16.&nbsp;&nbsp;Drivers for Block Devices</a></p>
<p class="toc level2"><a href="scsi-36812.html">17.&nbsp;&nbsp;SCSI Target Drivers</a></p>
<p class="toc level2"><a href="scsihba-32898.html">18.&nbsp;&nbsp;SCSI Host Bus Adapter Drivers</a></p>
<p class="toc level2"><a href="gld-1.html">19.&nbsp;&nbsp;Drivers for Network Devices</a></p>
<p class="toc level2"><a href="usb-1.html">20.&nbsp;&nbsp;USB Drivers</a></p>
<p class="toc level1 tocsp"><a href="eqbvo.html">Part&nbsp;III&nbsp;Building a Device Driver</a></p>
<p class="toc level2"><a href="loading-15035.html">21.&nbsp;&nbsp;Compiling, Loading, Packaging, and Testing Drivers</a></p>
<p class="toc level2"><a href="debug-60.html">22.&nbsp;&nbsp;Debugging, Testing, and Tuning Device Drivers</a></p>
<p class="toc level2"><a href="coding-practices.html">23.&nbsp;&nbsp;Recommended Coding Practices</a></p>
<p class="toc level1 tocsp"><a href="eqbva.html">Part&nbsp;IV&nbsp;Appendixes</a></p>
<p class="toc level2"><a href="hwovr-18191.html">A.&nbsp;&nbsp;Hardware Overview</a></p>
<p class="toc level2"><a href="ddidkisvc-29227.html">B.&nbsp;&nbsp;Summary of Solaris DDI/DKI Services</a></p>
<p class="toc level3"><a href="ddidkisvc-8.html">Module Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-9.html">Device Information Tree Node (<tt>dev_info_t</tt>) Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-12.html">Device (<tt>dev_t</tt>) Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-14.html">Property Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-17.html">Device Software State Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-19.html">Memory Allocation and Deallocation Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-26.html">Kernel Thread Control and Synchronization Functions</a></p>
<p class="toc level3"><a href="geywh.html">Task Queue Management Functions</a></p>
<div class="onpage">
<p class="toc level3"><a href="">Interrupt Functions</a></p>
</div>
<p class="toc level3"><a href="ddidkisvc-32.html">Programmed I/O Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-36.html">Direct Memory Access (DMA) Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-39.html">User Space Access Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-42.html">User Process Event Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-44.html">User Process Information Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-47.html">User Application Kernel and Device Access Functions</a></p>
<p class="toc level3"><a href="fcaon.html">Time-Related Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-53.html">Power Management Functions</a></p>
<p class="toc level3"><a href="geyxr.html">Fault Management Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-55.html">Kernel Statistics Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-57.html">Kernel Logging and Printing Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-59.html">Buffered I/O Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-61.html">Virtual Memory Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-64.html">Device ID Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-66.html">SCSI Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-69.html">Resource Map Management Functions</a></p>
<p class="toc level3"><a href="ddidkisvc-71.html">System Global State</a></p>
<p class="toc level3"><a href="ddidkisvc-73.html">Utility Functions</a></p>
<p class="toc level2 tocsp"><a href="lp64-35004.html">C.&nbsp;&nbsp;Making a Device Driver 64-Bit Ready</a></p>
<p class="toc level2"><a href="euazz.html">D.&nbsp;&nbsp;Console Frame Buffer Drivers</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="ddidkisvc-30"></a><h3>Interrupt Functions</h3>
<a name="indexterm-1264"></a><p>The interrupt functions are:</p><dl><dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-add-handler-9f?a=view"><tt>ddi_intr_add_handler</tt>(9F)</a></dt>
<dd><p>Adds an interrupt handler.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-add-softint-9f?a=view"><tt>ddi_intr_add_softint</tt>(9F)</a></dt>
<dd><p>Adds a soft interrupt handler.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-alloc-9f?a=view"><tt>ddi_intr_alloc</tt>(9F)</a></dt>
<dd><p>Allocates system resources and interrupt vectors for the specified type of interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-block-disable-9f?a=view"><tt>ddi_intr_block_disable</tt>(9F)</a></dt>
<dd><p>Disables the specified range of interrupts. For MSI only.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-block-enable-9f?a=view"><tt>ddi_intr_block_enable</tt>(9F)</a></dt>
<dd><p>Enables the specified range of interrupts. For MSI only.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-clr-mask-9f?a=view"><tt>ddi_intr_clr_mask</tt>(9F)</a></dt>
<dd><p>Clears an interrupt mask if the specified interrupt is enabled.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-disable-9f?a=view"><tt>ddi_intr_disable</tt>(9F)</a></dt>
<dd><p>Disables the specified interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-dup-handler-9f?a=view"><tt>ddi_intr_dup_handler</tt>(9F)</a></dt>
<dd><p>Use with MSI-X only. Copies an address and data pair for an allocated interrupt vector to an unused interrupt vector on the same device.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-enable-9f?a=view"><tt>ddi_intr_enable</tt>(9F)</a></dt>
<dd><p>Enables the specified interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-free-9f?a=view"><tt>ddi_intr_free</tt>(9F)</a></dt>
<dd><p>Releases the system resources and interrupt vectors for a specified interrupt handle.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-cap-9f?a=view"><tt>ddi_intr_get_cap</tt>(9F)</a></dt>
<dd><p>Returns interrupt capability flags for the specified interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-hilevel-pri-9f?a=view"><tt>ddi_intr_get_hilevel_pri</tt>(9F)</a></dt>
<dd><p>Returns the minimum priority level for a high-level interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-navail-9f?a=view"><tt>ddi_intr_get_navail</tt>(9F)</a></dt>
<dd><p>Returns the number of interrupts available for a particular hardware device and given interrupt type.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-nintrs-9f?a=view"><tt>ddi_intr_get_nintrs</tt>(9F)</a></dt>
<dd><p>Get the number of interrupts that the device supports for the given interrupt type.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-pending-9f?a=view"><tt>ddi_intr_get_pending</tt>(9F)</a></dt>
<dd><p>Read the interrupt pending bit if one is supported by either the host bridge or the device.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-pri-9f?a=view"><tt>ddi_intr_get_pri</tt>(9F)</a></dt>
<dd><p>Returns the current software priority setting for the specified interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-softint-pri-9f?a=view"><tt>ddi_intr_get_softint_pri</tt>(9F)</a></dt>
<dd><p>Returns the soft interrupt priority for the specified interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-supported-types-9f?a=view"><tt>ddi_intr_get_supported_types</tt>(9F)</a></dt>
<dd><p>Returns the hardware interrupt types that are supported by both the device and the host.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-remove-handler-9f?a=view"><tt>ddi_intr_remove_handler</tt>(9F)</a></dt>
<dd><p>Removes the specified interrupt handler.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-remove-softint-9f?a=view"><tt>ddi_intr_remove_softint</tt>(9F)</a></dt>
<dd><p>Remove the specified soft interrupt handler.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-set-cap-9f?a=view"><tt>ddi_intr_set_cap</tt>(9F)</a></dt>
<dd><p>Sets the DDI_INTR_FLAG_LEVEL or DDI_INTR_FLAG_EDGE flag for the specified interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-set-mask-9f?a=view"><tt>ddi_intr_set_mask</tt>(9F)</a></dt>
<dd><p>Sets an interrupt mask if the specified interrupt is enabled.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-set-pri-9f?a=view"><tt>ddi_intr_set_pri</tt>(9F)</a></dt>
<dd><p>Sets the interrupt priority level for the specified interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-set-softint-pri-9f?a=view"><tt>ddi_intr_set_softint_pri</tt>(9F)</a></dt>
<dd><p>Changes the relative soft interrupt priority for the specified soft interrupt.</p></dd>
<dt><a href="http://docs.sun.com/doc/819-2256/ddi-intr-trigger-softint-9f?a=view"><tt>ddi_intr_trigger_softint</tt>(9F)</a></dt>
<dd><p>Trigger the specified soft interrupt.</p></dd>
</dl>
<p>To take advantage of the features of the new framework, use the
above interfaces. Do not use the deprecated interfaces that are listed in the
following table. These deprecated interfaces are retained for compatibility purposes only.</p><a name="fwbly"></a><h6>Table&nbsp;B-3 Deprecated Interrupt Functions</h6><a name="indexterm-1265"></a><table><col width="44%"><col width="55%"><tr><th align="left" valign="top" scope="column"><p>Deprecated Interrupt Functions</p></th>
<th align="left" valign="top" scope="column"><p>Replacements</p></th>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_add_intr</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p>Three-step process:</p>
<ol><li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-alloc-9f?a=view"><tt>ddi_intr_alloc</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-add-handler-9f?a=view"><tt>ddi_intr_add_handler</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-enable-9f?a=view"><tt>ddi_intr_enable</tt>(9F)</a></p></li></ol>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_add_softintr</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-add-softint-9f?a=view"><tt>ddi_intr_add_softint</tt>(9F)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_dev_nintrs</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-nintrs-9f?a=view"><tt>ddi_intr_get_nintrs</tt>(9F)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_get_iblock_cookie</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p>Three-step
process:</p>
<ol><li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-alloc-9f?a=view"><tt>ddi_intr_alloc</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-pri-9f?a=view"><tt>ddi_intr_get_pri</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-free-9f?a=view"><tt>ddi_intr_free</tt>(9F)</a></p></li></ol>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_get_soft_iblock_cookie</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p>Three-step process:</p>
<ol><li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-add-softint-9f?a=view"><tt>ddi_intr_add_softint</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-softint-pri-9f?a=view"><tt>ddi_intr_get_softint_pri</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-remove-softint-9f?a=view"><tt>ddi_intr_remove_softint</tt>(9F)</a></p></li></ol>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_intr_hilevel</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p>Three-step process:</p>
<ol><li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-alloc-9f?a=view"><tt>ddi_intr_alloc</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-get-hilevel-pri-9f?a=view"><tt>ddi_intr_get_hilevel_pri</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-free-9f?a=view"><tt>ddi_intr_free</tt>(9F)</a></p></li></ol>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_remove_intr</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p>Three-step process:</p>
<ol><li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-disable-9f?a=view"><tt>ddi_intr_disable</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-remove-handler-9f?a=view"><tt>ddi_intr_remove_handler</tt>(9F)</a></p></li>
<li><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-free-9f?a=view"><tt>ddi_intr_free</tt>(9F)</a></p></li></ol>
</td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_remove_softintr</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-remove-softint-9f?a=view"><tt>ddi_intr_remove_softint</tt>(9F)</a></p></td>
</tr>
<tr><td align="left" valign="top" scope="row"><p><tt>ddi_trigger_softintr</tt>(9F)</p></td>
<td align="left" valign="top" scope="row"><p><a href="http://docs.sun.com/doc/819-2256/ddi-intr-trigger-softint-9f?a=view"><tt>ddi_intr_trigger_softint</tt>(9F)</a></p></td>
</tr>
</table>
         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="geywh.html">Previous</a>
             </td>
             <td align="right">
                 <a href="ddidkisvc-32.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

